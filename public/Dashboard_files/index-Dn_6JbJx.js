var Dge=Object.defineProperty;var vL=t=>{throw TypeError(t)};var Rge=(t,e,n)=>e in t?Dge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ie=(t,e,n)=>Rge(t,typeof e!="symbol"?e+"":e,n),yL=(t,e,n)=>e.has(t)||vL("Cannot "+n);var qa=(t,e,n)=>(yL(t,e,"read from private field"),n?n.call(t):e.get(t)),lm=(t,e,n)=>e.has(t)?vL("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),cm=(t,e,n,r)=>(yL(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function Mge(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var No=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sX(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var yT={exports:{}},Uy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL;function Ige(){if(xL)return Uy;xL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return Uy.Fragment=e,Uy.jsx=n,Uy.jsxs=n,Uy}var bL;function Oge(){return bL||(bL=1,yT.exports=Ige()),yT.exports}var c=Oge(),xT={exports:{}},kn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL;function Pge(){if(wL)return kn;wL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=f&&B[f]||B["@@iterator"],typeof B=="function"?B:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function C(B,Z,le){this.props=B,this.context=Z,this.refs=b,this.updater=le||g}C.prototype.isReactComponent={},C.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function S(){}S.prototype=C.prototype;function w(B,Z,le){this.props=B,this.context=Z,this.refs=b,this.updater=le||g}var E=w.prototype=new S;E.constructor=w,x(E,C.prototype),E.isPureReactComponent=!0;var T=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function j(B,Z,le,G,K,te){return le=te.ref,{$$typeof:t,type:B,key:Z,ref:le!==void 0?le:null,props:te}}function D(B,Z){return j(B.type,Z,void 0,void 0,void 0,B.props)}function z(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function F(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(le){return Z[le]})}var R=/\/+/g;function L(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?F(""+B.key):Z.toString(36)}function O(){}function H(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(O,O):(B.status="pending",B.then(function(Z){B.status==="pending"&&(B.status="fulfilled",B.value=Z)},function(Z){B.status==="pending"&&(B.status="rejected",B.reason=Z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function P(B,Z,le,G,K){var te=typeof B;(te==="undefined"||te==="boolean")&&(B=null);var ie=!1;if(B===null)ie=!0;else switch(te){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(B.$$typeof){case t:case e:ie=!0;break;case d:return ie=B._init,P(ie(B._payload),Z,le,G,K)}}if(ie)return K=K(B),ie=G===""?"."+L(B,0):G,T(K)?(le="",ie!=null&&(le=ie.replace(R,"$&/")+"/"),P(K,Z,le,"",function(se){return se})):K!=null&&(z(K)&&(K=D(K,le+(K.key==null||B&&B.key===K.key?"":(""+K.key).replace(R,"$&/")+"/")+ie)),Z.push(K)),1;ie=0;var de=G===""?".":G+":";if(T(B))for(var fe=0;fe<B.length;fe++)G=B[fe],te=de+L(G,fe),ie+=P(G,Z,le,te,K);else if(fe=m(B),typeof fe=="function")for(B=fe.call(B),fe=0;!(G=B.next()).done;)G=G.value,te=de+L(G,fe++),ie+=P(G,Z,le,te,K);else if(te==="object"){if(typeof B.then=="function")return P(H(B),Z,le,G,K);throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ie}function I(B,Z,le){if(B==null)return B;var G=[],K=0;return P(B,G,"","",function(te){return Z.call(le,te,K++)}),G}function U(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(le){(B._status===0||B._status===-1)&&(B._status=1,B._result=le)},function(le){(B._status===0||B._status===-1)&&(B._status=2,B._result=le)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var W=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Y(){}return kn.Children={map:I,forEach:function(B,Z,le){I(B,function(){Z.apply(this,arguments)},le)},count:function(B){var Z=0;return I(B,function(){Z++}),Z},toArray:function(B){return I(B,function(Z){return Z})||[]},only:function(B){if(!z(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},kn.Component=C,kn.Fragment=n,kn.Profiler=s,kn.PureComponent=w,kn.StrictMode=r,kn.Suspense=l,kn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,kn.__COMPILER_RUNTIME={__proto__:null,c:function(B){return _.H.useMemoCache(B)}},kn.cache=function(B){return function(){return B.apply(null,arguments)}},kn.cloneElement=function(B,Z,le){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var G=x({},B.props),K=B.key,te=void 0;if(Z!=null)for(ie in Z.ref!==void 0&&(te=void 0),Z.key!==void 0&&(K=""+Z.key),Z)!A.call(Z,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Z.ref===void 0||(G[ie]=Z[ie]);var ie=arguments.length-2;if(ie===1)G.children=le;else if(1<ie){for(var de=Array(ie),fe=0;fe<ie;fe++)de[fe]=arguments[fe+2];G.children=de}return j(B.type,K,void 0,void 0,te,G)},kn.createContext=function(B){return B={$$typeof:i,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},kn.createElement=function(B,Z,le){var G,K={},te=null;if(Z!=null)for(G in Z.key!==void 0&&(te=""+Z.key),Z)A.call(Z,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(K[G]=Z[G]);var ie=arguments.length-2;if(ie===1)K.children=le;else if(1<ie){for(var de=Array(ie),fe=0;fe<ie;fe++)de[fe]=arguments[fe+2];K.children=de}if(B&&B.defaultProps)for(G in ie=B.defaultProps,ie)K[G]===void 0&&(K[G]=ie[G]);return j(B,te,void 0,void 0,null,K)},kn.createRef=function(){return{current:null}},kn.forwardRef=function(B){return{$$typeof:o,render:B}},kn.isValidElement=z,kn.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:U}},kn.memo=function(B,Z){return{$$typeof:u,type:B,compare:Z===void 0?null:Z}},kn.startTransition=function(B){var Z=_.T,le={};_.T=le;try{var G=B(),K=_.S;K!==null&&K(le,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(Y,W)}catch(te){W(te)}finally{_.T=Z}},kn.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},kn.use=function(B){return _.H.use(B)},kn.useActionState=function(B,Z,le){return _.H.useActionState(B,Z,le)},kn.useCallback=function(B,Z){return _.H.useCallback(B,Z)},kn.useContext=function(B){return _.H.useContext(B)},kn.useDebugValue=function(){},kn.useDeferredValue=function(B,Z){return _.H.useDeferredValue(B,Z)},kn.useEffect=function(B,Z,le){var G=_.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(B,Z)},kn.useId=function(){return _.H.useId()},kn.useImperativeHandle=function(B,Z,le){return _.H.useImperativeHandle(B,Z,le)},kn.useInsertionEffect=function(B,Z){return _.H.useInsertionEffect(B,Z)},kn.useLayoutEffect=function(B,Z){return _.H.useLayoutEffect(B,Z)},kn.useMemo=function(B,Z){return _.H.useMemo(B,Z)},kn.useOptimistic=function(B,Z){return _.H.useOptimistic(B,Z)},kn.useReducer=function(B,Z,le){return _.H.useReducer(B,Z,le)},kn.useRef=function(B){return _.H.useRef(B)},kn.useState=function(B){return _.H.useState(B)},kn.useSyncExternalStore=function(B,Z,le){return _.H.useSyncExternalStore(B,Z,le)},kn.useTransition=function(){return _.H.useTransition()},kn.version="19.1.1",kn}var CL;function u8(){return CL||(CL=1,xT.exports=Pge()),xT.exports}var y=u8();const Ce=Pa(y),p1=Mge({__proto__:null,default:Ce},[y]);var bT={exports:{}},Hy={},wT={exports:{}},CT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SL;function Fge(){return SL||(SL=1,(function(t){function e(I,U){var W=I.length;I.push(U);e:for(;0<W;){var Y=W-1>>>1,B=I[Y];if(0<s(B,U))I[Y]=U,I[W]=B,W=Y;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var U=I[0],W=I.pop();if(W!==U){I[0]=W;e:for(var Y=0,B=I.length,Z=B>>>1;Y<Z;){var le=2*(Y+1)-1,G=I[le],K=le+1,te=I[K];if(0>s(G,W))K<B&&0>s(te,G)?(I[Y]=te,I[K]=W,Y=K):(I[Y]=G,I[le]=W,Y=le);else if(K<B&&0>s(te,W))I[Y]=te,I[K]=W,Y=K;else break e}}return U}function s(I,U){var W=I.sortIndex-U.sortIndex;return W!==0?W:I.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,m=3,g=!1,x=!1,b=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function T(I){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=I)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function _(I){if(b=!1,T(I),!x)if(n(l)!==null)x=!0,A||(A=!0,L());else{var U=n(u);U!==null&&P(_,U.startTime-I)}}var A=!1,j=-1,D=5,z=-1;function F(){return C?!0:!(t.unstable_now()-z<D)}function R(){if(C=!1,A){var I=t.unstable_now();z=I;var U=!0;try{e:{x=!1,b&&(b=!1,w(j),j=-1),g=!0;var W=m;try{t:{for(T(I),f=n(l);f!==null&&!(f.expirationTime>I&&F());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,m=f.priorityLevel;var B=Y(f.expirationTime<=I);if(I=t.unstable_now(),typeof B=="function"){f.callback=B,T(I),U=!0;break t}f===n(l)&&r(l),T(I)}else r(l);f=n(l)}if(f!==null)U=!0;else{var Z=n(u);Z!==null&&P(_,Z.startTime-I),U=!1}}break e}finally{f=null,m=W,g=!1}U=void 0}}finally{U?L():A=!1}}}var L;if(typeof E=="function")L=function(){E(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,H=O.port2;O.port1.onmessage=R,L=function(){H.postMessage(null)}}else L=function(){S(R,0)};function P(I,U){j=S(function(){I(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var W=m;m=U;try{return I()}finally{m=W}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=m;m=I;try{return U()}finally{m=W}},t.unstable_scheduleCallback=function(I,U,W){var Y=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,I){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,I={id:d++,callback:U,priorityLevel:I,startTime:W,expirationTime:B,sortIndex:-1},W>Y?(I.sortIndex=W,e(u,I),n(l)===null&&I===n(u)&&(b?(w(j),j=-1):b=!0,P(_,W-Y))):(I.sortIndex=B,e(l,I),x||g||(x=!0,A||(A=!0,L()))),I},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(I){var U=m;return function(){var W=m;m=U;try{return I.apply(this,arguments)}finally{m=W}}}})(CT)),CT}var kL;function Bge(){return kL||(kL=1,wT.exports=Fge()),wT.exports}var ST={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EL;function Lge(){if(EL)return ti;EL=1;var t=u8();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ti.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,d)},ti.flushSync=function(l){var u=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=u,r.p=d,r.d.f()}},ti.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ti.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ti.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ti.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ti.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ti.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ti.requestFormReset=function(l){r.d.r(l)},ti.unstable_batchedUpdates=function(l,u){return l(u)},ti.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},ti.useFormStatus=function(){return i.H.useHostTransitionStatus()},ti.version="19.1.1",ti}var _L;function aX(){if(_L)return ST.exports;_L=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ST.exports=Lge(),ST.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TL;function zge(){if(TL)return Hy;TL=1;var t=Bge(),e=u8(),n=aX();function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function a(h){var p=h,v=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(v=p.return),h=p.return;while(h)}return p.tag===3?v:null}function i(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function o(h){if(a(h)!==h)throw Error(r(188))}function l(h){var p=h.alternate;if(!p){if(p=a(h),p===null)throw Error(r(188));return p!==h?null:h}for(var v=h,k=p;;){var N=v.return;if(N===null)break;var M=N.alternate;if(M===null){if(k=N.return,k!==null){v=k;continue}break}if(N.child===M.child){for(M=N.child;M;){if(M===v)return o(N),h;if(M===k)return o(N),p;M=M.sibling}throw Error(r(188))}if(v.return!==k.return)v=N,k=M;else{for(var X=!1,ee=N.child;ee;){if(ee===v){X=!0,v=N,k=M;break}if(ee===k){X=!0,k=N,v=M;break}ee=ee.sibling}if(!X){for(ee=M.child;ee;){if(ee===v){X=!0,v=M,k=N;break}if(ee===k){X=!0,k=M,v=N;break}ee=ee.sibling}if(!X)throw Error(r(189))}}if(v.alternate!==k)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?h:p}function u(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=u(h),p!==null)return p;h=h.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(h){return h===null||typeof h!="object"?null:(h=R&&h[R]||h["@@iterator"],typeof h=="function"?h:null)}var O=Symbol.for("react.client.reference");function H(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===O?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case x:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList";case z:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case g:return"Portal";case E:return(h.displayName||"Context")+".Provider";case w:return(h._context.displayName||"Context")+".Consumer";case T:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case j:return p=h.displayName||null,p!==null?p:H(h.type)||"Memo";case D:p=h._payload,h=h._init;try{return H(h(p))}catch{}}return null}var P=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Y=[],B=-1;function Z(h){return{current:h}}function le(h){0>B||(h.current=Y[B],Y[B]=null,B--)}function G(h,p){B++,Y[B]=h.current,h.current=p}var K=Z(null),te=Z(null),ie=Z(null),de=Z(null);function fe(h,p){switch(G(ie,p),G(te,h),G(K,null),p.nodeType){case 9:case 11:h=(h=p.documentElement)&&(h=h.namespaceURI)?qB(h):0;break;default:if(h=p.tagName,p=p.namespaceURI)p=qB(p),h=GB(p,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}le(K),G(K,h)}function se(){le(K),le(te),le(ie)}function ce(h){h.memoizedState!==null&&G(de,h);var p=K.current,v=GB(p,h.type);p!==v&&(G(te,h),G(K,v))}function ue(h){te.current===h&&(le(K),le(te)),de.current===h&&(le(de),Fy._currentValue=W)}var oe=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,ve=t.unstable_cancelCallback,He=t.unstable_shouldYield,nt=t.unstable_requestPaint,Me=t.unstable_now,$e=t.unstable_getCurrentPriorityLevel,Le=t.unstable_ImmediatePriority,ae=t.unstable_UserBlockingPriority,pe=t.unstable_NormalPriority,_e=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,Je=t.log,qe=t.unstable_setDisableYieldValue,xe=null,Ae=null;function Fe(h){if(typeof Je=="function"&&qe(h),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(xe,h)}catch{}}var Qe=Math.clz32?Math.clz32:Tt,vt=Math.log,at=Math.LN2;function Tt(h){return h>>>=0,h===0?32:31-(vt(h)/at|0)|0}var wt=256,cn=4194304;function $t(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function hn(h,p,v){var k=h.pendingLanes;if(k===0)return 0;var N=0,M=h.suspendedLanes,X=h.pingedLanes;h=h.warmLanes;var ee=k&134217727;return ee!==0?(k=ee&~M,k!==0?N=$t(k):(X&=ee,X!==0?N=$t(X):v||(v=ee&~h,v!==0&&(N=$t(v))))):(ee=k&~M,ee!==0?N=$t(ee):X!==0?N=$t(X):v||(v=k&~h,v!==0&&(N=$t(v)))),N===0?0:p!==0&&p!==N&&(p&M)===0&&(M=N&-N,v=p&-p,M>=v||M===32&&(v&4194048)!==0)?p:N}function Kn(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function jn(h,p){switch(h){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var h=wt;return wt<<=1,(wt&4194048)===0&&(wt=256),h}function za(){var h=cn;return cn<<=1,(cn&62914560)===0&&(cn=4194304),h}function $a(h){for(var p=[],v=0;31>v;v++)p.push(h);return p}function Dn(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function mr(h,p,v,k,N,M){var X=h.pendingLanes;h.pendingLanes=v,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=v,h.entangledLanes&=v,h.errorRecoveryDisabledLanes&=v,h.shellSuspendCounter=0;var ee=h.entanglements,ye=h.expirationTimes,De=h.hiddenUpdates;for(v=X&~v;0<v;){var Ve=31-Qe(v),et=1<<Ve;ee[Ve]=0,ye[Ve]=-1;var Oe=De[Ve];if(Oe!==null)for(De[Ve]=null,Ve=0;Ve<Oe.length;Ve++){var Pe=Oe[Ve];Pe!==null&&(Pe.lane&=-536870913)}v&=~et}k!==0&&Et(h,k,0),M!==0&&N===0&&h.tag!==0&&(h.suspendedLanes|=M&~(X&~p))}function Et(h,p,v){h.pendingLanes|=p,h.suspendedLanes&=~p;var k=31-Qe(p);h.entangledLanes|=p,h.entanglements[k]=h.entanglements[k]|1073741824|v&4194090}function fn(h,p){var v=h.entangledLanes|=p;for(h=h.entanglements;v;){var k=31-Qe(v),N=1<<k;N&p|h[k]&p&&(h[k]|=p),v&=~N}}function mn(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Sn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function vr(){var h=U.p;return h!==0?h:(h=window.event,h===void 0?32:dL(h.type))}function er(h,p){var v=U.p;try{return U.p=h,p()}finally{U.p=v}}var qt=Math.random().toString(36).slice(2),Vn="__reactFiber$"+qt,xn="__reactProps$"+qt,Xn="__reactContainer$"+qt,ta="__reactEvents$"+qt,us="__reactListeners$"+qt,cr="__reactHandles$"+qt,vi="__reactResources$"+qt,yi="__reactMarker$"+qt;function Pu(h){delete h[Vn],delete h[xn],delete h[ta],delete h[us],delete h[cr]}function Yo(h){var p=h[Vn];if(p)return p;for(var v=h.parentNode;v;){if(p=v[Xn]||v[Vn]){if(v=p.alternate,p.child!==null||v!==null&&v.child!==null)for(h=XB(h);h!==null;){if(v=h[Vn])return v;h=XB(h)}return p}h=v,v=h.parentNode}return null}function Xo(h){if(h=h[Vn]||h[Xn]){var p=h.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return h}return null}function es(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h.stateNode;throw Error(r(33))}function Jo(h){var p=h[vi];return p||(p=h[vi]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Yr(h){h[yi]=!0}var Fu=new Set,We={};function Ke(h,p){ft(h,p),ft(h+"Capture",p)}function ft(h,p){for(We[h]=p,h=0;h<p.length;h++)Fu.add(p[h])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nn={},ln={};function rn(h){return oe.call(ln,h)?!0:oe.call(nn,h)?!1:Jt.test(h)?ln[h]=!0:(nn[h]=!0,!1)}function Gt(h,p,v){if(rn(p))if(v===null)h.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":h.removeAttribute(p);return;case"boolean":var k=p.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){h.removeAttribute(p);return}}h.setAttribute(p,""+v)}}function Qt(h,p,v){if(v===null)h.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(p);return}h.setAttribute(p,""+v)}}function Rn(h,p,v,k){if(k===null)h.removeAttribute(v);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(v);return}h.setAttributeNS(p,v,""+k)}}var bs,Er;function Ls(h){if(bs===void 0)try{throw Error()}catch(v){var p=v.stack.trim().match(/\n( *(at )?)/);bs=p&&p[1]||"",Er=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+h+Er}var zs=!1;function $s(h,p){if(!h||zs)return"";zs=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(p){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(Pe){var Oe=Pe}Reflect.construct(h,[],et)}else{try{et.call()}catch(Pe){Oe=Pe}h.call(et.prototype)}}else{try{throw Error()}catch(Pe){Oe=Pe}(et=h())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(Pe){if(Pe&&Oe&&typeof Pe.stack=="string")return[Pe.stack,Oe.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=k.DetermineComponentFrameRoot(),X=M[0],ee=M[1];if(X&&ee){var ye=X.split(`
`),De=ee.split(`
`);for(N=k=0;k<ye.length&&!ye[k].includes("DetermineComponentFrameRoot");)k++;for(;N<De.length&&!De[N].includes("DetermineComponentFrameRoot");)N++;if(k===ye.length||N===De.length)for(k=ye.length-1,N=De.length-1;1<=k&&0<=N&&ye[k]!==De[N];)N--;for(;1<=k&&0<=N;k--,N--)if(ye[k]!==De[N]){if(k!==1||N!==1)do if(k--,N--,0>N||ye[k]!==De[N]){var Ve=`
`+ye[k].replace(" at new "," at ");return h.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",h.displayName)),Ve}while(1<=k&&0<=N);break}}}finally{zs=!1,Error.prepareStackTrace=v}return(v=h?h.displayName||h.name:"")?Ls(v):""}function Qo(h){switch(h.tag){case 26:case 27:case 5:return Ls(h.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 15:return $s(h.type,!1);case 11:return $s(h.type.render,!1);case 1:return $s(h.type,!0);case 31:return Ls("Activity");default:return""}}function xi(h){try{var p="";do p+=Qo(h),h=h.return;while(h);return p}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function $r(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function xt(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function un(h){var p=xt(h)?"checked":"value",v=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),k=""+h[p];if(!h.hasOwnProperty(p)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var N=v.get,M=v.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return N.call(this)},set:function(X){k=""+X,M.call(this,X)}}),Object.defineProperty(h,p,{enumerable:v.enumerable}),{getValue:function(){return k},setValue:function(X){k=""+X},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function bn(h){h._valueTracker||(h._valueTracker=un(h))}function rr(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var v=p.getValue(),k="";return h&&(k=xt(h)?h.checked?"true":"false":h.value),h=k,h!==v?(p.setValue(h),!0):!1}function _r(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Zo=/[\n"\\]/g;function ws(h){return h.replace(Zo,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function jc(h,p,v,k,N,M,X,ee){h.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?h.type=X:h.removeAttribute("type"),p!=null?X==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+$r(p)):h.value!==""+$r(p)&&(h.value=""+$r(p)):X!=="submit"&&X!=="reset"||h.removeAttribute("value"),p!=null?Lu(h,X,$r(p)):v!=null?Lu(h,X,$r(v)):k!=null&&h.removeAttribute("value"),N==null&&M!=null&&(h.defaultChecked=!!M),N!=null&&(h.checked=N&&typeof N!="function"&&typeof N!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?h.name=""+$r(ee):h.removeAttribute("name")}function Bu(h,p,v,k,N,M,X,ee){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(h.type=M),p!=null||v!=null){if(!(M!=="submit"&&M!=="reset"||p!=null))return;v=v!=null?""+$r(v):"",p=p!=null?""+$r(p):v,ee||p===h.value||(h.value=p),h.defaultValue=p}k=k??N,k=typeof k!="function"&&typeof k!="symbol"&&!!k,h.checked=ee?h.checked:!!k,h.defaultChecked=!!k,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(h.name=X)}function Lu(h,p,v){p==="number"&&_r(h.ownerDocument)===h||h.defaultValue===""+v||(h.defaultValue=""+v)}function Dc(h,p,v,k){if(h=h.options,p){p={};for(var N=0;N<v.length;N++)p["$"+v[N]]=!0;for(v=0;v<h.length;v++)N=p.hasOwnProperty("$"+h[v].value),h[v].selected!==N&&(h[v].selected=N),N&&k&&(h[v].defaultSelected=!0)}else{for(v=""+$r(v),p=null,N=0;N<h.length;N++){if(h[N].value===v){h[N].selected=!0,k&&(h[N].defaultSelected=!0);return}p!==null||h[N].disabled||(p=h[N])}p!==null&&(p.selected=!0)}}function F0(h,p,v){if(p!=null&&(p=""+$r(p),p!==h.value&&(h.value=p),v==null)){h.defaultValue!==p&&(h.defaultValue=p);return}h.defaultValue=v!=null?""+$r(v):""}function Rc(h,p,v,k){if(p==null){if(k!=null){if(v!=null)throw Error(r(92));if(P(k)){if(1<k.length)throw Error(r(93));k=k[0]}v=k}v==null&&(v=""),p=v}v=$r(p),h.defaultValue=v,k=h.textContent,k===v&&k!==""&&k!==null&&(h.value=k)}function Ca(h,p){if(p){var v=h.firstChild;if(v&&v===h.lastChild&&v.nodeType===3){v.nodeValue=p;return}}h.textContent=p}var Ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(h,p,v){var k=p.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?k?h.setProperty(p,""):p==="float"?h.cssFloat="":h[p]="":k?h.setProperty(p,v):typeof v!="number"||v===0||Ml.has(p)?p==="float"?h.cssFloat=v:h[p]=(""+v).trim():h[p]=v+"px"}function B0(h,p,v){if(p!=null&&typeof p!="object")throw Error(r(62));if(h=h.style,v!=null){for(var k in v)!v.hasOwnProperty(k)||p!=null&&p.hasOwnProperty(k)||(k.indexOf("--")===0?h.setProperty(k,""):k==="float"?h.cssFloat="":h[k]="");for(var N in p)k=p[N],p.hasOwnProperty(N)&&v[N]!==k&&el(h,N,k)}else for(var M in p)p.hasOwnProperty(M)&&el(h,M,p[M])}function $i(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function th(h){return Zv.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var Vf=null;function nh(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Cs=null,Il=null;function qf(h){var p=Xo(h);if(p&&(h=p.stateNode)){var v=h[xn]||null;e:switch(h=p.stateNode,p.type){case"input":if(jc(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),p=v.name,v.type==="radio"&&p!=null){for(v=h;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+ws(""+p)+'"][type="radio"]'),p=0;p<v.length;p++){var k=v[p];if(k!==h&&k.form===h.form){var N=k[xn]||null;if(!N)throw Error(r(90));jc(k,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(p=0;p<v.length;p++)k=v[p],k.form===h.form&&rr(k)}break e;case"textarea":F0(h,v.value,v.defaultValue);break e;case"select":p=v.value,p!=null&&Dc(h,!!v.multiple,p,!1)}}}var Mc=!1;function rh(h,p,v){if(Mc)return h(p,v);Mc=!0;try{var k=h(p);return k}finally{if(Mc=!1,(Cs!==null||Il!==null)&&(T2(),Cs&&(p=Cs,h=Il,Il=Cs=null,qf(p),h)))for(p=0;p<h.length;p++)qf(h[p])}}function tl(h,p){var v=h.stateNode;if(v===null)return null;var k=v[xn]||null;if(k===null)return null;v=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(v&&typeof v!="function")throw Error(r(231,p,typeof v));return v}var ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sh=!1;if(ho)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){sh=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{sh=!1}var fo=null,Ui=null,zu=null;function ah(){if(zu)return zu;var h,p=Ui,v=p.length,k,N="value"in fo?fo.value:fo.textContent,M=N.length;for(h=0;h<v&&p[h]===N[h];h++);var X=v-h;for(k=1;k<=X&&p[v-k]===N[M-k];k++);return zu=N.slice(h,1<k?1-k:void 0)}function ih(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function oh(){return!0}function V(){return!1}function ne(h){function p(v,k,N,M,X){this._reactName=v,this._targetInst=N,this.type=k,this.nativeEvent=M,this.target=X,this.currentTarget=null;for(var ee in h)h.hasOwnProperty(ee)&&(v=h[ee],this[ee]=v?v(M):M[ee]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?oh:V,this.isPropagationStopped=V,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=oh)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=oh)},persist:function(){},isPersistent:oh}),p}var we={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ze=ne(we),Zt=d({},we,{view:0,detail:0}),Ft=ne(Zt),qn,Bn,Ur,Yn=d({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:__,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ur&&(Ur&&h.type==="mousemove"?(qn=h.screenX-Ur.screenX,Bn=h.screenY-Ur.screenY):Bn=qn=0,Ur=h),qn)},movementY:function(h){return"movementY"in h?h.movementY:Bn}}),na=ne(Yn),Za=d({},Yn,{dataTransfer:0}),Ds=ne(Za),Sa=d({},Zt,{relatedTarget:0}),Rs=ne(Sa),Ic=d({},we,{animationName:0,elapsedTime:0,pseudoElement:0}),Pl=ne(Ic),$u=d({},we,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Ww=ne($u),L0=d({},we,{data:0}),Gf=ne(L0),z0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H0e(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=U0e[h])?!!p[h]:!1}function __(){return H0e}var V0e=d({},Zt,{key:function(h){if(h.key){var p=z0e[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=ih(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?$0e[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:__,charCode:function(h){return h.type==="keypress"?ih(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?ih(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),q0e=ne(V0e),G0e=d({},Yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z9=ne(G0e),W0e=d({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:__}),K0e=ne(W0e),Y0e=d({},we,{propertyName:0,elapsedTime:0,pseudoElement:0}),X0e=ne(Y0e),J0e=d({},Yn,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Q0e=ne(J0e),Z0e=d({},we,{newState:0,oldState:0}),epe=ne(Z0e),tpe=[9,13,27,32],T_=ho&&"CompositionEvent"in window,ey=null;ho&&"documentMode"in document&&(ey=document.documentMode);var npe=ho&&"TextEvent"in window&&!ey,eP=ho&&(!T_||ey&&8<ey&&11>=ey),tP=" ",nP=!1;function rP(h,p){switch(h){case"keyup":return tpe.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sP(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var z0=!1;function rpe(h,p){switch(h){case"compositionend":return sP(p);case"keypress":return p.which!==32?null:(nP=!0,tP);case"textInput":return h=p.data,h===tP&&nP?null:h;default:return null}}function spe(h,p){if(z0)return h==="compositionend"||!T_&&rP(h,p)?(h=ah(),zu=Ui=fo=null,z0=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return eP&&p.locale!=="ko"?null:p.data;default:return null}}var ape={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aP(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!ape[h.type]:p==="textarea"}function iP(h,p,v,k){Cs?Il?Il.push(k):Il=[k]:Cs=k,p=M2(p,"onChange"),0<p.length&&(v=new ze("onChange","change",null,v,k),h.push({event:v,listeners:p}))}var ty=null,ny=null;function ipe(h){zB(h,0)}function Kw(h){var p=es(h);if(rr(p))return h}function oP(h,p){if(h==="change")return p}var lP=!1;if(ho){var A_;if(ho){var N_="oninput"in document;if(!N_){var cP=document.createElement("div");cP.setAttribute("oninput","return;"),N_=typeof cP.oninput=="function"}A_=N_}else A_=!1;lP=A_&&(!document.documentMode||9<document.documentMode)}function uP(){ty&&(ty.detachEvent("onpropertychange",dP),ny=ty=null)}function dP(h){if(h.propertyName==="value"&&Kw(ny)){var p=[];iP(p,ny,h,nh(h)),rh(ipe,p)}}function ope(h,p,v){h==="focusin"?(uP(),ty=p,ny=v,ty.attachEvent("onpropertychange",dP)):h==="focusout"&&uP()}function lpe(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Kw(ny)}function cpe(h,p){if(h==="click")return Kw(p)}function upe(h,p){if(h==="input"||h==="change")return Kw(p)}function dpe(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var mo=typeof Object.is=="function"?Object.is:dpe;function ry(h,p){if(mo(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var v=Object.keys(h),k=Object.keys(p);if(v.length!==k.length)return!1;for(k=0;k<v.length;k++){var N=v[k];if(!oe.call(p,N)||!mo(h[N],p[N]))return!1}return!0}function hP(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function fP(h,p){var v=hP(h);h=0;for(var k;v;){if(v.nodeType===3){if(k=h+v.textContent.length,h<=p&&k>=p)return{node:v,offset:p-h};h=k}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=hP(v)}}function mP(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?mP(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function pP(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var p=_r(h.document);p instanceof h.HTMLIFrameElement;){try{var v=typeof p.contentWindow.location.href=="string"}catch{v=!1}if(v)h=p.contentWindow;else break;p=_r(h.document)}return p}function j_(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}var hpe=ho&&"documentMode"in document&&11>=document.documentMode,$0=null,D_=null,sy=null,R_=!1;function gP(h,p,v){var k=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;R_||$0==null||$0!==_r(k)||(k=$0,"selectionStart"in k&&j_(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),sy&&ry(sy,k)||(sy=k,k=M2(D_,"onSelect"),0<k.length&&(p=new ze("onSelect","select",null,p,v),h.push({event:p,listeners:k}),p.target=$0)))}function Wf(h,p){var v={};return v[h.toLowerCase()]=p.toLowerCase(),v["Webkit"+h]="webkit"+p,v["Moz"+h]="moz"+p,v}var U0={animationend:Wf("Animation","AnimationEnd"),animationiteration:Wf("Animation","AnimationIteration"),animationstart:Wf("Animation","AnimationStart"),transitionrun:Wf("Transition","TransitionRun"),transitionstart:Wf("Transition","TransitionStart"),transitioncancel:Wf("Transition","TransitionCancel"),transitionend:Wf("Transition","TransitionEnd")},M_={},vP={};ho&&(vP=document.createElement("div").style,"AnimationEvent"in window||(delete U0.animationend.animation,delete U0.animationiteration.animation,delete U0.animationstart.animation),"TransitionEvent"in window||delete U0.transitionend.transition);function Kf(h){if(M_[h])return M_[h];if(!U0[h])return h;var p=U0[h],v;for(v in p)if(p.hasOwnProperty(v)&&v in vP)return M_[h]=p[v];return h}var yP=Kf("animationend"),xP=Kf("animationiteration"),bP=Kf("animationstart"),fpe=Kf("transitionrun"),mpe=Kf("transitionstart"),ppe=Kf("transitioncancel"),wP=Kf("transitionend"),CP=new Map,I_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");I_.push("scrollEnd");function Fl(h,p){CP.set(h,p),Ke(p,[h])}var SP=new WeakMap;function nl(h,p){if(typeof h=="object"&&h!==null){var v=SP.get(h);return v!==void 0?v:(p={value:h,source:p,stack:xi(p)},SP.set(h,p),p)}return{value:h,source:p,stack:xi(p)}}var rl=[],H0=0,O_=0;function Yw(){for(var h=H0,p=O_=H0=0;p<h;){var v=rl[p];rl[p++]=null;var k=rl[p];rl[p++]=null;var N=rl[p];rl[p++]=null;var M=rl[p];if(rl[p++]=null,k!==null&&N!==null){var X=k.pending;X===null?N.next=N:(N.next=X.next,X.next=N),k.pending=N}M!==0&&kP(v,N,M)}}function Xw(h,p,v,k){rl[H0++]=h,rl[H0++]=p,rl[H0++]=v,rl[H0++]=k,O_|=k,h.lanes|=k,h=h.alternate,h!==null&&(h.lanes|=k)}function P_(h,p,v,k){return Xw(h,p,v,k),Jw(h)}function V0(h,p){return Xw(h,null,null,p),Jw(h)}function kP(h,p,v){h.lanes|=v;var k=h.alternate;k!==null&&(k.lanes|=v);for(var N=!1,M=h.return;M!==null;)M.childLanes|=v,k=M.alternate,k!==null&&(k.childLanes|=v),M.tag===22&&(h=M.stateNode,h===null||h._visibility&1||(N=!0)),h=M,M=M.return;return h.tag===3?(M=h.stateNode,N&&p!==null&&(N=31-Qe(v),h=M.hiddenUpdates,k=h[N],k===null?h[N]=[p]:k.push(p),p.lane=v|536870912),M):null}function Jw(h){if(50<Ny)throw Ny=0,U3=null,Error(r(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}var q0={};function gpe(h,p,v,k){this.tag=h,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(h,p,v,k){return new gpe(h,p,v,k)}function F_(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Uu(h,p){var v=h.alternate;return v===null?(v=po(h.tag,p,h.key,h.mode),v.elementType=h.elementType,v.type=h.type,v.stateNode=h.stateNode,v.alternate=h,h.alternate=v):(v.pendingProps=p,v.type=h.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=h.flags&65011712,v.childLanes=h.childLanes,v.lanes=h.lanes,v.child=h.child,v.memoizedProps=h.memoizedProps,v.memoizedState=h.memoizedState,v.updateQueue=h.updateQueue,p=h.dependencies,v.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},v.sibling=h.sibling,v.index=h.index,v.ref=h.ref,v.refCleanup=h.refCleanup,v}function EP(h,p){h.flags&=65011714;var v=h.alternate;return v===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,p=v.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function Qw(h,p,v,k,N,M){var X=0;if(k=h,typeof h=="function")F_(h)&&(X=1);else if(typeof h=="string")X=yge(h,v,K.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case z:return h=po(31,v,p,N),h.elementType=z,h.lanes=M,h;case x:return Yf(v.children,N,M,p);case b:X=8,N|=24;break;case C:return h=po(12,v,p,N|2),h.elementType=C,h.lanes=M,h;case _:return h=po(13,v,p,N),h.elementType=_,h.lanes=M,h;case A:return h=po(19,v,p,N),h.elementType=A,h.lanes=M,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case S:case E:X=10;break e;case w:X=9;break e;case T:X=11;break e;case j:X=14;break e;case D:X=16,k=null;break e}X=29,v=Error(r(130,h===null?"null":typeof h,"")),k=null}return p=po(X,v,p,N),p.elementType=h,p.type=k,p.lanes=M,p}function Yf(h,p,v,k){return h=po(7,h,k,p),h.lanes=v,h}function B_(h,p,v){return h=po(6,h,null,p),h.lanes=v,h}function L_(h,p,v){return p=po(4,h.children!==null?h.children:[],h.key,p),p.lanes=v,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}var G0=[],W0=0,Zw=null,e2=0,sl=[],al=0,Xf=null,Hu=1,Vu="";function Jf(h,p){G0[W0++]=e2,G0[W0++]=Zw,Zw=h,e2=p}function _P(h,p,v){sl[al++]=Hu,sl[al++]=Vu,sl[al++]=Xf,Xf=h;var k=Hu;h=Vu;var N=32-Qe(k)-1;k&=~(1<<N),v+=1;var M=32-Qe(p)+N;if(30<M){var X=N-N%5;M=(k&(1<<X)-1).toString(32),k>>=X,N-=X,Hu=1<<32-Qe(p)+N|v<<N|k,Vu=M+h}else Hu=1<<M|v<<N|k,Vu=h}function z_(h){h.return!==null&&(Jf(h,1),_P(h,1,0))}function $_(h){for(;h===Zw;)Zw=G0[--W0],G0[W0]=null,e2=G0[--W0],G0[W0]=null;for(;h===Xf;)Xf=sl[--al],sl[al]=null,Vu=sl[--al],sl[al]=null,Hu=sl[--al],sl[al]=null}var bi=null,Ss=null,ur=!1,Qf=null,Oc=!1,U_=Error(r(519));function Zf(h){var p=Error(r(418,""));throw oy(nl(p,h)),U_}function TP(h){var p=h.stateNode,v=h.type,k=h.memoizedProps;switch(p[Vn]=h,p[xn]=k,v){case"dialog":zn("cancel",p),zn("close",p);break;case"iframe":case"object":case"embed":zn("load",p);break;case"video":case"audio":for(v=0;v<Dy.length;v++)zn(Dy[v],p);break;case"source":zn("error",p);break;case"img":case"image":case"link":zn("error",p),zn("load",p);break;case"details":zn("toggle",p);break;case"input":zn("invalid",p),Bu(p,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),bn(p);break;case"select":zn("invalid",p);break;case"textarea":zn("invalid",p),Rc(p,k.value,k.defaultValue,k.children),bn(p)}v=k.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||p.textContent===""+v||k.suppressHydrationWarning===!0||VB(p.textContent,v)?(k.popover!=null&&(zn("beforetoggle",p),zn("toggle",p)),k.onScroll!=null&&zn("scroll",p),k.onScrollEnd!=null&&zn("scrollend",p),k.onClick!=null&&(p.onclick=I2),p=!0):p=!1,p||Zf(h)}function AP(h){for(bi=h.return;bi;)switch(bi.tag){case 5:case 13:Oc=!1;return;case 27:case 3:Oc=!0;return;default:bi=bi.return}}function ay(h){if(h!==bi)return!1;if(!ur)return AP(h),ur=!0,!1;var p=h.tag,v;if((v=p!==3&&p!==27)&&((v=p===5)&&(v=h.type,v=!(v!=="form"&&v!=="button")||sT(h.type,h.memoizedProps)),v=!v),v&&Ss&&Zf(h),AP(h),p===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8)if(v=h.data,v==="/$"){if(p===0){Ss=Ll(h.nextSibling);break e}p--}else v!=="$"&&v!=="$!"&&v!=="$?"||p++;h=h.nextSibling}Ss=null}}else p===27?(p=Ss,Sh(h.type)?(h=lT,lT=null,Ss=h):Ss=p):Ss=bi?Ll(h.stateNode.nextSibling):null;return!0}function iy(){Ss=bi=null,ur=!1}function NP(){var h=Qf;return h!==null&&(qi===null?qi=h:qi.push.apply(qi,h),Qf=null),h}function oy(h){Qf===null?Qf=[h]:Qf.push(h)}var H_=Z(null),em=null,qu=null;function lh(h,p,v){G(H_,p._currentValue),p._currentValue=v}function Gu(h){h._currentValue=H_.current,le(H_)}function V_(h,p,v){for(;h!==null;){var k=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),h===v)break;h=h.return}}function q_(h,p,v,k){var N=h.child;for(N!==null&&(N.return=h);N!==null;){var M=N.dependencies;if(M!==null){var X=N.child;M=M.firstContext;e:for(;M!==null;){var ee=M;M=N;for(var ye=0;ye<p.length;ye++)if(ee.context===p[ye]){M.lanes|=v,ee=M.alternate,ee!==null&&(ee.lanes|=v),V_(M.return,v,h),k||(X=null);break e}M=ee.next}}else if(N.tag===18){if(X=N.return,X===null)throw Error(r(341));X.lanes|=v,M=X.alternate,M!==null&&(M.lanes|=v),V_(X,v,h),X=null}else X=N.child;if(X!==null)X.return=N;else for(X=N;X!==null;){if(X===h){X=null;break}if(N=X.sibling,N!==null){N.return=X.return,X=N;break}X=X.return}N=X}}function ly(h,p,v,k){h=null;for(var N=p,M=!1;N!==null;){if(!M){if((N.flags&524288)!==0)M=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var X=N.alternate;if(X===null)throw Error(r(387));if(X=X.memoizedProps,X!==null){var ee=N.type;mo(N.pendingProps.value,X.value)||(h!==null?h.push(ee):h=[ee])}}else if(N===de.current){if(X=N.alternate,X===null)throw Error(r(387));X.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(h!==null?h.push(Fy):h=[Fy])}N=N.return}h!==null&&q_(p,h,v,k),p.flags|=262144}function t2(h){for(h=h.firstContext;h!==null;){if(!mo(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function tm(h){em=h,qu=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ei(h){return jP(em,h)}function n2(h,p){return em===null&&tm(h),jP(h,p)}function jP(h,p){var v=p._currentValue;if(p={context:p,memoizedValue:v,next:null},qu===null){if(h===null)throw Error(r(308));qu=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else qu=qu.next=p;return v}var vpe=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(v,k){h.push(k)}};this.abort=function(){p.aborted=!0,h.forEach(function(v){return v()})}},ype=t.unstable_scheduleCallback,xpe=t.unstable_NormalPriority,ra={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function G_(){return{controller:new vpe,data:new Map,refCount:0}}function cy(h){h.refCount--,h.refCount===0&&ype(xpe,function(){h.controller.abort()})}var uy=null,W_=0,K0=0,Y0=null;function bpe(h,p){if(uy===null){var v=uy=[];W_=0,K0=Y3(),Y0={status:"pending",value:void 0,then:function(k){v.push(k)}}}return W_++,p.then(DP,DP),p}function DP(){if(--W_===0&&uy!==null){Y0!==null&&(Y0.status="fulfilled");var h=uy;uy=null,K0=0,Y0=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function wpe(h,p){var v=[],k={status:"pending",value:null,reason:null,then:function(N){v.push(N)}};return h.then(function(){k.status="fulfilled",k.value=p;for(var N=0;N<v.length;N++)(0,v[N])(p)},function(N){for(k.status="rejected",k.reason=N,N=0;N<v.length;N++)(0,v[N])(void 0)}),k}var RP=I.S;I.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&bpe(h,p),RP!==null&&RP(h,p)};var nm=Z(null);function K_(){var h=nm.current;return h!==null?h:Hr.pooledCache}function r2(h,p){p===null?G(nm,nm.current):G(nm,p.pool)}function MP(){var h=K_();return h===null?null:{parent:ra._currentValue,pool:h}}var dy=Error(r(460)),IP=Error(r(474)),s2=Error(r(542)),Y_={then:function(){}};function OP(h){return h=h.status,h==="fulfilled"||h==="rejected"}function a2(){}function PP(h,p,v){switch(v=h[v],v===void 0?h.push(p):v!==p&&(p.then(a2,a2),p=v),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,BP(h),h;default:if(typeof p.status=="string")p.then(a2,a2);else{if(h=Hr,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=p,h.status="pending",h.then(function(k){if(p.status==="pending"){var N=p;N.status="fulfilled",N.value=k}},function(k){if(p.status==="pending"){var N=p;N.status="rejected",N.reason=k}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,BP(h),h}throw hy=p,dy}}var hy=null;function FP(){if(hy===null)throw Error(r(459));var h=hy;return hy=null,h}function BP(h){if(h===dy||h===s2)throw Error(r(483))}var ch=!1;function X_(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J_(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function uh(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function dh(h,p,v){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(yr&2)!==0){var N=k.pending;return N===null?p.next=p:(p.next=N.next,N.next=p),k.pending=p,p=Jw(h),kP(h,null,v),p}return Xw(h,k,p,v),Jw(h)}function fy(h,p,v){if(p=p.updateQueue,p!==null&&(p=p.shared,(v&4194048)!==0)){var k=p.lanes;k&=h.pendingLanes,v|=k,p.lanes=v,fn(h,v)}}function Q_(h,p){var v=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,v===k)){var N=null,M=null;if(v=v.firstBaseUpdate,v!==null){do{var X={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};M===null?N=M=X:M=M.next=X,v=v.next}while(v!==null);M===null?N=M=p:M=M.next=p}else N=M=p;v={baseState:k.baseState,firstBaseUpdate:N,lastBaseUpdate:M,shared:k.shared,callbacks:k.callbacks},h.updateQueue=v;return}h=v.lastBaseUpdate,h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=p}var Z_=!1;function my(){if(Z_){var h=Y0;if(h!==null)throw h}}function py(h,p,v,k){Z_=!1;var N=h.updateQueue;ch=!1;var M=N.firstBaseUpdate,X=N.lastBaseUpdate,ee=N.shared.pending;if(ee!==null){N.shared.pending=null;var ye=ee,De=ye.next;ye.next=null,X===null?M=De:X.next=De,X=ye;var Ve=h.alternate;Ve!==null&&(Ve=Ve.updateQueue,ee=Ve.lastBaseUpdate,ee!==X&&(ee===null?Ve.firstBaseUpdate=De:ee.next=De,Ve.lastBaseUpdate=ye))}if(M!==null){var et=N.baseState;X=0,Ve=De=ye=null,ee=M;do{var Oe=ee.lane&-536870913,Pe=Oe!==ee.lane;if(Pe?(Jn&Oe)===Oe:(k&Oe)===Oe){Oe!==0&&Oe===K0&&(Z_=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var sn=h,Wt=ee;Oe=p;var Nr=v;switch(Wt.tag){case 1:if(sn=Wt.payload,typeof sn=="function"){et=sn.call(Nr,et,Oe);break e}et=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=Wt.payload,Oe=typeof sn=="function"?sn.call(Nr,et,Oe):sn,Oe==null)break e;et=d({},et,Oe);break e;case 2:ch=!0}}Oe=ee.callback,Oe!==null&&(h.flags|=64,Pe&&(h.flags|=8192),Pe=N.callbacks,Pe===null?N.callbacks=[Oe]:Pe.push(Oe))}else Pe={lane:Oe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Ve===null?(De=Ve=Pe,ye=et):Ve=Ve.next=Pe,X|=Oe;if(ee=ee.next,ee===null){if(ee=N.shared.pending,ee===null)break;Pe=ee,ee=Pe.next,Pe.next=null,N.lastBaseUpdate=Pe,N.shared.pending=null}}while(!0);Ve===null&&(ye=et),N.baseState=ye,N.firstBaseUpdate=De,N.lastBaseUpdate=Ve,M===null&&(N.shared.lanes=0),xh|=X,h.lanes=X,h.memoizedState=et}}function LP(h,p){if(typeof h!="function")throw Error(r(191,h));h.call(p)}function zP(h,p){var v=h.callbacks;if(v!==null)for(h.callbacks=null,h=0;h<v.length;h++)LP(v[h],p)}var X0=Z(null),i2=Z(0);function $P(h,p){h=Zu,G(i2,h),G(X0,p),Zu=h|p.baseLanes}function e3(){G(i2,Zu),G(X0,X0.current)}function t3(){Zu=i2.current,le(X0),le(i2)}var hh=0,Mn=null,Tr=null,Us=null,o2=!1,J0=!1,rm=!1,l2=0,gy=0,Q0=null,Cpe=0;function Ms(){throw Error(r(321))}function n3(h,p){if(p===null)return!1;for(var v=0;v<p.length&&v<h.length;v++)if(!mo(h[v],p[v]))return!1;return!0}function r3(h,p,v,k,N,M){return hh=M,Mn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,I.H=h===null||h.memoizedState===null?kF:EF,rm=!1,M=v(k,N),rm=!1,J0&&(M=HP(p,v,k,N)),UP(h),M}function UP(h){I.H=m2;var p=Tr!==null&&Tr.next!==null;if(hh=0,Us=Tr=Mn=null,o2=!1,gy=0,Q0=null,p)throw Error(r(300));h===null||ka||(h=h.dependencies,h!==null&&t2(h)&&(ka=!0))}function HP(h,p,v,k){Mn=h;var N=0;do{if(J0&&(Q0=null),gy=0,J0=!1,25<=N)throw Error(r(301));if(N+=1,Us=Tr=null,h.updateQueue!=null){var M=h.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}I.H=Npe,M=p(v,k)}while(J0);return M}function Spe(){var h=I.H,p=h.useState()[0];return p=typeof p.then=="function"?vy(p):p,h=h.useState()[0],(Tr!==null?Tr.memoizedState:null)!==h&&(Mn.flags|=1024),p}function s3(){var h=l2!==0;return l2=0,h}function a3(h,p,v){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~v}function i3(h){if(o2){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}o2=!1}hh=0,Us=Tr=Mn=null,J0=!1,gy=l2=0,Q0=null}function Hi(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Us===null?Mn.memoizedState=Us=h:Us=Us.next=h,Us}function Hs(){if(Tr===null){var h=Mn.alternate;h=h!==null?h.memoizedState:null}else h=Tr.next;var p=Us===null?Mn.memoizedState:Us.next;if(p!==null)Us=p,Tr=h;else{if(h===null)throw Mn.alternate===null?Error(r(467)):Error(r(310));Tr=h,h={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Us===null?Mn.memoizedState=Us=h:Us=Us.next=h}return Us}function o3(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vy(h){var p=gy;return gy+=1,Q0===null&&(Q0=[]),h=PP(Q0,h,p),p=Mn,(Us===null?p.memoizedState:Us.next)===null&&(p=p.alternate,I.H=p===null||p.memoizedState===null?kF:EF),h}function c2(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return vy(h);if(h.$$typeof===E)return ei(h)}throw Error(r(438,String(h)))}function l3(h){var p=null,v=Mn.updateQueue;if(v!==null&&(p=v.memoCache),p==null){var k=Mn.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(p={data:k.data.map(function(N){return N.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),v===null&&(v=o3(),Mn.updateQueue=v),v.memoCache=p,v=p.data[p.index],v===void 0)for(v=p.data[p.index]=Array(h),k=0;k<h;k++)v[k]=F;return p.index++,v}function Wu(h,p){return typeof p=="function"?p(h):p}function u2(h){var p=Hs();return c3(p,Tr,h)}function c3(h,p,v){var k=h.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=v;var N=h.baseQueue,M=k.pending;if(M!==null){if(N!==null){var X=N.next;N.next=M.next,M.next=X}p.baseQueue=N=M,k.pending=null}if(M=h.baseState,N===null)h.memoizedState=M;else{p=N.next;var ee=X=null,ye=null,De=p,Ve=!1;do{var et=De.lane&-536870913;if(et!==De.lane?(Jn&et)===et:(hh&et)===et){var Oe=De.revertLane;if(Oe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),et===K0&&(Ve=!0);else if((hh&Oe)===Oe){De=De.next,Oe===K0&&(Ve=!0);continue}else et={lane:0,revertLane:De.revertLane,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},ye===null?(ee=ye=et,X=M):ye=ye.next=et,Mn.lanes|=Oe,xh|=Oe;et=De.action,rm&&v(M,et),M=De.hasEagerState?De.eagerState:v(M,et)}else Oe={lane:et,revertLane:De.revertLane,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},ye===null?(ee=ye=Oe,X=M):ye=ye.next=Oe,Mn.lanes|=et,xh|=et;De=De.next}while(De!==null&&De!==p);if(ye===null?X=M:ye.next=ee,!mo(M,h.memoizedState)&&(ka=!0,Ve&&(v=Y0,v!==null)))throw v;h.memoizedState=M,h.baseState=X,h.baseQueue=ye,k.lastRenderedState=M}return N===null&&(k.lanes=0),[h.memoizedState,k.dispatch]}function u3(h){var p=Hs(),v=p.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=h;var k=v.dispatch,N=v.pending,M=p.memoizedState;if(N!==null){v.pending=null;var X=N=N.next;do M=h(M,X.action),X=X.next;while(X!==N);mo(M,p.memoizedState)||(ka=!0),p.memoizedState=M,p.baseQueue===null&&(p.baseState=M),v.lastRenderedState=M}return[M,k]}function VP(h,p,v){var k=Mn,N=Hs(),M=ur;if(M){if(v===void 0)throw Error(r(407));v=v()}else v=p();var X=!mo((Tr||N).memoizedState,v);X&&(N.memoizedState=v,ka=!0),N=N.queue;var ee=WP.bind(null,k,N,h);if(yy(2048,8,ee,[h]),N.getSnapshot!==p||X||Us!==null&&Us.memoizedState.tag&1){if(k.flags|=2048,Z0(9,d2(),GP.bind(null,k,N,v,p),null),Hr===null)throw Error(r(349));M||(hh&124)!==0||qP(k,p,v)}return v}function qP(h,p,v){h.flags|=16384,h={getSnapshot:p,value:v},p=Mn.updateQueue,p===null?(p=o3(),Mn.updateQueue=p,p.stores=[h]):(v=p.stores,v===null?p.stores=[h]:v.push(h))}function GP(h,p,v,k){p.value=v,p.getSnapshot=k,KP(p)&&YP(h)}function WP(h,p,v){return v(function(){KP(p)&&YP(h)})}function KP(h){var p=h.getSnapshot;h=h.value;try{var v=p();return!mo(h,v)}catch{return!0}}function YP(h){var p=V0(h,2);p!==null&&bo(p,h,2)}function d3(h){var p=Hi();if(typeof h=="function"){var v=h;if(h=v(),rm){Fe(!0);try{v()}finally{Fe(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:h},p}function XP(h,p,v,k){return h.baseState=v,c3(h,Tr,typeof k=="function"?k:Wu)}function kpe(h,p,v,k,N){if(f2(h))throw Error(r(485));if(h=p.action,h!==null){var M={payload:N,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){M.listeners.push(X)}};I.T!==null?v(!0):M.isTransition=!1,k(M),v=p.pending,v===null?(M.next=p.pending=M,JP(p,M)):(M.next=v.next,p.pending=v.next=M)}}function JP(h,p){var v=p.action,k=p.payload,N=h.state;if(p.isTransition){var M=I.T,X={};I.T=X;try{var ee=v(N,k),ye=I.S;ye!==null&&ye(X,ee),QP(h,p,ee)}catch(De){h3(h,p,De)}finally{I.T=M}}else try{M=v(N,k),QP(h,p,M)}catch(De){h3(h,p,De)}}function QP(h,p,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(k){ZP(h,p,k)},function(k){return h3(h,p,k)}):ZP(h,p,v)}function ZP(h,p,v){p.status="fulfilled",p.value=v,eF(p),h.state=v,p=h.pending,p!==null&&(v=p.next,v===p?h.pending=null:(v=v.next,p.next=v,JP(h,v)))}function h3(h,p,v){var k=h.pending;if(h.pending=null,k!==null){k=k.next;do p.status="rejected",p.reason=v,eF(p),p=p.next;while(p!==k)}h.action=null}function eF(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function tF(h,p){return p}function nF(h,p){if(ur){var v=Hr.formState;if(v!==null){e:{var k=Mn;if(ur){if(Ss){t:{for(var N=Ss,M=Oc;N.nodeType!==8;){if(!M){N=null;break t}if(N=Ll(N.nextSibling),N===null){N=null;break t}}M=N.data,N=M==="F!"||M==="F"?N:null}if(N){Ss=Ll(N.nextSibling),k=N.data==="F!";break e}}Zf(k)}k=!1}k&&(p=v[0])}}return v=Hi(),v.memoizedState=v.baseState=p,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tF,lastRenderedState:p},v.queue=k,v=wF.bind(null,Mn,k),k.dispatch=v,k=d3(!1),M=v3.bind(null,Mn,!1,k.queue),k=Hi(),N={state:p,dispatch:null,action:h,pending:null},k.queue=N,v=kpe.bind(null,Mn,N,M,v),N.dispatch=v,k.memoizedState=h,[p,v,!1]}function rF(h){var p=Hs();return sF(p,Tr,h)}function sF(h,p,v){if(p=c3(h,p,tF)[0],h=u2(Wu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var k=vy(p)}catch(X){throw X===dy?s2:X}else k=p;p=Hs();var N=p.queue,M=N.dispatch;return v!==p.memoizedState&&(Mn.flags|=2048,Z0(9,d2(),Epe.bind(null,N,v),null)),[k,M,h]}function Epe(h,p){h.action=p}function aF(h){var p=Hs(),v=Tr;if(v!==null)return sF(p,v,h);Hs(),p=p.memoizedState,v=Hs();var k=v.queue.dispatch;return v.memoizedState=h,[p,k,!1]}function Z0(h,p,v,k){return h={tag:h,create:v,deps:k,inst:p,next:null},p=Mn.updateQueue,p===null&&(p=o3(),Mn.updateQueue=p),v=p.lastEffect,v===null?p.lastEffect=h.next=h:(k=v.next,v.next=h,h.next=k,p.lastEffect=h),h}function d2(){return{destroy:void 0,resource:void 0}}function iF(){return Hs().memoizedState}function h2(h,p,v,k){var N=Hi();k=k===void 0?null:k,Mn.flags|=h,N.memoizedState=Z0(1|p,d2(),v,k)}function yy(h,p,v,k){var N=Hs();k=k===void 0?null:k;var M=N.memoizedState.inst;Tr!==null&&k!==null&&n3(k,Tr.memoizedState.deps)?N.memoizedState=Z0(p,M,v,k):(Mn.flags|=h,N.memoizedState=Z0(1|p,M,v,k))}function oF(h,p){h2(8390656,8,h,p)}function lF(h,p){yy(2048,8,h,p)}function cF(h,p){return yy(4,2,h,p)}function uF(h,p){return yy(4,4,h,p)}function dF(h,p){if(typeof p=="function"){h=h();var v=p(h);return function(){typeof v=="function"?v():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function hF(h,p,v){v=v!=null?v.concat([h]):null,yy(4,4,dF.bind(null,p,h),v)}function f3(){}function fF(h,p){var v=Hs();p=p===void 0?null:p;var k=v.memoizedState;return p!==null&&n3(p,k[1])?k[0]:(v.memoizedState=[h,p],h)}function mF(h,p){var v=Hs();p=p===void 0?null:p;var k=v.memoizedState;if(p!==null&&n3(p,k[1]))return k[0];if(k=h(),rm){Fe(!0);try{h()}finally{Fe(!1)}}return v.memoizedState=[k,p],k}function m3(h,p,v){return v===void 0||(hh&1073741824)!==0?h.memoizedState=p:(h.memoizedState=v,h=vB(),Mn.lanes|=h,xh|=h,v)}function pF(h,p,v,k){return mo(v,p)?v:X0.current!==null?(h=m3(h,v,k),mo(h,p)||(ka=!0),h):(hh&42)===0?(ka=!0,h.memoizedState=v):(h=vB(),Mn.lanes|=h,xh|=h,p)}function gF(h,p,v,k,N){var M=U.p;U.p=M!==0&&8>M?M:8;var X=I.T,ee={};I.T=ee,v3(h,!1,p,v);try{var ye=N(),De=I.S;if(De!==null&&De(ee,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ve=wpe(ye,k);xy(h,p,Ve,xo(h))}else xy(h,p,k,xo(h))}catch(et){xy(h,p,{then:function(){},status:"rejected",reason:et},xo())}finally{U.p=M,I.T=X}}function _pe(){}function p3(h,p,v,k){if(h.tag!==5)throw Error(r(476));var N=vF(h).queue;gF(h,N,p,W,v===null?_pe:function(){return yF(h),v(k)})}function vF(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:W},next:null};var v={};return p.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:v},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function yF(h){var p=vF(h).next.queue;xy(h,p,{},xo())}function g3(){return ei(Fy)}function xF(){return Hs().memoizedState}function bF(){return Hs().memoizedState}function Tpe(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var v=xo();h=uh(v);var k=dh(p,h,v);k!==null&&(bo(k,p,v),fy(k,p,v)),p={cache:G_()},h.payload=p;return}p=p.return}}function Ape(h,p,v){var k=xo();v={lane:k,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},f2(h)?CF(p,v):(v=P_(h,p,v,k),v!==null&&(bo(v,h,k),SF(v,p,k)))}function wF(h,p,v){var k=xo();xy(h,p,v,k)}function xy(h,p,v,k){var N={lane:k,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(f2(h))CF(p,N);else{var M=h.alternate;if(h.lanes===0&&(M===null||M.lanes===0)&&(M=p.lastRenderedReducer,M!==null))try{var X=p.lastRenderedState,ee=M(X,v);if(N.hasEagerState=!0,N.eagerState=ee,mo(ee,X))return Xw(h,p,N,0),Hr===null&&Yw(),!1}catch{}finally{}if(v=P_(h,p,N,k),v!==null)return bo(v,h,k),SF(v,p,k),!0}return!1}function v3(h,p,v,k){if(k={lane:2,revertLane:Y3(),action:k,hasEagerState:!1,eagerState:null,next:null},f2(h)){if(p)throw Error(r(479))}else p=P_(h,v,k,2),p!==null&&bo(p,h,2)}function f2(h){var p=h.alternate;return h===Mn||p!==null&&p===Mn}function CF(h,p){J0=o2=!0;var v=h.pending;v===null?p.next=p:(p.next=v.next,v.next=p),h.pending=p}function SF(h,p,v){if((v&4194048)!==0){var k=p.lanes;k&=h.pendingLanes,v|=k,p.lanes=v,fn(h,v)}}var m2={readContext:ei,use:c2,useCallback:Ms,useContext:Ms,useEffect:Ms,useImperativeHandle:Ms,useLayoutEffect:Ms,useInsertionEffect:Ms,useMemo:Ms,useReducer:Ms,useRef:Ms,useState:Ms,useDebugValue:Ms,useDeferredValue:Ms,useTransition:Ms,useSyncExternalStore:Ms,useId:Ms,useHostTransitionStatus:Ms,useFormState:Ms,useActionState:Ms,useOptimistic:Ms,useMemoCache:Ms,useCacheRefresh:Ms},kF={readContext:ei,use:c2,useCallback:function(h,p){return Hi().memoizedState=[h,p===void 0?null:p],h},useContext:ei,useEffect:oF,useImperativeHandle:function(h,p,v){v=v!=null?v.concat([h]):null,h2(4194308,4,dF.bind(null,p,h),v)},useLayoutEffect:function(h,p){return h2(4194308,4,h,p)},useInsertionEffect:function(h,p){h2(4,2,h,p)},useMemo:function(h,p){var v=Hi();p=p===void 0?null:p;var k=h();if(rm){Fe(!0);try{h()}finally{Fe(!1)}}return v.memoizedState=[k,p],k},useReducer:function(h,p,v){var k=Hi();if(v!==void 0){var N=v(p);if(rm){Fe(!0);try{v(p)}finally{Fe(!1)}}}else N=p;return k.memoizedState=k.baseState=N,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:N},k.queue=h,h=h.dispatch=Ape.bind(null,Mn,h),[k.memoizedState,h]},useRef:function(h){var p=Hi();return h={current:h},p.memoizedState=h},useState:function(h){h=d3(h);var p=h.queue,v=wF.bind(null,Mn,p);return p.dispatch=v,[h.memoizedState,v]},useDebugValue:f3,useDeferredValue:function(h,p){var v=Hi();return m3(v,h,p)},useTransition:function(){var h=d3(!1);return h=gF.bind(null,Mn,h.queue,!0,!1),Hi().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,v){var k=Mn,N=Hi();if(ur){if(v===void 0)throw Error(r(407));v=v()}else{if(v=p(),Hr===null)throw Error(r(349));(Jn&124)!==0||qP(k,p,v)}N.memoizedState=v;var M={value:v,getSnapshot:p};return N.queue=M,oF(WP.bind(null,k,M,h),[h]),k.flags|=2048,Z0(9,d2(),GP.bind(null,k,M,v,p),null),v},useId:function(){var h=Hi(),p=Hr.identifierPrefix;if(ur){var v=Vu,k=Hu;v=(k&~(1<<32-Qe(k)-1)).toString(32)+v,p=""+p+"R"+v,v=l2++,0<v&&(p+="H"+v.toString(32)),p+=""}else v=Cpe++,p=""+p+"r"+v.toString(32)+"";return h.memoizedState=p},useHostTransitionStatus:g3,useFormState:nF,useActionState:nF,useOptimistic:function(h){var p=Hi();p.memoizedState=p.baseState=h;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=v,p=v3.bind(null,Mn,!0,v),v.dispatch=p,[h,p]},useMemoCache:l3,useCacheRefresh:function(){return Hi().memoizedState=Tpe.bind(null,Mn)}},EF={readContext:ei,use:c2,useCallback:fF,useContext:ei,useEffect:lF,useImperativeHandle:hF,useInsertionEffect:cF,useLayoutEffect:uF,useMemo:mF,useReducer:u2,useRef:iF,useState:function(){return u2(Wu)},useDebugValue:f3,useDeferredValue:function(h,p){var v=Hs();return pF(v,Tr.memoizedState,h,p)},useTransition:function(){var h=u2(Wu)[0],p=Hs().memoizedState;return[typeof h=="boolean"?h:vy(h),p]},useSyncExternalStore:VP,useId:xF,useHostTransitionStatus:g3,useFormState:rF,useActionState:rF,useOptimistic:function(h,p){var v=Hs();return XP(v,Tr,h,p)},useMemoCache:l3,useCacheRefresh:bF},Npe={readContext:ei,use:c2,useCallback:fF,useContext:ei,useEffect:lF,useImperativeHandle:hF,useInsertionEffect:cF,useLayoutEffect:uF,useMemo:mF,useReducer:u3,useRef:iF,useState:function(){return u3(Wu)},useDebugValue:f3,useDeferredValue:function(h,p){var v=Hs();return Tr===null?m3(v,h,p):pF(v,Tr.memoizedState,h,p)},useTransition:function(){var h=u3(Wu)[0],p=Hs().memoizedState;return[typeof h=="boolean"?h:vy(h),p]},useSyncExternalStore:VP,useId:xF,useHostTransitionStatus:g3,useFormState:aF,useActionState:aF,useOptimistic:function(h,p){var v=Hs();return Tr!==null?XP(v,Tr,h,p):(v.baseState=h,[h,v.queue.dispatch])},useMemoCache:l3,useCacheRefresh:bF},ep=null,by=0;function p2(h){var p=by;return by+=1,ep===null&&(ep=[]),PP(ep,h,p)}function wy(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function g2(h,p){throw p.$$typeof===f?Error(r(525)):(h=Object.prototype.toString.call(p),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function _F(h){var p=h._init;return p(h._payload)}function TF(h){function p(Te,Se){if(h){var je=Te.deletions;je===null?(Te.deletions=[Se],Te.flags|=16):je.push(Se)}}function v(Te,Se){if(!h)return null;for(;Se!==null;)p(Te,Se),Se=Se.sibling;return null}function k(Te){for(var Se=new Map;Te!==null;)Te.key!==null?Se.set(Te.key,Te):Se.set(Te.index,Te),Te=Te.sibling;return Se}function N(Te,Se){return Te=Uu(Te,Se),Te.index=0,Te.sibling=null,Te}function M(Te,Se,je){return Te.index=je,h?(je=Te.alternate,je!==null?(je=je.index,je<Se?(Te.flags|=67108866,Se):je):(Te.flags|=67108866,Se)):(Te.flags|=1048576,Se)}function X(Te){return h&&Te.alternate===null&&(Te.flags|=67108866),Te}function ee(Te,Se,je,Ye){return Se===null||Se.tag!==6?(Se=B_(je,Te.mode,Ye),Se.return=Te,Se):(Se=N(Se,je),Se.return=Te,Se)}function ye(Te,Se,je,Ye){var Rt=je.type;return Rt===x?Ve(Te,Se,je.props.children,Ye,je.key):Se!==null&&(Se.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===D&&_F(Rt)===Se.type)?(Se=N(Se,je.props),wy(Se,je),Se.return=Te,Se):(Se=Qw(je.type,je.key,je.props,null,Te.mode,Ye),wy(Se,je),Se.return=Te,Se)}function De(Te,Se,je,Ye){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==je.containerInfo||Se.stateNode.implementation!==je.implementation?(Se=L_(je,Te.mode,Ye),Se.return=Te,Se):(Se=N(Se,je.children||[]),Se.return=Te,Se)}function Ve(Te,Se,je,Ye,Rt){return Se===null||Se.tag!==7?(Se=Yf(je,Te.mode,Ye,Rt),Se.return=Te,Se):(Se=N(Se,je),Se.return=Te,Se)}function et(Te,Se,je){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=B_(""+Se,Te.mode,je),Se.return=Te,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case m:return je=Qw(Se.type,Se.key,Se.props,null,Te.mode,je),wy(je,Se),je.return=Te,je;case g:return Se=L_(Se,Te.mode,je),Se.return=Te,Se;case D:var Ye=Se._init;return Se=Ye(Se._payload),et(Te,Se,je)}if(P(Se)||L(Se))return Se=Yf(Se,Te.mode,je,null),Se.return=Te,Se;if(typeof Se.then=="function")return et(Te,p2(Se),je);if(Se.$$typeof===E)return et(Te,n2(Te,Se),je);g2(Te,Se)}return null}function Oe(Te,Se,je,Ye){var Rt=Se!==null?Se.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return Rt!==null?null:ee(Te,Se,""+je,Ye);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case m:return je.key===Rt?ye(Te,Se,je,Ye):null;case g:return je.key===Rt?De(Te,Se,je,Ye):null;case D:return Rt=je._init,je=Rt(je._payload),Oe(Te,Se,je,Ye)}if(P(je)||L(je))return Rt!==null?null:Ve(Te,Se,je,Ye,null);if(typeof je.then=="function")return Oe(Te,Se,p2(je),Ye);if(je.$$typeof===E)return Oe(Te,Se,n2(Te,je),Ye);g2(Te,je)}return null}function Pe(Te,Se,je,Ye,Rt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Te=Te.get(je)||null,ee(Se,Te,""+Ye,Rt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:return Te=Te.get(Ye.key===null?je:Ye.key)||null,ye(Se,Te,Ye,Rt);case g:return Te=Te.get(Ye.key===null?je:Ye.key)||null,De(Se,Te,Ye,Rt);case D:var On=Ye._init;return Ye=On(Ye._payload),Pe(Te,Se,je,Ye,Rt)}if(P(Ye)||L(Ye))return Te=Te.get(je)||null,Ve(Se,Te,Ye,Rt,null);if(typeof Ye.then=="function")return Pe(Te,Se,je,p2(Ye),Rt);if(Ye.$$typeof===E)return Pe(Te,Se,je,n2(Se,Ye),Rt);g2(Se,Ye)}return null}function sn(Te,Se,je,Ye){for(var Rt=null,On=null,Lt=Se,Kt=Se=0,_a=null;Lt!==null&&Kt<je.length;Kt++){Lt.index>Kt?(_a=Lt,Lt=null):_a=Lt.sibling;var sr=Oe(Te,Lt,je[Kt],Ye);if(sr===null){Lt===null&&(Lt=_a);break}h&&Lt&&sr.alternate===null&&p(Te,Lt),Se=M(sr,Se,Kt),On===null?Rt=sr:On.sibling=sr,On=sr,Lt=_a}if(Kt===je.length)return v(Te,Lt),ur&&Jf(Te,Kt),Rt;if(Lt===null){for(;Kt<je.length;Kt++)Lt=et(Te,je[Kt],Ye),Lt!==null&&(Se=M(Lt,Se,Kt),On===null?Rt=Lt:On.sibling=Lt,On=Lt);return ur&&Jf(Te,Kt),Rt}for(Lt=k(Lt);Kt<je.length;Kt++)_a=Pe(Lt,Te,Kt,je[Kt],Ye),_a!==null&&(h&&_a.alternate!==null&&Lt.delete(_a.key===null?Kt:_a.key),Se=M(_a,Se,Kt),On===null?Rt=_a:On.sibling=_a,On=_a);return h&&Lt.forEach(function(Ah){return p(Te,Ah)}),ur&&Jf(Te,Kt),Rt}function Wt(Te,Se,je,Ye){if(je==null)throw Error(r(151));for(var Rt=null,On=null,Lt=Se,Kt=Se=0,_a=null,sr=je.next();Lt!==null&&!sr.done;Kt++,sr=je.next()){Lt.index>Kt?(_a=Lt,Lt=null):_a=Lt.sibling;var Ah=Oe(Te,Lt,sr.value,Ye);if(Ah===null){Lt===null&&(Lt=_a);break}h&&Lt&&Ah.alternate===null&&p(Te,Lt),Se=M(Ah,Se,Kt),On===null?Rt=Ah:On.sibling=Ah,On=Ah,Lt=_a}if(sr.done)return v(Te,Lt),ur&&Jf(Te,Kt),Rt;if(Lt===null){for(;!sr.done;Kt++,sr=je.next())sr=et(Te,sr.value,Ye),sr!==null&&(Se=M(sr,Se,Kt),On===null?Rt=sr:On.sibling=sr,On=sr);return ur&&Jf(Te,Kt),Rt}for(Lt=k(Lt);!sr.done;Kt++,sr=je.next())sr=Pe(Lt,Te,Kt,sr.value,Ye),sr!==null&&(h&&sr.alternate!==null&&Lt.delete(sr.key===null?Kt:sr.key),Se=M(sr,Se,Kt),On===null?Rt=sr:On.sibling=sr,On=sr);return h&&Lt.forEach(function(jge){return p(Te,jge)}),ur&&Jf(Te,Kt),Rt}function Nr(Te,Se,je,Ye){if(typeof je=="object"&&je!==null&&je.type===x&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case m:e:{for(var Rt=je.key;Se!==null;){if(Se.key===Rt){if(Rt=je.type,Rt===x){if(Se.tag===7){v(Te,Se.sibling),Ye=N(Se,je.props.children),Ye.return=Te,Te=Ye;break e}}else if(Se.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===D&&_F(Rt)===Se.type){v(Te,Se.sibling),Ye=N(Se,je.props),wy(Ye,je),Ye.return=Te,Te=Ye;break e}v(Te,Se);break}else p(Te,Se);Se=Se.sibling}je.type===x?(Ye=Yf(je.props.children,Te.mode,Ye,je.key),Ye.return=Te,Te=Ye):(Ye=Qw(je.type,je.key,je.props,null,Te.mode,Ye),wy(Ye,je),Ye.return=Te,Te=Ye)}return X(Te);case g:e:{for(Rt=je.key;Se!==null;){if(Se.key===Rt)if(Se.tag===4&&Se.stateNode.containerInfo===je.containerInfo&&Se.stateNode.implementation===je.implementation){v(Te,Se.sibling),Ye=N(Se,je.children||[]),Ye.return=Te,Te=Ye;break e}else{v(Te,Se);break}else p(Te,Se);Se=Se.sibling}Ye=L_(je,Te.mode,Ye),Ye.return=Te,Te=Ye}return X(Te);case D:return Rt=je._init,je=Rt(je._payload),Nr(Te,Se,je,Ye)}if(P(je))return sn(Te,Se,je,Ye);if(L(je)){if(Rt=L(je),typeof Rt!="function")throw Error(r(150));return je=Rt.call(je),Wt(Te,Se,je,Ye)}if(typeof je.then=="function")return Nr(Te,Se,p2(je),Ye);if(je.$$typeof===E)return Nr(Te,Se,n2(Te,je),Ye);g2(Te,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,Se!==null&&Se.tag===6?(v(Te,Se.sibling),Ye=N(Se,je),Ye.return=Te,Te=Ye):(v(Te,Se),Ye=B_(je,Te.mode,Ye),Ye.return=Te,Te=Ye),X(Te)):v(Te,Se)}return function(Te,Se,je,Ye){try{by=0;var Rt=Nr(Te,Se,je,Ye);return ep=null,Rt}catch(Lt){if(Lt===dy||Lt===s2)throw Lt;var On=po(29,Lt,null,Te.mode);return On.lanes=Ye,On.return=Te,On}finally{}}}var tp=TF(!0),AF=TF(!1),il=Z(null),Pc=null;function fh(h){var p=h.alternate;G(sa,sa.current&1),G(il,h),Pc===null&&(p===null||X0.current!==null||p.memoizedState!==null)&&(Pc=h)}function NF(h){if(h.tag===22){if(G(sa,sa.current),G(il,h),Pc===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(Pc=h)}}else mh()}function mh(){G(sa,sa.current),G(il,il.current)}function Ku(h){le(il),Pc===h&&(Pc=null),le(sa)}var sa=Z(0);function v2(h){for(var p=h;p!==null;){if(p.tag===13){var v=p.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||oT(v)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function y3(h,p,v,k){p=h.memoizedState,v=v(k,p),v=v==null?p:d({},p,v),h.memoizedState=v,h.lanes===0&&(h.updateQueue.baseState=v)}var x3={enqueueSetState:function(h,p,v){h=h._reactInternals;var k=xo(),N=uh(k);N.payload=p,v!=null&&(N.callback=v),p=dh(h,N,k),p!==null&&(bo(p,h,k),fy(p,h,k))},enqueueReplaceState:function(h,p,v){h=h._reactInternals;var k=xo(),N=uh(k);N.tag=1,N.payload=p,v!=null&&(N.callback=v),p=dh(h,N,k),p!==null&&(bo(p,h,k),fy(p,h,k))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var v=xo(),k=uh(v);k.tag=2,p!=null&&(k.callback=p),p=dh(h,k,v),p!==null&&(bo(p,h,v),fy(p,h,v))}};function jF(h,p,v,k,N,M,X){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,M,X):p.prototype&&p.prototype.isPureReactComponent?!ry(v,k)||!ry(N,M):!0}function DF(h,p,v,k){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(v,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(v,k),p.state!==h&&x3.enqueueReplaceState(p,p.state,null)}function sm(h,p){var v=p;if("ref"in p){v={};for(var k in p)k!=="ref"&&(v[k]=p[k])}if(h=h.defaultProps){v===p&&(v=d({},v));for(var N in h)v[N]===void 0&&(v[N]=h[N])}return v}var y2=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function RF(h){y2(h)}function MF(h){console.error(h)}function IF(h){y2(h)}function x2(h,p){try{var v=h.onUncaughtError;v(p.value,{componentStack:p.stack})}catch(k){setTimeout(function(){throw k})}}function OF(h,p,v){try{var k=h.onCaughtError;k(v.value,{componentStack:v.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function b3(h,p,v){return v=uh(v),v.tag=3,v.payload={element:null},v.callback=function(){x2(h,p)},v}function PF(h){return h=uh(h),h.tag=3,h}function FF(h,p,v,k){var N=v.type.getDerivedStateFromError;if(typeof N=="function"){var M=k.value;h.payload=function(){return N(M)},h.callback=function(){OF(p,v,k)}}var X=v.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(h.callback=function(){OF(p,v,k),typeof N!="function"&&(bh===null?bh=new Set([this]):bh.add(this));var ee=k.stack;this.componentDidCatch(k.value,{componentStack:ee!==null?ee:""})})}function jpe(h,p,v,k,N){if(v.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(p=v.alternate,p!==null&&ly(p,v,N,!0),v=il.current,v!==null){switch(v.tag){case 13:return Pc===null?V3():v.alternate===null&&ks===0&&(ks=3),v.flags&=-257,v.flags|=65536,v.lanes=N,k===Y_?v.flags|=16384:(p=v.updateQueue,p===null?v.updateQueue=new Set([k]):p.add(k),G3(h,k,N)),!1;case 22:return v.flags|=65536,k===Y_?v.flags|=16384:(p=v.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([k])},v.updateQueue=p):(v=p.retryQueue,v===null?p.retryQueue=new Set([k]):v.add(k)),G3(h,k,N)),!1}throw Error(r(435,v.tag))}return G3(h,k,N),V3(),!1}if(ur)return p=il.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=N,k!==U_&&(h=Error(r(422),{cause:k}),oy(nl(h,v)))):(k!==U_&&(p=Error(r(423),{cause:k}),oy(nl(p,v))),h=h.current.alternate,h.flags|=65536,N&=-N,h.lanes|=N,k=nl(k,v),N=b3(h.stateNode,k,N),Q_(h,N),ks!==4&&(ks=2)),!1;var M=Error(r(520),{cause:k});if(M=nl(M,v),Ay===null?Ay=[M]:Ay.push(M),ks!==4&&(ks=2),p===null)return!0;k=nl(k,v),v=p;do{switch(v.tag){case 3:return v.flags|=65536,h=N&-N,v.lanes|=h,h=b3(v.stateNode,k,h),Q_(v,h),!1;case 1:if(p=v.type,M=v.stateNode,(v.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(bh===null||!bh.has(M))))return v.flags|=65536,N&=-N,v.lanes|=N,N=PF(N),FF(N,h,v,k),Q_(v,N),!1}v=v.return}while(v!==null);return!1}var BF=Error(r(461)),ka=!1;function Ua(h,p,v,k){p.child=h===null?AF(p,null,v,k):tp(p,h.child,v,k)}function LF(h,p,v,k,N){v=v.render;var M=p.ref;if("ref"in k){var X={};for(var ee in k)ee!=="ref"&&(X[ee]=k[ee])}else X=k;return tm(p),k=r3(h,p,v,X,M,N),ee=s3(),h!==null&&!ka?(a3(h,p,N),Yu(h,p,N)):(ur&&ee&&z_(p),p.flags|=1,Ua(h,p,k,N),p.child)}function zF(h,p,v,k,N){if(h===null){var M=v.type;return typeof M=="function"&&!F_(M)&&M.defaultProps===void 0&&v.compare===null?(p.tag=15,p.type=M,$F(h,p,M,k,N)):(h=Qw(v.type,null,k,p,p.mode,N),h.ref=p.ref,h.return=p,p.child=h)}if(M=h.child,!A3(h,N)){var X=M.memoizedProps;if(v=v.compare,v=v!==null?v:ry,v(X,k)&&h.ref===p.ref)return Yu(h,p,N)}return p.flags|=1,h=Uu(M,k),h.ref=p.ref,h.return=p,p.child=h}function $F(h,p,v,k,N){if(h!==null){var M=h.memoizedProps;if(ry(M,k)&&h.ref===p.ref)if(ka=!1,p.pendingProps=k=M,A3(h,N))(h.flags&131072)!==0&&(ka=!0);else return p.lanes=h.lanes,Yu(h,p,N)}return w3(h,p,v,k,N)}function UF(h,p,v){var k=p.pendingProps,N=k.children,M=h!==null?h.memoizedState:null;if(k.mode==="hidden"){if((p.flags&128)!==0){if(k=M!==null?M.baseLanes|v:v,h!==null){for(N=p.child=h.child,M=0;N!==null;)M=M|N.lanes|N.childLanes,N=N.sibling;p.childLanes=M&~k}else p.childLanes=0,p.child=null;return HF(h,p,k,v)}if((v&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&r2(p,M!==null?M.cachePool:null),M!==null?$P(p,M):e3(),NF(p);else return p.lanes=p.childLanes=536870912,HF(h,p,M!==null?M.baseLanes|v:v,v)}else M!==null?(r2(p,M.cachePool),$P(p,M),mh(),p.memoizedState=null):(h!==null&&r2(p,null),e3(),mh());return Ua(h,p,N,v),p.child}function HF(h,p,v,k){var N=K_();return N=N===null?null:{parent:ra._currentValue,pool:N},p.memoizedState={baseLanes:v,cachePool:N},h!==null&&r2(p,null),e3(),NF(p),h!==null&&ly(h,p,k,!0),null}function b2(h,p){var v=p.ref;if(v===null)h!==null&&h.ref!==null&&(p.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(h===null||h.ref!==v)&&(p.flags|=4194816)}}function w3(h,p,v,k,N){return tm(p),v=r3(h,p,v,k,void 0,N),k=s3(),h!==null&&!ka?(a3(h,p,N),Yu(h,p,N)):(ur&&k&&z_(p),p.flags|=1,Ua(h,p,v,N),p.child)}function VF(h,p,v,k,N,M){return tm(p),p.updateQueue=null,v=HP(p,k,v,N),UP(h),k=s3(),h!==null&&!ka?(a3(h,p,M),Yu(h,p,M)):(ur&&k&&z_(p),p.flags|=1,Ua(h,p,v,M),p.child)}function qF(h,p,v,k,N){if(tm(p),p.stateNode===null){var M=q0,X=v.contextType;typeof X=="object"&&X!==null&&(M=ei(X)),M=new v(k,M),p.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=x3,p.stateNode=M,M._reactInternals=p,M=p.stateNode,M.props=k,M.state=p.memoizedState,M.refs={},X_(p),X=v.contextType,M.context=typeof X=="object"&&X!==null?ei(X):q0,M.state=p.memoizedState,X=v.getDerivedStateFromProps,typeof X=="function"&&(y3(p,v,X,k),M.state=p.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(X=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),X!==M.state&&x3.enqueueReplaceState(M,M.state,null),py(p,k,M,N),my(),M.state=p.memoizedState),typeof M.componentDidMount=="function"&&(p.flags|=4194308),k=!0}else if(h===null){M=p.stateNode;var ee=p.memoizedProps,ye=sm(v,ee);M.props=ye;var De=M.context,Ve=v.contextType;X=q0,typeof Ve=="object"&&Ve!==null&&(X=ei(Ve));var et=v.getDerivedStateFromProps;Ve=typeof et=="function"||typeof M.getSnapshotBeforeUpdate=="function",ee=p.pendingProps!==ee,Ve||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(ee||De!==X)&&DF(p,M,k,X),ch=!1;var Oe=p.memoizedState;M.state=Oe,py(p,k,M,N),my(),De=p.memoizedState,ee||Oe!==De||ch?(typeof et=="function"&&(y3(p,v,et,k),De=p.memoizedState),(ye=ch||jF(p,v,ye,k,Oe,De,X))?(Ve||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(p.flags|=4194308)):(typeof M.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=De),M.props=k,M.state=De,M.context=X,k=ye):(typeof M.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{M=p.stateNode,J_(h,p),X=p.memoizedProps,Ve=sm(v,X),M.props=Ve,et=p.pendingProps,Oe=M.context,De=v.contextType,ye=q0,typeof De=="object"&&De!==null&&(ye=ei(De)),ee=v.getDerivedStateFromProps,(De=typeof ee=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(X!==et||Oe!==ye)&&DF(p,M,k,ye),ch=!1,Oe=p.memoizedState,M.state=Oe,py(p,k,M,N),my();var Pe=p.memoizedState;X!==et||Oe!==Pe||ch||h!==null&&h.dependencies!==null&&t2(h.dependencies)?(typeof ee=="function"&&(y3(p,v,ee,k),Pe=p.memoizedState),(Ve=ch||jF(p,v,Ve,k,Oe,Pe,ye)||h!==null&&h.dependencies!==null&&t2(h.dependencies))?(De||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(k,Pe,ye),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(k,Pe,ye)),typeof M.componentDidUpdate=="function"&&(p.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof M.componentDidUpdate!="function"||X===h.memoizedProps&&Oe===h.memoizedState||(p.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||X===h.memoizedProps&&Oe===h.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=Pe),M.props=k,M.state=Pe,M.context=ye,k=Ve):(typeof M.componentDidUpdate!="function"||X===h.memoizedProps&&Oe===h.memoizedState||(p.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||X===h.memoizedProps&&Oe===h.memoizedState||(p.flags|=1024),k=!1)}return M=k,b2(h,p),k=(p.flags&128)!==0,M||k?(M=p.stateNode,v=k&&typeof v.getDerivedStateFromError!="function"?null:M.render(),p.flags|=1,h!==null&&k?(p.child=tp(p,h.child,null,N),p.child=tp(p,null,v,N)):Ua(h,p,v,N),p.memoizedState=M.state,h=p.child):h=Yu(h,p,N),h}function GF(h,p,v,k){return iy(),p.flags|=256,Ua(h,p,v,k),p.child}var C3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function S3(h){return{baseLanes:h,cachePool:MP()}}function k3(h,p,v){return h=h!==null?h.childLanes&~v:0,p&&(h|=ol),h}function WF(h,p,v){var k=p.pendingProps,N=!1,M=(p.flags&128)!==0,X;if((X=M)||(X=h!==null&&h.memoizedState===null?!1:(sa.current&2)!==0),X&&(N=!0,p.flags&=-129),X=(p.flags&32)!==0,p.flags&=-33,h===null){if(ur){if(N?fh(p):mh(),ur){var ee=Ss,ye;if(ye=ee){e:{for(ye=ee,ee=Oc;ye.nodeType!==8;){if(!ee){ee=null;break e}if(ye=Ll(ye.nextSibling),ye===null){ee=null;break e}}ee=ye}ee!==null?(p.memoizedState={dehydrated:ee,treeContext:Xf!==null?{id:Hu,overflow:Vu}:null,retryLane:536870912,hydrationErrors:null},ye=po(18,null,null,0),ye.stateNode=ee,ye.return=p,p.child=ye,bi=p,Ss=null,ye=!0):ye=!1}ye||Zf(p)}if(ee=p.memoizedState,ee!==null&&(ee=ee.dehydrated,ee!==null))return oT(ee)?p.lanes=32:p.lanes=536870912,null;Ku(p)}return ee=k.children,k=k.fallback,N?(mh(),N=p.mode,ee=w2({mode:"hidden",children:ee},N),k=Yf(k,N,v,null),ee.return=p,k.return=p,ee.sibling=k,p.child=ee,N=p.child,N.memoizedState=S3(v),N.childLanes=k3(h,X,v),p.memoizedState=C3,k):(fh(p),E3(p,ee))}if(ye=h.memoizedState,ye!==null&&(ee=ye.dehydrated,ee!==null)){if(M)p.flags&256?(fh(p),p.flags&=-257,p=_3(h,p,v)):p.memoizedState!==null?(mh(),p.child=h.child,p.flags|=128,p=null):(mh(),N=k.fallback,ee=p.mode,k=w2({mode:"visible",children:k.children},ee),N=Yf(N,ee,v,null),N.flags|=2,k.return=p,N.return=p,k.sibling=N,p.child=k,tp(p,h.child,null,v),k=p.child,k.memoizedState=S3(v),k.childLanes=k3(h,X,v),p.memoizedState=C3,p=N);else if(fh(p),oT(ee)){if(X=ee.nextSibling&&ee.nextSibling.dataset,X)var De=X.dgst;X=De,k=Error(r(419)),k.stack="",k.digest=X,oy({value:k,source:null,stack:null}),p=_3(h,p,v)}else if(ka||ly(h,p,v,!1),X=(v&h.childLanes)!==0,ka||X){if(X=Hr,X!==null&&(k=v&-v,k=(k&42)!==0?1:mn(k),k=(k&(X.suspendedLanes|v))!==0?0:k,k!==0&&k!==ye.retryLane))throw ye.retryLane=k,V0(h,k),bo(X,h,k),BF;ee.data==="$?"||V3(),p=_3(h,p,v)}else ee.data==="$?"?(p.flags|=192,p.child=h.child,p=null):(h=ye.treeContext,Ss=Ll(ee.nextSibling),bi=p,ur=!0,Qf=null,Oc=!1,h!==null&&(sl[al++]=Hu,sl[al++]=Vu,sl[al++]=Xf,Hu=h.id,Vu=h.overflow,Xf=p),p=E3(p,k.children),p.flags|=4096);return p}return N?(mh(),N=k.fallback,ee=p.mode,ye=h.child,De=ye.sibling,k=Uu(ye,{mode:"hidden",children:k.children}),k.subtreeFlags=ye.subtreeFlags&65011712,De!==null?N=Uu(De,N):(N=Yf(N,ee,v,null),N.flags|=2),N.return=p,k.return=p,k.sibling=N,p.child=k,k=N,N=p.child,ee=h.child.memoizedState,ee===null?ee=S3(v):(ye=ee.cachePool,ye!==null?(De=ra._currentValue,ye=ye.parent!==De?{parent:De,pool:De}:ye):ye=MP(),ee={baseLanes:ee.baseLanes|v,cachePool:ye}),N.memoizedState=ee,N.childLanes=k3(h,X,v),p.memoizedState=C3,k):(fh(p),v=h.child,h=v.sibling,v=Uu(v,{mode:"visible",children:k.children}),v.return=p,v.sibling=null,h!==null&&(X=p.deletions,X===null?(p.deletions=[h],p.flags|=16):X.push(h)),p.child=v,p.memoizedState=null,v)}function E3(h,p){return p=w2({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function w2(h,p){return h=po(22,h,null,p),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function _3(h,p,v){return tp(p,h.child,null,v),h=E3(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function KF(h,p,v){h.lanes|=p;var k=h.alternate;k!==null&&(k.lanes|=p),V_(h.return,p,v)}function T3(h,p,v,k,N){var M=h.memoizedState;M===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:v,tailMode:N}:(M.isBackwards=p,M.rendering=null,M.renderingStartTime=0,M.last=k,M.tail=v,M.tailMode=N)}function YF(h,p,v){var k=p.pendingProps,N=k.revealOrder,M=k.tail;if(Ua(h,p,k.children,v),k=sa.current,(k&2)!==0)k=k&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&KF(h,v,p);else if(h.tag===19)KF(h,v,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}switch(G(sa,k),N){case"forwards":for(v=p.child,N=null;v!==null;)h=v.alternate,h!==null&&v2(h)===null&&(N=v),v=v.sibling;v=N,v===null?(N=p.child,p.child=null):(N=v.sibling,v.sibling=null),T3(p,!1,N,v,M);break;case"backwards":for(v=null,N=p.child,p.child=null;N!==null;){if(h=N.alternate,h!==null&&v2(h)===null){p.child=N;break}h=N.sibling,N.sibling=v,v=N,N=h}T3(p,!0,v,null,M);break;case"together":T3(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Yu(h,p,v){if(h!==null&&(p.dependencies=h.dependencies),xh|=p.lanes,(v&p.childLanes)===0)if(h!==null){if(ly(h,p,v,!1),(v&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(r(153));if(p.child!==null){for(h=p.child,v=Uu(h,h.pendingProps),p.child=v,v.return=p;h.sibling!==null;)h=h.sibling,v=v.sibling=Uu(h,h.pendingProps),v.return=p;v.sibling=null}return p.child}function A3(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&t2(h)))}function Dpe(h,p,v){switch(p.tag){case 3:fe(p,p.stateNode.containerInfo),lh(p,ra,h.memoizedState.cache),iy();break;case 27:case 5:ce(p);break;case 4:fe(p,p.stateNode.containerInfo);break;case 10:lh(p,p.type,p.memoizedProps.value);break;case 13:var k=p.memoizedState;if(k!==null)return k.dehydrated!==null?(fh(p),p.flags|=128,null):(v&p.child.childLanes)!==0?WF(h,p,v):(fh(p),h=Yu(h,p,v),h!==null?h.sibling:null);fh(p);break;case 19:var N=(h.flags&128)!==0;if(k=(v&p.childLanes)!==0,k||(ly(h,p,v,!1),k=(v&p.childLanes)!==0),N){if(k)return YF(h,p,v);p.flags|=128}if(N=p.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),G(sa,sa.current),k)break;return null;case 22:case 23:return p.lanes=0,UF(h,p,v);case 24:lh(p,ra,h.memoizedState.cache)}return Yu(h,p,v)}function XF(h,p,v){if(h!==null)if(h.memoizedProps!==p.pendingProps)ka=!0;else{if(!A3(h,v)&&(p.flags&128)===0)return ka=!1,Dpe(h,p,v);ka=(h.flags&131072)!==0}else ka=!1,ur&&(p.flags&1048576)!==0&&_P(p,e2,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var k=p.elementType,N=k._init;if(k=N(k._payload),p.type=k,typeof k=="function")F_(k)?(h=sm(k,h),p.tag=1,p=qF(null,p,k,h,v)):(p.tag=0,p=w3(null,p,k,h,v));else{if(k!=null){if(N=k.$$typeof,N===T){p.tag=11,p=LF(null,p,k,h,v);break e}else if(N===j){p.tag=14,p=zF(null,p,k,h,v);break e}}throw p=H(k)||k,Error(r(306,p,""))}}return p;case 0:return w3(h,p,p.type,p.pendingProps,v);case 1:return k=p.type,N=sm(k,p.pendingProps),qF(h,p,k,N,v);case 3:e:{if(fe(p,p.stateNode.containerInfo),h===null)throw Error(r(387));k=p.pendingProps;var M=p.memoizedState;N=M.element,J_(h,p),py(p,k,null,v);var X=p.memoizedState;if(k=X.cache,lh(p,ra,k),k!==M.cache&&q_(p,[ra],v,!0),my(),k=X.element,M.isDehydrated)if(M={element:k,isDehydrated:!1,cache:X.cache},p.updateQueue.baseState=M,p.memoizedState=M,p.flags&256){p=GF(h,p,k,v);break e}else if(k!==N){N=nl(Error(r(424)),p),oy(N),p=GF(h,p,k,v);break e}else{switch(h=p.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Ss=Ll(h.firstChild),bi=p,ur=!0,Qf=null,Oc=!0,v=AF(p,null,k,v),p.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(iy(),k===N){p=Yu(h,p,v);break e}Ua(h,p,k,v)}p=p.child}return p;case 26:return b2(h,p),h===null?(v=eL(p.type,null,p.pendingProps,null))?p.memoizedState=v:ur||(v=p.type,h=p.pendingProps,k=O2(ie.current).createElement(v),k[Vn]=p,k[xn]=h,Va(k,v,h),Yr(k),p.stateNode=k):p.memoizedState=eL(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:return ce(p),h===null&&ur&&(k=p.stateNode=JB(p.type,p.pendingProps,ie.current),bi=p,Oc=!0,N=Ss,Sh(p.type)?(lT=N,Ss=Ll(k.firstChild)):Ss=N),Ua(h,p,p.pendingProps.children,v),b2(h,p),h===null&&(p.flags|=4194304),p.child;case 5:return h===null&&ur&&((N=k=Ss)&&(k=age(k,p.type,p.pendingProps,Oc),k!==null?(p.stateNode=k,bi=p,Ss=Ll(k.firstChild),Oc=!1,N=!0):N=!1),N||Zf(p)),ce(p),N=p.type,M=p.pendingProps,X=h!==null?h.memoizedProps:null,k=M.children,sT(N,M)?k=null:X!==null&&sT(N,X)&&(p.flags|=32),p.memoizedState!==null&&(N=r3(h,p,Spe,null,null,v),Fy._currentValue=N),b2(h,p),Ua(h,p,k,v),p.child;case 6:return h===null&&ur&&((h=v=Ss)&&(v=ige(v,p.pendingProps,Oc),v!==null?(p.stateNode=v,bi=p,Ss=null,h=!0):h=!1),h||Zf(p)),null;case 13:return WF(h,p,v);case 4:return fe(p,p.stateNode.containerInfo),k=p.pendingProps,h===null?p.child=tp(p,null,k,v):Ua(h,p,k,v),p.child;case 11:return LF(h,p,p.type,p.pendingProps,v);case 7:return Ua(h,p,p.pendingProps,v),p.child;case 8:return Ua(h,p,p.pendingProps.children,v),p.child;case 12:return Ua(h,p,p.pendingProps.children,v),p.child;case 10:return k=p.pendingProps,lh(p,p.type,k.value),Ua(h,p,k.children,v),p.child;case 9:return N=p.type._context,k=p.pendingProps.children,tm(p),N=ei(N),k=k(N),p.flags|=1,Ua(h,p,k,v),p.child;case 14:return zF(h,p,p.type,p.pendingProps,v);case 15:return $F(h,p,p.type,p.pendingProps,v);case 19:return YF(h,p,v);case 31:return k=p.pendingProps,v=p.mode,k={mode:k.mode,children:k.children},h===null?(v=w2(k,v),v.ref=p.ref,p.child=v,v.return=p,p=v):(v=Uu(h.child,k),v.ref=p.ref,p.child=v,v.return=p,p=v),p;case 22:return UF(h,p,v);case 24:return tm(p),k=ei(ra),h===null?(N=K_(),N===null&&(N=Hr,M=G_(),N.pooledCache=M,M.refCount++,M!==null&&(N.pooledCacheLanes|=v),N=M),p.memoizedState={parent:k,cache:N},X_(p),lh(p,ra,N)):((h.lanes&v)!==0&&(J_(h,p),py(p,null,null,v),my()),N=h.memoizedState,M=p.memoizedState,N.parent!==k?(N={parent:k,cache:k},p.memoizedState=N,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=N),lh(p,ra,k)):(k=M.cache,lh(p,ra,k),k!==N.cache&&q_(p,[ra],v,!0))),Ua(h,p,p.pendingProps.children,v),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function Xu(h){h.flags|=4}function JF(h,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!aL(p)){if(p=il.current,p!==null&&((Jn&4194048)===Jn?Pc!==null:(Jn&62914560)!==Jn&&(Jn&536870912)===0||p!==Pc))throw hy=Y_,IP;h.flags|=8192}}function C2(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?za():536870912,h.lanes|=p,ap|=p)}function Cy(h,p){if(!ur)switch(h.tailMode){case"hidden":p=h.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?h.tail=null:v.sibling=null;break;case"collapsed":v=h.tail;for(var k=null;v!==null;)v.alternate!==null&&(k=v),v=v.sibling;k===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function ds(h){var p=h.alternate!==null&&h.alternate.child===h.child,v=0,k=0;if(p)for(var N=h.child;N!==null;)v|=N.lanes|N.childLanes,k|=N.subtreeFlags&65011712,k|=N.flags&65011712,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)v|=N.lanes|N.childLanes,k|=N.subtreeFlags,k|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=k,h.childLanes=v,p}function Rpe(h,p,v){var k=p.pendingProps;switch($_(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(p),null;case 1:return ds(p),null;case 3:return v=p.stateNode,k=null,h!==null&&(k=h.memoizedState.cache),p.memoizedState.cache!==k&&(p.flags|=2048),Gu(ra),se(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(h===null||h.child===null)&&(ay(p)?Xu(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,NP())),ds(p),null;case 26:return v=p.memoizedState,h===null?(Xu(p),v!==null?(ds(p),JF(p,v)):(ds(p),p.flags&=-16777217)):v?v!==h.memoizedState?(Xu(p),ds(p),JF(p,v)):(ds(p),p.flags&=-16777217):(h.memoizedProps!==k&&Xu(p),ds(p),p.flags&=-16777217),null;case 27:ue(p),v=ie.current;var N=p.type;if(h!==null&&p.stateNode!=null)h.memoizedProps!==k&&Xu(p);else{if(!k){if(p.stateNode===null)throw Error(r(166));return ds(p),null}h=K.current,ay(p)?TP(p):(h=JB(N,k,v),p.stateNode=h,Xu(p))}return ds(p),null;case 5:if(ue(p),v=p.type,h!==null&&p.stateNode!=null)h.memoizedProps!==k&&Xu(p);else{if(!k){if(p.stateNode===null)throw Error(r(166));return ds(p),null}if(h=K.current,ay(p))TP(p);else{switch(N=O2(ie.current),h){case 1:h=N.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:h=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":h=N.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":h=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":h=N.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof k.is=="string"?N.createElement("select",{is:k.is}):N.createElement("select"),k.multiple?h.multiple=!0:k.size&&(h.size=k.size);break;default:h=typeof k.is=="string"?N.createElement(v,{is:k.is}):N.createElement(v)}}h[Vn]=p,h[xn]=k;e:for(N=p.child;N!==null;){if(N.tag===5||N.tag===6)h.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===p)break e;for(;N.sibling===null;){if(N.return===null||N.return===p)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}p.stateNode=h;e:switch(Va(h,v,k),v){case"button":case"input":case"select":case"textarea":h=!!k.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Xu(p)}}return ds(p),p.flags&=-16777217,null;case 6:if(h&&p.stateNode!=null)h.memoizedProps!==k&&Xu(p);else{if(typeof k!="string"&&p.stateNode===null)throw Error(r(166));if(h=ie.current,ay(p)){if(h=p.stateNode,v=p.memoizedProps,k=null,N=bi,N!==null)switch(N.tag){case 27:case 5:k=N.memoizedProps}h[Vn]=p,h=!!(h.nodeValue===v||k!==null&&k.suppressHydrationWarning===!0||VB(h.nodeValue,v)),h||Zf(p)}else h=O2(h).createTextNode(k),h[Vn]=p,p.stateNode=h}return ds(p),null;case 13:if(k=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(N=ay(p),k!==null&&k.dehydrated!==null){if(h===null){if(!N)throw Error(r(318));if(N=p.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[Vn]=p}else iy(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ds(p),N=!1}else N=NP(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=N),N=!0;if(!N)return p.flags&256?(Ku(p),p):(Ku(p),null)}if(Ku(p),(p.flags&128)!==0)return p.lanes=v,p;if(v=k!==null,h=h!==null&&h.memoizedState!==null,v){k=p.child,N=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(N=k.alternate.memoizedState.cachePool.pool);var M=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(M=k.memoizedState.cachePool.pool),M!==N&&(k.flags|=2048)}return v!==h&&v&&(p.child.flags|=8192),C2(p,p.updateQueue),ds(p),null;case 4:return se(),h===null&&Z3(p.stateNode.containerInfo),ds(p),null;case 10:return Gu(p.type),ds(p),null;case 19:if(le(sa),N=p.memoizedState,N===null)return ds(p),null;if(k=(p.flags&128)!==0,M=N.rendering,M===null)if(k)Cy(N,!1);else{if(ks!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(M=v2(h),M!==null){for(p.flags|=128,Cy(N,!1),h=M.updateQueue,p.updateQueue=h,C2(p,h),p.subtreeFlags=0,h=v,v=p.child;v!==null;)EP(v,h),v=v.sibling;return G(sa,sa.current&1|2),p.child}h=h.sibling}N.tail!==null&&Me()>E2&&(p.flags|=128,k=!0,Cy(N,!1),p.lanes=4194304)}else{if(!k)if(h=v2(M),h!==null){if(p.flags|=128,k=!0,h=h.updateQueue,p.updateQueue=h,C2(p,h),Cy(N,!0),N.tail===null&&N.tailMode==="hidden"&&!M.alternate&&!ur)return ds(p),null}else 2*Me()-N.renderingStartTime>E2&&v!==536870912&&(p.flags|=128,k=!0,Cy(N,!1),p.lanes=4194304);N.isBackwards?(M.sibling=p.child,p.child=M):(h=N.last,h!==null?h.sibling=M:p.child=M,N.last=M)}return N.tail!==null?(p=N.tail,N.rendering=p,N.tail=p.sibling,N.renderingStartTime=Me(),p.sibling=null,h=sa.current,G(sa,k?h&1|2:h&1),p):(ds(p),null);case 22:case 23:return Ku(p),t3(),k=p.memoizedState!==null,h!==null?h.memoizedState!==null!==k&&(p.flags|=8192):k&&(p.flags|=8192),k?(v&536870912)!==0&&(p.flags&128)===0&&(ds(p),p.subtreeFlags&6&&(p.flags|=8192)):ds(p),v=p.updateQueue,v!==null&&C2(p,v.retryQueue),v=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),k=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(k=p.memoizedState.cachePool.pool),k!==v&&(p.flags|=2048),h!==null&&le(nm),null;case 24:return v=null,h!==null&&(v=h.memoizedState.cache),p.memoizedState.cache!==v&&(p.flags|=2048),Gu(ra),ds(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Mpe(h,p){switch($_(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Gu(ra),se(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return ue(p),null;case 13:if(Ku(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(r(340));iy()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return le(sa),null;case 4:return se(),null;case 10:return Gu(p.type),null;case 22:case 23:return Ku(p),t3(),h!==null&&le(nm),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return Gu(ra),null;case 25:return null;default:return null}}function QF(h,p){switch($_(p),p.tag){case 3:Gu(ra),se();break;case 26:case 27:case 5:ue(p);break;case 4:se();break;case 13:Ku(p);break;case 19:le(sa);break;case 10:Gu(p.type);break;case 22:case 23:Ku(p),t3(),h!==null&&le(nm);break;case 24:Gu(ra)}}function Sy(h,p){try{var v=p.updateQueue,k=v!==null?v.lastEffect:null;if(k!==null){var N=k.next;v=N;do{if((v.tag&h)===h){k=void 0;var M=v.create,X=v.inst;k=M(),X.destroy=k}v=v.next}while(v!==N)}}catch(ee){Rr(p,p.return,ee)}}function ph(h,p,v){try{var k=p.updateQueue,N=k!==null?k.lastEffect:null;if(N!==null){var M=N.next;k=M;do{if((k.tag&h)===h){var X=k.inst,ee=X.destroy;if(ee!==void 0){X.destroy=void 0,N=p;var ye=v,De=ee;try{De()}catch(Ve){Rr(N,ye,Ve)}}}k=k.next}while(k!==M)}}catch(Ve){Rr(p,p.return,Ve)}}function ZF(h){var p=h.updateQueue;if(p!==null){var v=h.stateNode;try{zP(p,v)}catch(k){Rr(h,h.return,k)}}}function eB(h,p,v){v.props=sm(h.type,h.memoizedProps),v.state=h.memoizedState;try{v.componentWillUnmount()}catch(k){Rr(h,p,k)}}function ky(h,p){try{var v=h.ref;if(v!==null){switch(h.tag){case 26:case 27:case 5:var k=h.stateNode;break;case 30:k=h.stateNode;break;default:k=h.stateNode}typeof v=="function"?h.refCleanup=v(k):v.current=k}}catch(N){Rr(h,p,N)}}function Fc(h,p){var v=h.ref,k=h.refCleanup;if(v!==null)if(typeof k=="function")try{k()}catch(N){Rr(h,p,N)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(N){Rr(h,p,N)}else v.current=null}function tB(h){var p=h.type,v=h.memoizedProps,k=h.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":v.autoFocus&&k.focus();break e;case"img":v.src?k.src=v.src:v.srcSet&&(k.srcset=v.srcSet)}}catch(N){Rr(h,h.return,N)}}function N3(h,p,v){try{var k=h.stateNode;ege(k,h.type,v,p),k[xn]=p}catch(N){Rr(h,h.return,N)}}function nB(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Sh(h.type)||h.tag===4}function j3(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||nB(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Sh(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function D3(h,p,v){var k=h.tag;if(k===5||k===6)h=h.stateNode,p?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(h,p):(p=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,p.appendChild(h),v=v._reactRootContainer,v!=null||p.onclick!==null||(p.onclick=I2));else if(k!==4&&(k===27&&Sh(h.type)&&(v=h.stateNode,p=null),h=h.child,h!==null))for(D3(h,p,v),h=h.sibling;h!==null;)D3(h,p,v),h=h.sibling}function S2(h,p,v){var k=h.tag;if(k===5||k===6)h=h.stateNode,p?v.insertBefore(h,p):v.appendChild(h);else if(k!==4&&(k===27&&Sh(h.type)&&(v=h.stateNode),h=h.child,h!==null))for(S2(h,p,v),h=h.sibling;h!==null;)S2(h,p,v),h=h.sibling}function rB(h){var p=h.stateNode,v=h.memoizedProps;try{for(var k=h.type,N=p.attributes;N.length;)p.removeAttributeNode(N[0]);Va(p,k,v),p[Vn]=h,p[xn]=v}catch(M){Rr(h,h.return,M)}}var Ju=!1,Is=!1,R3=!1,sB=typeof WeakSet=="function"?WeakSet:Set,Ea=null;function Ipe(h,p){if(h=h.containerInfo,nT=$2,h=pP(h),j_(h)){if("selectionStart"in h)var v={start:h.selectionStart,end:h.selectionEnd};else e:{v=(v=h.ownerDocument)&&v.defaultView||window;var k=v.getSelection&&v.getSelection();if(k&&k.rangeCount!==0){v=k.anchorNode;var N=k.anchorOffset,M=k.focusNode;k=k.focusOffset;try{v.nodeType,M.nodeType}catch{v=null;break e}var X=0,ee=-1,ye=-1,De=0,Ve=0,et=h,Oe=null;t:for(;;){for(var Pe;et!==v||N!==0&&et.nodeType!==3||(ee=X+N),et!==M||k!==0&&et.nodeType!==3||(ye=X+k),et.nodeType===3&&(X+=et.nodeValue.length),(Pe=et.firstChild)!==null;)Oe=et,et=Pe;for(;;){if(et===h)break t;if(Oe===v&&++De===N&&(ee=X),Oe===M&&++Ve===k&&(ye=X),(Pe=et.nextSibling)!==null)break;et=Oe,Oe=et.parentNode}et=Pe}v=ee===-1||ye===-1?null:{start:ee,end:ye}}else v=null}v=v||{start:0,end:0}}else v=null;for(rT={focusedElem:h,selectionRange:v},$2=!1,Ea=p;Ea!==null;)if(p=Ea,h=p.child,(p.subtreeFlags&1024)!==0&&h!==null)h.return=p,Ea=h;else for(;Ea!==null;){switch(p=Ea,M=p.alternate,h=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&M!==null){h=void 0,v=p,N=M.memoizedProps,M=M.memoizedState,k=v.stateNode;try{var sn=sm(v.type,N,v.elementType===v.type);h=k.getSnapshotBeforeUpdate(sn,M),k.__reactInternalSnapshotBeforeUpdate=h}catch(Wt){Rr(v,v.return,Wt)}}break;case 3:if((h&1024)!==0){if(h=p.stateNode.containerInfo,v=h.nodeType,v===9)iT(h);else if(v===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":iT(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=p.sibling,h!==null){h.return=p.return,Ea=h;break}Ea=p.return}}function aB(h,p,v){var k=v.flags;switch(v.tag){case 0:case 11:case 15:gh(h,v),k&4&&Sy(5,v);break;case 1:if(gh(h,v),k&4)if(h=v.stateNode,p===null)try{h.componentDidMount()}catch(X){Rr(v,v.return,X)}else{var N=sm(v.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(N,p,h.__reactInternalSnapshotBeforeUpdate)}catch(X){Rr(v,v.return,X)}}k&64&&ZF(v),k&512&&ky(v,v.return);break;case 3:if(gh(h,v),k&64&&(h=v.updateQueue,h!==null)){if(p=null,v.child!==null)switch(v.child.tag){case 27:case 5:p=v.child.stateNode;break;case 1:p=v.child.stateNode}try{zP(h,p)}catch(X){Rr(v,v.return,X)}}break;case 27:p===null&&k&4&&rB(v);case 26:case 5:gh(h,v),p===null&&k&4&&tB(v),k&512&&ky(v,v.return);break;case 12:gh(h,v);break;case 13:gh(h,v),k&4&&lB(h,v),k&64&&(h=v.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(v=Hpe.bind(null,v),oge(h,v))));break;case 22:if(k=v.memoizedState!==null||Ju,!k){p=p!==null&&p.memoizedState!==null||Is,N=Ju;var M=Is;Ju=k,(Is=p)&&!M?vh(h,v,(v.subtreeFlags&8772)!==0):gh(h,v),Ju=N,Is=M}break;case 30:break;default:gh(h,v)}}function iB(h){var p=h.alternate;p!==null&&(h.alternate=null,iB(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Pu(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var ts=null,Vi=!1;function Qu(h,p,v){for(v=v.child;v!==null;)oB(h,p,v),v=v.sibling}function oB(h,p,v){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(xe,v)}catch{}switch(v.tag){case 26:Is||Fc(v,p),Qu(h,p,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Is||Fc(v,p);var k=ts,N=Vi;Sh(v.type)&&(ts=v.stateNode,Vi=!1),Qu(h,p,v),My(v.stateNode),ts=k,Vi=N;break;case 5:Is||Fc(v,p);case 6:if(k=ts,N=Vi,ts=null,Qu(h,p,v),ts=k,Vi=N,ts!==null)if(Vi)try{(ts.nodeType===9?ts.body:ts.nodeName==="HTML"?ts.ownerDocument.body:ts).removeChild(v.stateNode)}catch(M){Rr(v,p,M)}else try{ts.removeChild(v.stateNode)}catch(M){Rr(v,p,M)}break;case 18:ts!==null&&(Vi?(h=ts,YB(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,v.stateNode),$y(h)):YB(ts,v.stateNode));break;case 4:k=ts,N=Vi,ts=v.stateNode.containerInfo,Vi=!0,Qu(h,p,v),ts=k,Vi=N;break;case 0:case 11:case 14:case 15:Is||ph(2,v,p),Is||ph(4,v,p),Qu(h,p,v);break;case 1:Is||(Fc(v,p),k=v.stateNode,typeof k.componentWillUnmount=="function"&&eB(v,p,k)),Qu(h,p,v);break;case 21:Qu(h,p,v);break;case 22:Is=(k=Is)||v.memoizedState!==null,Qu(h,p,v),Is=k;break;default:Qu(h,p,v)}}function lB(h,p){if(p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{$y(h)}catch(v){Rr(p,p.return,v)}}function Ope(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new sB),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new sB),p;default:throw Error(r(435,h.tag))}}function M3(h,p){var v=Ope(h);p.forEach(function(k){var N=Vpe.bind(null,h,k);v.has(k)||(v.add(k),k.then(N,N))})}function go(h,p){var v=p.deletions;if(v!==null)for(var k=0;k<v.length;k++){var N=v[k],M=h,X=p,ee=X;e:for(;ee!==null;){switch(ee.tag){case 27:if(Sh(ee.type)){ts=ee.stateNode,Vi=!1;break e}break;case 5:ts=ee.stateNode,Vi=!1;break e;case 3:case 4:ts=ee.stateNode.containerInfo,Vi=!0;break e}ee=ee.return}if(ts===null)throw Error(r(160));oB(M,X,N),ts=null,Vi=!1,M=N.alternate,M!==null&&(M.return=null),N.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)cB(p,h),p=p.sibling}var Bl=null;function cB(h,p){var v=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:go(p,h),vo(h),k&4&&(ph(3,h,h.return),Sy(3,h),ph(5,h,h.return));break;case 1:go(p,h),vo(h),k&512&&(Is||v===null||Fc(v,v.return)),k&64&&Ju&&(h=h.updateQueue,h!==null&&(k=h.callbacks,k!==null&&(v=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=v===null?k:v.concat(k))));break;case 26:var N=Bl;if(go(p,h),vo(h),k&512&&(Is||v===null||Fc(v,v.return)),k&4){var M=v!==null?v.memoizedState:null;if(k=h.memoizedState,v===null)if(k===null)if(h.stateNode===null){e:{k=h.type,v=h.memoizedProps,N=N.ownerDocument||N;t:switch(k){case"title":M=N.getElementsByTagName("title")[0],(!M||M[yi]||M[Vn]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=N.createElement(k),N.head.insertBefore(M,N.querySelector("head > title"))),Va(M,k,v),M[Vn]=h,Yr(M),k=M;break e;case"link":var X=rL("link","href",N).get(k+(v.href||""));if(X){for(var ee=0;ee<X.length;ee++)if(M=X[ee],M.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&M.getAttribute("rel")===(v.rel==null?null:v.rel)&&M.getAttribute("title")===(v.title==null?null:v.title)&&M.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){X.splice(ee,1);break t}}M=N.createElement(k),Va(M,k,v),N.head.appendChild(M);break;case"meta":if(X=rL("meta","content",N).get(k+(v.content||""))){for(ee=0;ee<X.length;ee++)if(M=X[ee],M.getAttribute("content")===(v.content==null?null:""+v.content)&&M.getAttribute("name")===(v.name==null?null:v.name)&&M.getAttribute("property")===(v.property==null?null:v.property)&&M.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&M.getAttribute("charset")===(v.charSet==null?null:v.charSet)){X.splice(ee,1);break t}}M=N.createElement(k),Va(M,k,v),N.head.appendChild(M);break;default:throw Error(r(468,k))}M[Vn]=h,Yr(M),k=M}h.stateNode=k}else sL(N,h.type,h.stateNode);else h.stateNode=nL(N,k,h.memoizedProps);else M!==k?(M===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):M.count--,k===null?sL(N,h.type,h.stateNode):nL(N,k,h.memoizedProps)):k===null&&h.stateNode!==null&&N3(h,h.memoizedProps,v.memoizedProps)}break;case 27:go(p,h),vo(h),k&512&&(Is||v===null||Fc(v,v.return)),v!==null&&k&4&&N3(h,h.memoizedProps,v.memoizedProps);break;case 5:if(go(p,h),vo(h),k&512&&(Is||v===null||Fc(v,v.return)),h.flags&32){N=h.stateNode;try{Ca(N,"")}catch(Pe){Rr(h,h.return,Pe)}}k&4&&h.stateNode!=null&&(N=h.memoizedProps,N3(h,N,v!==null?v.memoizedProps:N)),k&1024&&(R3=!0);break;case 6:if(go(p,h),vo(h),k&4){if(h.stateNode===null)throw Error(r(162));k=h.memoizedProps,v=h.stateNode;try{v.nodeValue=k}catch(Pe){Rr(h,h.return,Pe)}}break;case 3:if(B2=null,N=Bl,Bl=P2(p.containerInfo),go(p,h),Bl=N,vo(h),k&4&&v!==null&&v.memoizedState.isDehydrated)try{$y(p.containerInfo)}catch(Pe){Rr(h,h.return,Pe)}R3&&(R3=!1,uB(h));break;case 4:k=Bl,Bl=P2(h.stateNode.containerInfo),go(p,h),vo(h),Bl=k;break;case 12:go(p,h),vo(h);break;case 13:go(p,h),vo(h),h.child.flags&8192&&h.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(L3=Me()),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,M3(h,k)));break;case 22:N=h.memoizedState!==null;var ye=v!==null&&v.memoizedState!==null,De=Ju,Ve=Is;if(Ju=De||N,Is=Ve||ye,go(p,h),Is=Ve,Ju=De,vo(h),k&8192)e:for(p=h.stateNode,p._visibility=N?p._visibility&-2:p._visibility|1,N&&(v===null||ye||Ju||Is||am(h)),v=null,p=h;;){if(p.tag===5||p.tag===26){if(v===null){ye=v=p;try{if(M=ye.stateNode,N)X=M.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{ee=ye.stateNode;var et=ye.memoizedProps.style,Oe=et!=null&&et.hasOwnProperty("display")?et.display:null;ee.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(Pe){Rr(ye,ye.return,Pe)}}}else if(p.tag===6){if(v===null){ye=p;try{ye.stateNode.nodeValue=N?"":ye.memoizedProps}catch(Pe){Rr(ye,ye.return,Pe)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;v===p&&(v=null),p=p.return}v===p&&(v=null),p.sibling.return=p.return,p=p.sibling}k&4&&(k=h.updateQueue,k!==null&&(v=k.retryQueue,v!==null&&(k.retryQueue=null,M3(h,v))));break;case 19:go(p,h),vo(h),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,M3(h,k)));break;case 30:break;case 21:break;default:go(p,h),vo(h)}}function vo(h){var p=h.flags;if(p&2){try{for(var v,k=h.return;k!==null;){if(nB(k)){v=k;break}k=k.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var N=v.stateNode,M=j3(h);S2(h,M,N);break;case 5:var X=v.stateNode;v.flags&32&&(Ca(X,""),v.flags&=-33);var ee=j3(h);S2(h,ee,X);break;case 3:case 4:var ye=v.stateNode.containerInfo,De=j3(h);D3(h,De,ye);break;default:throw Error(r(161))}}catch(Ve){Rr(h,h.return,Ve)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function uB(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;uB(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),h=h.sibling}}function gh(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)aB(h,p.alternate,p),p=p.sibling}function am(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:ph(4,p,p.return),am(p);break;case 1:Fc(p,p.return);var v=p.stateNode;typeof v.componentWillUnmount=="function"&&eB(p,p.return,v),am(p);break;case 27:My(p.stateNode);case 26:case 5:Fc(p,p.return),am(p);break;case 22:p.memoizedState===null&&am(p);break;case 30:am(p);break;default:am(p)}h=h.sibling}}function vh(h,p,v){for(v=v&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var k=p.alternate,N=h,M=p,X=M.flags;switch(M.tag){case 0:case 11:case 15:vh(N,M,v),Sy(4,M);break;case 1:if(vh(N,M,v),k=M,N=k.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(De){Rr(k,k.return,De)}if(k=M,N=k.updateQueue,N!==null){var ee=k.stateNode;try{var ye=N.shared.hiddenCallbacks;if(ye!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ye.length;N++)LP(ye[N],ee)}catch(De){Rr(k,k.return,De)}}v&&X&64&&ZF(M),ky(M,M.return);break;case 27:rB(M);case 26:case 5:vh(N,M,v),v&&k===null&&X&4&&tB(M),ky(M,M.return);break;case 12:vh(N,M,v);break;case 13:vh(N,M,v),v&&X&4&&lB(N,M);break;case 22:M.memoizedState===null&&vh(N,M,v),ky(M,M.return);break;case 30:break;default:vh(N,M,v)}p=p.sibling}}function I3(h,p){var v=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==v&&(h!=null&&h.refCount++,v!=null&&cy(v))}function O3(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&cy(h))}function Bc(h,p,v,k){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)dB(h,p,v,k),p=p.sibling}function dB(h,p,v,k){var N=p.flags;switch(p.tag){case 0:case 11:case 15:Bc(h,p,v,k),N&2048&&Sy(9,p);break;case 1:Bc(h,p,v,k);break;case 3:Bc(h,p,v,k),N&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&cy(h)));break;case 12:if(N&2048){Bc(h,p,v,k),h=p.stateNode;try{var M=p.memoizedProps,X=M.id,ee=M.onPostCommit;typeof ee=="function"&&ee(X,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(ye){Rr(p,p.return,ye)}}else Bc(h,p,v,k);break;case 13:Bc(h,p,v,k);break;case 23:break;case 22:M=p.stateNode,X=p.alternate,p.memoizedState!==null?M._visibility&2?Bc(h,p,v,k):Ey(h,p):M._visibility&2?Bc(h,p,v,k):(M._visibility|=2,np(h,p,v,k,(p.subtreeFlags&10256)!==0)),N&2048&&I3(X,p);break;case 24:Bc(h,p,v,k),N&2048&&O3(p.alternate,p);break;default:Bc(h,p,v,k)}}function np(h,p,v,k,N){for(N=N&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var M=h,X=p,ee=v,ye=k,De=X.flags;switch(X.tag){case 0:case 11:case 15:np(M,X,ee,ye,N),Sy(8,X);break;case 23:break;case 22:var Ve=X.stateNode;X.memoizedState!==null?Ve._visibility&2?np(M,X,ee,ye,N):Ey(M,X):(Ve._visibility|=2,np(M,X,ee,ye,N)),N&&De&2048&&I3(X.alternate,X);break;case 24:np(M,X,ee,ye,N),N&&De&2048&&O3(X.alternate,X);break;default:np(M,X,ee,ye,N)}p=p.sibling}}function Ey(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var v=h,k=p,N=k.flags;switch(k.tag){case 22:Ey(v,k),N&2048&&I3(k.alternate,k);break;case 24:Ey(v,k),N&2048&&O3(k.alternate,k);break;default:Ey(v,k)}p=p.sibling}}var _y=8192;function rp(h){if(h.subtreeFlags&_y)for(h=h.child;h!==null;)hB(h),h=h.sibling}function hB(h){switch(h.tag){case 26:rp(h),h.flags&_y&&h.memoizedState!==null&&bge(Bl,h.memoizedState,h.memoizedProps);break;case 5:rp(h);break;case 3:case 4:var p=Bl;Bl=P2(h.stateNode.containerInfo),rp(h),Bl=p;break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=_y,_y=16777216,rp(h),_y=p):rp(h));break;default:rp(h)}}function fB(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function Ty(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var v=0;v<p.length;v++){var k=p[v];Ea=k,pB(k,h)}fB(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)mB(h),h=h.sibling}function mB(h){switch(h.tag){case 0:case 11:case 15:Ty(h),h.flags&2048&&ph(9,h,h.return);break;case 3:Ty(h);break;case 12:Ty(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&2&&(h.return===null||h.return.tag!==13)?(p._visibility&=-3,k2(h)):Ty(h);break;default:Ty(h)}}function k2(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var v=0;v<p.length;v++){var k=p[v];Ea=k,pB(k,h)}fB(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:ph(8,p,p.return),k2(p);break;case 22:v=p.stateNode,v._visibility&2&&(v._visibility&=-3,k2(p));break;default:k2(p)}h=h.sibling}}function pB(h,p){for(;Ea!==null;){var v=Ea;switch(v.tag){case 0:case 11:case 15:ph(8,v,p);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var k=v.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:cy(v.memoizedState.cache)}if(k=v.child,k!==null)k.return=v,Ea=k;else e:for(v=h;Ea!==null;){k=Ea;var N=k.sibling,M=k.return;if(iB(k),k===v){Ea=null;break e}if(N!==null){N.return=M,Ea=N;break e}Ea=M}}}var Ppe={getCacheForType:function(h){var p=ei(ra),v=p.data.get(h);return v===void 0&&(v=h(),p.data.set(h,v)),v}},Fpe=typeof WeakMap=="function"?WeakMap:Map,yr=0,Hr=null,Ln=null,Jn=0,xr=0,yo=null,yh=!1,sp=!1,P3=!1,Zu=0,ks=0,xh=0,im=0,F3=0,ol=0,ap=0,Ay=null,qi=null,B3=!1,L3=0,E2=1/0,_2=null,bh=null,Ha=0,wh=null,ip=null,op=0,z3=0,$3=null,gB=null,Ny=0,U3=null;function xo(){if((yr&2)!==0&&Jn!==0)return Jn&-Jn;if(I.T!==null){var h=K0;return h!==0?h:Y3()}return vr()}function vB(){ol===0&&(ol=(Jn&536870912)===0||ur?Hn():536870912);var h=il.current;return h!==null&&(h.flags|=32),ol}function bo(h,p,v){(h===Hr&&(xr===2||xr===9)||h.cancelPendingCommit!==null)&&(lp(h,0),Ch(h,Jn,ol,!1)),Dn(h,v),((yr&2)===0||h!==Hr)&&(h===Hr&&((yr&2)===0&&(im|=v),ks===4&&Ch(h,Jn,ol,!1)),Lc(h))}function yB(h,p,v){if((yr&6)!==0)throw Error(r(327));var k=!v&&(p&124)===0&&(p&h.expiredLanes)===0||Kn(h,p),N=k?zpe(h,p):q3(h,p,!0),M=k;do{if(N===0){sp&&!k&&Ch(h,p,0,!1);break}else{if(v=h.current.alternate,M&&!Bpe(v)){N=q3(h,p,!1),M=!1;continue}if(N===2){if(M=p,h.errorRecoveryDisabledLanes&M)var X=0;else X=h.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){p=X;e:{var ee=h;N=Ay;var ye=ee.current.memoizedState.isDehydrated;if(ye&&(lp(ee,X).flags|=256),X=q3(ee,X,!1),X!==2){if(P3&&!ye){ee.errorRecoveryDisabledLanes|=M,im|=M,N=4;break e}M=qi,qi=N,M!==null&&(qi===null?qi=M:qi.push.apply(qi,M))}N=X}if(M=!1,N!==2)continue}}if(N===1){lp(h,0),Ch(h,p,0,!0);break}e:{switch(k=h,M=N,M){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Ch(k,p,ol,!yh);break e;case 2:qi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(N=L3+300-Me(),10<N)){if(Ch(k,p,ol,!yh),hn(k,0,!0)!==0)break e;k.timeoutHandle=WB(xB.bind(null,k,v,qi,_2,B3,p,ol,im,ap,yh,M,2,-0,0),N);break e}xB(k,v,qi,_2,B3,p,ol,im,ap,yh,M,0,-0,0)}}break}while(!0);Lc(h)}function xB(h,p,v,k,N,M,X,ee,ye,De,Ve,et,Oe,Pe){if(h.timeoutHandle=-1,et=p.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(Py={stylesheets:null,count:0,unsuspend:xge},hB(p),et=wge(),et!==null)){h.cancelPendingCommit=et(_B.bind(null,h,p,M,v,k,N,X,ee,ye,Ve,1,Oe,Pe)),Ch(h,M,X,!De);return}_B(h,p,M,v,k,N,X,ee,ye)}function Bpe(h){for(var p=h;;){var v=p.tag;if((v===0||v===11||v===15)&&p.flags&16384&&(v=p.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var k=0;k<v.length;k++){var N=v[k],M=N.getSnapshot;N=N.value;try{if(!mo(M(),N))return!1}catch{return!1}}if(v=p.child,p.subtreeFlags&16384&&v!==null)v.return=p,p=v;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ch(h,p,v,k){p&=~F3,p&=~im,h.suspendedLanes|=p,h.pingedLanes&=~p,k&&(h.warmLanes|=p),k=h.expirationTimes;for(var N=p;0<N;){var M=31-Qe(N),X=1<<M;k[M]=-1,N&=~X}v!==0&&Et(h,v,p)}function T2(){return(yr&6)===0?(jy(0),!1):!0}function H3(){if(Ln!==null){if(xr===0)var h=Ln.return;else h=Ln,qu=em=null,i3(h),ep=null,by=0,h=Ln;for(;h!==null;)QF(h.alternate,h),h=h.return;Ln=null}}function lp(h,p){var v=h.timeoutHandle;v!==-1&&(h.timeoutHandle=-1,nge(v)),v=h.cancelPendingCommit,v!==null&&(h.cancelPendingCommit=null,v()),H3(),Hr=h,Ln=v=Uu(h.current,null),Jn=p,xr=0,yo=null,yh=!1,sp=Kn(h,p),P3=!1,ap=ol=F3=im=xh=ks=0,qi=Ay=null,B3=!1,(p&8)!==0&&(p|=p&32);var k=h.entangledLanes;if(k!==0)for(h=h.entanglements,k&=p;0<k;){var N=31-Qe(k),M=1<<N;p|=h[N],k&=~M}return Zu=p,Yw(),v}function bB(h,p){Mn=null,I.H=m2,p===dy||p===s2?(p=FP(),xr=3):p===IP?(p=FP(),xr=4):xr=p===BF?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,yo=p,Ln===null&&(ks=1,x2(h,nl(p,h.current)))}function wB(){var h=I.H;return I.H=m2,h===null?m2:h}function CB(){var h=I.A;return I.A=Ppe,h}function V3(){ks=4,yh||(Jn&4194048)!==Jn&&il.current!==null||(sp=!0),(xh&134217727)===0&&(im&134217727)===0||Hr===null||Ch(Hr,Jn,ol,!1)}function q3(h,p,v){var k=yr;yr|=2;var N=wB(),M=CB();(Hr!==h||Jn!==p)&&(_2=null,lp(h,p)),p=!1;var X=ks;e:do try{if(xr!==0&&Ln!==null){var ee=Ln,ye=yo;switch(xr){case 8:H3(),X=6;break e;case 3:case 2:case 9:case 6:il.current===null&&(p=!0);var De=xr;if(xr=0,yo=null,cp(h,ee,ye,De),v&&sp){X=0;break e}break;default:De=xr,xr=0,yo=null,cp(h,ee,ye,De)}}Lpe(),X=ks;break}catch(Ve){bB(h,Ve)}while(!0);return p&&h.shellSuspendCounter++,qu=em=null,yr=k,I.H=N,I.A=M,Ln===null&&(Hr=null,Jn=0,Yw()),X}function Lpe(){for(;Ln!==null;)SB(Ln)}function zpe(h,p){var v=yr;yr|=2;var k=wB(),N=CB();Hr!==h||Jn!==p?(_2=null,E2=Me()+500,lp(h,p)):sp=Kn(h,p);e:do try{if(xr!==0&&Ln!==null){p=Ln;var M=yo;t:switch(xr){case 1:xr=0,yo=null,cp(h,p,M,1);break;case 2:case 9:if(OP(M)){xr=0,yo=null,kB(p);break}p=function(){xr!==2&&xr!==9||Hr!==h||(xr=7),Lc(h)},M.then(p,p);break e;case 3:xr=7;break e;case 4:xr=5;break e;case 7:OP(M)?(xr=0,yo=null,kB(p)):(xr=0,yo=null,cp(h,p,M,7));break;case 5:var X=null;switch(Ln.tag){case 26:X=Ln.memoizedState;case 5:case 27:var ee=Ln;if(!X||aL(X)){xr=0,yo=null;var ye=ee.sibling;if(ye!==null)Ln=ye;else{var De=ee.return;De!==null?(Ln=De,A2(De)):Ln=null}break t}}xr=0,yo=null,cp(h,p,M,5);break;case 6:xr=0,yo=null,cp(h,p,M,6);break;case 8:H3(),ks=6;break e;default:throw Error(r(462))}}$pe();break}catch(Ve){bB(h,Ve)}while(!0);return qu=em=null,I.H=k,I.A=N,yr=v,Ln!==null?0:(Hr=null,Jn=0,Yw(),ks)}function $pe(){for(;Ln!==null&&!He();)SB(Ln)}function SB(h){var p=XF(h.alternate,h,Zu);h.memoizedProps=h.pendingProps,p===null?A2(h):Ln=p}function kB(h){var p=h,v=p.alternate;switch(p.tag){case 15:case 0:p=VF(v,p,p.pendingProps,p.type,void 0,Jn);break;case 11:p=VF(v,p,p.pendingProps,p.type.render,p.ref,Jn);break;case 5:i3(p);default:QF(v,p),p=Ln=EP(p,Zu),p=XF(v,p,Zu)}h.memoizedProps=h.pendingProps,p===null?A2(h):Ln=p}function cp(h,p,v,k){qu=em=null,i3(p),ep=null,by=0;var N=p.return;try{if(jpe(h,N,p,v,Jn)){ks=1,x2(h,nl(v,h.current)),Ln=null;return}}catch(M){if(N!==null)throw Ln=N,M;ks=1,x2(h,nl(v,h.current)),Ln=null;return}p.flags&32768?(ur||k===1?h=!0:sp||(Jn&536870912)!==0?h=!1:(yh=h=!0,(k===2||k===9||k===3||k===6)&&(k=il.current,k!==null&&k.tag===13&&(k.flags|=16384))),EB(p,h)):A2(p)}function A2(h){var p=h;do{if((p.flags&32768)!==0){EB(p,yh);return}h=p.return;var v=Rpe(p.alternate,p,Zu);if(v!==null){Ln=v;return}if(p=p.sibling,p!==null){Ln=p;return}Ln=p=h}while(p!==null);ks===0&&(ks=5)}function EB(h,p){do{var v=Mpe(h.alternate,h);if(v!==null){v.flags&=32767,Ln=v;return}if(v=h.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!p&&(h=h.sibling,h!==null)){Ln=h;return}Ln=h=v}while(h!==null);ks=6,Ln=null}function _B(h,p,v,k,N,M,X,ee,ye){h.cancelPendingCommit=null;do N2();while(Ha!==0);if((yr&6)!==0)throw Error(r(327));if(p!==null){if(p===h.current)throw Error(r(177));if(M=p.lanes|p.childLanes,M|=O_,mr(h,v,M,X,ee,ye),h===Hr&&(Ln=Hr=null,Jn=0),ip=p,wh=h,op=v,z3=M,$3=N,gB=k,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,qpe(pe,function(){return DB(),null})):(h.callbackNode=null,h.callbackPriority=0),k=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||k){k=I.T,I.T=null,N=U.p,U.p=2,X=yr,yr|=4;try{Ipe(h,p,v)}finally{yr=X,U.p=N,I.T=k}}Ha=1,TB(),AB(),NB()}}function TB(){if(Ha===1){Ha=0;var h=wh,p=ip,v=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||v){v=I.T,I.T=null;var k=U.p;U.p=2;var N=yr;yr|=4;try{cB(p,h);var M=rT,X=pP(h.containerInfo),ee=M.focusedElem,ye=M.selectionRange;if(X!==ee&&ee&&ee.ownerDocument&&mP(ee.ownerDocument.documentElement,ee)){if(ye!==null&&j_(ee)){var De=ye.start,Ve=ye.end;if(Ve===void 0&&(Ve=De),"selectionStart"in ee)ee.selectionStart=De,ee.selectionEnd=Math.min(Ve,ee.value.length);else{var et=ee.ownerDocument||document,Oe=et&&et.defaultView||window;if(Oe.getSelection){var Pe=Oe.getSelection(),sn=ee.textContent.length,Wt=Math.min(ye.start,sn),Nr=ye.end===void 0?Wt:Math.min(ye.end,sn);!Pe.extend&&Wt>Nr&&(X=Nr,Nr=Wt,Wt=X);var Te=fP(ee,Wt),Se=fP(ee,Nr);if(Te&&Se&&(Pe.rangeCount!==1||Pe.anchorNode!==Te.node||Pe.anchorOffset!==Te.offset||Pe.focusNode!==Se.node||Pe.focusOffset!==Se.offset)){var je=et.createRange();je.setStart(Te.node,Te.offset),Pe.removeAllRanges(),Wt>Nr?(Pe.addRange(je),Pe.extend(Se.node,Se.offset)):(je.setEnd(Se.node,Se.offset),Pe.addRange(je))}}}}for(et=[],Pe=ee;Pe=Pe.parentNode;)Pe.nodeType===1&&et.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<et.length;ee++){var Ye=et[ee];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}$2=!!nT,rT=nT=null}finally{yr=N,U.p=k,I.T=v}}h.current=p,Ha=2}}function AB(){if(Ha===2){Ha=0;var h=wh,p=ip,v=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||v){v=I.T,I.T=null;var k=U.p;U.p=2;var N=yr;yr|=4;try{aB(h,p.alternate,p)}finally{yr=N,U.p=k,I.T=v}}Ha=3}}function NB(){if(Ha===4||Ha===3){Ha=0,nt();var h=wh,p=ip,v=op,k=gB;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ha=5:(Ha=0,ip=wh=null,jB(h,h.pendingLanes));var N=h.pendingLanes;if(N===0&&(bh=null),Sn(v),p=p.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(xe,p,void 0,(p.current.flags&128)===128)}catch{}if(k!==null){p=I.T,N=U.p,U.p=2,I.T=null;try{for(var M=h.onRecoverableError,X=0;X<k.length;X++){var ee=k[X];M(ee.value,{componentStack:ee.stack})}}finally{I.T=p,U.p=N}}(op&3)!==0&&N2(),Lc(h),N=h.pendingLanes,(v&4194090)!==0&&(N&42)!==0?h===U3?Ny++:(Ny=0,U3=h):Ny=0,jy(0)}}function jB(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,cy(p)))}function N2(h){return TB(),AB(),NB(),DB()}function DB(){if(Ha!==5)return!1;var h=wh,p=z3;z3=0;var v=Sn(op),k=I.T,N=U.p;try{U.p=32>v?32:v,I.T=null,v=$3,$3=null;var M=wh,X=op;if(Ha=0,ip=wh=null,op=0,(yr&6)!==0)throw Error(r(331));var ee=yr;if(yr|=4,mB(M.current),dB(M,M.current,X,v),yr=ee,jy(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(xe,M)}catch{}return!0}finally{U.p=N,I.T=k,jB(h,p)}}function RB(h,p,v){p=nl(v,p),p=b3(h.stateNode,p,2),h=dh(h,p,2),h!==null&&(Dn(h,2),Lc(h))}function Rr(h,p,v){if(h.tag===3)RB(h,h,v);else for(;p!==null;){if(p.tag===3){RB(p,h,v);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(bh===null||!bh.has(k))){h=nl(v,h),v=PF(2),k=dh(p,v,2),k!==null&&(FF(v,k,p,h),Dn(k,2),Lc(k));break}}p=p.return}}function G3(h,p,v){var k=h.pingCache;if(k===null){k=h.pingCache=new Fpe;var N=new Set;k.set(p,N)}else N=k.get(p),N===void 0&&(N=new Set,k.set(p,N));N.has(v)||(P3=!0,N.add(v),h=Upe.bind(null,h,p,v),p.then(h,h))}function Upe(h,p,v){var k=h.pingCache;k!==null&&k.delete(p),h.pingedLanes|=h.suspendedLanes&v,h.warmLanes&=~v,Hr===h&&(Jn&v)===v&&(ks===4||ks===3&&(Jn&62914560)===Jn&&300>Me()-L3?(yr&2)===0&&lp(h,0):F3|=v,ap===Jn&&(ap=0)),Lc(h)}function MB(h,p){p===0&&(p=za()),h=V0(h,p),h!==null&&(Dn(h,p),Lc(h))}function Hpe(h){var p=h.memoizedState,v=0;p!==null&&(v=p.retryLane),MB(h,v)}function Vpe(h,p){var v=0;switch(h.tag){case 13:var k=h.stateNode,N=h.memoizedState;N!==null&&(v=N.retryLane);break;case 19:k=h.stateNode;break;case 22:k=h.stateNode._retryCache;break;default:throw Error(r(314))}k!==null&&k.delete(p),MB(h,v)}function qpe(h,p){return Ne(h,p)}var j2=null,up=null,W3=!1,D2=!1,K3=!1,om=0;function Lc(h){h!==up&&h.next===null&&(up===null?j2=up=h:up=up.next=h),D2=!0,W3||(W3=!0,Wpe())}function jy(h,p){if(!K3&&D2){K3=!0;do for(var v=!1,k=j2;k!==null;){if(h!==0){var N=k.pendingLanes;if(N===0)var M=0;else{var X=k.suspendedLanes,ee=k.pingedLanes;M=(1<<31-Qe(42|h)+1)-1,M&=N&~(X&~ee),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(v=!0,FB(k,M))}else M=Jn,M=hn(k,k===Hr?M:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(M&3)===0||Kn(k,M)||(v=!0,FB(k,M));k=k.next}while(v);K3=!1}}function Gpe(){IB()}function IB(){D2=W3=!1;var h=0;om!==0&&(tge()&&(h=om),om=0);for(var p=Me(),v=null,k=j2;k!==null;){var N=k.next,M=OB(k,p);M===0?(k.next=null,v===null?j2=N:v.next=N,N===null&&(up=v)):(v=k,(h!==0||(M&3)!==0)&&(D2=!0)),k=N}jy(h)}function OB(h,p){for(var v=h.suspendedLanes,k=h.pingedLanes,N=h.expirationTimes,M=h.pendingLanes&-62914561;0<M;){var X=31-Qe(M),ee=1<<X,ye=N[X];ye===-1?((ee&v)===0||(ee&k)!==0)&&(N[X]=jn(ee,p)):ye<=p&&(h.expiredLanes|=ee),M&=~ee}if(p=Hr,v=Jn,v=hn(h,h===p?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k=h.callbackNode,v===0||h===p&&(xr===2||xr===9)||h.cancelPendingCommit!==null)return k!==null&&k!==null&&ve(k),h.callbackNode=null,h.callbackPriority=0;if((v&3)===0||Kn(h,v)){if(p=v&-v,p===h.callbackPriority)return p;switch(k!==null&&ve(k),Sn(v)){case 2:case 8:v=ae;break;case 32:v=pe;break;case 268435456:v=Ue;break;default:v=pe}return k=PB.bind(null,h),v=Ne(v,k),h.callbackPriority=p,h.callbackNode=v,p}return k!==null&&k!==null&&ve(k),h.callbackPriority=2,h.callbackNode=null,2}function PB(h,p){if(Ha!==0&&Ha!==5)return h.callbackNode=null,h.callbackPriority=0,null;var v=h.callbackNode;if(N2()&&h.callbackNode!==v)return null;var k=Jn;return k=hn(h,h===Hr?k:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k===0?null:(yB(h,k,p),OB(h,Me()),h.callbackNode!=null&&h.callbackNode===v?PB.bind(null,h):null)}function FB(h,p){if(N2())return null;yB(h,p,!0)}function Wpe(){rge(function(){(yr&6)!==0?Ne(Le,Gpe):IB()})}function Y3(){return om===0&&(om=Hn()),om}function BB(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:th(""+h)}function LB(h,p){var v=p.ownerDocument.createElement("input");return v.name=p.name,v.value=p.value,h.id&&v.setAttribute("form",h.id),p.parentNode.insertBefore(v,p),h=new FormData(h),v.parentNode.removeChild(v),h}function Kpe(h,p,v,k,N){if(p==="submit"&&v&&v.stateNode===N){var M=BB((N[xn]||null).action),X=k.submitter;X&&(p=(p=X[xn]||null)?BB(p.formAction):X.getAttribute("formAction"),p!==null&&(M=p,X=null));var ee=new ze("action","action",null,k,N);h.push({event:ee,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(om!==0){var ye=X?LB(N,X):new FormData(N);p3(v,{pending:!0,data:ye,method:N.method,action:M},null,ye)}}else typeof M=="function"&&(ee.preventDefault(),ye=X?LB(N,X):new FormData(N),p3(v,{pending:!0,data:ye,method:N.method,action:M},M,ye))},currentTarget:N}]})}}for(var X3=0;X3<I_.length;X3++){var J3=I_[X3],Ype=J3.toLowerCase(),Xpe=J3[0].toUpperCase()+J3.slice(1);Fl(Ype,"on"+Xpe)}Fl(yP,"onAnimationEnd"),Fl(xP,"onAnimationIteration"),Fl(bP,"onAnimationStart"),Fl("dblclick","onDoubleClick"),Fl("focusin","onFocus"),Fl("focusout","onBlur"),Fl(fpe,"onTransitionRun"),Fl(mpe,"onTransitionStart"),Fl(ppe,"onTransitionCancel"),Fl(wP,"onTransitionEnd"),ft("onMouseEnter",["mouseout","mouseover"]),ft("onMouseLeave",["mouseout","mouseover"]),ft("onPointerEnter",["pointerout","pointerover"]),ft("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jpe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dy));function zB(h,p){p=(p&4)!==0;for(var v=0;v<h.length;v++){var k=h[v],N=k.event;k=k.listeners;e:{var M=void 0;if(p)for(var X=k.length-1;0<=X;X--){var ee=k[X],ye=ee.instance,De=ee.currentTarget;if(ee=ee.listener,ye!==M&&N.isPropagationStopped())break e;M=ee,N.currentTarget=De;try{M(N)}catch(Ve){y2(Ve)}N.currentTarget=null,M=ye}else for(X=0;X<k.length;X++){if(ee=k[X],ye=ee.instance,De=ee.currentTarget,ee=ee.listener,ye!==M&&N.isPropagationStopped())break e;M=ee,N.currentTarget=De;try{M(N)}catch(Ve){y2(Ve)}N.currentTarget=null,M=ye}}}}function zn(h,p){var v=p[ta];v===void 0&&(v=p[ta]=new Set);var k=h+"__bubble";v.has(k)||($B(p,h,2,!1),v.add(k))}function Q3(h,p,v){var k=0;p&&(k|=4),$B(v,h,k,p)}var R2="_reactListening"+Math.random().toString(36).slice(2);function Z3(h){if(!h[R2]){h[R2]=!0,Fu.forEach(function(v){v!=="selectionchange"&&(Jpe.has(v)||Q3(v,!1,h),Q3(v,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[R2]||(p[R2]=!0,Q3("selectionchange",!1,p))}}function $B(h,p,v,k){switch(dL(p)){case 2:var N=kge;break;case 8:N=Ege;break;default:N=fT}v=N.bind(null,p,v,h),N=void 0,!sh||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(N=!0),k?N!==void 0?h.addEventListener(p,v,{capture:!0,passive:N}):h.addEventListener(p,v,!0):N!==void 0?h.addEventListener(p,v,{passive:N}):h.addEventListener(p,v,!1)}function eT(h,p,v,k,N){var M=k;if((p&1)===0&&(p&2)===0&&k!==null)e:for(;;){if(k===null)return;var X=k.tag;if(X===3||X===4){var ee=k.stateNode.containerInfo;if(ee===N)break;if(X===4)for(X=k.return;X!==null;){var ye=X.tag;if((ye===3||ye===4)&&X.stateNode.containerInfo===N)return;X=X.return}for(;ee!==null;){if(X=Yo(ee),X===null)return;if(ye=X.tag,ye===5||ye===6||ye===26||ye===27){k=M=X;continue e}ee=ee.parentNode}}k=k.return}rh(function(){var De=M,Ve=nh(v),et=[];e:{var Oe=CP.get(h);if(Oe!==void 0){var Pe=ze,sn=h;switch(h){case"keypress":if(ih(v)===0)break e;case"keydown":case"keyup":Pe=q0e;break;case"focusin":sn="focus",Pe=Rs;break;case"focusout":sn="blur",Pe=Rs;break;case"beforeblur":case"afterblur":Pe=Rs;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Ds;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=K0e;break;case yP:case xP:case bP:Pe=Pl;break;case wP:Pe=X0e;break;case"scroll":case"scrollend":Pe=Ft;break;case"wheel":Pe=Q0e;break;case"copy":case"cut":case"paste":Pe=Ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=Z9;break;case"toggle":case"beforetoggle":Pe=epe}var Wt=(p&4)!==0,Nr=!Wt&&(h==="scroll"||h==="scrollend"),Te=Wt?Oe!==null?Oe+"Capture":null:Oe;Wt=[];for(var Se=De,je;Se!==null;){var Ye=Se;if(je=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||je===null||Te===null||(Ye=tl(Se,Te),Ye!=null&&Wt.push(Ry(Se,Ye,je))),Nr)break;Se=Se.return}0<Wt.length&&(Oe=new Pe(Oe,sn,null,v,Ve),et.push({event:Oe,listeners:Wt}))}}if((p&7)===0){e:{if(Oe=h==="mouseover"||h==="pointerover",Pe=h==="mouseout"||h==="pointerout",Oe&&v!==Vf&&(sn=v.relatedTarget||v.fromElement)&&(Yo(sn)||sn[Xn]))break e;if((Pe||Oe)&&(Oe=Ve.window===Ve?Ve:(Oe=Ve.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Pe?(sn=v.relatedTarget||v.toElement,Pe=De,sn=sn?Yo(sn):null,sn!==null&&(Nr=a(sn),Wt=sn.tag,sn!==Nr||Wt!==5&&Wt!==27&&Wt!==6)&&(sn=null)):(Pe=null,sn=De),Pe!==sn)){if(Wt=na,Ye="onMouseLeave",Te="onMouseEnter",Se="mouse",(h==="pointerout"||h==="pointerover")&&(Wt=Z9,Ye="onPointerLeave",Te="onPointerEnter",Se="pointer"),Nr=Pe==null?Oe:es(Pe),je=sn==null?Oe:es(sn),Oe=new Wt(Ye,Se+"leave",Pe,v,Ve),Oe.target=Nr,Oe.relatedTarget=je,Ye=null,Yo(Ve)===De&&(Wt=new Wt(Te,Se+"enter",sn,v,Ve),Wt.target=je,Wt.relatedTarget=Nr,Ye=Wt),Nr=Ye,Pe&&sn)t:{for(Wt=Pe,Te=sn,Se=0,je=Wt;je;je=dp(je))Se++;for(je=0,Ye=Te;Ye;Ye=dp(Ye))je++;for(;0<Se-je;)Wt=dp(Wt),Se--;for(;0<je-Se;)Te=dp(Te),je--;for(;Se--;){if(Wt===Te||Te!==null&&Wt===Te.alternate)break t;Wt=dp(Wt),Te=dp(Te)}Wt=null}else Wt=null;Pe!==null&&UB(et,Oe,Pe,Wt,!1),sn!==null&&Nr!==null&&UB(et,Nr,sn,Wt,!0)}}e:{if(Oe=De?es(De):window,Pe=Oe.nodeName&&Oe.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Oe.type==="file")var Rt=oP;else if(aP(Oe))if(lP)Rt=upe;else{Rt=lpe;var On=ope}else Pe=Oe.nodeName,!Pe||Pe.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?De&&$i(De.elementType)&&(Rt=oP):Rt=cpe;if(Rt&&(Rt=Rt(h,De))){iP(et,Rt,v,Ve);break e}On&&On(h,Oe,De),h==="focusout"&&De&&Oe.type==="number"&&De.memoizedProps.value!=null&&Lu(Oe,"number",Oe.value)}switch(On=De?es(De):window,h){case"focusin":(aP(On)||On.contentEditable==="true")&&($0=On,D_=De,sy=null);break;case"focusout":sy=D_=$0=null;break;case"mousedown":R_=!0;break;case"contextmenu":case"mouseup":case"dragend":R_=!1,gP(et,v,Ve);break;case"selectionchange":if(hpe)break;case"keydown":case"keyup":gP(et,v,Ve)}var Lt;if(T_)e:{switch(h){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else z0?rP(h,v)&&(Kt="onCompositionEnd"):h==="keydown"&&v.keyCode===229&&(Kt="onCompositionStart");Kt&&(eP&&v.locale!=="ko"&&(z0||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&z0&&(Lt=ah()):(fo=Ve,Ui="value"in fo?fo.value:fo.textContent,z0=!0)),On=M2(De,Kt),0<On.length&&(Kt=new Gf(Kt,h,null,v,Ve),et.push({event:Kt,listeners:On}),Lt?Kt.data=Lt:(Lt=sP(v),Lt!==null&&(Kt.data=Lt)))),(Lt=npe?rpe(h,v):spe(h,v))&&(Kt=M2(De,"onBeforeInput"),0<Kt.length&&(On=new Gf("onBeforeInput","beforeinput",null,v,Ve),et.push({event:On,listeners:Kt}),On.data=Lt)),Kpe(et,h,De,v,Ve)}zB(et,p)})}function Ry(h,p,v){return{instance:h,listener:p,currentTarget:v}}function M2(h,p){for(var v=p+"Capture",k=[];h!==null;){var N=h,M=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||M===null||(N=tl(h,v),N!=null&&k.unshift(Ry(h,N,M)),N=tl(h,p),N!=null&&k.push(Ry(h,N,M))),h.tag===3)return k;h=h.return}return[]}function dp(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function UB(h,p,v,k,N){for(var M=p._reactName,X=[];v!==null&&v!==k;){var ee=v,ye=ee.alternate,De=ee.stateNode;if(ee=ee.tag,ye!==null&&ye===k)break;ee!==5&&ee!==26&&ee!==27||De===null||(ye=De,N?(De=tl(v,M),De!=null&&X.unshift(Ry(v,De,ye))):N||(De=tl(v,M),De!=null&&X.push(Ry(v,De,ye)))),v=v.return}X.length!==0&&h.push({event:p,listeners:X})}var Qpe=/\r\n?/g,Zpe=/\u0000|\uFFFD/g;function HB(h){return(typeof h=="string"?h:""+h).replace(Qpe,`
`).replace(Zpe,"")}function VB(h,p){return p=HB(p),HB(h)===p}function I2(){}function Ar(h,p,v,k,N,M){switch(v){case"children":typeof k=="string"?p==="body"||p==="textarea"&&k===""||Ca(h,k):(typeof k=="number"||typeof k=="bigint")&&p!=="body"&&Ca(h,""+k);break;case"className":Qt(h,"class",k);break;case"tabIndex":Qt(h,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(h,v,k);break;case"style":B0(h,k,M);break;case"data":if(p!=="object"){Qt(h,"data",k);break}case"src":case"href":if(k===""&&(p!=="a"||v!=="href")){h.removeAttribute(v);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(v);break}k=th(""+k),h.setAttribute(v,k);break;case"action":case"formAction":if(typeof k=="function"){h.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(v==="formAction"?(p!=="input"&&Ar(h,p,"name",N.name,N,null),Ar(h,p,"formEncType",N.formEncType,N,null),Ar(h,p,"formMethod",N.formMethod,N,null),Ar(h,p,"formTarget",N.formTarget,N,null)):(Ar(h,p,"encType",N.encType,N,null),Ar(h,p,"method",N.method,N,null),Ar(h,p,"target",N.target,N,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(v);break}k=th(""+k),h.setAttribute(v,k);break;case"onClick":k!=null&&(h.onclick=I2);break;case"onScroll":k!=null&&zn("scroll",h);break;case"onScrollEnd":k!=null&&zn("scrollend",h);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(v=k.__html,v!=null){if(N.children!=null)throw Error(r(60));h.innerHTML=v}}break;case"multiple":h.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":h.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){h.removeAttribute("xlink:href");break}v=th(""+k),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(v,""+k):h.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(v,""):h.removeAttribute(v);break;case"capture":case"download":k===!0?h.setAttribute(v,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(v,k):h.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?h.setAttribute(v,k):h.removeAttribute(v);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?h.removeAttribute(v):h.setAttribute(v,k);break;case"popover":zn("beforetoggle",h),zn("toggle",h),Gt(h,"popover",k);break;case"xlinkActuate":Rn(h,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":Rn(h,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":Rn(h,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":Rn(h,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":Rn(h,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":Rn(h,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":Rn(h,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":Rn(h,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":Rn(h,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":Gt(h,"is",k);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Qv.get(v)||v,Gt(h,v,k))}}function tT(h,p,v,k,N,M){switch(v){case"style":B0(h,k,M);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(v=k.__html,v!=null){if(N.children!=null)throw Error(r(60));h.innerHTML=v}}break;case"children":typeof k=="string"?Ca(h,k):(typeof k=="number"||typeof k=="bigint")&&Ca(h,""+k);break;case"onScroll":k!=null&&zn("scroll",h);break;case"onScrollEnd":k!=null&&zn("scrollend",h);break;case"onClick":k!=null&&(h.onclick=I2);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!We.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(N=v.endsWith("Capture"),p=v.slice(2,N?v.length-7:void 0),M=h[xn]||null,M=M!=null?M[v]:null,typeof M=="function"&&h.removeEventListener(p,M,N),typeof k=="function")){typeof M!="function"&&M!==null&&(v in h?h[v]=null:h.hasAttribute(v)&&h.removeAttribute(v)),h.addEventListener(p,k,N);break e}v in h?h[v]=k:k===!0?h.setAttribute(v,""):Gt(h,v,k)}}}function Va(h,p,v){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zn("error",h),zn("load",h);var k=!1,N=!1,M;for(M in v)if(v.hasOwnProperty(M)){var X=v[M];if(X!=null)switch(M){case"src":k=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Ar(h,p,M,X,v,null)}}N&&Ar(h,p,"srcSet",v.srcSet,v,null),k&&Ar(h,p,"src",v.src,v,null);return;case"input":zn("invalid",h);var ee=M=X=N=null,ye=null,De=null;for(k in v)if(v.hasOwnProperty(k)){var Ve=v[k];if(Ve!=null)switch(k){case"name":N=Ve;break;case"type":X=Ve;break;case"checked":ye=Ve;break;case"defaultChecked":De=Ve;break;case"value":M=Ve;break;case"defaultValue":ee=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(r(137,p));break;default:Ar(h,p,k,Ve,v,null)}}Bu(h,M,ee,ye,De,X,N,!1),bn(h);return;case"select":zn("invalid",h),k=X=M=null;for(N in v)if(v.hasOwnProperty(N)&&(ee=v[N],ee!=null))switch(N){case"value":M=ee;break;case"defaultValue":X=ee;break;case"multiple":k=ee;default:Ar(h,p,N,ee,v,null)}p=M,v=X,h.multiple=!!k,p!=null?Dc(h,!!k,p,!1):v!=null&&Dc(h,!!k,v,!0);return;case"textarea":zn("invalid",h),M=N=k=null;for(X in v)if(v.hasOwnProperty(X)&&(ee=v[X],ee!=null))switch(X){case"value":k=ee;break;case"defaultValue":N=ee;break;case"children":M=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(91));break;default:Ar(h,p,X,ee,v,null)}Rc(h,k,N,M),bn(h);return;case"option":for(ye in v)if(v.hasOwnProperty(ye)&&(k=v[ye],k!=null))switch(ye){case"selected":h.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Ar(h,p,ye,k,v,null)}return;case"dialog":zn("beforetoggle",h),zn("toggle",h),zn("cancel",h),zn("close",h);break;case"iframe":case"object":zn("load",h);break;case"video":case"audio":for(k=0;k<Dy.length;k++)zn(Dy[k],h);break;case"image":zn("error",h),zn("load",h);break;case"details":zn("toggle",h);break;case"embed":case"source":case"link":zn("error",h),zn("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in v)if(v.hasOwnProperty(De)&&(k=v[De],k!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Ar(h,p,De,k,v,null)}return;default:if($i(p)){for(Ve in v)v.hasOwnProperty(Ve)&&(k=v[Ve],k!==void 0&&tT(h,p,Ve,k,v,void 0));return}}for(ee in v)v.hasOwnProperty(ee)&&(k=v[ee],k!=null&&Ar(h,p,ee,k,v,null))}function ege(h,p,v,k){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,M=null,X=null,ee=null,ye=null,De=null,Ve=null;for(Pe in v){var et=v[Pe];if(v.hasOwnProperty(Pe)&&et!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":ye=et;default:k.hasOwnProperty(Pe)||Ar(h,p,Pe,null,k,et)}}for(var Oe in k){var Pe=k[Oe];if(et=v[Oe],k.hasOwnProperty(Oe)&&(Pe!=null||et!=null))switch(Oe){case"type":M=Pe;break;case"name":N=Pe;break;case"checked":De=Pe;break;case"defaultChecked":Ve=Pe;break;case"value":X=Pe;break;case"defaultValue":ee=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(r(137,p));break;default:Pe!==et&&Ar(h,p,Oe,Pe,k,et)}}jc(h,X,ee,ye,De,Ve,M,N);return;case"select":Pe=X=ee=Oe=null;for(M in v)if(ye=v[M],v.hasOwnProperty(M)&&ye!=null)switch(M){case"value":break;case"multiple":Pe=ye;default:k.hasOwnProperty(M)||Ar(h,p,M,null,k,ye)}for(N in k)if(M=k[N],ye=v[N],k.hasOwnProperty(N)&&(M!=null||ye!=null))switch(N){case"value":Oe=M;break;case"defaultValue":ee=M;break;case"multiple":X=M;default:M!==ye&&Ar(h,p,N,M,k,ye)}p=ee,v=X,k=Pe,Oe!=null?Dc(h,!!v,Oe,!1):!!k!=!!v&&(p!=null?Dc(h,!!v,p,!0):Dc(h,!!v,v?[]:"",!1));return;case"textarea":Pe=Oe=null;for(ee in v)if(N=v[ee],v.hasOwnProperty(ee)&&N!=null&&!k.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:Ar(h,p,ee,null,k,N)}for(X in k)if(N=k[X],M=v[X],k.hasOwnProperty(X)&&(N!=null||M!=null))switch(X){case"value":Oe=N;break;case"defaultValue":Pe=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==M&&Ar(h,p,X,N,k,M)}F0(h,Oe,Pe);return;case"option":for(var sn in v)if(Oe=v[sn],v.hasOwnProperty(sn)&&Oe!=null&&!k.hasOwnProperty(sn))switch(sn){case"selected":h.selected=!1;break;default:Ar(h,p,sn,null,k,Oe)}for(ye in k)if(Oe=k[ye],Pe=v[ye],k.hasOwnProperty(ye)&&Oe!==Pe&&(Oe!=null||Pe!=null))switch(ye){case"selected":h.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:Ar(h,p,ye,Oe,k,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in v)Oe=v[Wt],v.hasOwnProperty(Wt)&&Oe!=null&&!k.hasOwnProperty(Wt)&&Ar(h,p,Wt,null,k,Oe);for(De in k)if(Oe=k[De],Pe=v[De],k.hasOwnProperty(De)&&Oe!==Pe&&(Oe!=null||Pe!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,p));break;default:Ar(h,p,De,Oe,k,Pe)}return;default:if($i(p)){for(var Nr in v)Oe=v[Nr],v.hasOwnProperty(Nr)&&Oe!==void 0&&!k.hasOwnProperty(Nr)&&tT(h,p,Nr,void 0,k,Oe);for(Ve in k)Oe=k[Ve],Pe=v[Ve],!k.hasOwnProperty(Ve)||Oe===Pe||Oe===void 0&&Pe===void 0||tT(h,p,Ve,Oe,k,Pe);return}}for(var Te in v)Oe=v[Te],v.hasOwnProperty(Te)&&Oe!=null&&!k.hasOwnProperty(Te)&&Ar(h,p,Te,null,k,Oe);for(et in k)Oe=k[et],Pe=v[et],!k.hasOwnProperty(et)||Oe===Pe||Oe==null&&Pe==null||Ar(h,p,et,Oe,k,Pe)}var nT=null,rT=null;function O2(h){return h.nodeType===9?h:h.ownerDocument}function qB(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GB(h,p){if(h===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&p==="foreignObject"?0:h}function sT(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var aT=null;function tge(){var h=window.event;return h&&h.type==="popstate"?h===aT?!1:(aT=h,!0):(aT=null,!1)}var WB=typeof setTimeout=="function"?setTimeout:void 0,nge=typeof clearTimeout=="function"?clearTimeout:void 0,KB=typeof Promise=="function"?Promise:void 0,rge=typeof queueMicrotask=="function"?queueMicrotask:typeof KB<"u"?function(h){return KB.resolve(null).then(h).catch(sge)}:WB;function sge(h){setTimeout(function(){throw h})}function Sh(h){return h==="head"}function YB(h,p){var v=p,k=0,N=0;do{var M=v.nextSibling;if(h.removeChild(v),M&&M.nodeType===8)if(v=M.data,v==="/$"){if(0<k&&8>k){v=k;var X=h.ownerDocument;if(v&1&&My(X.documentElement),v&2&&My(X.body),v&4)for(v=X.head,My(v),X=v.firstChild;X;){var ee=X.nextSibling,ye=X.nodeName;X[yi]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&X.rel.toLowerCase()==="stylesheet"||v.removeChild(X),X=ee}}if(N===0){h.removeChild(M),$y(p);return}N--}else v==="$"||v==="$?"||v==="$!"?N++:k=v.charCodeAt(0)-48;else k=0;v=M}while(v);$y(p)}function iT(h){var p=h.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var v=p;switch(p=p.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":iT(v),Pu(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}h.removeChild(v)}}function age(h,p,v,k){for(;h.nodeType===1;){var N=v;if(h.nodeName.toLowerCase()!==p.toLowerCase()){if(!k&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(k){if(!h[yi])switch(p){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(M=h.getAttribute("rel"),M==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(M!==N.rel||h.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||h.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||h.getAttribute("title")!==(N.title==null?null:N.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(M=h.getAttribute("src"),(M!==(N.src==null?null:N.src)||h.getAttribute("type")!==(N.type==null?null:N.type)||h.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&M&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(p==="input"&&h.type==="hidden"){var M=N.name==null?null:""+N.name;if(N.type==="hidden"&&h.getAttribute("name")===M)return h}else return h;if(h=Ll(h.nextSibling),h===null)break}return null}function ige(h,p,v){if(p==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!v||(h=Ll(h.nextSibling),h===null))return null;return h}function oT(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function oge(h,p){var v=h.ownerDocument;if(h.data!=="$?"||v.readyState==="complete")p();else{var k=function(){p(),v.removeEventListener("DOMContentLoaded",k)};v.addEventListener("DOMContentLoaded",k),h._reactRetry=k}}function Ll(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return h}var lT=null;function XB(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var v=h.data;if(v==="$"||v==="$!"||v==="$?"){if(p===0)return h;p--}else v==="/$"&&p++}h=h.previousSibling}return null}function JB(h,p,v){switch(p=O2(v),h){case"html":if(h=p.documentElement,!h)throw Error(r(452));return h;case"head":if(h=p.head,!h)throw Error(r(453));return h;case"body":if(h=p.body,!h)throw Error(r(454));return h;default:throw Error(r(451))}}function My(h){for(var p=h.attributes;p.length;)h.removeAttributeNode(p[0]);Pu(h)}var ll=new Map,QB=new Set;function P2(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var ed=U.d;U.d={f:lge,r:cge,D:uge,C:dge,L:hge,m:fge,X:pge,S:mge,M:gge};function lge(){var h=ed.f(),p=T2();return h||p}function cge(h){var p=Xo(h);p!==null&&p.tag===5&&p.type==="form"?yF(p):ed.r(h)}var hp=typeof document>"u"?null:document;function ZB(h,p,v){var k=hp;if(k&&typeof p=="string"&&p){var N=ws(p);N='link[rel="'+h+'"][href="'+N+'"]',typeof v=="string"&&(N+='[crossorigin="'+v+'"]'),QB.has(N)||(QB.add(N),h={rel:h,crossOrigin:v,href:p},k.querySelector(N)===null&&(p=k.createElement("link"),Va(p,"link",h),Yr(p),k.head.appendChild(p)))}}function uge(h){ed.D(h),ZB("dns-prefetch",h,null)}function dge(h,p){ed.C(h,p),ZB("preconnect",h,p)}function hge(h,p,v){ed.L(h,p,v);var k=hp;if(k&&h&&p){var N='link[rel="preload"][as="'+ws(p)+'"]';p==="image"&&v&&v.imageSrcSet?(N+='[imagesrcset="'+ws(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(N+='[imagesizes="'+ws(v.imageSizes)+'"]')):N+='[href="'+ws(h)+'"]';var M=N;switch(p){case"style":M=fp(h);break;case"script":M=mp(h)}ll.has(M)||(h=d({rel:"preload",href:p==="image"&&v&&v.imageSrcSet?void 0:h,as:p},v),ll.set(M,h),k.querySelector(N)!==null||p==="style"&&k.querySelector(Iy(M))||p==="script"&&k.querySelector(Oy(M))||(p=k.createElement("link"),Va(p,"link",h),Yr(p),k.head.appendChild(p)))}}function fge(h,p){ed.m(h,p);var v=hp;if(v&&h){var k=p&&typeof p.as=="string"?p.as:"script",N='link[rel="modulepreload"][as="'+ws(k)+'"][href="'+ws(h)+'"]',M=N;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=mp(h)}if(!ll.has(M)&&(h=d({rel:"modulepreload",href:h},p),ll.set(M,h),v.querySelector(N)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Oy(M)))return}k=v.createElement("link"),Va(k,"link",h),Yr(k),v.head.appendChild(k)}}}function mge(h,p,v){ed.S(h,p,v);var k=hp;if(k&&h){var N=Jo(k).hoistableStyles,M=fp(h);p=p||"default";var X=N.get(M);if(!X){var ee={loading:0,preload:null};if(X=k.querySelector(Iy(M)))ee.loading=5;else{h=d({rel:"stylesheet",href:h,"data-precedence":p},v),(v=ll.get(M))&&cT(h,v);var ye=X=k.createElement("link");Yr(ye),Va(ye,"link",h),ye._p=new Promise(function(De,Ve){ye.onload=De,ye.onerror=Ve}),ye.addEventListener("load",function(){ee.loading|=1}),ye.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,F2(X,p,k)}X={type:"stylesheet",instance:X,count:1,state:ee},N.set(M,X)}}}function pge(h,p){ed.X(h,p);var v=hp;if(v&&h){var k=Jo(v).hoistableScripts,N=mp(h),M=k.get(N);M||(M=v.querySelector(Oy(N)),M||(h=d({src:h,async:!0},p),(p=ll.get(N))&&uT(h,p),M=v.createElement("script"),Yr(M),Va(M,"link",h),v.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},k.set(N,M))}}function gge(h,p){ed.M(h,p);var v=hp;if(v&&h){var k=Jo(v).hoistableScripts,N=mp(h),M=k.get(N);M||(M=v.querySelector(Oy(N)),M||(h=d({src:h,async:!0,type:"module"},p),(p=ll.get(N))&&uT(h,p),M=v.createElement("script"),Yr(M),Va(M,"link",h),v.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},k.set(N,M))}}function eL(h,p,v,k){var N=(N=ie.current)?P2(N):null;if(!N)throw Error(r(446));switch(h){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(p=fp(v.href),v=Jo(N).hoistableStyles,k=v.get(p),k||(k={type:"style",instance:null,count:0,state:null},v.set(p,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){h=fp(v.href);var M=Jo(N).hoistableStyles,X=M.get(h);if(X||(N=N.ownerDocument||N,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(h,X),(M=N.querySelector(Iy(h)))&&!M._p&&(X.instance=M,X.state.loading=5),ll.has(h)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},ll.set(h,v),M||vge(N,h,v,X.state))),p&&k===null)throw Error(r(528,""));return X}if(p&&k!==null)throw Error(r(529,""));return null;case"script":return p=v.async,v=v.src,typeof v=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=mp(v),v=Jo(N).hoistableScripts,k=v.get(p),k||(k={type:"script",instance:null,count:0,state:null},v.set(p,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,h))}}function fp(h){return'href="'+ws(h)+'"'}function Iy(h){return'link[rel="stylesheet"]['+h+"]"}function tL(h){return d({},h,{"data-precedence":h.precedence,precedence:null})}function vge(h,p,v,k){h.querySelector('link[rel="preload"][as="style"]['+p+"]")?k.loading=1:(p=h.createElement("link"),k.preload=p,p.addEventListener("load",function(){return k.loading|=1}),p.addEventListener("error",function(){return k.loading|=2}),Va(p,"link",v),Yr(p),h.head.appendChild(p))}function mp(h){return'[src="'+ws(h)+'"]'}function Oy(h){return"script[async]"+h}function nL(h,p,v){if(p.count++,p.instance===null)switch(p.type){case"style":var k=h.querySelector('style[data-href~="'+ws(v.href)+'"]');if(k)return p.instance=k,Yr(k),k;var N=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return k=(h.ownerDocument||h).createElement("style"),Yr(k),Va(k,"style",N),F2(k,v.precedence,h),p.instance=k;case"stylesheet":N=fp(v.href);var M=h.querySelector(Iy(N));if(M)return p.state.loading|=4,p.instance=M,Yr(M),M;k=tL(v),(N=ll.get(N))&&cT(k,N),M=(h.ownerDocument||h).createElement("link"),Yr(M);var X=M;return X._p=new Promise(function(ee,ye){X.onload=ee,X.onerror=ye}),Va(M,"link",k),p.state.loading|=4,F2(M,v.precedence,h),p.instance=M;case"script":return M=mp(v.src),(N=h.querySelector(Oy(M)))?(p.instance=N,Yr(N),N):(k=v,(N=ll.get(M))&&(k=d({},v),uT(k,N)),h=h.ownerDocument||h,N=h.createElement("script"),Yr(N),Va(N,"link",k),h.head.appendChild(N),p.instance=N);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(k=p.instance,p.state.loading|=4,F2(k,v.precedence,h));return p.instance}function F2(h,p,v){for(var k=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=k.length?k[k.length-1]:null,M=N,X=0;X<k.length;X++){var ee=k[X];if(ee.dataset.precedence===p)M=ee;else if(M!==N)break}M?M.parentNode.insertBefore(h,M.nextSibling):(p=v.nodeType===9?v.head:v,p.insertBefore(h,p.firstChild))}function cT(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.title==null&&(h.title=p.title)}function uT(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.integrity==null&&(h.integrity=p.integrity)}var B2=null;function rL(h,p,v){if(B2===null){var k=new Map,N=B2=new Map;N.set(v,k)}else N=B2,k=N.get(v),k||(k=new Map,N.set(v,k));if(k.has(h))return k;for(k.set(h,null),v=v.getElementsByTagName(h),N=0;N<v.length;N++){var M=v[N];if(!(M[yi]||M[Vn]||h==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var X=M.getAttribute(p)||"";X=h+X;var ee=k.get(X);ee?ee.push(M):k.set(X,[M])}}return k}function sL(h,p,v){h=h.ownerDocument||h,h.head.insertBefore(v,p==="title"?h.querySelector("head > title"):null)}function yge(h,p,v){if(v===1||p.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return h=p.disabled,typeof p.precedence=="string"&&h==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function aL(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var Py=null;function xge(){}function bge(h,p,v){if(Py===null)throw Error(r(475));var k=Py;if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var N=fp(v.href),M=h.querySelector(Iy(N));if(M){h=M._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(k.count++,k=L2.bind(k),h.then(k,k)),p.state.loading|=4,p.instance=M,Yr(M);return}M=h.ownerDocument||h,v=tL(v),(N=ll.get(N))&&cT(v,N),M=M.createElement("link"),Yr(M);var X=M;X._p=new Promise(function(ee,ye){X.onload=ee,X.onerror=ye}),Va(M,"link",v),p.instance=M}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(p,h),(h=p.state.preload)&&(p.state.loading&3)===0&&(k.count++,p=L2.bind(k),h.addEventListener("load",p),h.addEventListener("error",p))}}function wge(){if(Py===null)throw Error(r(475));var h=Py;return h.stylesheets&&h.count===0&&dT(h,h.stylesheets),0<h.count?function(p){var v=setTimeout(function(){if(h.stylesheets&&dT(h,h.stylesheets),h.unsuspend){var k=h.unsuspend;h.unsuspend=null,k()}},6e4);return h.unsuspend=p,function(){h.unsuspend=null,clearTimeout(v)}}:null}function L2(){if(this.count--,this.count===0){if(this.stylesheets)dT(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var z2=null;function dT(h,p){h.stylesheets=null,h.unsuspend!==null&&(h.count++,z2=new Map,p.forEach(Cge,h),z2=null,L2.call(h))}function Cge(h,p){if(!(p.state.loading&4)){var v=z2.get(h);if(v)var k=v.get(null);else{v=new Map,z2.set(h,v);for(var N=h.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<N.length;M++){var X=N[M];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(v.set(X.dataset.precedence,X),k=X)}k&&v.set(null,k)}N=p.instance,X=N.getAttribute("data-precedence"),M=v.get(X)||k,M===k&&v.set(null,N),v.set(X,N),this.count++,k=L2.bind(this),N.addEventListener("load",k),N.addEventListener("error",k),M?M.parentNode.insertBefore(N,M.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(N,h.firstChild)),p.state.loading|=4}}var Fy={$$typeof:E,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Sge(h,p,v,k,N,M,X,ee){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.hiddenUpdates=$a(null),this.identifierPrefix=k,this.onUncaughtError=N,this.onCaughtError=M,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function iL(h,p,v,k,N,M,X,ee,ye,De,Ve,et){return h=new Sge(h,p,v,X,ee,ye,De,et),p=1,M===!0&&(p|=24),M=po(3,null,null,p),h.current=M,M.stateNode=h,p=G_(),p.refCount++,h.pooledCache=p,p.refCount++,M.memoizedState={element:k,isDehydrated:v,cache:p},X_(M),h}function oL(h){return h?(h=q0,h):q0}function lL(h,p,v,k,N,M){N=oL(N),k.context===null?k.context=N:k.pendingContext=N,k=uh(p),k.payload={element:v},M=M===void 0?null:M,M!==null&&(k.callback=M),v=dh(h,k,p),v!==null&&(bo(v,h,p),fy(v,h,p))}function cL(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var v=h.retryLane;h.retryLane=v!==0&&v<p?v:p}}function hT(h,p){cL(h,p),(h=h.alternate)&&cL(h,p)}function uL(h){if(h.tag===13){var p=V0(h,67108864);p!==null&&bo(p,h,67108864),hT(h,67108864)}}var $2=!0;function kge(h,p,v,k){var N=I.T;I.T=null;var M=U.p;try{U.p=2,fT(h,p,v,k)}finally{U.p=M,I.T=N}}function Ege(h,p,v,k){var N=I.T;I.T=null;var M=U.p;try{U.p=8,fT(h,p,v,k)}finally{U.p=M,I.T=N}}function fT(h,p,v,k){if($2){var N=mT(k);if(N===null)eT(h,p,k,U2,v),hL(h,k);else if(Tge(N,h,p,v,k))k.stopPropagation();else if(hL(h,k),p&4&&-1<_ge.indexOf(h)){for(;N!==null;){var M=Xo(N);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var X=$t(M.pendingLanes);if(X!==0){var ee=M;for(ee.pendingLanes|=2,ee.entangledLanes|=2;X;){var ye=1<<31-Qe(X);ee.entanglements[1]|=ye,X&=~ye}Lc(M),(yr&6)===0&&(E2=Me()+500,jy(0))}}break;case 13:ee=V0(M,2),ee!==null&&bo(ee,M,2),T2(),hT(M,2)}if(M=mT(k),M===null&&eT(h,p,k,U2,v),M===N)break;N=M}N!==null&&k.stopPropagation()}else eT(h,p,k,null,v)}}function mT(h){return h=nh(h),pT(h)}var U2=null;function pT(h){if(U2=null,h=Yo(h),h!==null){var p=a(h);if(p===null)h=null;else{var v=p.tag;if(v===13){if(h=i(p),h!==null)return h;h=null}else if(v===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null)}}return U2=h,null}function dL(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case Le:return 2;case ae:return 8;case pe:case _e:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var gT=!1,kh=null,Eh=null,_h=null,By=new Map,Ly=new Map,Th=[],_ge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hL(h,p){switch(h){case"focusin":case"focusout":kh=null;break;case"dragenter":case"dragleave":Eh=null;break;case"mouseover":case"mouseout":_h=null;break;case"pointerover":case"pointerout":By.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ly.delete(p.pointerId)}}function zy(h,p,v,k,N,M){return h===null||h.nativeEvent!==M?(h={blockedOn:p,domEventName:v,eventSystemFlags:k,nativeEvent:M,targetContainers:[N]},p!==null&&(p=Xo(p),p!==null&&uL(p)),h):(h.eventSystemFlags|=k,p=h.targetContainers,N!==null&&p.indexOf(N)===-1&&p.push(N),h)}function Tge(h,p,v,k,N){switch(p){case"focusin":return kh=zy(kh,h,p,v,k,N),!0;case"dragenter":return Eh=zy(Eh,h,p,v,k,N),!0;case"mouseover":return _h=zy(_h,h,p,v,k,N),!0;case"pointerover":var M=N.pointerId;return By.set(M,zy(By.get(M)||null,h,p,v,k,N)),!0;case"gotpointercapture":return M=N.pointerId,Ly.set(M,zy(Ly.get(M)||null,h,p,v,k,N)),!0}return!1}function fL(h){var p=Yo(h.target);if(p!==null){var v=a(p);if(v!==null){if(p=v.tag,p===13){if(p=i(v),p!==null){h.blockedOn=p,er(h.priority,function(){if(v.tag===13){var k=xo();k=mn(k);var N=V0(v,k);N!==null&&bo(N,v,k),hT(v,k)}});return}}else if(p===3&&v.stateNode.current.memoizedState.isDehydrated){h.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}h.blockedOn=null}function H2(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var v=mT(h.nativeEvent);if(v===null){v=h.nativeEvent;var k=new v.constructor(v.type,v);Vf=k,v.target.dispatchEvent(k),Vf=null}else return p=Xo(v),p!==null&&uL(p),h.blockedOn=v,!1;p.shift()}return!0}function mL(h,p,v){H2(h)&&v.delete(p)}function Age(){gT=!1,kh!==null&&H2(kh)&&(kh=null),Eh!==null&&H2(Eh)&&(Eh=null),_h!==null&&H2(_h)&&(_h=null),By.forEach(mL),Ly.forEach(mL)}function V2(h,p){h.blockedOn===p&&(h.blockedOn=null,gT||(gT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Age)))}var q2=null;function pL(h){q2!==h&&(q2=h,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){q2===h&&(q2=null);for(var p=0;p<h.length;p+=3){var v=h[p],k=h[p+1],N=h[p+2];if(typeof k!="function"){if(pT(k||v)===null)continue;break}var M=Xo(v);M!==null&&(h.splice(p,3),p-=3,p3(M,{pending:!0,data:N,method:v.method,action:k},k,N))}}))}function $y(h){function p(ye){return V2(ye,h)}kh!==null&&V2(kh,h),Eh!==null&&V2(Eh,h),_h!==null&&V2(_h,h),By.forEach(p),Ly.forEach(p);for(var v=0;v<Th.length;v++){var k=Th[v];k.blockedOn===h&&(k.blockedOn=null)}for(;0<Th.length&&(v=Th[0],v.blockedOn===null);)fL(v),v.blockedOn===null&&Th.shift();if(v=(h.ownerDocument||h).$$reactFormReplay,v!=null)for(k=0;k<v.length;k+=3){var N=v[k],M=v[k+1],X=N[xn]||null;if(typeof M=="function")X||pL(v);else if(X){var ee=null;if(M&&M.hasAttribute("formAction")){if(N=M,X=M[xn]||null)ee=X.formAction;else if(pT(N)!==null)continue}else ee=X.action;typeof ee=="function"?v[k+1]=ee:(v.splice(k,3),k-=3),pL(v)}}}function vT(h){this._internalRoot=h}G2.prototype.render=vT.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(r(409));var v=p.current,k=xo();lL(v,k,h,p,null,null)},G2.prototype.unmount=vT.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;lL(h.current,2,null,h,null,null),T2(),p[Xn]=null}};function G2(h){this._internalRoot=h}G2.prototype.unstable_scheduleHydration=function(h){if(h){var p=vr();h={blockedOn:null,target:h,priority:p};for(var v=0;v<Th.length&&p!==0&&p<Th[v].priority;v++);Th.splice(v,0,h),v===0&&fL(h)}};var gL=e.version;if(gL!=="19.1.1")throw Error(r(527,gL,"19.1.1"));U.findDOMNode=function(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=l(p),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var Nge={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var W2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!W2.isDisabled&&W2.supportsFiber)try{xe=W2.inject(Nge),Ae=W2}catch{}}return Hy.createRoot=function(h,p){if(!s(h))throw Error(r(299));var v=!1,k="",N=RF,M=MF,X=IF,ee=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onUncaughtError!==void 0&&(N=p.onUncaughtError),p.onCaughtError!==void 0&&(M=p.onCaughtError),p.onRecoverableError!==void 0&&(X=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ee=p.unstable_transitionCallbacks)),p=iL(h,1,!1,null,null,v,k,N,M,X,ee,null),h[Xn]=p.current,Z3(h),new vT(p)},Hy.hydrateRoot=function(h,p,v){if(!s(h))throw Error(r(299));var k=!1,N="",M=RF,X=MF,ee=IF,ye=null,De=null;return v!=null&&(v.unstable_strictMode===!0&&(k=!0),v.identifierPrefix!==void 0&&(N=v.identifierPrefix),v.onUncaughtError!==void 0&&(M=v.onUncaughtError),v.onCaughtError!==void 0&&(X=v.onCaughtError),v.onRecoverableError!==void 0&&(ee=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(ye=v.unstable_transitionCallbacks),v.formState!==void 0&&(De=v.formState)),p=iL(h,1,!0,p,v??null,k,N,M,X,ee,ye,De),p.context=oL(null),v=p.current,k=xo(),k=mn(k),N=uh(k),N.callback=null,dh(v,N,k),v=k,p.current.lanes=v,Dn(p,v),Lc(p),h[Xn]=p.current,Z3(h),new G2(p)},Hy.version="19.1.1",Hy}var AL;function $ge(){if(AL)return bT.exports;AL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bT.exports=zge(),bT.exports}var Uge=$ge();const Hge=Pa(Uge);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var NL="popstate";function Vge(t={}){function e(r,s){let{pathname:a,search:i,hash:o}=r.location;return KN("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:g1(s)}return Gge(e,n,null,t)}function vs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function El(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qge(){return Math.random().toString(36).substring(2,10)}function jL(t,e){return{usr:t.state,key:t.key,idx:e}}function KN(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?dv(e):e,state:n,key:e&&e.key||r||qge()}}function g1({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dv(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Gge(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){o="POP";let C=d(),S=C==null?null:C-u;u=C,l&&l({action:o,location:b.location,delta:S})}function m(C,S){o="PUSH";let w=KN(b.location,C,S);u=d()+1;let E=jL(w,u),T=b.createHref(w);try{i.pushState(E,"",T)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(T)}a&&l&&l({action:o,location:b.location,delta:1})}function g(C,S){o="REPLACE";let w=KN(b.location,C,S);u=d();let E=jL(w,u),T=b.createHref(w);i.replaceState(E,"",T),a&&l&&l({action:o,location:b.location,delta:0})}function x(C){return Wge(C)}let b={get action(){return o},get location(){return t(s,i)},listen(C){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(NL,f),l=C,()=>{s.removeEventListener(NL,f),l=null}},createHref(C){return e(s,C)},createURL:x,encodeLocation(C){let S=x(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:g,go(C){return i.go(C)}};return b}function Wge(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),vs(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:g1(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function iX(t,e,n="/"){return Kge(t,e,n,!1)}function Kge(t,e,n,r){let s=typeof e=="string"?dv(e):e,a=Rd(s.pathname||"/",n);if(a==null)return null;let i=oX(t);Yge(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=ive(a);o=sve(i[l],u,r)}return o}function oX(t,e=[],n=[],r="",s=!1){let a=(i,o,l=s,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;vs(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=Ed([r,d.relativePath]),m=n.concat(d);i.children&&i.children.length>0&&(vs(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),oX(i.children,e,m,f,l)),!(i.path==null&&!i.index)&&e.push({path:f,score:nve(f,i.index),routesMeta:m})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let u of lX(i.path))a(i,o,!0,u)}),e}function lX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=lX(r.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Yge(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rve(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Xge=/^:[\w-]+$/,Jge=3,Qge=2,Zge=1,eve=10,tve=-2,DL=t=>t==="*";function nve(t,e){let n=t.split("/"),r=n.length;return n.some(DL)&&(r+=tve),e&&(r+=Qge),n.filter(s=>!DL(s)).reduce((s,a)=>s+(Xge.test(a)?Jge:a===""?Zge:eve),r)}function rve(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sve(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",i=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=t4({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),m=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=t4({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Ed([a,f.pathname]),pathnameBase:dve(Ed([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=Ed([a,f.pathnameBase]))}return i}function t4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ave(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let x=o[m]||"";i=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const g=o[m];return f&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:t}}function ave(t,e=!1,n=!0){El(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ive(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return El(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Rd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ove=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lve=t=>ove.test(t);function cve(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?dv(t):t,a;if(n)if(lve(n))a=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),El(!1,`Pathnames cannot have embedded double slashes - normalizing ${i} -> ${n}`)}n.startsWith("/")?a=RL(n.substring(1),"/"):a=RL(n,e)}else a=e;return{pathname:a,search:hve(r),hash:fve(s)}}function RL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kT(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uve(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cX(t){let e=uve(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function uX(t,e,n,r=!1){let s;typeof t=="string"?s=dv(t):(s={...t},vs(!s.pathname||!s.pathname.includes("?"),kT("?","pathname","search",s)),vs(!s.pathname||!s.pathname.includes("#"),kT("#","pathname","hash",s)),vs(!s.search||!s.search.includes("#"),kT("#","search","hash",s)));let a=t===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=n;else{let f=e.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}o=f>=0?e[f]:"/"}let l=cve(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ed=t=>t.join("/").replace(/\/\/+/g,"/"),dve=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hve=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fve=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mve(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dX=["POST","PUT","PATCH","DELETE"];new Set(dX);var pve=["GET",...dX];new Set(pve);var hv=y.createContext(null);hv.displayName="DataRouter";var ek=y.createContext(null);ek.displayName="DataRouterState";y.createContext(!1);var hX=y.createContext({isTransitioning:!1});hX.displayName="ViewTransition";var gve=y.createContext(new Map);gve.displayName="Fetchers";var vve=y.createContext(null);vve.displayName="Await";var ku=y.createContext(null);ku.displayName="Navigation";var Bb=y.createContext(null);Bb.displayName="Location";var Gd=y.createContext({outlet:null,matches:[],isDataRoute:!1});Gd.displayName="Route";var d8=y.createContext(null);d8.displayName="RouteError";function yve(t,{relative:e}={}){vs(Lb(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(ku),{hash:s,pathname:a,search:i}=zb(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Ed([n,a])),r.createHref({pathname:o,search:i,hash:s})}function Lb(){return y.useContext(Bb)!=null}function Rf(){return vs(Lb(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Bb).location}var fX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mX(t){y.useContext(ku).static||y.useLayoutEffect(t)}function pX(){let{isDataRoute:t}=y.useContext(Gd);return t?Dve():xve()}function xve(){vs(Lb(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(hv),{basename:e,navigator:n}=y.useContext(ku),{matches:r}=y.useContext(Gd),{pathname:s}=Rf(),a=JSON.stringify(cX(r)),i=y.useRef(!1);return mX(()=>{i.current=!0}),y.useCallback((l,u={})=>{if(El(i.current,fX),!i.current)return;if(typeof l=="number"){n.go(l);return}let d=uX(l,JSON.parse(a),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ed([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,s,t])}y.createContext(null);function zb(t,{relative:e}={}){let{matches:n}=y.useContext(Gd),{pathname:r}=Rf(),s=JSON.stringify(cX(n));return y.useMemo(()=>uX(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function bve(t,e){return gX(t,e)}function gX(t,e,n,r,s){var w;vs(Lb(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=y.useContext(ku),{matches:i}=y.useContext(Gd),o=i[i.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let E=f&&f.path||"";vX(u,!f||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=Rf(),g;if(e){let E=typeof e=="string"?dv(e):e;vs(d==="/"||((w=E.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=m;let x=g.pathname||"/",b=x;if(d!=="/"){let E=d.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let C=iX(t,{pathname:b});El(f||C!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),El(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Eve(C&&C.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Ed([d,a.encodeLocation?a.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Ed([d,a.encodeLocation?a.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),i,n,r,s);return e&&S?y.createElement(Bb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function wve(){let t=jve(),e=mve(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:a},"ErrorBoundary")," or"," ",y.createElement("code",{style:a},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,i)}var Cve=y.createElement(wve,null),Sve=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(Gd.Provider,{value:this.props.routeContext},y.createElement(d8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kve({routeContext:t,match:e,children:n}){let r=y.useContext(hv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Gd.Provider,{value:t},n)}function Eve(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,i=n==null?void 0:n.errors;if(i!=null){let d=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);vs(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let o=!1,l=-1;if(n)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:m,errors:g}=n,x=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let u=n&&r?(d,f)=>{var m,g;r(d,{location:n.location,params:((g=(m=n.matches)==null?void 0:m[0])==null?void 0:g.params)??{},errorInfo:f})}:void 0;return a.reduceRight((d,f,m)=>{let g,x=!1,b=null,C=null;n&&(g=i&&f.route.id?i[f.route.id]:void 0,b=f.route.errorElement||Cve,o&&(l<0&&m===0?(vX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,C=null):l===m&&(x=!0,C=f.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,m+1)),w=()=>{let E;return g?E=b:x?E=C:f.route.Component?E=y.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,y.createElement(kve,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(Sve,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):w()},null)}function h8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _ve(t){let e=y.useContext(hv);return vs(e,h8(t)),e}function Tve(t){let e=y.useContext(ek);return vs(e,h8(t)),e}function Ave(t){let e=y.useContext(Gd);return vs(e,h8(t)),e}function f8(t){let e=Ave(t),n=e.matches[e.matches.length-1];return vs(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Nve(){return f8("useRouteId")}function jve(){var r;let t=y.useContext(d8),e=Tve("useRouteError"),n=f8("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Dve(){let{router:t}=_ve("useNavigate"),e=f8("useNavigate"),n=y.useRef(!1);return mX(()=>{n.current=!0}),y.useCallback(async(s,a={})=>{El(n.current,fX),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var ML={};function vX(t,e,n){!e&&!ML[t]&&(ML[t]=!0,El(!1,n))}y.memo(Rve);function Rve({routes:t,future:e,state:n,unstable_onError:r}){return gX(t,void 0,n,r,e)}function Wi(t){vs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mve({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){vs(!Lb(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),o=y.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);typeof n=="string"&&(n=dv(n));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:m="default"}=n,g=y.useMemo(()=>{let x=Rd(l,i);return x==null?null:{location:{pathname:x,search:u,hash:d,state:f,key:m},navigationType:r}},[i,l,u,d,f,m,r]);return El(g!=null,`<Router basename="${i}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:y.createElement(ku.Provider,{value:o},y.createElement(Bb.Provider,{children:e,value:g}))}function Ive({children:t,location:e}){return bve(YN(t),e)}function YN(t,e=[]){let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let a=[...e,s];if(r.type===y.Fragment){n.push.apply(n,YN(r.props.children,a));return}vs(r.type===Wi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vs(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=YN(r.props.children,a)),n.push(i)}),n}var hS="get",fS="application/x-www-form-urlencoded";function tk(t){return t!=null&&typeof t.tagName=="string"}function Ove(t){return tk(t)&&t.tagName.toLowerCase()==="button"}function Pve(t){return tk(t)&&t.tagName.toLowerCase()==="form"}function Fve(t){return tk(t)&&t.tagName.toLowerCase()==="input"}function Bve(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Lve(t,e){return t.button===0&&(!e||e==="_self")&&!Bve(t)}function XN(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function zve(t,e){let n=XN(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}var K2=null;function $ve(){if(K2===null)try{new FormData(document.createElement("form"),0),K2=!1}catch{K2=!0}return K2}var Uve=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ET(t){return t!=null&&!Uve.has(t)?(El(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fS}"`),null):t}function Hve(t,e){let n,r,s,a,i;if(Pve(t)){let o=t.getAttribute("action");r=o?Rd(o,e):null,n=t.getAttribute("method")||hS,s=ET(t.getAttribute("enctype"))||fS,a=new FormData(t)}else if(Ove(t)||Fve(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?Rd(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||hS,s=ET(t.getAttribute("formenctype"))||ET(o.getAttribute("enctype"))||fS,a=new FormData(o,t),!$ve()){let{name:u,type:d,value:f}=t;if(d==="image"){let m=u?`${u}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else u&&a.append(u,f)}}else{if(tk(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hS,r=null,s=fS,i=t}return a&&s==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m8(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vve(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Rd(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function qve(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Gve(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Wve(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let i=await qve(a,n);return i.links?i.links():[]}return[]}));return Jve(r.flat(1).filter(Gve).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function IL(t,e,n,r,s,a){let i=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>i(l,u)||o(l,u)):a==="data"?e.filter((l,u)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Kve(t,e,{includeHydrateFallback:n}={}){return Yve(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function Yve(t){return[...new Set(t)]}function Xve(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Jve(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(Xve(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function yX(){let t=y.useContext(hv);return m8(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Qve(){let t=y.useContext(ek);return m8(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var p8=y.createContext(void 0);p8.displayName="FrameworkContext";function xX(){let t=y.useContext(p8);return m8(t,"You must render this element inside a <HydratedRouter> element"),t}function Zve(t,e){let n=y.useContext(p8),[r,s]=y.useState(!1),[a,i]=y.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,m=y.useRef(null);y.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let b=S=>{S.forEach(w=>{i(w.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return m.current&&C.observe(m.current),()=>{C.disconnect()}}},[t]),y.useEffect(()=>{if(r){let b=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(b)}}},[r]);let g=()=>{s(!0)},x=()=>{s(!1),i(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:Vy(o,g),onBlur:Vy(l,x),onMouseEnter:Vy(u,g),onMouseLeave:Vy(d,x),onTouchStart:Vy(f,g)}]:[!1,m,{}]}function Vy(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function eye({page:t,...e}){let{router:n}=yX(),r=y.useMemo(()=>iX(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(nye,{page:t,matches:r,...e}):null}function tye(t){let{manifest:e,routeModules:n}=xX(),[r,s]=y.useState([]);return y.useEffect(()=>{let a=!1;return Wve(t,e,n).then(i=>{a||s(i)}),()=>{a=!0}},[t,e,n]),r}function nye({page:t,matches:e,...n}){let r=Rf(),{manifest:s,routeModules:a}=xX(),{basename:i}=yX(),{loaderData:o,matches:l}=Qve(),u=y.useMemo(()=>IL(t,e,l,s,r,"data"),[t,e,l,s,r]),d=y.useMemo(()=>IL(t,e,l,s,r,"assets"),[t,e,l,s,r]),f=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,b=!1;if(e.forEach(S=>{var E;let w=s.routes[S.route.id];!w||!w.hasLoader||(!u.some(T=>T.route.id===S.route.id)&&S.route.id in o&&((E=a[S.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?b=!0:x.add(S.route.id))}),x.size===0)return[];let C=Vve(t,i,"data");return b&&x.size>0&&C.searchParams.set("_routes",e.filter(S=>x.has(S.route.id)).map(S=>S.route.id).join(",")),[C.pathname+C.search]},[i,o,r,s,u,e,t,a]),m=y.useMemo(()=>Kve(d,s),[d,s]),g=tye(d);return y.createElement(y.Fragment,null,f.map(x=>y.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>y.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),g.map(({key:x,link:b})=>y.createElement("link",{key:x,nonce:n.nonce,...b})))}function rye(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bX&&(window.__reactRouterVersion="7.9.6")}catch{}function sye({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=Vge({window:n,v5Compat:!0}));let s=r.current,[a,i]=y.useState({action:s.action,location:s.location}),o=y.useCallback(l=>{y.startTransition(()=>i(l))},[i]);return y.useLayoutEffect(()=>s.listen(o),[s,o]),y.createElement(Mve,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var wX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CX=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:i,state:o,target:l,to:u,preventScrollReset:d,viewTransition:f,...m},g){let{basename:x}=y.useContext(ku),b=typeof u=="string"&&wX.test(u),C,S=!1;if(typeof u=="string"&&b&&(C=u,bX))try{let z=new URL(window.location.href),F=u.startsWith("//")?new URL(z.protocol+u):new URL(u),R=Rd(F.pathname,x);F.origin===z.origin&&R!=null?u=R+F.search+F.hash:S=!0}catch{El(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=yve(u,{relative:s}),[E,T,_]=Zve(r,m),A=lye(u,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:f});function j(z){e&&e(z),z.defaultPrevented||A(z)}let D=y.createElement("a",{...m,..._,href:C||w,onClick:S||a?e:j,ref:rye(g,T),target:l,"data-discover":!b&&n==="render"?"true":void 0});return E&&!b?y.createElement(y.Fragment,null,D,y.createElement(eye,{page:w})):D});CX.displayName="Link";var aye=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:i,viewTransition:o,children:l,...u},d){let f=zb(i,{relative:u.relative}),m=Rf(),g=y.useContext(ek),{navigator:x,basename:b}=y.useContext(ku),C=g!=null&&fye(f)&&o===!0,S=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,w=m.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(w=w.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&b&&(E=Rd(E,b)||E);const T=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let _=w===S||!s&&w.startsWith(S)&&w.charAt(T)==="/",A=E!=null&&(E===S||!s&&E.startsWith(S)&&E.charAt(S.length)==="/"),j={isActive:_,isPending:A,isTransitioning:C},D=_?e:void 0,z;typeof r=="function"?z=r(j):z=[r,_?"active":null,A?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(j):a;return y.createElement(CX,{...u,"aria-current":D,className:z,ref:d,style:F,to:i,viewTransition:o},typeof l=="function"?l(j):l)});aye.displayName="NavLink";var iye=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:i=hS,action:o,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...m},g)=>{let x=dye(),b=hye(o,{relative:u}),C=i.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&wX.test(o),w=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let T=E.nativeEvent.submitter,_=(T==null?void 0:T.getAttribute("formmethod"))||i;x(T||E.currentTarget,{fetcherKey:e,method:_,navigate:n,replace:s,state:a,relative:u,preventScrollReset:d,viewTransition:f})};return y.createElement("form",{ref:g,method:C,action:b,onSubmit:r?l:w,...m,"data-discover":!S&&t==="render"?"true":void 0})});iye.displayName="Form";function oye(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SX(t){let e=y.useContext(hv);return vs(e,oye(t)),e}function lye(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=pX(),l=Rf(),u=zb(t,{relative:a});return y.useCallback(d=>{if(Lve(d,e)){d.preventDefault();let f=n!==void 0?n:g1(l)===g1(u);o(t,{replace:f,state:r,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,u,n,r,e,t,s,a,i])}function g8(t){El(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(XN(t)),n=y.useRef(!1),r=Rf(),s=y.useMemo(()=>zve(r.search,n.current?null:e.current),[r.search]),a=pX(),i=y.useCallback((o,l)=>{const u=XN(typeof o=="function"?o(new URLSearchParams(s)):o);n.current=!0,a("?"+u,l)},[a,s]);return[s,i]}var cye=0,uye=()=>`__${String(++cye)}__`;function dye(){let{router:t}=SX("useSubmit"),{basename:e}=y.useContext(ku),n=Nve();return y.useCallback(async(r,s={})=>{let{action:a,method:i,encType:o,formData:l,body:u}=Hve(r,e);if(s.navigate===!1){let d=s.fetcherKey||uye();await t.fetch(d,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function hye(t,{relative:e}={}){let{basename:n}=y.useContext(ku),r=y.useContext(Gd);vs(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...zb(t||".",{relative:e})},i=Rf();if(t==null){a.search=i.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ed([n,a.pathname])),g1(a)}function fye(t,{relative:e}={}){let n=y.useContext(hX);vs(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=SX("useViewTransitionState"),s=zb(t,{relative:e});if(!n.isTransitioning)return!1;let a=Rd(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Rd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return t4(s.pathname,i)!=null||t4(s.pathname,a)!=null}var tu=aX();const nk=Pa(tu);var _T,OL;function mye(){if(OL)return _T;OL=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,i){if(a===i)return!0;if(a&&i&&typeof a=="object"&&typeof i=="object"){if(a.constructor!==i.constructor)return!1;var o,l,u;if(Array.isArray(a)){if(o=a.length,o!=i.length)return!1;for(l=o;l--!==0;)if(!s(a[l],i[l]))return!1;return!0}var d;if(e&&a instanceof Map&&i instanceof Map){if(a.size!==i.size)return!1;for(d=a.entries();!(l=d.next()).done;)if(!i.has(l.value[0]))return!1;for(d=a.entries();!(l=d.next()).done;)if(!s(l.value[1],i.get(l.value[0])))return!1;return!0}if(n&&a instanceof Set&&i instanceof Set){if(a.size!==i.size)return!1;for(d=a.entries();!(l=d.next()).done;)if(!i.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(i)){if(o=a.length,o!=i.length)return!1;for(l=o;l--!==0;)if(a[l]!==i[l])return!1;return!0}if(a.constructor===RegExp)return a.source===i.source&&a.flags===i.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof i.valueOf=="function")return a.valueOf()===i.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof i.toString=="function")return a.toString()===i.toString();if(u=Object.keys(a),o=u.length,o!==Object.keys(i).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(i,u[l]))return!1;if(t&&a instanceof Element)return!1;for(l=o;l--!==0;)if(!((u[l]==="_owner"||u[l]==="__v"||u[l]==="__o")&&a.$$typeof)&&!s(a[u[l]],i[u[l]]))return!1;return!0}return a!==a&&i!==i}return _T=function(i,o){try{return s(i,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},_T}var pye=mye();const gye=Pa(pye);var TT,PL;function vye(){if(PL)return TT;PL=1;var t=function(e,n,r,s,a,i,o,l){if(!e){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,s,a,i,o,l],f=0;u=new Error(n.replace(/%s/g,function(){return d[f++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return TT=t,TT}var yye=vye();const FL=Pa(yye);var AT,BL;function xye(){return BL||(BL=1,AT=function(e,n,r,s){var a=r?r.call(s,e,n):void 0;if(a!==void 0)return!!a;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<i.length;u++){var d=i[u];if(!l(d))return!1;var f=e[d],m=n[d];if(a=r?r.call(s,f,m,d):void 0,a===!1||a===void 0&&f!==m)return!1}return!0}),AT}var bye=xye();const wye=Pa(bye);var kX=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(kX||{}),NT={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},LL=Object.values(kX),v8={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Cye=Object.entries(v8).reduce((t,[e,n])=>(t[n]=e,t),{}),ec="data-rh",lg={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},cg=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},Sye=t=>{let e=cg(t,"title");const n=cg(t,lg.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=cg(t,lg.DEFAULT_TITLE);return e||r||void 0},kye=t=>cg(t,lg.ON_CHANGE_CLIENT_STATE)||(()=>{}),jT=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),Eye=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let a=0;a<s.length;a+=1){const o=s[a].toLowerCase();if(t.indexOf(o)!==-1&&r[o])return n.concat(r)}}return n},[]),_ye=t=>console&&typeof console.warn=="function"&&console.warn(t),qy=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&_ye(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,a)=>{const i={};a.filter(l=>{let u;const d=Object.keys(l);for(let m=0;m<d.length;m+=1){const g=d[m],x=g.toLowerCase();e.indexOf(x)!==-1&&!(u==="rel"&&l[u].toLowerCase()==="canonical")&&!(x==="rel"&&l[x].toLowerCase()==="stylesheet")&&(u=x),e.indexOf(g)!==-1&&(g==="innerHTML"||g==="cssText"||g==="itemprop")&&(u=g)}if(!u||!l[u])return!1;const f=l[u].toLowerCase();return r[u]||(r[u]={}),i[u]||(i[u]={}),r[u][f]?!1:(i[u][f]=!0,!0)}).reverse().forEach(l=>s.push(l));const o=Object.keys(i);for(let l=0;l<o.length;l+=1){const u=o[l],d={...r[u],...i[u]};r[u]=d}return s},[]).reverse()},Tye=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},Aye=t=>({baseTag:Eye(["href"],t),bodyAttributes:jT("bodyAttributes",t),defer:cg(t,lg.DEFER),encode:cg(t,lg.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:jT("htmlAttributes",t),linkTags:qy("link",["rel","href"],t),metaTags:qy("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:qy("noscript",["innerHTML"],t),onChangeClientState:kye(t),scriptTags:qy("script",["src","innerHTML"],t),styleTags:qy("style",["cssText"],t),title:Sye(t),titleAttributes:jT("titleAttributes",t),prioritizeSeoTags:Tye(t,lg.PRIORITIZE_SEO_TAGS)}),EX=t=>Array.isArray(t)?t.join(""):t,Nye=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},DT=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(Nye(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},zL=(t,e)=>({...t,[e]:void 0}),jye=["noscript","script","style"],JN=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),_X=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),Dye=(t,e,n,r)=>{const s=_X(n),a=EX(e);return s?`<${t} ${ec}="true" ${s}>${JN(a,r)}</${t}>`:`<${t} ${ec}="true">${JN(a,r)}</${t}>`},Rye=(t,e,n=!0)=>e.reduce((r,s)=>{const a=s,i=Object.keys(a).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const f=typeof a[d]>"u"?d:`${d}="${JN(a[d],n)}"`;return u?`${u} ${f}`:f},""),o=a.innerHTML||a.cssText||"",l=jye.indexOf(t)===-1;return`${r}<${t} ${ec}="true" ${i}${l?"/>":`>${o}</${t}>`}`},""),TX=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=v8[r];return n[s||r]=t[r],n},e),Mye=(t,e,n)=>{const r={key:e,[ec]:!0},s=TX(n,r);return[Ce.createElement("title",s,e)]},mS=(t,e)=>e.map((n,r)=>{const s={key:r,[ec]:!0};return Object.keys(n).forEach(a=>{const o=v8[a]||a;if(o==="innerHTML"||o==="cssText"){const l=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:l}}else s[o]=n[a]}),Ce.createElement(t,s)}),fl=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>Mye(t,e.title,e.titleAttributes),toString:()=>Dye(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>TX(e),toString:()=>_X(e)};default:return{toComponent:()=>mS(t,e),toString:()=>Rye(t,e,n)}}},Iye=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=DT(t,NT.meta),a=DT(e,NT.link),i=DT(n,NT.script);return{priorityMethods:{toComponent:()=>[...mS("meta",s.priority),...mS("link",a.priority),...mS("script",i.priority)],toString:()=>`${fl("meta",s.priority,r)} ${fl("link",a.priority,r)} ${fl("script",i.priority,r)}`},metaTags:s.default,linkTags:a.default,scriptTags:i.default}},Oye=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:a,styleTags:i,title:o="",titleAttributes:l,prioritizeSeoTags:u}=t;let{linkTags:d,metaTags:f,scriptTags:m}=t,g={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:g,linkTags:d,metaTags:f,scriptTags:m}=Iye(t)),{priority:g,base:fl("base",e,r),bodyAttributes:fl("bodyAttributes",n,r),htmlAttributes:fl("htmlAttributes",s,r),link:fl("link",d,r),meta:fl("meta",f,r),noscript:fl("noscript",a,r),script:fl("script",m,r),style:fl("style",i,r),title:fl("title",{title:o,titleAttributes:l},r)}},QN=Oye,Y2=[],AX=!!(typeof window<"u"&&window.document&&window.document.createElement),ZN=class{constructor(t,e){Ie(this,"instances",[]);Ie(this,"canUseDOM",AX);Ie(this,"context");Ie(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Y2:this.instances,add:t=>{(this.canUseDOM?Y2:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Y2:this.instances).indexOf(t);(this.canUseDOM?Y2:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=QN({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Pye={},NX=Ce.createContext(Pye),Lm,jX=(Lm=class extends y.Component{constructor(n){super(n);Ie(this,"helmetData");this.helmetData=new ZN(this.props.context||{},Lm.canUseDOM)}render(){return Ce.createElement(NX.Provider,{value:this.helmetData.value},this.props.children)}},Ie(Lm,"canUseDOM",AX),Lm),pp=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${ec}]`),s=[].slice.call(r),a=[];let i;return e&&e.length&&e.forEach(o=>{const l=document.createElement(t);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u))if(u==="innerHTML")l.innerHTML=o.innerHTML;else if(u==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const d=u,f=typeof o[d]>"u"?"":o[d];l.setAttribute(u,f)}l.setAttribute(ec,"true"),s.some((u,d)=>(i=d,l.isEqualNode(u)))?s.splice(i,1):a.push(l)}),s.forEach(o=>{var l;return(l=o.parentNode)==null?void 0:l.removeChild(o)}),a.forEach(o=>n.appendChild(o)),{oldTags:s,newTags:a}},ej=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(ec),s=r?r.split(","):[],a=[...s],i=Object.keys(e);for(const o of i){const l=e[o]||"";n.getAttribute(o)!==l&&n.setAttribute(o,l),s.indexOf(o)===-1&&s.push(o);const u=a.indexOf(o);u!==-1&&a.splice(u,1)}for(let o=a.length-1;o>=0;o-=1)n.removeAttribute(a[o]);s.length===a.length?n.removeAttribute(ec):n.getAttribute(ec)!==i.join(",")&&n.setAttribute(ec,i.join(","))},Fye=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=EX(t)),ej("title",e)},$L=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:a,metaTags:i,noscriptTags:o,onChangeClientState:l,scriptTags:u,styleTags:d,title:f,titleAttributes:m}=t;ej("body",r),ej("html",s),Fye(f,m);const g={baseTag:pp("base",n),linkTags:pp("link",a),metaTags:pp("meta",i),noscriptTags:pp("noscript",o),scriptTags:pp("script",u),styleTags:pp("style",d)},x={},b={};Object.keys(g).forEach(C=>{const{newTags:S,oldTags:w}=g[C];S.length&&(x[C]=S),w.length&&(b[C]=g[C].oldTags)}),e&&e(),l(t,x,b)},Gy=null,Bye=t=>{Gy&&cancelAnimationFrame(Gy),t.defer?Gy=requestAnimationFrame(()=>{$L(t,()=>{Gy=null})}):($L(t),Gy=null)},Lye=Bye,UL=class extends y.Component{constructor(){super(...arguments);Ie(this,"rendered",!1)}shouldComponentUpdate(e){return!wye(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=Aye(e.get().map(a=>{const i={...a.props};return delete i.context,i}));jX.canUseDOM?Lye(s):QN&&(r=QN(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},GN,zye=(GN=class extends y.Component{shouldComponentUpdate(t){return!gye(zL(this.props,"helmetData"),zL(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return FL(LL.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${LL.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),FL(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return Ce.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...a}=r.props,i=Object.keys(a).reduce((l,u)=>(l[Cye[u]||u]=a[u],l),{});let{type:o}=r;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(r,s),o){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,i,s);break;default:e=this.mapObjectTypeChildren(r,e,i,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof ZN)){const s=r;r=new ZN(s.context,!0),delete n.helmetData}return r?Ce.createElement(UL,{...n,context:r.value}):Ce.createElement(NX.Consumer,null,s=>Ce.createElement(UL,{...n,context:s}))}},Ie(GN,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),GN);const $ye="modulepreload",Uye=function(t){return"/"+t},HL={},Zm=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(n.map(u=>{if(u=Uye(u),u in HL)return;HL[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":$ye,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},Hye=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zm(async()=>{const{default:r}=await Promise.resolve().then(()=>fv);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class y8 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Vye extends y8{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class VL extends y8{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qL extends y8{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tj;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(tj||(tj={}));var qye=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class Gye{constructor(e,{headers:n={},customFetch:r,region:s=tj.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Hye(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return qye(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:i}=n;let o={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(o["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(o["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(b=>{throw new Vye(b)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new VL(f);if(!f.ok)throw new qL(f);let g=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield f.json():g==="application/octet-stream"?x=yield f.blob():g==="text/event-stream"?x=f:g==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof qL||s instanceof VL?s.context:void 0}}})}}var Ta={},gp={},vp={},yp={},xp={},bp={},Wye=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jg=Wye();const Kye=jg.fetch,DX=jg.fetch.bind(jg),RX=jg.Headers,Yye=jg.Request,Xye=jg.Response,fv=Object.freeze(Object.defineProperty({__proto__:null,Headers:RX,Request:Yye,Response:Xye,default:DX,fetch:Kye},Symbol.toStringTag,{value:"Module"})),Jye=sX(fv);var X2={},GL;function MX(){if(GL)return X2;GL=1,Object.defineProperty(X2,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return X2.default=t,X2}var WL;function IX(){if(WL)return bp;WL=1;var t=bp&&bp.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bp,"__esModule",{value:!0});const e=t(Jye),n=t(MX());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=Object.assign({},this.headers),this.headers[a]=i,this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,m;let g=null,x=null,b=null,C=u.status,S=u.statusText;if(u.ok){if(this.method!=="HEAD"){const _=await u.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=_:x=JSON.parse(_))}const E=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),T=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");E&&T&&T.length>1&&(b=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(g={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,b=null,C=406,S="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const E=await u.text();try{g=JSON.parse(E),Array.isArray(g)&&u.status===404&&(x=[],g=null,C=200,S="OK")}catch{u.status===404&&E===""?(C=204,S="No Content"):g={message:E}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,C=200,S="OK"),g&&this.shouldThrowOnError)throw new n.default(g)}return{error:g,data:x,count:b,status:C,statusText:S}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,f,m;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return bp.default=r,bp}var KL;function OX(){if(KL)return xp;KL=1;var t=xp&&xp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xp,"__esModule",{value:!0});const e=t(IX());class n extends e.default{select(s){let a=!1;const i=(s??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var d;const f=[s?"analyze":null,a?"verbose":null,i?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`,u==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return xp.default=n,xp}var YL;function x8(){if(YL)return yp;YL=1;var t=yp&&yp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yp,"__esModule",{value:!0});const e=t(OX());class n extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const i=Array.from(new Set(a)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${i})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:i,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(s,`${l}fts${u}.${a}`),this}match(s){return Object.entries(s).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(s,a,i){return this.url.searchParams.append(s,`not.${a}.${i}`),this}or(s,{foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,a,i){return this.url.searchParams.append(s,`${a}.${i}`),this}}return yp.default=n,yp}var XL;function PX(){if(XL)return vp;XL=1;var t=vp&&vp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vp,"__esModule",{value:!0});const e=t(x8());class n{constructor(s,{headers:a={},schema:i,fetch:o}){this.url=s,this.headers=a,this.schema=i,this.fetch=o}select(s,{head:a=!1,count:i}={}){const o=a?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:a,defaultToNull:i=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const u=s.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:o,defaultToNull:l=!0}={}){const u="POST",d=[`resolution=${i?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:a}={}){const i="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const a="DELETE",i=[];return s&&i.push(`count=${s}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return vp.default=n,vp}var Wy={},Ky={},JL;function Qye(){return JL||(JL=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.version=void 0,Ky.version="0.0.0-automated"),Ky}var QL;function Zye(){if(QL)return Wy;QL=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.DEFAULT_HEADERS=void 0;const t=Qye();return Wy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Wy}var ZL;function exe(){if(ZL)return gp;ZL=1;var t=gp&&gp.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gp,"__esModule",{value:!0});const e=t(PX()),n=t(x8()),r=Zye();class s{constructor(i,{headers:o={},schema:l,fetch:u}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),o),this.schemaName=l,this.fetch=u}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new s(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:u=!1,count:d}={}){let f;const m=new URL(`${this.url}/rpc/${i}`);let g;l||u?(f=l?"HEAD":"GET",Object.entries(o).filter(([b,C])=>C!==void 0).map(([b,C])=>[b,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([b,C])=>{m.searchParams.append(b,C)})):(f="POST",g=o);const x=Object.assign({},this.headers);return d&&(x.Prefer=`count=${d}`),new n.default({method:f,url:m,headers:x,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return gp.default=s,gp}var ez;function txe(){if(ez)return Ta;ez=1;var t=Ta&&Ta.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.PostgrestError=Ta.PostgrestBuilder=Ta.PostgrestTransformBuilder=Ta.PostgrestFilterBuilder=Ta.PostgrestQueryBuilder=Ta.PostgrestClient=void 0;const e=t(exe());Ta.PostgrestClient=e.default;const n=t(PX());Ta.PostgrestQueryBuilder=n.default;const r=t(x8());Ta.PostgrestFilterBuilder=r.default;const s=t(OX());Ta.PostgrestTransformBuilder=s.default;const a=t(IX());Ta.PostgrestBuilder=a.default;const i=t(MX());return Ta.PostgrestError=i.default,Ta.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:i.default},Ta}var nxe=txe();const rxe=Pa(nxe),{PostgrestClient:sxe,PostgrestQueryBuilder:Lgt,PostgrestFilterBuilder:zgt,PostgrestTransformBuilder:$gt,PostgrestBuilder:Ugt,PostgrestError:Hgt}=rxe;class axe{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);if(r>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const s=this.dynamicRequire("undici");if(s&&s.WebSocket)return{type:"native",constructor:s.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const s=this.dynamicRequire("ws");if(s)return{type:"ws",constructor:(n=s.WebSocket)!==null&&n!==void 0?n:s};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ixe="2.15.0",oxe=`realtime-js/${ixe}`,lxe="1.0.0",nj=1e4,cxe=1e3,uxe=100;var Nx;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Nx||(Nx={}));var oa;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(oa||(oa={}));var Vl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vl||(Vl={}));var rj;(function(t){t.websocket="websocket"})(rj||(rj={}));var jm;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jm||(jm={}));class dxe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const o=r.decode(e.slice(i,i+s));i=i+s;const l=r.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class FX{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Vr||(Vr={}));const tz=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,i)=>(a[i]=hxe(i,t,e,s),a),{})},hxe=(t,e,n,r)=>{const s=e.find(o=>o.name===t),a=s==null?void 0:s.type,i=n[t];return a&&!r.includes(a)?BX(a,i):sj(i)},BX=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return gxe(e,n)}switch(t){case Vr.bool:return fxe(e);case Vr.float4:case Vr.float8:case Vr.int2:case Vr.int4:case Vr.int8:case Vr.numeric:case Vr.oid:return mxe(e);case Vr.json:case Vr.jsonb:return pxe(e);case Vr.timestamp:return vxe(e);case Vr.abstime:case Vr.date:case Vr.daterange:case Vr.int4range:case Vr.int8range:case Vr.money:case Vr.reltime:case Vr.text:case Vr.time:case Vr.timestamptz:case Vr.timetz:case Vr.tsrange:case Vr.tstzrange:return sj(e);default:return sj(e)}},sj=t=>t,fxe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},mxe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pxe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gxe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const i=t.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(o=>BX(e,o))}return t},vxe=t=>typeof t=="string"?t.replace(" ","T"):t,LX=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class RT{constructor(e,n,r={},s=nj){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nz;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(nz||(nz={}));class jx{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jx.syncState(this.state,s,a,i),this.pendingDiffs.forEach(l=>{this.state=jx.syncDiff(this.state,l,a,i)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jx.syncDiff(this.state,s,a,i),o())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),i=this.transformState(n),o={},l={};return this.map(a,(u,d)=>{i[u]||(l[u]=d)}),this.map(i,(u,d)=>{const f=a[u];if(f){const m=d.map(C=>C.presence_ref),g=f.map(C=>C.presence_ref),x=d.filter(C=>g.indexOf(C.presence_ref)<0),b=f.filter(C=>m.indexOf(C.presence_ref)<0);x.length>0&&(o[u]=x),b.length>0&&(l[u]=b)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(g=>g.presence_ref),m=d.filter(g=>f.indexOf(g.presence_ref)<0);e[o].unshift(...m)}r(o,d,l)}),this.map(i,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rz;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(rz||(rz={}));var Dx;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Dx||(Dx={}));var cd;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cd||(cd={}));class b8{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=oa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new RT(this,Vl.join,this.params,this.timeout),this.rejoinTimer=new FX(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oa.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vl.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new jx(this),this.broadcastEndpointURL=LX(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==oa.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Dx.PRESENCE]&&this.bindings[Dx.PRESENCE].length>0,d={},f={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(cd.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(cd.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){e==null||e(cd.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,C=[];for(let S=0;S<b;S++){const w=x[S],{filter:{event:E,schema:T,table:_,filter:A}}=w,j=m&&m[S];if(j&&j.event===E&&j.schema===T&&j.table===_&&j.filter===A)C.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),this.state=oa.errored,e==null||e(cd.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(cd.SUBSCRIBED);return}}).receive("error",m=>{this.state=oa.errored,e==null||e(cd.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cd.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===oa.joined&&e===Dx.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(i=this.params)===null||i===void 0?void 0:i.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=oa.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new RT(this,Vl.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=oa.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new RT(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>uxe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const i=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=Vl;if(r&&[o,l,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let m=this._onMessage(i,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var x,b,C;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((C=(b=g.filter)===null||b===void 0?void 0:b.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===i}).map(g=>g.callback(m,r)):(a=this.bindings[i])===null||a===void 0||a.filter(g=>{var x,b,C,S,w,E;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const T=g.id,_=(x=g.filter)===null||x===void 0?void 0:x.event;return T&&((b=n.ids)===null||b===void 0?void 0:b.includes(T))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const T=(w=(S=g==null?void 0:g.filter)===null||S===void 0?void 0:S.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return T==="*"||T===((E=n==null?void 0:n.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:b,table:C,commit_timestamp:S,type:w,errors:E}=x;m=Object.assign(Object.assign({},{schema:b,table:C,commit_timestamp:S,eventType:w,new:{},old:{},errors:E}),this._getPayloadRecords(x))}g.callback(m,r)})}_isClosed(){return this.state===oa.closed}_isJoined(){return this.state===oa.joined}_isJoining(){return this.state===oa.joining}_isLeaving(){return this.state===oa.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&b8.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vl.close,{},e)}_onError(e){this._on(Vl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oa.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=tz(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=tz(e.columns,e.old_record)),n}}const sz=()=>{},J2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yxe=[1e3,2e3,5e3,1e4],xxe=1e4,bxe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wxe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nj,this.transport=null,this.heartbeatIntervalMs=J2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sz,this.ref=0,this.reconnectTimer=null,this.logger=sz,this.conn=null,this.sendBuffer=[],this.serializer=new dxe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...i)=>Zm(async()=>{const{default:o}=await Promise.resolve().then(()=>fv);return{default:o}},void 0).then(({default:o})=>o(...i)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${rj.websocket}`,this.httpEndpoint=LX(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=axe.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lxe}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nx.connecting:return jm.Connecting;case Nx.open:return jm.Open;case Nx.closing:return jm.Closing;default:return jm.Closed}}isConnected(){return this.connectionState()===jm.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new b8(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,i=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(cxe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},J2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:i}=n,o=i?`(${i})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([bxe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:oxe};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Vl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new FX(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},J2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,i,o,l,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:nj,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:J2.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:(d=>yxe[d-1]||xxe),this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:((d,f)=>f(JSON.stringify(d))),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class w8 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Aa(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Cxe extends w8{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class aj extends w8{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Sxe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const zX=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zm(async()=>{const{default:r}=await Promise.resolve().then(()=>fv);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},kxe=()=>Sxe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zm(()=>Promise.resolve().then(()=>fv),void 0)).Response:Response}),ij=t=>{if(Array.isArray(t))return t.map(n=>ij(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=ij(r)}),e},Exe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var C0=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const MT=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_xe=(t,e,n)=>C0(void 0,void 0,void 0,function*(){const r=yield kxe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,i=(s==null?void 0:s.statusCode)||a+"";e(new Cxe(MT(s),a,i))}).catch(s=>{e(new aj(MT(s),s))}):e(new aj(MT(t),t))}),Txe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Exe(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n))};function $b(t,e,n,r,s,a){return C0(this,void 0,void 0,function*(){return new Promise((i,o)=>{t(n,Txe(e,r,s,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>_xe(l,o,r))})})}function n4(t,e,n,r){return C0(this,void 0,void 0,function*(){return $b(t,"GET",e,n,r)})}function ud(t,e,n,r,s){return C0(this,void 0,void 0,function*(){return $b(t,"POST",e,r,s,n)})}function oj(t,e,n,r,s){return C0(this,void 0,void 0,function*(){return $b(t,"PUT",e,r,s,n)})}function Axe(t,e,n,r){return C0(this,void 0,void 0,function*(){return $b(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function $X(t,e,n,r,s){return C0(this,void 0,void 0,function*(){return $b(t,"DELETE",e,r,s,n)})}var Gi=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Nxe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},az={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jxe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=zX(s)}uploadOrUpdate(e,n,r,s){return Gi(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},az),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",i.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(e=="PUT"?oj:ud)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:o},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(Aa(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Gi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Gi(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:az.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield oj(this.fetch,o.toString(),l,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(l){if(Aa(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Gi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield ud(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+a.url),o=i.searchParams.get("token");if(!o)throw new w8("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(r){if(Aa(r))return{data:null,error:r};throw r}})}update(e,n,r){return Gi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Gi(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Aa(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Gi(this,void 0,void 0,function*(){try{return{data:{path:(yield ud(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Aa(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Gi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield ud(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(Aa(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Gi(this,void 0,void 0,function*(){try{const s=yield ud(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(Aa(s))return{data:null,error:s};throw s}})}download(e,n){return Gi(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield n4(this.fetch,`${this.url}/${s}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Aa(o))return{data:null,error:o};throw o}})}info(e){return Gi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield n4(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ij(r),error:null}}catch(r){if(Aa(r))return{data:null,error:r};throw r}})}exists(e){return Gi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Axe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Aa(r)&&r instanceof aj){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Gi(this,void 0,void 0,function*(){try{return{data:yield $X(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Aa(n))return{data:null,error:n};throw n}})}list(e,n,r){return Gi(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Nxe),n),{prefix:e||""});return{data:yield ud(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Aa(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Dxe="2.10.4",Rxe={"X-Client-Info":`storage-js/${Dxe}`};var wp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class Mxe{constructor(e,n={},r,s){const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Rxe),n),this.fetch=zX(r)}listBuckets(){return wp(this,void 0,void 0,function*(){try{return{data:yield n4(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Aa(e))return{data:null,error:e};throw e}})}getBucket(e){return wp(this,void 0,void 0,function*(){try{return{data:yield n4(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Aa(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return wp(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Aa(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return wp(this,void 0,void 0,function*(){try{return{data:yield oj(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Aa(r))return{data:null,error:r};throw r}})}emptyBucket(e){return wp(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Aa(n))return{data:null,error:n};throw n}})}deleteBucket(e){return wp(this,void 0,void 0,function*(){try{return{data:yield $X(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Aa(n))return{data:null,error:n};throw n}})}}class Ixe extends Mxe{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new jxe(this.url,this.headers,e,this.fetch)}}const Oxe="2.54.0";let hx="";typeof Deno<"u"?hx="deno":typeof document<"u"?hx="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hx="react-native":hx="node";const Pxe={"X-Client-Info":`supabase-js-${hx}/${Oxe}`},Fxe={headers:Pxe},Bxe={schema:"public"},Lxe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zxe={};var $xe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Uxe=t=>{let e;return t?e=t:typeof fetch>"u"?e=DX:e=fetch,(...n)=>e(...n)},Hxe=()=>typeof Headers>"u"?RX:Headers,Vxe=(t,e,n)=>{const r=Uxe(n),s=Hxe();return(a,i)=>$xe(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},i),{headers:u}))})};var qxe=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};function Gxe(t){return t.endsWith("/")?t:t+"/"}function Wxe(t,e){var n,r;const{db:s,auth:a,realtime:i,global:o}=t,{db:l,auth:u,realtime:d,global:f}=e,m={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>qxe(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const UX="2.71.1",Hp=30*1e3,lj=3,IT=lj*Hp,Kxe="http://localhost:9999",Yxe="supabase.auth.token",Xxe={"X-Client-Info":`gotrue-js/${UX}`},cj="X-Supabase-Api-Version",HX={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jxe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qxe=600*1e3;let C8=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function wn(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Zxe extends C8{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function e1e(t){return wn(t)&&t.name==="AuthApiError"}class VX extends C8{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Mf extends C8{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Bh extends Mf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t1e(t){return wn(t)&&t.name==="AuthSessionMissingError"}class Q2 extends Mf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Z2 extends Mf{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class eC extends Mf{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n1e(t){return wn(t)&&t.name==="AuthImplicitGrantRedirectError"}class iz extends Mf{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uj extends Mf{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function OT(t){return wn(t)&&t.name==="AuthRetryableFetchError"}class oz extends Mf{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class dj extends Mf{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const r4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lz=` 	
\r=`.split(""),r1e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lz.length;e+=1)t[lz[e].charCodeAt(0)]=-2;for(let e=0;e<r4.length;e+=1)t[r4[e].charCodeAt(0)]=e;return t})();function cz(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(r4[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(r4[r]),e.queuedBits-=6}}function qX(t,e,n){const r=r1e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uz(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{i1e(i,r,n)};for(let i=0;i<t.length;i+=1)qX(t.charCodeAt(i),s,a);return e.join("")}function s1e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function a1e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}s1e(r,e)}}function i1e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function o1e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)qX(t.charCodeAt(s),n,r);return new Uint8Array(e)}function l1e(t){const e=[];return a1e(t,n=>e.push(n)),new Uint8Array(e)}function c1e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>cz(s,n,r)),cz(null,n,r),e.join("")}function u1e(t){return Math.round(Date.now()/1e3)+t}function d1e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const $l=()=>typeof window<"u"&&typeof document<"u",um={tested:!1,writable:!1},GX=()=>{if(!$l())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(um.tested)return um.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),um.tested=!0,um.writable=!0}catch{um.tested=!0,um.writable=!1}return um.writable};function h1e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const WX=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zm(async()=>{const{default:r}=await Promise.resolve().then(()=>fv);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},f1e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vp=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},dm=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nh=async(t,e)=>{await t.removeItem(e)};class rk{constructor(){this.promise=new rk.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}rk.promiseConstructor=Promise;function PT(t){const e=t.split(".");if(e.length!==3)throw new dj("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Jxe.test(e[r]))throw new dj("JWT not in base64url format");return{header:JSON.parse(uz(e[0])),payload:JSON.parse(uz(e[1])),signature:o1e(e[2]),raw:{header:e[0],payload:e[1]}}}async function m1e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function p1e(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){r(i);return}}catch(i){if(!e(a,i)){s(i);return}}})()})}function g1e(t){return("0"+t.toString(16)).substr(-2)}function v1e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,g1e).join("")}async function y1e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function x1e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await y1e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cp(t,e,n=!1){const r=v1e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Vp(t,`${e}-code-verifier`,s);const a=await x1e(r);return[a,r===a?"plain":"s256"]}const b1e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w1e(t){const e=t.headers.get(cj);if(!e||!e.match(b1e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function C1e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function S1e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const k1e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sp(t){if(!k1e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function FT(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dz(t){return JSON.parse(JSON.stringify(t))}var E1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Sm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_1e=[502,503,504];async function hz(t){var e;if(!f1e(t))throw new uj(Sm(t),0);if(_1e.includes(t.status))throw new uj(Sm(t),t.status);let n;try{n=await t.json()}catch(a){throw new VX(Sm(a),a)}let r;const s=w1e(t);if(s&&s.getTime()>=HX["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new oz(Sm(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Bh}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new oz(Sm(n),t.status,n.weak_password.reasons);throw new Zxe(Sm(n),t.status||500,r)}const T1e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function $n(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[cj]||(a[cj]=HX["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await A1e(t,e,n+o,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function A1e(t,e,n,r,s,a){const i=T1e(e,r,s,a);let o;try{o=await t(n,Object.assign({},i))}catch(l){throw console.error(l),new uj(Sm(l),0)}if(o.ok||await hz(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await hz(l)}}function ld(t){var e;let n=null;R1e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=u1e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function fz(t){const e=ld(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wh(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function N1e(t){return{data:t,error:null}}function j1e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,i=E1e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},l=Object.assign({},i);return{data:{properties:o,user:l},error:null}}function D1e(t){return t}function R1e(t){return t.access_token&&t.refresh_token&&t.expires_in}const BT=["global","local","others"];var M1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class I1e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=WX(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=BT[0]){if(BT.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${BT.join(", ")}`);try{return await $n(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await $n(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Wh})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=M1e(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await $n(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:j1e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(wn(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $n(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wh})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,i,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await $n(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:D1e});if(d.error)throw d.error;const f=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(x.split(";")[1].split("=")[1]);u[`${C}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(wn(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Sp(e);try{return await $n(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wh})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Sp(e);try{return await $n(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Wh})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Sp(e);try{return await $n(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Wh})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Sp(e.userId);try{const{data:n,error:r}=await $n(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Sp(e.userId),Sp(e.id);try{return{data:await $n(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(wn(n))return{data:null,error:n};throw n}}}function mz(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function O1e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kp={debug:!!(globalThis&&GX()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KX extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class P1e extends KX{}async function F1e(t,e,n){kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),kp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw kp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new P1e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(kp.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}O1e();const B1e={url:Kxe,storageKey:Yxe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xxe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pz(t,e,n){return await n()}const Ep={};class v1{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=v1.nextInstanceID,v1.nextInstanceID+=1,this.instanceID>0&&$l()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},B1e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new I1e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=WX(s.fetch),this.lock=s.lock||pz,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:$l()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=F1e:this.lock=pz,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:GX()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mz(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=mz(this.memoryStorage)),$l()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Ep[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ep[this.storageKey]=Object.assign(Object.assign({},Ep[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ep[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ep[this.storageKey]=Object.assign(Object.assign({},Ep[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${UX}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=h1e(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),$l()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),n1e(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return wn(n)?{error:n}:{error:new VX("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await $n(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ld}),{data:i,error:o}=a;if(o||!i)return{data:{user:null,session:null},error:o};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(wn(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:d,password:f,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await Cp(this.storage,this.storageKey)),a=await $n(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:ld})}else if("phone"in e){const{phone:d,password:f,options:m}=e;a=await $n(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ld})}else throw new Z2("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o||!i)return{data:{user:null,session:null},error:o};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(wn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:i,options:o}=e;n=await $n(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:fz})}else if("phone"in e){const{phone:a,password:i,options:o}=e;n=await $n(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:fz})}else throw new Z2("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Q2}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,a,i,o,l,u,d,f,m,g;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:C,wallet:S,statement:w,options:E}=e;let T;if($l())if(typeof S=="object")T=S;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))T=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=S}const _=new URL((n=E==null?void 0:E.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const A=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),w?{statement:w}:null));let j;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")j=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)j=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),b=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=E==null?void 0:E.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=E==null?void 0:E.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((f=(d=E==null?void 0:E.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...E.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const A=await T.signMessage(new TextEncoder().encode(x),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=A}}try{const{data:C,error:S}=await $n(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:c1e(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ld});if(S)throw S;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Q2}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:S})}catch(C){if(wn(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const n=await dm(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:i}=await $n(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ld});if(await Nh(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Q2}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(wn(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:i}=e,o=await $n(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ld}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Q2}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,i;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Cp(this.storage,this.storageKey));const{error:f}=await $n(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await $n(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Z2("You must provide either an email or phone number.")}catch(o){if(wn(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:o}=await $n(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ld});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,u=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(wn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await Cp(this.storage,this.storageKey)),await $n(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:N1e})}catch(a){if(wn(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Bh;const{error:s}=await $n(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(wn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:i}=await $n(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:i,error:o}=await $n(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:o}}throw new Z2("You must provide either an email or phone number and a type")}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await dm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<IT:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await dm(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=FT()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $n(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wh}):await this._useSession(async n=>{var r,s,a;const{data:i,error:o}=n;if(o)throw o;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bh}:await $n(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Wh})})}catch(n){if(wn(n))return t1e(n)&&(await this._removeSession(),await Nh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Bh;const i=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Cp(this.storage,this.storageKey));const{data:u,error:d}=await $n(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:i.access_token,xform:Wh});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bh;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:i}=PT(e.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(wn(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:o}=n;if(o)throw o;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Bh;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!$l())throw new eC("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eC(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iz("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eC("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new iz("No code detected.");const{data:w,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:o,expires_at:l,token_type:u}=e;if(!a||!o||!i||!u)throw new eC("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let m=d+f;l&&(m=parseInt(l));const g=m-d;g*1e3<=Hp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const x=m-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:b,error:C}=await this._getUser(a);if(C)throw C;const S={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:m,refresh_token:i,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(r){if(wn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await dm(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:o}=await this.admin.signOut(i,e);if(o&&!(e1e(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Nh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=d1e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Cp(this.storage,this.storageKey,!0));try{return await $n(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(wn(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(wn(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var i,o,l,u,d;const{data:f,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $n(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return $l()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(wn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)throw i;return await $n(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await p1e(async s=>(s>0&&await m1e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await $n(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ld})),(s,a)=>{const i=200*Math.pow(2,s);return a&&OT(a)&&Date.now()+i-r<Hp})}catch(r){if(this._debug(n,"error",r),wn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),$l()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await dm(this.storage,this.storageKey);if(s&&this.userStorage){let i=await dm(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Vp(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:FT()}else if(s&&!s.user&&!s.user){const i=await dm(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Nh(this.storage,this.storageKey+"-user"),await Vp(this.storage,this.storageKey,s)):s.user=FT()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<IT;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${IT}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),OT(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:o}=await this._getUser(s.access_token);!o&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Bh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new rk;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Bh;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(s,"error",a),wn(a)){const i={session:null,error:a};return OT(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){a.push(l)}});if(await Promise.all(i),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Vp(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=dz(s);await Vp(this.storage,this.storageKey,a)}else{const s=dz(n);await Vp(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Nh(this.storage,this.storageKey),await Nh(this.storage,this.storageKey+"-code-verifier"),await Nh(this.storage,this.storageKey+"-user"),this.userStorage&&await Nh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$l()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Hp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hp}ms, refresh threshold is ${lj} ticks`),s<=lj&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof KX)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$l()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await Cp(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await $n(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await $n(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:i,error:o}=await $n(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(n){if(wn(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await $n(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(wn(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=PT(s.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Qxe>s)return r;const{data:a,error:i}=await $n(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};r=g.session.access_token}const{header:s,payload:a,signature:i,raw:{header:o,payload:l}}=PT(r);n!=null&&n.allowExpired||C1e(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:s,signature:i},error:null}}const d=S1e(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,l1e(`${o}.${l}`)))throw new dj("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}}}v1.nextInstanceID=0;const L1e=v1;class z1e extends L1e{constructor(e){super(e)}}var $1e=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class U1e{constructor(e,n,r){var s,a,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=Gxe(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Bxe,realtime:zxe,auth:Object.assign(Object.assign({},Lxe),{storageKey:u}),global:Fxe},f=Wxe(r??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=Vxe(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new sxe(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Ixe(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Gye(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return $1e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:i,lock:o,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z1e({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:i,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new wxe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kc=(t,e,n)=>new U1e(t,e,n);function H1e(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}H1e()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nl="https://tgsubtjsssttyptpovop.supabase.co";console.log("SUPABASE_URL",Nl);const jl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnc3VidGpzc3N0dHlwdHBvdm9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0NDAyOTUsImV4cCI6MjA2MzAxNjI5NX0.DFLa2zmSQ17Jr5l_MErfaeF8qynmmu-5LWgSDGHRMXw";console.log("SUPABASE_ANON_KEY",jl);const V1e="pk_live_51QoV3uP6xt3EDS8Q3GUDu8m9shiWCtPsxhkuT4NdWnHm3daE9lOuxeZ7jpl0u1j3JUTSg70DhqUGal29S0OPfm8L007KkF7kN3";console.log("STRIPE_KEY",V1e);const q1e=()=>typeof window<"u"?new URLSearchParams(window.location.search).get("backend_url"):null,Jr=q1e()??"https://api.bettercampus.com";console.log("CLOUDFLARE_URL",Jr);function G1e(t,e){try{return new RegExp(e).test(t)}catch{return!1}}function W1e(t={sync:{},local:{}}){let e=t;const n={},r=s=>{const a=new Set;for(const[i,o]of Object.entries(n))s.forEach(l=>{G1e(l,i)&&o.forEach(u=>{a.has(u)||(a.add(u),u())})})};return{getSnapshot:()=>e,initListeners:()=>{Object.values(n).forEach((s,a)=>{s.forEach(i=>{i()})})},subscribe:(s,a=".*")=>(n[a]||(n[a]=new Set),n[a].add(s),()=>{const i=n==null?void 0:n[a];i&&(i.delete(s),i.size===0&&delete n[a])}),unsubscribe:(s,a=".*")=>{const i=n==null?void 0:n[a];i&&(i.delete(s),i.size===0&&delete n[a])},setValue:(s,a)=>{e={...e,[s]:a},r([s])},setSettings:s=>{const a=[];for(const i in s)JSON.stringify(e[i])!==JSON.stringify(s[i])&&a.push(i);for(const i in e)i in s||a.push(i);return console.log("[commms] changedKeys",a),a.length>0&&(e=s,r(a)),a},updateSettings:(s,a)=>{for(const i in a){if(!e[s])return;e[s][i]=a[i]}r(Object.keys(a))}}}const YX=y.createContext(null),ut=()=>{const t=y.useContext(YX);if(!t)throw new Error("useCommunication must be used within a CommunicationProvider");return t},Wd=({children:t,requiresLocalStorage:e=!1})=>{const[n,r]=y.useState({}),[s,a]=y.useState(!1);y.useRef(null);const i=new URLSearchParams(window.location.search).get("origin"),o=y.useRef(W1e()),l=y.useRef({});function u(){const K=Math.random().toString(36).substring(2,9),te={type:"REQUEST_VALID_TOKEN",id:K};return new Promise((ie,de)=>{l.current[K]=ie,window.parent.postMessage(te,"*")})}const d=async()=>{const K=await u();return kc(Nl,jl,{global:{headers:{Authorization:`Bearer ${K}`}}})},f=async(K,te={})=>{const ie=await u(),de=te.body instanceof FormData,fe={Authorization:`Bearer ${ie}`,...te.headers};return de||(fe["Content-Type"]="application/json"),await fetch(K,{method:te.method||"GET",headers:fe,body:de?te.body:te.body?JSON.stringify(te.body):void 0})},m=y.useCallback(K=>{console.log("[commms] sendMessage to extension",K),window.parent.postMessage(K,"*")},[]),g=y.useCallback(K=>new Promise((te,ie)=>{const de=Math.random().toString(36).substring(2,9);m({...K,id:de}),l.current[de]=te}),[m]),x=y.useCallback(async K=>{m({type:"SEND_TO_BACKGROUND",payload:K})},[m]);y.useEffect(()=>{const K=te=>{var se;console.log("[commms] message received from extension",te);const ie=((se=te==null?void 0:te.data)==null?void 0:se.type)||"",de=(te==null?void 0:te.data)||{},fe=(de==null?void 0:de.payload)||{};if(console.log("type",ie,ie==="CANVAS_DATA_RESPONSE"),ie==="CALL_EXTENSION_FUNC_RESPONSE"){console.log("[commms] CALL_EXTENSION_FUNC_RESPONSE received",l.current,de.id);const ce=l.current[de.id];if(!ce)return;delete l.current[de.id],ce(de.payload)}else if(ie==="REQUEST_VALID_TOKEN_RESPONSE"&&de.id&&l.current[de.id]){const ce=l.current[de.id];delete l.current[de.id],ce(de.payload)}else if(ie==="REQUEST_SETTINGS_RESPONSE")console.log("[commms] SETTINGS_UPDATE RECEIVED SUCCESSFULLY! UPDATING EXTENSION !!!!",fe),o.current.setSettings(fe),m({type:"CONFIRM_SETTINGS_UPDATE",payload:{}}),o.current.initListeners(),a(!0);else if(ie==="SETTINGS_UPDATE_LOCAL")o.current.updateSettings("local",fe);else if(ie==="SETTINGS_UPDATE")o.current.updateSettings("sync",fe);else if(ie==="CANVAS_DATA_RESPONSE"){const ce=de.id,ue=de.payload,oe=l.current[ce];if(console.log("[message response]",ce,ue,oe),!oe)return;delete l.current[ce],oe(ue)}else ie==="COMMUNICATION_LAYER_MESSAGE_FORWARD"&&m(de.payload)};return window.addEventListener("message",K),m({type:"REQUEST_SETTINGS",payload:{local:e}}),()=>{window.removeEventListener("message",K)}},[]);const{updateOptions:b,showError:C,trackEvent:S,checkGate:w,checkGateBoolean:E,openGate:T,openAssignmentCreator:_,loadAuthModal:A,openRestrictedDialog:j,loadSharedComponent:D,removeSharedComponent:z,callExtensionFunc:F,getValidCalendarToken:R,forceRefreshToken:L,navigatePage:O}=y.useMemo(()=>{const K=(te,ie)=>{m({type:"CALL_EXTENSION_FUNC",payload:{func:te,args:ie}})};return{callExtensionFunc:K,updateOptions:(te,ie="sync")=>{K("updateOptions",{namespace:ie,updates:te})},showError:(te,ie)=>{K("showError",{message:te,type:ie})},trackEvent:te=>{K("trackEvent",{message:te})},checkGate:async te=>await g({type:"CALL_EXTENSION_FUNC",payload:{func:"checkGate",args:{highlight:te}}}),checkGateBoolean:async te=>await g({type:"CALL_EXTENSION_FUNC",payload:{func:"checkGateBoolean",args:{highlight:te}}}),openGate:te=>{K("openGate",{highlight:te})},openAssignmentCreator:(te,ie)=>{K("loadSharedComponent",{component:"assignmentCreator",props:{assignment:te,initialDate:ie}})},loadAuthModal:(te,ie)=>{K("loadAuthModal",{type:te,options:ie})},openRestrictedDialog:(te,ie)=>{K("openRestrictedDialog",{type:te,options:ie})},loadSharedComponent:(te,ie)=>{K("loadSharedComponent",{component:te,props:ie||{}})},removeSharedComponent:te=>{K("removeSharedComponent",{component:te})},forceRefreshToken:()=>{K("refreshAccessToken",{})},getValidCalendarToken:async()=>{const te=await g({type:"CALL_EXTENSION_FUNC",payload:{func:"getValidCalendarToken",args:{}}});if(te.success)return te.token},navigatePage:(te,ie)=>{m({type:"CALL_EXTENSION_FUNC",payload:{func:"navigatePage",args:{page:te,urlParams:ie}}})}}},[m,g]),H=()=>{m({type:"CALL_EXTENSION_FUNC",payload:{func:"openScheduleEditor",args:{}}})},P=y.useMemo(()=>({checkAndRefreshToken:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"checkAndRefreshGoogleToken",args:{}}}),createBetterCampusCalendar:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"createBetterCampusCalendar",args:{}}}),ensureBetterCampusCalendar:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"ensureBetterCampusCalendar",args:{}}}),fetchAndStoreCalendars:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"fetchAndStoreCalendars",args:{}}}),listCalendars:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"listCalendars",args:{}}}),createEvent:async(K,te)=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"createGoogleEvent",args:{calendarId:K,event:te}}}),updateEvent:async(K,te,ie)=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"updateGoogleEvent",args:{calendarId:K,eventId:te,event:ie}}}),deleteEvent:async(K,te)=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"deleteGoogleEvent",args:{calendarId:K,eventId:te}}}),deleteAllPushedEvents:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"deleteAllPushedEvents",args:{}}}),isSyncInProgress:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"isSyncInProgress",args:{}}}),cancelCurrentSync:()=>{m({type:"CALL_EXTENSION_FUNC",payload:{func:"cancelCurrentSync",args:{}}})},disconnectGoogleCalendar:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"disconnectGoogleCalendar",args:{}}}),pushAssignmentDueDates:async K=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"pushAssignmentDueDates",args:{assignments:K}}}),handleInitialSync:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialSync",args:{}}}),handleInitialDueDates:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialDueDates",args:{}}}),handleInitialPlanned:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialPlanned",args:{}}}),handleInitialClassTimes:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialClassTimes",args:{}}}),pushAssignmentPlannedDates:async K=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"pushAssignmentPlannedDates",args:{assignments:K}}}),refreshClassTimes:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"refreshClassTimes",args:{}}}),triggerAutoSyncWithCooldown:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"triggerAutoSyncWithCooldown",args:{}}})}),[g]),I=y.useMemo(()=>({checkAndRefreshToken:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"checkAndRefreshMicrosoftToken",args:{}}}),createBetterCampusCalendar:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"createBetterCampusMicrosoftCalendar",args:{}}}),ensureBetterCampusCalendar:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"ensureBetterCampusMicrosoftCalendar",args:{}}}),fetchAndStoreCalendars:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"fetchAndStoreMicrosoftCalendars",args:{}}}),listCalendars:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"listMicrosoftCalendars",args:{}}}),createEvent:async(K,te)=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"createMicrosoftEvent",args:{calendarId:K,event:te}}}),updateEvent:async(K,te,ie)=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"updateMicrosoftEvent",args:{calendarId:K,eventId:te,event:ie}}}),deleteEvent:async(K,te)=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"deleteMicrosoftEvent",args:{calendarId:K,eventId:te}}}),deleteAllPushedEvents:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"deleteAllPushedMicrosoftEvents",args:{}}}),isSyncInProgress:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"isMicrosoftSyncInProgress",args:{}}}),cancelCurrentSync:()=>{m({type:"CALL_EXTENSION_FUNC",payload:{func:"cancelCurrentMicrosoftSync",args:{}}})},disconnectMicrosoftCalendar:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"disconnectMicrosoftCalendar",args:{}}}),pushAssignmentDueDates:async K=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"pushAssignmentDueDatesToMicrosoft",args:{assignments:K}}}),handleInitialSync:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialMicrosoftSync",args:{}}}),handleInitialDueDates:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialMicrosoftDueDates",args:{}}}),handleInitialPlanned:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialMicrosoftPlanned",args:{}}}),handleInitialClassTimes:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"handleInitialMicrosoftClassTimes",args:{}}}),pushAssignmentPlannedDates:async K=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"pushAssignmentPlannedDatesToMicrosoft",args:{assignments:K}}}),refreshClassTimes:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"refreshMicrosoftClassTimes",args:{}}}),triggerAutoSyncWithCooldown:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"triggerMicrosoftAutoSyncWithCooldown",args:{}}})}),[g]),U=()=>{m({type:"CALL_EXTENSION_FUNC",payload:{func:"openCalendarSync",args:{}}})},W=y.useMemo(()=>({syncAssignment:async(K,te,ie="both")=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"syncAssignmentToCalendars",args:{assignmentId:K,assignmentData:te,syncType:ie}}}),triggerPullSync:async()=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"triggerCalendarPullSync",args:{}}}),deleteAssignment:async K=>g({type:"CALL_EXTENSION_FUNC",payload:{func:"deleteAssignmentFromCalendars",args:{assignmentId:K}}})}),[g]),Y=y.useCallback((K,te,ie)=>new Promise((de,fe)=>{setTimeout(()=>{te(),de(!0)},ie)}),[]),B=y.useCallback((K="sync")=>o.current.getSnapshot()[K]||{},[o]),Z=y.useCallback((K,te="sync")=>{const[ie,de]=y.useState(0);y.useEffect(()=>{const se=()=>{console.log("[commms] subscribe called",K),de(ce=>ce+1)};return K.forEach(ce=>o.current.subscribe(se,ce)),()=>{K.forEach(ce=>o.current.unsubscribe(se,ce))}},[K.join(","),te]);const fe=y.useMemo(()=>B(te),[te,ie]);return console.log("[commms] useRerenderListener options",fe),{options:fe,trigger:ie}},[B]),le=y.useCallback(()=>{m({type:"EXIT",payload:{}})},[m]),G=y.useMemo(()=>({ready:s,settings:o.current.getSnapshot(),settingsChanges:n,authenticatedClient:d,authenticatedFetch:f,sendMessage:m,sendMessageAndListen:g,sendToBackgroundScript:x,updateOptions:b,useRerenderListener:Z,loadAuthModal:A,openRestrictedDialog:j,showError:C,getOptions:B,trackEvent:S,withEventCooldown:Y,openAssignmentCreator:_,openScheduleEditor:H,googleCalendar:P,microsoftCalendar:I,openCalendarSync:U,calendarSync:W,closeModal:le,checkGate:w,checkGateBoolean:E,openGate:T,loadSharedComponent:D,removeSharedComponent:z,callExtensionFunc:F,origin:i,getValidCalendarToken:R,forceRefreshToken:L,requestValidToken:u,navigatePage:O}),[n,d,f,m,g,x,b,Z,A,j,C,B,S,Y,_,P,I,W,le,w,D]);return s?c.jsx(YX.Provider,{value:G,children:c.jsx("div",{className:"h-screen w-full",children:t})}):null},K1e=t=>{if(t.start===t.end)return null;const e=Math.min(t.start,t.end),n=Math.max(t.start,t.end);return{start:e,end:n,day:t.day}},zr=()=>{const{useRerenderListener:t}=ut(),{options:e,trigger:n}=t(["card_ids","card_.*"]),r=y.useCallback(()=>{const u={};return((e==null?void 0:e.card_ids)||[]).forEach(d=>{var m;(((m=e==null?void 0:e["card_"+d])==null?void 0:m.schedule)||[]).forEach(g=>{const x=K1e(g);x&&(u[x.day]||(u[x.day]=[]),u[x.day].push({start:x.start,end:x.end,course:d}))})}),u},[n]),s=y.useMemo(()=>r(),[n]),a=y.useMemo(()=>{const u={};return((e==null?void 0:e.card_ids)||[]).forEach((d,f)=>{var x,b,C;const m=e.theme_enabled?(x=e==null?void 0:e["card_"+d])==null?void 0:x.color:((b=e==null?void 0:e["card_"+d])==null?void 0:b.defaultColor)||"gray",g=e.theme_enabled?(C=e==null?void 0:e["card_"+d])==null?void 0:C.img:"";u[d]={...(e==null?void 0:e["card_"+d])||{},color:m,img:g}}),u},[n]),i=y.useMemo(()=>(e==null?void 0:e.card_ids)||[],[n]),o=y.useMemo(()=>i.filter(u=>{var d;return!((d=a[u])!=null&&d.hidden)}),[i,a]),l=y.useMemo(()=>new Set(Object.keys(a).filter(u=>a[u].hidden===!0)),[a]);return{schedule:s,courseData:a,hiddenCourses:l,orderedCourseIds:i,visibleCourseIds:o}};var tC={exports:{}},LT,gz;function Y1e(){if(gz)return LT;gz=1;var t=-1,e=1,n=0;function r(R,L,O,H,P){if(R===L)return R?[[n,R]]:[];if(O!=null){var I=z(R,L,O);if(I)return I}var U=o(R,L),W=R.substring(0,U);R=R.substring(U),L=L.substring(U),U=u(R,L);var Y=R.substring(R.length-U);R=R.substring(0,R.length-U),L=L.substring(0,L.length-U);var B=s(R,L);return W&&B.unshift([n,W]),Y&&B.push([n,Y]),w(B,P),H&&f(B),B}function s(R,L){var O;if(!R)return[[e,L]];if(!L)return[[t,R]];var H=R.length>L.length?R:L,P=R.length>L.length?L:R,I=H.indexOf(P);if(I!==-1)return O=[[e,H.substring(0,I)],[n,P],[e,H.substring(I+P.length)]],R.length>L.length&&(O[0][0]=O[2][0]=t),O;if(P.length===1)return[[t,R],[e,L]];var U=d(R,L);if(U){var W=U[0],Y=U[1],B=U[2],Z=U[3],le=U[4],G=r(W,B),K=r(Y,Z);return G.concat([[n,le]],K)}return a(R,L)}function a(R,L){for(var O=R.length,H=L.length,P=Math.ceil((O+H)/2),I=P,U=2*P,W=new Array(U),Y=new Array(U),B=0;B<U;B++)W[B]=-1,Y[B]=-1;W[I+1]=0,Y[I+1]=0;for(var Z=O-H,le=Z%2!==0,G=0,K=0,te=0,ie=0,de=0;de<P;de++){for(var fe=-de+G;fe<=de-K;fe+=2){var se=I+fe,ce;fe===-de||fe!==de&&W[se-1]<W[se+1]?ce=W[se+1]:ce=W[se-1]+1;for(var ue=ce-fe;ce<O&&ue<H&&R.charAt(ce)===L.charAt(ue);)ce++,ue++;if(W[se]=ce,ce>O)K+=2;else if(ue>H)G+=2;else if(le){var oe=I+Z-fe;if(oe>=0&&oe<U&&Y[oe]!==-1){var Ne=O-Y[oe];if(ce>=Ne)return i(R,L,ce,ue)}}}for(var ve=-de+te;ve<=de-ie;ve+=2){var oe=I+ve,Ne;ve===-de||ve!==de&&Y[oe-1]<Y[oe+1]?Ne=Y[oe+1]:Ne=Y[oe-1]+1;for(var He=Ne-ve;Ne<O&&He<H&&R.charAt(O-Ne-1)===L.charAt(H-He-1);)Ne++,He++;if(Y[oe]=Ne,Ne>O)ie+=2;else if(He>H)te+=2;else if(!le){var se=I+Z-ve;if(se>=0&&se<U&&W[se]!==-1){var ce=W[se],ue=I+ce-se;if(Ne=O-Ne,ce>=Ne)return i(R,L,ce,ue)}}}}return[[t,R],[e,L]]}function i(R,L,O,H){var P=R.substring(0,O),I=L.substring(0,H),U=R.substring(O),W=L.substring(H),Y=r(P,I),B=r(U,W);return Y.concat(B)}function o(R,L){if(!R||!L||R.charAt(0)!==L.charAt(0))return 0;for(var O=0,H=Math.min(R.length,L.length),P=H,I=0;O<P;)R.substring(I,P)==L.substring(I,P)?(O=P,I=O):H=P,P=Math.floor((H-O)/2+O);return E(R.charCodeAt(P-1))&&P--,P}function l(R,L){var O=R.length,H=L.length;if(O==0||H==0)return 0;O>H?R=R.substring(O-H):O<H&&(L=L.substring(0,O));var P=Math.min(O,H);if(R==L)return P;for(var I=0,U=1;;){var W=R.substring(P-U),Y=L.indexOf(W);if(Y==-1)return I;U+=Y,(Y==0||R.substring(P-U)==L.substring(0,U))&&(I=U,U++)}}function u(R,L){if(!R||!L||R.slice(-1)!==L.slice(-1))return 0;for(var O=0,H=Math.min(R.length,L.length),P=H,I=0;O<P;)R.substring(R.length-P,R.length-I)==L.substring(L.length-P,L.length-I)?(O=P,I=O):H=P,P=Math.floor((H-O)/2+O);return T(R.charCodeAt(R.length-P))&&P--,P}function d(R,L){var O=R.length>L.length?R:L,H=R.length>L.length?L:R;if(O.length<4||H.length*2<O.length)return null;function P(K,te,ie){for(var de=K.substring(ie,ie+Math.floor(K.length/4)),fe=-1,se="",ce,ue,oe,Ne;(fe=te.indexOf(de,fe+1))!==-1;){var ve=o(K.substring(ie),te.substring(fe)),He=u(K.substring(0,ie),te.substring(0,fe));se.length<He+ve&&(se=te.substring(fe-He,fe)+te.substring(fe,fe+ve),ce=K.substring(0,ie-He),ue=K.substring(ie+ve),oe=te.substring(0,fe-He),Ne=te.substring(fe+ve))}return se.length*2>=K.length?[ce,ue,oe,Ne,se]:null}var I=P(O,H,Math.ceil(O.length/4)),U=P(O,H,Math.ceil(O.length/2)),W;if(!I&&!U)return null;U?I?W=I[4].length>U[4].length?I:U:W=U:W=I;var Y,B,Z,le;R.length>L.length?(Y=W[0],B=W[1],Z=W[2],le=W[3]):(Z=W[0],le=W[1],Y=W[2],B=W[3]);var G=W[4];return[Y,B,Z,le,G]}function f(R){for(var L=!1,O=[],H=0,P=null,I=0,U=0,W=0,Y=0,B=0;I<R.length;)R[I][0]==n?(O[H++]=I,U=Y,W=B,Y=0,B=0,P=R[I][1]):(R[I][0]==e?Y+=R[I][1].length:B+=R[I][1].length,P&&P.length<=Math.max(U,W)&&P.length<=Math.max(Y,B)&&(R.splice(O[H-1],0,[t,P]),R[O[H-1]+1][0]=e,H--,H--,I=H>0?O[H-1]:-1,U=0,W=0,Y=0,B=0,P=null,L=!0)),I++;for(L&&w(R),S(R),I=1;I<R.length;){if(R[I-1][0]==t&&R[I][0]==e){var Z=R[I-1][1],le=R[I][1],G=l(Z,le),K=l(le,Z);G>=K?(G>=Z.length/2||G>=le.length/2)&&(R.splice(I,0,[n,le.substring(0,G)]),R[I-1][1]=Z.substring(0,Z.length-G),R[I+1][1]=le.substring(G),I++):(K>=Z.length/2||K>=le.length/2)&&(R.splice(I,0,[n,Z.substring(0,K)]),R[I-1][0]=e,R[I-1][1]=le.substring(0,le.length-K),R[I+1][0]=t,R[I+1][1]=Z.substring(K),I++),I++}I++}}var m=/[^a-zA-Z0-9]/,g=/\s/,x=/[\r\n]/,b=/\n\r?\n$/,C=/^\r?\n\r?\n/;function S(R){function L(K,te){if(!K||!te)return 6;var ie=K.charAt(K.length-1),de=te.charAt(0),fe=ie.match(m),se=de.match(m),ce=fe&&ie.match(g),ue=se&&de.match(g),oe=ce&&ie.match(x),Ne=ue&&de.match(x),ve=oe&&K.match(b),He=Ne&&te.match(C);return ve||He?5:oe||Ne?4:fe&&!ce&&ue?3:ce||ue?2:fe||se?1:0}for(var O=1;O<R.length-1;){if(R[O-1][0]==n&&R[O+1][0]==n){var H=R[O-1][1],P=R[O][1],I=R[O+1][1],U=u(H,P);if(U){var W=P.substring(P.length-U);H=H.substring(0,H.length-U),P=W+P.substring(0,P.length-U),I=W+I}for(var Y=H,B=P,Z=I,le=L(H,P)+L(P,I);P.charAt(0)===I.charAt(0);){H+=P.charAt(0),P=P.substring(1)+I.charAt(0),I=I.substring(1);var G=L(H,P)+L(P,I);G>=le&&(le=G,Y=H,B=P,Z=I)}R[O-1][1]!=Y&&(Y?R[O-1][1]=Y:(R.splice(O-1,1),O--),R[O][1]=B,Z?R[O+1][1]=Z:(R.splice(O+1,1),O--))}O++}}function w(R,L){R.push([n,""]);for(var O=0,H=0,P=0,I="",U="",W;O<R.length;){if(O<R.length-1&&!R[O][1]){R.splice(O,1);continue}switch(R[O][0]){case e:P++,U+=R[O][1],O++;break;case t:H++,I+=R[O][1],O++;break;case n:var Y=O-P-H-1;if(L){if(Y>=0&&A(R[Y][1])){var B=R[Y][1].slice(-1);if(R[Y][1]=R[Y][1].slice(0,-1),I=B+I,U=B+U,!R[Y][1]){R.splice(Y,1),O--;var Z=Y-1;R[Z]&&R[Z][0]===e&&(P++,U=R[Z][1]+U,Z--),R[Z]&&R[Z][0]===t&&(H++,I=R[Z][1]+I,Z--),Y=Z}}if(_(R[O][1])){var B=R[O][1].charAt(0);R[O][1]=R[O][1].slice(1),I+=B,U+=B}}if(O<R.length-1&&!R[O][1]){R.splice(O,1);break}if(I.length>0||U.length>0){I.length>0&&U.length>0&&(W=o(U,I),W!==0&&(Y>=0?R[Y][1]+=U.substring(0,W):(R.splice(0,0,[n,U.substring(0,W)]),O++),U=U.substring(W),I=I.substring(W)),W=u(U,I),W!==0&&(R[O][1]=U.substring(U.length-W)+R[O][1],U=U.substring(0,U.length-W),I=I.substring(0,I.length-W)));var le=P+H;I.length===0&&U.length===0?(R.splice(O-le,le),O=O-le):I.length===0?(R.splice(O-le,le,[e,U]),O=O-le+1):U.length===0?(R.splice(O-le,le,[t,I]),O=O-le+1):(R.splice(O-le,le,[t,I],[e,U]),O=O-le+2)}O!==0&&R[O-1][0]===n?(R[O-1][1]+=R[O][1],R.splice(O,1)):O++,P=0,H=0,I="",U="";break}}R[R.length-1][1]===""&&R.pop();var G=!1;for(O=1;O<R.length-1;)R[O-1][0]===n&&R[O+1][0]===n&&(R[O][1].substring(R[O][1].length-R[O-1][1].length)===R[O-1][1]?(R[O][1]=R[O-1][1]+R[O][1].substring(0,R[O][1].length-R[O-1][1].length),R[O+1][1]=R[O-1][1]+R[O+1][1],R.splice(O-1,1),G=!0):R[O][1].substring(0,R[O+1][1].length)==R[O+1][1]&&(R[O-1][1]+=R[O+1][1],R[O][1]=R[O][1].substring(R[O+1][1].length)+R[O+1][1],R.splice(O+1,1),G=!0)),O++;G&&w(R,L)}function E(R){return R>=55296&&R<=56319}function T(R){return R>=56320&&R<=57343}function _(R){return T(R.charCodeAt(0))}function A(R){return E(R.charCodeAt(R.length-1))}function j(R){for(var L=[],O=0;O<R.length;O++)R[O][1].length>0&&L.push(R[O]);return L}function D(R,L,O,H){return A(R)||_(H)?null:j([[n,R],[t,L],[e,O],[n,H]])}function z(R,L,O){var H=typeof O=="number"?{index:O,length:0}:O.oldRange,P=typeof O=="number"?null:O.newRange,I=R.length,U=L.length;if(H.length===0&&(P===null||P.length===0)){var W=H.index,Y=R.slice(0,W),B=R.slice(W),Z=P?P.index:null;e:{var le=W+U-I;if(Z!==null&&Z!==le||le<0||le>U)break e;var G=L.slice(0,le),K=L.slice(le);if(K!==B)break e;var te=Math.min(W,le),ie=Y.slice(0,te),de=G.slice(0,te);if(ie!==de)break e;var fe=Y.slice(te),se=G.slice(te);return D(ie,fe,se,B)}e:{if(Z!==null&&Z!==W)break e;var ce=W,G=L.slice(0,ce),K=L.slice(ce);if(G!==Y)break e;var ue=Math.min(I-ce,U-ce),oe=B.slice(B.length-ue),Ne=K.slice(K.length-ue);if(oe!==Ne)break e;var fe=B.slice(0,B.length-ue),se=K.slice(0,K.length-ue);return D(Y,fe,se,oe)}}if(H.length>0&&P&&P.length===0)e:{var ie=R.slice(0,H.index),oe=R.slice(H.index+H.length),te=ie.length,ue=oe.length;if(U<te+ue)break e;var de=L.slice(0,te),Ne=L.slice(U-ue);if(ie!==de||oe!==Ne)break e;var fe=R.slice(te,I-ue),se=L.slice(te,U-ue);return D(ie,fe,se,oe)}return null}function F(R,L,O,H){return r(R,L,O,H,!0)}return F.INSERT=e,F.DELETE=t,F.EQUAL=n,LT=F,LT}var fx={exports:{}};fx.exports;var vz;function XX(){return vz||(vz=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",s=9007199254740991,a="[object Arguments]",i="[object Array]",o="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",f="[object GeneratorFunction]",m="[object Map]",g="[object Number]",x="[object Object]",b="[object Promise]",C="[object RegExp]",S="[object Set]",w="[object String]",E="[object Symbol]",T="[object WeakMap]",_="[object ArrayBuffer]",A="[object DataView]",j="[object Float32Array]",D="[object Float64Array]",z="[object Int8Array]",F="[object Int16Array]",R="[object Int32Array]",L="[object Uint8Array]",O="[object Uint8ClampedArray]",H="[object Uint16Array]",P="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,U=/\w*$/,W=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,B={};B[a]=B[i]=B[_]=B[A]=B[o]=B[l]=B[j]=B[D]=B[z]=B[F]=B[R]=B[m]=B[g]=B[x]=B[C]=B[S]=B[w]=B[E]=B[L]=B[O]=B[H]=B[P]=!0,B[u]=B[d]=B[T]=!1;var Z=typeof No=="object"&&No&&No.Object===Object&&No,le=typeof self=="object"&&self&&self.Object===Object&&self,G=Z||le||Function("return this")(),K=e&&!e.nodeType&&e,te=K&&!0&&t&&!t.nodeType&&t,ie=te&&te.exports===K;function de(V,ne){return V.set(ne[0],ne[1]),V}function fe(V,ne){return V.add(ne),V}function se(V,ne){for(var we=-1,ze=V?V.length:0;++we<ze&&ne(V[we],we,V)!==!1;);return V}function ce(V,ne){for(var we=-1,ze=ne.length,Zt=V.length;++we<ze;)V[Zt+we]=ne[we];return V}function ue(V,ne,we,ze){for(var Zt=-1,Ft=V?V.length:0;++Zt<Ft;)we=ne(we,V[Zt],Zt,V);return we}function oe(V,ne){for(var we=-1,ze=Array(V);++we<V;)ze[we]=ne(we);return ze}function Ne(V,ne){return V==null?void 0:V[ne]}function ve(V){var ne=!1;if(V!=null&&typeof V.toString!="function")try{ne=!!(V+"")}catch{}return ne}function He(V){var ne=-1,we=Array(V.size);return V.forEach(function(ze,Zt){we[++ne]=[Zt,ze]}),we}function nt(V,ne){return function(we){return V(ne(we))}}function Me(V){var ne=-1,we=Array(V.size);return V.forEach(function(ze){we[++ne]=ze}),we}var $e=Array.prototype,Le=Function.prototype,ae=Object.prototype,pe=G["__core-js_shared__"],_e=(function(){var V=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""})(),Ue=Le.toString,Je=ae.hasOwnProperty,qe=ae.toString,xe=RegExp("^"+Ue.call(Je).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ae=ie?G.Buffer:void 0,Fe=G.Symbol,Qe=G.Uint8Array,vt=nt(Object.getPrototypeOf,Object),at=Object.create,Tt=ae.propertyIsEnumerable,wt=$e.splice,cn=Object.getOwnPropertySymbols,$t=Ae?Ae.isBuffer:void 0,hn=nt(Object.keys,Object),Kn=Ca(G,"DataView"),jn=Ca(G,"Map"),Hn=Ca(G,"Promise"),za=Ca(G,"Set"),$a=Ca(G,"WeakMap"),Dn=Ca(Object,"create"),mr=Cs(Kn),Et=Cs(jn),fn=Cs(Hn),mn=Cs(za),Sn=Cs($a),vr=Fe?Fe.prototype:void 0,er=vr?vr.valueOf:void 0;function qt(V){var ne=-1,we=V?V.length:0;for(this.clear();++ne<we;){var ze=V[ne];this.set(ze[0],ze[1])}}function Vn(){this.__data__=Dn?Dn(null):{}}function xn(V){return this.has(V)&&delete this.__data__[V]}function Xn(V){var ne=this.__data__;if(Dn){var we=ne[V];return we===r?void 0:we}return Je.call(ne,V)?ne[V]:void 0}function ta(V){var ne=this.__data__;return Dn?ne[V]!==void 0:Je.call(ne,V)}function us(V,ne){var we=this.__data__;return we[V]=Dn&&ne===void 0?r:ne,this}qt.prototype.clear=Vn,qt.prototype.delete=xn,qt.prototype.get=Xn,qt.prototype.has=ta,qt.prototype.set=us;function cr(V){var ne=-1,we=V?V.length:0;for(this.clear();++ne<we;){var ze=V[ne];this.set(ze[0],ze[1])}}function vi(){this.__data__=[]}function yi(V){var ne=this.__data__,we=bs(ne,V);if(we<0)return!1;var ze=ne.length-1;return we==ze?ne.pop():wt.call(ne,we,1),!0}function Pu(V){var ne=this.__data__,we=bs(ne,V);return we<0?void 0:ne[we][1]}function Yo(V){return bs(this.__data__,V)>-1}function Xo(V,ne){var we=this.__data__,ze=bs(we,V);return ze<0?we.push([V,ne]):we[ze][1]=ne,this}cr.prototype.clear=vi,cr.prototype.delete=yi,cr.prototype.get=Pu,cr.prototype.has=Yo,cr.prototype.set=Xo;function es(V){var ne=-1,we=V?V.length:0;for(this.clear();++ne<we;){var ze=V[ne];this.set(ze[0],ze[1])}}function Jo(){this.__data__={hash:new qt,map:new(jn||cr),string:new qt}}function Yr(V){return Rc(this,V).delete(V)}function Fu(V){return Rc(this,V).get(V)}function We(V){return Rc(this,V).has(V)}function Ke(V,ne){return Rc(this,V).set(V,ne),this}es.prototype.clear=Jo,es.prototype.delete=Yr,es.prototype.get=Fu,es.prototype.has=We,es.prototype.set=Ke;function ft(V){this.__data__=new cr(V)}function Jt(){this.__data__=new cr}function nn(V){return this.__data__.delete(V)}function ln(V){return this.__data__.get(V)}function rn(V){return this.__data__.has(V)}function Gt(V,ne){var we=this.__data__;if(we instanceof cr){var ze=we.__data__;if(!jn||ze.length<n-1)return ze.push([V,ne]),this;we=this.__data__=new es(ze)}return we.set(V,ne),this}ft.prototype.clear=Jt,ft.prototype.delete=nn,ft.prototype.get=ln,ft.prototype.has=rn,ft.prototype.set=Gt;function Qt(V,ne){var we=rh(V)||Mc(V)?oe(V.length,String):[],ze=we.length,Zt=!!ze;for(var Ft in V)Je.call(V,Ft)&&!(Zt&&(Ft=="length"||Zv(Ft,ze)))&&we.push(Ft);return we}function Rn(V,ne,we){var ze=V[ne];(!(Je.call(V,ne)&&qf(ze,we))||we===void 0&&!(ne in V))&&(V[ne]=we)}function bs(V,ne){for(var we=V.length;we--;)if(qf(V[we][0],ne))return we;return-1}function Er(V,ne){return V&&Lu(ne,ah(ne),V)}function Ls(V,ne,we,ze,Zt,Ft,qn){var Bn;if(ze&&(Bn=Ft?ze(V,Zt,Ft,qn):ze(V)),Bn!==void 0)return Bn;if(!Ui(V))return V;var Ur=rh(V);if(Ur){if(Bn=B0(V),!ne)return Bu(V,Bn)}else{var Yn=el(V),na=Yn==d||Yn==f;if(sh(V))return xt(V,ne);if(Yn==x||Yn==a||na&&!Ft){if(ve(V))return Ft?V:{};if(Bn=$i(na?{}:V),!ne)return Dc(V,Er(Bn,V))}else{if(!B[Yn])return Ft?V:{};Bn=Qv(V,Yn,Ls,ne)}}qn||(qn=new ft);var Za=qn.get(V);if(Za)return Za;if(qn.set(V,Bn),!Ur)var Ds=we?F0(V):ah(V);return se(Ds||V,function(Sa,Rs){Ds&&(Rs=Sa,Sa=V[Rs]),Rn(Bn,Rs,Ls(Sa,ne,we,ze,Rs,V,qn))}),Bn}function zs(V){return Ui(V)?at(V):{}}function $s(V,ne,we){var ze=ne(V);return rh(V)?ze:ce(ze,we(V))}function Qo(V){return qe.call(V)}function xi(V){if(!Ui(V)||Vf(V))return!1;var ne=Ol(V)||ve(V)?xe:W;return ne.test(Cs(V))}function $r(V){if(!nh(V))return hn(V);var ne=[];for(var we in Object(V))Je.call(V,we)&&we!="constructor"&&ne.push(we);return ne}function xt(V,ne){if(ne)return V.slice();var we=new V.constructor(V.length);return V.copy(we),we}function un(V){var ne=new V.constructor(V.byteLength);return new Qe(ne).set(new Qe(V)),ne}function bn(V,ne){var we=ne?un(V.buffer):V.buffer;return new V.constructor(we,V.byteOffset,V.byteLength)}function rr(V,ne,we){var ze=ne?we(He(V),!0):He(V);return ue(ze,de,new V.constructor)}function _r(V){var ne=new V.constructor(V.source,U.exec(V));return ne.lastIndex=V.lastIndex,ne}function Zo(V,ne,we){var ze=ne?we(Me(V),!0):Me(V);return ue(ze,fe,new V.constructor)}function ws(V){return er?Object(er.call(V)):{}}function jc(V,ne){var we=ne?un(V.buffer):V.buffer;return new V.constructor(we,V.byteOffset,V.length)}function Bu(V,ne){var we=-1,ze=V.length;for(ne||(ne=Array(ze));++we<ze;)ne[we]=V[we];return ne}function Lu(V,ne,we,ze){we||(we={});for(var Zt=-1,Ft=ne.length;++Zt<Ft;){var qn=ne[Zt],Bn=void 0;Rn(we,qn,Bn===void 0?V[qn]:Bn)}return we}function Dc(V,ne){return Lu(V,Ml(V),ne)}function F0(V){return $s(V,ah,Ml)}function Rc(V,ne){var we=V.__data__;return th(ne)?we[typeof ne=="string"?"string":"hash"]:we.map}function Ca(V,ne){var we=Ne(V,ne);return xi(we)?we:void 0}var Ml=cn?nt(cn,Object):ih,el=Qo;(Kn&&el(new Kn(new ArrayBuffer(1)))!=A||jn&&el(new jn)!=m||Hn&&el(Hn.resolve())!=b||za&&el(new za)!=S||$a&&el(new $a)!=T)&&(el=function(V){var ne=qe.call(V),we=ne==x?V.constructor:void 0,ze=we?Cs(we):void 0;if(ze)switch(ze){case mr:return A;case Et:return m;case fn:return b;case mn:return S;case Sn:return T}return ne});function B0(V){var ne=V.length,we=V.constructor(ne);return ne&&typeof V[0]=="string"&&Je.call(V,"index")&&(we.index=V.index,we.input=V.input),we}function $i(V){return typeof V.constructor=="function"&&!nh(V)?zs(vt(V)):{}}function Qv(V,ne,we,ze){var Zt=V.constructor;switch(ne){case _:return un(V);case o:case l:return new Zt(+V);case A:return bn(V,ze);case j:case D:case z:case F:case R:case L:case O:case H:case P:return jc(V,ze);case m:return rr(V,ze,we);case g:case w:return new Zt(V);case C:return _r(V);case S:return Zo(V,ze,we);case E:return ws(V)}}function Zv(V,ne){return ne=ne??s,!!ne&&(typeof V=="number"||Y.test(V))&&V>-1&&V%1==0&&V<ne}function th(V){var ne=typeof V;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?V!=="__proto__":V===null}function Vf(V){return!!_e&&_e in V}function nh(V){var ne=V&&V.constructor,we=typeof ne=="function"&&ne.prototype||ae;return V===we}function Cs(V){if(V!=null){try{return Ue.call(V)}catch{}try{return V+""}catch{}}return""}function Il(V){return Ls(V,!0,!0)}function qf(V,ne){return V===ne||V!==V&&ne!==ne}function Mc(V){return ho(V)&&Je.call(V,"callee")&&(!Tt.call(V,"callee")||qe.call(V)==a)}var rh=Array.isArray;function tl(V){return V!=null&&fo(V.length)&&!Ol(V)}function ho(V){return zu(V)&&tl(V)}var sh=$t||oh;function Ol(V){var ne=Ui(V)?qe.call(V):"";return ne==d||ne==f}function fo(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=s}function Ui(V){var ne=typeof V;return!!V&&(ne=="object"||ne=="function")}function zu(V){return!!V&&typeof V=="object"}function ah(V){return tl(V)?Qt(V):$r(V)}function ih(){return[]}function oh(){return!1}t.exports=Il})(fx,fx.exports)),fx.exports}var mx={exports:{}};mx.exports;var yz;function JX(){return yz||(yz=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",s=1,a=2,i=9007199254740991,o="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",m="[object Error]",g="[object Function]",x="[object GeneratorFunction]",b="[object Map]",C="[object Number]",S="[object Null]",w="[object Object]",E="[object Promise]",T="[object Proxy]",_="[object RegExp]",A="[object Set]",j="[object String]",D="[object Symbol]",z="[object Undefined]",F="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",O="[object Float32Array]",H="[object Float64Array]",P="[object Int8Array]",I="[object Int16Array]",U="[object Int32Array]",W="[object Uint8Array]",Y="[object Uint8ClampedArray]",B="[object Uint16Array]",Z="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,te={};te[O]=te[H]=te[P]=te[I]=te[U]=te[W]=te[Y]=te[B]=te[Z]=!0,te[o]=te[l]=te[R]=te[d]=te[L]=te[f]=te[m]=te[g]=te[b]=te[C]=te[w]=te[_]=te[A]=te[j]=te[F]=!1;var ie=typeof No=="object"&&No&&No.Object===Object&&No,de=typeof self=="object"&&self&&self.Object===Object&&self,fe=ie||de||Function("return this")(),se=e&&!e.nodeType&&e,ce=se&&!0&&t&&!t.nodeType&&t,ue=ce&&ce.exports===se,oe=ue&&ie.process,Ne=(function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}})(),ve=Ne&&Ne.isTypedArray;function He(V,ne){for(var we=-1,ze=V==null?0:V.length,Zt=0,Ft=[];++we<ze;){var qn=V[we];ne(qn,we,V)&&(Ft[Zt++]=qn)}return Ft}function nt(V,ne){for(var we=-1,ze=ne.length,Zt=V.length;++we<ze;)V[Zt+we]=ne[we];return V}function Me(V,ne){for(var we=-1,ze=V==null?0:V.length;++we<ze;)if(ne(V[we],we,V))return!0;return!1}function $e(V,ne){for(var we=-1,ze=Array(V);++we<V;)ze[we]=ne(we);return ze}function Le(V){return function(ne){return V(ne)}}function ae(V,ne){return V.has(ne)}function pe(V,ne){return V==null?void 0:V[ne]}function _e(V){var ne=-1,we=Array(V.size);return V.forEach(function(ze,Zt){we[++ne]=[Zt,ze]}),we}function Ue(V,ne){return function(we){return V(ne(we))}}function Je(V){var ne=-1,we=Array(V.size);return V.forEach(function(ze){we[++ne]=ze}),we}var qe=Array.prototype,xe=Function.prototype,Ae=Object.prototype,Fe=fe["__core-js_shared__"],Qe=xe.toString,vt=Ae.hasOwnProperty,at=(function(){var V=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""})(),Tt=Ae.toString,wt=RegExp("^"+Qe.call(vt).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cn=ue?fe.Buffer:void 0,$t=fe.Symbol,hn=fe.Uint8Array,Kn=Ae.propertyIsEnumerable,jn=qe.splice,Hn=$t?$t.toStringTag:void 0,za=Object.getOwnPropertySymbols,$a=cn?cn.isBuffer:void 0,Dn=Ue(Object.keys,Object),mr=Ml(fe,"DataView"),Et=Ml(fe,"Map"),fn=Ml(fe,"Promise"),mn=Ml(fe,"Set"),Sn=Ml(fe,"WeakMap"),vr=Ml(Object,"create"),er=Cs(mr),qt=Cs(Et),Vn=Cs(fn),xn=Cs(mn),Xn=Cs(Sn),ta=$t?$t.prototype:void 0,us=ta?ta.valueOf:void 0;function cr(V){var ne=-1,we=V==null?0:V.length;for(this.clear();++ne<we;){var ze=V[ne];this.set(ze[0],ze[1])}}function vi(){this.__data__=vr?vr(null):{},this.size=0}function yi(V){var ne=this.has(V)&&delete this.__data__[V];return this.size-=ne?1:0,ne}function Pu(V){var ne=this.__data__;if(vr){var we=ne[V];return we===r?void 0:we}return vt.call(ne,V)?ne[V]:void 0}function Yo(V){var ne=this.__data__;return vr?ne[V]!==void 0:vt.call(ne,V)}function Xo(V,ne){var we=this.__data__;return this.size+=this.has(V)?0:1,we[V]=vr&&ne===void 0?r:ne,this}cr.prototype.clear=vi,cr.prototype.delete=yi,cr.prototype.get=Pu,cr.prototype.has=Yo,cr.prototype.set=Xo;function es(V){var ne=-1,we=V==null?0:V.length;for(this.clear();++ne<we;){var ze=V[ne];this.set(ze[0],ze[1])}}function Jo(){this.__data__=[],this.size=0}function Yr(V){var ne=this.__data__,we=xt(ne,V);if(we<0)return!1;var ze=ne.length-1;return we==ze?ne.pop():jn.call(ne,we,1),--this.size,!0}function Fu(V){var ne=this.__data__,we=xt(ne,V);return we<0?void 0:ne[we][1]}function We(V){return xt(this.__data__,V)>-1}function Ke(V,ne){var we=this.__data__,ze=xt(we,V);return ze<0?(++this.size,we.push([V,ne])):we[ze][1]=ne,this}es.prototype.clear=Jo,es.prototype.delete=Yr,es.prototype.get=Fu,es.prototype.has=We,es.prototype.set=Ke;function ft(V){var ne=-1,we=V==null?0:V.length;for(this.clear();++ne<we;){var ze=V[ne];this.set(ze[0],ze[1])}}function Jt(){this.size=0,this.__data__={hash:new cr,map:new(Et||es),string:new cr}}function nn(V){var ne=Ca(this,V).delete(V);return this.size-=ne?1:0,ne}function ln(V){return Ca(this,V).get(V)}function rn(V){return Ca(this,V).has(V)}function Gt(V,ne){var we=Ca(this,V),ze=we.size;return we.set(V,ne),this.size+=we.size==ze?0:1,this}ft.prototype.clear=Jt,ft.prototype.delete=nn,ft.prototype.get=ln,ft.prototype.has=rn,ft.prototype.set=Gt;function Qt(V){var ne=-1,we=V==null?0:V.length;for(this.__data__=new ft;++ne<we;)this.add(V[ne])}function Rn(V){return this.__data__.set(V,r),this}function bs(V){return this.__data__.has(V)}Qt.prototype.add=Qt.prototype.push=Rn,Qt.prototype.has=bs;function Er(V){var ne=this.__data__=new es(V);this.size=ne.size}function Ls(){this.__data__=new es,this.size=0}function zs(V){var ne=this.__data__,we=ne.delete(V);return this.size=ne.size,we}function $s(V){return this.__data__.get(V)}function Qo(V){return this.__data__.has(V)}function xi(V,ne){var we=this.__data__;if(we instanceof es){var ze=we.__data__;if(!Et||ze.length<n-1)return ze.push([V,ne]),this.size=++we.size,this;we=this.__data__=new ft(ze)}return we.set(V,ne),this.size=we.size,this}Er.prototype.clear=Ls,Er.prototype.delete=zs,Er.prototype.get=$s,Er.prototype.has=Qo,Er.prototype.set=xi;function $r(V,ne){var we=Mc(V),ze=!we&&qf(V),Zt=!we&&!ze&&tl(V),Ft=!we&&!ze&&!Zt&&zu(V),qn=we||ze||Zt||Ft,Bn=qn?$e(V.length,String):[],Ur=Bn.length;for(var Yn in V)vt.call(V,Yn)&&!(qn&&(Yn=="length"||Zt&&(Yn=="offset"||Yn=="parent")||Ft&&(Yn=="buffer"||Yn=="byteLength"||Yn=="byteOffset")||Qv(Yn,Ur)))&&Bn.push(Yn);return Bn}function xt(V,ne){for(var we=V.length;we--;)if(Il(V[we][0],ne))return we;return-1}function un(V,ne,we){var ze=ne(V);return Mc(V)?ze:nt(ze,we(V))}function bn(V){return V==null?V===void 0?z:S:Hn&&Hn in Object(V)?el(V):nh(V)}function rr(V){return Ui(V)&&bn(V)==o}function _r(V,ne,we,ze,Zt){return V===ne?!0:V==null||ne==null||!Ui(V)&&!Ui(ne)?V!==V&&ne!==ne:Zo(V,ne,we,ze,_r,Zt)}function Zo(V,ne,we,ze,Zt,Ft){var qn=Mc(V),Bn=Mc(ne),Ur=qn?l:$i(V),Yn=Bn?l:$i(ne);Ur=Ur==o?w:Ur,Yn=Yn==o?w:Yn;var na=Ur==w,Za=Yn==w,Ds=Ur==Yn;if(Ds&&tl(V)){if(!tl(ne))return!1;qn=!0,na=!1}if(Ds&&!na)return Ft||(Ft=new Er),qn||zu(V)?Lu(V,ne,we,ze,Zt,Ft):Dc(V,ne,Ur,we,ze,Zt,Ft);if(!(we&s)){var Sa=na&&vt.call(V,"__wrapped__"),Rs=Za&&vt.call(ne,"__wrapped__");if(Sa||Rs){var Ic=Sa?V.value():V,Pl=Rs?ne.value():ne;return Ft||(Ft=new Er),Zt(Ic,Pl,we,ze,Ft)}}return Ds?(Ft||(Ft=new Er),F0(V,ne,we,ze,Zt,Ft)):!1}function ws(V){if(!fo(V)||th(V))return!1;var ne=sh(V)?wt:G;return ne.test(Cs(V))}function jc(V){return Ui(V)&&Ol(V.length)&&!!te[bn(V)]}function Bu(V){if(!Vf(V))return Dn(V);var ne=[];for(var we in Object(V))vt.call(V,we)&&we!="constructor"&&ne.push(we);return ne}function Lu(V,ne,we,ze,Zt,Ft){var qn=we&s,Bn=V.length,Ur=ne.length;if(Bn!=Ur&&!(qn&&Ur>Bn))return!1;var Yn=Ft.get(V);if(Yn&&Ft.get(ne))return Yn==ne;var na=-1,Za=!0,Ds=we&a?new Qt:void 0;for(Ft.set(V,ne),Ft.set(ne,V);++na<Bn;){var Sa=V[na],Rs=ne[na];if(ze)var Ic=qn?ze(Rs,Sa,na,ne,V,Ft):ze(Sa,Rs,na,V,ne,Ft);if(Ic!==void 0){if(Ic)continue;Za=!1;break}if(Ds){if(!Me(ne,function(Pl,$u){if(!ae(Ds,$u)&&(Sa===Pl||Zt(Sa,Pl,we,ze,Ft)))return Ds.push($u)})){Za=!1;break}}else if(!(Sa===Rs||Zt(Sa,Rs,we,ze,Ft))){Za=!1;break}}return Ft.delete(V),Ft.delete(ne),Za}function Dc(V,ne,we,ze,Zt,Ft,qn){switch(we){case L:if(V.byteLength!=ne.byteLength||V.byteOffset!=ne.byteOffset)return!1;V=V.buffer,ne=ne.buffer;case R:return!(V.byteLength!=ne.byteLength||!Ft(new hn(V),new hn(ne)));case d:case f:case C:return Il(+V,+ne);case m:return V.name==ne.name&&V.message==ne.message;case _:case j:return V==ne+"";case b:var Bn=_e;case A:var Ur=ze&s;if(Bn||(Bn=Je),V.size!=ne.size&&!Ur)return!1;var Yn=qn.get(V);if(Yn)return Yn==ne;ze|=a,qn.set(V,ne);var na=Lu(Bn(V),Bn(ne),ze,Zt,Ft,qn);return qn.delete(V),na;case D:if(us)return us.call(V)==us.call(ne)}return!1}function F0(V,ne,we,ze,Zt,Ft){var qn=we&s,Bn=Rc(V),Ur=Bn.length,Yn=Rc(ne),na=Yn.length;if(Ur!=na&&!qn)return!1;for(var Za=Ur;Za--;){var Ds=Bn[Za];if(!(qn?Ds in ne:vt.call(ne,Ds)))return!1}var Sa=Ft.get(V);if(Sa&&Ft.get(ne))return Sa==ne;var Rs=!0;Ft.set(V,ne),Ft.set(ne,V);for(var Ic=qn;++Za<Ur;){Ds=Bn[Za];var Pl=V[Ds],$u=ne[Ds];if(ze)var Ww=qn?ze($u,Pl,Ds,ne,V,Ft):ze(Pl,$u,Ds,V,ne,Ft);if(!(Ww===void 0?Pl===$u||Zt(Pl,$u,we,ze,Ft):Ww)){Rs=!1;break}Ic||(Ic=Ds=="constructor")}if(Rs&&!Ic){var L0=V.constructor,Gf=ne.constructor;L0!=Gf&&"constructor"in V&&"constructor"in ne&&!(typeof L0=="function"&&L0 instanceof L0&&typeof Gf=="function"&&Gf instanceof Gf)&&(Rs=!1)}return Ft.delete(V),Ft.delete(ne),Rs}function Rc(V){return un(V,ah,B0)}function Ca(V,ne){var we=V.__data__;return Zv(ne)?we[typeof ne=="string"?"string":"hash"]:we.map}function Ml(V,ne){var we=pe(V,ne);return ws(we)?we:void 0}function el(V){var ne=vt.call(V,Hn),we=V[Hn];try{V[Hn]=void 0;var ze=!0}catch{}var Zt=Tt.call(V);return ze&&(ne?V[Hn]=we:delete V[Hn]),Zt}var B0=za?function(V){return V==null?[]:(V=Object(V),He(za(V),function(ne){return Kn.call(V,ne)}))}:ih,$i=bn;(mr&&$i(new mr(new ArrayBuffer(1)))!=L||Et&&$i(new Et)!=b||fn&&$i(fn.resolve())!=E||mn&&$i(new mn)!=A||Sn&&$i(new Sn)!=F)&&($i=function(V){var ne=bn(V),we=ne==w?V.constructor:void 0,ze=we?Cs(we):"";if(ze)switch(ze){case er:return L;case qt:return b;case Vn:return E;case xn:return A;case Xn:return F}return ne});function Qv(V,ne){return ne=ne??i,!!ne&&(typeof V=="number"||K.test(V))&&V>-1&&V%1==0&&V<ne}function Zv(V){var ne=typeof V;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?V!=="__proto__":V===null}function th(V){return!!at&&at in V}function Vf(V){var ne=V&&V.constructor,we=typeof ne=="function"&&ne.prototype||Ae;return V===we}function nh(V){return Tt.call(V)}function Cs(V){if(V!=null){try{return Qe.call(V)}catch{}try{return V+""}catch{}}return""}function Il(V,ne){return V===ne||V!==V&&ne!==ne}var qf=rr((function(){return arguments})())?rr:function(V){return Ui(V)&&vt.call(V,"callee")&&!Kn.call(V,"callee")},Mc=Array.isArray;function rh(V){return V!=null&&Ol(V.length)&&!sh(V)}var tl=$a||oh;function ho(V,ne){return _r(V,ne)}function sh(V){if(!fo(V))return!1;var ne=bn(V);return ne==g||ne==x||ne==u||ne==T}function Ol(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=i}function fo(V){var ne=typeof V;return V!=null&&(ne=="object"||ne=="function")}function Ui(V){return V!=null&&typeof V=="object"}var zu=ve?Le(ve):jc;function ah(V){return rh(V)?$r(V):Bu(V)}function ih(){return[]}function oh(){return!1}t.exports=ho})(mx,mx.exports)),mx.exports}var nC={},xz;function X1e(){if(xz)return nC;xz=1,Object.defineProperty(nC,"__esModule",{value:!0});const t=XX(),e=JX();var n;return(function(r){function s(l={},u={},d=!1){typeof l!="object"&&(l={}),typeof u!="object"&&(u={});let f=t(u);d||(f=Object.keys(f).reduce((m,g)=>(f[g]!=null&&(m[g]=f[g]),m),{}));for(const m in l)l[m]!==void 0&&u[m]===void 0&&(f[m]=l[m]);return Object.keys(f).length>0?f:void 0}r.compose=s;function a(l={},u={}){typeof l!="object"&&(l={}),typeof u!="object"&&(u={});const d=Object.keys(l).concat(Object.keys(u)).reduce((f,m)=>(e(l[m],u[m])||(f[m]=u[m]===void 0?null:u[m]),f),{});return Object.keys(d).length>0?d:void 0}r.diff=a;function i(l={},u={}){l=l||{};const d=Object.keys(u).reduce((f,m)=>(u[m]!==l[m]&&l[m]!==void 0&&(f[m]=u[m]),f),{});return Object.keys(l).reduce((f,m)=>(l[m]!==u[m]&&u[m]===void 0&&(f[m]=null),f),d)}r.invert=i;function o(l,u,d=!1){if(typeof l!="object")return u;if(typeof u!="object")return;if(!d)return u;const f=Object.keys(u).reduce((m,g)=>(l[g]===void 0&&(m[g]=u[g]),m),{});return Object.keys(f).length>0?f:void 0}r.transform=o})(n||(n={})),nC.default=n,nC}var rC={},bz;function QX(){if(bz)return rC;bz=1,Object.defineProperty(rC,"__esModule",{value:!0});var t;return(function(e){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=n})(t||(t={})),rC.default=t,rC}var sC={},wz;function J1e(){if(wz)return sC;wz=1,Object.defineProperty(sC,"__esModule",{value:!0});const t=QX();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const s=this.ops[this.index];if(s){const a=this.offset,i=t.default.length(s);if(r>=i-a?(r=i-a,this.index+=1,this.offset=0):this.offset+=r,typeof s.delete=="number")return{delete:r};{const o={};return s.attributes&&(o.attributes=s.attributes),typeof s.retain=="number"?o.retain=r:typeof s.retain=="object"&&s.retain!==null?o.retain=s.retain:typeof s.insert=="string"?o.insert=s.insert.substr(a,r):o.insert=s.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,s=this.index,a=this.next(),i=this.ops.slice(this.index);return this.offset=r,this.index=s,[a].concat(i)}}else return[]}}return sC.default=e,sC}var Cz;function Q1e(){return Cz||(Cz=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=Y1e(),r=XX(),s=JX(),a=X1e();e.AttributeMap=a.default;const i=QX();e.Op=i.default;const o=J1e();e.OpIterator=o.default;const l="\0",u=(f,m)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof m!="object"||m===null)throw new Error(`cannot retain a ${typeof m}`);const g=Object.keys(f)[0];if(!g||g!==Object.keys(m)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(m)[0]}`);return[g,f[g],m[g]]};class d{constructor(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]}static registerEmbed(m,g){this.handlers[m]=g}static unregisterEmbed(m){delete this.handlers[m]}static getHandler(m){const g=this.handlers[m];if(!g)throw new Error(`no handlers for embed type "${m}"`);return g}insert(m,g){const x={};return typeof m=="string"&&m.length===0?this:(x.insert=m,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x))}delete(m){return m<=0?this:this.push({delete:m})}retain(m,g){if(typeof m=="number"&&m<=0)return this;const x={retain:m};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(x.attributes=g),this.push(x)}push(m){let g=this.ops.length,x=this.ops[g-1];if(m=r(m),typeof x=="object"){if(typeof m.delete=="number"&&typeof x.delete=="number")return this.ops[g-1]={delete:x.delete+m.delete},this;if(typeof x.delete=="number"&&m.insert!=null&&(g-=1,x=this.ops[g-1],typeof x!="object"))return this.ops.unshift(m),this;if(s(m.attributes,x.attributes)){if(typeof m.insert=="string"&&typeof x.insert=="string")return this.ops[g-1]={insert:x.insert+m.insert},typeof m.attributes=="object"&&(this.ops[g-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof x.retain=="number")return this.ops[g-1]={retain:x.retain+m.retain},typeof m.attributes=="object"&&(this.ops[g-1].attributes=m.attributes),this}}return g===this.ops.length?this.ops.push(m):this.ops.splice(g,0,m),this}chop(){const m=this.ops[this.ops.length-1];return m&&typeof m.retain=="number"&&!m.attributes&&this.ops.pop(),this}filter(m){return this.ops.filter(m)}forEach(m){this.ops.forEach(m)}map(m){return this.ops.map(m)}partition(m){const g=[],x=[];return this.forEach(b=>{(m(b)?g:x).push(b)}),[g,x]}reduce(m,g){return this.ops.reduce(m,g)}changeLength(){return this.reduce((m,g)=>g.insert?m+i.default.length(g):g.delete?m-g.delete:m,0)}length(){return this.reduce((m,g)=>m+i.default.length(g),0)}slice(m=0,g=1/0){const x=[],b=new o.default(this.ops);let C=0;for(;C<g&&b.hasNext();){let S;C<m?S=b.next(m-C):(S=b.next(g-C),x.push(S)),C+=i.default.length(S)}return new d(x)}compose(m){const g=new o.default(this.ops),x=new o.default(m.ops),b=[],C=x.peek();if(C!=null&&typeof C.retain=="number"&&C.attributes==null){let w=C.retain;for(;g.peekType()==="insert"&&g.peekLength()<=w;)w-=g.peekLength(),b.push(g.next());C.retain-w>0&&x.next(C.retain-w)}const S=new d(b);for(;g.hasNext()||x.hasNext();)if(x.peekType()==="insert")S.push(x.next());else if(g.peekType()==="delete")S.push(g.next());else{const w=Math.min(g.peekLength(),x.peekLength()),E=g.next(w),T=x.next(w);if(T.retain){const _={};if(typeof E.retain=="number")_.retain=typeof T.retain=="number"?w:T.retain;else if(typeof T.retain=="number")E.retain==null?_.insert=E.insert:_.retain=E.retain;else{const j=E.retain==null?"insert":"retain",[D,z,F]=u(E[j],T.retain),R=d.getHandler(D);_[j]={[D]:R.compose(z,F,j==="retain")}}const A=a.default.compose(E.attributes,T.attributes,typeof E.retain=="number");if(A&&(_.attributes=A),S.push(_),!x.hasNext()&&s(S.ops[S.ops.length-1],_)){const j=new d(g.rest());return S.concat(j).chop()}}else typeof T.delete=="number"&&(typeof E.retain=="number"||typeof E.retain=="object"&&E.retain!==null)&&S.push(T)}return S.chop()}concat(m){const g=new d(this.ops.slice());return m.ops.length>0&&(g.push(m.ops[0]),g.ops=g.ops.concat(m.ops.slice(1))),g}diff(m,g){if(this.ops===m.ops)return new d;const x=[this,m].map(E=>E.map(T=>{if(T.insert!=null)return typeof T.insert=="string"?T.insert:l;const _=E===m?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")),b=new d,C=n(x[0],x[1],g,!0),S=new o.default(this.ops),w=new o.default(m.ops);return C.forEach(E=>{let T=E[1].length;for(;T>0;){let _=0;switch(E[0]){case n.INSERT:_=Math.min(w.peekLength(),T),b.push(w.next(_));break;case n.DELETE:_=Math.min(T,S.peekLength()),S.next(_),b.delete(_);break;case n.EQUAL:_=Math.min(S.peekLength(),w.peekLength(),T);const A=S.next(_),j=w.next(_);s(A.insert,j.insert)?b.retain(_,a.default.diff(A.attributes,j.attributes)):b.push(j).delete(_);break}T-=_}}),b.chop()}eachLine(m,g=`
`){const x=new o.default(this.ops);let b=new d,C=0;for(;x.hasNext();){if(x.peekType()!=="insert")return;const S=x.peek(),w=i.default.length(S)-x.peekLength(),E=typeof S.insert=="string"?S.insert.indexOf(g,w)-w:-1;if(E<0)b.push(x.next());else if(E>0)b.push(x.next(E));else{if(m(b,x.next(1).attributes||{},C)===!1)return;C+=1,b=new d}}b.length()>0&&m(b,{},C)}invert(m){const g=new d;return this.reduce((x,b)=>{if(b.insert)g.delete(i.default.length(b));else{if(typeof b.retain=="number"&&b.attributes==null)return g.retain(b.retain),x+b.retain;if(b.delete||typeof b.retain=="number"){const C=b.delete||b.retain;return m.slice(x,x+C).forEach(w=>{b.delete?g.push(w):b.retain&&b.attributes&&g.retain(i.default.length(w),a.default.invert(b.attributes,w.attributes))}),x+C}else if(typeof b.retain=="object"&&b.retain!==null){const C=m.slice(x,x+1),S=new o.default(C.ops).next(),[w,E,T]=u(b.retain,S.insert),_=d.getHandler(w);return g.retain({[w]:_.invert(E,T)},a.default.invert(b.attributes,S.attributes)),x+1}}return x},0),g.chop()}transform(m,g=!1){if(g=!!g,typeof m=="number")return this.transformPosition(m,g);const x=m,b=new o.default(this.ops),C=new o.default(x.ops),S=new d;for(;b.hasNext()||C.hasNext();)if(b.peekType()==="insert"&&(g||C.peekType()!=="insert"))S.retain(i.default.length(b.next()));else if(C.peekType()==="insert")S.push(C.next());else{const w=Math.min(b.peekLength(),C.peekLength()),E=b.next(w),T=C.next(w);if(E.delete)continue;if(T.delete)S.push(T);else{const _=E.retain,A=T.retain;let j=typeof A=="object"&&A!==null?A:w;if(typeof _=="object"&&_!==null&&typeof A=="object"&&A!==null){const D=Object.keys(_)[0];if(D===Object.keys(A)[0]){const z=d.getHandler(D);z&&(j={[D]:z.transform(_[D],A[D],g)})}}S.retain(j,a.default.transform(E.attributes,T.attributes,g))}}return S.chop()}transformPosition(m,g=!1){g=!!g;const x=new o.default(this.ops);let b=0;for(;x.hasNext()&&b<=m;){const C=x.peekLength(),S=x.peekType();if(x.next(),S==="delete"){m-=Math.min(C,m-b);continue}else S==="insert"&&(b<m||!g)&&(m+=C);b+=C}return m}}d.Op=i.default,d.OpIterator=o.default,d.AttributeMap=a.default,d.handlers={},e.default=d,t.exports=d,t.exports.default=d})(tC,tC.exports)),tC.exports}var Z1e=Q1e();const px=Pa(Z1e),ebe={note_counts:"cached_note_counts"},Sz=kc(Nl,jl),ZX=y.createContext({}),kr=()=>{const t=y.useContext(ZX);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},eJ=({children:t,initial:e})=>{var qe;const{getOptions:n,updateOptions:r,closeModal:s,settings:a}=ut(),[i,o]=y.useState({}),[l,u]=y.useState(null),[d,f]=y.useState(!1),[m,g]=y.useState(!1),[x,b]=y.useState(!1),[C,S]=y.useState(!1),[w,E]=y.useState(null),[T,_]=y.useState(null),[A,j]=y.useState(!1),[D,z]=y.useState(!1),[F,R]=y.useState(e.page),[L,O]=y.useState(e.step),[H,P]=y.useState(null),[I,U]=y.useState(null),[W,Y]=y.useState(null),[B,Z]=y.useState("annually"),[le,G]=y.useState(null),[K,te]=y.useState(!1),[ie,de]=y.useState(!1),[fe,se]=y.useState(null),ce=y.useRef(null),[ue,oe]=y.useState({success:!1,error:null,loading:!1}),Ne=((qe=n())==null?void 0:qe.analytics_id)??crypto.randomUUID(),[ve,He]=y.useState(!1),Me=new URLSearchParams(window.location.search??"").get("origin"),$e=()=>{o({}),u({}),f(!1),g(!1),b(!1),S(!1),E(null)},Le=()=>{f(!0)},ae=async()=>{var Fe;if(!Me)return;const{data:xe,error:Ae}=await Sz.from("schools").select("*").eq("domain",Me);P(((Fe=xe==null?void 0:xe[0])==null?void 0:Fe.name)??null)};y.useEffect(()=>{ae()},[]);const pe=async(xe,Ae)=>{oe({success:!1,error:null,loading:!0,type:Ae});try{const{data:Fe,error:Qe}=await xe;if(Qe)throw new Error(Qe);u((Fe==null?void 0:Fe.session)||Fe)}catch(Fe){console.error("Login error:",Fe),oe({success:!1,error:"An unexpected error occurred during login. Please try again.",loading:!1})}};y.useEffect(()=>{l&&Ue()},[l]);const _e=async()=>{var xe;r({auth:l,auth_state:"complete"}),(xe=window==null?void 0:window.top)==null||xe.postMessage({type:"AUTH_LOGIN_SUCCESS",payload:{}},"*"),setTimeout(()=>{s()},200)},Ue=async()=>{var at,Tt,wt,cn;oe($t=>({...$t,success:!0,error:null,loading:!1}));const xe=await fetch(`${Jr}/users/check-signup-completion`,{method:"GET",headers:{Authorization:`Bearer ${l==null?void 0:l.access_token}`}}),{message:Ae,error:Fe}=await xe.json();if(Fe)throw new Error(Fe);Ae.completed===!1&&r({should_show_spotlight:!0});const Qe=Ae.completed===!0,vt=Ae.theme&&((Tt=(at=n())==null?void 0:at.selected_theme)==null?void 0:Tt.code)!==((wt=Ae.theme)==null?void 0:wt.code);if(de(Ae.completed),console.log("application",Ae.theme,n(),(cn=n().selected_theme)==null?void 0:cn.code,vt),vt&&se(Ae.theme),ue.type==="signup"){O(vt?"previouslyAppliedTheme":"claimTrial");return}if(ue.type==="login"){Qe?Qe&&vt?O("previouslyAppliedTheme"):Qe&&!vt&&_e():O("ageVerification");return}},Je={credentialResponse:i,token:l,trialAccepted:d,loginSuccess:m,trialReady:x,loading:C,error:w,authStep:L,pendingGoogleCredential:T,ageVerified:A,afterAgeVerified:D,page:F,school:H,emailLogin:I,selectedPrice:B,prices:W,uuid:Ne,redirectToSignup:ve,ageBand:le,showConfetti:K,completedSignup:ie,loginState:ue,previouslyAppliedTheme:fe,postReapplyHandler:ce,setRedirectToSignup:He,setCompletedSignup:de,setLoginState:oe,handleAuthFinish:_e,handleAuthSuccess:Ue,handleAuth:pe,setCredentialResponse:o,setToken:u,setTrialAccepted:f,setLoginSuccess:g,setTrialReady:b,setLoading:S,setError:E,resetAuth:$e,acceptTrial:Le,setAuthStep:O,setPendingGoogleCredential:_,setAgeVerified:j,setAfterAgeVerified:z,setPage:R,setEmailLogin:U,setSelectedPrice:Z,setPrices:Y,setAgeBand:G,setShowConfetti:te,setPreviouslyAppliedTheme:se,supabase:Sz};return c.jsx(ZX.Provider,{value:Je,children:t})};var zT={exports:{}};const tbe={},nbe=Object.freeze(Object.defineProperty({__proto__:null,default:tbe},Symbol.toStringTag,{value:"Module"})),kz=sX(nbe);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */var Ez;function rbe(){return Ez||(Ez=1,(function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";a?r=No:s&&(r=self);var i=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,o=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[-2147483648,8388608,32768,128],d=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=["hex","array","digest","arrayBuffer"],g=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),o&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});var x=function(A,j){return function(D){return new E(j,!0).update(D)[A]()}},b=function(A){var j=x("hex",A);a&&(j=C(j,A)),j.create=function(){return new E(A)},j.update=function(F){return j.create().update(F)};for(var D=0;D<m.length;++D){var z=m[D];j[z]=x(z,A)}return j},C=function(A,j){var D=kz,z=kz.Buffer,F=j?"sha224":"sha256",R;z.from&&!r.JS_SHA256_NO_BUFFER_FROM?R=z.from:R=function(O){return new z(O)};var L=function(O){if(typeof O=="string")return D.createHash(F).update(O,"utf8").digest("hex");if(O==null)throw new Error(e);return O.constructor===ArrayBuffer&&(O=new Uint8Array(O)),Array.isArray(O)||ArrayBuffer.isView(O)||O.constructor===z?D.createHash(F).update(R(O)).digest("hex"):A(O)};return L},S=function(A,j){return function(D,z){return new T(D,j,!0).update(z)[A]()}},w=function(A){var j=S("hex",A);j.create=function(F){return new T(F,A)},j.update=function(F,R){return j.create(F).update(R)};for(var D=0;D<m.length;++D){var z=m[D];j[z]=S(z,A)}return j};function E(A,j){j?(g[0]=g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0,this.blocks=g):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=A}E.prototype.update=function(A){if(!this.finalized){var j,D=typeof A;if(D!=="string"){if(D==="object"){if(A===null)throw new Error(e);if(o&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!o||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);j=!0}for(var z,F=0,R,L=A.length,O=this.blocks;F<L;){if(this.hashed&&(this.hashed=!1,O[0]=this.block,this.block=O[16]=O[1]=O[2]=O[3]=O[4]=O[5]=O[6]=O[7]=O[8]=O[9]=O[10]=O[11]=O[12]=O[13]=O[14]=O[15]=0),j)for(R=this.start;F<L&&R<64;++F)O[R>>>2]|=A[F]<<d[R++&3];else for(R=this.start;F<L&&R<64;++F)z=A.charCodeAt(F),z<128?O[R>>>2]|=z<<d[R++&3]:z<2048?(O[R>>>2]|=(192|z>>>6)<<d[R++&3],O[R>>>2]|=(128|z&63)<<d[R++&3]):z<55296||z>=57344?(O[R>>>2]|=(224|z>>>12)<<d[R++&3],O[R>>>2]|=(128|z>>>6&63)<<d[R++&3],O[R>>>2]|=(128|z&63)<<d[R++&3]):(z=65536+((z&1023)<<10|A.charCodeAt(++F)&1023),O[R>>>2]|=(240|z>>>18)<<d[R++&3],O[R>>>2]|=(128|z>>>12&63)<<d[R++&3],O[R>>>2]|=(128|z>>>6&63)<<d[R++&3],O[R>>>2]|=(128|z&63)<<d[R++&3]);this.lastByteIndex=R,this.bytes+=R-this.start,R>=64?(this.block=O[16],this.start=R-64,this.hash(),this.hashed=!0):this.start=R}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},E.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,j=this.lastByteIndex;A[16]=this.block,A[j>>>2]|=u[j&3],this.block=A[16],j>=56&&(this.hashed||this.hash(),A[0]=this.block,A[16]=A[1]=A[2]=A[3]=A[4]=A[5]=A[6]=A[7]=A[8]=A[9]=A[10]=A[11]=A[12]=A[13]=A[14]=A[15]=0),A[14]=this.hBytes<<3|this.bytes>>>29,A[15]=this.bytes<<3,this.hash()}},E.prototype.hash=function(){var A=this.h0,j=this.h1,D=this.h2,z=this.h3,F=this.h4,R=this.h5,L=this.h6,O=this.h7,H=this.blocks,P,I,U,W,Y,B,Z,le,G,K,te;for(P=16;P<64;++P)Y=H[P-15],I=(Y>>>7|Y<<25)^(Y>>>18|Y<<14)^Y>>>3,Y=H[P-2],U=(Y>>>17|Y<<15)^(Y>>>19|Y<<13)^Y>>>10,H[P]=H[P-16]+I+H[P-7]+U<<0;for(te=j&D,P=0;P<64;P+=4)this.first?(this.is224?(le=300032,Y=H[0]-1413257819,O=Y-150054599<<0,z=Y+24177077<<0):(le=704751109,Y=H[0]-210244248,O=Y-1521486534<<0,z=Y+143694565<<0),this.first=!1):(I=(A>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10),U=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),le=A&j,W=le^A&D^te,Z=F&R^~F&L,Y=O+U+Z+f[P]+H[P],B=I+W,O=z+Y<<0,z=Y+B<<0),I=(z>>>2|z<<30)^(z>>>13|z<<19)^(z>>>22|z<<10),U=(O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7),G=z&A,W=G^z&j^le,Z=O&F^~O&R,Y=L+U+Z+f[P+1]+H[P+1],B=I+W,L=D+Y<<0,D=Y+B<<0,I=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),U=(L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7),K=D&z,W=K^D&A^G,Z=L&O^~L&F,Y=R+U+Z+f[P+2]+H[P+2],B=I+W,R=j+Y<<0,j=Y+B<<0,I=(j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10),U=(R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7),te=j&D,W=te^j&z^K,Z=R&L^~R&O,Y=F+U+Z+f[P+3]+H[P+3],B=I+W,F=A+Y<<0,A=Y+B<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+A<<0,this.h1=this.h1+j<<0,this.h2=this.h2+D<<0,this.h3=this.h3+z<<0,this.h4=this.h4+F<<0,this.h5=this.h5+R<<0,this.h6=this.h6+L<<0,this.h7=this.h7+O<<0},E.prototype.hex=function(){this.finalize();var A=this.h0,j=this.h1,D=this.h2,z=this.h3,F=this.h4,R=this.h5,L=this.h6,O=this.h7,H=l[A>>>28&15]+l[A>>>24&15]+l[A>>>20&15]+l[A>>>16&15]+l[A>>>12&15]+l[A>>>8&15]+l[A>>>4&15]+l[A&15]+l[j>>>28&15]+l[j>>>24&15]+l[j>>>20&15]+l[j>>>16&15]+l[j>>>12&15]+l[j>>>8&15]+l[j>>>4&15]+l[j&15]+l[D>>>28&15]+l[D>>>24&15]+l[D>>>20&15]+l[D>>>16&15]+l[D>>>12&15]+l[D>>>8&15]+l[D>>>4&15]+l[D&15]+l[z>>>28&15]+l[z>>>24&15]+l[z>>>20&15]+l[z>>>16&15]+l[z>>>12&15]+l[z>>>8&15]+l[z>>>4&15]+l[z&15]+l[F>>>28&15]+l[F>>>24&15]+l[F>>>20&15]+l[F>>>16&15]+l[F>>>12&15]+l[F>>>8&15]+l[F>>>4&15]+l[F&15]+l[R>>>28&15]+l[R>>>24&15]+l[R>>>20&15]+l[R>>>16&15]+l[R>>>12&15]+l[R>>>8&15]+l[R>>>4&15]+l[R&15]+l[L>>>28&15]+l[L>>>24&15]+l[L>>>20&15]+l[L>>>16&15]+l[L>>>12&15]+l[L>>>8&15]+l[L>>>4&15]+l[L&15];return this.is224||(H+=l[O>>>28&15]+l[O>>>24&15]+l[O>>>20&15]+l[O>>>16&15]+l[O>>>12&15]+l[O>>>8&15]+l[O>>>4&15]+l[O&15]),H},E.prototype.toString=E.prototype.hex,E.prototype.digest=function(){this.finalize();var A=this.h0,j=this.h1,D=this.h2,z=this.h3,F=this.h4,R=this.h5,L=this.h6,O=this.h7,H=[A>>>24&255,A>>>16&255,A>>>8&255,A&255,j>>>24&255,j>>>16&255,j>>>8&255,j&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255];return this.is224||H.push(O>>>24&255,O>>>16&255,O>>>8&255,O&255),H},E.prototype.array=E.prototype.digest,E.prototype.arrayBuffer=function(){this.finalize();var A=new ArrayBuffer(this.is224?28:32),j=new DataView(A);return j.setUint32(0,this.h0),j.setUint32(4,this.h1),j.setUint32(8,this.h2),j.setUint32(12,this.h3),j.setUint32(16,this.h4),j.setUint32(20,this.h5),j.setUint32(24,this.h6),this.is224||j.setUint32(28,this.h7),A};function T(A,j,D){var z,F=typeof A;if(F==="string"){var R=[],L=A.length,O=0,H;for(z=0;z<L;++z)H=A.charCodeAt(z),H<128?R[O++]=H:H<2048?(R[O++]=192|H>>>6,R[O++]=128|H&63):H<55296||H>=57344?(R[O++]=224|H>>>12,R[O++]=128|H>>>6&63,R[O++]=128|H&63):(H=65536+((H&1023)<<10|A.charCodeAt(++z)&1023),R[O++]=240|H>>>18,R[O++]=128|H>>>12&63,R[O++]=128|H>>>6&63,R[O++]=128|H&63);A=R}else if(F==="object"){if(A===null)throw new Error(e);if(o&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!o||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);A.length>64&&(A=new E(j,!0).update(A).array());var P=[],I=[];for(z=0;z<64;++z){var U=A[z]||0;P[z]=92^U,I[z]=54^U}E.call(this,j,D),this.update(I),this.oKeyPad=P,this.inner=!0,this.sharedMemory=D}T.prototype=new E,T.prototype.finalize=function(){if(E.prototype.finalize.call(this),this.inner){this.inner=!1;var A=this.array();E.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(A),E.prototype.finalize.call(this)}};var _=b();_.sha256=_,_.sha224=b(!0),_.sha256.hmac=w(),_.sha224.hmac=w(!0),i?t.exports=_:(r.sha256=_.sha256,r.sha224=_.sha224)})()})(zT)),zT.exports}var sbe=rbe();function abe(t,e,n){const r=`${t}:${e}`,a=sbe.sha256(r).slice(0,8);return parseInt(a,16)%n}const ibe={upload_source_modal_v2:{buckets:100}},wa=()=>{var E,T,_,A,j,D,z,F,R,L,O,H;const{token:t,setToken:e,completedSignup:n,setCompletedSignup:r,setAuthStep:s}=kr(),{useRerenderListener:a,sendMessage:i,authenticatedFetch:o,closeModal:l,updateOptions:u}=ut(),{options:d}=a(["auth","auth_state"]);console.log("sendMessage",i);const[f,m]=y.useState(!1),[g,x]=y.useState(!1),[b,C]=y.useState(null),S=()=>{i({type:"CALL_EXTENSION_FUNC",payload:{func:"updateSettings",payload:{auth:null}}})},w=y.useMemo(()=>Object.fromEntries(Object.entries(ibe).map(([P,I])=>{var U;return[P,abe((U=d==null?void 0:d.auth)==null?void 0:U.user.id,P,I.buckets)]})),[(E=d==null?void 0:d.auth)==null?void 0:E.user]);return{authUser:(T=d==null?void 0:d.auth)==null?void 0:T.user,planType:((j=(A=(_=d==null?void 0:d.auth)==null?void 0:_.user)==null?void 0:A.app_metadata)==null?void 0:j.plan_type)||"none",planEnd:((F=(z=(D=d==null?void 0:d.auth)==null?void 0:D.user)==null?void 0:z.app_metadata)==null?void 0:F.plan_end)??null,token:(R=d==null?void 0:d.auth)==null?void 0:R.access_token,hasUsedTrial:((H=(O=(L=d==null?void 0:d.auth)==null?void 0:L.user)==null?void 0:O.app_metadata)==null?void 0:H.used_trial)??!1,handleLogout:S,abBucket:w}},tJ=y.createContext(null),Fr=()=>{const t=y.useContext(tJ);if(!t)throw new Error("useNotes must be used within an NotesProvider");return t},obe=({children:t})=>{const{settings:e,authenticatedClient:n,getOptions:r,updateOptions:s,authenticatedFetch:a}=ut(),{planType:i}=wa(),{visibleCourseIds:o}=zr(),[l,u]=y.useState(()=>{const at=r();return at!=null&&at.notes_last_active_course?at.notes_last_active_course:o.length>0?o[0]:null}),[d,f]=y.useState("notes"),[m,g]=y.useState([]),[x,b]=y.useState(""),[C,S]=y.useState([]),[w,E]=y.useState({}),[T,_]=y.useState(null),[A,j]=y.useState(!1),[D,z]=y.useState(!1),[F,R]=y.useState(null),[L,O]=y.useState(!1),[H,P]=y.useState(0),[I,U]=y.useState(0),[W,Y]=y.useState(!0),[B,Z]=y.useState(!1),[le,G]=y.useState(!1),K=y.useRef(null),te=y.useRef(null),ie=y.useRef(null),de=y.useRef([]),fe=y.useRef(600),se=y.useRef({}),ce=y.useRef({}),[ue,oe]=y.useState(null),Ne=y.useRef(!1),ve=async()=>{if(i!=="free"&&i!=="style")return;const at=await a(`${Jr}/notes/check-storage-usage`,{}),{message:Tt,error:wt}=await at.json();if(wt){console.error("Error checking note count:",wt);return}const{current_usage_bytes:cn,max_limit_bytes:$t}=Tt;U(cn||0),P($t||0)},He=async(at,Tt)=>{const wt=ebe.note_counts,$t=r("local")[wt]??{},hn=$t[at]||0;Tt==="insert"?$t[at]=hn+1:Tt==="delete"&&($t[at]=hn-1),s({[wt]:$t},"local")};y.useEffect(()=>{ve()},[]);const nt=async(at=!1,Tt=6)=>{var jn;const wt=await n();if(!wt){console.error("Error creating auth client:");return}if(!l||!at&&w[l])return;const cn=((jn=w[l])==null?void 0:jn.length)||0;let $t=wt.from("notes").select("id, title, modified_at");l!=="all"&&($t=$t.eq("course_id",l));const{data:hn,error:Kn}=await $t.order("modified_at",{ascending:!1}).range(cn,cn+Tt-1);if(Kn){console.error("Error fetching notes metadata:",Kn);return}at&&w[l]?E(Hn=>({...Hn,[l]:[...Hn[l],...hn||[]]})):E(Hn=>({...Hn,[l]:hn}))},Me=async()=>{if(!T)return;if(se.current[T]&&ue){ue.setContents(se.current[T]);return}const at=await n();if(!at){console.error("Error creating auth client:");return}const{data:Tt,error:wt}=await at.from("notes").select("content").eq("id",T);if(wt)return console.error("Error fetching note content:",wt),null;Tt&&(ue==null||ue.setContents(Tt[0].content),se.current[T]=new px(Tt[0].content))},$e=async at=>{if(!at)return;if(ce.current[at])return ce.current[at];const Tt=await n();if(!Tt){console.error("Error creating auth client:");return}const{data:wt,error:cn}=await Tt.from("notes").select("smart_note").eq("id",at);if(cn){console.error("Error fetching smart note:",cn);return}return ce.current[at]=wt[0].smart_note,wt[0].smart_note},Le=async(at=!1)=>{if(!l||!W)return;const Tt=await a(`${Jr}/notes/create-note`,{method:"POST",body:{course_id:l}}),{message:wt,error:cn}=await Tt.json();if(cn)return console.error("Error creating note"),null;await He(l,"insert"),console.log("Created note:",wt),E($t=>({...$t,[l]:[...$t[l]||[],wt]})),Ae((wt==null?void 0:wt.id)??null),at&&G(!0)},ae=at=>{Ne.current=!1,f(at)},pe=y.useRef(null),_e=async at=>{const Tt=await n();if(!Tt){console.error("Error creating auth client:");return}const{error:wt}=await Tt.from("notes").update(at).eq("id",T);if(wt){console.error("Error updating note title:",wt);return}},Ue=at=>{console.log("handleMetadataChange",at),l&&T&&(pe.current&&clearTimeout(pe.current),pe.current=setTimeout(()=>{_e(at)},3e3),E(Tt=>({...Tt,[l]:Tt[l].map(wt=>wt.id===T?{...wt,...at}:wt)})))},Je=async()=>{if(T&&l)try{if(!(await a(`${Jr}/notes/${T}`,{method:"DELETE"})).ok){console.error("Error deleting note");return}await He(l,"delete"),E(Tt=>({...Tt,[l]:Tt[l].filter(wt=>wt.id!==T)})),_(null),j(!1)}catch(at){console.error("Error deleting note:",at)}},qe=async at=>{if(at&&l)try{if(!(await a(`${Jr}/notes/${at}`,{method:"DELETE"})).ok){console.error("Error deleting note");return}await He(l,"delete"),E(wt=>({...wt,[l]:wt[l].filter(cn=>cn.id!==at)})),T===at&&(_(null),j(!1))}catch(Tt){console.error("Error deleting note:",Tt)}};y.useEffect(()=>{_(null),nt()},[l]);const xe=at=>{g(Tt=>[...Tt,...at])},Ae=at=>{Ne.current=!1,_(at),S([]),g([]),b(""),f("notes")},vt={audioContextRef:K,analyserRef:te,animationFrameRef:ie,waveformHistoryRef:de,maxHistoryLength:fe,transcript:m,setTranscript:g,liveTranscript:x,setLiveTranscript:b,activeCourse:l,setActiveCourse:u,activeTab:d,setActiveTab:f,quillEditor:ue,setQuillEditor:oe,updateTranscript:xe,messages:C,setMessages:S,handleAsk:async at=>{},content:se,switchNote:Ae,notesMetadata:w,setNotesMetadata:E,noteId:T,setNoteId:_,handleNewNote:Le,handleMetadataChange:Ue,sidebarOpen:A,setSidebarOpen:j,handleDeleteNote:Je,deleteNoteById:qe,isRecording:D,setIsRecording:z,contentInit:Ne,switchTab:ae,smartNote:F,setSmartNote:R,getSmartNoteContent:$e,settings:e,getNoteContent:Me,isSaving:L,setIsSaving:O,isWidget:!1,canCreateNote:W,checkNoteCount:ve,transcriptTabOpen:B,setTranscriptTabOpen:Z,getNotesMetadata:nt,showRecordingDialog:le,setShowRecordingDialog:G,currentUsageBytes:I,maxLimitBytes:H};return c.jsx(tJ.Provider,{value:vt,children:t})};function _z(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ub(...t){return e=>{let n=!1;const r=t.map(s=>{const a=_z(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():_z(t[s],null)}}}}function Bt(...t){return y.useCallback(Ub(...t),t)}function Md(t){const e=lbe(t),n=y.forwardRef((r,s)=>{const{children:a,...i}=r,o=y.Children.toArray(a),l=o.find(ube);if(l){const u=l.props.children,d=o.map(f=>f===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...i,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return c.jsx(e,{...i,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var sk=Md("Slot");function lbe(t){const e=y.forwardRef((n,r)=>{const{children:s,...a}=n;if(y.isValidElement(s)){const i=hbe(s),o=dbe(a,s.props);return s.type!==y.Fragment&&(o.ref=r?Ub(r,i):i),y.cloneElement(s,o)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nJ=Symbol("radix.slottable");function S8(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=nJ,e}var cbe=S8("Slottable");function ube(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nJ}function dbe(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...o)=>{const l=a(...o);return s(...o),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function hbe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fbe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nt=fbe.reduce((t,e)=>{const n=Md(`Primitive.${e}`),r=y.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function k8(t,e){t&&tu.flushSync(()=>t.dispatchEvent(e))}var mbe="Separator",Tz="horizontal",pbe=["horizontal","vertical"],rJ=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=Tz,...s}=t,a=gbe(r)?r:Tz,o=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return c.jsx(Nt.div,{"data-orientation":a,...o,...s,ref:e})});rJ.displayName=mbe;function gbe(t){return pbe.includes(t)}var vbe=rJ;function sJ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=sJ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Qp(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=sJ(t))&&(r&&(r+=" "),r+=e);return r}const E8="-",ybe=t=>{const e=bbe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const o=i.split(E8);return o[0]===""&&o.length!==1&&o.shift(),aJ(o,e)||xbe(i)},getConflictingClassGroupIds:(i,o)=>{const l=n[i]||[];return o&&r[i]?[...l,...r[i]]:l}}},aJ=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?aJ(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(E8);return(i=e.validators.find(({validator:o})=>o(a)))==null?void 0:i.classGroupId},Az=/^\[(.+)\]$/,xbe=t=>{if(Az.test(t)){const e=Az.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},bbe=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)hj(n[s],r,s,e);return r},hj=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:Nz(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(wbe(s)){hj(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,i])=>{hj(i,Nz(e,a),n,r)})})},Nz=(t,e)=>{let n=t;return e.split(E8).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},wbe=t=>t.isThemeGetter,Cbe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,i)=>{n.set(a,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return s(a,i),i},set(a,i){n.has(a)?n.set(a,i):s(a,i)}}},fj="!",mj=":",Sbe=mj.length,kbe=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let i=0,o=0,l=0,u;for(let x=0;x<s.length;x++){let b=s[x];if(i===0&&o===0){if(b===mj){a.push(s.slice(l,x)),l=x+Sbe;continue}if(b==="/"){u=x;continue}}b==="["?i++:b==="]"?i--:b==="("?o++:b===")"&&o--}const d=a.length===0?s:s.substring(l),f=Ebe(d),m=f!==d,g=u&&u>l?u-l:void 0;return{modifiers:a,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:g}};if(e){const s=e+mj,a=r;r=i=>i.startsWith(s)?a(i.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},Ebe=t=>t.endsWith(fj)?t.substring(0,t.length-1):t.startsWith(fj)?t.substring(1):t,_be=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let a=[];return r.forEach(i=>{i[0]==="["||e[i]?(s.push(...a.sort(),i),a=[]):a.push(i)}),s.push(...a.sort()),s}},Tbe=t=>({cache:Cbe(t.cacheSize),parseClassName:kbe(t),sortModifiers:_be(t),...ybe(t)}),Abe=/\s+/,Nbe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,i=[],o=t.trim().split(Abe);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:b}=n(d);if(f){l=d+(l.length>0?" "+l:l);continue}let C=!!b,S=r(C?x.substring(0,b):x);if(!S){if(!C){l=d+(l.length>0?" "+l:l);continue}if(S=r(x),!S){l=d+(l.length>0?" "+l:l);continue}C=!1}const w=a(m).join(":"),E=g?w+fj:w,T=E+S;if(i.includes(T))continue;i.push(T);const _=s(S,C);for(let A=0;A<_.length;++A){const j=_[A];i.push(E+j)}l=d+(l.length>0?" "+l:l)}return l};function jbe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=iJ(e))&&(r&&(r+=" "),r+=n);return r}const iJ=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=iJ(t[r]))&&(n&&(n+=" "),n+=e);return n};function Dbe(t,...e){let n,r,s,a=i;function i(l){const u=e.reduce((d,f)=>f(d),t());return n=Tbe(u),r=n.cache.get,s=n.cache.set,a=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=Nbe(l,n);return s(l,d),d}return function(){return a(jbe.apply(null,arguments))}}const aa=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},oJ=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lJ=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Rbe=/^\d+\/\d+$/,Mbe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ibe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Obe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Pbe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fbe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_p=t=>Rbe.test(t),In=t=>!!t&&!Number.isNaN(Number(t)),jh=t=>!!t&&Number.isInteger(Number(t)),$T=t=>t.endsWith("%")&&In(t.slice(0,-1)),td=t=>Mbe.test(t),Bbe=()=>!0,Lbe=t=>Ibe.test(t)&&!Obe.test(t),cJ=()=>!1,zbe=t=>Pbe.test(t),$be=t=>Fbe.test(t),Ube=t=>!Mt(t)&&!It(t),Hbe=t=>mv(t,hJ,cJ),Mt=t=>oJ.test(t),hm=t=>mv(t,fJ,Lbe),UT=t=>mv(t,Kbe,In),jz=t=>mv(t,uJ,cJ),Vbe=t=>mv(t,dJ,$be),aC=t=>mv(t,mJ,zbe),It=t=>lJ.test(t),Yy=t=>pv(t,fJ),qbe=t=>pv(t,Ybe),Dz=t=>pv(t,uJ),Gbe=t=>pv(t,hJ),Wbe=t=>pv(t,dJ),iC=t=>pv(t,mJ,!0),mv=(t,e,n)=>{const r=oJ.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},pv=(t,e,n=!1)=>{const r=lJ.exec(t);return r?r[1]?e(r[1]):n:!1},uJ=t=>t==="position"||t==="percentage",dJ=t=>t==="image"||t==="url",hJ=t=>t==="length"||t==="size"||t==="bg-size",fJ=t=>t==="length",Kbe=t=>t==="number",Ybe=t=>t==="family-name",mJ=t=>t==="shadow",Xbe=()=>{const t=aa("color"),e=aa("font"),n=aa("text"),r=aa("font-weight"),s=aa("tracking"),a=aa("leading"),i=aa("breakpoint"),o=aa("container"),l=aa("spacing"),u=aa("radius"),d=aa("shadow"),f=aa("inset-shadow"),m=aa("text-shadow"),g=aa("drop-shadow"),x=aa("blur"),b=aa("perspective"),C=aa("aspect"),S=aa("ease"),w=aa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...T(),It,Mt],A=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],D=()=>[It,Mt,l],z=()=>[_p,"full","auto",...D()],F=()=>[jh,"none","subgrid",It,Mt],R=()=>["auto",{span:["full",jh,It,Mt]},jh,It,Mt],L=()=>[jh,"auto",It,Mt],O=()=>["auto","min","max","fr",It,Mt],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],P=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...D()],U=()=>[_p,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],W=()=>[t,It,Mt],Y=()=>[...T(),Dz,jz,{position:[It,Mt]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",Gbe,Hbe,{size:[It,Mt]}],le=()=>[$T,Yy,hm],G=()=>["","none","full",u,It,Mt],K=()=>["",In,Yy,hm],te=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[In,$T,Dz,jz],fe=()=>["","none",x,It,Mt],se=()=>["none",In,It,Mt],ce=()=>["none",In,It,Mt],ue=()=>[In,It,Mt],oe=()=>[_p,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[td],breakpoint:[td],color:[Bbe],container:[td],"drop-shadow":[td],ease:["in","out","in-out"],font:[Ube],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[td],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[td],shadow:[td],spacing:["px",In],text:[td],"text-shadow":[td],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_p,Mt,It,C]}],container:["container"],columns:[{columns:[In,Mt,It,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[jh,"auto",It,Mt]}],basis:[{basis:[_p,"full","auto",o,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[In,_p,"auto","initial","none",Mt]}],grow:[{grow:["",In,It,Mt]}],shrink:[{shrink:["",In,It,Mt]}],order:[{order:[jh,"first","last","none",It,Mt]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...P(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...P(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[o,"screen",...U()]}],"min-w":[{"min-w":[o,"screen","none",...U()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",n,Yy,hm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,It,UT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",$T,Mt]}],"font-family":[{font:[qbe,Mt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,It,Mt]}],"line-clamp":[{"line-clamp":[In,"none",It,UT]}],leading:[{leading:[a,...D()]}],"list-image":[{"list-image":["none",It,Mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",It,Mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[In,"from-font","auto",It,hm]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[In,"auto",It,Mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",It,Mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",It,Mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},jh,It,Mt],radial:["",It,Mt],conic:[jh,It,Mt]},Wbe,Vbe]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:K()}],"border-w-x":[{"border-x":K()}],"border-w-y":[{"border-y":K()}],"border-w-s":[{"border-s":K()}],"border-w-e":[{"border-e":K()}],"border-w-t":[{"border-t":K()}],"border-w-r":[{"border-r":K()}],"border-w-b":[{"border-b":K()}],"border-w-l":[{"border-l":K()}],"divide-x":[{"divide-x":K()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":K()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[In,It,Mt]}],"outline-w":[{outline:["",In,Yy,hm]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",d,iC,aC]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",f,iC,aC]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[In,hm]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":K()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",m,iC,aC]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[In,It,Mt]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[In]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[It,Mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[In]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",It,Mt]}],filter:[{filter:["","none",It,Mt]}],blur:[{blur:fe()}],brightness:[{brightness:[In,It,Mt]}],contrast:[{contrast:[In,It,Mt]}],"drop-shadow":[{"drop-shadow":["","none",g,iC,aC]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",In,It,Mt]}],"hue-rotate":[{"hue-rotate":[In,It,Mt]}],invert:[{invert:["",In,It,Mt]}],saturate:[{saturate:[In,It,Mt]}],sepia:[{sepia:["",In,It,Mt]}],"backdrop-filter":[{"backdrop-filter":["","none",It,Mt]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[In,It,Mt]}],"backdrop-contrast":[{"backdrop-contrast":[In,It,Mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",In,It,Mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[In,It,Mt]}],"backdrop-invert":[{"backdrop-invert":["",In,It,Mt]}],"backdrop-opacity":[{"backdrop-opacity":[In,It,Mt]}],"backdrop-saturate":[{"backdrop-saturate":[In,It,Mt]}],"backdrop-sepia":[{"backdrop-sepia":["",In,It,Mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",It,Mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[In,"initial",It,Mt]}],ease:[{ease:["linear","initial",S,It,Mt]}],delay:[{delay:[In,It,Mt]}],animate:[{animate:["none",w,It,Mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,It,Mt]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:ce()}],"scale-x":[{"scale-x":ce()}],"scale-y":[{"scale-y":ce()}],"scale-z":[{"scale-z":ce()}],"scale-3d":["scale-3d"],skew:[{skew:ue()}],"skew-x":[{"skew-x":ue()}],"skew-y":[{"skew-y":ue()}],transform:[{transform:[It,Mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:oe()}],"translate-x":[{"translate-x":oe()}],"translate-y":[{"translate-y":oe()}],"translate-z":[{"translate-z":oe()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",It,Mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",It,Mt]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[In,Yy,hm,UT]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Jbe=Dbe(Xbe),pJ=6048e5,Qbe=864e5,gJ=6e4,Rz=Symbol.for("constructDateFrom");function mc(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Rz in t?t[Rz](e):t instanceof Date?new t.constructor(e):new Date(e)}function Qr(t,e){return mc(e||t,t)}function ir(t,e,n){const r=Qr(t,n==null?void 0:n.in);return isNaN(e)?mc(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function s4(t,e,n){const r=Qr(t,n==null?void 0:n.in);if(isNaN(e))return mc(t,NaN);if(!e)return r;const s=r.getDate(),a=mc(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let Zbe={};function ak(){return Zbe}function gf(t,e){var o,l,u,d;const n=ak(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Qr(t,e==null?void 0:e.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function a4(t,e){return gf(t,{...e,weekStartsOn:1})}function vJ(t,e){const n=Qr(t,e==null?void 0:e.in),r=n.getFullYear(),s=mc(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=a4(s),i=mc(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=a4(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Mz(t){const e=Qr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ik(t,...e){const n=mc.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function ou(t,e){const n=Qr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function _8(t,e,n){const[r,s]=ik(n==null?void 0:n.in,t,e),a=ou(r),i=ou(s),o=+a-Mz(a),l=+i-Mz(i);return Math.round((o-l)/Qbe)}function ewe(t,e){const n=vJ(t,e),r=mc(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),a4(r)}function If(t,e,n){const r=Qr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*gJ),r}function i4(t,e,n){return ir(t,e*7,n)}function xd(t,e,n){const[r,s]=ik(n==null?void 0:n.in,t,e);return+ou(r)==+ou(s)}function twe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nwe(t){return!(!twe(t)&&typeof t!="number"||isNaN(+Qr(t)))}function rwe(t,e,n){const[r,s]=ik(n==null?void 0:n.in,t,e),a=Iz(r,s),i=Math.abs(_8(r,s));r.setDate(r.getDate()-a*i);const o=+(Iz(r,s)===-a),l=a*(i-o);return l===0?0:l}function Iz(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function swe(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function awe(t,e){return+Qr(t)-+Qr(e)}function iwe(t,e,n){const r=awe(t,e)/gJ;return swe(n==null?void 0:n.roundingMethod)(r)}function HT(t,e){const n=Qr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function o4(t,e){const n=Qr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function owe(t,e){const n=Qr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const lwe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cwe=(t,e,n)=>{let r;const s=lwe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function VT(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const uwe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dwe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hwe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fwe={date:VT({formats:uwe,defaultWidth:"full"}),time:VT({formats:dwe,defaultWidth:"full"}),dateTime:VT({formats:hwe,defaultWidth:"full"})},mwe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pwe=(t,e,n,r)=>mwe[t];function Xy(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[i]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const gwe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vwe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ywe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xwe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bwe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wwe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cwe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Swe={ordinalNumber:Cwe,era:Xy({values:gwe,defaultWidth:"wide"}),quarter:Xy({values:vwe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xy({values:ywe,defaultWidth:"wide"}),day:Xy({values:xwe,defaultWidth:"wide"}),dayPeriod:Xy({values:bwe,defaultWidth:"wide",formattingValues:wwe,defaultFormattingWidth:"wide"})};function Jy(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?Ewe(o,f=>f.test(i)):kwe(o,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function kwe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Ewe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function _we(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let i=t.valueCallback?t.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const o=e.slice(s.length);return{value:i,rest:o}}}const Twe=/^(\d+)(th|st|nd|rd)?/i,Awe=/\d+/i,Nwe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jwe={any:[/^b/i,/^(a|c)/i]},Dwe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rwe={any:[/1/i,/2/i,/3/i,/4/i]},Mwe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Iwe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Owe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pwe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fwe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lwe={ordinalNumber:_we({matchPattern:Twe,parsePattern:Awe,valueCallback:t=>parseInt(t,10)}),era:Jy({matchPatterns:Nwe,defaultMatchWidth:"wide",parsePatterns:jwe,defaultParseWidth:"any"}),quarter:Jy({matchPatterns:Dwe,defaultMatchWidth:"wide",parsePatterns:Rwe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jy({matchPatterns:Mwe,defaultMatchWidth:"wide",parsePatterns:Iwe,defaultParseWidth:"any"}),day:Jy({matchPatterns:Owe,defaultMatchWidth:"wide",parsePatterns:Pwe,defaultParseWidth:"any"}),dayPeriod:Jy({matchPatterns:Fwe,defaultMatchWidth:"any",parsePatterns:Bwe,defaultParseWidth:"any"})},zwe={code:"en-US",formatDistance:cwe,formatLong:fwe,formatRelative:pwe,localize:Swe,match:Lwe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $we(t,e){const n=Qr(t,e==null?void 0:e.in);return _8(n,owe(n))+1}function Uwe(t,e){const n=Qr(t,e==null?void 0:e.in),r=+a4(n)-+ewe(n);return Math.round(r/pJ)+1}function yJ(t,e){var d,f,m,g;const n=Qr(t,e==null?void 0:e.in),r=n.getFullYear(),s=ak(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=mc((e==null?void 0:e.in)||t,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const o=gf(i,e),l=mc((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=gf(l,e);return+n>=+o?r+1:+n>=+u?r:r-1}function Hwe(t,e){var o,l,u,d;const n=ak(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=yJ(t,e),a=mc((e==null?void 0:e.in)||t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),gf(a,e)}function Vwe(t,e){const n=Qr(t,e==null?void 0:e.in),r=+gf(n,e)-+Hwe(n,e);return Math.round(r/pJ)+1}function wr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Dh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return wr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):wr(n+1,2)},d(t,e){return wr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return wr(t.getHours()%12||12,e.length)},H(t,e){return wr(t.getHours(),e.length)},m(t,e){return wr(t.getMinutes(),e.length)},s(t,e){return wr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return wr(s,e.length)}},Tp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Oz={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Dh.y(t,e)},Y:function(t,e,n,r){const s=yJ(t,r),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return wr(i,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):wr(a,e.length)},R:function(t,e){const n=vJ(t);return wr(n,e.length)},u:function(t,e){const n=t.getFullYear();return wr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Dh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return wr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Vwe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):wr(s,e.length)},I:function(t,e,n){const r=Uwe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):wr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Dh.d(t,e)},D:function(t,e,n){const r=$we(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):wr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return wr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return wr(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return wr(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Tp.noon:r===0?s=Tp.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Tp.evening:r>=12?s=Tp.afternoon:r>=4?s=Tp.morning:s=Tp.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Dh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Dh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):wr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):wr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Dh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Dh.s(t,e)},S:function(t,e){return Dh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Fz(r);case"XXXX":case"XX":return km(r);case"XXXXX":case"XXX":default:return km(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Fz(r);case"xxxx":case"xx":return km(r);case"xxxxx":case"xxx":default:return km(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Pz(r,":");case"OOOO":default:return"GMT"+km(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Pz(r,":");case"zzzz":default:return"GMT"+km(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return wr(r,e.length)},T:function(t,e,n){return wr(+t,e.length)}};function Pz(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+wr(a,2)}function Fz(t,e){return t%60===0?(t>0?"-":"+")+wr(Math.abs(t)/60,2):km(t,e)}function km(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=wr(Math.trunc(r/60),2),a=wr(r%60,2);return n+s+e+a}const Bz=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},xJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},qwe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Bz(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Bz(r,e)).replace("{{time}}",xJ(s,e))},Gwe={p:xJ,P:qwe},Wwe=/^D+$/,Kwe=/^Y+$/,Ywe=["D","DD","YY","YYYY"];function Xwe(t){return Wwe.test(t)}function Jwe(t){return Kwe.test(t)}function Qwe(t,e,n){const r=Zwe(t,e,n);if(console.warn(r),Ywe.includes(t))throw new RangeError(r)}function Zwe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const e2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,t2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,n2e=/^'([^]*?)'?$/,r2e=/''/g,s2e=/[a-zA-Z]/;function Sr(t,e,n){var d,f,m,g;const r=ak(),s=r.locale??zwe,a=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=Qr(t,n==null?void 0:n.in);if(!nwe(o))throw new RangeError("Invalid time value");let l=e.match(t2e).map(x=>{const b=x[0];if(b==="p"||b==="P"){const C=Gwe[b];return C(x,s.formatLong)}return x}).join("").match(e2e).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:a2e(x)};if(Oz[b])return{isToken:!0,value:x};if(b.match(s2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const b=x.value;(Jwe(b)||Xwe(b))&&Qwe(b,e,String(t));const C=Oz[b[0]];return C(o,b,s.localize,u)}).join("")}function a2e(t){const e=t.match(n2e);return e?e[1].replace(r2e,"'"):t}function qT(t,e){return+Qr(t)>+Qr(e)}function pS(t,e){return+Qr(t)<+Qr(e)}function Lz(t,e,n){const[r,s]=ik(n==null?void 0:n.in,t,e);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function i2e(t,e,n){const r=+Qr(t,n==null?void 0:n.in),[s,a]=[+Qr(e.start,n==null?void 0:n.in),+Qr(e.end,n==null?void 0:n.in)].sort((i,o)=>i-o);return r>=s&&r<=a}function gS(t,e,n){return ir(t,-e,n)}function o2e(t,e,n){return s4(t,-1,n)}function ge(...t){return Jbe(Qp(t))}const Eu=async(t,e={})=>{try{const n={event:t,api_key:"phc_2jsLUdLP7Qyf8JMd2Tp6NOIgGGXin4akpHqXiziVsBz",properties:{...e}};fetch("https://us.i.posthog.com/i/v0/e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0}).catch(()=>{})}catch{}},T8=t=>{const n=new Date().getFullYear()-t;return n<13?"13":n<14?"14":n<15?"15":"16_plus"},ic=(t,e)=>{try{return Sr(t,e)}catch{return null}},l2e=t=>{try{const e=typeof t=="string"?new Date(t):t,r=e.getMinutes()===0?"haaa":"h:mmaaa";return Sr(e,r)}catch{return null}},zz=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$z=Qp,Oi=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $z(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,i=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const m=zz(d)||zz(f);return s[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:m,...g}=d;return Object.entries(g).every(x=>{let[b,C]=x;return Array.isArray(C)?C.includes({...a,...o}[b]):{...a,...o}[b]===C})?[...u,f,m]:u},[]);return $z(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},c2e=Oi("shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",{variants:{variant:{default:"bg-border",theme:"bg-theme-border"}}});function Ns({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return c.jsx(vbe,{"data-slot":"separator",decorative:n,orientation:e,className:ge(c2e({variant:"theme",className:t})),...r})}const A8=y.createContext({});function N8(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const j8=typeof window<"u",bJ=j8?y.useLayoutEffect:y.useEffect,ok=y.createContext(null);function D8(t,e){t.indexOf(e)===-1&&t.push(e)}function R8(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Id=(t,e,n)=>n>e?e:n<t?t:n;let M8=()=>{};const Od={},wJ=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function CJ(t){return typeof t=="object"&&t!==null}const SJ=t=>/^0[^.\s]+$/u.test(t);function I8(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cl=t=>t,u2e=(t,e)=>n=>e(t(n)),Hb=(...t)=>t.reduce(u2e),y1=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class O8{constructor(){this.subscriptions=[]}add(e){return D8(this.subscriptions,e),()=>R8(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lu=t=>t*1e3,cu=t=>t/1e3;function kJ(t,e){return e?t*(1e3/e):0}const EJ=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,d2e=1e-7,h2e=12;function f2e(t,e,n,r,s){let a,i,o=0;do i=e+(n-e)/2,a=EJ(i,r,s)-t,a>0?n=i:e=i;while(Math.abs(a)>d2e&&++o<h2e);return i}function Vb(t,e,n,r){if(t===e&&n===r)return Cl;const s=a=>f2e(a,0,1,t,n);return a=>a===0||a===1?a:EJ(s(a),e,r)}const _J=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,TJ=t=>e=>1-t(1-e),AJ=Vb(.33,1.53,.69,.99),P8=TJ(AJ),NJ=_J(P8),jJ=t=>(t*=2)<1?.5*P8(t):.5*(2-Math.pow(2,-10*(t-1))),F8=t=>1-Math.sin(Math.acos(t)),DJ=TJ(F8),RJ=_J(F8),m2e=Vb(.42,0,1,1),p2e=Vb(0,0,.58,1),MJ=Vb(.42,0,.58,1),g2e=t=>Array.isArray(t)&&typeof t[0]!="number",IJ=t=>Array.isArray(t)&&typeof t[0]=="number",v2e={linear:Cl,easeIn:m2e,easeInOut:MJ,easeOut:p2e,circIn:F8,circInOut:RJ,circOut:DJ,backIn:P8,backInOut:NJ,backOut:AJ,anticipate:jJ},y2e=t=>typeof t=="string",Uz=t=>{if(IJ(t)){M8(t.length===4);const[e,n,r,s]=t;return Vb(e,n,r,s)}else if(y2e(t))return v2e[t];return t},oC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function x2e(t,e){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,f=!1,m=!1)=>{const x=m&&s?n:r;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const b2e=40;function OJ(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=oC.reduce((E,T)=>(E[T]=x2e(a),E),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:f,preRender:m,render:g,postRender:x}=i,b=()=>{const E=Od.useManualTiming?s.timestamp:performance.now();n=!1,Od.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,b2e),1)),s.timestamp=E,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),f.process(s),m.process(s),g.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(b))},C=()=>{n=!0,r=!0,s.isProcessing||t(b)};return{schedule:oC.reduce((E,T)=>{const _=i[T];return E[T]=(A,j=!1,D=!1)=>(n||C(),_.schedule(A,j,D)),E},{}),cancel:E=>{for(let T=0;T<oC.length;T++)i[oC[T]].cancel(E)},state:s,steps:i}}const{schedule:is,cancel:vf,state:Ka,steps:GT}=OJ(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cl,!0);let vS;function w2e(){vS=void 0}const no={now:()=>(vS===void 0&&no.set(Ka.isProcessing||Od.useManualTiming?Ka.timestamp:performance.now()),vS),set:t=>{vS=t,queueMicrotask(w2e)}},PJ=t=>e=>typeof e=="string"&&e.startsWith(t),B8=PJ("--"),C2e=PJ("var(--"),L8=t=>C2e(t)?S2e.test(t.split("/*")[0].trim()):!1,S2e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},x1={...gv,transform:t=>Id(0,1,t)},lC={...gv,default:1},Rx=t=>Math.round(t*1e5)/1e5,z8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function k2e(t){return t==null}const E2e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$8=(t,e)=>n=>!!(typeof n=="string"&&E2e.test(n)&&n.startsWith(t)||e&&!k2e(n)&&Object.prototype.hasOwnProperty.call(n,e)),FJ=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,o]=r.match(z8);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},_2e=t=>Id(0,255,t),WT={...gv,transform:t=>Math.round(_2e(t))},Rm={test:$8("rgb","red"),parse:FJ("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+WT.transform(t)+", "+WT.transform(e)+", "+WT.transform(n)+", "+Rx(x1.transform(r))+")"};function T2e(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const pj={test:$8("#"),parse:T2e,transform:Rm.transform},qb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Lh=qb("deg"),uu=qb("%"),on=qb("px"),A2e=qb("vh"),N2e=qb("vw"),Hz={...uu,parse:t=>uu.parse(t)/100,transform:t=>uu.transform(t*100)},Zp={test:$8("hsl","hue"),parse:FJ("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+uu.transform(Rx(e))+", "+uu.transform(Rx(n))+", "+Rx(x1.transform(r))+")"},Ys={test:t=>Rm.test(t)||pj.test(t)||Zp.test(t),parse:t=>Rm.test(t)?Rm.parse(t):Zp.test(t)?Zp.parse(t):pj.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Rm.transform(t):Zp.transform(t),getAnimatableNone:t=>{const e=Ys.parse(t);return e.alpha=0,Ys.transform(e)}},j2e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function D2e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(z8))==null?void 0:e.length)||0)+(((n=t.match(j2e))==null?void 0:n.length)||0)>0}const BJ="number",LJ="color",R2e="var",M2e="var(",Vz="${}",I2e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function b1(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const o=e.replace(I2e,l=>(Ys.test(l)?(r.color.push(a),s.push(LJ),n.push(Ys.parse(l))):l.startsWith(M2e)?(r.var.push(a),s.push(R2e),n.push(l)):(r.number.push(a),s.push(BJ),n.push(parseFloat(l))),++a,Vz)).split(Vz);return{values:n,split:o,indexes:r,types:s}}function zJ(t){return b1(t).values}function $J(t){const{split:e,types:n}=b1(t),r=e.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=e[i],s[i]!==void 0){const o=n[i];o===BJ?a+=Rx(s[i]):o===LJ?a+=Ys.transform(s[i]):a+=s[i]}return a}}const O2e=t=>typeof t=="number"?0:Ys.test(t)?Ys.getAnimatableNone(t):t;function P2e(t){const e=zJ(t);return $J(t)(e.map(O2e))}const yf={test:D2e,parse:zJ,createTransformer:$J,getAnimatableNone:P2e};function KT(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function F2e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,i=0;if(!e)s=a=i=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;s=KT(l,o,t+1/3),a=KT(l,o,t),i=KT(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function l4(t,e){return n=>n>0?e:t}const ps=(t,e,n)=>t+(e-t)*n,YT=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},B2e=[pj,Rm,Zp],L2e=t=>B2e.find(e=>e.test(t));function qz(t){const e=L2e(t);if(!e)return!1;let n=e.parse(t);return e===Zp&&(n=F2e(n)),n}const Gz=(t,e)=>{const n=qz(t),r=qz(e);if(!n||!r)return l4(t,e);const s={...n};return a=>(s.red=YT(n.red,r.red,a),s.green=YT(n.green,r.green,a),s.blue=YT(n.blue,r.blue,a),s.alpha=ps(n.alpha,r.alpha,a),Rm.transform(s))},gj=new Set(["none","hidden"]);function z2e(t,e){return gj.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function $2e(t,e){return n=>ps(t,e,n)}function U8(t){return typeof t=="number"?$2e:typeof t=="string"?L8(t)?l4:Ys.test(t)?Gz:V2e:Array.isArray(t)?UJ:typeof t=="object"?Ys.test(t)?Gz:U2e:l4}function UJ(t,e){const n=[...t],r=n.length,s=t.map((a,i)=>U8(a)(a,e[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function U2e(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=U8(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function H2e(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],i=t.indexes[a][r[a]],o=t.values[i]??0;n[s]=o,r[a]++}return n}const V2e=(t,e)=>{const n=yf.createTransformer(e),r=b1(t),s=b1(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?gj.has(t)&&!s.values.length||gj.has(e)&&!r.values.length?z2e(t,e):Hb(UJ(H2e(r,s),s.values),n):l4(t,e)};function HJ(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ps(t,e,n):U8(t)(t,e)}const q2e=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>is.update(e,n),stop:()=>vf(e),now:()=>Ka.isProcessing?Ka.timestamp:no.now()}},VJ=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},c4=2e4;function H8(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<c4;)e+=n,r=t.next(e);return e>=c4?1/0:e}function G2e(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(H8(r),c4);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:cu(s)}}const W2e=5;function qJ(t,e,n){const r=Math.max(e-W2e,0);return kJ(n-t(r),e-r)}const As={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},XT=.001;function K2e({duration:t=As.duration,bounce:e=As.bounce,velocity:n=As.velocity,mass:r=As.mass}){let s,a,i=1-e;i=Id(As.minDamping,As.maxDamping,i),t=Id(As.minDuration,As.maxDuration,cu(t)),i<1?(s=u=>{const d=u*i,f=d*t,m=d-n,g=vj(u,i),x=Math.exp(-f);return XT-m/g*x},a=u=>{const f=u*i*t,m=f*n+n,g=Math.pow(i,2)*Math.pow(u,2)*t,x=Math.exp(-f),b=vj(Math.pow(u,2),i);return(-s(u)+XT>0?-1:1)*((m-g)*x)/b}):(s=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-XT+d*f},a=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const o=5/t,l=X2e(s,a,o);if(t=lu(t),isNaN(l))return{stiffness:As.stiffness,damping:As.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:t}}}const Y2e=12;function X2e(t,e,n){let r=n;for(let s=1;s<Y2e;s++)r=r-t(r)/e(r);return r}function vj(t,e){return t*Math.sqrt(1-e*e)}const J2e=["duration","bounce"],Q2e=["stiffness","damping","mass"];function Wz(t,e){return e.some(n=>t[n]!==void 0)}function Z2e(t){let e={velocity:As.velocity,stiffness:As.stiffness,damping:As.damping,mass:As.mass,isResolvedFromDuration:!1,...t};if(!Wz(t,Q2e)&&Wz(t,J2e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Id(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:As.mass,stiffness:s,damping:a}}else{const n=K2e(t);e={...e,...n,mass:As.mass},e.isResolvedFromDuration=!0}return e}function u4(t=As.visualDuration,e=As.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:m,isResolvedFromDuration:g}=Z2e({...n,velocity:-cu(n.velocity||0)}),x=m||0,b=u/(2*Math.sqrt(l*d)),C=i-a,S=cu(Math.sqrt(l/d)),w=Math.abs(C)<5;r||(r=w?As.restSpeed.granular:As.restSpeed.default),s||(s=w?As.restDelta.granular:As.restDelta.default);let E;if(b<1){const _=vj(S,b);E=A=>{const j=Math.exp(-b*S*A);return i-j*((x+b*S*C)/_*Math.sin(_*A)+C*Math.cos(_*A))}}else if(b===1)E=_=>i-Math.exp(-S*_)*(C+(x+S*C)*_);else{const _=S*Math.sqrt(b*b-1);E=A=>{const j=Math.exp(-b*S*A),D=Math.min(_*A,300);return i-j*((x+b*S*C)*Math.sinh(D)+_*C*Math.cosh(D))/_}}const T={calculatedDuration:g&&f||null,next:_=>{const A=E(_);if(g)o.done=_>=f;else{let j=_===0?x:0;b<1&&(j=_===0?lu(x):qJ(E,_,A));const D=Math.abs(j)<=r,z=Math.abs(i-A)<=s;o.done=D&&z}return o.value=o.done?i:A,o},toString:()=>{const _=Math.min(H8(T),c4),A=VJ(j=>T.next(_*j).value,_,30);return _+"ms "+A},toTransition:()=>{}};return T}u4.applyToOptions=t=>{const e=G2e(t,100,u4);return t.ease=e.ease,t.duration=lu(e.duration),t.type="keyframes",t};function yj({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=t[0],m={done:!1,value:f},g=D=>o!==void 0&&D<o||l!==void 0&&D>l,x=D=>o===void 0?l:l===void 0||Math.abs(o-D)<Math.abs(l-D)?o:l;let b=n*e;const C=f+b,S=i===void 0?C:i(C);S!==C&&(b=S-f);const w=D=>-b*Math.exp(-D/r),E=D=>S+w(D),T=D=>{const z=w(D),F=E(D);m.done=Math.abs(z)<=u,m.value=m.done?S:F};let _,A;const j=D=>{g(m.value)&&(_=D,A=u4({keyframes:[m.value,x(m.value)],velocity:qJ(E,D,m.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:D=>{let z=!1;return!A&&_===void 0&&(z=!0,T(D),j(D)),_!==void 0&&D>=_?A.next(D-_):(!z&&T(D),m)}}}function eCe(t,e,n){const r=[],s=n||Od.mix||HJ,a=t.length-1;for(let i=0;i<a;i++){let o=s(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||Cl:e;o=Hb(l,o)}r.push(o)}return r}function tCe(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(M8(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=eCe(e,r,s),l=o.length,u=d=>{if(i&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const m=y1(t[f],t[f+1],d);return o[f](m)};return n?d=>u(Id(t[0],t[a-1],d)):u}function nCe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=y1(0,e,r);t.push(ps(n,1,s))}}function rCe(t){const e=[0];return nCe(e,t.length-1),e}function sCe(t,e){return t.map(n=>n*e)}function aCe(t,e){return t.map(()=>e||MJ).splice(0,t.length-1)}function Mx({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=g2e(r)?r.map(Uz):Uz(r),a={done:!1,value:e[0]},i=sCe(n&&n.length===e.length?n:rCe(e),t),o=tCe(i,e,{ease:Array.isArray(s)?s:aCe(e,s)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const iCe=t=>t!==null;function V8(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(iCe),o=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const oCe={decay:yj,inertia:yj,tween:Mx,keyframes:Mx,spring:u4};function GJ(t){typeof t.type=="string"&&(t.type=oCe[t.type])}class q8{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const lCe=t=>t/100;class G8 extends q8{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==no.now()&&this.tick(no.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;GJ(e);const{type:n=Mx,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=e;let{keyframes:o}=e;const l=n||Mx;l!==Mx&&typeof o[0]!="number"&&(this.mixKeyframes=Hb(lCe,HJ(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=H8(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:m,repeatDelay:g,type:x,onUpdate:b,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let E=this.currentTime,T=r;if(f){const D=Math.min(this.currentTime,s)/o;let z=Math.floor(D),F=D%1;!F&&D>=1&&(F=1),F===1&&z--,z=Math.min(z,f+1),!!(z%2)&&(m==="reverse"?(F=1-F,g&&(F-=g/o)):m==="mirror"&&(T=i)),E=Id(0,1,F)*o}const _=w?{done:!1,value:d[0]}:T.next(E);a&&(_.value=a(_.value));let{done:A}=_;!w&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return j&&x!==yj&&(_.value=V8(d,this.options,C,this.speed)),b&&b(_.value),j&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return cu(this.calculatedDuration)}get time(){return cu(this.currentTime)}set time(e){var n;e=lu(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(no.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=cu(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=q2e,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(no.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function cCe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Mm=t=>t*180/Math.PI,xj=t=>{const e=Mm(Math.atan2(t[1],t[0]));return bj(e)},uCe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:xj,rotateZ:xj,skewX:t=>Mm(Math.atan(t[1])),skewY:t=>Mm(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bj=t=>(t=t%360,t<0&&(t+=360),t),Kz=xj,Yz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Xz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),dCe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Yz,scaleY:Xz,scale:t=>(Yz(t)+Xz(t))/2,rotateX:t=>bj(Mm(Math.atan2(t[6],t[5]))),rotateY:t=>bj(Mm(Math.atan2(-t[2],t[0]))),rotateZ:Kz,rotate:Kz,skewX:t=>Mm(Math.atan(t[4])),skewY:t=>Mm(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wj(t){return t.includes("scale")?1:0}function Cj(t,e){if(!t||t==="none")return wj(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=dCe,s=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=uCe,s=o}if(!s)return wj(e);const a=r[e],i=s[1].split(",").map(fCe);return typeof a=="function"?a(i):i[a]}const hCe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Cj(n,e)};function fCe(t){return parseFloat(t.trim())}const vv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yv=new Set(vv),Jz=t=>t===gv||t===on,mCe=new Set(["x","y","z"]),pCe=vv.filter(t=>!mCe.has(t));function gCe(t){const e=[];return pCe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const zm={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cj(e,"x"),y:(t,{transform:e})=>Cj(e,"y")};zm.translateX=zm.x;zm.translateY=zm.y;const $m=new Set;let Sj=!1,kj=!1,Ej=!1;function WJ(){if(kj){const t=Array.from($m).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=gCe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{var o;(o=r.getValue(a))==null||o.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kj=!1,Sj=!1,$m.forEach(t=>t.complete(Ej)),$m.clear()}function KJ(){$m.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(kj=!0)})}function vCe(){Ej=!0,KJ(),WJ(),Ej=!1}class W8{constructor(e,n,r,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?($m.add(this),Sj||(Sj=!0,is.read(KJ),is.resolveKeyframes(WJ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),i=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,i);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=i),s&&a===void 0&&s.set(e[0])}cCe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$m.delete(this)}cancel(){this.state==="scheduled"&&($m.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yCe=t=>t.startsWith("--");function xCe(t,e,n){yCe(e)?t.style.setProperty(e,n):t.style[e]=n}const bCe=I8(()=>window.ScrollTimeline!==void 0),wCe={};function CCe(t,e){const n=I8(t);return()=>wCe[e]??n()}const YJ=CCe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gx=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Qz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gx([0,.65,.55,1]),circOut:gx([.55,0,1,.45]),backIn:gx([.31,.01,.66,-.59]),backOut:gx([.33,1.53,.69,.99])};function XJ(t,e){if(t)return typeof t=="function"?YJ()?VJ(t,e):"ease-out":IJ(t)?gx(t):Array.isArray(t)?t.map(n=>XJ(n,e)||Qz.easeOut):Qz[t]}function SCe(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[e]:n};l&&(d.offset=l);const f=XJ(o,s);Array.isArray(f)&&(d.easing=f);const m={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(d,m)}function JJ(t){return typeof t=="function"&&"applyToOptions"in t}function kCe({type:t,...e}){return JJ(t)&&YJ()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class ECe extends q8{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=e,M8(typeof e.type!="string");const u=kCe(e);this.animation=SCe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=V8(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):xCe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return cu(Number(e))}get time(){return cu(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=lu(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&bCe()?(this.animation.timeline=e,Cl):n(this)}}const QJ={anticipate:jJ,backInOut:NJ,circInOut:RJ};function _Ce(t){return t in QJ}function TCe(t){typeof t.ease=="string"&&_Ce(t.ease)&&(t.ease=QJ[t.ease])}const Zz=10;class ACe extends ECe{constructor(e){TCe(e),GJ(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...i}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new G8({...i,autoplay:!1}),l=lu(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-Zz).value,o.sample(l).value,Zz),o.stop()}}const e$=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yf.test(t)||t==="0")&&!t.startsWith("url("));function NCe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function jCe(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],i=e$(s,e),o=e$(a,e);return!i||!o?!1:NCe(t)||(n==="spring"||JJ(n))&&r}function _j(t){t.duration=0,t.type}const DCe=new Set(["opacity","clipPath","filter","transform"]),RCe=I8(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function MCe(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return RCe()&&n&&DCe.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&a!==0&&i!=="inertia"}const ICe=40;class OCe extends q8{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:l,motionValue:u,element:d,...f}){var x;super(),this.stop=()=>{var b,C;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=no.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,name:l,motionValue:u,element:d,...f},g=(d==null?void 0:d.KeyframeResolver)||W8;this.keyframeResolver=new g(o,(b,C,S)=>this.onKeyframesResolved(b,C,m,!S),l,u,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=no.now(),jCe(e,a,i,o)||((Od.instantAnimations||!l)&&(d==null||d(V8(e,r,n))),e[0]=e[e.length-1],_j(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>ICe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!u&&MCe(m)?new ACe({...m,element:m.motionValue.owner.current}):new G8(m);g.finished.then(()=>this.notifyFinished()).catch(Cl),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),vCe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const PCe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function FCe(t){const e=PCe.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function ZJ(t,e,n=1){const[r,s]=FCe(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const i=a.trim();return wJ(i)?parseFloat(i):i}return L8(s)?ZJ(s,e,n+1):s}function K8(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const eQ=new Set(["width","height","top","left","right","bottom",...vv]),BCe={test:t=>t==="auto",parse:t=>t},tQ=t=>e=>e.test(t),nQ=[gv,on,uu,Lh,N2e,A2e,BCe],t$=t=>nQ.find(tQ(t));function LCe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||SJ(t):!0}const zCe=new Set(["brightness","contrast","saturate","opacity"]);function $Ce(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(z8)||[];if(!r)return t;const s=n.replace(r,"");let a=zCe.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const UCe=/\b([a-z-]*)\(.*?\)/gu,Tj={...yf,getAnimatableNone:t=>{const e=t.match(UCe);return e?e.map($Ce).join(" "):t}},n$={...gv,transform:Math.round},HCe={rotate:Lh,rotateX:Lh,rotateY:Lh,rotateZ:Lh,scale:lC,scaleX:lC,scaleY:lC,scaleZ:lC,skew:Lh,skewX:Lh,skewY:Lh,distance:on,translateX:on,translateY:on,translateZ:on,x:on,y:on,z:on,perspective:on,transformPerspective:on,opacity:x1,originX:Hz,originY:Hz,originZ:on},Y8={borderWidth:on,borderTopWidth:on,borderRightWidth:on,borderBottomWidth:on,borderLeftWidth:on,borderRadius:on,radius:on,borderTopLeftRadius:on,borderTopRightRadius:on,borderBottomRightRadius:on,borderBottomLeftRadius:on,width:on,maxWidth:on,height:on,maxHeight:on,top:on,right:on,bottom:on,left:on,padding:on,paddingTop:on,paddingRight:on,paddingBottom:on,paddingLeft:on,margin:on,marginTop:on,marginRight:on,marginBottom:on,marginLeft:on,backgroundPositionX:on,backgroundPositionY:on,...HCe,zIndex:n$,fillOpacity:x1,strokeOpacity:x1,numOctaves:n$},VCe={...Y8,color:Ys,backgroundColor:Ys,outlineColor:Ys,fill:Ys,stroke:Ys,borderColor:Ys,borderTopColor:Ys,borderRightColor:Ys,borderBottomColor:Ys,borderLeftColor:Ys,filter:Tj,WebkitFilter:Tj},rQ=t=>VCe[t];function sQ(t,e){let n=rQ(t);return n!==Tj&&(n=yf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const qCe=new Set(["auto","none","0"]);function GCe(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!qCe.has(a)&&b1(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=sQ(n,s)}class WCe extends W8{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),L8(u))){const d=ZJ(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!eQ.has(r)||e.length!==2)return;const[s,a]=e,i=t$(s),o=t$(a);if(i!==o)if(Jz(i)&&Jz(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else zm[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||LCe(e[s]))&&r.push(s);r.length&&GCe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zm[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=zm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function KCe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const aQ=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function iQ(t){return CJ(t)&&"offsetHeight"in t}const r$=30,YCe=t=>!isNaN(parseFloat(t));class XCe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=no.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=no.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YCe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new O8);const r=this.events[e].add(n);return e==="change"?()=>{r(),is.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=no.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>r$)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,r$);return kJ(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dg(t,e){return new XCe(t,e)}const{schedule:X8}=OJ(queueMicrotask,!1),Ul={x:!1,y:!1};function oQ(){return Ul.x||Ul.y}function JCe(t){return t==="x"||t==="y"?Ul[t]?null:(Ul[t]=!0,()=>{Ul[t]=!1}):Ul.x||Ul.y?null:(Ul.x=Ul.y=!0,()=>{Ul.x=Ul.y=!1})}function lQ(t,e){const n=KCe(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function s$(t){return!(t.pointerType==="touch"||oQ())}function QCe(t,e,n={}){const[r,s,a]=lQ(t,n),i=o=>{if(!s$(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const d=f=>{s$(f)&&(u(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return r.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const cQ=(t,e)=>e?t===e?!0:cQ(t,e.parentElement):!1,J8=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ZCe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eSe(t){return ZCe.has(t.tagName)||t.tabIndex!==-1}const yS=new WeakSet;function a$(t){return e=>{e.key==="Enter"&&t(e)}}function JT(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const tSe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=a$(()=>{if(yS.has(n))return;JT(n,"down");const s=a$(()=>{JT(n,"up")}),a=()=>JT(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function i$(t){return J8(t)&&!oQ()}function nSe(t,e,n={}){const[r,s,a]=lQ(t,n),i=o=>{const l=o.currentTarget;if(!i$(o))return;yS.add(l);const u=e(l,o),d=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),yS.has(l)&&yS.delete(l),i$(g)&&typeof u=="function"&&u(g,{success:x})},f=g=>{d(g,l===window||l===document||n.useGlobalTarget||cQ(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",m,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),iQ(o)&&(o.addEventListener("focus",u=>tSe(u,s)),!eSe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function uQ(t){return CJ(t)&&"ownerSVGElement"in t}function rSe(t){return uQ(t)&&t.tagName==="svg"}const ci=t=>!!(t&&t.getVelocity),sSe=[...nQ,Ys,yf],aSe=t=>sSe.find(tQ(t)),Q8=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class iSe extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=iQ(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oSe({children:t,isPresent:e,anchorX:n,root:r}){const s=y.useId(),a=y.useRef(null),i=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=y.useContext(Q8);return y.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:f,right:m}=i.current;if(e||!a.current||!l||!u)return;const g=n==="left"?`left: ${f}`:`right: ${m}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const b=r??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[e]),c.jsx(iSe,{isPresent:e,childRef:a,sizeRef:i,children:y.cloneElement(t,{ref:a})})}const lSe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const u=N8(cSe),d=y.useId();let f=!0,m=y.useMemo(()=>(f=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:g=>{u.set(g,!0);for(const x of u.values())if(!x)return;r&&r()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,r]);return a&&f&&(m={...m}),y.useMemo(()=>{u.forEach((g,x)=>u.set(x,!1))},[n]),y.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),i==="popLayout"&&(t=c.jsx(oSe,{isPresent:n,anchorX:o,root:l,children:t})),c.jsx(ok.Provider,{value:m,children:t})};function cSe(){return new Map}function dQ(t=!0){const e=y.useContext(ok);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=y.useId();y.useEffect(()=>{if(t)return s(a)},[t]);const i=y.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,i]:[!0]}const cC=t=>t.key||"";function o$(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const Wo=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[u,d]=dQ(i),f=y.useMemo(()=>o$(t),[t]),m=i&&!u?[]:f.map(cC),g=y.useRef(!0),x=y.useRef(f),b=N8(()=>new Map),[C,S]=y.useState(f),[w,E]=y.useState(f);bJ(()=>{g.current=!1,x.current=f;for(let A=0;A<w.length;A++){const j=cC(w[A]);m.includes(j)?b.delete(j):b.get(j)!==!0&&b.set(j,!1)}},[w,m.length,m.join("-")]);const T=[];if(f!==C){let A=[...f];for(let j=0;j<w.length;j++){const D=w[j],z=cC(D);m.includes(z)||(A.splice(j,0,D),T.push(D))}return a==="wait"&&T.length&&(A=T),E(o$(A)),S(f),null}const{forceRender:_}=y.useContext(A8);return c.jsx(c.Fragment,{children:w.map(A=>{const j=cC(A),D=i&&!u?!1:f===w||m.includes(j),z=()=>{if(b.has(j))b.set(j,!0);else return;let F=!0;b.forEach(R=>{R||(F=!1)}),F&&(_==null||_(),E(x.current),i&&(d==null||d()),r&&r())};return c.jsx(lSe,{isPresent:D,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:D?void 0:z,anchorX:o,children:A},j)})})},hQ=y.createContext({strict:!1}),l$={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rg={};for(const t in l$)Rg[t]={isEnabled:e=>l$[t].some(n=>!!e[n])};function uSe(t){for(const e in t)Rg[e]={...Rg[e],...t[e]}}const dSe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function d4(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dSe.has(t)}let fQ=t=>!d4(t);function hSe(t){typeof t=="function"&&(fQ=e=>e.startsWith("on")?!d4(e):t(e))}try{hSe(require("@emotion/is-prop-valid").default)}catch{}function fSe(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(fQ(s)||n===!0&&d4(s)||!e&&!d4(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const lk=y.createContext({});function ck(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function w1(t){return typeof t=="string"||Array.isArray(t)}const Z8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eR=["initial",...Z8];function uk(t){return ck(t.animate)||eR.some(e=>w1(t[e]))}function mQ(t){return!!(uk(t)||t.variants)}function mSe(t,e){if(uk(t)){const{initial:n,animate:r}=t;return{initial:n===!1||w1(n)?n:void 0,animate:w1(r)?r:void 0}}return t.inherit!==!1?e:{}}function pSe(t){const{initial:e,animate:n}=mSe(t,y.useContext(lk));return y.useMemo(()=>({initial:e,animate:n}),[c$(e),c$(n)])}function c$(t){return Array.isArray(t)?t.join(" "):t}const C1={};function gSe(t){for(const e in t)C1[e]=t[e],B8(e)&&(C1[e].isCSSVariable=!0)}function pQ(t,{layout:e,layoutId:n}){return yv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!C1[t]||t==="opacity")}const vSe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ySe=vv.length;function xSe(t,e,n){let r="",s=!0;for(let a=0;a<ySe;a++){const i=vv[a],o=t[i];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(i.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=aQ(o,Y8[i]);if(!l){s=!1;const d=vSe[i]||i;r+=`${d}(${u}) `}n&&(e[i]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function tR(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let i=!1,o=!1;for(const l in e){const u=e[l];if(yv.has(l)){i=!0;continue}else if(B8(l)){s[l]=u;continue}else{const d=aQ(u,Y8[l]);l.startsWith("origin")?(o=!0,a[l]=d):r[l]=d}}if(e.transform||(i||n?r.transform=xSe(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${l} ${u} ${d}`}}const nR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gQ(t,e,n){for(const r in e)!ci(e[r])&&!pQ(r,n)&&(t[r]=e[r])}function bSe({transformTemplate:t},e){return y.useMemo(()=>{const n=nR();return tR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function wSe(t,e){const n=t.style||{},r={};return gQ(r,n,t),Object.assign(r,bSe(t,e)),r}function CSe(t,e){const n={},r=wSe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const SSe={offset:"stroke-dashoffset",array:"stroke-dasharray"},kSe={offset:"strokeDashoffset",array:"strokeDasharray"};function ESe(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?SSe:kSe;t[a.offset]=on.transform(-r);const i=on.transform(e),o=on.transform(n);t[a.array]=`${i} ${o}`}function vQ(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,u,d){if(tR(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&ESe(f,s,a,i,!1)}const yQ=()=>({...nR(),attrs:{}}),xQ=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _Se(t,e,n,r){const s=y.useMemo(()=>{const a=yQ();return vQ(a,e,xQ(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};gQ(a,t.style,t),s.style={...a,...s.style}}return s}const TSe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rR(t){return typeof t!="string"||t.includes("-")?!1:!!(TSe.indexOf(t)>-1||/[A-Z]/u.test(t))}function ASe(t,e,n,{latestValues:r},s,a=!1){const o=(rR(t)?_Se:CSe)(e,r,s,t),l=fSe(e,typeof t=="string",a),u=t!==y.Fragment?{...l,...o,ref:n}:{},{children:d}=e,f=y.useMemo(()=>ci(d)?d.get():d,[d]);return y.createElement(t,{...u,children:f})}function u$(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sR(t,e,n,r){if(typeof e=="function"){const[s,a]=u$(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=u$(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function xS(t){return ci(t)?t.get():t}function NSe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:jSe(n,r,s,t),renderState:e()}}function jSe(t,e,n,r){const s={},a=r(t,{});for(const m in a)s[m]=xS(a[m]);let{initial:i,animate:o}=t;const l=uk(t),u=mQ(t);e&&u&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!ck(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const x=sR(t,m[g]);if(x){const{transitionEnd:b,transition:C,...S}=x;for(const w in S){let E=S[w];if(Array.isArray(E)){const T=d?E.length-1:0;E=E[T]}E!==null&&(s[w]=E)}for(const w in b)s[w]=b[w]}}}return s}const bQ=t=>(e,n)=>{const r=y.useContext(lk),s=y.useContext(ok),a=()=>NSe(t,e,r,s);return n?a():N8(a)};function aR(t,e,n){var a;const{style:r}=t,s={};for(const i in r)(ci(r[i])||e.style&&ci(e.style[i])||pQ(i,t)||((a=n==null?void 0:n.getValue(i))==null?void 0:a.liveStyle)!==void 0)&&(s[i]=r[i]);return s}const DSe=bQ({scrapeMotionValuesFromProps:aR,createRenderState:nR});function wQ(t,e,n){const r=aR(t,e,n);for(const s in t)if(ci(t[s])||ci(e[s])){const a=vv.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const RSe=bQ({scrapeMotionValuesFromProps:wQ,createRenderState:yQ}),MSe=Symbol.for("motionComponentSymbol");function eg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ISe(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):eg(n)&&(n.current=r))},[e])}const iR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),OSe="framerAppearId",CQ="data-"+iR(OSe),SQ=y.createContext({});function PSe(t,e,n,r,s){var b,C;const{visualElement:a}=y.useContext(lk),i=y.useContext(hQ),o=y.useContext(ok),l=y.useContext(Q8).reducedMotion,u=y.useRef(null);r=r||i.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,f=y.useContext(SQ);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&FSe(u.current,n,s,f);const m=y.useRef(!1);y.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const g=n[CQ],x=y.useRef(!!g&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,g))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,g)));return bJ(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),y.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,g)}),x.current=!1),d.enteringChildren=void 0)}),d}function FSe(t,e,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kQ(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&eg(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function kQ(t){if(t)return t.options.allowProjection!==!1?t.projection:kQ(t.parent)}function QT(t,{forwardMotionProps:e=!1}={},n,r){n&&uSe(n);const s=rR(t)?RSe:DSe;function a(o,l){let u;const d={...y.useContext(Q8),...o,layoutId:BSe(o)},{isStatic:f}=d,m=pSe(o),g=s(o,f);if(!f&&j8){LSe();const x=zSe(d);u=x.MeasureLayout,m.visualElement=PSe(t,g,d,r,x.ProjectionNode)}return c.jsxs(lk.Provider,{value:m,children:[u&&m.visualElement?c.jsx(u,{visualElement:m.visualElement,...d}):null,ASe(t,o,ISe(g,m.visualElement,l),g,f,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const i=y.forwardRef(a);return i[MSe]=t,i}function BSe({layoutId:t}){const e=y.useContext(A8).id;return e&&t!==void 0?e+"-"+t:t}function LSe(t,e){y.useContext(hQ).strict}function zSe(t){const{drag:e,layout:n}=Rg;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function $Se(t,e){if(typeof Proxy>"u")return QT;const n=new Map,r=(a,i)=>QT(a,i,t,e),s=(a,i)=>r(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?r:(n.has(i)||n.set(i,QT(i,void 0,t,e)),n.get(i))})}function EQ({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function USe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function HSe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ZT(t){return t===void 0||t===1}function Aj({scale:t,scaleX:e,scaleY:n}){return!ZT(t)||!ZT(e)||!ZT(n)}function Em(t){return Aj(t)||_Q(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _Q(t){return d$(t.x)||d$(t.y)}function d$(t){return t&&t!=="0%"}function h4(t,e,n){const r=t-n,s=e*r;return n+s}function h$(t,e,n,r,s){return s!==void 0&&(t=h4(t,s,r)),h4(t,n,r)+e}function Nj(t,e=0,n=1,r,s){t.min=h$(t.min,e,n,r,s),t.max=h$(t.max,e,n,r,s)}function TQ(t,{x:e,y:n}){Nj(t.x,e.translate,e.scale,e.originPoint),Nj(t.y,n.translate,n.scale,n.originPoint)}const f$=.999999999999,m$=1.0000000000001;function VSe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,i;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ng(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,TQ(t,i)),r&&Em(a.latestValues)&&ng(t,a.latestValues))}e.x<m$&&e.x>f$&&(e.x=1),e.y<m$&&e.y>f$&&(e.y=1)}function tg(t,e){t.min=t.min+e,t.max=t.max+e}function p$(t,e,n,r,s=.5){const a=ps(t.min,t.max,s);Nj(t,e,n,a,r)}function ng(t,e){p$(t.x,e.x,e.scaleX,e.scale,e.originX),p$(t.y,e.y,e.scaleY,e.scale,e.originY)}function AQ(t,e){return EQ(HSe(t.getBoundingClientRect(),e))}function qSe(t,e,n){const r=AQ(t,n),{scroll:s}=e;return s&&(tg(r.x,s.offset.x),tg(r.y,s.offset.y)),r}const g$=()=>({translate:0,scale:1,origin:0,originPoint:0}),rg=()=>({x:g$(),y:g$()}),v$=()=>({min:0,max:0}),Os=()=>({x:v$(),y:v$()}),jj={current:null},NQ={current:!1};function GSe(){if(NQ.current=!0,!!j8)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>jj.current=t.matches;t.addEventListener("change",e),e()}else jj.current=!1}const WSe=new WeakMap;function KSe(t,e,n){for(const r in e){const s=e[r],a=n[r];if(ci(s))t.addValue(r,s);else if(ci(a))t.addValue(r,Dg(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=t.getStaticValue(r);t.addValue(r,Dg(i!==void 0?i:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const y$=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YSe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=W8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=no.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,is.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=uk(n),this.isVariantNode=mQ(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const g=f[m];l[m]!==void 0&&ci(g)&&g.set(l[m])}}mount(e){var n;this.current=e,WSe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),NQ.current||GSe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jj.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),vf(this.notifyUpdate),vf(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=yv.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[e]=i,this.props.onUpdate&&is.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Rg){const n=Rg[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Os()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<y$.length;r++){const s=y$[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=e[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=KSe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Dg(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(wJ(r)||SJ(r))?r=parseFloat(r):!aSe(r)&&yf.test(n)&&(r=sQ(e,n)),this.setBaseTarget(e,ci(r)?r.get():r)),ci(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=sR(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ci(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new O8),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){X8.render(this.render)}}class jQ extends YSe{constructor(){super(...arguments),this.KeyframeResolver=WCe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ci(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DQ(t,{style:e,vars:n},r,s){const a=t.style;let i;for(i in e)a[i]=e[i];s==null||s.applyProjectionStyles(a,r);for(i in n)a.setProperty(i,n[i])}function XSe(t){return window.getComputedStyle(t)}class JSe extends jQ{constructor(){super(...arguments),this.type="html",this.renderInstance=DQ}readValueFromInstance(e,n){var r;if(yv.has(n))return(r=this.projection)!=null&&r.isProjecting?wj(n):hCe(e,n);{const s=XSe(e),a=(B8(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return AQ(e,n)}build(e,n,r){tR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return aR(e,n,r)}}const RQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QSe(t,e,n,r){DQ(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(RQ.has(s)?s:iR(s),e.attrs[s])}class ZSe extends jQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Os}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(yv.has(n)){const r=rQ(n);return r&&r.default||0}return n=RQ.has(n)?n:iR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return wQ(e,n,r)}build(e,n,r){vQ(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){QSe(e,n,r,s)}mount(e){this.isSVGTag=xQ(e.tagName),super.mount(e)}}const e4e=(t,e)=>rR(t)?new ZSe(e):new JSe(e,{allowProjection:t!==y.Fragment});function ug(t,e,n){const r=t.getProps();return sR(r,e,n!==void 0?n:r.custom,t)}const Dj=t=>Array.isArray(t);function t4e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Dg(n))}function n4e(t){return Dj(t)?t[t.length-1]||0:t}function r4e(t,e){const n=ug(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const o=n4e(a[i]);t4e(t,i,o)}}function s4e(t){return!!(ci(t)&&t.add)}function Rj(t,e){const n=t.getValue("willChange");if(s4e(n))return n.add(e);if(!n&&Od.WillChange){const r=new Od.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function MQ(t){return t.props[CQ]}const a4e=t=>t!==null;function i4e(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(a4e),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const o4e={type:"spring",stiffness:500,damping:25,restSpeed:10},l4e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),c4e={type:"keyframes",duration:.8},u4e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d4e=(t,{keyframes:e})=>e.length>2?c4e:yv.has(t)?t.startsWith("scale")?l4e(e[1]):o4e:u4e;function h4e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const oR=(t,e,n,r={},s,a)=>i=>{const o=K8(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-lu(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:s};h4e(o)||Object.assign(d,d4e(t,d)),d.duration&&(d.duration=lu(d.duration)),d.repeatDelay&&(d.repeatDelay=lu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(_j(d),d.delay===0&&(f=!0)),(Od.instantAnimations||Od.skipAnimations)&&(f=!0,_j(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&e.get()!==void 0){const m=i4e(d.keyframes,o);if(m!==void 0){is.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new G8(d):new OCe(d)};function f4e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function IQ(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:i,...o}=e;r&&(a=r);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const f=t.getValue(d,t.latestValues[d]??null),m=o[d];if(m===void 0||u&&f4e(u,d))continue;const g={delay:n,...K8(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===x&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const S=MQ(t);if(S){const w=window.MotionHandoffAnimation(S,d,is);w!==null&&(g.startTime=w,b=!0)}}Rj(t,d),f.start(oR(d,f,m,t.shouldReduceMotion&&eQ.has(d)?{type:!1}:g,t,b));const C=f.animation;C&&l.push(C)}return i&&Promise.all(l).then(()=>{is.update(()=>{i&&r4e(t,i)})}),l}function OQ(t,e,n,r=0,s=1){const a=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),i=t.size,o=(i-1)*r;return typeof n=="function"?n(a,i):s===1?a*r:o-a*r}function Mj(t,e,n={}){var l;const r=ug(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(IQ(t,r,n)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=s;return m4e(t,e,u,d,f,m,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[u,d]=o==="beforeChildren"?[a,i]:[i,a];return u().then(()=>d())}else return Promise.all([a(),i(n.delay)])}function m4e(t,e,n=0,r=0,s=0,a=1,i){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(Mj(l,e,{...i,delay:n+(typeof r=="function"?0:r)+OQ(t.variantChildren,l,r,s,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function p4e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Mj(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=Mj(t,e,n);else{const s=typeof e=="function"?ug(t,e,n.custom):e;r=Promise.all(IQ(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function PQ(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const g4e=eR.length;function FQ(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?FQ(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<g4e;n++){const r=eR[n],s=t.props[r];(w1(s)||s===!1)&&(e[r]=s)}return e}const v4e=[...Z8].reverse(),y4e=Z8.length;function x4e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>p4e(t,n,r)))}function b4e(t){let e=x4e(t),n=x$(),r=!0;const s=l=>(u,d)=>{var m;const f=ug(t,d,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:g,transitionEnd:x,...b}=f;u={...u,...b,...x}}return u};function a(l){e=l(t)}function i(l){const{props:u}=t,d=FQ(t.parent)||{},f=[],m=new Set;let g={},x=1/0;for(let C=0;C<y4e;C++){const S=v4e[C],w=n[S],E=u[S]!==void 0?u[S]:d[S],T=w1(E),_=S===l?w.isActive:null;_===!1&&(x=C);let A=E===d[S]&&E!==u[S]&&T;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),w.protectedKeys={...g},!w.isActive&&_===null||!E&&!w.prevProp||ck(E)||typeof E=="boolean")continue;const j=w4e(w.prevProp,E);let D=j||S===l&&w.isActive&&!A&&T||C>x&&T,z=!1;const F=Array.isArray(E)?E:[E];let R=F.reduce(s(S),{});_===!1&&(R={});const{prevResolvedValues:L={}}=w,O={...L,...R},H=U=>{D=!0,m.has(U)&&(z=!0,m.delete(U)),w.needsAnimating[U]=!0;const W=t.getValue(U);W&&(W.liveStyle=!1)};for(const U in O){const W=R[U],Y=L[U];if(g.hasOwnProperty(U))continue;let B=!1;Dj(W)&&Dj(Y)?B=!PQ(W,Y):B=W!==Y,B?W!=null?H(U):m.add(U):W!==void 0&&m.has(U)?H(U):w.protectedKeys[U]=!0}w.prevProp=E,w.prevResolvedValues=R,w.isActive&&(g={...g,...R}),r&&t.blockInitialAnimation&&(D=!1);const P=A&&j;D&&(!P||z)&&f.push(...F.map(U=>{const W={type:S};if(typeof U=="string"&&r&&!P&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,B=ug(Y,U);if(Y.enteringChildren&&B){const{delayChildren:Z}=B.transition||{};W.delay=OQ(Y.enteringChildren,t,Z)}}return{animation:U,options:W}}))}if(m.size){const C={};if(typeof u.initial!="boolean"){const S=ug(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(C.transition=S.transition)}m.forEach(S=>{const w=t.getBaseTarget(S),E=t.getValue(S);E&&(E.liveStyle=!0),C[S]=w??null}),f.push({animation:C})}let b=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(f):Promise.resolve()}function o(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=i(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=x$(),r=!0}}}function w4e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PQ(e,t):!1}function fm(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x$(){return{animate:fm(!0),whileInView:fm(),whileHover:fm(),whileTap:fm(),whileDrag:fm(),whileFocus:fm(),exit:fm()}}class Of{constructor(e){this.isMounted=!1,this.node=e}update(){}}class C4e extends Of{constructor(e){super(e),e.animationState||(e.animationState=b4e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ck(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let S4e=0;class k4e extends Of{constructor(){super(...arguments),this.id=S4e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const E4e={animation:{Feature:C4e},exit:{Feature:k4e}};function S1(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Gb(t){return{point:{x:t.pageX,y:t.pageY}}}const _4e=t=>e=>J8(e)&&t(e,Gb(e));function Ix(t,e,n,r){return S1(t,e,_4e(n),r)}const BQ=1e-4,T4e=1-BQ,A4e=1+BQ,LQ=.01,N4e=0-LQ,j4e=0+LQ;function ji(t){return t.max-t.min}function D4e(t,e,n){return Math.abs(t-e)<=n}function b$(t,e,n,r=.5){t.origin=r,t.originPoint=ps(e.min,e.max,t.origin),t.scale=ji(n)/ji(e),t.translate=ps(n.min,n.max,t.origin)-t.originPoint,(t.scale>=T4e&&t.scale<=A4e||isNaN(t.scale))&&(t.scale=1),(t.translate>=N4e&&t.translate<=j4e||isNaN(t.translate))&&(t.translate=0)}function Ox(t,e,n,r){b$(t.x,e.x,n.x,r?r.originX:void 0),b$(t.y,e.y,n.y,r?r.originY:void 0)}function w$(t,e,n){t.min=n.min+e.min,t.max=t.min+ji(e)}function R4e(t,e,n){w$(t.x,e.x,n.x),w$(t.y,e.y,n.y)}function C$(t,e,n){t.min=e.min-n.min,t.max=t.min+ji(e)}function Px(t,e,n){C$(t.x,e.x,n.x),C$(t.y,e.y,n.y)}function hl(t){return[t("x"),t("y")]}const zQ=({current:t})=>t?t.ownerDocument.defaultView:null,S$=(t,e)=>Math.abs(t-e);function M4e(t,e){const n=S$(t.x,e.x),r=S$(t.y,e.y);return Math.sqrt(n**2+r**2)}class $Q{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=tA(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=M4e(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:b}=m,{timestamp:C}=Ka;this.history.push({...b,timestamp:C});const{onStart:S,onMove:w}=this.handlers;g||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=eA(g,this.transformPagePoint),is.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=tA(m.type==="pointercancel"?this.lastMoveEventInfo:eA(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,S),b&&b(m,S)},!J8(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=s||window;const o=Gb(e),l=eA(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Ka;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,tA(l,this.history)),this.removeListeners=Hb(Ix(this.contextWindow,"pointermove",this.handlePointerMove),Ix(this.contextWindow,"pointerup",this.handlePointerUp),Ix(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vf(this.updatePoint)}}function eA(t,e){return e?{point:e(t.point)}:t}function k$(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tA({point:t},e){return{point:t,delta:k$(t,UQ(e)),offset:k$(t,I4e(e)),velocity:O4e(e,.1)}}function I4e(t){return t[0]}function UQ(t){return t[t.length-1]}function O4e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=UQ(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>lu(e)));)n--;if(!r)return{x:0,y:0};const a=cu(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function P4e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ps(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ps(n,t,r.max):Math.min(t,n)),t}function E$(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function F4e(t,{top:e,left:n,bottom:r,right:s}){return{x:E$(t.x,n,s),y:E$(t.y,e,r)}}function _$(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function B4e(t,e){return{x:_$(t.x,e.x),y:_$(t.y,e.y)}}function L4e(t,e){let n=.5;const r=ji(t),s=ji(e);return s>r?n=y1(e.min,e.max-r,t.min):r>s&&(n=y1(t.min,t.max-s,e.min)),Id(0,1,n)}function z4e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ij=.35;function $4e(t=Ij){return t===!1?t=0:t===!0&&(t=Ij),{x:T$(t,"left","right"),y:T$(t,"top","bottom")}}function T$(t,e,n){return{min:A$(t,e),max:A$(t,n)}}function A$(t,e){return typeof t=="number"?t:t[e]||0}const U4e=new WeakMap;class H4e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Os(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gb(f).point)},i=(f,m)=>{const{drag:g,dragPropagation:x,onDragStart:b}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JCe(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hl(S=>{let w=this.getAxisMotionValue(S).get()||0;if(uu.test(w)){const{projection:E}=this.visualElement;if(E&&E.layout){const T=E.layout.layoutBox[S];T&&(w=ji(T)*(parseFloat(w)/100))}}this.originPoint[S]=w}),b&&is.postRender(()=>b(f,m)),Rj(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},o=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:b,onDrag:C}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:S}=m;if(x&&this.currentDirection===null){this.currentDirection=V4e(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),C&&C(f,m)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>hl(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new $Q(e,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:zQ(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&is.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!uC(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=P4e(i,this.constraints[e],this.elastic[e])),a.set(i)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&eg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=F4e(r.layoutBox,e):this.constraints=!1,this.elastic=$4e(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&hl(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=z4e(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!eg(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=qSe(r,s.root,this.visualElement.getTransformPagePoint());let i=B4e(s.layout.layoutBox,a);if(n){const o=n(USe(i));this.hasMutatedConstraints=!!o,o&&(i=EQ(o))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=hl(d=>{if(!uC(d,n,this.currentDirection))return;let f=l&&l[d]||{};i&&(f={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Rj(this.visualElement,e),r.start(oR(e,r,0,n,this.visualElement,!1))}stopAnimation(){hl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){hl(n=>{const{drag:r}=this.getProps();if(!uC(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[n];a.set(e[n]-ps(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!eg(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};hl(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const l=o.get();s[i]=L4e({min:l,max:l},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),hl(i=>{if(!uC(i,e,null))return;const o=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];o.set(ps(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;U4e.set(this.visualElement,this);const e=this.visualElement.current,n=Ix(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();eg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),is.read(r);const i=S1(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(hl(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())}));return()=>{i(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Ij,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function uC(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function V4e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class q4e extends Of{constructor(e){super(e),this.removeGroupControls=Cl,this.removeListeners=Cl,this.controls=new H4e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cl}unmount(){this.removeGroupControls(),this.removeListeners()}}const N$=t=>(e,n)=>{t&&is.postRender(()=>t(e,n))};class G4e extends Of{constructor(){super(...arguments),this.removePointerDownListener=Cl}onPointerDown(e){this.session=new $Q(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zQ(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:N$(e),onStart:N$(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&is.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Ix(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function j$(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(on.test(t))t=parseFloat(t);else return t;const n=j$(t,e.target.x),r=j$(t,e.target.y);return`${n}% ${r}%`}},W4e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=yf.parse(t);if(s.length>5)return r;const a=yf.createTransformer(t),i=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;s[0+i]/=o,s[1+i]/=l;const u=ps(o,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let nA=!1;class K4e extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;gSe(Y4e),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),nA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),bS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:i}=r;return i&&(i.isPresent=a,nA=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?i.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?i.promote():i.relegate()||is.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),X8.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;nA=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HQ(t){const[e,n]=dQ(),r=y.useContext(A8);return c.jsx(K4e,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(SQ),isPresent:e,safeToRemove:n})}const Y4e={borderRadius:{...Qy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qy,borderTopRightRadius:Qy,borderBottomLeftRadius:Qy,borderBottomRightRadius:Qy,boxShadow:W4e};function X4e(t,e,n){const r=ci(t)?t:Dg(t);return r.start(oR("",r,e,n)),r.animation}const J4e=(t,e)=>t.depth-e.depth;class Q4e{constructor(){this.children=[],this.isDirty=!1}add(e){D8(this.children,e),this.isDirty=!0}remove(e){R8(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J4e),this.isDirty=!1,this.children.forEach(e)}}function Z4e(t,e){const n=no.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(vf(r),t(a-e))};return is.setup(r,!0),()=>vf(r)}const VQ=["TopLeft","TopRight","BottomLeft","BottomRight"],e5e=VQ.length,D$=t=>typeof t=="string"?parseFloat(t):t,R$=t=>typeof t=="number"||on.test(t);function t5e(t,e,n,r,s,a){s?(t.opacity=ps(0,n.opacity??1,n5e(r)),t.opacityExit=ps(e.opacity??1,0,r5e(r))):a&&(t.opacity=ps(e.opacity??1,n.opacity??1,r));for(let i=0;i<e5e;i++){const o=`border${VQ[i]}Radius`;let l=M$(e,o),u=M$(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||R$(l)===R$(u)?(t[o]=Math.max(ps(D$(l),D$(u),r),0),(uu.test(u)||uu.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=ps(e.rotate||0,n.rotate||0,r))}function M$(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const n5e=qQ(0,.5,DJ),r5e=qQ(.5,.95,Cl);function qQ(t,e,n){return r=>r<t?0:r>e?1:n(y1(t,e,r))}function I$(t,e){t.min=e.min,t.max=e.max}function cl(t,e){I$(t.x,e.x),I$(t.y,e.y)}function O$(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function P$(t,e,n,r,s){return t-=e,t=h4(t,1/n,r),s!==void 0&&(t=h4(t,1/s,r)),t}function s5e(t,e=0,n=1,r=.5,s,a=t,i=t){if(uu.test(e)&&(e=parseFloat(e),e=ps(i.min,i.max,e/100)-i.min),typeof e!="number")return;let o=ps(a.min,a.max,r);t===a&&(o-=e),t.min=P$(t.min,e,n,o,s),t.max=P$(t.max,e,n,o,s)}function F$(t,e,[n,r,s],a,i){s5e(t,e[n],e[r],e[s],e.scale,a,i)}const a5e=["x","scaleX","originX"],i5e=["y","scaleY","originY"];function B$(t,e,n,r){F$(t.x,e,a5e,n?n.x:void 0,r?r.x:void 0),F$(t.y,e,i5e,n?n.y:void 0,r?r.y:void 0)}function L$(t){return t.translate===0&&t.scale===1}function GQ(t){return L$(t.x)&&L$(t.y)}function z$(t,e){return t.min===e.min&&t.max===e.max}function o5e(t,e){return z$(t.x,e.x)&&z$(t.y,e.y)}function $$(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WQ(t,e){return $$(t.x,e.x)&&$$(t.y,e.y)}function U$(t){return ji(t.x)/ji(t.y)}function H$(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class l5e{constructor(){this.members=[]}add(e){D8(this.members,e),e.scheduleRender()}remove(e){if(R8(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function c5e(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:m,skewX:g,skewY:x}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const rA=["","X","Y","Z"],u5e=1e3;let d5e=0;function sA(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function KQ(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=MQ(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",is,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&KQ(r)}function YQ({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},o=e==null?void 0:e()){this.id=d5e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(m5e),this.nodes.forEach(y5e),this.nodes.forEach(x5e),this.nodes.forEach(p5e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q4e)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new O8),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const l=this.eventHandlers.get(i);l&&l.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=uQ(i)&&!rSe(i),this.instance=i;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let d,f=0;const m=()=>this.root.updateBlockedByResize=!1;is.read(()=>{f=window.innerWidth}),t(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=Z4e(m,250),bS.hasAnimatedSinceResize&&(bS.hasAnimatedSinceResize=!1,this.nodes.forEach(G$)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||k5e,{onLayoutAnimationStart:b,onLayoutAnimationComplete:C}=u.getProps(),S=!this.targetLayout||!WQ(this.targetLayout,g),w=!f&&m;if(this.options.layoutRoot||this.resumeFrom||w||f&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...K8(x,"layout"),onPlay:b,onComplete:C};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(d,w)}else f||G$(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(b5e),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KQ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(V$);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(q$);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(v5e),this.nodes.forEach(h5e),this.nodes.forEach(f5e)):this.nodes.forEach(q$),this.clearAllSnapshots();const o=no.now();Ka.delta=Id(0,1e3/60,o-Ka.timestamp),Ka.timestamp=o,Ka.isProcessing=!0,GT.update.process(Ka),GT.preRender.process(Ka),GT.render.process(Ka),Ka.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,X8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(g5e),this.sharedNodes.forEach(w5e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,is.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){is.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ji(this.snapshot.measuredBox.x)&&!ji(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Os(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!GQ(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||Em(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return i&&(l=this.removeTransform(l)),E5e(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:i}=this.options;if(!i)return Os();const o=i.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(_5e))){const{scroll:d}=this.root;d&&(tg(o.x,d.offset.x),tg(o.y,d.offset.y))}return o}removeElementScroll(i){var l;const o=Os();if(cl(o,i),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:m}=d;d!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&cl(o,i),tg(o.x,f.offset.x),tg(o.y,f.offset.y))}return o}applyTransform(i,o=!1){const l=Os();cl(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ng(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Em(d.latestValues)&&ng(l,d.latestValues)}return Em(this.latestValues)&&ng(l,this.latestValues),l}removeTransform(i){const o=Os();cl(o,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Em(u.latestValues))continue;Aj(u.latestValues)&&u.updateSnapshot();const d=Os(),f=u.measurePageBox();cl(d,f),B$(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Em(this.latestValues)&&B$(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ka.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ka.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Os(),this.relativeTargetOrigin=Os(),Px(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Os(),this.targetWithTransforms=Os()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),R4e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cl(this.target,this.layout.layoutBox),TQ(this.target,this.targetDelta)):cl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Os(),this.relativeTargetOrigin=Os(),Px(this.relativeTargetOrigin,this.target,g.target),cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Aj(this.parent.latestValues)||_Q(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const i=this.getLead(),o=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ka.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;cl(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;VSe(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Os());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(O$(this.prevProjectionDelta.x,this.projectionDelta.x),O$(this.prevProjectionDelta.y,this.projectionDelta.y)),Ox(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!H$(this.projectionDelta.x,this.prevProjectionDelta.x)||!H$(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rg(),this.projectionDelta=rg(),this.projectionDeltaWithTransform=rg()}setAnimationOrigin(i,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=rg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Os(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,C=this.getStack(),S=!C||C.members.length<=1,w=!!(b&&!S&&this.options.crossfade===!0&&!this.path.some(S5e));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const _=T/1e3;W$(f.x,i.x,_),W$(f.y,i.y,_),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Px(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),C5e(this.relativeTarget,this.relativeTargetOrigin,m,_),E&&o5e(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Os()),cl(E,this.relativeTarget)),b&&(this.animationValues=d,t5e(d,u,this.latestValues,_,w,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(vf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=is.update(()=>{bS.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Dg(0)),this.currentAnimation=X4e(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(u5e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=i;if(!(!o||!l||!u)){if(this!==i&&this.layout&&u&&XQ(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Os();const f=ji(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const m=ji(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+m}cl(o,l),ng(o,d),Ox(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new l5e),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var o;const{layoutId:i}=this.options;return i?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:i}=this.options;return i?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&sA("z",i,u,this.animationValues);for(let d=0;d<rA.length;d++)sA(`rotate${rA[d]}`,i,u,this.animationValues),sA(`skew${rA[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=xS(o==null?void 0:o.pointerEvents)||"",i.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=xS(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Em(this.latestValues)&&(i.transform=l?l({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=c5e(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),i.transform=f;const{x:m,y:g}=this.projectionDelta;i.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in C1){if(d[x]===void 0)continue;const{correct:b,applyTo:C,isCSSVariable:S}=C1[x],w=f==="none"?d[x]:b(d[x],u);if(C){const E=C.length;for(let T=0;T<E;T++)i[C[T]]=w}else S?this.options.visualElement.renderState.vars[x]=w:i[x]=w}this.options.layoutId&&(i.pointerEvents=u===this?xS(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(V$),this.root.sharedNodes.clear()}}}function h5e(t){t.updateLayout()}function f5e(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,i=e.source!==t.layout.source;a==="size"?hl(f=>{const m=i?e.measuredBox[f]:e.layoutBox[f],g=ji(m);m.min=r[f].min,m.max=m.min+g}):XQ(a,e.layoutBox,r)&&hl(f=>{const m=i?e.measuredBox[f]:e.layoutBox[f],g=ji(r[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const o=rg();Ox(o,r,e.layoutBox);const l=rg();i?Ox(l,t.applyTransform(s,!0),e.measuredBox):Ox(l,r,e.layoutBox);const u=!GQ(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const x=Os();Px(x,e.layoutBox,m.layoutBox);const b=Os();Px(b,r,g.layoutBox),WQ(x,b)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=x,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function m5e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function p5e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function g5e(t){t.clearSnapshot()}function V$(t){t.clearMeasurements()}function q$(t){t.isLayoutDirty=!1}function v5e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function G$(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function y5e(t){t.resolveTargetDelta()}function x5e(t){t.calcProjection()}function b5e(t){t.resetSkewAndRotation()}function w5e(t){t.removeLeadSnapshot()}function W$(t,e,n){t.translate=ps(e.translate,0,n),t.scale=ps(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function K$(t,e,n,r){t.min=ps(e.min,n.min,r),t.max=ps(e.max,n.max,r)}function C5e(t,e,n,r){K$(t.x,e.x,n.x,r),K$(t.y,e.y,n.y,r)}function S5e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const k5e={duration:.45,ease:[.4,0,.1,1]},Y$=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),X$=Y$("applewebkit/")&&!Y$("chrome/")?Math.round:Cl;function J$(t){t.min=X$(t.min),t.max=X$(t.max)}function E5e(t){J$(t.x),J$(t.y)}function XQ(t,e,n){return t==="position"||t==="preserve-aspect"&&!D4e(U$(e),U$(n),.2)}function _5e(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const T5e=YQ({attachResizeListener:(t,e)=>S1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aA={current:void 0},JQ=YQ({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!aA.current){const t=new T5e({});t.mount(window),t.setOptions({layoutScroll:!0}),aA.current=t}return aA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),A5e={pan:{Feature:G4e},drag:{Feature:q4e,ProjectionNode:JQ,MeasureLayout:HQ}};function Q$(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&is.postRender(()=>a(e,Gb(e)))}class N5e extends Of{mount(){const{current:e}=this.node;e&&(this.unmount=QCe(e,(n,r)=>(Q$(this.node,r,"Start"),s=>Q$(this.node,s,"End"))))}unmount(){}}class j5e extends Of{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hb(S1(this.node.current,"focus",()=>this.onFocus()),S1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Z$(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&is.postRender(()=>a(e,Gb(e)))}class D5e extends Of{mount(){const{current:e}=this.node;e&&(this.unmount=nSe(e,(n,r)=>(Z$(this.node,r,"Start"),(s,{success:a})=>Z$(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Oj=new WeakMap,iA=new WeakMap,R5e=t=>{const e=Oj.get(t.target);e&&e(t)},M5e=t=>{t.forEach(R5e)};function I5e({root:t,...e}){const n=t||document;iA.has(n)||iA.set(n,{});const r=iA.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(M5e,{root:t,...e})),r[s]}function O5e(t,e,n){const r=I5e(e);return Oj.set(t,n),r.observe(t),()=>{Oj.delete(t),r.unobserve(t)}}const P5e={some:0,all:1};class F5e extends Of{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:P5e[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=u?d:f;m&&m(l)};return O5e(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(B5e(e,n))&&this.startObserver()}unmount(){}}function B5e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const L5e={inView:{Feature:F5e},tap:{Feature:D5e},focus:{Feature:j5e},hover:{Feature:N5e}},z5e={layout:{ProjectionNode:JQ,MeasureLayout:HQ}},$5e={...E4e,...L5e,...A5e,...z5e},pa=$Se($5e,e4e),lR=Oi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium cursor-pointer disabled:pointer-events-none disabled:opacity-50 transition-colors duration-200 ease-in-out [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent/10 hover:text-accent-foreground dark:hover:bg-accent/20 dark:hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function vn({className:t,variant:e,size:n,asChild:r=!1,...s}){const a=r?sk:"button";return c.jsx(a,{"data-slot":"button",className:ge(lR({variant:e,size:n,className:t})),...s})}const U5e=t=>{const{useRerenderListener:e,getOptions:n,sendMessageAndListen:r}=ut(),{options:s,trigger:a}=e([t],"local"),[i,o]=y.useState(null),[l,u]=y.useState(!0),[d,f]=y.useState(null);return y.useEffect(()=>{(async()=>{try{u(!0),await r({type:"CALL_EXTENSION_FUNC",payload:{func:"syncCachedDataFromServer",args:{key:t}}});const x=n("local")[t]??null;o(x)}catch(g){console.error("Error loading cached data:",g),f(g)}finally{u(!1)}})()},[t]),y.useEffect(()=>{const m=n("local");o(m[t]??null)},[a,t]),{data:i,loading:l,error:d}},eU=({id:t,color:e,title:n,count:r,active:s,numNotes:a})=>{const{setActiveCourse:i}=Fr(),{updateOptions:o}=ut(),l=u=>{i(u),o({notes_last_active_course:u})};return c.jsxs("button",{className:`cursor-pointer w-full flex items-center justify-between text-base rounded-lg py-1.5 px-3 transition-all duration-200 border ${s?"bg-theme-0 border-theme":"hover:bg-theme-1 border-transparent"}`,onClick:()=>l(t),children:[c.jsxs("div",{className:"flex items-center justify-between gap-[10px]",children:[c.jsx("div",{className:"w-[10px] h-[10px] rounded-full",style:{backgroundColor:e}}),c.jsx("p",{className:"font-sm text-theme-0",children:n})]}),c.jsx("span",{className:"font-medium text-xs",children:a})]})},H5e=()=>{const{activeCourse:t}=Fr(),{courseData:e,visibleCourseIds:n}=zr(),{data:r}=U5e("cached_note_counts");console.log("note_count",r);const s=y.useMemo(()=>{const a=n.map(o=>{const l=e==null?void 0:e[o];return l?(console.log("course",l),console.log("numNotes",o,r==null?void 0:r[o]),c.jsx(eU,{numNotes:(r==null?void 0:r[o])||"0",id:o,active:o===t,color:l.color,title:l.code!==""?l.code:l.default,count:l.count},l.code!==""?l.code:l.default)):null}),i=c.jsx(eU,{numNotes:(r==null?void 0:r[1])||"0",id:1,active:t===1,color:"#9ca3af",title:"Non-class",count:0},"non-class");return[...a,i]},[e,n,t,r]);return c.jsx("div",{className:"flex flex-col gap-1 flex-1",children:s})},V5e=()=>{const{planType:t}=wa(),{currentUsageBytes:e,maxLimitBytes:n}=Fr();if(t!=="free"&&t!=="style")return null;const r=e/1024/1024,s=n/1024/1024;return c.jsxs("div",{className:"min-h-min w-full backdrop-filter backdrop-invert-[.02]",children:[c.jsxs("p",{className:"text-sm",children:[r.toFixed(1)," / ",s," mb used"]}),c.jsx("div",{className:"w-full h-2 bg-theme-1 border border-theme rounded-full overflow-hidden mt-1",children:c.jsx("div",{className:"h-full bg-theme-0 transition-all duration-300 rounded-full",style:{width:`${Math.min(r/s*100,100)}%`}})})]})},tU=()=>{const{setActiveCourse:t,activeCourse:e}=Fr(),{visibleCourseIds:n}=zr(),{getOptions:r}=ut(),s=y.useMemo(()=>n.length,[n]);return y.useEffect(()=>{const a=r();a!=null&&a.notes_last_active_course?t(a.notes_last_active_course):!e&&n.length>0&&t(n[0])},[n,r]),c.jsx(c.Fragment,{children:c.jsxs("div",{className:"w-full h-full flex flex-col backdrop-filter backdrop-invert-[.02] p-5",children:[c.jsx("h3",{className:"text-md font-semibold",children:"Notes"}),c.jsxs(vn,{variant:"ghost",className:"w-full mt-[20px] flex justify-between items-center text-base font-medium",onClick:()=>t("all"),children:[c.jsx("p",{className:"font-normal",children:"All courses"}),c.jsx("span",{className:"font-medium text-sm",children:s})]}),c.jsx(Ns,{className:"my-2 bg-theme-border"}),c.jsx(H5e,{}),c.jsx(V5e,{})]})})};function yt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var ya=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},q5e=p1[" useInsertionEffect ".trim().toString()]||ya;function Mi({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,i]=G5e({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:s;{const d=y.useRef(t!==void 0);y.useEffect(()=>{const f=d.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=y.useCallback(d=>{var f;if(o){const m=W5e(d)?d(t):d;m!==t&&((f=i.current)==null||f.call(i,m))}else a(d)},[o,t,a,i]);return[l,u]}function G5e({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),s=y.useRef(n),a=y.useRef(e);return q5e(()=>{a.current=e},[e]),y.useEffect(()=>{var i;s.current!==n&&((i=a.current)==null||i.call(a,n),s.current=n)},[n,s]),[n,r,a]}function W5e(t){return typeof t=="function"}var QQ="Toggle",ZQ=y.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=t,[i,o]=Mi({prop:n,onChange:s,defaultProp:r??!1,caller:QQ});return c.jsx(Nt.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:yt(t.onClick,()=>{t.disabled||o(!i)})})});ZQ.displayName=QQ;var K5e=ZQ;const Y5e=Oi("cursor-pointer inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-all duration-200 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground",theme:"bg-transparent text-theme-0 hover:bg-theme-2 data-[state=on]:bg-theme-2 data-[state=on]:text-theme-0"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function Vc({className:t,variant:e="theme",size:n,...r}){return c.jsx(K5e,{"data-slot":"toggle",className:ge(Y5e({variant:e,size:n,className:t})),...r})}/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J5e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),nU=t=>{const e=J5e(t);return e.charAt(0).toUpperCase()+e.slice(1)},eZ=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Q5e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z5e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eke=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>y.createElement("svg",{ref:l,...Z5e,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:eZ("lucide",s),...!a&&!Q5e(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>y.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(t,e)=>{const n=y.forwardRef(({className:r,...s},a)=>y.createElement(eke,{ref:a,iconNode:e,className:eZ(`lucide-${X5e(nU(t))}`,`lucide-${t}`,r),...s}));return n.displayName=nU(t),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tke=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nke=Ge("activity",tke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],ske=Ge("align-center",rke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ake=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],ike=Ge("align-justify",ake);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oke=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],f4=Ge("align-left",oke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],cke=Ge("align-right",lke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uke=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],dke=Ge("arrow-down",uke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],tZ=Ge("arrow-left-right",hke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fke=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xv=Ge("arrow-left",fke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],dk=Ge("arrow-right",mke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],m4=Ge("arrow-up-down",pke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gke=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],vke=Ge("arrow-up-right",gke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yke=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],rU=Ge("arrow-up",yke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xke=[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]],hk=Ge("audio-lines",xke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bke=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wke=Ge("bell",bke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cke=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],nZ=Ge("bold",Cke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ske=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],kke=Ge("book-open-check",Ske);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eke=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],rZ=Ge("book-open",Eke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ke=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Tke=Ge("brain",_ke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ake=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],Nke=Ge("calendar-plus",Ake);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jke=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mg=Ge("calendar",jke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dke=[["path",{d:"m3 15 4-8 4 8",key:"1vwr6u"}],["path",{d:"M4 13h6",key:"1r9ots"}],["circle",{cx:"18",cy:"12",r:"3",key:"1kchzo"}],["path",{d:"M21 9v6",key:"anns31"}]],sU=Ge("case-sensitive",Dke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rke=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],or=Ge("check",Rke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mke=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],oi=Ge("chevron-down",Mke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ike=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Kd=Ge("chevron-left",Ike);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oke=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pc=Ge("chevron-right",Oke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pke=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Im=Ge("chevron-up",Pke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fke=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],Bke=Ge("chevrons-right",Fke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],aU=Ge("circle-alert",Lke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_l=Ge("circle-check",zke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sZ=Ge("circle-x",$ke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pj=Ge("circle",Uke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hke=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],aZ=Ge("clipboard",Hke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],k1=Ge("clock",Vke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qke=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Gke=Ge("cloud-off",qke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wke=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Kke=Ge("cloud-upload",Wke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yke=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],iU=Ge("code",Yke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xke=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cR=Ge("copy",Xke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jke=[["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}],["path",{d:"m9 10-5 5 5 5",key:"1kshq7"}]],Qke=Ge("corner-down-left",Jke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zke=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],eEe=Ge("credit-card",Zke);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tEe=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],iZ=Ge("crown",tEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nEe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rEe=Ge("download",nEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sEe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Wb=Ge("ellipsis-vertical",sEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Um=Ge("external-link",aEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iEe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],oEe=Ge("file-plus",iEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lEe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],cEe=Ge("file-spreadsheet",lEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uEe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fi=Ge("file-text",uEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dEe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],oZ=Ge("file",dEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hEe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],fEe=Ge("folder-open",hEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pEe=Ge("folder",mEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gEe=[["path",{d:"M7 2h10",key:"nczekb"}],["path",{d:"M5 6h14",key:"u2x4p"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}]],vEe=Ge("gallery-vertical-end",gEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yEe=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],uR=Ge("gift",yEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],lZ=Ge("globe",xEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bEe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],wEe=Ge("graduation-cap",bEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CEe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],SEe=Ge("grid-3x3",CEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kEe=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],EEe=Ge("grip-vertical",kEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ee=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],Fj=Ge("heading-1",_Ee);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TEe=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Bj=Ge("heading-2",TEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],Lj=Ge("heading-3",AEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NEe=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],_m=Ge("highlighter",NEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jEe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],DEe=Ge("history",jEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const REe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],cZ=Ge("image",REe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],S0=Ge("info",MEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IEe=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],uZ=Ge("italic",IEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OEe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],PEe=Ge("layers",OEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FEe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],dZ=Ge("lightbulb",FEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BEe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Kb=Ge("link",BEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LEe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],zEe=Ge("list-checks",LEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]],UEe=Ge("list-filter",$Ee);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],zj=Ge("list-ordered",HEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VEe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],p4=Ge("list",VEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qEe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],js=Ge("loader-circle",qEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GEe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hZ=Ge("mail",GEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]],fZ=Ge("message-circle-more",WEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],$j=Ge("mic",KEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YEe=[["path",{d:"M5 12h14",key:"1ays0h"}]],XEe=Ge("minus",YEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],mZ=Ge("monitor",JEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QEe=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],ZEe=Ge("moon",QEe);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_e=[["path",{d:"M6 8L2 12L6 16",key:"kyvwex"}],["path",{d:"M2 12H22",key:"1m8cig"}]],t_e=Ge("move-left",e_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_e=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],r_e=Ge("octagon-x",n_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],a_e=Ge("palette",s_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],o_e=Ge("panel-left",i_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],c_e=Ge("paperclip",l_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_e=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],d_e=Ge("pen-line",u_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_e=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],f_e=Ge("pencil-line",h_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_e=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],p_e=Ge("play",m_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Yd=Ge("plus",g_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_e=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],pZ=Ge("presentation",v_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_e=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],x_e=Ge("quote",y_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dR=Ge("refresh-cw",b_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_e=[["path",{d:"M20 9V7a2 2 0 0 0-2-2h-6",key:"19z8uc"}],["path",{d:"m15 2-3 3 3 3",key:"177bxs"}],["path",{d:"M20 13v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2",key:"d36hnl"}]],C_e=Ge("rotate-ccw-square",w_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fk=Ge("rotate-ccw",S_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hR=Ge("search",k_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_e=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E1=Ge("settings",E_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __e=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],T_e=Ge("settings-2",__e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],N_e=Ge("shield",A_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_e=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],D_e=Ge("shuffle",j_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_e=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],bv=Ge("sparkles",R_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_e=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gZ=Ge("square-check-big",M_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Yb=Ge("square-pen",I_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],P_e=Ge("square",O_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],B_e=Ge("star",F_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_e=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],z_e=Ge("sticky-note",L_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_e=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],U_e=Ge("sun",$_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_e=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],V_e=Ge("table",H_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],fR=Ge("trash-2",q_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],wv=Ge("trash",G_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vZ=Ge("triangle-alert",W_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_e=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],mm=Ge("type",K_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_e=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],yZ=Ge("underline",Y_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_e=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],xZ=Ge("undo-2",X_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mR=Ge("upload",J_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bZ=Ge("user",Q_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],e3e=Ge("users",Z_e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],n3e=Ge("video",t3e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3e=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],s3e=Ge("volume-2",r3e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3e=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],wZ=Ge("wand-sparkles",a3e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],o3e=Ge("wrench",i3e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ys=Ge("x",l3e);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3e=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Uj=Ge("zap",c3e),CZ=t=>{try{return Sr(t,"MMM d, yyyy")}catch{return""}},SZ=({note:t,active:e,index:n})=>{const{switchNote:r,deleteNoteById:s}=Fr(),a=t.has_transcript,i=o=>{o.stopPropagation(),s(t.id)};return c.jsxs(pa.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.05,duration:.15,ease:"linear"},className:`group cursor-pointer w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-300 hover:bg-theme-1 border border-theme hover:shadow-sm"
			}`,onClick:()=>r(t.id),children:[c.jsx("div",{className:`shrink-0 size-10 rounded-lg flex items-center justify-center transition-all duration-300 ${e?"bg-blue-500/20 text-blue-600 scale-110":"bg-theme-1 text-theme-1 group-hover:bg-theme-0/50 group-hover:text-theme-0"}`,children:c.jsx(fi,{className:"size-5"})}),c.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:`font-semibold text-sm truncate transition-colors duration-300 ${e?"text-theme-0":"text-theme-0 group-hover:text-theme-0"}`,children:t.title||"Untitled"}),a&&c.jsx("div",{className:"shrink-0 size-4 rounded-full bg-purple-500/20 flex items-center justify-center",children:c.jsx(bv,{className:"size-2.5 text-purple-500"})})]}),c.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-theme-1",children:[c.jsx(k1,{className:"size-3"}),c.jsx("span",{children:CZ(t.modified_at)})]})]}),c.jsx("div",{onClick:i,className:"shrink-0 size-8 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 hover:bg-red-500/20 cursor-pointer",children:c.jsx(fR,{className:"size-4 text-theme-1/50 hover:text-red-500 transition-colors"})}),c.jsx(pc,{className:`shrink-0 size-4 transition-all duration-300 ${e?"text-blue-500 translate-x-1":"text-theme-1/50 group-hover:text-theme-0 group-hover:translate-x-1"}`})]})},u3e=()=>{const{isWidget:t,activeCourse:e,notesMetadata:n,noteId:r,handleNewNote:s,switchNote:a,noteCount:i,noteLimit:o,canCreateNote:l,getNotesMetadata:u}=Fr(),{authenticatedClient:d}=ut(),[f,m]=y.useState(!1),[g,x]=y.useState(""),[b,C]=y.useState([]),[S,w]=y.useState(!1);y.useEffect(()=>{f&&x("")},[f]),y.useEffect(()=>{if(g===""||g.length<2){C([]);return}(async()=>{const z=await d();if(!z){console.error("Error creating auth client:");return}const{data:F,error:R,count:L}=await z.from("notes").select("title, modified_at, id").ilike("title",`%${g}%`).order("modified_at",{ascending:!1});console.log(F),C(F||[])})()},[g]);const E=D=>{a(D.toString()),C([]),m(!1),x("")},T=()=>b.map(D=>c.jsxs("button",{className:"flex items-center justify-between gap-[10px] w-full",onClick:()=>E(D.id),children:[c.jsx("p",{className:"text-sm font-medium",children:D.title}),c.jsx("p",{className:"text-sm text-gray-500",children:CZ(D.modified_at)})]},D.id)),_=D=>{const z=new Date,F=new Date(D),R=1e3*60*60*24,L=Date.UTC(z.getFullYear(),z.getMonth(),z.getDate()),O=Date.UTC(F.getFullYear(),F.getMonth(),F.getDate());return Math.floor((L-O)/R)},A=async()=>{w(!0),await u(!0,6),w(!1)},j=()=>{if(!n[e])return null;const D=n[e].reduce((R,L)=>{const O=_(L.modified_at);return O<=0?R.Today.push(L):O<=1?R.Yesterday.push(L):O<=7?R.Week.push(L):O<=30?R.Month.push(L):R.Older.push(L),R},{Today:[],Yesterday:[],Week:[],Month:[],Older:[]});if(Object.values(D).every(R=>!Array.isArray(R)||R.length===0))return c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("div",{className:"size-16 rounded-2xl bg-theme-1 flex items-center justify-center mb-4",children:c.jsx(fi,{className:"size-8 text-theme-1"})}),c.jsx("p",{className:"text-sm font-medium text-theme-1 mb-1",children:"No notes yet"}),c.jsx("p",{className:"text-xs text-theme-1/60",children:"Create your first note to get started"})]});let F=0;return Object.keys(D).map(R=>D[R].length===0?null:c.jsxs("div",{className:"flex flex-col gap-2 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 px-2 mb-1",children:[c.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-theme-1/70",children:R}),c.jsx("div",{className:"flex-1 h-px bg-theme-1/20"}),c.jsx("span",{className:"text-xs font-medium text-theme-1/50",children:D[R].length})]}),c.jsx("div",{className:"flex flex-col gap-1.5",children:D[R].map(L=>{const O=F++;return c.jsx(SZ,{note:L,active:L.id===r,index:O},L.id)})})]},R))};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between w-full gap-[10px] px-[10px] border-b border-theme h-[60px]",children:[c.jsxs("div",{className:"flex items-center flex-1 border border-theme bg-theme-1 rounded-md px-3 py-2 gap-[10px]",children:[c.jsx(hR,{className:"w-[20px] h-[20px] text-theme-1 flex-shrink-0"}),c.jsx("input",{type:"text",placeholder:"Search",className:"w-full border-0 outline-none text-sm",onChange:D=>x(D.target.value),value:g})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Vc,{onClick:s,pressed:!1,className:l?"":"opacity-50",children:c.jsx(Yb,{className:"min-w-[18px] min-h-[18px] text-theme-1 hover:text-theme-1"})})})]}),c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-[10px] overflow-y-auto p-[10px]",children:[g===""?j():T(),g===""&&n[e]&&n[e].length%6===0&&n[e].length>0&&c.jsx("button",{onClick:A,disabled:S,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl bg-theme-1 hover:bg-theme-0/50 text-theme-1 hover:text-theme-0 transition-all duration-200 border border-theme mb-4 disabled:opacity-50",children:S?c.jsxs(c.Fragment,{children:[c.jsx(js,{className:"size-4 animate-spin"}),c.jsx("span",{className:"text-sm font-medium",children:"Loading..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(oi,{className:"size-4"}),c.jsx("span",{className:"text-sm font-medium",children:"Load 6 more notes"})]})})]}),o>0&&c.jsxs("div",{className:"border-t border-theme p-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[c.jsx("span",{className:"text-theme-1 font-medium",children:"Notes Usage"}),c.jsxs("span",{className:"text-theme-1",children:[i," / ",o]})]}),c.jsx("div",{className:"w-full h-2 bg-theme-1 border border-theme rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-theme-0 transition-all duration-300 rounded-full",style:{width:`${Math.min(i/o*100,100)}%`}})})]})]})},d3e=()=>{var R,L,O,H;const{isWidget:t,activeCourse:e,notesMetadata:n,noteId:r,handleNewNote:s,switchNote:a,noteCount:i,noteLimit:o,canCreateNote:l,getNotesMetadata:u}=Fr(),{authenticatedClient:d}=ut(),[f,m]=y.useState(!1),[g,x]=y.useState(!1),[b,C]=y.useState(""),[S,w]=y.useState([]),E={},{courseData:T}=zr();y.useEffect(()=>{g&&C("")},[g]),y.useEffect(()=>{if(b===""||b.length<2){w([]);return}(async()=>{const I=await d();if(!I){console.error("Error creating auth client:");return}const{data:U,error:W,count:Y}=await I.from("notes").select("title, modified_at, id").ilike("title",`%${b}%`).order("modified_at",{ascending:!1});console.log(U),w(U||[])})()},[b]);const _=P=>{const I=new Date,U=new Date(P),W=1e3*60*60*24,Y=Date.UTC(I.getFullYear(),I.getMonth(),I.getDate()),B=Date.UTC(U.getFullYear(),U.getMonth(),U.getDate());return Math.floor((Y-B)/W)},A=async()=>{m(!0),await u(!0,6),m(!1)},j=()=>{if(!n[e])return null;const P=n[e].reduce((W,Y)=>{const B=_(Y.modified_at);return B<=0?W.Today.push(Y):B<=1?W.Yesterday.push(Y):B<=7?W.Week.push(Y):B<=30?W.Month.push(Y):W.Older.push(Y),W},{Today:[],Yesterday:[],Week:[],Month:[],Older:[]});if(Object.values(P).every(W=>!Array.isArray(W)||W.length===0))return c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("div",{className:"size-16 rounded-2xl bg-theme-1 flex items-center justify-center mb-4",children:c.jsx(fi,{className:"size-8 text-theme-1"})}),c.jsx("p",{className:"text-sm font-medium text-theme-1 mb-1",children:"No notes yet"}),c.jsx("p",{className:"text-xs text-theme-1/60",children:"Create your first note to get started"})]});let U=0;return Object.keys(P).map(W=>P[W].length===0?null:c.jsxs("div",{className:"flex flex-col gap-2 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 px-2 mb-1",children:[c.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-theme-1/70",children:W}),c.jsx("div",{className:"flex-1 h-px bg-theme-1/20"}),c.jsx("span",{className:"text-xs font-medium text-theme-1/50",children:P[W].length})]}),c.jsx("div",{className:"flex flex-col gap-1.5",children:P[W].map(Y=>{const B=U++;return c.jsx(SZ,{note:Y,active:Y.id===r,index:B},Y.id)})})]},W))},D=((R=T==null?void 0:T[e])==null?void 0:R.img)||"",z=((L=T==null?void 0:T[e])==null?void 0:L.color)||"gray",F=e==="all"?"All courses":e===1?"Non-class":((O=T==null?void 0:T[e])==null?void 0:O.code)||((H=T==null?void 0:T[e])==null?void 0:H.default)||"Unknown Course";return e?c.jsx("div",{className:"flex justify-center w-full h-full bg-theme-0",children:c.jsxs("div",{className:"pt-20 pb-12 max-w-[640px] w-full px-4 flex-col flex",children:[c.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-2xl",style:{borderLeft:`8px solid ${z}`},children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur-sm",style:D!==""?{backgroundImage:`url(${D})`}:{}}),c.jsx("div",{className:"absolute inset-0 opacity-70",style:{background:`linear-gradient(${z} 0%, ${z} 100%)`}}),c.jsx("div",{className:"relative",children:c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsx("div",{className:"h-20 w-[110px] rounded-2xl shadow-2xl flex items-center justify-center backdrop-blur-sm bg-white/10 overflow-hidden flex-shrink-0 bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-xl border border-white/30 shadow-lg transition-all duration-200 font-medium text-sm flex items-center gap-2 flex-shrink-0",style:D!==""?{backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:D===""&&c.jsx(pEe,{className:"size-8 text-white drop-shadow-lg"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"flex items-start gap-3 mb-2",children:c.jsx("h1",{className:"text-2xl font-bold text-white drop-shadow-lg leading-tight",children:F})}),c.jsx("div",{className:"flex items-center gap-4 text-sm",children:c.jsx("span",{className:"rounded-full drop-shadow-sm text-white/90",children:`${(E==null?void 0:E[e])||"0"} notes`})})]}),e!=="all"&&c.jsxs("div",{className:"flex flex-col items-end gap-2",children:[c.jsxs("button",{onClick:()=>s(!1),className:"backdrop-blur-md bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-xl border border-white/30 shadow-lg transition-all duration-200 hover:scale-105 font-medium text-sm flex items-center gap-2 flex-shrink-0",children:[c.jsx(Yd,{className:"size-4"}),"New note"]}),c.jsxs("button",{onClick:()=>s(!0),className:"backdrop-blur-md bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-xl border border-white/30 shadow-lg transition-all duration-200 hover:scale-105 font-medium text-sm flex items-center gap-2 flex-shrink-0",children:[c.jsx(hk,{className:"size-4"}),"Transcribe lecture"]})]})]})})})]}),c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-2 overflow-y-auto",children:[j(),b===""&&n[e]&&n[e].length%6===0&&n[e].length>0&&c.jsxs("button",{onClick:A,disabled:f,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl bg-theme-1 hover:bg-theme-0/50 text-theme-1 hover:text-theme-0 transition-all duration-200 border border-theme mb-4 disabled:opacity-50",children:[f&&c.jsx(js,{className:"size-4 animate-spin"}),c.jsx("span",{className:"text-sm font-medium",children:"Load more"})]})]})]})}):c.jsx("div",{className:"flex justify-center w-full h-full bg-theme-0 items-center",children:c.jsx(js,{className:"size-8 animate-spin text-theme-1"})})};function kZ(t,e){const n=y.createContext(e),r=a=>{const{children:i,...o}=a,l=y.useMemo(()=>o,Object.values(o));return c.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function s(a){const i=y.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function Fa(t,e=[]){let n=[];function r(a,i){const o=y.createContext(i),l=n.length;n=[...n,i];const u=f=>{var S;const{scope:m,children:g,...x}=f,b=((S=m==null?void 0:m[t])==null?void 0:S[l])||o,C=y.useMemo(()=>x,Object.values(x));return c.jsx(b.Provider,{value:C,children:g})};u.displayName=a+"Provider";function d(f,m){var b;const g=((b=m==null?void 0:m[t])==null?void 0:b[l])||o,x=y.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(i=>y.createContext(i));return function(o){const l=(o==null?void 0:o[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return s.scopeName=t,[r,h3e(s,...e)]}function h3e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((o,{useScope:l,scopeName:u})=>{const f=l(a)[`__scope${u}`];return{...o,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function mk(t){const e=t+"CollectionProvider",[n,r]=Fa(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=b=>{const{scope:C,children:S}=b,w=Ce.useRef(null),E=Ce.useRef(new Map).current;return c.jsx(s,{scope:C,itemMap:E,collectionRef:w,children:S})};i.displayName=e;const o=t+"CollectionSlot",l=Md(o),u=Ce.forwardRef((b,C)=>{const{scope:S,children:w}=b,E=a(o,S),T=Bt(C,E.collectionRef);return c.jsx(l,{ref:T,children:w})});u.displayName=o;const d=t+"CollectionItemSlot",f="data-radix-collection-item",m=Md(d),g=Ce.forwardRef((b,C)=>{const{scope:S,children:w,...E}=b,T=Ce.useRef(null),_=Bt(C,T),A=a(d,S);return Ce.useEffect(()=>(A.itemMap.set(T,{ref:T,...E}),()=>void A.itemMap.delete(T))),c.jsx(m,{[f]:"",ref:_,children:w})});g.displayName=d;function x(b){const C=a(t+"CollectionConsumer",b);return Ce.useCallback(()=>{const w=C.collectionRef.current;if(!w)return[];const E=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(C.itemMap.values()).sort((A,j)=>E.indexOf(A.ref.current)-E.indexOf(j.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:i,Slot:u,ItemSlot:g},x,r]}var f3e=p1[" useId ".trim().toString()]||(()=>{}),m3e=0;function Ma(t){const[e,n]=y.useState(f3e());return ya(()=>{n(r=>r??String(m3e++))},[t]),t||(e?`radix-${e}`:"")}function Pr(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var p3e=y.createContext(void 0);function k0(t){const e=y.useContext(p3e);return t||e||"ltr"}var oA="rovingFocusGroup.onEntryFocus",g3e={bubbles:!1,cancelable:!0},Xb="RovingFocusGroup",[Hj,EZ,v3e]=mk(Xb),[y3e,pk]=Fa(Xb,[v3e]),[x3e,b3e]=y3e(Xb),_Z=y.forwardRef((t,e)=>c.jsx(Hj.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(Hj.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(w3e,{...t,ref:e})})}));_Z.displayName=Xb;var w3e=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=y.useRef(null),g=Bt(e,m),x=k0(a),[b,C]=Mi({prop:i,defaultProp:o??null,onChange:l,caller:Xb}),[S,w]=y.useState(!1),E=Pr(u),T=EZ(n),_=y.useRef(!1),[A,j]=y.useState(0);return y.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(oA,E),()=>D.removeEventListener(oA,E)},[E]),c.jsx(x3e,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:b,onItemFocus:y.useCallback(D=>C(D),[C]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>j(D=>D+1),[]),onFocusableItemRemove:y.useCallback(()=>j(D=>D-1),[]),children:c.jsx(Nt.div,{tabIndex:S||A===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:yt(t.onMouseDown,()=>{_.current=!0}),onFocus:yt(t.onFocus,D=>{const z=!_.current;if(D.target===D.currentTarget&&z&&!S){const F=new CustomEvent(oA,g3e);if(D.currentTarget.dispatchEvent(F),!F.defaultPrevented){const R=T().filter(I=>I.focusable),L=R.find(I=>I.active),O=R.find(I=>I.id===b),P=[L,O,...R].filter(Boolean).map(I=>I.ref.current);NZ(P,d)}}_.current=!1}),onBlur:yt(t.onBlur,()=>w(!1))})})}),TZ="RovingFocusGroupItem",AZ=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...o}=t,l=Ma(),u=a||l,d=b3e(TZ,n),f=d.currentTabStopId===u,m=EZ(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:b}=d;return y.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),c.jsx(Hj.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:c.jsx(Nt.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:yt(t.onMouseDown,C=>{r?d.onItemFocus(u):C.preventDefault()}),onFocus:yt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:yt(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){d.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const S=k3e(C,d.orientation,d.dir);if(S!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let E=m().filter(T=>T.focusable).map(T=>T.ref.current);if(S==="last")E.reverse();else if(S==="prev"||S==="next"){S==="prev"&&E.reverse();const T=E.indexOf(C.currentTarget);E=d.loop?E3e(E,T+1):E.slice(T+1)}setTimeout(()=>NZ(E))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:b!=null}):i})})});AZ.displayName=TZ;var C3e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function S3e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function k3e(t,e,n){const r=S3e(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return C3e[r]}function NZ(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function E3e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var jZ=_Z,DZ=AZ;function gk(t){const[e,n]=y.useState(void 0);return ya(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,o;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,o=u.blockSize}else i=t.offsetWidth,o=t.offsetHeight;n({width:i,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function vk(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function _3e(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Ba=t=>{const{present:e,children:n}=t,r=T3e(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),a=Bt(r.ref,A3e(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:a}):null};Ba.displayName="Presence";function T3e(t){const[e,n]=y.useState(),r=y.useRef(null),s=y.useRef(t),a=y.useRef("none"),i=t?"mounted":"unmounted",[o,l]=_3e(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=dC(r.current);a.current=o==="mounted"?u:"none"},[o]),ya(()=>{const u=r.current,d=s.current;if(d!==t){const m=a.current,g=dC(u);t?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),ya(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=g=>{const b=dC(r.current).includes(g.animationName);if(g.target===e&&b&&(l("ANIMATION_END"),!s.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},m=g=>{g.target===e&&(a.current=dC(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:y.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function dC(t){return(t==null?void 0:t.animationName)||"none"}function A3e(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var pR="Radio",[N3e,RZ]=Fa(pR),[j3e,D3e]=N3e(pR),MZ=y.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:i,value:o="on",onCheck:l,form:u,...d}=t,[f,m]=y.useState(null),g=Bt(e,C=>m(C)),x=y.useRef(!1),b=f?u||!!f.closest("form"):!0;return c.jsxs(j3e,{scope:n,checked:s,disabled:i,children:[c.jsx(Nt.button,{type:"button",role:"radio","aria-checked":s,"data-state":FZ(s),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:g,onClick:yt(t.onClick,C=>{s||l==null||l(),b&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),b&&c.jsx(PZ,{control:f,bubbles:!x.current,name:r,value:o,checked:s,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});MZ.displayName=pR;var IZ="RadioIndicator",OZ=y.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,a=D3e(IZ,n);return c.jsx(Ba,{present:r||a.checked,children:c.jsx(Nt.span,{"data-state":FZ(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e})})});OZ.displayName=IZ;var R3e="RadioBubbleInput",PZ=y.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const i=y.useRef(null),o=Bt(i,a),l=vk(n),u=gk(e);return y.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const x=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(x)}},[l,n,r]),c.jsx(Nt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});PZ.displayName=R3e;function FZ(t){return t?"checked":"unchecked"}var M3e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],yk="RadioGroup",[I3e]=Fa(yk,[pk,RZ]),BZ=pk(),LZ=RZ(),[O3e,P3e]=I3e(yk),zZ=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:i=!1,disabled:o=!1,orientation:l,dir:u,loop:d=!0,onValueChange:f,...m}=t,g=BZ(n),x=k0(u),[b,C]=Mi({prop:a,defaultProp:s??null,onChange:f,caller:yk});return c.jsx(O3e,{scope:n,name:r,required:i,disabled:o,value:b,onValueChange:C,children:c.jsx(jZ,{asChild:!0,...g,orientation:l,dir:x,loop:d,children:c.jsx(Nt.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:x,...m,ref:e})})})});zZ.displayName=yk;var $Z="RadioGroupItem",UZ=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,a=P3e($Z,n),i=a.disabled||r,o=BZ(n),l=LZ(n),u=y.useRef(null),d=Bt(e,u),f=a.value===s.value,m=y.useRef(!1);return y.useEffect(()=>{const g=b=>{M3e.includes(b.key)&&(m.current=!0)},x=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),c.jsx(DZ,{asChild:!0,...o,focusable:!i,active:f,children:c.jsx(MZ,{disabled:i,required:a.required,checked:f,...l,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:yt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:yt(s.onFocus,()=>{var g;m.current&&((g=u.current)==null||g.click())})})})});UZ.displayName=$Z;var F3e="RadioGroupIndicator",HZ=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=LZ(n);return c.jsx(OZ,{...s,...r,ref:e})});HZ.displayName=F3e;var B3e=zZ,L3e=UZ,z3e=HZ;function xk({className:t,...e}){return c.jsx(B3e,{"data-slot":"radio-group",className:ge("grid gap-3",t),...e})}const $3e=Oi("absolute top-1/2 left-1/2 size-3 -translate-x-1/2 -translate-y-1/2",{variants:{variant:{default:"fill-primary",theme:"fill-theme-links"}}}),U3e=Oi("focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-input text-primary",theme:"border-theme text-theme-0"}}});function oc({className:t,variant:e="theme",...n}){return c.jsx(L3e,{"data-slot":"radio-group-item",className:ge(U3e({variant:e,className:t})),...n,children:c.jsx(z3e,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:c.jsx(Pj,{className:ge($3e({variant:e}),"stroke-none")})})})}const H3e=()=>{const{activeTab:t,switchTab:e}=Fr();return c.jsxs(xk,{value:t,onValueChange:e,className:"grid grid-flow-col auto-cols-fr max-w-max gap-[5px] bg-theme-2 p-[3px] rounded-lg mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(oc,{value:"notes",id:"notes",className:"peer sr-only"}),c.jsx("label",{htmlFor:"notes",className:`cursor-pointer text-sm font-medium px-[15px] py-[5px] rounded-lg text-center w-full ${t==="notes"?"bg-theme-0":"hover:bg-theme-1"}`,children:"Notes"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(oc,{value:"transcript",id:"transcript",className:"peer sr-only"}),c.jsx("label",{htmlFor:"transcript",className:`cursor-pointer text-sm font-medium px-[15px] py-[5px] rounded-lg text-center w-full ${t==="transcript"?"bg-theme-0":"hover:bg-theme-1"}`,children:"Transcript"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(oc,{value:"ai",id:"ai",className:"peer sr-only"}),c.jsx("label",{htmlFor:"ai",className:`cursor-pointer text-sm font-medium px-[15px] py-[5px] rounded-lg text-center w-full ${t==="ai"?"bg-theme-0":"hover:bg-theme-1"}`,children:"SmartNote"})]})]})},VZ=()=>c.jsx("div",{className:"z-10 absolute bottom-0 left-0 w-full h-[50px] pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, var(--bcbackground-0, #fff))"}});function qZ(t){let n=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/```([\s\S]*?)```/g,`<pre style='background-color: #f3f4f6; padding: 0.75rem; border-radius: 0.375rem; margin: 0.5rem 0; overflow-x: auto; font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, Menlo, Consolas, monospace; font-size: 0.875rem; white-space: pre-wrap; border: 1px solid #e5e7eb;'><code>$1</code></pre>`);n=n.replace(/`([^`]+)`/g,`<code style='background-color: #f3f4f6; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, Menlo, Consolas, monospace; font-size: 0.875rem; border: 1px solid #e5e7eb;'>$1</code>`);const s=n.split(/\r?\n/).map(i=>{if(i.includes("<pre style=")||i.includes("</pre>")||i.includes("<code>"))return i;if(i.match(/^###\s+(.+)$/))return i.replace(/^###\s+(.+)$/,"<h3 style='font-size: 1.125rem; font-weight: 600; margin: 0.75rem 0 0.5rem 0; color: #111827;'>$1</h3>");if(i.match(/^##\s+(.+)$/))return i.replace(/^##\s+(.+)$/,"<h2 style='font-size: 1.25rem; font-weight: 600; margin: 1rem 0 0.5rem 0; color: #111827;'>$1</h2>");if(i.match(/^#\s+(.+)$/))return i.replace(/^#\s+(.+)$/,"<h1 style='font-size: 1.5rem; font-weight: 600; margin: 1.25rem 0 0.75rem 0; color: #111827;'>$1</h1>");if(i.match(/^---+$/))return"<hr style='border: none; border-top: 1px solid #e5e7eb; margin: 1rem 0; opacity: 0.6;' />";if(i.match(/^(\s*)-\s+(.+)$/)){const o=i.match(/^(\s*)-\s+(.+)$/);if(!o)return i;const l=o[1].length,u=o[2];return`<div style='margin: 0.25rem 0; margin-left: ${Math.floor(l/2)*1.5}rem; display: flex; align-items: flex-start;'><span style='color: #6b7280; margin-right: 0.5rem; font-size: 0.875rem;'></span><span style='font-size: 0.875rem;'>${u}</span></div>`}if(i.match(/^(\s*)(\d+)\.\s+(.+)$/)){const o=i.match(/^(\s*)(\d+)\.\s+(.+)$/);if(!o)return i;const l=o[1].length,u=o[2],d=o[3];return`<div style='margin: 0.25rem 0; margin-left: ${Math.floor(l/2)*1.5}rem; display: flex; align-items: flex-start;'><span style='color: #6b7280; margin-right: 0.5rem; font-size: 0.875rem; min-width: 1.5rem;'>${u}.</span><span style='font-size: 0.875rem;'>${d}</span></div>`}if(i.match(/^(\s+)(.+)$/)){const o=i.match(/^(\s+)(.+)$/);if(!o)return i;const l=o[1].length,u=o[2];return`<div style='margin: 0.25rem 0; margin-left: ${Math.floor(l/2)*1.5}rem; font-size: 0.875rem;'>${u}</div>`}return i});return s.map((i,o)=>{const l=s[o+1],d=i.includes("<h1")||i.includes("<h2")||i.includes("<h3")||i.includes("</h1>")||i.includes("</h2>")||i.includes("</h3>")||i.includes("<hr")||i.includes("<pre")||i.includes("</pre>")||i.includes("<div style="),f=l&&(l.includes("<h1")||l.includes("<h2")||l.includes("<h3")||l.includes("<hr")||l.includes("<pre")||l.includes("</pre>")||l.includes("<div style="));return d||f||o===s.length-1?i:i+"<br/>"}).join("").replace(/\*\*([\s\S]+?)\*\*/g,"<strong style='font-weight: 600;'>$1</strong>").replace(/\*([\s\S]+?)\*/g,"<em style='font-style: italic;'>$1</em>")}const V3e=t=>{if(t){const e=t;if(e.baseNode&&(e.startContainer=t.baseNode,e.endContainer=t.focusNode,e.startOffset=t.baseOffset,e.endOffset=t.focusOffset,e.endOffset<e.startOffset&&(e.startContainer=t.focusNode,e.endContainer=t.baseNode,e.startOffset=t.focusOffset,e.endOffset=t.baseOffset)),e.startContainer)return{start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e}}return null};function gR(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var q3e="DismissableLayer",Vj="dismissableLayer.update",G3e="dismissableLayer.pointerDownOutside",W3e="dismissableLayer.focusOutside",oU,GZ=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cv=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...l}=t,u=y.useContext(GZ),[d,f]=y.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),x=Bt(e,j=>f(j)),b=Array.from(u.layers),[C]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=b.indexOf(C),w=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,T=w>=S,_=X3e(j=>{const D=j.target,z=[...u.branches].some(F=>F.contains(D));!T||z||(s==null||s(j),i==null||i(j),j.defaultPrevented||o==null||o())},m),A=J3e(j=>{const D=j.target;[...u.branches].some(F=>F.contains(D))||(a==null||a(j),i==null||i(j),j.defaultPrevented||o==null||o())},m);return gR(j=>{w===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},m),y.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(oU=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),lU(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=oU)}},[d,m,n,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),lU())},[d,u]),y.useEffect(()=>{const j=()=>g({});return document.addEventListener(Vj,j),()=>document.removeEventListener(Vj,j)},[]),c.jsx(Nt.div,{...l,ref:x,style:{pointerEvents:E?T?"auto":"none":void 0,...t.style},onFocusCapture:yt(t.onFocusCapture,A.onFocusCapture),onBlurCapture:yt(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:yt(t.onPointerDownCapture,_.onPointerDownCapture)})});Cv.displayName=q3e;var K3e="DismissableLayerBranch",Y3e=y.forwardRef((t,e)=>{const n=y.useContext(GZ),r=y.useRef(null),s=Bt(e,r);return y.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),c.jsx(Nt.div,{...t,ref:s})});Y3e.displayName=K3e;function X3e(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let l=function(){WZ(G3e,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function J3e(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t),r=y.useRef(!1);return y.useEffect(()=>{const s=a=>{a.target&&!r.current&&WZ(W3e,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lU(){const t=new CustomEvent(Vj);document.dispatchEvent(t)}function WZ(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?k8(s,a):s.dispatchEvent(a)}const Q3e=["top","right","bottom","left"],xf=Math.min,To=Math.max,g4=Math.round,hC=Math.floor,du=t=>({x:t,y:t}),Z3e={left:"right",right:"left",bottom:"top",top:"bottom"},eTe={start:"end",end:"start"};function qj(t,e,n){return To(t,xf(e,n))}function Pd(t,e){return typeof t=="function"?t(e):t}function Fd(t){return t.split("-")[0]}function Sv(t){return t.split("-")[1]}function vR(t){return t==="x"?"y":"x"}function yR(t){return t==="y"?"height":"width"}const tTe=new Set(["top","bottom"]);function nu(t){return tTe.has(Fd(t))?"y":"x"}function xR(t){return vR(nu(t))}function nTe(t,e,n){n===void 0&&(n=!1);const r=Sv(t),s=xR(t),a=yR(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=v4(i)),[i,v4(i)]}function rTe(t){const e=v4(t);return[Gj(t),e,Gj(e)]}function Gj(t){return t.replace(/start|end/g,e=>eTe[e])}const cU=["left","right"],uU=["right","left"],sTe=["top","bottom"],aTe=["bottom","top"];function iTe(t,e,n){switch(t){case"top":case"bottom":return n?e?uU:cU:e?cU:uU;case"left":case"right":return e?sTe:aTe;default:return[]}}function oTe(t,e,n,r){const s=Sv(t);let a=iTe(Fd(t),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),e&&(a=a.concat(a.map(Gj)))),a}function v4(t){return t.replace(/left|right|bottom|top/g,e=>Z3e[e])}function lTe(t){return{top:0,right:0,bottom:0,left:0,...t}}function KZ(t){return typeof t!="number"?lTe(t):{top:t,right:t,bottom:t,left:t}}function y4(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function dU(t,e,n){let{reference:r,floating:s}=t;const a=nu(e),i=xR(e),o=yR(i),l=Fd(e),u=a==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[o]/2-s[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Sv(e)){case"start":g[i]-=m*(n&&u?-1:1);break;case"end":g[i]+=m*(n&&u?-1:1);break}return g}const cTe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,o=a.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=dU(u,r,l),m=r,g={},x=0;for(let b=0;b<o.length;b++){const{name:C,fn:S}=o[b],{x:w,y:E,data:T,reset:_}=await S({x:d,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:i,elements:{reference:t,floating:e}});d=w??d,f=E??f,g={...g,[C]:{...g[C],...T}},_&&x<=50&&(x++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(u=_.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:d,y:f}=dU(u,m,l)),b=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:g}};async function _1(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:i,elements:o,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Pd(e,t),x=KZ(g),C=o[m?f==="floating"?"reference":"floating":f],S=y4(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(C)))==null||n?C:C.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),w=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),T=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},_=y4(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:E,strategy:l}):w);return{top:(S.top-_.top+x.top)/T.y,bottom:(_.bottom-S.bottom+x.bottom)/T.y,left:(S.left-_.left+x.left)/T.x,right:(_.right-S.right+x.right)/T.x}}const uTe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:i,elements:o,middlewareData:l}=e,{element:u,padding:d=0}=Pd(t,e)||{};if(u==null)return{};const f=KZ(d),m={x:n,y:r},g=xR(s),x=yR(g),b=await i.getDimensions(u),C=g==="y",S=C?"top":"left",w=C?"bottom":"right",E=C?"clientHeight":"clientWidth",T=a.reference[x]+a.reference[g]-m[g]-a.floating[x],_=m[g]-a.reference[g],A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let j=A?A[E]:0;(!j||!await(i.isElement==null?void 0:i.isElement(A)))&&(j=o.floating[E]||a.floating[x]);const D=T/2-_/2,z=j/2-b[x]/2-1,F=xf(f[S],z),R=xf(f[w],z),L=F,O=j-b[x]-R,H=j/2-b[x]/2+D,P=qj(L,H,O),I=!l.arrow&&Sv(s)!=null&&H!==P&&a.reference[x]/2-(H<L?F:R)-b[x]/2<0,U=I?H<L?H-L:H-O:0;return{[g]:m[g]+U,data:{[g]:P,centerOffset:H-P-U,...I&&{alignmentOffset:U}},reset:I}}}),dTe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:b=!0,...C}=Pd(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const S=Fd(s),w=nu(o),E=Fd(o)===o,T=await(l.isRTL==null?void 0:l.isRTL(u.floating)),_=m||(E||!b?[v4(o)]:rTe(o)),A=x!=="none";!m&&A&&_.push(...oTe(o,b,x,T));const j=[o,..._],D=await _1(e,C),z=[];let F=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&z.push(D[S]),f){const H=nTe(s,i,T);z.push(D[H[0]],D[H[1]])}if(F=[...F,{placement:s,overflows:z}],!z.every(H=>H<=0)){var R,L;const H=(((R=a.flip)==null?void 0:R.index)||0)+1,P=j[H];if(P&&(!(f==="alignment"?w!==nu(P):!1)||F.every(W=>nu(W.placement)===w?W.overflows[0]>0:!0)))return{data:{index:H,overflows:F},reset:{placement:P}};let I=(L=F.filter(U=>U.overflows[0]<=0).sort((U,W)=>U.overflows[1]-W.overflows[1])[0])==null?void 0:L.placement;if(!I)switch(g){case"bestFit":{var O;const U=(O=F.filter(W=>{if(A){const Y=nu(W.placement);return Y===w||Y==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Y=>Y>0).reduce((Y,B)=>Y+B,0)]).sort((W,Y)=>W[1]-Y[1])[0])==null?void 0:O[0];U&&(I=U);break}case"initialPlacement":I=o;break}if(s!==I)return{reset:{placement:I}}}return{}}}};function hU(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fU(t){return Q3e.some(e=>t[e]>=0)}const hTe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Pd(t,e);switch(r){case"referenceHidden":{const a=await _1(e,{...s,elementContext:"reference"}),i=hU(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:fU(i)}}}case"escaped":{const a=await _1(e,{...s,altBoundary:!0}),i=hU(a,n.floating);return{data:{escapedOffsets:i,escaped:fU(i)}}}default:return{}}}}},YZ=new Set(["left","top"]);async function fTe(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Fd(n),o=Sv(n),l=nu(n)==="y",u=YZ.has(i)?-1:1,d=a&&l?-1:1,f=Pd(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof x=="number"&&(g=o==="end"?x*-1:x),l?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const mTe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:i,middlewareData:o}=e,l=await fTe(e,t);return i===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}}},pTe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:C=>{let{x:S,y:w}=C;return{x:S,y:w}}},...l}=Pd(t,e),u={x:n,y:r},d=await _1(e,l),f=nu(Fd(s)),m=vR(f);let g=u[m],x=u[f];if(a){const C=m==="y"?"top":"left",S=m==="y"?"bottom":"right",w=g+d[C],E=g-d[S];g=qj(w,g,E)}if(i){const C=f==="y"?"top":"left",S=f==="y"?"bottom":"right",w=x+d[C],E=x-d[S];x=qj(w,x,E)}const b=o.fn({...e,[m]:g,[f]:x});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:a,[f]:i}}}}}},gTe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Pd(t,e),d={x:n,y:r},f=nu(s),m=vR(f);let g=d[m],x=d[f];const b=Pd(o,e),C=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=m==="y"?"height":"width",T=a.reference[m]-a.floating[E]+C.mainAxis,_=a.reference[m]+a.reference[E]-C.mainAxis;g<T?g=T:g>_&&(g=_)}if(u){var S,w;const E=m==="y"?"width":"height",T=YZ.has(Fd(s)),_=a.reference[f]-a.floating[E]+(T&&((S=i.offset)==null?void 0:S[f])||0)+(T?0:C.crossAxis),A=a.reference[f]+a.reference[E]+(T?0:((w=i.offset)==null?void 0:w[f])||0)-(T?C.crossAxis:0);x<_?x=_:x>A&&(x=A)}return{[m]:g,[f]:x}}}},vTe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:i,elements:o}=e,{apply:l=()=>{},...u}=Pd(t,e),d=await _1(e,u),f=Fd(s),m=Sv(s),g=nu(s)==="y",{width:x,height:b}=a.floating;let C,S;f==="top"||f==="bottom"?(C=f,S=m===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(S=f,C=m==="end"?"top":"bottom");const w=b-d.top-d.bottom,E=x-d.left-d.right,T=xf(b-d[C],w),_=xf(x-d[S],E),A=!e.middlewareData.shift;let j=T,D=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(D=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=w),A&&!m){const F=To(d.left,0),R=To(d.right,0),L=To(d.top,0),O=To(d.bottom,0);g?D=x-2*(F!==0||R!==0?F+R:To(d.left,d.right)):j=b-2*(L!==0||O!==0?L+O:To(d.top,d.bottom))}await l({...e,availableWidth:D,availableHeight:j});const z=await i.getDimensions(o.floating);return x!==z.width||b!==z.height?{reset:{rects:!0}}:{}}}};function bk(){return typeof window<"u"}function kv(t){return XZ(t)?(t.nodeName||"").toLowerCase():"#document"}function Io(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _u(t){var e;return(e=(XZ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XZ(t){return bk()?t instanceof Node||t instanceof Io(t).Node:!1}function gc(t){return bk()?t instanceof Element||t instanceof Io(t).Element:!1}function gu(t){return bk()?t instanceof HTMLElement||t instanceof Io(t).HTMLElement:!1}function mU(t){return!bk()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Io(t).ShadowRoot}const yTe=new Set(["inline","contents"]);function Jb(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=vc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!yTe.has(s)}const xTe=new Set(["table","td","th"]);function bTe(t){return xTe.has(kv(t))}const wTe=[":popover-open",":modal"];function wk(t){return wTe.some(e=>{try{return t.matches(e)}catch{return!1}})}const CTe=["transform","translate","scale","rotate","perspective"],STe=["transform","translate","scale","rotate","perspective","filter"],kTe=["paint","layout","strict","content"];function bR(t){const e=wR(),n=gc(t)?vc(t):t;return CTe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||STe.some(r=>(n.willChange||"").includes(r))||kTe.some(r=>(n.contain||"").includes(r))}function ETe(t){let e=bf(t);for(;gu(e)&&!Ig(e);){if(bR(e))return e;if(wk(e))return null;e=bf(e)}return null}function wR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _Te=new Set(["html","body","#document"]);function Ig(t){return _Te.has(kv(t))}function vc(t){return Io(t).getComputedStyle(t)}function Ck(t){return gc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bf(t){if(kv(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mU(t)&&t.host||_u(t);return mU(e)?e.host:e}function JZ(t){const e=bf(t);return Ig(e)?t.ownerDocument?t.ownerDocument.body:t.body:gu(e)&&Jb(e)?e:JZ(e)}function T1(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=JZ(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),i=Io(s);if(a){const o=Wj(i);return e.concat(i,i.visualViewport||[],Jb(s)?s:[],o&&n?T1(o):[])}return e.concat(s,T1(s,[],n))}function Wj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function QZ(t){const e=vc(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=gu(t),a=s?t.offsetWidth:n,i=s?t.offsetHeight:r,o=g4(n)!==a||g4(r)!==i;return o&&(n=a,r=i),{width:n,height:r,$:o}}function CR(t){return gc(t)?t:t.contextElement}function dg(t){const e=CR(t);if(!gu(e))return du(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=QZ(e);let i=(a?g4(n.width):n.width)/r,o=(a?g4(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!o||!Number.isFinite(o))&&(o=1),{x:i,y:o}}const TTe=du(0);function ZZ(t){const e=Io(t);return!wR()||!e.visualViewport?TTe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ATe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Io(t)?!1:e}function e0(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=CR(t);let i=du(1);e&&(r?gc(r)&&(i=dg(r)):i=dg(t));const o=ATe(a,n,r)?ZZ(a):du(0);let l=(s.left+o.x)/i.x,u=(s.top+o.y)/i.y,d=s.width/i.x,f=s.height/i.y;if(a){const m=Io(a),g=r&&gc(r)?Io(r):r;let x=m,b=Wj(x);for(;b&&r&&g!==x;){const C=dg(b),S=b.getBoundingClientRect(),w=vc(b),E=S.left+(b.clientLeft+parseFloat(w.paddingLeft))*C.x,T=S.top+(b.clientTop+parseFloat(w.paddingTop))*C.y;l*=C.x,u*=C.y,d*=C.x,f*=C.y,l+=E,u+=T,x=Io(b),b=Wj(x)}}return y4({width:d,height:f,x:l,y:u})}function SR(t,e){const n=Ck(t).scrollLeft;return e?e.left+n:e0(_u(t)).left+n}function eee(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:SR(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function NTe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",i=_u(r),o=e?wk(e.floating):!1;if(r===i||o&&a)return n;let l={scrollLeft:0,scrollTop:0},u=du(1);const d=du(0),f=gu(r);if((f||!f&&!a)&&((kv(r)!=="body"||Jb(i))&&(l=Ck(r)),gu(r))){const g=e0(r);u=dg(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=i&&!f&&!a?eee(i,l,!0):du(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}}function jTe(t){return Array.from(t.getClientRects())}function DTe(t){const e=_u(t),n=Ck(t),r=t.ownerDocument.body,s=To(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=To(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+SR(t);const o=-n.scrollTop;return vc(r).direction==="rtl"&&(i+=To(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:o}}function RTe(t,e){const n=Io(t),r=_u(t),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,o=0,l=0;if(s){a=s.width,i=s.height;const u=wR();(!u||u&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:a,height:i,x:o,y:l}}const MTe=new Set(["absolute","fixed"]);function ITe(t,e){const n=e0(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=gu(t)?dg(t):du(1),i=t.clientWidth*a.x,o=t.clientHeight*a.y,l=s*a.x,u=r*a.y;return{width:i,height:o,x:l,y:u}}function pU(t,e,n){let r;if(e==="viewport")r=RTe(t,n);else if(e==="document")r=DTe(_u(t));else if(gc(e))r=ITe(e,n);else{const s=ZZ(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return y4(r)}function tee(t,e){const n=bf(t);return n===e||!gc(n)||Ig(n)?!1:vc(n).position==="fixed"||tee(n,e)}function OTe(t,e){const n=e.get(t);if(n)return n;let r=T1(t,[],!1).filter(o=>gc(o)&&kv(o)!=="body"),s=null;const a=vc(t).position==="fixed";let i=a?bf(t):t;for(;gc(i)&&!Ig(i);){const o=vc(i),l=bR(i);!l&&o.position==="fixed"&&(s=null),(a?!l&&!s:!l&&o.position==="static"&&!!s&&MTe.has(s.position)||Jb(i)&&!l&&tee(t,i))?r=r.filter(d=>d!==i):s=o,i=bf(i)}return e.set(t,r),r}function PTe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?wk(e)?[]:OTe(e,this._c):[].concat(n),r],o=i[0],l=i.reduce((u,d)=>{const f=pU(e,d,s);return u.top=To(f.top,u.top),u.right=xf(f.right,u.right),u.bottom=xf(f.bottom,u.bottom),u.left=To(f.left,u.left),u},pU(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function FTe(t){const{width:e,height:n}=QZ(t);return{width:e,height:n}}function BTe(t,e,n){const r=gu(e),s=_u(e),a=n==="fixed",i=e0(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=du(0);function u(){l.x=SR(s)}if(r||!r&&!a)if((kv(e)!=="body"||Jb(s))&&(o=Ck(e)),r){const g=e0(e,!0,a,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?eee(s,o):du(0),f=i.left+o.scrollLeft-l.x-d.x,m=i.top+o.scrollTop-l.y-d.y;return{x:f,y:m,width:i.width,height:i.height}}function lA(t){return vc(t).position==="static"}function gU(t,e){if(!gu(t)||vc(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _u(t)===n&&(n=n.ownerDocument.body),n}function nee(t,e){const n=Io(t);if(wk(t))return n;if(!gu(t)){let s=bf(t);for(;s&&!Ig(s);){if(gc(s)&&!lA(s))return s;s=bf(s)}return n}let r=gU(t,e);for(;r&&bTe(r)&&lA(r);)r=gU(r,e);return r&&Ig(r)&&lA(r)&&!bR(r)?n:r||ETe(t)||n}const LTe=async function(t){const e=this.getOffsetParent||nee,n=this.getDimensions,r=await n(t.floating);return{reference:BTe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zTe(t){return vc(t).direction==="rtl"}const $Te={convertOffsetParentRelativeRectToViewportRelativeRect:NTe,getDocumentElement:_u,getClippingRect:PTe,getOffsetParent:nee,getElementRects:LTe,getClientRects:jTe,getDimensions:FTe,getScale:dg,isElement:gc,isRTL:zTe};function ree(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function UTe(t,e){let n=null,r;const s=_u(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function i(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const u=t.getBoundingClientRect(),{left:d,top:f,width:m,height:g}=u;if(o||e(),!m||!g)return;const x=hC(f),b=hC(s.clientWidth-(d+m)),C=hC(s.clientHeight-(f+g)),S=hC(d),E={rootMargin:-x+"px "+-b+"px "+-C+"px "+-S+"px",threshold:To(0,xf(1,l))||1};let T=!0;function _(A){const j=A[0].intersectionRatio;if(j!==l){if(!T)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}j===1&&!ree(u,t.getBoundingClientRect())&&i(),T=!1}try{n=new IntersectionObserver(_,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,E)}n.observe(t)}return i(!0),a}function HTe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=CR(t),d=s||a?[...u?T1(u):[],...T1(e)]:[];d.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),a&&S.addEventListener("resize",n)});const f=u&&o?UTe(u,n):null;let m=-1,g=null;i&&(g=new ResizeObserver(S=>{let[w]=S;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(e)})),n()}),u&&!l&&g.observe(u),g.observe(e));let x,b=l?e0(t):null;l&&C();function C(){const S=e0(t);b&&!ree(b,S)&&n(),b=S,x=requestAnimationFrame(C)}return n(),()=>{var S;d.forEach(w=>{s&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),f==null||f(),(S=g)==null||S.disconnect(),g=null,l&&cancelAnimationFrame(x)}}const VTe=mTe,qTe=pTe,GTe=dTe,WTe=vTe,KTe=hTe,vU=uTe,YTe=gTe,XTe=(t,e,n)=>{const r=new Map,s={platform:$Te,...n},a={...s.platform,_c:r};return cTe(t,e,{...s,platform:a})};var JTe=typeof document<"u",QTe=function(){},wS=JTe?y.useLayoutEffect:QTe;function x4(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!x4(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!x4(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function see(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yU(t,e){const n=see(t);return Math.round(e*n)/n}function cA(t){const e=y.useRef(t);return wS(()=>{e.current=t}),e}function ZTe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:u}=t,[d,f]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=y.useState(r);x4(m,r)||g(r);const[x,b]=y.useState(null),[C,S]=y.useState(null),w=y.useCallback(W=>{W!==A.current&&(A.current=W,b(W))},[]),E=y.useCallback(W=>{W!==j.current&&(j.current=W,S(W))},[]),T=a||x,_=i||C,A=y.useRef(null),j=y.useRef(null),D=y.useRef(d),z=l!=null,F=cA(l),R=cA(s),L=cA(u),O=y.useCallback(()=>{if(!A.current||!j.current)return;const W={placement:e,strategy:n,middleware:m};R.current&&(W.platform=R.current),XTe(A.current,j.current,W).then(Y=>{const B={...Y,isPositioned:L.current!==!1};H.current&&!x4(D.current,B)&&(D.current=B,tu.flushSync(()=>{f(B)}))})},[m,e,n,R,L]);wS(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[u]);const H=y.useRef(!1);wS(()=>(H.current=!0,()=>{H.current=!1}),[]),wS(()=>{if(T&&(A.current=T),_&&(j.current=_),T&&_){if(F.current)return F.current(T,_,O);O()}},[T,_,O,F,z]);const P=y.useMemo(()=>({reference:A,floating:j,setReference:w,setFloating:E}),[w,E]),I=y.useMemo(()=>({reference:T,floating:_}),[T,_]),U=y.useMemo(()=>{const W={position:n,left:0,top:0};if(!I.floating)return W;const Y=yU(I.floating,d.x),B=yU(I.floating,d.y);return o?{...W,transform:"translate("+Y+"px, "+B+"px)",...see(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:B}},[n,o,I.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:O,refs:P,elements:I,floatingStyles:U}),[d,O,P,I,U])}const eAe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?vU({element:r.current,padding:s}).fn(n):{}:r?vU({element:r,padding:s}).fn(n):{}}}},tAe=(t,e)=>({...VTe(t),options:[t,e]}),nAe=(t,e)=>({...qTe(t),options:[t,e]}),rAe=(t,e)=>({...YTe(t),options:[t,e]}),sAe=(t,e)=>({...GTe(t),options:[t,e]}),aAe=(t,e)=>({...WTe(t),options:[t,e]}),iAe=(t,e)=>({...KTe(t),options:[t,e]}),oAe=(t,e)=>({...eAe(t),options:[t,e]});var lAe="Arrow",aee=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return c.jsx(Nt.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});aee.displayName=lAe;var cAe=aee,kR="Popper",[iee,Pf]=Fa(kR),[uAe,oee]=iee(kR),lee=t=>{const{__scopePopper:e,children:n}=t,[r,s]=y.useState(null);return c.jsx(uAe,{scope:e,anchor:r,onAnchorChange:s,children:n})};lee.displayName=kR;var cee="PopperAnchor",uee=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=oee(cee,n),i=y.useRef(null),o=Bt(e,i);return y.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:c.jsx(Nt.div,{...s,ref:o})});uee.displayName=cee;var ER="PopperContent",[dAe,hAe]=iee(ER),dee=y.forwardRef((t,e)=>{var de,fe,se,ce,ue,oe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...b}=t,C=oee(ER,n),[S,w]=y.useState(null),E=Bt(e,Ne=>w(Ne)),[T,_]=y.useState(null),A=gk(T),j=(A==null?void 0:A.width)??0,D=(A==null?void 0:A.height)??0,z=r+(a!=="center"?"-"+a:""),F=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],L=R.length>0,O={padding:F,boundary:R.filter(mAe),altBoundary:L},{refs:H,floatingStyles:P,placement:I,isPositioned:U,middlewareData:W}=ZTe({strategy:"fixed",placement:z,whileElementsMounted:(...Ne)=>HTe(...Ne,{animationFrame:g==="always"}),elements:{reference:C.anchor},middleware:[tAe({mainAxis:s+D,alignmentAxis:i}),l&&nAe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?rAe():void 0,...O}),l&&sAe({...O}),aAe({...O,apply:({elements:Ne,rects:ve,availableWidth:He,availableHeight:nt})=>{const{width:Me,height:$e}=ve.reference,Le=Ne.floating.style;Le.setProperty("--radix-popper-available-width",`${He}px`),Le.setProperty("--radix-popper-available-height",`${nt}px`),Le.setProperty("--radix-popper-anchor-width",`${Me}px`),Le.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),T&&oAe({element:T,padding:o}),pAe({arrowWidth:j,arrowHeight:D}),m&&iAe({strategy:"referenceHidden",...O})]}),[Y,B]=mee(I),Z=Pr(x);ya(()=>{U&&(Z==null||Z())},[U,Z]);const le=(de=W.arrow)==null?void 0:de.x,G=(fe=W.arrow)==null?void 0:fe.y,K=((se=W.arrow)==null?void 0:se.centerOffset)!==0,[te,ie]=y.useState();return ya(()=>{S&&ie(window.getComputedStyle(S).zIndex)},[S]),c.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:U?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(ce=W.transformOrigin)==null?void 0:ce.x,(ue=W.transformOrigin)==null?void 0:ue.y].join(" "),...((oe=W.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(dAe,{scope:n,placedSide:Y,onArrowChange:_,arrowX:le,arrowY:G,shouldHideArrow:K,children:c.jsx(Nt.div,{"data-side":Y,"data-align":B,...b,ref:E,style:{...b.style,animation:U?void 0:"none"}})})})});dee.displayName=ER;var hee="PopperArrow",fAe={top:"bottom",right:"left",bottom:"top",left:"right"},fee=y.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=hAe(hee,r),i=fAe[a.placedSide];return c.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:c.jsx(cAe,{...s,ref:n,style:{...s.style,display:"block"}})})});fee.displayName=hee;function mAe(t){return t!==null}var pAe=t=>({name:"transformOrigin",options:t,fn(e){var C,S,w;const{placement:n,rects:r,middlewareData:s}=e,i=((C=s.arrow)==null?void 0:C.centerOffset)!==0,o=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[u,d]=mee(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((S=s.arrow)==null?void 0:S.x)??0)+o/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let x="",b="";return u==="bottom"?(x=i?f:`${m}px`,b=`${-l}px`):u==="top"?(x=i?f:`${m}px`,b=`${r.floating.height+l}px`):u==="right"?(x=`${-l}px`,b=i?f:`${g}px`):u==="left"&&(x=`${r.floating.width+l}px`,b=i?f:`${g}px`),{data:{x,y:b}}}});function mee(t){const[e,n="center"]=t.split("-");return[e,n]}var Qb=lee,Zb=uee,Sk=dee,kk=fee,gAe="Portal",E0=y.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[s,a]=y.useState(!1);ya(()=>a(!0),[]);const i=n||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return i?nk.createPortal(c.jsx(Nt.div,{...r,ref:e}),i):null});E0.displayName=gAe;var pee=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vAe="VisuallyHidden",gee=y.forwardRef((t,e)=>c.jsx(Nt.span,{...t,ref:e,style:{...pee,...t.style}}));gee.displayName=vAe;var yAe=gee,[Ek]=Fa("Tooltip",[Pf]),_k=Pf(),vee="TooltipProvider",xAe=700,Kj="tooltip.open",[bAe,_R]=Ek(vee),yee=t=>{const{__scopeTooltip:e,delayDuration:n=xAe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,i=y.useRef(!0),o=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(bAe,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:y.useCallback(u=>{o.current=u},[]),disableHoverableContent:s,children:a})};yee.displayName=vee;var A1="Tooltip",[wAe,ew]=Ek(A1),xee=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:o}=t,l=_R(A1,t.__scopeTooltip),u=_k(e),[d,f]=y.useState(null),m=Ma(),g=y.useRef(0),x=i??l.disableHoverableContent,b=o??l.delayDuration,C=y.useRef(!1),[S,w]=Mi({prop:r,defaultProp:s??!1,onChange:j=>{j?(l.onOpen(),document.dispatchEvent(new CustomEvent(Kj))):l.onClose(),a==null||a(j)},caller:A1}),E=y.useMemo(()=>S?C.current?"delayed-open":"instant-open":"closed",[S]),T=y.useCallback(()=>{window.clearTimeout(g.current),g.current=0,C.current=!1,w(!0)},[w]),_=y.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),A=y.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{C.current=!0,w(!0),g.current=0},b)},[b,w]);return y.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),c.jsx(Qb,{...u,children:c.jsx(wAe,{scope:e,contentId:m,open:S,stateAttribute:E,trigger:d,onTriggerChange:f,onTriggerEnter:y.useCallback(()=>{l.isOpenDelayedRef.current?A():T()},[l.isOpenDelayedRef,A,T]),onTriggerLeave:y.useCallback(()=>{x?_():(window.clearTimeout(g.current),g.current=0)},[_,x]),onOpen:T,onClose:_,disableHoverableContent:x,children:n})})};xee.displayName=A1;var Yj="TooltipTrigger",TR=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=ew(Yj,n),a=_R(Yj,n),i=_k(n),o=y.useRef(null),l=Bt(e,o,s.onTriggerChange),u=y.useRef(!1),d=y.useRef(!1),f=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(Zb,{asChild:!0,...i,children:c.jsx(Nt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:yt(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:yt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:yt(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:yt(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:yt(t.onBlur,s.onClose),onClick:yt(t.onClick,s.onClose)})})});TR.displayName=Yj;var AR="TooltipPortal",[CAe,SAe]=Ek(AR,{forceMount:void 0}),bee=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,a=ew(AR,e);return c.jsx(CAe,{scope:e,forceMount:n,children:c.jsx(Ba,{present:n||a.open,children:c.jsx(E0,{asChild:!0,container:s,children:r})})})};bee.displayName=AR;var Og="TooltipContent",wee=y.forwardRef((t,e)=>{const n=SAe(Og,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,i=ew(Og,t.__scopeTooltip);return c.jsx(Ba,{present:r||i.open,children:i.disableHoverableContent?c.jsx(Cee,{side:s,...a,ref:e}):c.jsx(kAe,{side:s,...a,ref:e})})}),kAe=y.forwardRef((t,e)=>{const n=ew(Og,t.__scopeTooltip),r=_R(Og,t.__scopeTooltip),s=y.useRef(null),a=Bt(e,s),[i,o]=y.useState(null),{trigger:l,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,m=y.useCallback(()=>{o(null),f(!1)},[f]),g=y.useCallback((x,b)=>{const C=x.currentTarget,S={x:x.clientX,y:x.clientY},w=AAe(S,C.getBoundingClientRect()),E=NAe(S,w),T=jAe(b.getBoundingClientRect()),_=RAe([...E,...T]);o(_),f(!0)},[f]);return y.useEffect(()=>()=>m(),[m]),y.useEffect(()=>{if(l&&d){const x=C=>g(C,d),b=C=>g(C,l);return l.addEventListener("pointerleave",x),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",b)}}},[l,d,g,m]),y.useEffect(()=>{if(i){const x=b=>{const C=b.target,S={x:b.clientX,y:b.clientY},w=(l==null?void 0:l.contains(C))||(d==null?void 0:d.contains(C)),E=!DAe(S,i);w?m():E&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,d,i,u,m]),c.jsx(Cee,{...t,ref:a})}),[EAe,_Ae]=Ek(A1,{isInside:!1}),TAe=S8("TooltipContent"),Cee=y.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=t,l=ew(Og,n),u=_k(n),{onClose:d}=l;return y.useEffect(()=>(document.addEventListener(Kj,d),()=>document.removeEventListener(Kj,d)),[d]),y.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),c.jsx(Cv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:c.jsxs(Sk,{"data-state":l.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(TAe,{children:r}),c.jsx(EAe,{scope:n,isInside:!0,children:c.jsx(yAe,{id:l.contentId,role:"tooltip",children:s||r})})]})})});wee.displayName=Og;var See="TooltipArrow",kee=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=_k(n);return _Ae(See,n).isInside?null:c.jsx(kk,{...s,...r,ref:e})});kee.displayName=See;function AAe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function NAe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function jAe(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function DAe(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const o=e[a],l=e[i],u=o.x,d=o.y,f=l.x,m=l.y;d>r!=m>r&&n<(f-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function RAe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),MAe(e)}function MAe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],i=e[e.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var IAe=yee,OAe=xee,PAe=TR,FAe=bee,BAe=wee;function yc({delayDuration:t=0,...e}){return c.jsx(IAe,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function ga({delayDuration:t=0,disableHoverableContent:e=!0,...n}){return c.jsx(yc,{delayDuration:t,disableHoverableContent:e,children:c.jsx(OAe,{"data-slot":"tooltip",...n})})}function Ia({...t}){return c.jsx(PAe,{"data-slot":"tooltip-trigger",...t})}const LAe=Oi("z-10000 overflow-hidden animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",{variants:{variant:{default:"rounded-md border bg-popover text-popover-foreground shadow-md text-sm px-3 py-1.5",theme:"flex items-center justify-center bg-theme-2 text-theme-0 rounded-md px-3 py-1.5 text-xs"},size:{default:"px-2 py-1.5 min-w-9",sm:"px-1.5 py-1 min-w-8",lg:"px-2.5 py-1.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function va({className:t,sideOffset:e=0,children:n,variant:r="theme",container:s,...a}){return typeof s=="function"&&(s=s==null?void 0:s()),c.jsx(FAe,{container:s,children:c.jsx(BAe,{"data-slot":"tooltip-content",sideOffset:e,className:ge(LAe({variant:r,className:t})),...a,children:n})})}const NR=({children:t,...e})=>t,jR=({children:t,...e})=>t,Eee=({children:t,restrictedPlans:e,onClick:n,onRestricted:r,...s})=>{const{planType:a}=wa(),{restrictedActionCheck:i}=ut(),o=a,l=e.includes(o),u=m=>{i(e,r)||n==null||n(m)};if(!t)return null;const d=t==null?void 0:t.find(m=>m.type===jR),f=t==null?void 0:t.find(m=>m.type===NR);return l&&d?c.jsx("button",{onClick:u,...s,children:d}):!l&&f?c.jsx("button",{onClick:u,...s,children:f}):null},b4=({restrictedPlans:t,children:e,...n})=>{const{planType:r}=wa(),s=r,[a,i]=y.useState(!1),[o,l]=y.useState(null);if(t.includes(s)){const{className:u,...d}=n;return c.jsxs("div",{className:"flex items-center gap-1",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[a&&c.jsx("div",{ref:l,className:"fixed z-[9999999999999] top-0 left-0 w-full h-full pointer-events-none"}),c.jsxs(ga,{children:[c.jsx(Ia,{children:c.jsx(iZ,{...d,className:u})}),a&&o&&c.jsx(va,{side:(n==null?void 0:n.side)||"top",sideOffset:10,children:s==="trial"?"You have access to this pro feature during your trial!":"This is a pro feature!"})]}),e]})}return e},zAe=()=>{const{noteId:t,setSmartNote:e,getSmartNoteContent:n,settings:r,transcript:s}=Fr(),{authenticatedClient:a,authenticatedFetch:i}=ut(),o=async()=>{await a();const l=await i(`${Jr}/notes/smart-note`,{method:"POST",body:{noteId:t}});if(!l.body)return;const u=l.body.getReader(),d=new TextDecoder;let f="";for(;;){const{done:m,value:g}=await u.read();if(m)break;const b=d.decode(g).split(`

`);for(const C of b)if(console.log("line",C),C.startsWith("data: "))try{const S=JSON.parse(C.slice(6));if(S.type==="delta")f+=S.delta||"",e(f);else if(S.type==="done")e(S.text||f);else if(S.type==="error")throw console.error("Stream error:",S.error),new Error(S.error)}catch(S){console.error("Error parsing stream data:",S)}}};return c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsxs(Eee,{restrictedPlans:["none","free","proLite"],onClick:o,children:[c.jsx(jR,{children:c.jsx("button",{onClick:o,children:c.jsx(b4,{restrictedPlans:["none","free","proLite"],className:"size-3.5 fill-current text-theme-0",children:c.jsx("span",{children:"Generate smart note"})})})}),c.jsx(NR,{children:c.jsx("button",{onClick:o,children:c.jsxs(b4,{restrictedPlans:["trial","trialThenPro"],className:"size-3.5 fill-current text-theme-0",side:"bottom",children:[c.jsx(bv,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Generate smart note"})]})})})]}),c.jsxs("p",{className:"text-sm text-theme-1 text-center mt-[5px]",children:["Based on your notes ",s.length>0?" and transcript":""]})]})},$Ae=()=>{const{noteId:t,smartNote:e,getSmartNoteContent:n,setSmartNote:r,transcript:s}=Fr(),[a,i]=y.useState(!1),o=y.useRef(!1);return y.useEffect(()=>{t&&o.current!==!0&&(o.current=!0,i(!0),n(t).then(l=>{r(l),i(!1)}))},[t]),a?c.jsx("div",{className:"flex flex-col gap-[10px]"}):e?c.jsx("div",{className:"flex flex-col gap-[10px]",children:c.jsx("div",{className:"pb-[40px]",dangerouslySetInnerHTML:{__html:qZ(e)}})}):c.jsx("div",{className:"flex items-center justify-center h-full w-full",children:c.jsx(zAe,{})})},UAe=()=>{const{activeTab:t}=Fr();return t!=="ai"?null:c.jsxs("div",{className:"w-full h-full relative min-h-0 overflow-auto",children:[c.jsx($Ae,{}),c.jsx(VZ,{})]})};var uA="focusScope.autoFocusOnMount",dA="focusScope.autoFocusOnUnmount",xU={bubbles:!1,cancelable:!0},HAe="FocusScope",Ev=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=t,[o,l]=y.useState(null),u=Pr(s),d=Pr(a),f=y.useRef(null),m=Bt(e,b=>l(b)),g=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let b=function(E){if(g.paused||!o)return;const T=E.target;o.contains(T)?f.current=T:zh(f.current,{select:!0})},C=function(E){if(g.paused||!o)return;const T=E.relatedTarget;T!==null&&(o.contains(T)||zh(f.current,{select:!0}))},S=function(E){if(document.activeElement===document.body)for(const _ of E)_.removedNodes.length>0&&zh(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",C);const w=new MutationObserver(S);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",C),w.disconnect()}}},[r,o,g.paused]),y.useEffect(()=>{if(o){wU.add(g);const b=document.activeElement;if(!o.contains(b)){const S=new CustomEvent(uA,xU);o.addEventListener(uA,u),o.dispatchEvent(S),S.defaultPrevented||(VAe(YAe(_ee(o)),{select:!0}),document.activeElement===b&&zh(o))}return()=>{o.removeEventListener(uA,u),setTimeout(()=>{const S=new CustomEvent(dA,xU);o.addEventListener(dA,d),o.dispatchEvent(S),S.defaultPrevented||zh(b??document.body,{select:!0}),o.removeEventListener(dA,d),wU.remove(g)},0)}}},[o,u,d,g]);const x=y.useCallback(b=>{if(!n&&!r||g.paused)return;const C=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,S=document.activeElement;if(C&&S){const w=b.currentTarget,[E,T]=qAe(w);E&&T?!b.shiftKey&&S===T?(b.preventDefault(),n&&zh(E,{select:!0})):b.shiftKey&&S===E&&(b.preventDefault(),n&&zh(T,{select:!0})):S===w&&b.preventDefault()}},[n,r,g.paused]);return c.jsx(Nt.div,{tabIndex:-1,...i,ref:m,onKeyDown:x})});Ev.displayName=HAe;function VAe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(zh(r,{select:e}),document.activeElement!==n)return}function qAe(t){const e=_ee(t),n=bU(e,t),r=bU(e.reverse(),t);return[n,r]}function _ee(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bU(t,e){for(const n of t)if(!GAe(n,{upTo:e}))return n}function GAe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function WAe(t){return t instanceof HTMLInputElement&&"select"in t}function zh(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&WAe(t)&&e&&t.select()}}var wU=KAe();function KAe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=CU(t,e),t.unshift(e)},remove(e){var n;t=CU(t,e),(n=t[0])==null||n.resume()}}}function CU(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function YAe(t){return t.filter(e=>e.tagName!=="A")}var hA=0;function Tk(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??SU()),document.body.insertAdjacentElement("beforeend",t[1]??SU()),hA++,()=>{hA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hA--}},[])}function SU(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Qc=function(){return Qc=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qc.apply(this,arguments)};function Tee(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XAe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var CS="right-scroll-bar-position",SS="width-before-scroll-bar",JAe="with-scroll-bars-hidden",QAe="--removed-body-scroll-bar-size";function fA(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ZAe(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var e6e=typeof window<"u"?y.useLayoutEffect:y.useEffect,kU=new WeakMap;function t6e(t,e){var n=ZAe(null,function(r){return t.forEach(function(s){return fA(s,r)})});return e6e(function(){var r=kU.get(n);if(r){var s=new Set(r),a=new Set(t),i=n.current;s.forEach(function(o){a.has(o)||fA(o,null)}),a.forEach(function(o){s.has(o)||fA(o,i)})}kU.set(n,t)},[t]),n}function n6e(t){return t}function r6e(t,e){e===void 0&&(e=n6e);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var i=e(a,r);return n.push(i),function(){n=n.filter(function(o){return o!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var o=n;n=[],o.forEach(a),i=n}var l=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function s6e(t){t===void 0&&(t={});var e=r6e(null);return e.options=Qc({async:!0,ssr:!1},t),e}var Aee=function(t){var e=t.sideCar,n=Tee(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Qc({},n))};Aee.isSideCarExport=!0;function a6e(t,e){return t.useMedium(e),Aee}var Nee=s6e(),mA=function(){},Ak=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:mA,onWheelCapture:mA,onTouchMoveCapture:mA}),s=r[0],a=r[1],i=t.forwardProps,o=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,g=t.noRelative,x=t.noIsolation,b=t.inert,C=t.allowPinchZoom,S=t.as,w=S===void 0?"div":S,E=t.gapMode,T=Tee(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,A=t6e([n,e]),j=Qc(Qc({},T),s);return y.createElement(y.Fragment,null,d&&y.createElement(_,{sideCar:Nee,removeScrollBar:u,shards:f,noRelative:g,noIsolation:x,inert:b,setCallbacks:a,allowPinchZoom:!!C,lockRef:n,gapMode:E}),i?y.cloneElement(y.Children.only(o),Qc(Qc({},j),{ref:A})):y.createElement(w,Qc({},j,{className:l,ref:A}),o))});Ak.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ak.classNames={fullWidth:SS,zeroRight:CS};var i6e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function o6e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=i6e();return e&&t.setAttribute("nonce",e),t}function l6e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function c6e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var u6e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=o6e())&&(l6e(e,n),c6e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},d6e=function(){var t=u6e();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jee=function(){var t=d6e(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},h6e={left:0,top:0,right:0,gap:0},pA=function(t){return parseInt(t||"",10)||0},f6e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[pA(n),pA(r),pA(s)]},m6e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return h6e;var e=f6e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},p6e=jee(),hg="data-scroll-locked",g6e=function(t,e,n,r){var s=t.left,a=t.top,i=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(JAe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(hg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(CS,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(SS,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(CS," .").concat(CS,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(SS," .").concat(SS,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hg,`] {
    `).concat(QAe,": ").concat(o,`px;
  }
`)},EU=function(){var t=parseInt(document.body.getAttribute(hg)||"0",10);return isFinite(t)?t:0},v6e=function(){y.useEffect(function(){return document.body.setAttribute(hg,(EU()+1).toString()),function(){var t=EU()-1;t<=0?document.body.removeAttribute(hg):document.body.setAttribute(hg,t.toString())}},[])},y6e=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;v6e();var a=y.useMemo(function(){return m6e(s)},[s]);return y.createElement(p6e,{styles:g6e(a,!e,s,n?"":"!important")})},Xj=!1;if(typeof window<"u")try{var fC=Object.defineProperty({},"passive",{get:function(){return Xj=!0,!0}});window.addEventListener("test",fC,fC),window.removeEventListener("test",fC,fC)}catch{Xj=!1}var Ap=Xj?{passive:!1}:!1,x6e=function(t){return t.tagName==="TEXTAREA"},Dee=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!x6e(t)&&n[e]==="visible")},b6e=function(t){return Dee(t,"overflowY")},w6e=function(t){return Dee(t,"overflowX")},_U=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Ree(t,r);if(s){var a=Mee(t,r),i=a[1],o=a[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},C6e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},S6e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Ree=function(t,e){return t==="v"?b6e(e):w6e(e)},Mee=function(t,e){return t==="v"?C6e(e):S6e(e)},k6e=function(t,e){return t==="h"&&e==="rtl"?-1:1},E6e=function(t,e,n,r,s){var a=k6e(t,window.getComputedStyle(e).direction),i=a*r,o=n.target,l=e.contains(o),u=!1,d=i>0,f=0,m=0;do{if(!o)break;var g=Mee(t,o),x=g[0],b=g[1],C=g[2],S=b-C-a*x;(x||S)&&Ree(t,o)&&(f+=S,m+=x);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},mC=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},TU=function(t){return[t.deltaX,t.deltaY]},AU=function(t){return t&&"current"in t?t.current:t},_6e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},T6e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},A6e=0,Np=[];function N6e(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(A6e++)[0],a=y.useState(jee)[0],i=y.useRef(t);y.useEffect(function(){i.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var b=XAe([t.lockRef.current],(t.shards||[]).map(AU),!0).filter(Boolean);return b.forEach(function(C){return C.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var o=y.useCallback(function(b,C){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!i.current.allowPinchZoom;var S=mC(b),w=n.current,E="deltaX"in b?b.deltaX:w[0]-S[0],T="deltaY"in b?b.deltaY:w[1]-S[1],_,A=b.target,j=Math.abs(E)>Math.abs(T)?"h":"v";if("touches"in b&&j==="h"&&A.type==="range")return!1;var D=_U(j,A);if(!D)return!0;if(D?_=j:(_=j==="v"?"h":"v",D=_U(j,A)),!D)return!1;if(!r.current&&"changedTouches"in b&&(E||T)&&(r.current=_),!_)return!0;var z=r.current||_;return E6e(z,C,b,z==="h"?E:T)},[]),l=y.useCallback(function(b){var C=b;if(!(!Np.length||Np[Np.length-1]!==a)){var S="deltaY"in C?TU(C):mC(C),w=e.current.filter(function(_){return _.name===C.type&&(_.target===C.target||C.target===_.shadowParent)&&_6e(_.delta,S)})[0];if(w&&w.should){C.cancelable&&C.preventDefault();return}if(!w){var E=(i.current.shards||[]).map(AU).filter(Boolean).filter(function(_){return _.contains(C.target)}),T=E.length>0?o(C,E[0]):!i.current.noIsolation;T&&C.cancelable&&C.preventDefault()}}},[]),u=y.useCallback(function(b,C,S,w){var E={name:b,delta:C,target:S,should:w,shadowParent:j6e(S)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(T){return T!==E})},1)},[]),d=y.useCallback(function(b){n.current=mC(b),r.current=void 0},[]),f=y.useCallback(function(b){u(b.type,TU(b),b.target,o(b,t.lockRef.current))},[]),m=y.useCallback(function(b){u(b.type,mC(b),b.target,o(b,t.lockRef.current))},[]);y.useEffect(function(){return Np.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Ap),document.addEventListener("touchmove",l,Ap),document.addEventListener("touchstart",d,Ap),function(){Np=Np.filter(function(b){return b!==a}),document.removeEventListener("wheel",l,Ap),document.removeEventListener("touchmove",l,Ap),document.removeEventListener("touchstart",d,Ap)}},[]);var g=t.removeScrollBar,x=t.inert;return y.createElement(y.Fragment,null,x?y.createElement(a,{styles:T6e(s)}):null,g?y.createElement(y6e,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function j6e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const D6e=a6e(Nee,N6e);var _v=y.forwardRef(function(t,e){return y.createElement(Ak,Qc({},t,{ref:e,sideCar:D6e}))});_v.classNames=Ak.classNames;var R6e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},jp=new WeakMap,pC=new WeakMap,gC={},gA=0,Iee=function(t){return t&&(t.host||Iee(t.parentNode))},M6e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Iee(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},I6e=function(t,e,n,r){var s=M6e(e,Array.isArray(t)?t:[t]);gC[n]||(gC[n]=new WeakMap);var a=gC[n],i=[],o=new Set,l=new Set(s),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(o.has(m))d(m);else try{var g=m.getAttribute(r),x=g!==null&&g!=="false",b=(jp.get(m)||0)+1,C=(a.get(m)||0)+1;jp.set(m,b),a.set(m,C),i.push(m),b===1&&x&&pC.set(m,!0),C===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return d(e),o.clear(),gA++,function(){i.forEach(function(f){var m=jp.get(f)-1,g=a.get(f)-1;jp.set(f,m),a.set(f,g),m||(pC.has(f)||f.removeAttribute(r),pC.delete(f)),g||f.removeAttribute(n)}),gA--,gA||(jp=new WeakMap,jp=new WeakMap,pC=new WeakMap,gC={})}},tw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=R6e(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),I6e(r,s,n,"aria-hidden")):function(){return null}},Nk="Dialog",[Oee]=Fa(Nk),[O6e,Ec]=Oee(Nk),Pee=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=t,o=y.useRef(null),l=y.useRef(null),[u,d]=Mi({prop:r,defaultProp:s??!1,onChange:a,caller:Nk});return c.jsx(O6e,{scope:e,triggerRef:o,contentRef:l,contentId:Ma(),titleId:Ma(),descriptionId:Ma(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};Pee.displayName=Nk;var Fee="DialogTrigger",Bee=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ec(Fee,n),a=Bt(e,s.triggerRef);return c.jsx(Nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":MR(s.open),...r,ref:a,onClick:yt(t.onClick,s.onOpenToggle)})});Bee.displayName=Fee;var DR="DialogPortal",[P6e,Lee]=Oee(DR,{forceMount:void 0}),zee=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Ec(DR,e);return c.jsx(P6e,{scope:e,forceMount:n,children:y.Children.map(r,i=>c.jsx(Ba,{present:n||a.open,children:c.jsx(E0,{asChild:!0,container:s,children:i})}))})};zee.displayName=DR;var w4="DialogOverlay",$ee=y.forwardRef((t,e)=>{const n=Lee(w4,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ec(w4,t.__scopeDialog);return a.modal?c.jsx(Ba,{present:r||a.open,children:c.jsx(B6e,{...s,ref:e})}):null});$ee.displayName=w4;var F6e=Md("DialogOverlay.RemoveScroll"),B6e=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ec(w4,n);return c.jsx(_v,{as:F6e,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(Nt.div,{"data-state":MR(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),t0="DialogContent",Uee=y.forwardRef((t,e)=>{const n=Lee(t0,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ec(t0,t.__scopeDialog);return c.jsx(Ba,{present:r||a.open,children:a.modal?c.jsx(L6e,{...s,ref:e}):c.jsx(z6e,{...s,ref:e})})});Uee.displayName=t0;var L6e=y.forwardRef((t,e)=>{const n=Ec(t0,t.__scopeDialog),r=y.useRef(null),s=Bt(e,n.contentRef,r);return y.useEffect(()=>{const a=r.current;if(a)return tw(a)},[]),c.jsx(Hee,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yt(t.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:yt(t.onPointerDownOutside,a=>{const i=a.detail.originalEvent,o=i.button===0&&i.ctrlKey===!0;(i.button===2||o)&&a.preventDefault()}),onFocusOutside:yt(t.onFocusOutside,a=>a.preventDefault())})}),z6e=y.forwardRef((t,e)=>{const n=Ec(t0,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return c.jsx(Hee,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,o;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Hee=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=t,o=Ec(t0,n),l=y.useRef(null),u=Bt(e,l);return Tk(),c.jsxs(c.Fragment,{children:[c.jsx(Ev,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:c.jsx(Cv,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":MR(o.open),...i,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx($6e,{titleId:o.titleId}),c.jsx(H6e,{contentRef:l,descriptionId:o.descriptionId})]})]})}),RR="DialogTitle",Vee=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ec(RR,n);return c.jsx(Nt.h2,{id:s.titleId,...r,ref:e})});Vee.displayName=RR;var qee="DialogDescription",Gee=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ec(qee,n);return c.jsx(Nt.p,{id:s.descriptionId,...r,ref:e})});Gee.displayName=qee;var Wee="DialogClose",Kee=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ec(Wee,n);return c.jsx(Nt.button,{type:"button",...r,ref:e,onClick:yt(t.onClick,()=>s.onOpenChange(!1))})});Kee.displayName=Wee;function MR(t){return t?"open":"closed"}var Yee="DialogTitleWarning",[Ggt,Xee]=kZ(Yee,{contentName:t0,titleName:RR,docsSlug:"dialog"}),$6e=({titleId:t})=>{const e=Xee(Yee),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},U6e="DialogDescriptionWarning",H6e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Xee(U6e).contentName}}.`;return y.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Jee=Pee,V6e=Bee,Qee=zee,Zee=$ee,ete=Uee,tte=Vee,nte=Gee,IR=Kee;function _c({...t}){return c.jsx(Jee,{"data-slot":"dialog",...t})}function nw({...t}){return c.jsx(V6e,{"data-slot":"dialog-trigger",...t})}function q6e({...t}){return c.jsx(Qee,{"data-slot":"dialog-portal",...t})}function OR({...t}){return c.jsx(IR,{"data-slot":"dialog-close",...t})}function G6e({className:t,...e}){return c.jsx(Zee,{"data-slot":"dialog-overlay",className:ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 flex items-center justify-center",t),...e})}const W6e=Oi("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 z-50 grid w-full max-w-[calc(100%-2rem)] gap-4 rounded-lg p-6 duration-200 sm:max-w-lg",{variants:{variant:{default:"bg-background border shadow-lg",theme:"bg-theme-0 border-theme font-theme text-theme-0"}},defaultVariants:{variant:"theme"}});function Tc({className:t,children:e,showCloseButton:n=!0,container:r,variant:s="theme",...a}){return c.jsx(q6e,{"data-slot":"dialog-portal",container:r,children:c.jsx(G6e,{children:c.jsxs(ete,{"data-slot":"dialog-content",className:ge(W6e({variant:s,className:t})),...a,children:[e,n&&c.jsxs(IR,{"data-slot":"dialog-close",className:"ring-offset-background focus-visible:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs transition-opacity hover:opacity-70 focus-visible:ring-2 focus-visible:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(ys,{className:"text-base-1"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})})})}function _0({className:t,...e}){return c.jsx("div",{"data-slot":"dialog-header",className:ge("flex flex-col gap-2 text-center sm:text-left",t),...e})}function K6e({className:t,...e}){return c.jsx("div",{"data-slot":"dialog-footer",className:ge("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function rw({className:t,...e}){return c.jsx(tte,{"data-slot":"dialog-title",className:ge("text-lg leading-none font-semibold",t),...e})}function Y6e({className:t,...e}){return c.jsx(nte,{"data-slot":"dialog-description",className:ge("text-muted-foreground text-sm",t),...e})}const rte=()=>{const t=y.useRef(null),[e,n]=y.useState(0),[r,s]=y.useState(!1),[a,i]=y.useState(!0),[o,l]=y.useState(!1),{token:u,updateTranscript:d,noteId:f,isRecording:m,setIsRecording:g,audioContextRef:x,analyserRef:b,animationFrameRef:C,waveformHistoryRef:S,maxHistoryLength:w,portal:E,setTranscriptTabOpen:T,transcriptTabOpen:_,setLiveTranscript:A,showRecordingDialog:j,setShowRecordingDialog:D}=Fr(),z=y.useRef(null),F=y.useRef(null),R=y.useRef(null),L=y.useRef(null),O=y.useRef(0),H=y.useRef(null),P=y.useRef(!1),{loadSharedComponent:I,authenticatedClient:U,showError:W,trackEvent:Y,updateOptions:B,checkGate:Z,openGate:le,getOptions:G,authenticatedFetch:K}=ut(),te=()=>{const Me=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,$e=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),Le=navigator.userAgent.includes("Firefox"),ae=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);if(!Me){i(!1);return}const pe=$e||Le||ae;i(pe),pe||console.log(" Screen audio capture may not be fully supported in this browser")};y.useEffect(()=>{te()},[]),y.useEffect(()=>{!a&&r&&(console.log(" Screen audio not supported, switching to microphone"),s(!1))},[a,r]);const ie=async(Me=!1)=>{console.log("Starting getStream function");try{const $e=await ve(Me);if($e)return console.log(" Stream obtained:",$e),console.log("Stream tracks:",$e.getTracks()),t.current=$e,$e;throw new Error("Failed to get audio stream")}catch($e){throw console.error(" getStream error:",$e),$e}},de=async Me=>{if(P.current){console.log(" Ignoring audio chunk - recording stopped");return}O.current++;try{const $e=new FormData;$e.append("file",Me,"recording.webm"),$e.append("noteId",f.toString()||"");const Le=await K(`${Jr}/transcribe`,{method:"POST",body:$e}),{message:ae,error:pe}=await Le.json();if((pe==null?void 0:pe.code)===429||Le.status===429||pe==="Usage limit exceeded"){I("TrialClaimGate",{highlight:"transcript"}),P.current=!0,g(!1),n(0),F.current&&(clearInterval(F.current),F.current=null),H.current&&(clearInterval(H.current),H.current=null),t.current&&(t.current.getTracks().forEach(Ue=>Ue.stop()),t.current=null),se(),ue();return}if(pe)return;const _e=ae||[];_e.forEach(Ue=>{Ue.timestamp=Date.now()-z.current+Ue.start*1e3}),d(_e)}catch($e){console.error("Transcription failed:",$e)}finally{O.current--}},fe=()=>{var Me;!t.current||!L.current||(((Me=R.current)==null?void 0:Me.state)==="recording"&&R.current.stop(),[R.current,L.current]=[L.current,R.current],R.current.start())},se=()=>{[R.current,L.current].forEach(Me=>{Me&&(Me.ondataavailable=null,(Me.state==="recording"||Me.state==="paused")&&Me.stop())}),R.current=null,L.current=null};y.useEffect(()=>{var $e;if(!m||!t.current)return;const Me=()=>{var ae;const Le=(ae=t.current)==null?void 0:ae.getAudioTracks();return!(Le!=null&&Le.length)||Le.some(pe=>pe.readyState==="ended")?(console.error("Stream lost, stopping recording"),He(null),!1):!0};if(Me())return($e=R.current)==null||$e.start(),F.current=setInterval(()=>{Me()&&fe()},5e3),H.current=setInterval(()=>{n(Le=>Le+1)},1e3),()=>{[F.current,H.current].forEach(Le=>{Le&&clearInterval(Le)}),F.current=H.current=null,se()}},[m]),y.useEffect(()=>{m&&t.current&&!b.current&&setTimeout(()=>{t.current&&(console.log(" Setting up audio analysis..."),ce(t.current))},100)},[m]);const ce=async Me=>{try{console.log(" Setting up audio analysis..."),x.current=new(window.AudioContext||window.webkitAudioContext),b.current=x.current.createAnalyser(),x.current.state==="suspended"&&(await x.current.resume(),console.log(" Audio context resumed")),x.current.createMediaStreamSource(Me).connect(b.current),b.current.fftSize=512,b.current.smoothingTimeConstant=0,console.log(" Audio analysis setup complete")}catch($e){console.error(" Error setting up audio analysis:",$e)}},ue=()=>{C.current&&(cancelAnimationFrame(C.current),C.current=null),x.current&&(x.current.close(),x.current=null),b.current=null,S.current=[]},oe=async()=>{Y("transcribe_button_clicked");const Me=G();T(!0),Me.dont_show_recording_explanation===!0?Ne():D(!0)},Ne=async()=>{if(D(!1),m)P.current=!0,g(!1),n(0),F.current&&(clearInterval(F.current),F.current=null),H.current&&(clearInterval(H.current),H.current=null),t.current&&(t.current.getTracks().forEach(Me=>Me.stop()),t.current=null),se(),ue();else try{if(console.log(" Starting recording process..."),l(!0),await ie(r),t.current){console.log(" Stream ready, setting up recorders...");const Me=()=>{const $e=new MediaRecorder(t.current,{mimeType:"audio/webm"});return $e.ondataavailable=async Le=>{Le.data.size>0&&await de(Le.data)},$e};R.current=Me(),L.current=Me(),z.current=Date.now(),n(0),P.current=!1,g(!0),l(!1),console.log(" Recording state set to true")}else throw new Error("Failed to obtain audio stream")}catch(Me){console.error("Failed to start recording:",Me),P.current=!0,g(!1),l(!1),t.current&&(t.current.getTracks().forEach($e=>$e.stop()),t.current=null)}finally{G().has_used_transcribe!==!0&&B({has_used_transcribe:!0})}};async function ve(Me=!1){try{let $e;if(Me){if(!navigator.mediaDevices.getDisplayMedia)throw new Error("Screen capture is not supported in this browser.");const ae={audio:{echoCancellation:!1,noiseSuppression:!1,sampleRate:44100,suppressLocalAudioPlayback:!1},video:{width:{ideal:1},height:{ideal:1},frameRate:{ideal:1}},systemAudio:"include"};if($e=await navigator.mediaDevices.getDisplayMedia(ae),$e.getVideoTracks().forEach(Ue=>{Ue.stop(),$e.removeTrack(Ue)}),$e.getAudioTracks().length===0)throw $e.getTracks().forEach(Ue=>Ue.stop()),new Error('No audio tracks available from screen capture. Make sure to select "Share audio" in the browser dialog.');console.log(" Screen audio stream obtained")}else console.log(" Requesting microphone access..."),$e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),console.log(" Microphone stream obtained");const Le=$e.getAudioTracks();return console.log("Audio tracks:",Le.map(ae=>({label:ae.label,kind:ae.kind,enabled:ae.enabled}))),$e}catch($e){if(console.error("Error accessing audio:",$e),$e.name==="NotAllowedError"){const Le=Me?"screen audio":"microphone";alert(`${Le.charAt(0).toUpperCase()+Le.slice(1)} access was denied. Please allow access in your browser settings.`)}else $e.name==="NotFoundError"?alert("No audio source found."):$e.name==="NotSupportedError"?alert("Audio capture is not supported in this browser."):alert(`Audio error: ${$e.message}`);return null}}const He=Me=>{Me==null||Me.stopPropagation(),Me==null||Me.preventDefault(),P.current=!0,g(!1),n(0),F.current&&(clearInterval(F.current),F.current=null),H.current&&(clearInterval(H.current),H.current=null),t.current&&(t.current.getTracks().forEach($e=>$e.stop()),t.current=null),se(),ue()},nt=Me=>{m?He(Me):oe()};return c.jsxs(c.Fragment,{children:[c.jsxs(pa.div,{className:"absolute right-[50%] translate-x-[50%] z-15 flex items-center gap-[10px]",animate:{bottom:_?"320px":"24px",transform:_?"translateY(50%)":"translateY(0)"},transition:{duration:.3,ease:"easeInOut"},children:[c.jsxs("button",{onClick:nt,disabled:o,className:`cursor-pointer flex items-center gap-[10px] border border-theme rounded-xl p-3 bg-theme-1 ${m?"text-red-500":o?"text-yellow-500":"text-gray-500"} ${o?"opacity-75 cursor-wait":""}`,children:[m?c.jsx(pa.div,{animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:c.jsx(hk,{className:"w-[20px] h-[20px]"})}):c.jsx($j,{className:"size-[18px] text-theme-0"}),c.jsx("span",{className:"text-sm font-medium text-theme-0",children:m?"Stop":"Transcribe"})]}),c.jsx("button",{className:"cursor-pointer flex items-center gap-[10px] border border-theme rounded-xl p-3 bg-theme-1",onClick:()=>T(Me=>!Me),children:c.jsx(Wo,{children:c.jsx(pa.div,{initial:{rotate:0},animate:{rotate:_?180:0},transition:{duration:.3},children:c.jsx(Im,{className:"size-4"})})})})]}),c.jsx(_c,{open:j,onOpenChange:D,children:c.jsx(Tc,{className:"max-w-md",children:c.jsx(X6e,{startRecording:Ne,currentMode:r?"virtual":"physical",onClose:()=>D(!1)})})})]})},X6e=({startRecording:t,currentMode:e,onClose:n})=>{const[r,s]=y.useState(!1),[a,i]=y.useState(e),{updateOptions:o}=ut(),l=()=>{r&&o({dont_show_recording_explanation:!0}),t()};return c.jsxs(c.Fragment,{children:[c.jsx(_0,{children:c.jsxs(rw,{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-3",children:c.jsx("div",{className:"bg-theme-link p-4 rounded-xl",children:c.jsx($j,{className:"size-8 text-theme-bg-0"})})}),c.jsx("h3",{className:"text-xl font-bold text-theme-0 mb-3",children:"Ready to Record?"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("button",{onClick:()=>i("physical"),className:`cursor-pointer p-4 rounded-xl border-2 transition-all duration-200 ${a==="physical"?"border-theme bg-theme-0 shadow-md":"hover:bg-theme-2 border-transparent"}`,children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(e3e,{className:`size-6 ${a==="physical"?"text-theme-link":"text-theme-1"}`}),c.jsx("span",{className:`text-sm font-medium ${a==="physical"?"text-theme-link":"text-theme-1"}`,children:"In-Person"})]})}),c.jsx("button",{onClick:()=>i("virtual"),className:`cursor-pointer p-4 rounded-xl border-2 transition-all duration-200 ${a==="virtual"?"border-theme bg-theme-0 shadow-md":"hover:bg-theme-2 border-transparent"}`,children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(mZ,{className:`size-6 ${a==="virtual"?"text-theme-link":"text-theme-1"}`}),c.jsx("span",{className:`text-sm font-medium ${a==="virtual"?"text-theme-link":"text-theme-1"}`,children:"Online"})]})})]}),c.jsx("div",{className:"my-2",children:c.jsx("div",{className:"p-4 space-y-2.5",children:a==="physical"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"bg-theme-link rounded-full p-0.5 flex-shrink-0",children:c.jsx(or,{className:"size-4 text-theme-bg-0"})}),c.jsx("p",{className:"text-sm text-theme-0",children:"Allow microphone access when prompted"})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"bg-theme-link rounded-full p-0.5 flex-shrink-0",children:c.jsx(or,{className:"size-4 text-theme-bg-0"})}),c.jsx("p",{className:"text-sm text-theme-0",children:"Ensure you have received consent to record"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"bg-theme-link rounded-full p-0.5 flex-shrink-0",children:c.jsx(or,{className:"size-4 text-theme-bg-0"})}),c.jsx("p",{className:"text-sm text-theme-0",children:"Select the tab with audio"})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"bg-theme-link rounded-full p-0.5 flex-shrink-0",children:c.jsx(or,{className:"size-4 text-theme-bg-0"})}),c.jsx("p",{className:"text-sm text-theme-0",children:'Check "Share audio" in the dialog'})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"bg-theme-link rounded-full p-0.5 flex-shrink-0",children:c.jsx(or,{className:"size-4 text-theme-bg-0"})}),c.jsx("p",{className:"text-sm text-theme-0",children:"Ensure you have received consent to record"})]})]})})}),c.jsx(K6e,{className:"gap-2",children:c.jsxs("button",{onClick:l,className:"flex items-center justify-center gap-2 px-5 py-3.5 rounded-xl bg-theme-1 border border-theme text-theme-0 cursor-pointer font-medium transition-all duration-200",children:[c.jsx($j,{className:"size-4"}),c.jsx("span",{children:"Start Recording"})]})})]})},NU=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/60),r=(e%60).toString().padStart(2,"0");return`${(n%60).toString().padStart(2,"0")}:${r}`},ste=()=>c.jsx(J6e,{}),J6e=()=>{var u;const{transcript:t,noteId:e,setTranscript:n,liveTranscript:r,isRecording:s}=Fr(),a=y.useRef(null),{authenticatedClient:i}=ut();y.useEffect(()=>{if(t.length>0)return;(async()=>{const f=await i();if(!f){console.error("Error creating auth client:");return}const{data:m,error:g}=await f.from("transcripts").select("content").eq("note_id",e).single();if(g)return console.error("Error fetching transcript:",g),null;n(m.content)})()},[e]),y.useEffect(()=>{a.current&&r&&a.current.scrollIntoView({behavior:"smooth",block:"end"})},[r]);const l=(()=>{const d=[];let f={text:"",start:0,end:0,cumulativeTime:0,isLive:!1},m=0;return t.forEach((g,x)=>{var w;const b=((w=g.text)==null?void 0:w.trim())||"";if(b==="."||b==="Thank you.")return;f.text===""&&(f.start=g.start||0,f.cumulativeTime=m),f.text+=(f.text?" ":"")+b,f.end=g.end||0,m+=(g.end||0)*1e3;const C=/[.!?]$/.test(b),S=x===t.length-1;(C||S)&&(d.push({...f}),f={text:"",start:0,end:0,cumulativeTime:m,isLive:!1})}),s&&r&&d.push({text:r,start:0,end:0,cumulativeTime:m,isLive:!0}),d})();return t.length===0?c.jsx("div",{className:"flex-1 flex items-center justify-center p-4 h-full",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(hk,{className:"size-8 mx-auto text-theme-1"}),c.jsx("p",{className:"text-xs text-theme-1",children:"Start recording to generate a transcript"})]})}):c.jsx("div",{className:"w-full max-w-[640px] mx-auto px-4 py-8",children:c.jsxs("div",{className:"space-y-1",ref:a,children:[l.map((d,f)=>{const m=d.isLive?"live-transcript":`transcript-${f}`;return c.jsxs("div",{className:"group flex items-start gap-3 rounded-lg hover:bg-theme-1/30 transition-all duration-200",children:[c.jsx("span",{className:"text-[10px] font-mono font-bold text-theme-1 shrink-0 mt-0.5",children:NU(d.cumulativeTime)}),c.jsx("p",{className:"text-xs leading-relaxed text-theme-0 font-normal",children:d.text})]},m)}),s&&c.jsxs("div",{className:"flex gap-3 items-center rounded-lg",children:[c.jsx("span",{className:"text-[10px] font-mono font-bold text-theme-1 shrink-0 mt-0.5",children:NU((((u=l[l.length-1])==null?void 0:u.cumulativeTime)||0)+1e3)}),c.jsx("p",{className:"text-xs leading-relaxed text-theme-0 font-normal",children:c.jsx(js,{className:"size-3.5 animate-spin text-theme-2"})})]})]})})};class Q6e extends Ce.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("NoteEditorTab error:",e,n)}render(){return this.state.hasError?c.jsxs("div",{className:"p-3 text-xs text-red-600 bg-red-50 rounded border border-red-200",children:[c.jsx("div",{className:"font-medium mb-1",children:"Something went wrong loading the editor."}),c.jsx("button",{className:"mt-1 px-2 py-1 rounded bg-black text-white",onClick:()=>this.setState({hasError:!1,error:void 0}),children:"Try again"})]}):this.props.children}}const Z6e=()=>{const{activeTab:t,quillEditor:e,setQuillEditor:n,content:r,noteId:s,contentInit:a,settings:i,getNoteContent:o,isSaving:l,setIsSaving:u}=Fr(),d=y.useRef(null),f=y.useRef(null),m=y.useRef(new px),[g,x]=y.useState(null),{authenticatedClient:b}=ut(),C=async()=>{var E,T,_;if(!((T=(E=m.current)==null?void 0:E.ops)!=null&&T.length)||l)return;u(!0);const S=new px(m.current);m.current=new px;const w=await b();if(!w){console.error("Error creating Supabase client:"),u(!1);return}try{if(console.log(" SENDING DELTA TO SERVER:",S),console.log(" DELTA OPS COUNT:",(_=S.ops)==null?void 0:_.length),(await w.functions.invoke("modify-note",{body:{noteId:s,delta:S}})).error)throw m.current=S.compose(m.current),new Error("Save failed")}catch(A){console.error("Error saving note:",A)}finally{u(!1)}};return y.useEffect(()=>{e&&s&&(a.current=!1,m.current=new px,console.log(" SWITCHING TO NOTE:",s,"- Reset deltas and contentInit"),o())},[e,s]),y.useEffect(()=>{if(!d.current)return;(async()=>{const{default:w}=await Zm(async()=>{const{default:_}=await import("./quill-DYZykYcT.js");return{default:_}},[]);await Zm(()=>Promise.resolve().then(()=>sNe),void 0);const E=d.current;if(!E)return;const T=new w(E,{bounds:E,placeholder:"",modules:{toolbar:!1}});return T.root.addEventListener("keydown",_=>{if(console.log(" Keydown:",{key:_.key,code:_.code,keyCode:_.keyCode,which:_.which}),(_.key==="?"||_.code==="Slash")&&(console.log(" Question mark key detected in keydown!"),_.key==="?"&&_.shiftKey)){_.preventDefault();const A=T.getSelection();A&&(T.insertText(A.index,"?"),T.setSelection(A.index+1,0))}}),T.root.addEventListener("keydown",_=>{var z,F,R,L,O,H,P,I,U,W;const A=T.getSelection();if(!A)return;const[j]=T.getLine(A.index),D=T.getFormat(A.index);if(_.key==="Backspace"&&(console.log(" Backspace - Selection:",A),console.log(" Line:",j,(F=(z=j==null?void 0:j.domNode)==null?void 0:z.textContent)==null?void 0:F.length,"Format:",D),j&&!((R=j==null?void 0:j.domNode)!=null&&R.textContent)||j&&((L=j.domNode)==null?void 0:L.textContent)&&((H=(O=j.domNode)==null?void 0:O.textContent)==null?void 0:H.length)<=1)){console.log(" Deleting empty line");const B=T.getIndex(j);T.deleteText(B,j.length()),_.preventDefault();return}if(_.key==="Enter"&&(console.log(" Enter - Format:",D,"Line content:",(P=j==null?void 0:j.domNode)==null?void 0:P.textContent),D.list&&j&&(!((I=j.domNode)!=null&&I.textContent)||((W=(U=j.domNode)==null?void 0:U.textContent)==null?void 0:W.trim())===""))){console.log(" Creating new line after empty bullet"),T.format("list",!1);return}}),T.on("selection-change",_=>{var j;console.log(" SELECTION CHANGED:",_),x(_);const A=new CustomEvent("quill-selection-change",{detail:{range:_,quill:T},bubbles:!0});(j=d.current)==null||j.dispatchEvent(A)}),T.on("text-change",(_,A,j)=>{if(console.log(" TEXT CHANGED:",_,"Source:",j),a.current===!1){T.setSelection(T.getLength(),0),a.current=!0;return}const D=T.getSelection(),z=D?D.index:0;let F=!1;for(const P of _.ops){if(P.insert&&typeof P.insert=="object"&&P.insert.list){F=!0;break}if(P.attributes&&P.attributes.list!==void 0){F=!0;break}}let R=z,L=0,O=0,H=!1;for(const P of _.ops)if(P.retain){const I=P.retain;if(!H&&L<=z&&z<L+I){const U=z-L;R=O+U,H=!0}L+=I,O+=I}else if(P.insert){const I=typeof P.insert=="string"?P.insert.length:1;!H&&L===z&&(R=O+I,H=!0),O+=I}else if(P.delete){const I=P.delete;!H&&L<=z&&z<L+I&&(R=O,H=!0),L+=I}!H&&z>=L&&(R=O),j==="user"&&setTimeout(()=>{var I;try{const U=T.getLength(),W=Math.min(Math.max(0,R),U-1);if(T.setSelection(W,0),F){const Y=T.getSelection();if(Y){const B=new CustomEvent("quill-selection-change",{detail:{range:Y,quill:T},bubbles:!0});(I=d.current)==null||I.dispatchEvent(B)}}}catch(U){console.warn("Could not set cursor position:",U)}},F?50:0),(j==="user"||j==="api")&&(m.current=m.current.compose(_),console.log(" ACCUMULATED DELTA:",m.current),console.log(" NEW DELTA:",_,"Source:",j),r.current[s]=T.getContents(),f.current&&clearTimeout(f.current),f.current=setTimeout(async()=>{f.current=null,await C()},2e3))}),setTimeout(()=>{T.focus()},100),n(T),()=>{T&&n(null),f.current&&(clearTimeout(f.current),f.current=null)}})()},[s,t]),y.useEffect(()=>{e&&(e.selection.getNativeRange=()=>{const w=e.root.getRootNode().getSelection();return V3e(w)},document.addEventListener("selectionchange",(...S)=>{e.selection.update()}))},[e]),t!=="notes"?null:c.jsx(Q6e,{children:c.jsxs("div",{className:"flex-1 min-h-0 relative",children:[c.jsx("style",{children:`
                .ql-editor h1 {
                    font-size: 24px;
                    font-weight: 600;
                }
                .ql-editor h2 {
                    font-size: 20px;
                    font-weight: 600;
                }
                .ql-editor h3 {
                    font-size: 16px;
                    font-weight: 600;
                }
                .ql-editor p {
                    font-size: 14px;
                }
                .ql-editor {
                    font-family: var(--bcfont);
                    padding: 0;
                    padding-bottom: 40px;
                }
                /* Themed placeholder color for Quill editor */
                .ql-editor.ql-blank::before {
                    color: var(--bctext-2) !important;
                }
                `}),c.jsx("div",{ref:d,className:"font-theme w-full h-full flex-1"}),c.jsx(VZ,{})]})})},eNe=()=>{var i;const{noteId:t,notesMetadata:e,activeCourse:n,handleMetadataChange:r,isSaving:s}=Fr();if(!t)return null;const a=((i=e==null?void 0:e[n])==null?void 0:i.find(o=>o.id===t))??null;return a?c.jsxs("div",{className:"pt-[20px] pb-[10px]",children:[c.jsxs("div",{className:"flex items-center gap-[7px]",children:[c.jsx("p",{className:"text-sm font-medium text-theme-1",children:Sr(a==null?void 0:a.modified_at,"MMM d, yyyy")}),c.jsx("div",{className:`text-sm font-medium text-theme-1 transition-opacity duration-200 ${s?"opacity-100":"opacity-33"}`,children:c.jsx(Kke,{className:"w-[13px] h-[13px] text-theme-1"})})]}),c.jsx("input",{type:"text",className:"text-2xl font-bold border-0 mt-[5px] w-full",value:a==null?void 0:a.title,onChange:o=>r({title:o.target.value})})]}):c.jsx("p",{children:"unknown note id"})},tNe=()=>{const{activeTab:t}=Fr();if(t==="notes")return c.jsx(Z6e,{});if(t==="transcript")return c.jsx(ste,{});if(t==="ai")return c.jsx(UAe,{})},nNe=()=>{const{noteId:t}=Fr();return t?c.jsxs("div",{className:"flex-1 px-[20px] pb-[30px] relative flex flex-col min-h-0",children:[c.jsx(eNe,{}),c.jsx(H3e,{}),c.jsx(tNe,{}),c.jsx(rte,{})]}):c.jsx(rNe,{})},rNe=()=>{const{handleNewNote:t}=Fr();return c.jsx("div",{className:"flex justify-center items-center h-full w-full",children:c.jsxs(vn,{variant:"default",onClick:t,className:"flex items-center gap-[10px] rounded-lg",children:[c.jsx(Yb,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"New note"})]})})},sNe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Jj=["Enter"," "],aNe=["ArrowDown","PageUp","Home"],ate=["ArrowUp","PageDown","End"],iNe=[...aNe,...ate],oNe={ltr:[...Jj,"ArrowRight"],rtl:[...Jj,"ArrowLeft"]},lNe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sw="Menu",[N1,cNe,uNe]=mk(sw),[T0,ite]=Fa(sw,[uNe,Pf,pk]),aw=Pf(),ote=pk(),[lte,Ff]=T0(sw),[dNe,iw]=T0(sw),cte=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:i=!0}=t,o=aw(e),[l,u]=y.useState(null),d=y.useRef(!1),f=Pr(a),m=k0(s);return y.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),c.jsx(Qb,{...o,children:c.jsx(lte,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:u,children:c.jsx(dNe,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:i,children:r})})})};cte.displayName=sw;var hNe="MenuAnchor",PR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=aw(n);return c.jsx(Zb,{...s,...r,ref:e})});PR.displayName=hNe;var FR="MenuPortal",[fNe,ute]=T0(FR,{forceMount:void 0}),dte=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=Ff(FR,e);return c.jsx(fNe,{scope:e,forceMount:n,children:c.jsx(Ba,{present:n||a.open,children:c.jsx(E0,{asChild:!0,container:s,children:r})})})};dte.displayName=FR;var Sl="MenuContent",[mNe,BR]=T0(Sl),hte=y.forwardRef((t,e)=>{const n=ute(Sl,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Ff(Sl,t.__scopeMenu),i=iw(Sl,t.__scopeMenu);return c.jsx(N1.Provider,{scope:t.__scopeMenu,children:c.jsx(Ba,{present:r||a.open,children:c.jsx(N1.Slot,{scope:t.__scopeMenu,children:i.modal?c.jsx(pNe,{...s,ref:e}):c.jsx(gNe,{...s,ref:e})})})})}),pNe=y.forwardRef((t,e)=>{const n=Ff(Sl,t.__scopeMenu),r=y.useRef(null),s=Bt(e,r);return y.useEffect(()=>{const a=r.current;if(a)return tw(a)},[]),c.jsx(LR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:yt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),gNe=y.forwardRef((t,e)=>{const n=Ff(Sl,t.__scopeMenu);return c.jsx(LR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),vNe=Md("MenuContent.ScrollLock"),LR=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...b}=t,C=Ff(Sl,n),S=iw(Sl,n),w=aw(n),E=ote(n),T=cNe(n),[_,A]=y.useState(null),j=y.useRef(null),D=Bt(e,j,C.onContentChange),z=y.useRef(0),F=y.useRef(""),R=y.useRef(0),L=y.useRef(null),O=y.useRef("right"),H=y.useRef(0),P=x?_v:y.Fragment,I=x?{as:vNe,allowPinchZoom:!0}:void 0,U=Y=>{var de,fe;const B=F.current+Y,Z=T().filter(se=>!se.disabled),le=document.activeElement,G=(de=Z.find(se=>se.ref.current===le))==null?void 0:de.textValue,K=Z.map(se=>se.textValue),te=NNe(K,B,G),ie=(fe=Z.find(se=>se.textValue===te))==null?void 0:fe.ref.current;(function se(ce){F.current=ce,window.clearTimeout(z.current),ce!==""&&(z.current=window.setTimeout(()=>se(""),1e3))})(B),ie&&setTimeout(()=>ie.focus())};y.useEffect(()=>()=>window.clearTimeout(z.current),[]),Tk();const W=y.useCallback(Y=>{var Z,le;return O.current===((Z=L.current)==null?void 0:Z.side)&&DNe(Y,(le=L.current)==null?void 0:le.area)},[]);return c.jsx(mNe,{scope:n,searchRef:F,onItemEnter:y.useCallback(Y=>{W(Y)&&Y.preventDefault()},[W]),onItemLeave:y.useCallback(Y=>{var B;W(Y)||((B=j.current)==null||B.focus(),A(null))},[W]),onTriggerLeave:y.useCallback(Y=>{W(Y)&&Y.preventDefault()},[W]),pointerGraceTimerRef:R,onPointerGraceIntentChange:y.useCallback(Y=>{L.current=Y},[]),children:c.jsx(P,{...I,children:c.jsx(Ev,{asChild:!0,trapped:s,onMountAutoFocus:yt(a,Y=>{var B;Y.preventDefault(),(B=j.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:c.jsx(Cv,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:c.jsx(jZ,{asChild:!0,...E,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:A,onEntryFocus:yt(l,Y=>{S.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(Sk,{role:"menu","aria-orientation":"vertical","data-state":Nte(C.open),"data-radix-menu-content":"",dir:S.dir,...w,...b,ref:D,style:{outline:"none",...b.style},onKeyDown:yt(b.onKeyDown,Y=>{const Z=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,le=Y.ctrlKey||Y.altKey||Y.metaKey,G=Y.key.length===1;Z&&(Y.key==="Tab"&&Y.preventDefault(),!le&&G&&U(Y.key));const K=j.current;if(Y.target!==K||!iNe.includes(Y.key))return;Y.preventDefault();const ie=T().filter(de=>!de.disabled).map(de=>de.ref.current);ate.includes(Y.key)&&ie.reverse(),TNe(ie)}),onBlur:yt(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(z.current),F.current="")}),onPointerMove:yt(t.onPointerMove,j1(Y=>{const B=Y.target,Z=H.current!==Y.clientX;if(Y.currentTarget.contains(B)&&Z){const le=Y.clientX>H.current?"right":"left";O.current=le,H.current=Y.clientX}}))})})})})})})});hte.displayName=Sl;var yNe="MenuGroup",zR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Nt.div,{role:"group",...r,ref:e})});zR.displayName=yNe;var xNe="MenuLabel",fte=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Nt.div,{...r,ref:e})});fte.displayName=xNe;var C4="MenuItem",jU="menu.itemSelect",jk=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=y.useRef(null),i=iw(C4,t.__scopeMenu),o=BR(C4,t.__scopeMenu),l=Bt(e,a),u=y.useRef(!1),d=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(jU,{bubbles:!0,cancelable:!0});f.addEventListener(jU,g=>r==null?void 0:r(g),{once:!0}),k8(f,m),m.defaultPrevented?u.current=!1:i.onClose()}};return c.jsx(mte,{...s,ref:l,disabled:n,onClick:yt(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:yt(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:yt(t.onKeyDown,f=>{const m=o.searchRef.current!=="";n||m&&f.key===" "||Jj.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});jk.displayName=C4;var mte=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,i=BR(C4,n),o=ote(n),l=y.useRef(null),u=Bt(e,l),[d,f]=y.useState(!1),[m,g]=y.useState("");return y.useEffect(()=>{const x=l.current;x&&g((x.textContent??"").trim())},[a.children]),c.jsx(N1.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:c.jsx(DZ,{asChild:!0,...o,focusable:!r,children:c.jsx(Nt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:yt(t.onPointerMove,j1(x=>{r?i.onItemLeave(x):(i.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:yt(t.onPointerLeave,j1(x=>i.onItemLeave(x))),onFocus:yt(t.onFocus,()=>f(!0)),onBlur:yt(t.onBlur,()=>f(!1))})})})}),bNe="MenuCheckboxItem",pte=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return c.jsx(bte,{scope:t.__scopeMenu,checked:n,children:c.jsx(jk,{role:"menuitemcheckbox","aria-checked":S4(n)?"mixed":n,...s,ref:e,"data-state":HR(n),onSelect:yt(s.onSelect,()=>r==null?void 0:r(S4(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pte.displayName=bNe;var gte="MenuRadioGroup",[wNe,CNe]=T0(gte,{value:void 0,onValueChange:()=>{}}),vte=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=Pr(r);return c.jsx(wNe,{scope:t.__scopeMenu,value:n,onValueChange:a,children:c.jsx(zR,{...s,ref:e})})});vte.displayName=gte;var yte="MenuRadioItem",xte=y.forwardRef((t,e)=>{const{value:n,...r}=t,s=CNe(yte,t.__scopeMenu),a=n===s.value;return c.jsx(bte,{scope:t.__scopeMenu,checked:a,children:c.jsx(jk,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":HR(a),onSelect:yt(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});xte.displayName=yte;var $R="MenuItemIndicator",[bte,SNe]=T0($R,{checked:!1}),wte=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=SNe($R,n);return c.jsx(Ba,{present:r||S4(a.checked)||a.checked===!0,children:c.jsx(Nt.span,{...s,ref:e,"data-state":HR(a.checked)})})});wte.displayName=$R;var kNe="MenuSeparator",Cte=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Nt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Cte.displayName=kNe;var ENe="MenuArrow",Ste=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=aw(n);return c.jsx(kk,{...s,...r,ref:e})});Ste.displayName=ENe;var UR="MenuSub",[_Ne,kte]=T0(UR),Ete=t=>{const{__scopeMenu:e,children:n,open:r=!1,onOpenChange:s}=t,a=Ff(UR,e),i=aw(e),[o,l]=y.useState(null),[u,d]=y.useState(null),f=Pr(s);return y.useEffect(()=>(a.open===!1&&f(!1),()=>f(!1)),[a.open,f]),c.jsx(Qb,{...i,children:c.jsx(lte,{scope:e,open:r,onOpenChange:f,content:u,onContentChange:d,children:c.jsx(_Ne,{scope:e,contentId:Ma(),triggerId:Ma(),trigger:o,onTriggerChange:l,children:n})})})};Ete.displayName=UR;var vx="MenuSubTrigger",_te=y.forwardRef((t,e)=>{const n=Ff(vx,t.__scopeMenu),r=iw(vx,t.__scopeMenu),s=kte(vx,t.__scopeMenu),a=BR(vx,t.__scopeMenu),i=y.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,u={__scopeMenu:t.__scopeMenu},d=y.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const f=o.current;return()=>{window.clearTimeout(f),l(null)}},[o,l]),c.jsx(PR,{asChild:!0,...u,children:c.jsx(mte,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Nte(n.open),...t,ref:Ub(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:yt(t.onPointerMove,j1(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:yt(t.onPointerLeave,j1(f=>{var g,x;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const b=(x=n.content)==null?void 0:x.dataset.side,C=b==="right",S=C?-5:5,w=m[C?"left":"right"],E=m[C?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+S,y:f.clientY},{x:w,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:w,y:m.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:yt(t.onKeyDown,f=>{var g;const m=a.searchRef.current!=="";t.disabled||m&&f.key===" "||oNe[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});_te.displayName=vx;var Tte="MenuSubContent",Ate=y.forwardRef((t,e)=>{const n=ute(Sl,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Ff(Sl,t.__scopeMenu),i=iw(Sl,t.__scopeMenu),o=kte(Tte,t.__scopeMenu),l=y.useRef(null),u=Bt(e,l);return c.jsx(N1.Provider,{scope:t.__scopeMenu,children:c.jsx(Ba,{present:r||a.open,children:c.jsx(N1.Slot,{scope:t.__scopeMenu,children:c.jsx(LR,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:yt(t.onFocusOutside,d=>{d.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:yt(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:yt(t.onKeyDown,d=>{var g;const f=d.currentTarget.contains(d.target),m=lNe[i.dir].includes(d.key);f&&m&&(a.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});Ate.displayName=Tte;function Nte(t){return t?"open":"closed"}function S4(t){return t==="indeterminate"}function HR(t){return S4(t)?"indeterminate":t?"checked":"unchecked"}function TNe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function ANe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function NNe(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let i=ANe(t,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const l=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function jNe(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const o=e[a],l=e[i],u=o.x,d=o.y,f=l.x,m=l.y;d>r!=m>r&&n<(f-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function DNe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return jNe(n,e)}function j1(t){return e=>e.pointerType==="mouse"?t(e):void 0}var RNe=cte,MNe=PR,INe=dte,ONe=hte,PNe=zR,FNe=fte,BNe=jk,LNe=pte,zNe=vte,$Ne=xte,UNe=wte,HNe=Cte,VNe=Ste,qNe=Ete,GNe=_te,WNe=Ate,Dk="DropdownMenu",[KNe]=Fa(Dk,[ite]),mi=ite(),[YNe,jte]=KNe(Dk),Dte=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=t,l=mi(e),u=y.useRef(null),[d,f]=Mi({prop:s,defaultProp:a??!1,onChange:i,caller:Dk});return c.jsx(YNe,{scope:e,triggerId:Ma(),triggerRef:u,contentId:Ma(),open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(m=>!m),[f]),modal:o,children:c.jsx(RNe,{...l,open:d,onOpenChange:f,dir:r,modal:o,children:n})})};Dte.displayName=Dk;var Rte="DropdownMenuTrigger",Mte=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=jte(Rte,n),i=mi(n);return c.jsx(MNe,{asChild:!0,...i,children:c.jsx(Nt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Ub(e,a.triggerRef),onPointerDown:yt(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(a.onOpenToggle(),a.open||o.preventDefault())}),onKeyDown:yt(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&a.onOpenToggle(),o.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Mte.displayName=Rte;var XNe="DropdownMenuPortal",Ite=t=>{const{__scopeDropdownMenu:e,...n}=t,r=mi(e);return c.jsx(INe,{...r,...n})};Ite.displayName=XNe;var Ote="DropdownMenuContent",Pte=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jte(Ote,n),a=mi(n),i=y.useRef(!1);return c.jsx(ONe,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:yt(t.onCloseAutoFocus,o=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,o.preventDefault()}),onInteractOutside:yt(t.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pte.displayName=Ote;var JNe="DropdownMenuGroup",QNe=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(PNe,{...s,...r,ref:e})});QNe.displayName=JNe;var ZNe="DropdownMenuLabel",Fte=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(FNe,{...s,...r,ref:e})});Fte.displayName=ZNe;var eje="DropdownMenuItem",Bte=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(BNe,{...s,...r,ref:e})});Bte.displayName=eje;var tje="DropdownMenuCheckboxItem",nje=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(LNe,{...s,...r,ref:e})});nje.displayName=tje;var rje="DropdownMenuRadioGroup",sje=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(zNe,{...s,...r,ref:e})});sje.displayName=rje;var aje="DropdownMenuRadioItem",ije=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx($Ne,{...s,...r,ref:e})});ije.displayName=aje;var oje="DropdownMenuItemIndicator",lje=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(UNe,{...s,...r,ref:e})});lje.displayName=oje;var cje="DropdownMenuSeparator",Lte=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(HNe,{...s,...r,ref:e})});Lte.displayName=cje;var uje="DropdownMenuArrow",dje=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(VNe,{...s,...r,ref:e})});dje.displayName=uje;var hje=t=>{const{__scopeDropdownMenu:e,children:n,open:r,onOpenChange:s,defaultOpen:a}=t,i=mi(e),[o,l]=Mi({prop:r,defaultProp:a??!1,onChange:s,caller:"DropdownMenuSub"});return c.jsx(qNe,{...i,open:o,onOpenChange:l,children:n})},fje="DropdownMenuSubTrigger",zte=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(GNe,{...s,...r,ref:e})});zte.displayName=fje;var mje="DropdownMenuSubContent",$te=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mi(n);return c.jsx(WNe,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$te.displayName=mje;var pje=Dte,gje=Mte,Ute=Ite,vje=Pte,yje=Fte,xje=Bte,bje=Lte,wje=hje,Cje=zte,Sje=$te;function Tv({...t}){return c.jsx(pje,{"data-slot":"dropdown-menu",...t})}function Qj({container:t,...e}){return c.jsx(Ute,{container:t,"data-slot":"dropdown-menu-portal",...e})}function Av({...t}){return c.jsx(gje,{"data-slot":"dropdown-menu-trigger",...t})}function Nv({className:t,sideOffset:e=4,container:n,variant:r="theme",...s}){return c.jsx(Ute,{container:n,children:c.jsx(vje,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ge(r==="default"&&"bg-popover text-popover-foreground border shadow-md rounded-md",r==="theme"&&"bg-theme-0 text-theme-0 font-theme border border-theme rounded-lg shadow-theme","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[100] max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto p-1",t),...s})})}function _d({className:t,inset:e,variant:n="default",...r}){return c.jsx(xje,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:ge("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Hte({className:t,inset:e,...n}){return c.jsx(yje,{"data-slot":"dropdown-menu-label","data-inset":e,className:ge("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function Zj({className:t,...e}){return c.jsx(bje,{"data-slot":"dropdown-menu-separator",className:ge("bg-border -mx-1 my-1 h-px",t),...e})}function kje({className:t,...e}){return c.jsx("span",{"data-slot":"dropdown-menu-shortcut",className:ge("text-muted-foreground ml-auto text-xs tracking-widest",t),...e})}function eD({...t}){return c.jsx(wje,{"data-slot":"dropdown-menu-sub",...t})}function tD({className:t,inset:e,children:n,...r}){return c.jsxs(Cje,{"data-slot":"dropdown-menu-sub-trigger","data-inset":e,className:ge("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",t),...r,children:[n,c.jsx(pc,{className:"ml-auto size-4"})]})}function nD({className:t,variant:e="theme",...n}){return c.jsx(Sje,{"data-slot":"dropdown-menu-sub-content",className:ge(e==="default"&&"bg-popover text-popover-foreground border shadow-lg rounded-md",e==="theme"&&"bg-theme-0 text-theme-0 font-theme border border-theme rounded-lg shadow-theme","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[100] min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden p-1",t),...n})}function rD(t,[e,n]){return Math.min(n,Math.max(e,t))}var Eje=[" ","Enter","ArrowUp","ArrowDown"],_je=[" ","Enter"],n0="Select",[Rk,Mk,Tje]=mk(n0),[jv]=Fa(n0,[Tje,Pf]),Ik=Pf(),[Aje,Bf]=jv(n0),[Nje,jje]=jv(n0),Vte=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:m,required:g,form:x}=t,b=Ik(e),[C,S]=y.useState(null),[w,E]=y.useState(null),[T,_]=y.useState(!1),A=k0(u),[j,D]=Mi({prop:r,defaultProp:s??!1,onChange:a,caller:n0}),[z,F]=Mi({prop:i,defaultProp:o,onChange:l,caller:n0}),R=y.useRef(null),L=C?x||!!C.closest("form"):!0,[O,H]=y.useState(new Set),P=Array.from(O).map(I=>I.props.value).join(";");return c.jsx(Qb,{...b,children:c.jsxs(Aje,{required:g,scope:e,trigger:C,onTriggerChange:S,valueNode:w,onValueNodeChange:E,valueNodeHasChildren:T,onValueNodeHasChildrenChange:_,contentId:Ma(),value:z,onValueChange:F,open:j,onOpenChange:D,dir:A,triggerPointerDownPosRef:R,disabled:m,children:[c.jsx(Rk.Provider,{scope:e,children:c.jsx(Nje,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(I=>{H(U=>new Set(U).add(I))},[]),onNativeOptionRemove:y.useCallback(I=>{H(U=>{const W=new Set(U);return W.delete(I),W})},[]),children:n})}),L?c.jsxs(hne,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:f,value:z,onChange:I=>F(I.target.value),disabled:m,form:x,children:[z===void 0?c.jsx("option",{value:""}):null,Array.from(O)]},P):null]})})};Vte.displayName=n0;var qte="SelectTrigger",Gte=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=Ik(n),i=Bf(qte,n),o=i.disabled||r,l=Bt(e,i.onTriggerChange),u=Mk(n),d=y.useRef("touch"),[f,m,g]=mne(b=>{const C=u().filter(E=>!E.disabled),S=C.find(E=>E.value===i.value),w=pne(C,b,S);w!==void 0&&i.onValueChange(w.value)}),x=b=>{o||(i.onOpenChange(!0),g()),b&&(i.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return c.jsx(Zb,{asChild:!0,...a,children:c.jsx(Nt.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":fne(i.value)?"":void 0,...s,ref:l,onClick:yt(s.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&x(b)}),onPointerDown:yt(s.onPointerDown,b=>{d.current=b.pointerType;const C=b.target;C.hasPointerCapture(b.pointerId)&&C.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(x(b),b.preventDefault())}),onKeyDown:yt(s.onKeyDown,b=>{const C=f.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(C&&b.key===" ")&&Eje.includes(b.key)&&(x(),b.preventDefault())})})})});Gte.displayName=qte;var Wte="SelectValue",Kte=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...o}=t,l=Bf(Wte,n),{onValueNodeHasChildrenChange:u}=l,d=a!==void 0,f=Bt(e,l.onValueNodeChange);return ya(()=>{u(d)},[u,d]),c.jsx(Nt.span,{...o,ref:f,style:{pointerEvents:"none"},children:fne(l.value)?c.jsx(c.Fragment,{children:i}):a})});Kte.displayName=Wte;var Dje="SelectIcon",Yte=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(Nt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Yte.displayName=Dje;var Rje="SelectPortal",Xte=t=>c.jsx(E0,{asChild:!0,...t});Xte.displayName=Rje;var r0="SelectContent",Jte=y.forwardRef((t,e)=>{const n=Bf(r0,t.__scopeSelect),[r,s]=y.useState();if(ya(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?tu.createPortal(c.jsx(Qte,{scope:t.__scopeSelect,children:c.jsx(Rk.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),a):null}return c.jsx(Zte,{...t,ref:e})});Jte.displayName=r0;var Hl=10,[Qte,Lf]=jv(r0),Mje="SelectContentImpl",Ije=Md("SelectContent.RemoveScroll"),Zte=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:b,avoidCollisions:C,...S}=t,w=Bf(r0,n),[E,T]=y.useState(null),[_,A]=y.useState(null),j=Bt(e,de=>T(de)),[D,z]=y.useState(null),[F,R]=y.useState(null),L=Mk(n),[O,H]=y.useState(!1),P=y.useRef(!1);y.useEffect(()=>{if(E)return tw(E)},[E]),Tk();const I=y.useCallback(de=>{const[fe,...se]=L().map(oe=>oe.ref.current),[ce]=se.slice(-1),ue=document.activeElement;for(const oe of de)if(oe===ue||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===fe&&_&&(_.scrollTop=0),oe===ce&&_&&(_.scrollTop=_.scrollHeight),oe==null||oe.focus(),document.activeElement!==ue))return},[L,_]),U=y.useCallback(()=>I([D,E]),[I,D,E]);y.useEffect(()=>{O&&U()},[O,U]);const{onOpenChange:W,triggerPointerDownPosRef:Y}=w;y.useEffect(()=>{if(E){let de={x:0,y:0};const fe=ce=>{var ue,oe;de={x:Math.abs(Math.round(ce.pageX)-(((ue=Y.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((oe=Y.current)==null?void 0:oe.y)??0))}},se=ce=>{de.x<=10&&de.y<=10?ce.preventDefault():E.contains(ce.target)||W(!1),document.removeEventListener("pointermove",fe),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",se,{capture:!0})}}},[E,W,Y]),y.useEffect(()=>{const de=()=>W(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[W]);const[B,Z]=mne(de=>{const fe=L().filter(ue=>!ue.disabled),se=fe.find(ue=>ue.ref.current===document.activeElement),ce=pne(fe,de,se);ce&&setTimeout(()=>ce.ref.current.focus())}),le=y.useCallback((de,fe,se)=>{const ce=!P.current&&!se;(w.value!==void 0&&w.value===fe||ce)&&(z(de),ce&&(P.current=!0))},[w.value]),G=y.useCallback(()=>E==null?void 0:E.focus(),[E]),K=y.useCallback((de,fe,se)=>{const ce=!P.current&&!se;(w.value!==void 0&&w.value===fe||ce)&&R(de)},[w.value]),te=r==="popper"?sD:ene,ie=te===sD?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:b,avoidCollisions:C}:{};return c.jsx(Qte,{scope:n,content:E,viewport:_,onViewportChange:A,itemRefCallback:le,selectedItem:D,onItemLeave:G,itemTextRefCallback:K,focusSelectedItem:U,selectedItemText:F,position:r,isPositioned:O,searchRef:B,children:c.jsx(_v,{as:Ije,allowPinchZoom:!0,children:c.jsx(Ev,{asChild:!0,trapped:w.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:yt(s,de=>{var fe;(fe=w.trigger)==null||fe.focus({preventScroll:!0}),de.preventDefault()}),children:c.jsx(Cv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:c.jsx(te,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:de=>de.preventDefault(),...S,...ie,onPlaced:()=>H(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:yt(S.onKeyDown,de=>{const fe=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!fe&&de.key.length===1&&Z(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let ce=L().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(de.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const ue=de.target,oe=ce.indexOf(ue);ce=ce.slice(oe+1)}setTimeout(()=>I(ce)),de.preventDefault()}})})})})})})});Zte.displayName=Mje;var Oje="SelectItemAlignedPosition",ene=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=Bf(r0,n),i=Lf(r0,n),[o,l]=y.useState(null),[u,d]=y.useState(null),f=Bt(e,j=>d(j)),m=Mk(n),g=y.useRef(!1),x=y.useRef(!0),{viewport:b,selectedItem:C,selectedItemText:S,focusSelectedItem:w}=i,E=y.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&u&&b&&C&&S){const j=a.trigger.getBoundingClientRect(),D=u.getBoundingClientRect(),z=a.valueNode.getBoundingClientRect(),F=S.getBoundingClientRect();if(a.dir!=="rtl"){const ue=F.left-D.left,oe=z.left-ue,Ne=j.left-oe,ve=j.width+Ne,He=Math.max(ve,D.width),nt=window.innerWidth-Hl,Me=rD(oe,[Hl,Math.max(Hl,nt-He)]);o.style.minWidth=ve+"px",o.style.left=Me+"px"}else{const ue=D.right-F.right,oe=window.innerWidth-z.right-ue,Ne=window.innerWidth-j.right-oe,ve=j.width+Ne,He=Math.max(ve,D.width),nt=window.innerWidth-Hl,Me=rD(oe,[Hl,Math.max(Hl,nt-He)]);o.style.minWidth=ve+"px",o.style.right=Me+"px"}const R=m(),L=window.innerHeight-Hl*2,O=b.scrollHeight,H=window.getComputedStyle(u),P=parseInt(H.borderTopWidth,10),I=parseInt(H.paddingTop,10),U=parseInt(H.borderBottomWidth,10),W=parseInt(H.paddingBottom,10),Y=P+I+O+W+U,B=Math.min(C.offsetHeight*5,Y),Z=window.getComputedStyle(b),le=parseInt(Z.paddingTop,10),G=parseInt(Z.paddingBottom,10),K=j.top+j.height/2-Hl,te=L-K,ie=C.offsetHeight/2,de=C.offsetTop+ie,fe=P+I+de,se=Y-fe;if(fe<=K){const ue=R.length>0&&C===R[R.length-1].ref.current;o.style.bottom="0px";const oe=u.clientHeight-b.offsetTop-b.offsetHeight,Ne=Math.max(te,ie+(ue?G:0)+oe+U),ve=fe+Ne;o.style.height=ve+"px"}else{const ue=R.length>0&&C===R[0].ref.current;o.style.top="0px";const Ne=Math.max(K,P+b.offsetTop+(ue?le:0)+ie)+se;o.style.height=Ne+"px",b.scrollTop=fe-K+b.offsetTop}o.style.margin=`${Hl}px 0`,o.style.minHeight=B+"px",o.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,o,u,b,C,S,a.dir,r]);ya(()=>E(),[E]);const[T,_]=y.useState();ya(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const A=y.useCallback(j=>{j&&x.current===!0&&(E(),w==null||w(),x.current=!1)},[E,w]);return c.jsx(Fje,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:A,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:c.jsx(Nt.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ene.displayName=Oje;var Pje="SelectPopperPosition",sD=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Hl,...a}=t,i=Ik(n);return c.jsx(Sk,{...i,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sD.displayName=Pje;var[Fje,VR]=jv(r0,{}),aD="SelectViewport",tne=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=Lf(aD,n),i=VR(aD,n),o=Bt(e,a.onViewportChange),l=y.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(Rk.Slot,{scope:n,children:c.jsx(Nt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:yt(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const g=Math.abs(l.current-d.scrollTop);if(g>0){const x=window.innerHeight-Hl*2,b=parseFloat(f.style.minHeight),C=parseFloat(f.style.height),S=Math.max(b,C);if(S<x){const w=S+g,E=Math.min(x,w),T=w-E;f.style.height=E+"px",f.style.bottom==="0px"&&(d.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});tne.displayName=aD;var nne="SelectGroup",[Bje,Lje]=jv(nne),zje=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ma();return c.jsx(Bje,{scope:n,id:s,children:c.jsx(Nt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});zje.displayName=nne;var rne="SelectLabel",$je=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lje(rne,n);return c.jsx(Nt.div,{id:s.id,...r,ref:e})});$je.displayName=rne;var k4="SelectItem",[Uje,sne]=jv(k4),ane=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=t,o=Bf(k4,n),l=Lf(k4,n),u=o.value===r,[d,f]=y.useState(a??""),[m,g]=y.useState(!1),x=Bt(e,w=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,w,r,s)}),b=Ma(),C=y.useRef("touch"),S=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(Uje,{scope:n,value:r,disabled:s,textId:b,isSelected:u,onItemTextChange:y.useCallback(w=>{f(E=>E||((w==null?void 0:w.textContent)??"").trim())},[]),children:c.jsx(Rk.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:c.jsx(Nt.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:x,onFocus:yt(i.onFocus,()=>g(!0)),onBlur:yt(i.onBlur,()=>g(!1)),onClick:yt(i.onClick,()=>{C.current!=="mouse"&&S()}),onPointerUp:yt(i.onPointerUp,()=>{C.current==="mouse"&&S()}),onPointerDown:yt(i.onPointerDown,w=>{C.current=w.pointerType}),onPointerMove:yt(i.onPointerMove,w=>{var E;C.current=w.pointerType,s?(E=l.onItemLeave)==null||E.call(l):C.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:yt(i.onPointerLeave,w=>{var E;w.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:yt(i.onKeyDown,w=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&w.key===" "||(_je.includes(w.key)&&S(),w.key===" "&&w.preventDefault())})})})})});ane.displayName=k4;var yx="SelectItemText",ine=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,i=Bf(yx,n),o=Lf(yx,n),l=sne(yx,n),u=jje(yx,n),[d,f]=y.useState(null),m=Bt(e,S=>f(S),l.onItemTextChange,S=>{var w;return(w=o.itemTextRefCallback)==null?void 0:w.call(o,S,l.value,l.disabled)}),g=d==null?void 0:d.textContent,x=y.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:C}=u;return ya(()=>(b(x),()=>C(x)),[b,C,x]),c.jsxs(c.Fragment,{children:[c.jsx(Nt.span,{id:l.textId,...a,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?tu.createPortal(a.children,i.valueNode):null]})});ine.displayName=yx;var one="SelectItemIndicator",lne=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return sne(one,n).isSelected?c.jsx(Nt.span,{"aria-hidden":!0,...r,ref:e}):null});lne.displayName=one;var iD="SelectScrollUpButton",cne=y.forwardRef((t,e)=>{const n=Lf(iD,t.__scopeSelect),r=VR(iD,t.__scopeSelect),[s,a]=y.useState(!1),i=Bt(e,r.onScrollButtonChange);return ya(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;a(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?c.jsx(dne,{...t,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});cne.displayName=iD;var oD="SelectScrollDownButton",une=y.forwardRef((t,e)=>{const n=Lf(oD,t.__scopeSelect),r=VR(oD,t.__scopeSelect),[s,a]=y.useState(!1),i=Bt(e,r.onScrollButtonChange);return ya(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;a(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?c.jsx(dne,{...t,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});une.displayName=oD;var dne=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=Lf("SelectScrollButton",n),i=y.useRef(null),o=Mk(n),l=y.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),ya(()=>{var d;const u=o().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),c.jsx(Nt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:yt(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:yt(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:yt(s.onPointerLeave,()=>{l()})})}),Hje="SelectSeparator",Vje=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(Nt.div,{"aria-hidden":!0,...r,ref:e})});Vje.displayName=Hje;var lD="SelectArrow",qje=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ik(n),a=Bf(lD,n),i=Lf(lD,n);return a.open&&i.position==="popper"?c.jsx(kk,{...s,...r,ref:e}):null});qje.displayName=lD;var Gje="SelectBubbleInput",hne=y.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=y.useRef(null),a=Bt(r,s),i=vk(e);return y.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==e&&d){const f=new Event("change",{bubbles:!0});d.call(o,e),o.dispatchEvent(f)}},[i,e]),c.jsx(Nt.select,{...n,style:{...pee,...n.style},ref:a,defaultValue:e})});hne.displayName=Gje;function fne(t){return t===""||t===void 0}function mne(t){const e=Pr(t),n=y.useRef(""),r=y.useRef(0),s=y.useCallback(i=>{const o=n.current+i;e(o),(function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(o)},[e]),a=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function pne(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let i=Wje(t,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const l=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Wje(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Kje=Vte,Yje=Gte,Xje=Kte,Jje=Yte,Qje=Xte,Zje=Jte,eDe=tne,tDe=ane,nDe=ine,rDe=lne,sDe=cne,aDe=une;function jo({...t}){return c.jsx(Kje,{"data-slot":"select",...t})}function Td({...t}){return c.jsx(Xje,{"data-slot":"select-value",...t})}const iDe=Oi("data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",{variants:{variant:{default:"border-input bg-transparent",theme:"border-theme bg-theme-0 text-theme-0 font-theme"}},defaultVariants:{variant:"theme"}});function Do({className:t,size:e="default",variant:n="theme",children:r,withArrow:s=!0,...a}){return c.jsxs(Yje,{"data-slot":"select-trigger","data-size":e,className:ge(iDe({variant:n,className:t})),...a,children:[r,s&&c.jsx(Jje,{asChild:!0,children:c.jsx(oi,{className:"size-4 text-base-1"})})]})}const oDe=Oi("text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",{variants:{variant:{default:"bg-popover",theme:"border-theme bg-theme-0 text-theme-0"}},defaultVariants:{variant:"theme"}});function Ro({className:t,children:e,position:n="popper",variant:r="theme",container:s,...a}){return c.jsx(Qje,{container:s,children:c.jsxs(Zje,{"data-slot":"select-content",className:ge(oDe({variant:r,className:t}),n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...a,children:[c.jsx(cDe,{}),c.jsx(eDe,{className:ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),c.jsx(uDe,{})]})})}const lDe=Oi("[&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",{variants:{variant:{default:"focus:bg-accent focus:text-accent-foreground",theme:"focus:bg-theme-1 focus:text-theme-0 hover:bg-theme-1"}}});function Xt({className:t,children:e,variant:n="theme",...r}){return c.jsxs(tDe,{"data-slot":"select-item",className:ge(lDe({variant:n,className:t})),...r,children:[c.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:c.jsx(rDe,{children:c.jsx(or,{className:"size-4"})})}),c.jsx(nDe,{children:e})]})}function cDe({className:t,...e}){return c.jsx(sDe,{"data-slot":"select-scroll-up-button",className:ge("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(Im,{className:"size-4"})})}function uDe({className:t,...e}){return c.jsx(aDe,{"data-slot":"select-scroll-down-button",className:ge("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(oi,{className:"size-4"})})}var Ok="Popover",[gne]=Fa(Ok,[Pf]),ow=Pf(),[dDe,zf]=gne(Ok),vne=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=t,o=ow(e),l=y.useRef(null),[u,d]=y.useState(!1),[f,m]=Mi({prop:r,defaultProp:s??!1,onChange:a,caller:Ok});return c.jsx(Qb,{...o,children:c.jsx(dDe,{scope:e,contentId:Ma(),triggerRef:l,open:f,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>d(!0),[]),onCustomAnchorRemove:y.useCallback(()=>d(!1),[]),modal:i,children:n})})};vne.displayName=Ok;var yne="PopoverAnchor",hDe=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=zf(yne,n),a=ow(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=s;return y.useEffect(()=>(i(),()=>o()),[i,o]),c.jsx(Zb,{...a,...r,ref:e})});hDe.displayName=yne;var xne="PopoverTrigger",bne=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=zf(xne,n),a=ow(n),i=Bt(e,s.triggerRef),o=c.jsx(Nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Ene(s.open),...r,ref:i,onClick:yt(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:c.jsx(Zb,{asChild:!0,...a,children:o})});bne.displayName=xne;var qR="PopoverPortal",[fDe,mDe]=gne(qR,{forceMount:void 0}),wne=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,a=zf(qR,e);return c.jsx(fDe,{scope:e,forceMount:n,children:c.jsx(Ba,{present:n||a.open,children:c.jsx(E0,{asChild:!0,container:s,children:r})})})};wne.displayName=qR;var Pg="PopoverContent",Cne=y.forwardRef((t,e)=>{const n=mDe(Pg,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,a=zf(Pg,t.__scopePopover);return c.jsx(Ba,{present:r||a.open,children:a.modal?c.jsx(gDe,{...s,ref:e}):c.jsx(vDe,{...s,ref:e})})});Cne.displayName=Pg;var pDe=Md("PopoverContent.RemoveScroll"),gDe=y.forwardRef((t,e)=>{const n=zf(Pg,t.__scopePopover),r=y.useRef(null),s=Bt(e,r),a=y.useRef(!1);return y.useEffect(()=>{const i=r.current;if(i)return tw(i)},[]),c.jsx(_v,{as:pDe,allowPinchZoom:!0,children:c.jsx(Sne,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),a.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:yt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:yt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),vDe=y.forwardRef((t,e)=>{const n=zf(Pg,t.__scopePopover),r=y.useRef(!1),s=y.useRef(!1);return c.jsx(Sne,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,o;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Sne=y.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...f}=t,m=zf(Pg,n),g=ow(n);return Tk(),c.jsx(Ev,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:c.jsx(Cv,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:c.jsx(Sk,{"data-state":Ene(m.open),role:"dialog",id:m.contentId,...g,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kne="PopoverClose",yDe=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=zf(kne,n);return c.jsx(Nt.button,{type:"button",...r,ref:e,onClick:yt(t.onClick,()=>s.onOpenChange(!1))})});yDe.displayName=kne;var xDe="PopoverArrow",bDe=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ow(n);return c.jsx(kk,{...s,...r,ref:e})});bDe.displayName=xDe;function Ene(t){return t?"open":"closed"}var _ne=vne,Tne=bne,Ane=wne,Nne=Cne;function zo({open:t,onOpenChange:e,defaultOpen:n,...r}){const s=t!==void 0,[a,i]=y.useState(n??!1),o=y.useRef(0),l=100,u=y.useCallback(f=>{const m=Date.now();m-o.current<l||(o.current=m,s||i(f),e==null||e(f))},[s,e]),d=s?t:a;return c.jsx(_ne,{"data-slot":"popover",open:d,onOpenChange:u,...r})}function $o({...t}){return c.jsx(Tne,{"data-slot":"popover-trigger",...t})}function Uo({className:t,align:e="center",sideOffset:n=4,container:r,variant:s="theme",zIndex:a,style:i,...o}){return c.jsx(Ane,{container:r,children:c.jsx(Nne,{"data-slot":"popover-content",align:e,sideOffset:n,className:ge(s==="default"&&"bg-white shadow-md border border-gray-200 rounded-lg",s==="theme"&&"bg-theme-0 text-theme-0 font-theme border border-theme rounded-lg shadow-theme w-max","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[100] origin-(--radix-popover-content-transform-origin) outline-hidden",t),style:a!==void 0?{zIndex:a,...i}:i,...o})})}function wDe(){return{closeWidget:()=>{},isOpen:!1,openWidget:()=>{},toggleWidget:()=>{}}}const CDe=({setActiveTab:t})=>{const{quillEditor:e,isWidget:n}=Fr(),[r,s]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[u,d]=y.useState(!1),[f,m]=y.useState("text"),[g,x]=y.useState("default"),[b,C]=y.useState("left"),[S,w]=y.useState(!1),[E,T]=y.useState("#fff87599"),[_,A]=y.useState(!1),[j,D]=y.useState(!1),[z,F]=y.useState("assignments"),[R,L]=y.useState([]),O=y.useRef(null),H=()=>{A(!_)},P=(ve,He)=>{e&&(He(),ve&&(e.setSelection(ve.index,ve.length),e.focus()))},I=()=>{switch(f){case"title":return c.jsx(Fj,{className:"min-w-[20px] min-h-[20px] text-theme-0"});case"heading":return c.jsx(Bj,{className:"min-w-[20px] min-h-[20px] text-theme-0"});case"subheading":return c.jsx(Lj,{className:"min-w-[20px] min-h-[20px] text-theme-0"});case"bullet":return c.jsx(p4,{className:"min-w-[20px] min-h-[20px] text-theme-0"});case"numbered":return c.jsx(zj,{className:"min-w-[20px] min-h-[20px] text-theme-0"});default:return c.jsx(sU,{className:"min-w-[20px] min-h-[20px] text-theme-0"})}};y.useEffect(()=>{const ve=()=>{if(e){const nt=e.getFormat();s(!!nt.bold),i(!!nt.italic),l(!!nt.underline),d(!!nt.strike),C(nt.align||"left"),x(nt.color||"default");const Me=nt["background-color"]||nt.background;if(Me){const $e=K(Me);T($e),w(!0)}else w(!1);nt.header===1?m("title"):nt.header===2?m("heading"):nt.header===3?m("subheading"):nt.list==="bullet"?m("bullet"):nt.list==="ordered"?m("numbered"):m("text")}},He=nt=>{const{range:Me,quill:$e}=nt.detail;console.log(" TOOLBAR RECEIVED SELECTION:",Me),Me!==null&&(O.current={index:Me.index,length:Me.length},ve())};return document.addEventListener("quill-selection-change",He),e&&(e.on("selection-change",nt=>{console.log(" selection-change",nt),nt!==null&&(console.log(e.getFormat(nt.index)),O.current={index:nt.index,length:nt.length},ve())}),e.on("text-change",()=>{ve()})),()=>{document.removeEventListener("quill-selection-change",He)}},[e]);const U=ve=>{P(O.current,()=>{var Me;if(!e)return;const He=((Me=O.current)==null?void 0:Me.index)||0,[nt]=e.getLine(He);if(nt){const $e=e.getIndex(nt),Le=nt.length();switch(e.formatText($e,Le,"header",!1),e.formatText($e,Le,"list",!1),ve){case"title":e.formatText($e,Le,"header",1);break;case"heading":e.formatText($e,Le,"header",2);break;case"subheading":e.formatText($e,Le,"header",3);break;case"bullet":e.formatText($e,Le,"list","bullet");break;case"numbered":e.formatText($e,Le,"list","ordered");break}}m(ve)})},W=ve=>{P(O.current,()=>{e&&(ve==="default"?e.format("color",!1):e.format("color",ve),x(ve))})},Y=ve=>{P(O.current,()=>{e&&(console.log("changed highlight to ",ve),e.format("background",ve),T(ve),w(!0))})},B=ve=>{P(O.current,()=>{e&&(ve==="left"?e.format("align",!1):e.format("align",ve),C(ve))})},Z=()=>{P(O.current,()=>{if(!e)return;const ve=e.getFormat();e.format("bold",!ve.bold),s(!ve.bold)})},le=()=>{P(O.current,()=>{if(!e)return;const ve=e.getFormat();e.format("italic",!ve.italic),i(!ve.italic)})},G=()=>{P(O.current,()=>{if(!e)return;const ve=e.getFormat();e.format("underline",!ve.underline),l(!ve.underline)})},K=ve=>{const He=ve.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(He){const[nt,Me,$e,Le,ae]=He,pe="#"+("0"+parseInt(Me).toString(16)).slice(-2)+("0"+parseInt($e).toString(16)).slice(-2)+("0"+parseInt(Le).toString(16)).slice(-2);if(ae&&parseFloat(ae)!==1){const _e=Math.round(parseFloat(ae)*255).toString(16);return pe+("0"+_e).slice(-2)}return pe}return ve},te=()=>{P(O.current,()=>{var $e;if(!e)return;const ve=e.getFormat(),He=ve["background-color"]||ve.background||"",Me=K(He)===E;if(console.log("isCurrentlyHighlighted",Me,ve),Me&&((($e=O.current)==null?void 0:$e.length)??0)>0)e.format("background",!1),w(!1);else{const Le=E||"#fff87599";e.format("background",Le),T(Le),w(!0)}})},{switchNote:ie,settings:de,portal:fe}=Fr(),{handleDeleteNote:se}=Fr(),[ce,ue]=y.useState(!1),oe=()=>{L([])},Ne=ve=>{if(e){const He=e.getSelection(!0);e.insertEmbed(He.index,"assignment",{id:ve._id,title:ve.title}),e.insertText(He.index+1,`
`),e.setSelection(He.index+2,0),D(!1)}};return c.jsxs("div",{className:"flex items-center justify-between px-[20px] border-b border-theme h-[60px]",children:[c.jsxs("div",{className:"flex items-center",children:[t&&c.jsx(Vc,{pressed:!1,onClick:()=>t("navigation"),className:"flex items-center text-theme-1 min-h-[20px] mr-[5px]",children:c.jsx(xv,{className:"min-w-[18px] min-h-[18px] text-theme-1 hover:text-theme-1"})}),c.jsx(Vc,{pressed:ce,onClick:()=>ue(ve=>!ve),className:"flex items-center text-theme-1 min-h-[20px] mr-[5px]",children:c.jsx(wv,{className:`${ce?"text-red-500":"text-theme-1"} min-w-[18px] min-h-[18px]`})}),c.jsx(Wo,{children:ce&&c.jsxs(pa.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},className:"flex items-center gap-[5px] overflow-hidden",children:[c.jsx(Vc,{onClick:ve=>{ve.stopPropagation(),se(),ue(!1)},children:c.jsx(or,{className:"min-w-[18px] min-h-[18px] text-theme-1 hover:text-theme-1"})}),c.jsx(Vc,{onClick:ve=>{ve.stopPropagation(),ue(!1)},children:c.jsx(ys,{className:"min-w-[18px] min-h-[18px] text-theme-1 hover:text-theme-1"})})]})})]}),c.jsxs("div",{className:"flex items-center gap-[2px]",children:[c.jsxs(jo,{value:f,onValueChange:U,children:[c.jsx(Do,{withArrow:!1,className:"cursor-pointer border-0 outline-none shadow-none hover:bg-theme-2 transition-all duration-200 rounded-md px-[8px] py-0",children:I()}),c.jsxs(Ro,{container:fe,children:[c.jsxs(Xt,{value:"title",className:"flex items-center gap-[15px]",children:[c.jsx(Fj,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-bold text-xl",children:"Title"})]}),c.jsxs(Xt,{value:"heading",className:"flex items-center gap-[15px]",children:[c.jsx(Bj,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-semibold text-lg",children:"Header"})]}),c.jsxs(Xt,{value:"subheading",className:"flex items-center gap-[15px]",children:[c.jsx(Lj,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-semibold text-base",children:"Subheader"})]}),c.jsxs(Xt,{value:"text",className:"flex items-center gap-[15px]",children:[c.jsx(sU,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",children:"Text"})]}),c.jsxs(Xt,{value:"bullet",className:"flex items-center gap-[15px]",children:[c.jsx(p4,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",children:"Bullet list"})]}),c.jsxs(Xt,{value:"numbered",className:"flex items-center gap-[15px]",children:[c.jsx(zj,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",children:"Number list"})]})]})]}),c.jsx(Vc,{"aria-label":"Toggle bold",pressed:r,onMouseDown:ve=>{ve.preventDefault(),Z()},className:"text-theme-1 hover:text-theme-1",children:c.jsx(nZ,{className:"h-[20px] w-[20px]"})}),c.jsx(Vc,{"aria-label":"Toggle italic",pressed:a,onMouseDown:ve=>{ve.preventDefault(),le()},className:"text-theme-1 hover:text-theme-1",children:c.jsx(uZ,{className:"h-[20px] w-[20px]"})}),c.jsx(Vc,{"aria-label":"Toggle underline",pressed:o,onMouseDown:ve=>{ve.preventDefault(),G()},className:"text-theme-1 hover:text-theme-1",children:c.jsx(yZ,{className:"h-[20px] w-[20px]"})}),c.jsxs("div",{className:"flex items-center gap-[2px]",children:[c.jsx(Vc,{"aria-label":"Toggle highlight",pressed:S,onMouseDown:ve=>{ve.preventDefault(),te()},className:"text-theme-1 hover:text-theme-1 data-[state=on]:bg-transparent",style:S?{backgroundColor:E}:{},children:c.jsx(_m,{className:"h-[20px] w-[20px]"})}),c.jsxs(jo,{value:E,onValueChange:Y,children:[c.jsx(Do,{className:"w-fit px-2 border-0 outline-none shadow-none relative pl-0"}),c.jsxs(Ro,{container:fe,children:[c.jsxs(Xt,{value:"#fff87599",className:"flex items-center gap-[15px]",children:[c.jsx(_m,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",style:{backgroundColor:"#fff87599"},children:"Yellow"})]}),c.jsxs(Xt,{value:"#9fffc099",className:"flex items-center gap-[15px]",children:[c.jsx(_m,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",style:{backgroundColor:"#9fffc099"},children:"Green"})]}),c.jsxs(Xt,{value:"#b2e3ff99",className:"flex items-center gap-[15px]",children:[c.jsx(_m,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",style:{backgroundColor:"#b2e3ff99"},children:"Blue"})]}),c.jsxs(Xt,{value:"#d3aaff99",className:"flex items-center gap-[15px]",children:[c.jsx(_m,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",style:{backgroundColor:"#d3aaff99"},children:"Purple"})]}),c.jsxs(Xt,{value:"#ff9adc99",className:"flex items-center gap-[15px]",children:[c.jsx(_m,{className:"w-[20px] h-[20px]"}),c.jsx("p",{className:"font-normal text-sm",style:{backgroundColor:"#ff9adc99"},children:"Pink"})]})]})]})]}),c.jsxs(zo,{open:_,onOpenChange:A,children:[c.jsx($o,{children:c.jsx(Vc,{"aria-label":"Toggle more",pressed:_,onClick:H,className:"text-theme-1 hover:text-theme-1",children:c.jsx(Wb,{className:"w-[20px] h-[20px]"})})}),c.jsxs(Uo,{className:"flex items-center gap-[10px] px-[10px] py-[8px]",container:fe,children:[c.jsxs(jo,{value:g,onValueChange:W,children:[c.jsx(Do,{className:"w-fit px-[8px] py-[6px]",children:c.jsx(mm,{className:"w-[20px] h-[20px] text-theme-0",style:g==="default"?void 0:{color:g}})}),c.jsxs(Ro,{container:fe,children:[c.jsxs(Xt,{value:"default",className:"flex items-center gap-[15px]",children:[c.jsx(mm,{className:"w-[20px] h-[20px] text-theme-0"}),c.jsx("p",{className:"font-normal text-sm",children:"Default"})]}),c.jsxs(Xt,{value:"#ef4444",className:"flex items-center gap-[15px]",children:[c.jsx(mm,{className:"w-[20px] h-[20px] text-[#ef4444]"}),c.jsx("p",{className:"font-normal text-sm text-[#ef4444]",children:"Red"})]}),c.jsxs(Xt,{value:"#22c55e",className:"flex items-center gap-[15px]",children:[c.jsx(mm,{className:"w-[20px] h-[20px] text-[#22c55e]"}),c.jsx("p",{className:"font-normal text-sm text-[#22c55e]",children:"Green"})]}),c.jsxs(Xt,{value:"#3b82f6",className:"flex items-center gap-[15px]",children:[c.jsx(mm,{className:"w-[20px] h-[20px] text-[#3b82f6]"}),c.jsx("p",{className:"font-normal text-sm text-[#3b82f6]",children:"Blue"})]}),c.jsxs(Xt,{value:"#eab308",className:"flex items-center gap-[15px]",children:[c.jsx(mm,{className:"w-[20px] h-[20px] text-[#eab308]"}),c.jsx("p",{className:"font-normal text-sm text-[#eab308]",children:"Yellow"})]}),c.jsxs(Xt,{value:"#a855f7",className:"flex items-center gap-[15px]",children:[c.jsx(mm,{className:"w-[20px] h-[20px] text-[#a855f7]"}),c.jsx("p",{className:"font-normal text-sm text-[#a855f7]",children:"Purple"})]})]})]}),c.jsxs(jo,{value:b,onValueChange:B,children:[c.jsx(Do,{className:"w-fit px-[8px] py-[6px]",children:c.jsx(f4,{className:"w-[20px] h-[20px] text-theme-0"})}),c.jsxs(Ro,{container:fe,children:[c.jsxs(Xt,{value:"left",className:"flex items-center gap-[15px]",children:[c.jsx(f4,{className:"w-[20px] h-[20px] text-theme-0"}),c.jsx("p",{className:"font-normal text-sm",children:"Left"})]}),c.jsxs(Xt,{value:"center",className:"flex items-center gap-[15px]",children:[c.jsx(ske,{className:"w-[20px] h-[20px] text-theme-0"}),c.jsx("p",{className:"font-normal text-sm",children:"Center"})]}),c.jsxs(Xt,{value:"right",className:"flex items-center gap-[15px]",children:[c.jsx(cke,{className:"w-[20px] h-[20px] text-theme-0"}),c.jsx("p",{className:"font-normal text-sm",children:"Right"})]}),c.jsxs(Xt,{value:"justify",className:"flex items-center gap-[15px]",children:[c.jsx(ike,{className:"w-[20px] h-[20px] text-theme-0"}),c.jsx("p",{className:"font-normal text-sm",children:"Justify"})]})]})]}),c.jsx("button",{className:"p-[6px]",onClick:()=>{const ve=prompt("Enter link URL:");ve&&(e!=null&&e.getSelection())&&(e==null||e.format("link",ve))},children:c.jsx(Kb,{className:"w-[20px] h-[20px]"})}),c.jsxs(Tv,{open:j,onOpenChange:D,children:[c.jsx(Av,{asChild:!0,children:c.jsx("button",{className:"p-[6px]",children:c.jsx(oEe,{className:"w-[20px] h-[20px]"})})}),c.jsxs(Nv,{children:[c.jsx(Hte,{children:"Link resources"}),c.jsxs(eD,{children:[c.jsx(tD,{children:"Tasks"}),c.jsx(Qj,{children:c.jsxs(nD,{children:[c.jsx("input",{type:"text",placeholder:"Search for assignment",className:"w-full border-0 outline-none px-[10px] py-[5px] rounded-lg"}),c.jsx("div",{className:"flex flex-col",children:R.map(ve=>c.jsxs("div",{className:"flex items-center gap-[10px] px-[10px] py-[5px]",children:[c.jsx("p",{className:"text-sm text-theme-0",children:ve.title}),c.jsx("button",{onClick:()=>Ne(ve),children:c.jsx(Yd,{className:"w-[16px] h-[16px]"})})]},ve._id))})]})})]}),c.jsxs(eD,{children:[c.jsx(tD,{children:"Files"}),c.jsx(Qj,{children:c.jsxs(nD,{children:[c.jsx("input",{type:"text",placeholder:"Search for file",className:"w-full border-0 outline-none px-[10px] py-[5px] rounded-lg",onChange:()=>oe()}),c.jsx(Ns,{className:""}),c.jsx("div",{className:"flex flex-col",children:R.map(ve=>c.jsx("button",{onClick:()=>Ne(ve),className:"hover:bg-gray-100 rounded-lg p-[3px] flex items-center gap-[10px] px-[10px] py-[5px] justify-between",children:c.jsx("p",{className:"text-sm text-theme-0",children:ve.title})},ve._id))})]})})]}),c.jsxs(_d,{children:[c.jsx(mR,{className:"w-[16px] h-[16px]"}),"Upload"]})]})]})]})]})]}),c.jsx("div",{children:n&&c.jsx(SDe,{})})]})},SDe=()=>{const{closeWidget:t}=wDe();return c.jsx("button",{onClick:()=>t("stickyNote"),className:"hover:cursor-pointer hover:scale-110 transition-all duration-200",children:c.jsx(ys,{className:"size-4"})})},DU=()=>{const{noteId:t,setSmartNote:e,getSmartNoteContent:n,settings:r,transcript:s}=Fr(),{authenticatedClient:a,showError:i,authenticatedFetch:o}=ut(),l=async()=>{await a()||i("There was an error while generating smart note","error");const d=await o(`${Jr}/notes/smart-note`,{method:"POST",body:{noteId:t}});if(!d.body)return;const f=d.body.getReader(),m=new TextDecoder;let g="";for(;;){const{done:x,value:b}=await f.read();if(x)break;const S=m.decode(b).split(`

`);for(const w of S)if(console.log("line",w),w.startsWith("data: "))try{const E=JSON.parse(w.slice(6));if(E.type==="delta")g+=E.delta||"",e(g);else if(E.type==="done")e(E.text||g);else if(E.type==="error")throw console.error("Stream error:",E.error),new Error(E.error)}catch(E){console.error("Error parsing stream data:",E)}}};return c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsxs(Eee,{restrictedPlans:["none","free","proLite"],onClick:l,children:[c.jsx(jR,{children:c.jsx("button",{onClick:l,className:"cursor-pointer bg-theme-1 text-theme-0 hover:bg-theme-2 hover:text-theme-0 transition-all duration-300 border border-theme rounded-xl px-4 py-2",children:c.jsx(b4,{restrictedPlans:["none","free","proLite"],className:"size-3.5 fill-current text-theme-0",children:c.jsx("span",{className:"text-sm",children:"Generate smart note"})})})}),c.jsx(NR,{children:c.jsxs("button",{onClick:l,className:"flex items-center gap-2 cursor-pointer bg-theme-1 text-theme-0 hover:bg-theme-2 hover:text-theme-0 transition-all duration-300 border border-theme rounded-xl px-4 py-2",children:[c.jsx(wZ,{className:"size-3.5"}),c.jsx("span",{className:"text-sm",children:"Generate smart note"})]})})]}),c.jsxs("p",{className:"text-sm text-theme-1 text-center mt-[5px]",children:["Based on your notes ",s.length>0?" and transcript":""]})]})},kDe=()=>{const{noteId:t,smartNote:e,getSmartNoteContent:n,setSmartNote:r,transcript:s}=Fr(),[a,i]=y.useState(!1),o=y.useRef(!1);return console.log("smartNote",e,e===""||e===null),y.useEffect(()=>{t&&o.current!==!0&&(o.current=!0,i(!0),n(t).then(l=>{r(l),i(!1)}))},[t]),a?c.jsx("div",{className:"flex flex-col gap-[10px]"}):!e||e===""?c.jsx("div",{className:"flex items-center justify-center h-full w-full",children:c.jsx(DU,{})}):c.jsxs("div",{className:"max-w-[640px] mx-auto w-full h-full overflow-y-auto",children:[c.jsx("div",{className:"py-8",dangerouslySetInnerHTML:{__html:qZ(e)}}),c.jsx(DU,{})]})};var vA,RU;function EDe(){if(RU)return vA;RU=1,vA=s;var t="---",e="A-Za-z--------",n=new RegExp("^[^"+e+"]*["+t+"]"),r=new RegExp("^[^"+t+"]*["+e+"]");function s(a){return a=String(a||""),n.test(a)?"rtl":r.test(a)?"ltr":"neutral"}return vA}var _De=EDe();const jne=Pa(_De);var yA,MU;function GR(){if(MU)return yA;MU=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return yA=t,yA}var xA,IU;function TDe(){if(IU)return xA;IU=1;var t=typeof No=="object"&&No&&No.Object===Object&&No;return xA=t,xA}var bA,OU;function Dne(){if(OU)return bA;OU=1;var t=TDe(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return bA=n,bA}var wA,PU;function ADe(){if(PU)return wA;PU=1;var t=Dne(),e=function(){return t.Date.now()};return wA=e,wA}var CA,FU;function NDe(){if(FU)return CA;FU=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return CA=e,CA}var SA,BU;function jDe(){if(BU)return SA;BU=1;var t=NDe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return SA=n,SA}var kA,LU;function Rne(){if(LU)return kA;LU=1;var t=Dne(),e=t.Symbol;return kA=e,kA}var EA,zU;function DDe(){if(zU)return EA;zU=1;var t=Rne(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,s=t?t.toStringTag:void 0;function a(i){var o=n.call(i,s),l=i[s];try{i[s]=void 0;var u=!0}catch{}var d=r.call(i);return u&&(o?i[s]=l:delete i[s]),d}return EA=a,EA}var _A,$U;function RDe(){if($U)return _A;$U=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return _A=n,_A}var TA,UU;function MDe(){if(UU)return TA;UU=1;var t=Rne(),e=DDe(),n=RDe(),r="[object Null]",s="[object Undefined]",a=t?t.toStringTag:void 0;function i(o){return o==null?o===void 0?s:r:a&&a in Object(o)?e(o):n(o)}return TA=i,TA}var AA,HU;function IDe(){if(HU)return AA;HU=1;function t(e){return e!=null&&typeof e=="object"}return AA=t,AA}var NA,VU;function ODe(){if(VU)return NA;VU=1;var t=MDe(),e=IDe(),n="[object Symbol]";function r(s){return typeof s=="symbol"||e(s)&&t(s)==n}return NA=r,NA}var jA,qU;function PDe(){if(qU)return jA;qU=1;var t=jDe(),e=GR(),n=ODe(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=a.test(u);return f||i.test(u)?o(u.slice(2),f?2:8):s.test(u)?r:+u}return jA=l,jA}var DA,GU;function Mne(){if(GU)return DA;GU=1;var t=GR(),e=ADe(),n=PDe(),r="Expected a function",s=Math.max,a=Math.min;function i(o,l,u){var d,f,m,g,x,b,C=0,S=!1,w=!1,E=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(u)&&(S=!!u.leading,w="maxWait"in u,m=w?s(n(u.maxWait)||0,l):m,E="trailing"in u?!!u.trailing:E);function T(O){var H=d,P=f;return d=f=void 0,C=O,g=o.apply(P,H),g}function _(O){return C=O,x=setTimeout(D,l),S?T(O):g}function A(O){var H=O-b,P=O-C,I=l-H;return w?a(I,m-P):I}function j(O){var H=O-b,P=O-C;return b===void 0||H>=l||H<0||w&&P>=m}function D(){var O=e();if(j(O))return z(O);x=setTimeout(D,A(O))}function z(O){return x=void 0,E&&d?T(O):(d=f=void 0,g)}function F(){x!==void 0&&clearTimeout(x),C=0,d=b=f=x=void 0}function R(){return x===void 0?g:z(e())}function L(){var O=e(),H=j(O);if(d=arguments,f=this,b=O,H){if(x===void 0)return _(b);if(w)return clearTimeout(x),x=setTimeout(D,l),T(b)}return x===void 0&&(x=setTimeout(D,l)),g}return L.cancel=F,L.flush=R,L}return DA=i,DA}var FDe=Mne();const BDe=Pa(FDe);var RA,WU;function LDe(){if(WU)return RA;WU=1;var t=Mne(),e=GR(),n="Expected a function";function r(s,a,i){var o=!0,l=!0;if(typeof s!="function")throw new TypeError(n);return e(i)&&(o="leading"in i?!!i.leading:o,l="trailing"in i?!!i.trailing:l),t(s,a,{leading:o,maxWait:a,trailing:l})}return RA=r,RA}var zDe=LDe();const $De=Pa(zDe),KU=t=>typeof t=="object"&&t!=null&&t.nodeType===1,YU=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",vC=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return YU(n.overflowY,e)||YU(n.overflowX,e)||(r=>{const s=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!s&&(s.clientHeight<r.scrollHeight||s.clientWidth<r.scrollWidth)})(t)}return!1},yC=(t,e,n,r,s,a,i,o)=>a<t&&i>e||a>t&&i<e?0:a<=t&&o<=n||i>=e&&o>=n?a-t-r:i>e&&o<n||a<t&&o>n?i-e+s:0,UDe=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},XU=(t,e)=>{var n,r,s,a;if(typeof document>"u")return[];const{scrollMode:i,block:o,inline:l,boundary:u,skipOverflowHiddenElements:d}=e,f=typeof u=="function"?u:I=>I!==u;if(!KU(t))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,g=[];let x=t;for(;KU(x)&&f(x);){if(x=UDe(x),x===m){g.push(x);break}x!=null&&x===document.body&&vC(x)&&!vC(document.documentElement)||x!=null&&vC(x,d)&&g.push(x)}const b=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,C=(a=(s=window.visualViewport)==null?void 0:s.height)!=null?a:innerHeight,{scrollX:S,scrollY:w}=window,{height:E,width:T,top:_,right:A,bottom:j,left:D}=t.getBoundingClientRect(),{top:z,right:F,bottom:R,left:L}=(I=>{const U=window.getComputedStyle(I);return{top:parseFloat(U.scrollMarginTop)||0,right:parseFloat(U.scrollMarginRight)||0,bottom:parseFloat(U.scrollMarginBottom)||0,left:parseFloat(U.scrollMarginLeft)||0}})(t);let O=o==="start"||o==="nearest"?_-z:o==="end"?j+R:_+E/2-z+R,H=l==="center"?D+T/2-L+F:l==="end"?A+F:D-L;const P=[];for(let I=0;I<g.length;I++){const U=g[I],{height:W,width:Y,top:B,right:Z,bottom:le,left:G}=U.getBoundingClientRect();if(i==="if-needed"&&_>=0&&D>=0&&j<=C&&A<=b&&(U===m&&!vC(U)||_>=B&&j<=le&&D>=G&&A<=Z))return P;const K=getComputedStyle(U),te=parseInt(K.borderLeftWidth,10),ie=parseInt(K.borderTopWidth,10),de=parseInt(K.borderRightWidth,10),fe=parseInt(K.borderBottomWidth,10);let se=0,ce=0;const ue="offsetWidth"in U?U.offsetWidth-U.clientWidth-te-de:0,oe="offsetHeight"in U?U.offsetHeight-U.clientHeight-ie-fe:0,Ne="offsetWidth"in U?U.offsetWidth===0?0:Y/U.offsetWidth:0,ve="offsetHeight"in U?U.offsetHeight===0?0:W/U.offsetHeight:0;if(m===U)se=o==="start"?O:o==="end"?O-C:o==="nearest"?yC(w,w+C,C,ie,fe,w+O,w+O+E,E):O-C/2,ce=l==="start"?H:l==="center"?H-b/2:l==="end"?H-b:yC(S,S+b,b,te,de,S+H,S+H+T,T),se=Math.max(0,se+w),ce=Math.max(0,ce+S);else{se=o==="start"?O-B-ie:o==="end"?O-le+fe+oe:o==="nearest"?yC(B,le,W,ie,fe+oe,O,O+E,E):O-(B+W/2)+oe/2,ce=l==="start"?H-G-te:l==="center"?H-(G+Y/2)+ue/2:l==="end"?H-Z+de+ue:yC(G,Z,Y,te,de+ue,H,H+T,T);const{scrollLeft:He,scrollTop:nt}=U;se=ve===0?0:Math.max(0,Math.min(nt+se/ve,U.scrollHeight-W/ve+oe)),ce=Ne===0?0:Math.max(0,Math.min(He+ce/Ne,U.scrollWidth-Y/Ne+ue)),O+=nt-se,H+=He-ce}P.push({el:U,top:se,left:ce})}return P},HDe=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function VDe(t,e){if(!t.isConnected||!(s=>{let a=s;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(t))return;const n=(s=>{const a=window.getComputedStyle(s);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(t);if((s=>typeof s=="object"&&typeof s.behavior=="function")(e))return e.behavior(XU(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:s,top:a,left:i}of XU(t,HDe(e))){const o=a-n.top+n.bottom,l=i-n.left+n.right;s.scroll({top:o,left:l,behavior:r})}}var Ine=Symbol.for("immer-nothing"),JU=Symbol.for("immer-draftable"),Ho=Symbol.for("immer-state");function Kl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var D1=Object.getPrototypeOf;function Fg(t){return!!t&&!!t[Ho]}function s0(t){var e;return t?One(t)||Array.isArray(t)||!!t[JU]||!!((e=t.constructor)!=null&&e[JU])||lw(t)||Fk(t):!1}var qDe=Object.prototype.constructor.toString(),QU=new WeakMap;function One(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=QU.get(n);return r===void 0&&(r=Function.toString.call(n),QU.set(n,r)),r===qDe}function E4(t,e,n=!0){Pk(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function Pk(t){const e=t[Ho];return e?e.type_:Array.isArray(t)?1:lw(t)?2:Fk(t)?3:0}function cD(t,e){return Pk(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Pne(t,e,n){const r=Pk(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function GDe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function lw(t){return t instanceof Map}function Fk(t){return t instanceof Set}function Tm(t){return t.copy_||t.base_}function uD(t,e){if(lw(t))return new Map(t);if(Fk(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=One(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ho];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const i=s[a],o=r[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(D1(t),r)}else{const r=D1(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function WR(t,e=!1){return Bk(t)||Fg(t)||!s0(t)||(Pk(t)>1&&Object.defineProperties(t,{set:xC,add:xC,clear:xC,delete:xC}),Object.freeze(t),e&&Object.values(t).forEach(n=>WR(n,!0))),t}function WDe(){Kl(2)}var xC={value:WDe};function Bk(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var KDe={};function a0(t){const e=KDe[t];return e||Kl(0,t),e}var R1;function Fne(){return R1}function YDe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ZU(t,e){e&&(a0("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dD(t){hD(t),t.drafts_.forEach(XDe),t.drafts_=null}function hD(t){t===R1&&(R1=t.parent_)}function eH(t){return R1=YDe(R1,t)}function XDe(t){const e=t[Ho];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tH(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ho].modified_&&(dD(e),Kl(4)),s0(t)&&(t=_4(e,t),e.parent_||T4(e,t)),e.patches_&&a0("Patches").generateReplacementPatches_(n[Ho].base_,t,e.patches_,e.inversePatches_)):t=_4(e,n,[]),dD(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Ine?t:void 0}function _4(t,e,n){if(Bk(e))return e;const r=t.immer_.shouldUseStrictIteration(),s=e[Ho];if(!s)return E4(e,(a,i)=>nH(t,s,e,a,i,n),r),e;if(s.scope_!==t)return e;if(!s.modified_)return T4(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let i=a,o=!1;s.type_===3&&(i=new Set(a),a.clear(),o=!0),E4(i,(l,u)=>nH(t,s,a,l,u,n,o),r),T4(t,a,!1),n&&t.patches_&&a0("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function nH(t,e,n,r,s,a,i){if(s==null||typeof s!="object"&&!i)return;const o=Bk(s);if(!(o&&!i)){if(Fg(s)){const l=a&&e&&e.type_!==3&&!cD(e.assigned_,r)?a.concat(r):void 0,u=_4(t,s,l);if(Pne(n,r,u),Fg(u))t.canAutoFreeze_=!1;else return}else i&&n.add(s);if(s0(s)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===s&&o)return;_4(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(lw(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&T4(t,s)}}}function T4(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&WR(e,n)}function JDe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Fne(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,a=KR;n&&(s=[r],a=M1);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return r.draft_=o,r.revoke_=i,o}var KR={get(t,e){if(e===Ho)return t;const n=Tm(t);if(!cD(n,e))return QDe(t,n,e);const r=n[e];return t.finalized_||!s0(r)?r:r===MA(t.base_,e)?(IA(t),t.copy_[e]=mD(r,t)):r},has(t,e){return e in Tm(t)},ownKeys(t){return Reflect.ownKeys(Tm(t))},set(t,e,n){const r=Bne(Tm(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=MA(Tm(t),e),a=s==null?void 0:s[Ho];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(GDe(n,s)&&(n!==void 0||cD(t.base_,e)))return!0;IA(t),fD(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return MA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,IA(t),fD(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Tm(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Kl(11)},getPrototypeOf(t){return D1(t.base_)},setPrototypeOf(){Kl(12)}},M1={};E4(KR,(t,e)=>{M1[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});M1.deleteProperty=function(t,e){return M1.set.call(this,t,e,void 0)};M1.set=function(t,e,n){return KR.set.call(this,t[0],e,n,t[0])};function MA(t,e){const n=t[Ho];return(n?Tm(n):t)[e]}function QDe(t,e,n){var s;const r=Bne(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function Bne(t,e){if(!(e in t))return;let n=D1(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=D1(n)}}function fD(t){t.modified_||(t.modified_=!0,t.parent_&&fD(t.parent_))}function IA(t){t.copy_||(t.copy_=uD(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ZDe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const i=this;return function(l=a,...u){return i.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&Kl(6),r!==void 0&&typeof r!="function"&&Kl(7);let s;if(s0(e)){const a=eH(this),i=mD(e,void 0);let o=!0;try{s=n(i),o=!1}finally{o?dD(a):hD(a)}return ZU(a,r),tH(s,a)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===Ine&&(s=void 0),this.autoFreeze_&&WR(s,!0),r){const a=[],i=[];a0("Patches").generateReplacementPatches_(e,s,a,i),r(a,i)}return s}else Kl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(i,...o)=>this.produceWithPatches(i,l=>e(l,...o));let r,s;return[this.produce(e,n,(i,o)=>{r=i,s=o}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){s0(t)||Kl(8),Fg(t)&&(t=e7e(t));const e=eH(this),n=mD(t,void 0);return n[Ho].isManual_=!0,hD(e),n}finishDraft(t,e){const n=t&&t[Ho];(!n||!n.isManual_)&&Kl(9);const{scope_:r}=n;return ZU(r,e),tH(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=a0("Patches").applyPatches_;return Fg(t)?r(t,e):this.produce(t,s=>r(s,e))}};function mD(t,e){const n=lw(t)?a0("MapSet").proxyMap_(t,e):Fk(t)?a0("MapSet").proxySet_(t,e):JDe(t,e);return(e?e.scope_:Fne()).drafts_.push(n),n}function e7e(t){return Fg(t)||Kl(10,t),Lne(t)}function Lne(t){if(!s0(t)||Bk(t))return t;const e=t[Ho];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=uD(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=uD(t,!0);return E4(n,(s,a)=>{Pne(n,s,Lne(a))},r),e&&(e.finalized_=!1),n}var t7e=new ZDe,n7e=t7e.produce,r7e={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var s=be.transform(n,e,{affinity:r});t.current=s,s==null&&t.unref()}}},s7e={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var s=Qn.transform(n,e,{affinity:r});t.current=s,s==null&&t.unref()}}},a7e={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var s=Be.transform(n,e,{affinity:r});t.current=s,s==null&&t.unref()}}},A4=new WeakMap,N4=new WeakMap,Fx=new WeakMap,zne=new WeakMap,rH=new WeakMap,sH=new WeakMap,aH=new WeakMap,be={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=be.levels(t,e);return n?r=r.slice(1):r=r.slice(0,-1),r},common(t,e){for(var n=[],r=0;r<t.length&&r<e.length;r++){var s=t[r],a=e[r];if(s!==a)break;n.push(s)}return n},compare(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return 0},endsAfter(t,e){var n=t.length-1,r=t.slice(0,n),s=e.slice(0,n),a=t[n],i=e[n];return be.equals(r,s)&&a>i},endsAt(t,e){var n=t.length,r=t.slice(0,n),s=e.slice(0,n);return be.equals(r,s)},endsBefore(t,e){var n=t.length-1,r=t.slice(0,n),s=e.slice(0,n),a=t[n],i=e[n];return be.equals(r,s)&&a<i},equals(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return be.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&be.compare(t,e)===0},isBefore(t,e){return be.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&be.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&be.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&be.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&be.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var n=t.slice(0,-1),r=e.slice(0,-1),s=t[t.length-1],a=e[e.length-1];return s!==a&&be.equals(n,r)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=[],s=0;s<=t.length;s++)r.push(t.slice(0,s));return n&&r.reverse(),r},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!be.isAncestor(e,t)&&!be.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var r=[...t],{affinity:s="forward"}=n;if(t.length===0)return r;switch(e.type){case"insert_node":{var{path:a}=e;(be.equals(a,r)||be.endsBefore(a,r)||be.isAncestor(a,r))&&(r[a.length-1]+=1);break}case"remove_node":{var{path:i}=e;if(be.equals(i,r)||be.isAncestor(i,r))return null;be.endsBefore(i,r)&&(r[i.length-1]-=1);break}case"merge_node":{var{path:o,position:l}=e;be.equals(o,r)||be.endsBefore(o,r)?r[o.length-1]-=1:be.isAncestor(o,r)&&(r[o.length-1]-=1,r[o.length]+=l);break}case"split_node":{var{path:u,position:d}=e;if(be.equals(u,r)){if(s==="forward")r[r.length-1]+=1;else if(s!=="backward")return null}else be.endsBefore(u,r)?r[u.length-1]+=1:be.isAncestor(u,r)&&t[u.length]>=d&&(r[u.length-1]+=1,r[u.length]-=d);break}case"move_node":{var{path:f,newPath:m}=e;if(be.equals(f,m))return r;if(be.isAncestor(f,r)||be.equals(f,r)){var g=m.slice();return be.endsBefore(f,m)&&f.length<m.length&&(g[f.length-1]-=1),g.concat(r.slice(f.length))}else be.isSibling(f,m)&&(be.isAncestor(m,r)||be.equals(m,r))?be.endsBefore(f,r)?r[f.length-1]-=1:r[f.length-1]+=1:be.endsBefore(m,r)||be.equals(m,r)||be.isAncestor(m,r)?(be.endsBefore(f,r)&&(r[f.length-1]-=1),r[m.length-1]+=1):be.endsBefore(f,r)&&(be.equals(m,r)&&(r[m.length-1]+=1),r[f.length-1]-=1);break}}return r}};function I1(t){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I1(t)}function i7e(t,e){if(I1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(I1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o7e(t){var e=i7e(t,"string");return I1(e)==="symbol"?e:String(e)}function Pi(t,e,n){return e=o7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var oH=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];return[...e.slice(0,n),...s,...e.slice(n)]},O1=function(e,n,r){for(var s=arguments.length,a=new Array(s>3?s-3:0),i=3;i<s;i++)a[i-3]=arguments[i];return[...e.slice(0,n),...a,...e.slice(n+r)]},lH=O1,YR=(t,e,n)=>{if(e.length===0)throw new Error("Cannot modify the editor");for(var r=pt.get(t,e),s=e.slice(),a=n(r);s.length>1;){var i=s.pop(),o=pt.get(t,s);a=Xr(Xr({},o),{},{children:O1(o.children,i,1,a)})}var l=s.pop();t.children=O1(t.children,l,1,a)},Dp=(t,e,n)=>{e.length===0?t.children=n(t.children):YR(t,e,r=>{if(mt.isText(r))throw new Error("Cannot get the element at path [".concat(e,"] because it refers to a leaf node: ").concat(ua.stringify(r)));return Xr(Xr({},r),{},{children:n(r.children)})})},cH=(t,e,n)=>YR(t,e,r=>{if(!mt.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(ua.stringify(r)));return n(r)}),l7e={transform(t,e){var n=!1;switch(e.type){case"insert_node":{var{path:r,node:s}=e;Dp(t,be.parent(r),ce=>{var ue=r[r.length-1];if(ue>ce.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));return oH(ce,ue,s)}),n=!0;break}case"insert_text":{var{path:a,offset:i,text:o}=e;if(o.length===0)break;cH(t,a,ce=>{var ue=ce.text.slice(0,i),oe=ce.text.slice(i);return Xr(Xr({},ce),{},{text:ue+o+oe})}),n=!0;break}case"merge_node":{var{path:l}=e,u=l[l.length-1],d=be.previous(l),f=d[d.length-1];Dp(t,be.parent(l),ce=>{var ue=ce[u],oe=ce[f],Ne;if(mt.isText(ue)&&mt.isText(oe))Ne=Xr(Xr({},oe),{},{text:oe.text+ue.text});else if(!mt.isText(ue)&&!mt.isText(oe))Ne=Xr(Xr({},oe),{},{children:oe.children.concat(ue.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(l,"] to nodes of different interfaces: ").concat(ua.stringify(ue)," ").concat(ua.stringify(oe)));return O1(ce,f,2,Ne)}),n=!0;break}case"move_node":{var{path:m,newPath:g}=e,x=m[m.length-1];if(be.isAncestor(m,g))throw new Error("Cannot move a path [".concat(m,"] to new path [").concat(g,"] because the destination is inside itself."));var b=pt.get(t,m);Dp(t,be.parent(m),ce=>lH(ce,x,1));var C=be.transform(m,e),S=C[C.length-1];Dp(t,be.parent(C),ce=>oH(ce,S,b)),n=!0;break}case"remove_node":{var{path:w}=e,E=w[w.length-1];if(Dp(t,be.parent(w),ce=>lH(ce,E,1)),t.selection){var T=Xr({},t.selection);for(var[_,A]of Be.points(T)){var j=Qn.transform(_,e);if(T!=null&&j!=null)T[A]=j;else{var D=void 0,z=void 0;for(var[F,R]of pt.texts(t))if(be.compare(R,w)===-1)D=[F,R];else{z=[F,R];break}var L=!1;D&&z&&(be.isSibling(D[1],w)?L=!1:be.equals(z[1],w)?L=!0:L=be.common(D[1],w).length<be.common(z[1],w).length),D&&!L?T[A]={path:D[1],offset:D[0].text.length}:z?T[A]={path:z[1],offset:0}:T=null}}(!T||!Be.equals(T,t.selection))&&(t.selection=T)}break}case"remove_text":{var{path:O,offset:H,text:P}=e;if(P.length===0)break;cH(t,O,ce=>{var ue=ce.text.slice(0,H),oe=ce.text.slice(H+P.length);return Xr(Xr({},ce),{},{text:ue+oe})}),n=!0;break}case"set_node":{var{path:I,properties:U,newProperties:W}=e;if(I.length===0)throw new Error("Cannot set properties on the root node!");YR(t,I,ce=>{var ue=Xr({},ce);for(var oe in W){if(oe==="children"||oe==="text")throw new Error('Cannot set the "'.concat(oe,'" property of nodes!'));var Ne=W[oe];Ne==null?delete ue[oe]:ue[oe]=Ne}for(var ve in U)W.hasOwnProperty(ve)||delete ue[ve];return ue});break}case"set_selection":{var{newProperties:Y}=e;if(Y==null){t.selection=null;break}if(t.selection==null){if(!Be.isRange(Y))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(ua.stringify(Y)," when there is no current selection."));t.selection=Xr({},Y);break}var B=Xr({},t.selection);for(var Z in Y){var le=Y[Z];if(le==null){if(Z==="anchor"||Z==="focus")throw new Error('Cannot remove the "'.concat(Z,'" selection property'));delete B[Z]}else B[Z]=le}t.selection=B;break}case"split_node":{var{path:G,position:K,properties:te}=e,ie=G[G.length-1];if(G.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(G,"] because the root node cannot be split."));Dp(t,be.parent(G),ce=>{var ue=ce[ie],oe,Ne;if(mt.isText(ue)){var ve=ue.text.slice(0,K),He=ue.text.slice(K);oe=Xr(Xr({},ue),{},{text:ve}),Ne=Xr(Xr({},te),{},{text:He})}else{var nt=ue.children.slice(0,K),Me=ue.children.slice(K);oe=Xr(Xr({},ue),{},{children:nt}),Ne=Xr(Xr({},te),{},{children:Me})}return O1(ce,ie,1,oe,Ne)}),n=!0;break}}if(n&&t.selection){var de=Xr({},t.selection);for(var[fe,se]of Be.points(de))de[se]=Qn.transform(fe,e);Be.equals(de,t.selection)||(t.selection=de)}}},c7e={insertNodes(t,e,n){t.insertNodes(e,n)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,n){t.setNodes(e,n)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,n){t.unsetNodes(e,n)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,n){t.wrapNodes(e,n)}},u7e={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,n){t.setPoint(e,n)},setSelection(t,e){t.setSelection(e)}},ii=t=>typeof t=="object"&&t!==null,$ne=(t,e)=>{for(var n in t){var r=t[n],s=e[n];if(Array.isArray(r)&&Array.isArray(s)){if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==s[a])return!1}else if(ii(r)&&ii(s)){if(!$ne(r,s))return!1}else if(r!==s)return!1}for(var i in e)if(t[i]===void 0&&e[i]!==void 0)return!1;return!0};function d7e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Bd(t,e){if(t==null)return{};var n=d7e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var h7e=["anchor","focus"];function uH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function f7e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Be={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,{anchor:r,focus:s}=t;return Be.isBackward(t)===n?[r,s]:[s,r]},end(t){var[,e]=Be.edges(t);return e},equals(t,e){return Qn.equals(t.anchor,e.anchor)&&Qn.equals(t.focus,e.focus)},surrounds(t,e){var n=Be.intersection(t,e);return n?Be.equals(n,e):!1},includes(t,e){if(Be.isRange(e)){if(Be.includes(t,e.anchor)||Be.includes(t,e.focus))return!0;var[n,r]=Be.edges(t),[s,a]=Be.edges(e);return Qn.isBefore(n,s)&&Qn.isAfter(r,a)}var[i,o]=Be.edges(t),l=!1,u=!1;return Qn.isPoint(e)?(l=Qn.compare(e,i)>=0,u=Qn.compare(e,o)<=0):(l=be.compare(e,i.path)>=0,u=be.compare(e,o.path)<=0),l&&u},intersection(t,e){var n=Bd(t,h7e),[r,s]=Be.edges(t),[a,i]=Be.edges(e),o=Qn.isBefore(r,a)?a:r,l=Qn.isBefore(s,i)?s:i;return Qn.isBefore(l,o)?null:f7e({anchor:o,focus:l},n)},isBackward(t){var{anchor:e,focus:n}=t;return Qn.isAfter(e,n)},isCollapsed(t){var{anchor:e,focus:n}=t;return Qn.equals(e,n)},isExpanded(t){return!Be.isCollapsed(t)},isForward(t){return!Be.isBackward(t)},isRange(t){return ii(t)&&Qn.isPoint(t.anchor)&&Qn.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=Be.edges(t);return e},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===null)return null;var{affinity:r="inward"}=n,s,a;if(r==="inward"){var i=Be.isCollapsed(t);Be.isForward(t)?(s="forward",a=i?s:"backward"):(s="backward",a=i?s:"forward")}else r==="outward"?Be.isForward(t)?(s="backward",a="forward"):(s="forward",a="backward"):(s=r,a=r);var o=Qn.transform(t.anchor,e,{affinity:s}),l=Qn.transform(t.focus,e,{affinity:a});return!o||!l?null:{anchor:o,focus:l}}},dH=function(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ii(e))return!1;var r=typeof e.apply=="function";if(r)return!1;var s=n?pt.isNodeList(e.children):Array.isArray(e.children);return s},jt={isAncestor(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ii(t)&&pt.isNodeList(t.children,{deep:e})},isElement:dH,isElementList(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)&&t.every(n=>jt.isElement(n,{deep:e}))},isElementProps(t){return t.children!==void 0},isElementType:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return dH(e)&&e[r]===n},matches(t,e){for(var n in e)if(n!=="children"&&t[n]!==e[n])return!1;return!0}},m7e=["children"],p7e=["text"],pt={ancestor(t,e){var n=pt.get(t,e);if(mt.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(ua.stringify(n)));return n},ancestors(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){for(var r of be.ancestors(e,n)){var s=pt.ancestor(t,r),a=[s,r];yield a}})()},child(t,e){if(mt.isText(t))throw new Error("Cannot get the child of a text node: ".concat(ua.stringify(t)));var n=t.children[e];if(n==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(ua.stringify(t)));return n},children(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){for(var{reverse:r=!1}=n,s=pt.ancestor(t,e),{children:a}=s,i=r?a.length-1:0;r?i>=0:i<a.length;){var o=pt.child(s,i),l=e.concat(i);yield[o,l],i=r?i-1:i+1}})()},common(t,e,n){var r=be.common(e,n),s=pt.get(t,r);return[s,r]},descendant(t,e){var n=pt.get(t,e);if(Q.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(ua.stringify(n)));return n},descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var[n,r]of pt.nodes(t,e))r.length!==0&&(yield[n,r])})()},elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var[n,r]of pt.nodes(t,e))jt.isElement(n)&&(yield[n,r])})()},extractProps(t){if(jt.isAncestor(t)){var e=Bd(t,m7e);return e}else{var e=Bd(t,p7e);return e}},first(t,e){for(var n=e.slice(),r=pt.get(t,n);r&&!(mt.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(t,e){var n=n7e({children:t.children},r=>{var[s,a]=Be.edges(e),i=pt.nodes(r,{reverse:!0,pass:m=>{var[,g]=m;return!Be.includes(e,g)}});for(var[,o]of i){if(!Be.includes(e,o)){var l=pt.parent(r,o),u=o[o.length-1];l.children.splice(u,1)}if(be.equals(o,a.path)){var d=pt.leaf(r,o);d.text=d.text.slice(0,a.offset)}if(be.equals(o,s.path)){var f=pt.leaf(r,o);f.text=f.text.slice(s.offset)}}Q.isEditor(r)&&(r.selection=null)});return n.children},get(t,e){var n=pt.getIf(t,e);if(n===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(ua.stringify(t)));return n},getIf(t,e){for(var n=t,r=0;r<e.length;r++){var s=e[r];if(mt.isText(n)||!n.children[s])return;n=n.children[s]}return n},has(t,e){for(var n=t,r=0;r<e.length;r++){var s=e[r];if(mt.isText(n)||!n.children[s])return!1;n=n.children[s]}return!0},isNode(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mt.isText(t)||jt.isElement(t,{deep:e})||Q.isEditor(t,{deep:e})},isNodeList(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)&&t.every(n=>pt.isNode(n,{deep:e}))},last(t,e){for(var n=e.slice(),r=pt.get(t,n);r&&!(mt.isText(r)||r.children.length===0);){var s=r.children.length-1;r=r.children[s],n.push(s)}return[r,n]},leaf(t,e){var n=pt.get(t,e);if(!mt.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(ua.stringify(n)));return n},levels(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){for(var r of be.levels(e,n)){var s=pt.get(t,r);yield[s,r]}})()},matches(t,e){return jt.isElement(t)&&jt.isElementProps(e)&&jt.matches(t,e)||mt.isText(t)&&mt.isTextProps(e)&&mt.matches(t,e)},nodes(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var{pass:n,reverse:r=!1}=e,{from:s=[],to:a}=e,i=new Set,o=[],l=t;!(a&&(r?be.isBefore(o,a):be.isAfter(o,a)));){if(i.has(l)||(yield[l,o]),!i.has(l)&&!mt.isText(l)&&l.children.length!==0&&(n==null||n([l,o])===!1)){i.add(l);var u=r?l.children.length-1:0;be.isAncestor(o,s)&&(u=s[o.length]),o=o.concat(u),l=pt.get(t,o);continue}if(o.length===0)break;if(!r){var d=be.next(o);if(pt.has(t,d)){o=d,l=pt.get(t,o);continue}}if(r&&o[o.length-1]!==0){var f=be.previous(o);o=f,l=pt.get(t,o);continue}o=be.parent(o),l=pt.get(t,o),i.add(l)}})()},parent(t,e){var n=be.parent(e),r=pt.get(t,n);if(mt.isText(r))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return r},string(t){return mt.isText(t)?t.text:t.children.map(pt.string).join("")},texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var[n,r]of pt.nodes(t,e))mt.isText(n)&&(yield[n,r])})()}};function hH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ns(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var xx={isNodeOperation(t){return xx.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!ii(t))return!1;switch(t.type){case"insert_node":return be.isPath(t.path)&&pt.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&be.isPath(t.path);case"merge_node":return typeof t.position=="number"&&be.isPath(t.path)&&ii(t.properties);case"move_node":return be.isPath(t.path)&&be.isPath(t.newPath);case"remove_node":return be.isPath(t.path)&&pt.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&be.isPath(t.path);case"set_node":return be.isPath(t.path)&&ii(t.properties)&&ii(t.newProperties);case"set_selection":return t.properties===null&&Be.isRange(t.newProperties)||t.newProperties===null&&Be.isRange(t.properties)||ii(t.properties)&&ii(t.newProperties);case"split_node":return be.isPath(t.path)&&typeof t.position=="number"&&ii(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>xx.isOperation(e))},isSelectionOperation(t){return xx.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return xx.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return ns(ns({},t),{},{type:"remove_node"});case"insert_text":return ns(ns({},t),{},{type:"remove_text"});case"merge_node":return ns(ns({},t),{},{type:"split_node",path:be.previous(t.path)});case"move_node":{var{newPath:e,path:n}=t;if(be.equals(e,n))return t;if(be.isSibling(n,e))return ns(ns({},t),{},{path:e,newPath:n});var r=be.transform(n,t),s=be.transform(be.next(n),t);return ns(ns({},t),{},{path:r,newPath:s})}case"remove_node":return ns(ns({},t),{},{type:"insert_node"});case"remove_text":return ns(ns({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:i}=t;return ns(ns({},t),{},{properties:i,newProperties:a})}case"set_selection":{var{properties:o,newProperties:l}=t;return o==null?ns(ns({},t),{},{properties:l,newProperties:null}):l==null?ns(ns({},t),{},{properties:null,newProperties:o}):ns(ns({},t),{},{properties:l,newProperties:o})}case"split_node":return ns(ns({},t),{},{type:"merge_node",path:be.next(t.path)})}}},g7e=function(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ii(e))return!1;var r=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||ii(e.marks))&&(e.selection===null||Be.isRange(e.selection))&&(!n||pt.isNodeList(e.children))&&xx.isOperationList(e.operations);return r},Q={above(t,e){return t.above(e)},addMark(t,e,n){t.addMark(e,n)},after(t,e,n){return t.after(e,n)},before(t,e,n){return t.before(e,n)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteBackward(n)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteForward(n)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,n){t.insertFragment(e,n)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,n){return t.isEdge(e,n)},isEditor(t){return g7e(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,n){return t.isEnd(e,n)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,n){return t.isStart(e,n)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,n){return t.leaf(e,n)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,n){return t.node(e,n)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,n){return t.parent(e,n)},path(t,e,n){return t.path(e,n)},pathRef(t,e,n){return t.pathRef(e,n)},pathRefs(t){return t.pathRefs()},point(t,e,n){return t.point(e,n)},pointRef(t,e,n){return t.pointRef(e,n)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,n){return t.range(e,n)},rangeRef(t,e,n){return t.rangeRef(e,n)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,n){return t.string(e,n)},unhangRange(t,e,n){return t.unhangRange(e,n)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(t,e,n)=>t.shouldMergeNodesRemovePrevNode(e,n)},v7e={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(be.isPath)}};function fH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Qn={compare(t,e){var n=be.compare(t.path,e.path);return n===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:n},isAfter(t,e){return Qn.compare(t,e)===1},isBefore(t,e){return Qn.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&be.equals(t.path,e.path)},isPoint(t){return ii(t)&&typeof t.offset=="number"&&be.isPath(t.path)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===null)return null;var{affinity:r="forward"}=n,{path:s,offset:a}=t;switch(e.type){case"insert_node":case"move_node":{s=be.transform(s,e,n);break}case"insert_text":{be.equals(e.path,s)&&(e.offset<a||e.offset===a&&r==="forward")&&(a+=e.text.length);break}case"merge_node":{be.equals(e.path,s)&&(a+=e.position),s=be.transform(s,e,n);break}case"remove_text":{be.equals(e.path,s)&&e.offset<=a&&(a-=Math.min(a-e.offset,e.text.length));break}case"remove_node":{if(be.equals(e.path,s)||be.isAncestor(e.path,s))return null;s=be.transform(s,e,n);break}case"split_node":{if(be.equals(e.path,s)){if(e.position===a&&r==null)return null;(e.position<a||e.position===a&&r==="forward")&&(a-=e.position,s=be.transform(s,e,mH(mH({},n),{},{affinity:"forward"})))}else s=be.transform(s,e,n);break}default:return t}return{path:s,offset:a}}},pH=void 0,ua={setScrubber(t){pH=t},stringify(t){return JSON.stringify(t,pH)}},y7e=["text"],x7e=["anchor","focus","merge"];function gH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mt={equals(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function s(a){var i=Bd(a,y7e);return i}return $ne(r?s(t):t,r?s(e):e)},isText(t){return ii(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>mt.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var n in e)if(n!=="text"&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0},decorations(t,e){var n=[{leaf:nd({},t)}];for(var r of e){var{anchor:s,focus:a,merge:i}=r,o=Bd(r,x7e),[l,u]=Be.edges(r),d=[],f=0,m=l.offset,g=u.offset,x=i??Object.assign;for(var{leaf:b}of n){var{length:C}=b.text,S=f;if(f+=C,m<=S&&f<=g){x(b,o),d.push({leaf:b});continue}if(m!==g&&(m===f||g===S)||m>f||g<S||g===S&&S!==0){d.push({leaf:b});continue}var w=b,E=void 0,T=void 0;if(g<f){var _=g-S;T={leaf:nd(nd({},w),{},{text:w.text.slice(_)})},w=nd(nd({},w),{},{text:w.text.slice(0,_)})}if(m>S){var A=m-S;E={leaf:nd(nd({},w),{},{text:w.text.slice(0,A)})},w=nd(nd({},w),{},{text:w.text.slice(A)})}x(w,o),E&&d.push(E),d.push({leaf:w}),T&&d.push(T)}n=d}if(n.length>1){var j=0;for(var[D,z]of n.entries()){var F=j,R=F+z.leaf.text.length,L={start:F,end:R};D===0&&(L.isFirst=!0),D===n.length-1&&(L.isLast=!0),z.position=L,j=R}}return n}},XR=t=>t.selection?t.selection:t.children.length>0?Q.end(t,[]):[0],Dv=(t,e)=>{var[n]=Q.node(t,e);return r=>r===n},JR=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,s=n?E7e(e):e,a=dn.None,i=dn.None,o=0,l=null,u=null;for(var d of s){var f=d.codePointAt(0);if(!f)break;var m=F7e(d,f);if([a,i]=r?[i,m]:[m,a],sg(a,dn.ZWJ)&&sg(i,dn.ExtPict)&&(r?l=vH(e.substring(0,o)):l=vH(e.substring(0,e.length-o)),!l)||sg(a,dn.RI)&&sg(i,dn.RI)&&(u!==null?u=!u:r?u=!0:u=U7e(e.substring(0,e.length-o)),!u)||a!==dn.None&&i!==dn.None&&L7e(a,i))break;o+=d.length}return o||1},b7e=/\s/,w7e=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,C7e=/['\u2018\u2019]/,S7e=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,s=!1;e.length>0;){var a=JR(e,n),[i,o]=QR(e,a,n);if(k7e(i,o,n))s=!0,r+=a;else if(!s)r+=a;else break;e=o}return r},QR=(t,e,n)=>{if(n){var r=t.length-e;return[t.slice(r,t.length),t.slice(0,r)]}return[t.slice(0,e),t.slice(e)]},k7e=function t(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(b7e.test(e))return!1;if(C7e.test(e)){var s=JR(n,r),[a,i]=QR(n,s,r);if(t(a,i,r))return!0}return!w7e.test(e)},E7e=function*(e){for(var n=e.length-1,r=0;r<e.length;r++){var s=e.charAt(n-r);if(T7e(s.charCodeAt(0))){var a=e.charAt(n-r-1);if(_7e(a.charCodeAt(0))){yield a+s,r++;continue}}yield s}},_7e=t=>t>=55296&&t<=56319,T7e=t=>t>=56320&&t<=57343,dn;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(dn||(dn={}));var A7e=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,N7e=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,j7e=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,D7e=/^[\u1100-\u115F\uA960-\uA97C]$/,R7e=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,M7e=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,I7e=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,O7e=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,P7e=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,F7e=(t,e)=>{var n=dn.Any;return t.search(A7e)!==-1&&(n|=dn.Extend),e===8205&&(n|=dn.ZWJ),e>=127462&&e<=127487&&(n|=dn.RI),t.search(N7e)!==-1&&(n|=dn.Prepend),t.search(j7e)!==-1&&(n|=dn.SpacingMark),t.search(D7e)!==-1&&(n|=dn.L),t.search(R7e)!==-1&&(n|=dn.V),t.search(M7e)!==-1&&(n|=dn.T),t.search(I7e)!==-1&&(n|=dn.LV),t.search(O7e)!==-1&&(n|=dn.LVT),t.search(P7e)!==-1&&(n|=dn.ExtPict),n};function sg(t,e){return(t&e)!==0}var B7e=[[dn.L,dn.L|dn.V|dn.LV|dn.LVT],[dn.LV|dn.V,dn.V|dn.T],[dn.LVT|dn.T,dn.T],[dn.Any,dn.Extend|dn.ZWJ],[dn.Any,dn.SpacingMark],[dn.Prepend,dn.Any],[dn.ZWJ,dn.ExtPict],[dn.RI,dn.RI]];function L7e(t,e){return B7e.findIndex(n=>sg(t,n[0])&&sg(e,n[1]))===-1}var z7e=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,vH=t=>t.search(z7e)!==-1,$7e=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,U7e=t=>{var e=t.match($7e);if(e===null)return!1;var n=e[0].length/2;return n%2===1},H7e={delete(t,e){t.delete(e)},insertFragment(t,e,n){t.insertFragment(e,n)},insertText(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q.withoutNormalizing(t,()=>{var{voids:r=!1}=n,{at:s=XR(t)}=n;if(be.isPath(s)&&(s=Q.range(t,s)),Be.isRange(s))if(Be.isCollapsed(s))s=s.anchor;else{var a=Be.end(s);if(!r&&Q.void(t,{at:a}))return;var i=Be.start(s),o=Q.pointRef(t,i),l=Q.pointRef(t,a);rt.delete(t,{at:s,voids:r});var u=o.unref(),d=l.unref();s=u||d,rt.setSelection(t,{anchor:s,focus:s})}if(!(!r&&Q.void(t,{at:s})||Q.elementReadOnly(t,{at:s}))){var{path:f,offset:m}=s;e.length>0&&t.apply({type:"insert_text",path:f,offset:m,text:e})}})}};function yH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var rt=bC(bC(bC(bC({},l7e),c7e),u7e),H7e),kS=new WeakMap,V7e=t=>kS.get(t)||!1,q7e=(t,e,n)=>{var r=kS.get(t)||!1;kS.set(t,!0);try{e(),n()}finally{kS.set(t,r)}};function Une(t,e,n){var r=A4.get(t)||[],s=N4.get(t)||new Set,a,i,o=f=>{if(f){var m=f.join(",");i.has(m)||(i.add(m),a.push(f))}};if(n){a=[],i=new Set;for(var l of r){var u=n(l);o(u)}}else a=r,i=s;for(var d of e)o(d);A4.set(t,a),N4.set(t,i)}var G7e=(t,e)=>{for(var n of Q.pathRefs(t))r7e.transform(n,e);for(var r of Q.pointRefs(t))s7e.transform(r,e);for(var s of Q.rangeRefs(t))a7e.transform(s,e);if(!V7e(t)){var a=be.operationCanTransformPath(e)?i=>be.transform(i,e):void 0;Une(t,t.getDirtyPaths(e),a)}rt.transform(t,e),t.operations.push(e),Q.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),Fx.get(t)||(Fx.set(t,!0),Promise.resolve().then(()=>{Fx.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},W7e=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=e;return be.levels(n)}case"insert_node":{var{node:r,path:s}=e,a=be.levels(s),i=mt.isText(r)?[]:Array.from(pt.nodes(r),F=>{var[,R]=F;return s.concat(R)});return[...a,...i]}case"merge_node":{var{path:o}=e,l=be.ancestors(o),u=be.previous(o);return[...l,u]}case"move_node":{var{path:d,newPath:f}=e;if(be.equals(d,f))return[];var m=[],g=[];for(var x of be.ancestors(d)){var b=be.transform(x,e);m.push(b)}for(var C of be.ancestors(f)){var S=be.transform(C,e);g.push(S)}var w=g[g.length-1],E=f[f.length-1],T=w.concat(E);return[...m,...g,T]}case"remove_node":{var{path:_}=e,A=be.ancestors(_);return[...A]}case"split_node":{var{path:j}=e,D=be.levels(j),z=be.next(j);return[...D,z]}default:return[]}},K7e=t=>{var{selection:e}=t;return e?pt.fragment(t,e):[]},Y7e=(t,e,n)=>{var[r,s]=e;if(!mt.isText(r)){if(jt.isElement(r)&&r.children.length===0){var a={text:""};rt.insertNodes(t,a,{at:s.concat(0),voids:!0});return}for(var i=Q.isEditor(r)?!1:jt.isElement(r)&&(t.isInline(r)||r.children.length===0||mt.isText(r.children[0])||t.isInline(r.children[0])),o=0,l=0;l<r.children.length;l++,o++){var u=pt.get(t,s);if(!mt.isText(u)){var d=u.children[o],f=u.children[o-1],m=l===r.children.length-1,g=mt.isText(d)||jt.isElement(d)&&t.isInline(d);if(g!==i)g?n!=null&&n.fallbackElement?rt.wrapNodes(t,n.fallbackElement(),{at:s.concat(o),voids:!0}):rt.removeNodes(t,{at:s.concat(o),voids:!0}):rt.unwrapNodes(t,{at:s.concat(o),voids:!0}),o--;else if(jt.isElement(d)){if(t.isInline(d)){if(f==null||!mt.isText(f)){var x={text:""};rt.insertNodes(t,x,{at:s.concat(o),voids:!0}),o++}else if(m){var b={text:""};rt.insertNodes(t,b,{at:s.concat(o+1),voids:!0}),o++}}}else{if(!mt.isText(d)&&!("children"in d)){var C=d;C.children=[]}f!=null&&mt.isText(f)&&(mt.equals(d,f,{loose:!0})?(rt.mergeNodes(t,{at:s.concat(o),voids:!0}),o--):f.text===""?(rt.removeNodes(t,{at:s.concat(o-1),voids:!0}),o--):d.text===""&&(rt.removeNodes(t,{at:s.concat(o),voids:!0}),o--))}}}}},X7e=(t,e)=>{var{iteration:n,initialDirtyPathsLength:r}=e,s=r*42;if(n>s)throw new Error("Could not completely normalize the editor after ".concat(s," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},J7e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:s="lowest",at:a=e.selection,match:i}=n;if(a){var o=Q.path(e,a);if(!Be.isRange(a)||be.equals(a.focus.path,a.anchor.path)){if(o.length===0)return;o=be.parent(o)}var l=s==="lowest",[u]=Q.levels(e,{at:o,voids:r,match:i,reverse:l});return u}};function xH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Q7e=(t,e,n)=>{var{selection:r}=t;if(r){var s=(f,m)=>{if(!mt.isText(f))return!1;var[g,x]=Q.parent(t,m);return!t.isVoid(g)||t.markableVoid(g)},a=Be.isExpanded(r),i=!1;if(!a){var[o,l]=Q.node(t,r);if(o&&s(o,l)){var[u]=Q.parent(t,l);i=u&&t.markableVoid(u)}}if(a||i)rt.setNodes(t,{[e]:n},{match:s,split:!0,voids:!0});else{var d=bH(bH({},Q.marks(t)||{}),{},{[e]:n});t.marks=d,Fx.get(t)||t.onChange()}}};function wH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function CH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Z7e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Q.point(e,n,{edge:"end"}),a=Q.end(e,[]),i={anchor:s,focus:a},{distance:o=1}=r,l=0,u;for(var d of Q.positions(e,CH(CH({},r),{},{at:i}))){if(l>o)break;l!==0&&(u=d),l++}return u};function SH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var e8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Q.start(e,[]),a=Q.point(e,n,{edge:"start"}),i={anchor:s,focus:a},{distance:o=1}=r,l=0,u;for(var d of Q.positions(e,kH(kH({},r),{},{at:i,reverse:!0}))){if(l>o)break;l!==0&&(u=d),l++}return u},t8e=(t,e)=>{var{selection:n}=t;n&&Be.isCollapsed(n)&&rt.delete(t,{unit:e,reverse:!0})},n8e=(t,e)=>{var{selection:n}=t;n&&Be.isCollapsed(n)&&rt.delete(t,{unit:e})},r8e=function(e){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e;r&&Be.isExpanded(r)&&rt.delete(e,{reverse:n==="backward"})},s8e=(t,e)=>[Q.start(t,e),Q.end(t,e)];function EH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _H(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var a8e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Q.above(e,_H(_H({},n),{},{match:r=>jt.isElement(r)&&Q.isElementReadOnly(e,r)}))},i8e=(t,e)=>Q.point(t,e,{edge:"end"}),o8e=(t,e)=>{var n=Q.path(t,e,{edge:"start"});return Q.node(t,n)},l8e=(t,e)=>{var n=Q.range(t,e);return pt.fragment(t,n)};function TH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function AH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var c8e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Q.above(e,AH(AH({},n),{},{match:r=>jt.isElement(r)&&Q.isVoid(e,r)}))},u8e=(t,e)=>e.children.some(n=>jt.isElement(n)&&Q.isBlock(t,n)),d8e=(t,e)=>e.children.some(n=>mt.isText(n)||Q.isInline(t,n)),h8e=(t,e)=>pt.has(t,e),f8e=(t,e)=>e.children.every(n=>mt.isText(n)),m8e=t=>{rt.splitNodes(t,{always:!0})},p8e=(t,e,n)=>{rt.insertNodes(t,e,n)},g8e=t=>{rt.splitNodes(t,{always:!0})};function NH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v8e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var y8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:s,marks:a}=e;if(s){if(a){var i=v8e({text:n},a);rt.insertNodes(e,i,{at:r.at,voids:r.voids})}else rt.insertText(e,n,r);e.marks=null}},x8e=(t,e)=>!t.isInline(e),b8e=(t,e,n)=>Q.isStart(t,e,n)||Q.isEnd(t,e,n),w8e=(t,e)=>{var{children:n}=e,[r]=n;return n.length===0||n.length===1&&mt.isText(r)&&r.text===""&&!t.isVoid(e)},C8e=(t,e,n)=>{var r=Q.end(t,n);return Qn.equals(e,r)},S8e=t=>{var e=zne.get(t);return e===void 0?!0:e},k8e=(t,e,n)=>{if(e.offset!==0)return!1;var r=Q.start(t,n);return Qn.equals(e,r)},E8e=(t,e)=>{var n=Q.path(t,e,{edge:"end"});return Q.node(t,n)},_8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Q.path(e,n,r),a=pt.leaf(e,s);return[a,s]};function T8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){var{at:n=t.selection,reverse:r=!1,voids:s=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!n){var i=[],o=Q.path(t,n);for(var[l,u]of pt.levels(t,o))if(a(l,u)&&(i.push([l,u]),!s&&jt.isElement(l)&&Q.isVoid(t,l)))break;r&&i.reverse(),yield*i}})()}var A8e=["text"],N8e=["text"],j8e=function(e){var{marks:n,selection:r}=e;if(!r)return null;var{anchor:s,focus:a}=r;if(n)return n;if(Be.isExpanded(r)){var i=Be.isBackward(r);i&&([a,s]=[s,a]);var o=Q.isEnd(e,s,s.path);if(o){var l=Q.after(e,s);l&&(s=l)}var[u]=Q.nodes(e,{match:mt.isText,at:{anchor:s,focus:a}});if(u){var[d]=u,f=Bd(d,A8e);return f}else return{}}var{path:m}=s,[g]=Q.leaf(e,m);if(s.offset===0){var x=Q.previous(e,{at:m,match:mt.isText}),b=Q.above(e,{match:_=>jt.isElement(_)&&Q.isVoid(e,_)&&e.markableVoid(_)});if(!b){var C=Q.above(e,{match:_=>jt.isElement(_)&&Q.isBlock(e,_)});if(x&&C){var[S,w]=x,[,E]=C;be.isAncestor(E,w)&&(g=S)}}}var T=Bd(g,N8e);return T},D8e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:s=!1}=n,{match:a,at:i=e.selection}=n;if(i){var o=Q.after(e,i,{voids:s});if(o){var[,l]=Q.last(e,[]),u=[o.path,l];if(be.isPath(i)&&i.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(be.isPath(i)){var[d]=Q.parent(e,i);a=m=>d.children.includes(m)}else a=()=>!0;var[f]=Q.nodes(e,{at:u,match:a,mode:r,voids:s});return f}}},R8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Q.path(e,n,r),a=pt.get(e,s);return[a,s]};function M8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){var{at:n=t.selection,mode:r="all",universal:s=!1,reverse:a=!1,voids:i=!1,pass:o}=e,{match:l}=e;if(l||(l=()=>!0),!!n){var u,d;if(v7e.isSpan(n))u=n[0],d=n[1];else{var f=Q.path(t,n,{edge:"start"}),m=Q.path(t,n,{edge:"end"});u=a?m:f,d=a?f:m}var g=pt.nodes(t,{reverse:a,from:u,to:d,pass:T=>{var[_,A]=T;return o&&o([_,A])?!0:jt.isElement(_)?!!(!i&&(Q.isVoid(t,_)||Q.isElementReadOnly(t,_))):!1}}),x=[],b;for(var[C,S]of g){var w=b&&be.compare(S,b[1])===0;if(!(r==="highest"&&w)){if(!l(C,S)){if(s&&!w&&mt.isText(C))return;continue}if(r==="lowest"&&w){b=[C,S];continue}var E=r==="lowest"?b:[C,S];E&&(s?x.push(E):yield E),b=[C,S]}}r==="lowest"&&b&&(s?x.push(b):yield b),s&&(yield*x)}})()}var I8e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:s}=n,a=d=>A4.get(d)||[],i=d=>N4.get(d)||new Set,o=d=>{var f=a(d).pop(),m=f.join(",");return i(d).delete(m),f};if(Q.isNormalizing(e)){if(r){var l=Array.from(pt.nodes(e),d=>{var[,f]=d;return f}),u=new Set(l.map(d=>d.join(",")));A4.set(e,l),N4.set(e,u)}a(e).length!==0&&Q.withoutNormalizing(e,()=>{for(var d of a(e))if(pt.has(e,d)){var f=Q.node(e,d),[m,g]=f;jt.isElement(m)&&m.children.length===0&&e.normalizeNode(f,{operation:s})}for(var x=a(e),b=x.length,C=0;x.length!==0;){if(!e.shouldNormalize({dirtyPaths:x,iteration:C,initialDirtyPathsLength:b,operation:s}))return;var S=o(e);if(pt.has(e,S)){var w=Q.node(e,S);e.normalizeNode(w,{operation:s})}C++,x=a(e)}})}},O8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Q.path(e,n,r),a=be.parent(s),i=Q.node(e,a);return i},P8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:s="forward"}=r,a={current:n,affinity:s,unref(){var{current:o}=a,l=Q.pathRefs(e);return l.delete(a),a.current=null,o}},i=Q.pathRefs(e);return i.add(a),a},F8e=t=>{var e=rH.get(t);return e||(e=new Set,rH.set(t,e)),e},B8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:s,edge:a}=r;if(be.isPath(n)){if(a==="start"){var[,i]=pt.first(e,n);n=i}else if(a==="end"){var[,o]=pt.last(e,n);n=o}}return Be.isRange(n)&&(a==="start"?n=Be.start(n):a==="end"?n=Be.end(n):n=be.common(n.anchor.path,n.focus.path)),Qn.isPoint(n)&&(n=n.path),s!=null&&(n=n.slice(0,s)),n},L8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:s="forward"}=r,a={current:n,affinity:s,unref(){var{current:o}=a,l=Q.pointRefs(e);return l.delete(a),a.current=null,o}},i=Q.pointRefs(e);return i.add(a),a},z8e=t=>{var e=sH.get(t);return e||(e=new Set,sH.set(t,e)),e},$8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:s="start"}=r;if(be.isPath(n)){var a;if(s==="end"){var[,i]=pt.last(e,n);a=i}else{var[,o]=pt.first(e,n);a=o}var l=pt.get(e,a);if(!mt.isText(l))throw new Error("Cannot get the ".concat(s," point in the node at path [").concat(n,"] because it has no ").concat(s," text node."));return{path:a,offset:s==="end"?l.text.length:0}}if(Be.isRange(n)){var[u,d]=Be.edges(n);return s==="start"?u:d}return n};function U8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){var{at:n=t.selection,unit:r="offset",reverse:s=!1,voids:a=!1}=e;if(!n)return;var i=Q.range(t,n),[o,l]=Be.edges(i),u=s?l:o,d=!1,f="",m=0,g=0,x=0,b=[],C=function*(A){var j=b.some(O=>be.isAncestor(O,A));function*D(O){j||(yield O)}if(jt.isElement(w)){if(!t.isSelectable(w)){if(b.push(A),s)return be.hasPrevious(A)&&(yield*D(Q.end(t,be.previous(A)))),0;var z=be.next(A);return Q.hasPath(t,z)&&(yield*D(Q.start(t,z))),0}if(!a&&(t.isVoid(w)||t.isElementReadOnly(w)))return yield*D(Q.start(t,A)),0;if(t.isInline(w))return 0;if(Q.hasInlines(t,w)){var F=be.isAncestor(A,l.path)?l:Q.end(t,A),R=be.isAncestor(A,o.path)?o:Q.start(t,A);f=Q.string(t,{anchor:R,focus:F},{voids:a}),d=!0}}if(mt.isText(w)){var L=be.equals(A,u.path);for(L?(g=s?u.offset:w.text.length-u.offset,x=u.offset):(g=w.text.length,x=s?g:0),(L||d||r==="offset")&&(yield*D({path:A,offset:x}),d=!1);;){if(m===0){if(f==="")break;m=T(f,r,s),f=QR(f,m,s)[1]}if(x=s?x-m:x+m,g=g-m,g<0){m=-g;break}m=0,yield*D({path:A,offset:x})}}},S;for(var[w,E]of Q.nodes(t,{at:n,reverse:s,voids:a}))S=yield*C(E);function T(_,A,j){return A==="character"?JR(_,j):A==="word"?S7e(_,j):A==="line"||A==="block"?_.length:1}})()}var H8e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:s=!1}=n,{match:a,at:i=e.selection}=n;if(i){var o=Q.before(e,i,{voids:s});if(o){var[,l]=Q.first(e,[]),u=[o.path,l];if(be.isPath(i)&&i.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(be.isPath(i)){var[d]=Q.parent(e,i);a=m=>d.children.includes(m)}else a=()=>!0;var[f]=Q.nodes(e,{reverse:!0,at:u,match:a,mode:r,voids:s});return f}}},V8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:s="forward"}=r,a={current:n,affinity:s,unref(){var{current:o}=a,l=Q.rangeRefs(e);return l.delete(a),a.current=null,o}},i=Q.rangeRefs(e);return i.add(a),a},q8e=t=>{var e=aH.get(t);return e||(e=new Set,aH.set(t,e)),e},G8e=(t,e,n)=>{if(Be.isRange(e)&&!n)return e;var r=Q.start(t,e),s=Q.end(t,n||e);return{anchor:r,focus:s}};function jH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function W8e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var K8e=(t,e)=>{var{selection:n}=t;if(n){var r=(d,f)=>{if(!mt.isText(d))return!1;var[m,g]=Q.parent(t,f);return!t.isVoid(m)||t.markableVoid(m)},s=Be.isExpanded(n),a=!1;if(!s){var[i,o]=Q.node(t,n);if(i&&r(i,o)){var[l]=Q.parent(t,o);a=l&&t.markableVoid(l)}}if(s||a)rt.unsetNodes(t,e,{match:r,split:!0,voids:!0});else{var u=W8e({},Q.marks(t)||{});delete u[e],t.marks=u,Fx.get(t)||t.onChange()}}},Y8e=(t,e)=>{zne.set(t,e)},X8e=(t,e)=>Q.point(t,e,{edge:"start"}),J8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:s=!1}=r,a=Q.range(e,n),[i,o]=Be.edges(a),l="";for(var[u,d]of Q.nodes(e,{at:a,match:mt.isText,voids:s})){var f=u.text;be.equals(d,o.path)&&(f=f.slice(0,o.offset)),be.equals(d,i.path)&&(f=f.slice(i.offset)),l+=f}return l},Q8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:s=!1}=r,[a,i]=Be.edges(n);if(a.offset!==0||i.offset!==0||Be.isCollapsed(n)||be.hasPrevious(i.path))return n;var o=Q.above(e,{at:i,match:x=>jt.isElement(x)&&Q.isBlock(e,x),voids:s}),l=o?o[1]:[],u=Q.start(e,a),d={anchor:u,focus:i},f=!0;for(var[m,g]of Q.nodes(e,{at:d,match:mt.isText,reverse:!0,voids:s})){if(f){f=!1;continue}if(m.text!==""||be.isBefore(g,l)){i={path:g,offset:m.text.length};break}}return{anchor:a,focus:i}},Z8e=(t,e)=>{var n=Q.isNormalizing(t);Q.setNormalizing(t,!1);try{e()}finally{Q.setNormalizing(t,n)}Q.normalize(t)},eRe=(t,e,n)=>{var[r,s]=e;return jt.isElement(r)&&Q.isEmpty(t,r)||mt.isText(r)&&r.text===""&&s[s.length-1]!==0},tRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.withoutNormalizing(e,()=>{var r,s,{reverse:a=!1,unit:i="character",distance:o=1,voids:l=!1}=n,{at:u=e.selection,hanging:d=!1}=n;if(u){var f=!1;if(Be.isRange(u)&&Be.isCollapsed(u)&&(f=!0,u=u.anchor),Qn.isPoint(u)){var m=Q.void(e,{at:u,mode:"highest"});if(!l&&m){var[,g]=m;u=g}else{var x={unit:i,distance:o},b=a?Q.before(e,u,x)||Q.start(e,[]):Q.after(e,u,x)||Q.end(e,[]);u={anchor:u,focus:b},d=!0}}if(be.isPath(u)){rt.removeNodes(e,{at:u,voids:l});return}if(!Be.isCollapsed(u)){if(!d){var[,C]=Be.edges(u),S=Q.end(e,[]);Qn.equals(C,S)||(u=Q.unhangRange(e,u,{voids:l}))}var[w,E]=Be.edges(u),T=Q.above(e,{match:ve=>jt.isElement(ve)&&Q.isBlock(e,ve),at:w,voids:l}),_=Q.above(e,{match:ve=>jt.isElement(ve)&&Q.isBlock(e,ve),at:E,voids:l}),A=T&&_&&!be.equals(T[1],_[1]),j=be.equals(w.path,E.path),D=l?null:(r=Q.void(e,{at:w,mode:"highest"}))!==null&&r!==void 0?r:Q.elementReadOnly(e,{at:w,mode:"highest"}),z=l?null:(s=Q.void(e,{at:E,mode:"highest"}))!==null&&s!==void 0?s:Q.elementReadOnly(e,{at:E,mode:"highest"});if(D){var F=Q.before(e,w);F&&T&&be.isAncestor(T[1],F.path)&&(w=F)}if(z){var R=Q.after(e,E);R&&_&&be.isAncestor(_[1],R.path)&&(E=R)}var L=[],O;for(var H of Q.nodes(e,{at:u,voids:l})){var[P,I]=H;O&&be.compare(I,O)===0||(!l&&jt.isElement(P)&&(Q.isVoid(e,P)||Q.isElementReadOnly(e,P))||!be.isCommon(I,w.path)&&!be.isCommon(I,E.path))&&(L.push(H),O=I)}var U=Array.from(L,ve=>{var[,He]=ve;return Q.pathRef(e,He)}),W=Q.pointRef(e,w),Y=Q.pointRef(e,E),B="";if(!j&&!D){var Z=W.current,[le]=Q.leaf(e,Z),{path:G}=Z,{offset:K}=w,te=le.text.slice(K);te.length>0&&(e.apply({type:"remove_text",path:G,offset:K,text:te}),B=te)}if(U.reverse().map(ve=>ve.unref()).filter(ve=>ve!==null).forEach(ve=>rt.removeNodes(e,{at:ve,voids:l})),!z){var ie=Y.current,[de]=Q.leaf(e,ie),{path:fe}=ie,se=j?w.offset:0,ce=de.text.slice(se,E.offset);ce.length>0&&(e.apply({type:"remove_text",path:fe,offset:se,text:ce}),B=ce)}!j&&A&&Y.current&&W.current&&rt.mergeNodes(e,{at:Y.current,hanging:!0,voids:l}),f&&a&&i==="character"&&B.length>1&&B.match(/[\u0980-\u09FF\u0E00-\u0E7F\u1000-\u109F\u0900-\u097F\u1780-\u17FF\u0D00-\u0D7F\u0B00-\u0B7F\u0A00-\u0A7F\u0B80-\u0BFF\u0C00-\u0C7F]+/)&&rt.insertText(e,B.slice(0,B.length-o));var ue=W.unref(),oe=Y.unref(),Ne=a?ue||oe:oe||ue;n.at==null&&Ne&&rt.select(e,Ne)}}})},nRe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q.withoutNormalizing(e,()=>{var{hanging:s=!1,voids:a=!1}=r,{at:i=XR(e),batchDirty:o=!0}=r;if(n.length){if(Be.isRange(i))if(s||(i=Q.unhangRange(e,i,{voids:a})),Be.isCollapsed(i))i=i.anchor;else{var[,l]=Be.edges(i);if(!a&&Q.void(e,{at:l}))return;var u=Q.pointRef(e,l);rt.delete(e,{at:i}),i=u.unref()}else be.isPath(i)&&(i=Q.start(e,i));if(!(!a&&Q.void(e,{at:i}))){var d=Q.above(e,{at:i,match:G=>jt.isElement(G)&&Q.isInline(e,G),mode:"highest",voids:a});if(d){var[,f]=d;if(Q.isEnd(e,i,f)){var m=Q.after(e,f);i=m}else if(Q.isStart(e,i,f)){var g=Q.before(e,f);i=g}}var x=Q.above(e,{match:G=>jt.isElement(G)&&Q.isBlock(e,G),at:i,voids:a}),[,b]=x,C=Q.isStart(e,i,b),S=Q.isEnd(e,i,b),w=C&&S,[,E]=pt.first({children:n},[]),[,T]=pt.last({children:n},[]),_=G=>{var[K,te]=G,ie=te.length===0;return ie?!1:w?!0:!(!C&&be.isAncestor(te,E)&&jt.isElement(K)&&!e.isVoid(K)&&!e.isInline(K)||!S&&be.isAncestor(te,T)&&jt.isElement(K)&&!e.isVoid(K)&&!e.isInline(K))},A=!0,j=[],D=[],z=[];for(var F of pt.nodes({children:n},{pass:_})){var[R,L]=F;A&&jt.isElement(R)&&!e.isInline(R)&&!be.isAncestor(L,E)&&(A=!1),_(F)&&(jt.isElement(R)&&!e.isInline(R)?(A=!1,D.push(R)):A?j.push(R):z.push(R))}var[O]=Q.nodes(e,{at:i,match:G=>mt.isText(G)||Q.isInline(e,G),mode:"highest",voids:a}),[,H]=O,P=Q.isStart(e,i,H),I=Q.isEnd(e,i,H),U=Q.pathRef(e,S&&!z.length?be.next(b):b),W=Q.pathRef(e,I?be.next(H):H),Y=z.length>0;rt.splitNodes(e,{at:i,match:G=>Y?jt.isElement(G)&&Q.isBlock(e,G):mt.isText(G)||Q.isInline(e,G),mode:Y?"lowest":"highest",always:Y&&(!C||j.length>0)&&(!S||z.length>0),voids:a});var B=Q.pathRef(e,!P||P&&I?be.next(H):H);if(rt.insertNodes(e,j,{at:B.current,match:G=>mt.isText(G)||Q.isInline(e,G),mode:"highest",voids:a,batchDirty:o}),w&&!j.length&&D.length&&!z.length&&rt.delete(e,{at:b,voids:a}),rt.insertNodes(e,D,{at:U.current,match:G=>jt.isElement(G)&&Q.isBlock(e,G),mode:"lowest",voids:a,batchDirty:o}),rt.insertNodes(e,z,{at:W.current,match:G=>mt.isText(G)||Q.isInline(e,G),mode:"highest",voids:a,batchDirty:o}),!r.at){var Z;if(z.length>0&&W.current?Z=be.previous(W.current):D.length>0&&U.current?Z=be.previous(U.current):B.current&&(Z=be.previous(B.current)),Z){var le=Q.end(e,Z);rt.select(e,le)}}B.unref(),U.unref(),W.unref()}}})},rRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:s}=e;if(s){if(r==="anchor")rt.select(e,s.anchor);else if(r==="focus")rt.select(e,s.focus);else if(r==="start"){var[a]=Be.edges(s);rt.select(e,a)}else if(r==="end"){var[,i]=Be.edges(s);rt.select(e,i)}}else return},sRe=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},aRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e,{distance:s=1,unit:a="character",reverse:i=!1}=n,{edge:o=null}=n;if(r){o==="start"&&(o=Be.isBackward(r)?"focus":"anchor"),o==="end"&&(o=Be.isBackward(r)?"anchor":"focus");var{anchor:l,focus:u}=r,d={distance:s,unit:a},f={};if(o==null||o==="anchor"){var m=i?Q.before(e,l,d):Q.after(e,l,d);m&&(f.anchor=m)}if(o==null||o==="focus"){var g=i?Q.before(e,u,d):Q.after(e,u,d);g&&(f.focus=g)}rt.setSelection(e,f)}},iRe=(t,e)=>{var{selection:n}=t;if(e=Q.range(t,e),n){rt.setSelection(t,e);return}if(!Be.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(ua.stringify(e)));t.apply({type:"set_selection",properties:n,newProperties:e})};function DH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var oRe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:s}=e,{edge:a="both"}=r;if(s){a==="start"&&(a=Be.isBackward(s)?"focus":"anchor"),a==="end"&&(a=Be.isBackward(s)?"anchor":"focus");var{anchor:i,focus:o}=s,l=a==="anchor"?i:o;rt.setSelection(e,{[a==="anchor"?"anchor":"focus"]:RH(RH({},l),n)})}},lRe=(t,e)=>{var{selection:n}=t,r={},s={};if(n){for(var a in e)(a==="anchor"&&e.anchor!=null&&!Qn.equals(e.anchor,n.anchor)||a==="focus"&&e.focus!=null&&!Qn.equals(e.focus,n.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==n[a])&&(r[a]=n[a],s[a]=e[a]);Object.keys(r).length>0&&t.apply({type:"set_selection",properties:r,newProperties:s})}},cRe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q.withoutNormalizing(e,()=>{var{hanging:s=!1,voids:a=!1,mode:i="lowest",batchDirty:o=!0}=r,{at:l,match:u,select:d}=r;if(pt.isNode(n)&&(n=[n]),n.length!==0){var[f]=n;if(l||(l=XR(e),d!==!1&&(d=!0)),d==null&&(d=!1),Be.isRange(l))if(s||(l=Q.unhangRange(e,l,{voids:a})),Be.isCollapsed(l))l=l.anchor;else{var[,m]=Be.edges(l),g=Q.pointRef(e,m);rt.delete(e,{at:l}),l=g.unref()}if(Qn.isPoint(l)){u==null&&(mt.isText(f)?u=F=>mt.isText(F):e.isInline(f)?u=F=>mt.isText(F)||Q.isInline(e,F):u=F=>jt.isElement(F)&&Q.isBlock(e,F));var[x]=Q.nodes(e,{at:l.path,match:u,mode:i,voids:a});if(x){var[,b]=x,C=Q.pathRef(e,b),S=Q.isEnd(e,l,b);rt.splitNodes(e,{at:l,match:u,mode:i,voids:a});var w=C.unref();l=S?be.next(w):w}else return}var E=be.parent(l),T=l[l.length-1];if(!(!a&&Q.void(e,{at:E}))){if(o){var _=[],A=be.levels(E);q7e(e,()=>{var F=function(){var O=E.concat(T);T++;var H={type:"insert_node",path:O,node:R};e.apply(H),l=be.next(l),_.push(H),mt.isText(R)?A.push(O):A.push(...Array.from(pt.nodes(R),P=>{var[,I]=P;return O.concat(I)}))};for(var R of n)F()},()=>{Une(e,A,F=>{var R=F;for(var L of _)if(be.operationCanTransformPath(L)&&(R=be.transform(R,L),!R))return null;return R})})}else for(var j of n){var D=E.concat(T);T++,e.apply({type:"insert_node",path:D,node:j}),l=be.next(l)}if(l=be.previous(l),d){var z=Q.end(e,l);z&&rt.select(e,z)}}}})},uRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:s="lowest",voids:a=!1}=n,{match:i}=n;if(i==null&&(i=be.isPath(r)?Dv(e,r):T=>jt.isElement(T)&&Q.isBlock(e,T)),!!r){var o=Q.nodes(e,{at:r,match:i,mode:s,voids:a}),l=Array.from(o,T=>{var[,_]=T;return Q.pathRef(e,_)});for(var u of l){var d=u.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var f=Q.node(e,be.parent(d)),[m,g]=f,x=d[d.length-1],{length:b}=m.children;if(b===1){var C=be.next(g);rt.moveNodes(e,{at:d,to:C,voids:a}),rt.removeNodes(e,{at:g,voids:a})}else if(x===0)rt.moveNodes(e,{at:d,to:g,voids:a});else if(x===b-1){var S=be.next(g);rt.moveNodes(e,{at:d,to:S,voids:a})}else{var w=be.next(d),E=be.next(g);rt.splitNodes(e,{at:w,voids:a}),rt.moveNodes(e,{at:d,to:E,voids:a})}}}})},dRe=["text"],hRe=["children"],Hne=(t,e)=>{if(jt.isElement(e)){var n=e;return Q.isVoid(t,e)?!0:n.children.length===1?Hne(t,n.children[0]):!1}else return!Q.isEditor(e)},fRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.withoutNormalizing(e,()=>{var{match:r,at:s=e.selection}=n,{hanging:a=!1,voids:i=!1,mode:o="lowest"}=n;if(s){if(r==null)if(be.isPath(s)){var[l]=Q.parent(e,s);r=F=>l.children.includes(F)}else r=F=>jt.isElement(F)&&Q.isBlock(e,F);if(!a&&Be.isRange(s)&&(s=Q.unhangRange(e,s,{voids:i})),Be.isRange(s))if(Be.isCollapsed(s))s=s.anchor;else{var[,u]=Be.edges(s),d=Q.pointRef(e,u);rt.delete(e,{at:s}),s=d.unref(),n.at==null&&rt.select(e,s)}var[f]=Q.nodes(e,{at:s,match:r,voids:i,mode:o}),m=Q.previous(e,{at:s,match:r,voids:i,mode:o});if(!(!f||!m)){var[g,x]=f,[b,C]=m;if(!(x.length===0||C.length===0)){var S=be.next(C),w=be.common(x,C),E=be.isSibling(x,C),T=Array.from(Q.levels(e,{at:x}),F=>{var[R]=F;return R}).slice(w.length).slice(0,-1),_=Q.above(e,{at:x,mode:"highest",match:F=>T.includes(F)&&Hne(e,F)}),A=_&&Q.pathRef(e,_[1]),j,D;if(mt.isText(g)&&mt.isText(b)){var z=Bd(g,dRe);D=b.text.length,j=z}else if(jt.isElement(g)&&jt.isElement(b)){var z=Bd(g,hRe);D=b.children.length,j=z}else throw new Error("Cannot merge the node at path [".concat(x,"] with the previous sibling because it is not the same kind: ").concat(ua.stringify(g)," ").concat(ua.stringify(b)));E||rt.moveNodes(e,{at:x,to:S,voids:i}),A&&rt.removeNodes(e,{at:A.current,voids:i}),Q.shouldMergeNodesRemovePrevNode(e,m,f)?rt.removeNodes(e,{at:C,voids:i}):e.apply({type:"merge_node",path:S,position:D,properties:j}),A&&A.unref()}}}})},mRe=(t,e)=>{Q.withoutNormalizing(t,()=>{var{to:n,at:r=t.selection,mode:s="lowest",voids:a=!1}=e,{match:i}=e;if(r){i==null&&(i=be.isPath(r)?Dv(t,r):g=>jt.isElement(g)&&Q.isBlock(t,g));var o=Q.pathRef(t,n),l=Q.nodes(t,{at:r,match:i,mode:s,voids:a}),u=Array.from(l,g=>{var[,x]=g;return Q.pathRef(t,x)});for(var d of u){var f=d.unref(),m=o.current;f.length!==0&&t.apply({type:"move_node",path:f,newPath:m}),o.current&&be.isSibling(m,f)&&be.isAfter(m,f)&&(o.current=be.next(o.current))}o.unref()}})},pRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:s=!1,mode:a="lowest"}=n,{at:i=e.selection,match:o}=n;if(i){o==null&&(o=be.isPath(i)?Dv(e,i):g=>jt.isElement(g)&&Q.isBlock(e,g)),!r&&Be.isRange(i)&&(i=Q.unhangRange(e,i,{voids:s}));var l=Q.nodes(e,{at:i,match:o,mode:a,voids:s}),u=Array.from(l,g=>{var[,x]=g;return Q.pathRef(e,x)});for(var d of u){var f=d.unref();if(f){var[m]=Q.node(e,f);e.apply({type:"remove_node",path:f,node:m})}}}})},gRe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q.withoutNormalizing(e,()=>{var{match:s,at:a=e.selection,compare:i,merge:o}=r,{hanging:l=!1,mode:u="lowest",split:d=!1,voids:f=!1}=r;if(a){if(s==null&&(s=be.isPath(a)?Dv(e,a):D=>jt.isElement(D)&&Q.isBlock(e,D)),!l&&Be.isRange(a)&&(a=Q.unhangRange(e,a,{voids:f})),d&&Be.isRange(a)){if(Be.isCollapsed(a)&&Q.leaf(e,a.anchor)[0].text.length>0)return;var m=Q.rangeRef(e,a,{affinity:"inward"}),[g,x]=Be.edges(a),b=u==="lowest"?"lowest":"highest",C=Q.isEnd(e,x,x.path);rt.splitNodes(e,{at:x,match:s,mode:b,voids:f,always:!C});var S=Q.isStart(e,g,g.path);rt.splitNodes(e,{at:g,match:s,mode:b,voids:f,always:!S}),a=m.unref(),r.at==null&&rt.select(e,a)}i||(i=(D,z)=>D!==z);for(var[w,E]of Q.nodes(e,{at:a,match:s,mode:u,voids:f})){var T={},_={};if(E.length!==0){var A=!1;for(var j in n)j==="children"||j==="text"||i(n[j],w[j])&&(A=!0,w.hasOwnProperty(j)&&(T[j]=w[j]),o?n[j]!=null&&(_[j]=o(w[j],n[j])):n[j]!=null&&(_[j]=n[j]));A&&e.apply({type:"set_node",path:E,properties:T,newProperties:_})}}}})},vRe=(t,e)=>{if(Be.isCollapsed(e))return e.anchor;var[,n]=Be.edges(e),r=Q.pointRef(t,n);return rt.delete(t,{at:e}),r.unref()},yRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:s=!1}=n,{match:a,at:i=e.selection,height:o=0,always:l=!1}=n;if(a==null&&(a=Y=>jt.isElement(Y)&&Q.isBlock(e,Y)),Be.isRange(i)&&(i=vRe(e,i)),be.isPath(i)){var u=i,d=Q.point(e,u),[f]=Q.parent(e,u);a=Y=>Y===f,o=d.path.length-u.length+1,i=d,l=!0}if(i){var m=Q.pointRef(e,i,{affinity:"backward"}),g;try{var[x]=Q.nodes(e,{at:i,match:a,mode:r,voids:s});if(!x)return;var b=Q.void(e,{at:i,mode:"highest"}),C=0;if(!s&&b){var[S,w]=b;if(jt.isElement(S)&&e.isInline(S)){var E=Q.after(e,w);if(!E){var T={text:""},_=be.next(w);rt.insertNodes(e,T,{at:_,voids:s}),E=Q.point(e,_)}i=E,l=!0}var A=i.path.length-w.length;o=A+1,l=!0}g=Q.pointRef(e,i);var j=i.path.length-o,[,D]=x,z=i.path.slice(0,j),F=o===0?i.offset:i.path[j]+C;for(var[R,L]of Q.levels(e,{at:z,reverse:!0,voids:s})){var O=!1;if(L.length<D.length||L.length===0||!s&&jt.isElement(R)&&Q.isVoid(e,R))break;var H=m.current,P=Q.isEnd(e,H,L);if(l||!m||!Q.isEdge(e,H,L)){O=!0;var I=pt.extractProps(R);e.apply({type:"split_node",path:L,position:F,properties:I})}F=L[L.length-1]+(O||P?1:0)}if(n.at==null){var U=g.current||Q.end(e,[]);rt.select(e,U)}}finally{var W;m.unref(),(W=g)===null||W===void 0||W.unref()}}})},xRe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var s={};for(var a of n)s[a]=null;rt.setNodes(e,s,r)},bRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.withoutNormalizing(e,()=>{var{mode:r="lowest",split:s=!1,voids:a=!1}=n,{at:i=e.selection,match:o}=n;if(i){o==null&&(o=be.isPath(i)?Dv(e,i):g=>jt.isElement(g)&&Q.isBlock(e,g)),be.isPath(i)&&(i=Q.range(e,i));var l=Be.isRange(i)?Q.rangeRef(e,i):null,u=Q.nodes(e,{at:i,match:o,mode:r,voids:a}),d=Array.from(u,g=>{var[,x]=g;return Q.pathRef(e,x)}).reverse(),f=function(){var x=m.unref(),[b]=Q.node(e,x),C=Q.range(e,x);s&&l&&(C=Be.intersection(l.current,C)),rt.liftNodes(e,{at:C,match:S=>jt.isAncestor(b)&&b.children.includes(S),voids:a})};for(var m of d)f();l&&l.unref()}})};function MH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function IH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MH(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wRe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q.withoutNormalizing(e,()=>{var{mode:s="lowest",split:a=!1,voids:i=!1}=r,{match:o,at:l=e.selection}=r;if(l){if(o==null&&(be.isPath(l)?o=Dv(e,l):e.isInline(n)?o=S=>jt.isElement(S)&&Q.isInline(e,S)||mt.isText(S):o=S=>jt.isElement(S)&&Q.isBlock(e,S)),a&&Be.isRange(l)){var[u,d]=Be.edges(l),f=Q.rangeRef(e,l,{affinity:"inward"}),m=S=>{var w=Q.above(e,{at:S,match:E=>jt.isElement(E)&&Q.isBlock(e,E)});return w&&Q.isEdge(e,S,w[1])};rt.splitNodes(e,{at:d,match:o,voids:i,always:!m(d)}),rt.splitNodes(e,{at:u,match:o,voids:i,always:!m(u)}),l=f.unref(),r.at==null&&rt.select(e,l)}var g=Array.from(Q.nodes(e,{at:l,match:e.isInline(n)?S=>jt.isElement(S)&&Q.isBlock(e,S):S=>Q.isEditor(S),mode:"lowest",voids:i})),x=function(){var w=Be.isRange(l)?Be.intersection(l,Q.range(e,C)):l;if(!w)return 0;var E=Array.from(Q.nodes(e,{at:w,match:o,mode:s,voids:i}));if(E.length>0){var[T]=E,_=E[E.length-1],[,A]=T,[,j]=_;if(A.length===0&&j.length===0)return 0;var D=be.equals(A,j)?be.parent(A):be.common(A,j),z=Q.range(e,A,j),F=Q.node(e,D),[R]=F,L=D.length+1,O=be.next(j.slice(0,L)),H=IH(IH({},n),{},{children:[]});rt.insertNodes(e,H,{at:O,voids:i}),rt.moveNodes(e,{at:z,match:P=>jt.isAncestor(R)&&R.children.includes(P),to:O.concat(0),voids:i})}},b;for(var[,C]of g)b=x()}})},CRe=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return G7e(t,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Q7e(t,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t8e(t,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return n8e(t,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return r8e(t,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return K7e(t,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return m8e(t,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return g8e(t,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return nRe(t,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return p8e(t,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return y8e(t,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Y7e(t,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return K8e(t,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return W7e(t,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return X7e(t,...r)},above:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return J7e(t,...r)},after:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Z7e(t,...r)},before:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e8e(t,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return rRe(t,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return tRe(t,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return sRe(t,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return s8e(t,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a8e(t,...r)},end:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i8e(t,...r)},first:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return o8e(t,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return l8e(t,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return j8e(t,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return u8e(t,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return d8e(t,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return h8e(t,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return f8e(t,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return cRe(t,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return x8e(t,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return b8e(t,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return w8e(t,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return C8e(t,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return S8e(t,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return k8e(t,...r)},last:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return E8e(t,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return _8e(t,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return T8e(t,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return uRe(t,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return fRe(t,...r)},move:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return aRe(t,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return mRe(t,...r)},next:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return D8e(t,...r)},node:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return R8e(t,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return M8e(t,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return I8e(t,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return O8e(t,...r)},path:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return B8e(t,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return P8e(t,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return F8e(t,...r)},point:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return $8e(t,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return L8e(t,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return z8e(t,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return U8e(t,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return H8e(t,...r)},range:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return G8e(t,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return V8e(t,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return q8e(t,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return pRe(t,...r)},select:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return iRe(t,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return gRe(t,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Y8e(t,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return oRe(t,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return lRe(t,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return yRe(t,...r)},start:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return X8e(t,...r)},string:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return J8e(t,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Q8e(t,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return xRe(t,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return bRe(t,...r)},void:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return c8e(t,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Z8e(t,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return wRe(t,...r)},shouldMergeNodesRemovePrevNode:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return eRe(t,...r)}};return t},zl={},OH;function SRe(){if(OH)return zl;OH=1,Object.defineProperty(zl,"__esModule",{value:!0});for(var t=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),e={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:t?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=1;s<20;s++)r["f"+s]=111+s;function a(m,g,x){g&&!("byKey"in g)&&(x=g,g=null),Array.isArray(m)||(m=[m]);var b=m.map(function(w){return l(w,g)}),C=function(E){return b.some(function(T){return u(T,E)})},S=x==null?C:C(x);return S}function i(m,g){return a(m,g)}function o(m,g){return a(m,{byKey:!0},g)}function l(m,g){var x=g&&g.byKey,b={};m=m.replace("++","+add");var C=m.split("+"),S=C.length;for(var w in e)b[e[w]]=!1;var E=!0,T=!1,_=void 0;try{for(var A=C[Symbol.iterator](),j;!(E=(j=A.next()).done);E=!0){var D=j.value,z=D.endsWith("?")&&D.length>1;z&&(D=D.slice(0,-1));var F=f(D),R=e[F];if(D.length>1&&!R&&!n[D]&&!r[F])throw new TypeError('Unknown modifier: "'+D+'"');(S===1||!R)&&(x?b.key=F:b.which=d(D)),R&&(b[R]=z?null:!0)}}catch(L){T=!0,_=L}finally{try{!E&&A.return&&A.return()}finally{if(T)throw _}}return b}function u(m,g){for(var x in m){var b=m[x],C=void 0;if(b!=null&&(x==="key"&&g.key!=null?C=g.key.toLowerCase():x==="which"?C=b===91&&g.which===93?91:g.which:C=g[x],!(C==null&&b===!1)&&C!==b))return!1}return!0}function d(m){m=f(m);var g=r[m]||m.toUpperCase().charCodeAt(0);return g}function f(m){return m=m.toLowerCase(),m=n[m]||m,m}return zl.default=a,zl.isHotkey=a,zl.isCodeHotkey=i,zl.isKeyHotkey=o,zl.parseHotkey=l,zl.compareHotkey=u,zl.toKeyCode=d,zl.toKeyName=f,zl}var OA=SRe(),Vne=globalThis.Node,kRe=globalThis.Text,ZR=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,ERe=t=>wf(t)&&t.nodeType===8,xl=t=>wf(t)&&t.nodeType===1,wf=t=>{var e=ZR(t);return!!e&&t instanceof e.Node},pD=t=>{var e=t&&t.anchorNode&&ZR(t.anchorNode);return!!e&&t instanceof e.Selection},qne=t=>wf(t)&&t.nodeType===3,_Re=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,TRe=t=>{var[e,n]=t;if(xl(e)&&e.childNodes.length){var r=n===e.childNodes.length,s=r?n-1:n;for([e,s]=Gne(e,s,r?"backward":"forward"),r=s<n;xl(e)&&e.childNodes.length;){var a=r?e.childNodes.length-1:0;e=NRe(e,a,r?"backward":"forward")}n=r&&e.textContent!=null?e.textContent.length:0}return[e,n]},ARe=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Gne=(t,e,n)=>{for(var{childNodes:r}=t,s=r[e],a=e,i=!1,o=!1;(ERe(s)||xl(s)&&s.childNodes.length===0||xl(s)&&s.getAttribute("contenteditable")==="false")&&!(i&&o);){if(a>=r.length){i=!0,a=e-1,n="backward";continue}if(a<0){o=!0,a=e+1,n="forward";continue}s=r[a],e=a,a+=n==="forward"?1:-1}return[s,e]},NRe=(t,e,n)=>{var[r]=Gne(t,e,n);return r},Wne=t=>{var e="";if(qne(t)&&t.nodeValue)return t.nodeValue;if(xl(t)){for(var n of Array.from(t.childNodes))e+=Wne(n);var r=getComputedStyle(t).getPropertyValue("display");(r==="block"||r==="list"||t.tagName==="BR")&&(e+=`
`)}return e},jRe=/data-slate-fragment="(.+?)"/m,DRe=t=>{var e=t.getData("text/html"),[,n]=e.match(jRe)||[];return n},Bx=t=>t.getSelection!=null?t.getSelection():document.getSelection(),eM=(t,e,n)=>{var{target:r}=e;if(xl(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:s}=pn.getWindow(t);if(Hm(s,r))return pn.hasDOMNode(t,r,{editable:!0});var a=n.find(i=>{var{addedNodes:o,removedNodes:l}=i;for(var u of o)if(u===r||Hm(u,r))return!0;for(var d of l)if(d===r||Hm(d,r))return!0});return!a||a===e?!1:eM(t,a,n)},RRe=()=>{for(var t=document.activeElement;(e=t)!==null&&e!==void 0&&e.shadowRoot&&(n=t.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var e,n,r;t=(r=t)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return t},PH=(t,e)=>!!(t.compareDocumentPosition(e)&Vne.DOCUMENT_POSITION_PRECEDING),MRe=(t,e)=>!!(t.compareDocumentPosition(e)&Vne.DOCUMENT_POSITION_FOLLOWING),FH=(t,e)=>{if(!t)return null;for(var n=t;n;){if(n.matches&&n.matches(e))return n;if(n.parentElement)n=n.parentElement;else if(n.parentNode&&"host"in n.parentNode)n=n.parentNode.host;else return null}return null},Hm=(t,e)=>{if(!t||!e)return!1;if(t.contains(e))return!0;for(var n=e;n;){if(n===t)return!0;if(n.parentNode)"host"in n.parentNode?n=n.parentNode.host:n=n.parentNode;else return!1}return!1},PA,FA,IRe=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,BH=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),li=typeof navigator<"u"&&/Android/.test(navigator.userAgent),ag=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Am=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),ORe=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),tM=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Kne=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),PRe=li&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),FRe=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),BRe=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),LRe=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent)&&(!tM||Kne),ES=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((PA=navigator.userAgent.match(/Version\/(\d+)/))!==null&&PA!==void 0&&PA[1]&&parseInt((FA=navigator.userAgent.match(/Version\/(\d+)/))===null||FA===void 0?void 0:FA[1],10)<17);var Rh=(!Kne||!PRe)&&!ORe&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function P1(t){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P1(t)}function zRe(t,e){if(P1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(P1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Re(t){var e=zRe(t,"string");return P1(e)==="symbol"?e:String(e)}function nM(t,e,n){return e=$Re(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var URe=0;class Yne{constructor(){nM(this,"id",void 0),this.id="".concat(URe++)}}var fg=new WeakMap,ig=new WeakMap,Lx=new WeakMap,Xne=new WeakMap,zx=new WeakMap,gD=new WeakMap,F1=new WeakMap,Vm=new WeakMap,j4=new WeakMap,Lk=new WeakMap,vD=new WeakMap,Jh=new WeakMap,Om=new WeakMap,$x=new WeakMap,yD=new WeakMap,rM=new WeakMap,tc=new WeakMap,bd=new WeakMap,Qi=new WeakMap,Hh=new WeakMap,md=new WeakMap,Jne=new WeakMap,Bg=Symbol("placeholder"),Qne=Symbol("mark-placeholder"),pn={androidPendingDiffs:t=>Qi.get(t),androidScheduleFlush:t=>{var e;(e=rM.get(t))===null||e===void 0||e()},blur:t=>{var e=pn.toDOMNode(t,t),n=pn.findDocumentOrShadowRoot(t);Jh.set(t,!1),n.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,n=pn.findDocumentOrShadowRoot(t),r=Bx(n);r&&r.rangeCount>0&&r.removeAllRanges(),e&&rt.deselect(t)},findDocumentOrShadowRoot:t=>{var e=pn.toDOMNode(t,t),n=e.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:n,clientY:r,target:s}=e;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=pn.toSlateNode(t,e.target),i=pn.findPath(t,a);if(jt.isElement(a)&&Q.isVoid(t,a)){var o=s.getBoundingClientRect(),l=t.isInline(a)?n-o.left<o.left+o.width-n:r-o.top<o.top+o.height-r,u=Q.point(t,i,{edge:l?"start":"end"}),d=l?Q.before(t,u):Q.after(t,u);if(d){var f=Q.range(t,d);return f}}var m,{document:g}=pn.getWindow(t);if(g.caretRangeFromPoint)m=g.caretRangeFromPoint(n,r);else{var x=g.caretPositionFromPoint(n,r);x&&(m=g.createRange(),m.setStart(x.offsetNode,x.offset),m.setEnd(x.offsetNode,x.offset))}if(!m)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var b=pn.toSlateRange(t,m,{exactMatch:!1,suppressThrow:!1});return b},findKey:(t,e)=>{var n=j4.get(e);return n||(n=new Yne,j4.set(e,n)),n},findPath:(t,e)=>{for(var n=[],r=e;;){var s=Lx.get(r);if(s==null){if(Q.isEditor(r))return n;break}var a=ig.get(r);if(a==null)break;n.unshift(a),r=s}throw new Error("Unable to find the path for Slate node: ".concat(ua.stringify(e)))},focus:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Jh.get(e)&&zx.get(e)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{pn.focus(e,{retries:n.retries-1})},10);return}var r=pn.toDOMNode(e,e),s=pn.findDocumentOrShadowRoot(e);if(s.activeElement!==r){if(e.selection&&s instanceof Document){var a=Bx(s),i=pn.toDOMRange(e,e.selection);a==null||a.removeAllRanges(),a==null||a.addRange(i)}e.selection||rt.select(e,Q.start(e,[])),Jh.set(e,!0),r.focus({preventScroll:!0})}}},getWindow:t=>{var e=Xne.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:s=!1}=r,a=pn.toDOMNode(e,e),i;try{i=xl(n)?n:n.parentElement}catch(o){if(o instanceof Error&&!o.message.includes('Permission denied to access property "nodeType"'))throw o}return i?FH(i,"[data-slate-editor]")===a&&(!s||i.isContentEditable?!0:typeof i.isContentEditable=="boolean"&&FH(i,'[contenteditable="false"]')===a||!!i.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>wf(e)&&pn.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:n,focus:r}=e;return Q.hasPath(t,n.path)&&Q.hasPath(t,r.path)},hasSelectableTarget:(t,e)=>pn.hasEditableTarget(t,e)||pn.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>wf(e)&&pn.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!Om.get(t),isFocused:t=>!!Jh.get(t),isReadOnly:t=>!!vD.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(vD.get(t))return!1;var n=pn.hasTarget(t,e)&&pn.toSlateNode(t,e);return jt.isElement(n)&&Q.isVoid(t,n)},setFragmentData:(t,e,n)=>t.setFragmentData(e,n),toDOMNode:(t,e)=>{var n=Lk.get(t),r=Q.isEditor(e)?zx.get(t):n==null?void 0:n.get(pn.findKey(t,e));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(ua.stringify(e)));return r},toDOMPoint:(t,e)=>{var[n]=Q.node(t,e.path),r=pn.toDOMNode(t,n),s;Q.void(t,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",i=Array.from(r.querySelectorAll(a)),o=0,l=0;l<i.length;l++){var u=i[l],d=u.childNodes[0];if(!(d==null||d.textContent==null)){var{length:f}=d.textContent,m=u.getAttribute("data-slate-length"),g=m==null?f:parseInt(m,10),x=o+g,b=i[l+1];if(e.offset===x&&b!==null&&b!==void 0&&b.hasAttribute("data-slate-mark-placeholder")){var C,S=b.childNodes[0];s=[S instanceof kRe?S:b,(C=b.textContent)!==null&&C!==void 0&&C.startsWith("\uFEFF")?1:0];break}if(e.offset<=x){var w=Math.min(f,Math.max(0,e.offset-o));s=[d,w];break}o=x}}if(!s)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(ua.stringify(e)));return s},toDOMRange:(t,e)=>{var{anchor:n,focus:r}=e,s=Be.isBackward(e),a=pn.toDOMPoint(t,n),i=Be.isCollapsed(e)?a:pn.toDOMPoint(t,r),o=pn.getWindow(t),l=o.document.createRange(),[u,d]=s?i:a,[f,m]=s?a:i,g=xl(u)?u:u.parentElement,x=!!g.getAttribute("data-slate-zero-width"),b=xl(f)?f:f.parentElement,C=!!b.getAttribute("data-slate-zero-width");return l.setStart(u,x?1:d),l.setEnd(f,C?1:m),l},toSlateNode:(t,e)=>{var n=xl(e)?e:e.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?F1.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(t,e,n)=>{var{exactMatch:r,suppressThrow:s,searchDirection:a}=n,[i,o]=r?e:TRe(e),l=i.parentNode,u=null,d=0;if(l){var f,m,g=pn.toDOMNode(t,t),x=l.closest('[data-slate-void="true"]'),b=x&&Hm(g,x)?x:null,C=l.closest('[contenteditable="false"]'),S=C&&Hm(g,C)?C:null,w=l.closest("[data-slate-leaf]"),E=null;if(w){if(u=w.closest('[data-slate-node="text"]'),u){var T=pn.getWindow(t),_=T.document.createRange();_.setStart(u,0),_.setEnd(i,o);var A=_.cloneContents(),j=[...Array.prototype.slice.call(A.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(A.querySelectorAll("[contenteditable=false]"))];j.forEach(G=>{if(li&&!r&&G.hasAttribute("data-slate-zero-width")&&G.textContent.length>0&&G.textContext!=="\uFEFF"){G.textContent.startsWith("\uFEFF")&&(G.textContent=G.textContent.slice(1));return}G.parentNode.removeChild(G)}),d=A.textContent.length,E=u}}else if(b){for(var D=b.querySelectorAll("[data-slate-leaf]"),z=0;z<D.length;z++){var F=D[z];if(pn.hasDOMNode(t,F)){w=F;break}}w?(u=w.closest('[data-slate-node="text"]'),E=w,d=E.textContent.length,E.querySelectorAll("[data-slate-zero-width]").forEach(G=>{d-=G.textContent.length})):d=1}else if(S){var R=G=>G?G.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],L=S.closest('[data-slate-node="element"]');if(a==="backward"||!a){var O,H=[...R(L==null?void 0:L.previousElementSibling),...R(L)];w=(O=H.findLast(G=>PH(S,G)))!==null&&O!==void 0?O:null}if(a==="forward"||!a){var P,I=[...R(L),...R(L==null?void 0:L.nextElementSibling)];w=(P=I.find(G=>MRe(S,G)))!==null&&P!==void 0?P:null}w&&(u=w.closest('[data-slate-node="text"]'),E=w,a==="forward"?d=0:(d=E.textContent.length,E.querySelectorAll("[data-slate-zero-width]").forEach(G=>{d-=G.textContent.length})))}E&&d===E.textContent.length&&li&&E.getAttribute("data-slate-zero-width")==="z"&&(f=E.textContent)!==null&&f!==void 0&&f.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||ag&&(m=E.textContent)!==null&&m!==void 0&&m.endsWith(`

`))&&d--}if(li&&!u&&!r){var U=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(U&&pn.hasDOMNode(t,U,{editable:!0})){var W=pn.toSlateNode(t,U),{path:Y,offset:B}=Q.start(t,pn.findPath(t,W));return U.querySelector("[data-slate-leaf]")||(B=o),{path:Y,offset:B}}}if(!u){if(s)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var Z=pn.toSlateNode(t,u),le=pn.findPath(t,Z);return{path:le,offset:d}},toSlateRange:(t,e,n)=>{var r,{exactMatch:s,suppressThrow:a}=n,i=pD(e)?e.anchorNode:e.startContainer,o,l,u,d,f;if(i)if(pD(e)){if(ag&&e.rangeCount>1){u=e.focusNode;var m=e.getRangeAt(0),g=e.getRangeAt(e.rangeCount-1);if(u instanceof HTMLTableRowElement&&m.startContainer instanceof HTMLTableRowElement&&g.startContainer instanceof HTMLTableRowElement){let A=function(j){return j.childElementCount>0?A(j.children[0]):j};var x=m.startContainer,b=g.startContainer,C=A(x.children[m.startOffset]),S=A(b.children[g.startOffset]);d=0,S.childNodes.length>0?o=S.childNodes[0]:o=S,C.childNodes.length>0?u=C.childNodes[0]:u=C,S instanceof HTMLElement?l=S.innerHTML.length:l=0}else m.startContainer===u?(o=g.endContainer,l=g.endOffset,d=m.startOffset):(o=m.startContainer,l=m.endOffset,d=g.startOffset)}else o=e.anchorNode,l=e.anchorOffset,u=e.focusNode,d=e.focusOffset;tM&&ARe(o)||ag?f=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:f=e.isCollapsed}else o=e.startContainer,l=e.startOffset,u=e.endContainer,d=e.endOffset,f=e.collapsed;if(o==null||u==null||l==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));ag&&(r=u.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&d===u.textContent.length&&d--;var w=pn.toSlatePoint(t,[o,l],{exactMatch:s,suppressThrow:a});if(!w)return null;var E=PH(o,u)||o===u&&d<l,T=f?w:pn.toSlatePoint(t,[u,d],{exactMatch:s,suppressThrow:a,searchDirection:E?"forward":"backward"});if(!T)return null;var _={anchor:w,focus:T};return Be.isExpanded(_)&&Be.isForward(_)&&xl(u)&&Q.void(t,{at:_.focus,mode:"highest"})&&(_=Q.unhangRange(t,_,{voids:!0})),_}};function HRe(t,e){var{path:n,diff:r}=e;if(!Q.hasPath(t,n))return!1;var s=pt.get(t,n);if(!mt.isText(s))return!1;if(r.start!==s.text.length||r.text.length===0)return s.text.slice(r.start,r.start+r.text.length)===r.text;var a=be.next(n);if(!Q.hasPath(t,a))return!1;var i=pt.get(t,a);return mt.isText(i)&&i.text.startsWith(r.text)}function Zne(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((s,a)=>s.slice(0,a.start)+a.text+s.slice(a.end),t)}function VRe(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return n}function qRe(t,e,n){for(var r=Math.min(t.length,e.length,n),s=0;s<r;s++)if(t.charAt(t.length-s-1)!==e.charAt(e.length-s-1))return s;return r}function ere(t,e){var{start:n,end:r,text:s}=e,a=t.slice(n,r),i=VRe(a,s),o=Math.min(a.length-i,s.length-i),l=qRe(a,s,o),u={start:n+i,end:r-l,text:s.slice(i,s.length-l)};return u.start===u.end&&u.text.length===0?null:u}function GRe(t,e,n){var r=Math.min(e.start,n.start),s=Math.max(0,Math.min(e.start+e.text.length,n.end)-n.start),a=Zne(t,e,n),i=Math.max(n.start+n.text.length,e.start+e.text.length+(e.start+e.text.length>n.start?n.text.length:0)-s),o=a.slice(r,i),l=Math.max(e.end,n.end-e.text.length+(e.end-e.start));return ere(t,{start:r,end:l,text:o})}function WRe(t){var{path:e,diff:n}=t;return{anchor:{path:e,offset:n.start},focus:{path:e,offset:n.end}}}function xD(t,e){var{path:n,offset:r}=e;if(!Q.hasPath(t,n))return null;var s=pt.get(t,n);if(!mt.isText(s))return null;var a=Q.above(t,{match:o=>jt.isElement(o)&&Q.isBlock(t,o),at:n});if(!a)return null;for(;r>s.text.length;){var i=Q.next(t,{at:n,match:mt.isText});if(!i||!be.isDescendant(i[1],a[1]))return null;r-=s.text.length,s=i[0],n=i[1]}return{path:n,offset:r}}function LH(t,e){var n=xD(t,e.anchor);if(!n)return null;if(Be.isCollapsed(e))return{anchor:n,focus:n};var r=xD(t,e.focus);return r?{anchor:n,focus:r}:null}function bD(t,e,n){var r=Qi.get(t),s=r==null?void 0:r.find(d=>{var{path:f}=d;return be.equals(f,e.path)});if(!s||e.offset<=s.diff.start)return Qn.transform(e,n,{affinity:"backward"});var{diff:a}=s;if(e.offset<=a.start+a.text.length){var i={path:e.path,offset:a.start},o=Qn.transform(i,n,{affinity:"backward"});return o?{path:o.path,offset:o.offset+e.offset-a.start}:null}var l={path:e.path,offset:e.offset-a.text.length+a.end-a.start},u=Qn.transform(l,n,{affinity:"backward"});return u?n.type==="split_node"&&be.equals(n.path,e.path)&&l.offset<n.position&&a.start<n.position?u:{path:u.path,offset:u.offset+a.text.length-a.end+a.start}:null}function zH(t,e,n){var r=bD(t,e.anchor,n);if(!r)return null;if(Be.isCollapsed(e))return{anchor:r,focus:r};var s=bD(t,e.focus,n);return s?{anchor:r,focus:s}:null}function KRe(t,e){var{path:n,diff:r,id:s}=t;switch(e.type){case"insert_text":return!be.equals(e.path,n)||e.offset>=r.end?t:e.offset<=r.start?{diff:{start:e.text.length+r.start,end:e.text.length+r.end,text:r.text},id:s,path:n}:{diff:{start:r.start,end:r.end+e.text.length,text:r.text},id:s,path:n};case"remove_text":return!be.equals(e.path,n)||e.offset>=r.end?t:e.offset+e.text.length<=r.start?{diff:{start:r.start-e.text.length,end:r.end-e.text.length,text:r.text},id:s,path:n}:{diff:{start:r.start,end:r.end-e.text.length,text:r.text},id:s,path:n};case"split_node":return!be.equals(e.path,n)||e.position>=r.end?{diff:r,id:s,path:be.transform(n,e,{affinity:"backward"})}:e.position>r.start?{diff:{start:r.start,end:Math.min(e.position,r.end),text:r.text},id:s,path:n}:{diff:{start:r.start-e.position,end:r.end-e.position,text:r.text},id:s,path:be.transform(n,e,{affinity:"forward"})};case"merge_node":return be.equals(e.path,n)?{diff:{start:r.start+e.position,end:r.end+e.position,text:r.text},id:s,path:be.transform(n,e)}:{diff:r,id:s,path:be.transform(n,e)}}var a=be.transform(n,e);return a?{diff:r,path:a,id:s}:null}var $H=(t,e)=>{var n=(e.top+e.bottom)/2;return t.top<=n&&t.bottom>=n},UH=(t,e,n)=>{var r=pn.toDOMRange(t,e).getBoundingClientRect(),s=pn.toDOMRange(t,n).getBoundingClientRect();return $H(r,s)&&$H(s,r)},YRe=(t,e)=>{var n=Q.range(t,Be.end(e)),r=Array.from(Q.positions(t,{at:e})),s=0,a=r.length,i=Math.floor(a/2);if(UH(t,Q.range(t,r[s]),n))return Q.range(t,r[s],n);if(r.length<2)return Q.range(t,r[r.length-1],n);for(;i!==r.length&&i!==s;)UH(t,Q.range(t,r[i]),n)?a=i:s=i,i=Math.floor((s+a)/2);return Q.range(t,r[s],n)};function HH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function VH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HH(Object(n),!0).forEach(function(r){nM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var XRe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e,{apply:s,onChange:a,deleteBackward:i,addMark:o,removeMark:l}=r;return Lk.set(r,new WeakMap),r.addMark=(u,d)=>{var f,m;(f=rM.get(r))===null||f===void 0||f(),!tc.get(r)&&(m=Qi.get(r))!==null&&m!==void 0&&m.length&&tc.set(r,null),bd.delete(r),o(u,d)},r.removeMark=u=>{var d;!tc.get(r)&&(d=Qi.get(r))!==null&&d!==void 0&&d.length&&tc.set(r,null),bd.delete(r),l(u)},r.deleteBackward=u=>{if(u!=="line")return i(u);if(r.selection&&Be.isCollapsed(r.selection)){var d=Q.above(r,{match:x=>jt.isElement(x)&&Q.isBlock(r,x),at:r.selection});if(d){var[,f]=d,m=Q.range(r,f,r.selection.anchor),g=YRe(r,m);Be.isCollapsed(g)||rt.delete(r,{at:g})}}},r.apply=u=>{var d=[],f=[],m=Qi.get(r);if(m!=null&&m.length){var g=m.map(H=>KRe(H,u)).filter(Boolean);Qi.set(r,g)}var x=md.get(r);x&&md.set(r,zH(r,x,u));var b=Hh.get(r);if(b!=null&&b.at){var C=Qn.isPoint(b==null?void 0:b.at)?bD(r,b.at,u):zH(r,b.at,u);Hh.set(r,C?VH(VH({},b),{},{at:C}):null)}switch(u.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...Rp(r,u.path));break}case"set_selection":{var S;(S=$x.get(r))===null||S===void 0||S.unref(),$x.delete(r);break}case"insert_node":case"remove_node":{d.push(...Rp(r,be.parent(u.path)));break}case"merge_node":{var w=be.previous(u.path);d.push(...Rp(r,w));break}case"move_node":{var E=be.common(be.parent(u.path),be.parent(u.newPath));d.push(...Rp(r,E));var T;be.isBefore(u.path,u.newPath)?(d.push(...Rp(r,be.parent(u.path))),T=u.newPath):(d.push(...Rp(r,be.parent(u.newPath))),T=u.path);var _=pt.get(e,be.parent(T)),A=pn.findKey(r,_),j=Q.pathRef(r,be.parent(T));f.push([j,A]);break}}switch(s(u),u.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":fg.set(r,!0)}for(var[D,z]of d){var[F]=Q.node(r,D);j4.set(F,z)}for(var[R,L]of f){if(R.current){var[O]=Q.node(r,R.current);j4.set(O,L)}R.unref()}},r.setFragmentData=u=>{var{selection:d}=r;if(d){var[f,m]=Be.edges(d),g=Q.void(r,{at:f.path}),x=Q.void(r,{at:m.path});if(!(Be.isCollapsed(d)&&!g)){var b=pn.toDOMRange(r,d),C=b.cloneContents(),S=C.childNodes[0];if(C.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(S=F)}),x){var[w]=x,E=b.cloneRange(),T=pn.toDOMNode(r,w);E.setEndAfter(T),C=E.cloneContents()}if(g&&(S=C.querySelector("[data-slate-spacer]")),Array.from(C.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{var R=F.getAttribute("data-slate-zero-width")==="n";F.textContent=R?`
`:""}),qne(S)){var _=S.ownerDocument.createElement("span");_.style.whiteSpace="pre",_.appendChild(S),C.appendChild(_),S=_}var A=r.getFragment(),j=JSON.stringify(A),D=window.btoa(encodeURIComponent(j));S.setAttribute("data-slate-fragment",D),u.setData("application/".concat(n),D);var z=C.ownerDocument.createElement("div");return z.appendChild(C),z.setAttribute("hidden","true"),C.ownerDocument.body.appendChild(z),u.setData("text/html",z.innerHTML),u.setData("text/plain",Wne(z)),C.ownerDocument.body.removeChild(z),u}}},r.insertData=u=>{r.insertFragmentData(u)||r.insertTextData(u)},r.insertFragmentData=u=>{var d=u.getData("application/".concat(n))||DRe(u);if(d){var f=decodeURIComponent(window.atob(d)),m=JSON.parse(f);return r.insertFragment(m),!0}return!1},r.insertTextData=u=>{var d=u.getData("text/plain");if(d){var f=d.split(/\r\n|\r|\n/),m=!1;for(var g of f)m&&rt.splitNodes(r,{always:!0}),r.insertText(g),m=!0;return!0}return!1},r.onChange=u=>{var d=yD.get(r);d&&d(u),a(u)},r},Rp=(t,e)=>{var n=[];for(var[r,s]of Q.levels(t,{at:e})){var a=pn.findKey(t,r);n.push([s,a])}return n},JRe=3,QRe={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},ZRe={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},eMe={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},rs=t=>{var e=QRe[t],n=ZRe[t],r=eMe[t],s=e&&OA.isHotkey(e),a=n&&OA.isHotkey(n),i=r&&OA.isHotkey(r);return o=>!!(s&&s(o)||BH&&a&&a(o)||!BH&&i&&i(o))},hs={isBold:rs("bold"),isCompose:rs("compose"),isMoveBackward:rs("moveBackward"),isMoveForward:rs("moveForward"),isDeleteBackward:rs("deleteBackward"),isDeleteForward:rs("deleteForward"),isDeleteLineBackward:rs("deleteLineBackward"),isDeleteLineForward:rs("deleteLineForward"),isDeleteWordBackward:rs("deleteWordBackward"),isDeleteWordForward:rs("deleteWordForward"),isExtendBackward:rs("extendBackward"),isExtendForward:rs("extendForward"),isExtendLineBackward:rs("extendLineBackward"),isExtendLineForward:rs("extendLineForward"),isItalic:rs("italic"),isMoveLineBackward:rs("moveLineBackward"),isMoveLineForward:rs("moveLineForward"),isMoveWordBackward:rs("moveWordBackward"),isMoveWordForward:rs("moveWordForward"),isRedo:rs("redo"),isSoftBreak:rs("insertSoftBreak"),isSplitBlock:rs("splitBlock"),isTransposeCharacter:rs("transposeCharacter"),isUndo:rs("undo")};function tMe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function qH(t,e){if(t==null)return{};var n=tMe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var nMe=["anchor","focus"],rMe=["anchor","focus"];function GH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function WH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GH(Object(n),!0).forEach(function(r){nM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var sMe=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(n=>e.hasOwnProperty(n)&&t[n]===e[n]),tre=(t,e)=>{var n=qH(t,nMe),r=qH(e,rMe);return t[Bg]===e[Bg]&&sMe(n,r)},sM=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],s=e[n];if(!Be.equals(r,s)||!tre(r,s))return!1}return!0},nre=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],s=e[n];if(r.anchor.offset!==s.anchor.offset||r.focus.offset!==s.focus.offset||!tre(r,s))return!1}return!0},aMe=(t,e,n)=>{var r=Array.from(e.children,()=>[]);if(n.length===0)return r;var s=pn.findPath(t,e),a=s.length,i=Q.range(t,s),o=new Array(e.children.length),l=E=>{var T=o[E];if(T)return T;var _=Q.range(t,[...s,E]);return o[E]=_,_};for(var u of n){var d=Be.intersection(i,u);if(d)for(var[f,m]=Be.edges(d),g=f.path[a],x=m.path[a],b=g;b<=x;b++){var C=r[b];if(C){var S=l(b),w=Be.intersection(S,u);w&&C.push(WH(WH({},u),w))}}}return r},qm=[],iMe=function(){return qm.some(function(t){return t.activeTargets.length>0})},oMe=function(){return qm.some(function(t){return t.skippedTargets.length>0})},KH="ResizeObserver loop completed with undelivered notifications.",lMe=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:KH}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=KH),window.dispatchEvent(t)},B1;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(B1||(B1={}));var Gm=function(t){return Object.freeze(t)},cMe=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Gm(this)}return t})(),rre=(function(){function t(e,n,r,s){return this.x=e,this.y=n,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Gm(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,s=e.top,a=e.right,i=e.bottom,o=e.left,l=e.width,u=e.height;return{x:n,y:r,top:s,right:a,bottom:i,left:o,width:l,height:u}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),aM=function(t){return t instanceof SVGElement&&"getBBox"in t},sre=function(t){if(aM(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var s=t,a=s.offsetWidth,i=s.offsetHeight;return!(a||i||t.getClientRects().length)},YH=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},uMe=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ux=typeof window<"u"?window:{},wC=new WeakMap,XH=/auto|scroll/,dMe=/^tb|vertical/,hMe=/msie|trident/i.test(Ux.navigator&&Ux.navigator.userAgent),zc=function(t){return parseFloat(t||"0")},mg=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new cMe((n?e:t)||0,(n?t:e)||0)},JH=Gm({devicePixelContentBoxSize:mg(),borderBoxSize:mg(),contentBoxSize:mg(),contentRect:new rre(0,0,0,0)}),are=function(t,e){if(e===void 0&&(e=!1),wC.has(t)&&!e)return wC.get(t);if(sre(t))return wC.set(t,JH),JH;var n=getComputedStyle(t),r=aM(t)&&t.ownerSVGElement&&t.getBBox(),s=!hMe&&n.boxSizing==="border-box",a=dMe.test(n.writingMode||""),i=!r&&XH.test(n.overflowY||""),o=!r&&XH.test(n.overflowX||""),l=r?0:zc(n.paddingTop),u=r?0:zc(n.paddingRight),d=r?0:zc(n.paddingBottom),f=r?0:zc(n.paddingLeft),m=r?0:zc(n.borderTopWidth),g=r?0:zc(n.borderRightWidth),x=r?0:zc(n.borderBottomWidth),b=r?0:zc(n.borderLeftWidth),C=f+u,S=l+d,w=b+g,E=m+x,T=o?t.offsetHeight-E-t.clientHeight:0,_=i?t.offsetWidth-w-t.clientWidth:0,A=s?C+w:0,j=s?S+E:0,D=r?r.width:zc(n.width)-A-_,z=r?r.height:zc(n.height)-j-T,F=D+C+_+w,R=z+S+T+E,L=Gm({devicePixelContentBoxSize:mg(Math.round(D*devicePixelRatio),Math.round(z*devicePixelRatio),a),borderBoxSize:mg(F,R,a),contentBoxSize:mg(D,z,a),contentRect:new rre(f,l,D,z)});return wC.set(t,L),L},ire=function(t,e,n){var r=are(t,n),s=r.borderBoxSize,a=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(e){case B1.DEVICE_PIXEL_CONTENT_BOX:return i;case B1.BORDER_BOX:return s;default:return a}},fMe=(function(){function t(e){var n=are(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Gm([n.borderBoxSize]),this.contentBoxSize=Gm([n.contentBoxSize]),this.devicePixelContentBoxSize=Gm([n.devicePixelContentBoxSize])}return t})(),ore=function(t){if(sre(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},mMe=function(){var t=1/0,e=[];qm.forEach(function(i){if(i.activeTargets.length!==0){var o=[];i.activeTargets.forEach(function(u){var d=new fMe(u.target),f=ore(u.target);o.push(d),u.lastReportedSize=ire(u.target,u.observedBox),f<t&&(t=f)}),e.push(function(){i.callback.call(i.observer,o,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var s=r[n];s()}return t},QH=function(t){qm.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(ore(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},pMe=function(){var t=0;for(QH(t);iMe();)t=mMe(),QH(t);return oMe()&&lMe(),t>0},BA,lre=[],gMe=function(){return lre.splice(0).forEach(function(t){return t()})},vMe=function(t){if(!BA){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return gMe()}).observe(n,r),BA=function(){n.textContent="".concat(e?e--:e++)}}lre.push(t),BA()},yMe=function(t){vMe(function(){requestAnimationFrame(t)})},_S=0,xMe=function(){return!!_S},bMe=250,wMe={attributes:!0,characterData:!0,childList:!0,subtree:!0},ZH=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],eV=function(t){return t===void 0&&(t=0),Date.now()+t},LA=!1,CMe=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=bMe),!LA){LA=!0;var r=eV(e);yMe(function(){var s=!1;try{s=pMe()}finally{if(LA=!1,e=r-eV(),!xMe())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,wMe)};document.body?n():Ux.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ZH.forEach(function(n){return Ux.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ZH.forEach(function(n){return Ux.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),wD=new CMe,tV=function(t){!_S&&t>0&&wD.start(),_S+=t,!_S&&wD.stop()},SMe=function(t){return!aM(t)&&!uMe(t)&&getComputedStyle(t).display==="inline"},kMe=(function(){function t(e,n){this.target=e,this.observedBox=n||B1.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=ire(this.target,this.observedBox,!0);return SMe(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),EMe=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),CC=new WeakMap,nV=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},SC=(function(){function t(){}return t.connect=function(e,n){var r=new EMe(e,n);CC.set(e,r)},t.observe=function(e,n,r){var s=CC.get(e),a=s.observationTargets.length===0;nV(s.observationTargets,n)<0&&(a&&qm.push(s),s.observationTargets.push(new kMe(n,r&&r.box)),tV(1),wD.schedule())},t.unobserve=function(e,n){var r=CC.get(e),s=nV(r.observationTargets,n),a=r.observationTargets.length===1;s>=0&&(a&&qm.splice(qm.indexOf(r),1),r.observationTargets.splice(s,1),tV(-1))},t.disconnect=function(e){var n=this,r=CC.get(e);r.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t})(),_Me=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");SC.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!YH(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");SC.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!YH(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");SC.unobserve(this,e)},t.prototype.disconnect=function(){SC.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function TMe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function D4(t,e){if(t==null)return{};var n=TMe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L1(t){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L1(t)}function AMe(t,e){if(L1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(L1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NMe(t){var e=AMe(t,"string");return L1(e)==="symbol"?e:String(e)}function as(t,e,n){return e=NMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var iM=y.createContext(null),Tu=()=>{var t=y.useContext(iM);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},dt=pn;function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jMe=25,DMe=200,RMe=function(){},MMe=t=>(t==null?void 0:t.constructor.name)==="DataTransfer";function IMe(t){var{editor:e,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=t,s=!1,a=null,i=null,o=null,l=0,u=!1,d=()=>{var L=md.get(e);if(md.delete(e),L){var{selection:O}=e,H=LH(e,L);H&&(!O||!Be.equals(H,O))&&rt.select(e,H)}},f=()=>{var L=Hh.get(e);if(Hh.delete(e),!!L){if(L.at){var O=Qn.isPoint(L.at)?xD(e,L.at):LH(e,L.at);if(!O)return;var H=Q.range(e,O);(!e.selection||!Be.equals(e.selection,H))&&rt.select(e,O)}L.run()}},m=()=>{if(i&&(clearTimeout(i),i=null),o&&(clearTimeout(o),o=null),!T()&&!E()){d();return}s||(s=!0,setTimeout(()=>s=!1)),E()&&(s="action");var L=e.selection&&Q.rangeRef(e,e.selection,{affinity:"forward"});bd.set(e,e.marks),RMe("flush",Hh.get(e),Qi.get(e));for(var O=T(),H;H=(P=Qi.get(e))===null||P===void 0?void 0:P[0];){var P,I,U=tc.get(e);U!==void 0&&(tc.delete(e),e.marks=U),U&&u===!1&&(u=null);var W=WRe(H);(!e.selection||!Be.equals(e.selection,W))&&rt.select(e,W),H.diff.text?Q.insertText(e,H.diff.text):Q.deleteFragment(e),Qi.set(e,(I=Qi.get(e))===null||I===void 0?void 0:I.filter(Z=>{var{id:le}=Z;return le!==H.id})),HRe(e,H)||(O=!1,Hh.delete(e),bd.delete(e),s="action",md.delete(e),n.cancel(),r.cancel(),L==null||L.unref())}var Y=L==null?void 0:L.unref();if(Y&&!md.get(e)&&(!e.selection||!Be.equals(Y,e.selection))&&rt.select(e,Y),E()){f();return}O&&n(),n.flush(),r.flush(),d();var B=bd.get(e);bd.delete(e),B!==void 0&&(e.marks=B,e.onChange())},g=L=>{a&&clearTimeout(a),a=setTimeout(()=>{Om.set(e,!1),m()},jMe)},x=L=>{Om.set(e,!0),a&&(clearTimeout(a),a=null)},b=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,H=gD.get(e);if(H){if(T()||O){H.style.display="none";return}H.style.removeProperty("display")}},C=(L,O)=>{var H,P=(H=Qi.get(e))!==null&&H!==void 0?H:[];Qi.set(e,P);var I=pt.leaf(e,L),U=P.findIndex(B=>be.equals(B.path,L));if(U<0){var W=ere(I.text,O);W&&P.push({path:L,diff:O,id:l++}),b();return}var Y=GRe(I.text,P[U].diff,O);if(!Y){P.splice(U,1),b();return}P[U]=kC(kC({},P[U]),{},{diff:Y})},S=function(O){var{at:H}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};u=!1,md.delete(e),n.cancel(),r.cancel(),E()&&m(),Hh.set(e,{at:H,run:O}),o=setTimeout(m)},w=L=>{var O;if(i&&(clearTimeout(i),i=null),!fg.get(e)){var{inputType:H}=L,P=null,I=L.dataTransfer||L.data||void 0;u!==!1&&H!=="insertText"&&H!=="insertCompositionText"&&(u=!1);var[U]=L.getTargetRanges();U&&(P=dt.toSlateRange(e,U,{exactMatch:!1,suppressThrow:!0}));var W=dt.getWindow(e),Y=W.getSelection();if(!P&&Y&&(U=Y,P=dt.toSlateRange(e,Y,{exactMatch:!1,suppressThrow:!0})),P=(O=P)!==null&&O!==void 0?O:e.selection,!!P){var B=!0;if(H.startsWith("delete")){var Z=H.endsWith("Backward")?"backward":"forward",[le,G]=Be.edges(P),[K,te]=Q.leaf(e,le.path);if(Be.isExpanded(P)&&K.text.length===le.offset&&G.offset===0){var ie=Q.next(e,{at:le.path,match:mt.isText});ie&&be.equals(ie[1],G.path)&&(Z==="backward"?(P={anchor:G,focus:G},le=G,[K,te]=ie):(P={anchor:le,focus:le},G=le))}var de={text:"",start:le.offset,end:G.offset},fe=Qi.get(e),se=fe==null?void 0:fe.find(Ae=>be.equals(Ae.path,te)),ce=se?[se.diff,de]:[de],ue=Zne(K.text,...ce);if(ue.length===0&&(B=!1),Be.isExpanded(P)){if(B&&be.equals(P.anchor.path,P.focus.path)){var oe={path:P.anchor.path,offset:le.offset},Ne=Q.range(e,oe,oe);return j(Ne),C(P.anchor.path,{text:"",end:G.offset,start:le.offset})}return S(()=>Q.deleteFragment(e,{direction:Z}),{at:P})}}switch(H){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return S(()=>Q.deleteFragment(e),{at:P});case"deleteContent":case"deleteContentForward":{var{anchor:ve}=P;if(B&&Be.isCollapsed(P)){var He=pt.leaf(e,ve.path);if(ve.offset<He.text.length)return C(ve.path,{text:"",start:ve.offset,end:ve.offset+1})}return S(()=>Q.deleteForward(e),{at:P})}case"deleteContentBackward":{var nt,{anchor:Me}=P,$e=pD(U)?U.isCollapsed:!!((nt=U)!==null&&nt!==void 0&&nt.collapsed);return B&&$e&&Be.isCollapsed(P)&&Me.offset>0?C(Me.path,{text:"",start:Me.offset-1,end:Me.offset}):S(()=>Q.deleteBackward(e),{at:P})}case"deleteEntireSoftLine":return S(()=>{Q.deleteBackward(e,{unit:"line"}),Q.deleteForward(e,{unit:"line"})},{at:P});case"deleteHardLineBackward":return S(()=>Q.deleteBackward(e,{unit:"block"}),{at:P});case"deleteSoftLineBackward":return S(()=>Q.deleteBackward(e,{unit:"line"}),{at:P});case"deleteHardLineForward":return S(()=>Q.deleteForward(e,{unit:"block"}),{at:P});case"deleteSoftLineForward":return S(()=>Q.deleteForward(e,{unit:"line"}),{at:P});case"deleteWordBackward":return S(()=>Q.deleteBackward(e,{unit:"word"}),{at:P});case"deleteWordForward":return S(()=>Q.deleteForward(e,{unit:"word"}),{at:P});case"insertLineBreak":return S(()=>Q.insertSoftBreak(e),{at:P});case"insertParagraph":return S(()=>Q.insertBreak(e),{at:P});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(MMe(I))return S(()=>dt.insertData(e,I),{at:P});var Le=I??"";if(tc.get(e)&&(Le=Le.replace("\uFEFF","")),H==="insertText"&&/.*\n.*\n$/.test(Le)&&(Le=Le.slice(0,-1)),Le.includes(`
`))return S(()=>{var Ae=Le.split(`
`);Ae.forEach((Fe,Qe)=>{Fe&&Q.insertText(e,Fe),Qe!==Ae.length-1&&Q.insertSoftBreak(e)})},{at:P});if(be.equals(P.anchor.path,P.focus.path)){var[ae,pe]=Be.edges(P),_e={start:ae.offset,end:pe.offset,text:Le};if(Le&&u&&H==="insertCompositionText"){var Ue=u.start+u.text.search(/\S|$/),Je=_e.start+_e.text.search(/\S|$/);Je===Ue+1&&_e.end===u.start+u.text.length?(_e.start-=1,u=null,F()):u=!1}else H==="insertText"?u===null?u=_e:u&&Be.isCollapsed(P)&&u.end+u.text.length===ae.offset?u=kC(kC({},u),{},{text:u.text+Le}):u=!1:u=!1;if(B){var qe=e.selection;if(C(ae.path,_e),qe){var xe={path:ae.path,offset:ae.offset+Le.length};S(()=>{rt.select(e,{anchor:xe,focus:xe})},{at:xe})}return}}return S(()=>Q.insertText(e,Le),{at:P})}}}}},E=()=>!!Hh.get(e),T=()=>{var L;return!!((L=Qi.get(e))!==null&&L!==void 0&&L.length)},_=()=>E()||T(),A=()=>s,j=L=>{md.set(e,L),i&&(clearTimeout(i),i=null);var{selection:O}=e;if(L){var H=!O||!be.equals(O.anchor.path,L.anchor.path),P=!O||!be.equals(O.anchor.path.slice(0,-1),L.anchor.path.slice(0,-1));(H&&u||P)&&(u=!1),(H||T())&&(i=setTimeout(m,DMe))}},D=()=>{(E()||!T())&&m()},z=L=>{T()||(b(!0),setTimeout(b))},F=()=>{E()||(o=setTimeout(m))},R=L=>{if(!(T()||E())&&L.some(H=>eM(e,H,L))){var O;(O=Jne.get(e))===null||O===void 0||O()}};return{flush:m,scheduleFlush:F,hasPendingDiffs:T,hasPendingAction:E,hasPendingChanges:_,isFlushing:A,handleUserSelect:j,handleCompositionEnd:g,handleCompositionStart:x,handleDOMBeforeInput:w,handleKeyDown:z,handleDomMutations:R,handleInput:D}}function OMe(){var t=y.useRef(!1);return y.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var Ld=ES?y.useLayoutEffect:y.useEffect;function PMe(t,e,n){var[r]=y.useState(()=>new MutationObserver(e));Ld(()=>{r.takeRecords()}),y.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(t.current,n),()=>r.disconnect()},[r,t,n])}var FMe=["node"];function sV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function BMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var LMe={subtree:!0,childList:!0,characterData:!0},zMe=li?t=>{var{node:e}=t,n=D4(t,FMe);if(!li)return null;var r=Tu(),s=OMe(),[a]=y.useState(()=>IMe(BMe({editor:r},n)));return PMe(e,a.handleDomMutations,LMe),rM.set(r,a.scheduleFlush),s&&a.flush(),a}:()=>null;function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $Me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var UMe=t=>{var{isLast:e,leaf:n,parent:r,text:s}=t,a=Tu(),i=dt.findPath(a,s),o=be.parent(i),l=!!n[Qne];return a.isVoid(r)?Ce.createElement(zA,{length:pt.string(r).length}):n.text===""&&r.children[r.children.length-1]===s&&!a.isInline(r)&&Q.string(a,o)===""?Ce.createElement(zA,{isLineBreak:!0,isMarkPlaceholder:l}):n.text===""?Ce.createElement(zA,{isMarkPlaceholder:l}):e&&n.text.slice(-1)===`
`?Ce.createElement(iV,{isTrailing:!0,text:n.text}):Ce.createElement(iV,{text:n.text})},iV=t=>{var{text:e,isTrailing:n=!1}=t,r=y.useRef(null),s=()=>"".concat(e??"").concat(n?`
`:""),[a]=y.useState(s);return Ld(()=>{var i=s();r.current&&r.current.textContent!==i&&(r.current.textContent=i)}),Ce.createElement(HMe,{ref:r},a)},HMe=y.memo(y.forwardRef((t,e)=>Ce.createElement("span",{"data-slate-string":!0,ref:e},t.children))),zA=t=>{var{length:e=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=t,s={"data-slate-zero-width":n?"n":"z","data-slate-length":e};return r&&(s["data-slate-mark-placeholder"]=!0),Ce.createElement("span",$Me({},s),!li||!n?"\uFEFF":null,n?Ce.createElement("br",null):null)};function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var VMe=li?300:0;function qMe(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function lV(t){t.current&&(clearTimeout(t.current),t.current=null)}var GMe=t=>Ce.createElement(YMe,cre({},t)),WMe=t=>{var{leaf:e,isLast:n,text:r,parent:s,renderPlaceholder:a,renderLeaf:i=GMe,leafPosition:o}=t,l=Tu(),u=y.useRef(null),d=y.useRef(null),[f,m]=y.useState(!1),g=y.useRef(null),x=y.useCallback(E=>{if(qMe(u,E==null),E==null){var T;gD.delete(l),(T=e.onPlaceholderResize)===null||T===void 0||T.call(e,null)}else{if(gD.set(l,E),!u.current){var _=window.ResizeObserver||_Me;u.current=new _(()=>{var A;(A=e.onPlaceholderResize)===null||A===void 0||A.call(e,E)})}u.current.observe(E),d.current=E}},[d,e,l]),b=Ce.createElement(UMe,{isLast:n,leaf:e,parent:s,text:r}),C=!!e[Bg];if(y.useEffect(()=>(C?g.current||(g.current=setTimeout(()=>{m(!0),g.current=null},VMe)):(lV(g),m(!1)),()=>lV(g)),[C,m]),C&&f){var S={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Am?"inherit":void 0},contentEditable:!1,ref:x}};b=Ce.createElement(Ce.Fragment,null,b,a(S))}var w={"data-slate-leaf":!0};return i({attributes:w,children:b,leaf:e,text:r,leafPosition:o})},KMe=Ce.memo(WMe,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&mt.equals(e.leaf,t.leaf)&&e.leaf[Bg]===t.leaf[Bg]),YMe=t=>{var{attributes:e,children:n}=t;return Ce.createElement("span",cre({},e),n)};function XMe(t,e){var[,n]=y.useReducer(u=>u+1,0),r=y.useRef(),s=y.useRef(()=>null),a=y.useRef(null),i;try{if(t!==s.current||r.current){var o=t();e(a.current,o)?i=a.current:i=o}else i=a.current}catch(u){throw r.current&&JMe(u)&&(u.message+=`
The error may be correlated with this previous error:
`.concat(r.current.stack,`

`)),u}s.current=t,a.current=i,r.current=void 0;var l=y.useCallback(()=>{try{var u=s.current();if(e(a.current,u))return;a.current=u}catch(d){d instanceof Error?r.current=d:r.current=new Error(String(d))}n()},[]);return[i,l]}function JMe(t){return t instanceof Error}var ure=y.createContext({}),dre=(t,e)=>{var n=Tu(),{decorate:r,addEventListener:s}=y.useContext(ure),a=()=>{var u=dt.findPath(n,t);return r([t,u])},i=mt.isText(t)?nre:sM,[o,l]=XMe(a,i);return Ld(()=>{var u=s(l);return l(),u},[s,l]),y.useMemo(()=>[...o,...e],[o,e])},QMe=t=>{var e=y.useRef(new Set),n=y.useRef(t);Ld(()=>{n.current=t,e.current.forEach(a=>a())},[t]);var r=y.useCallback(a=>n.current(a),[]),s=y.useCallback(a=>(e.current.add(a),()=>{e.current.delete(a)}),[]);return y.useMemo(()=>({decorate:r,addEventListener:s}),[r,s])};function cV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ZMe=t=>Ce.createElement(tIe,hre({},t)),eIe=t=>{for(var{decorations:e,isLast:n,parent:r,renderPlaceholder:s,renderLeaf:a,renderText:i=ZMe,text:o}=t,l=Tu(),u=y.useRef(null),d=dre(o,e),f=mt.decorations(o,d),m=dt.findKey(l,o),g=[],x=0;x<f.length;x++){var{leaf:b,position:C}=f[x];g.push(Ce.createElement(KMe,{isLast:n&&x===f.length-1,key:"".concat(m.id,"-").concat(x),renderPlaceholder:s,leaf:b,leafPosition:C,text:o,parent:r,renderLeaf:a}))}var S=y.useCallback(E=>{var T=Lk.get(l);E?(T==null||T.set(m,E),Vm.set(o,E),F1.set(E,o)):(T==null||T.delete(m),Vm.delete(o),u.current&&F1.delete(u.current)),u.current=E},[u,l,m,o]),w={"data-slate-node":"text",ref:S};return i({text:o,children:g,attributes:w})},fre=Ce.memo(eIe,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&nre(e.decorations,t.decorations)),tIe=t=>{var{attributes:e,children:n}=t;return Ce.createElement("span",hre({},e),n)};function uV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function CD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var nIe=t=>Ce.createElement(aIe,CD({},t)),rIe=t=>{var{decorations:e,element:n,renderElement:r=nIe,renderChunk:s,renderPlaceholder:a,renderLeaf:i,renderText:o}=t,l=Tu(),u=pIe(),d=l.isInline(n),f=dre(n,e),m=dt.findKey(l,n),g=y.useCallback(T=>{var _=Lk.get(l);T?(_==null||_.set(m,T),Vm.set(n,T),F1.set(T,n)):(_==null||_.delete(m),Vm.delete(n))},[l,m,n]),x=gre({decorations:f,node:n,renderElement:r,renderChunk:s,renderPlaceholder:a,renderLeaf:i,renderText:o}),b={"data-slate-node":"element",ref:g};if(d&&(b["data-slate-inline"]=!0),!d&&Q.hasInlines(l,n)){var C=pt.string(n),S=jne(C);S==="rtl"&&(b.dir=S)}if(Q.isVoid(l,n)){b["data-slate-void"]=!0,!u&&d&&(b.contentEditable=!1);var w=d?"span":"div",[[E]]=pt.texts(n);x=Ce.createElement(w,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Ce.createElement(fre,{renderPlaceholder:a,decorations:[],isLast:!1,parent:n,text:E})),ig.set(E,0),Lx.set(E,n)}return r({attributes:b,children:x,element:n})},sIe=Ce.memo(rIe,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderChunk===e.renderChunk&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&sM(t.decorations,e.decorations)),aIe=t=>{var{attributes:e,children:n,element:r}=t,s=Tu(),a=s.isInline(r)?"span":"div";return Ce.createElement(a,CD(CD({},e),{},{style:{position:"relative"}}),n)};class iIe{constructor(e,n){var{chunkSize:r,debug:s}=n;as(this,"root",void 0),as(this,"chunkSize",void 0),as(this,"debug",void 0),as(this,"reachedEnd",void 0),as(this,"pointerChunk",void 0),as(this,"pointerIndex",void 0),as(this,"pointerIndexStack",void 0),as(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=r,this.debug=s??!1,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(e.length!==0){for(var n=0,r=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var s=this.chunkSize-this.pointerSiblings.length,a=Math.min(s,e.length);if(a>0){var i=e.splice(0,a);this.rawInsertAfter(i,n)}this.exitChunk(),n++}if(e.length!==0){var o=this.savePointer(),l=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var u=this.chunkSize-this.pointerSiblings.length,d=Math.min(u,e.length);if(d>0){var f=e.splice(-d,d);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(f,r),l||(l=this.savePointer())}this.exitChunk(),r++}this.restorePointer(o);var m=Math.max(n,r);this.rawInsertAfter(e,m),l&&this.restorePointer(l),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;e.type==="chunk";e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var n=[],r=e;r.type==="chunk";r=r.parent){var s=r.parent.children.indexOf(r);if(s===-1)return null;n.unshift(s)}return n}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if(e==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:n,node:r}=e,s=n.children.indexOf(r);if(s===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(n);if(!a)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=n,this.pointerIndex=s,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(e){var n;if(((n=this.pointerNode)===null||n===void 0?void 0:n.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;((n=this.pointerNode)===null||n===void 0?void 0:n.type)==="chunk";){var n;this.enterChunk(e)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,n){if(e.length!==0){for(var r=(d,f,m)=>{if(m===1)return d;for(var g=[],x=0;x<this.chunkSize;x++){var b=d.slice(x*m,(x+1)*m);if(b.length===0)break;var C={type:"chunk",key:new Yne,parent:f,children:[]};C.children=r(b,C,m/this.chunkSize),g.push(C)}return g},s=this.pointerSiblings.length+e.length,a=0,i=this.chunkSize;i<s;i*=this.chunkSize)a++;var o=Math.max(a,n),l=Math.pow(this.chunkSize,o),u=r(e,this.pointerChunk,l);this.pointerSiblings.splice(this.pointerIndex+1,0,...u),this.pointerIndex+=u.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=r=>{if(r.type==="chunk"){var{parent:s,children:a}=r;if(!s.children.includes(r))throw new Error("Debug: Chunk ".concat(r.key.id," has an incorrect parent property"));a.forEach(e)}};if(this.root.children.forEach(e),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var n=this.getChunkPath(this.pointerChunk);if(!n)throw new Error("Debug: The pointer chunk is not connected to the root");if(!be.equals(this.pointerIndexStack,n))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(n.join(", "),"]"))}}}class oIe{constructor(e,n){as(this,"editor",void 0),as(this,"children",void 0),as(this,"cachedKeys",void 0),as(this,"pointerIndex",void 0),this.editor=e,this.children=n,this.cachedKeys=new Array(n.length),this.pointerIndex=0}read(e){if(e===1)return[this.children[this.pointerIndex++]];var n=this.remaining(e);return this.pointerIndex+=e,n}remaining(e){return e===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,n){var r=this.children.indexOf(e,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var s=this.pointerIndex;s<this.children.length;s++){var a=this.children[s],i=this.findKey(a,s);if(i===n)return s-this.pointerIndex}return-1}toChunkLeaves(e,n){return e.map((r,s)=>({type:"leaf",node:r,key:this.findKey(r,n+s),index:n+s}))}findKey(e,n){var r=this.cachedKeys[n];if(r)return r;var s=dt.findKey(this.editor,e);return this.cachedKeys[n]=s,s}}var lIe=(t,e)=>{var{chunkTree:n,children:r,chunkSize:s,rerenderChildren:a=[],onInsert:i,onUpdate:o,onIndexChange:l,debug:u}=e;n.modifiedChunks.clear();for(var d=new iIe(n,{chunkSize:s,debug:u}),f=new oIe(t,r),m,g=function(){var S=f.lookAhead(m.node,m.key),w=S>0&&n.movedNodeKeys.has(m.key);if(S===-1||w)return d.remove(),1;var E=f.pointerIndex,T=f.read(S+1),_=T.pop();if(T.length){var A=f.toChunkLeaves(T,E);d.insertBefore(A),T.forEach((D,z)=>{i==null||i(D,E+z)})}var j=f.pointerIndex-1;m.node!==_&&(m.node=_,d.invalidateChunk(),o==null||o(_,j)),m.index!==j&&(m.index=j,l==null||l(_,j)),a.includes(j)&&d.invalidateChunk()};m=d.readLeaf();)g();if(!f.reachedEnd){var x=f.remaining(),b=f.toChunkLeaves(x,f.pointerIndex);d.returnToPreviousLeaf(),d.insertAfter(b),x.forEach((C,S)=>{i==null||i(C,f.pointerIndex+S)})}n.movedNodeKeys.clear()};function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cIe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hV=new WeakMap,mre=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=dt.findKey(e,n),a=hV.get(s);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},hV.set(s,a)),r.reconcile&&lIe(e,cIe({chunkTree:a,children:n.children},r.reconcile)),a},uIe=t=>{var{children:e}=t;return e},pre=t=>{var{root:e,ancestor:n,renderElement:r,renderChunk:s=uIe}=t;return n.children.map(a=>{if(a.type==="chunk"){var i=a.key.id,o=s({highest:n===e,lowest:a.children.some(u=>u.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Ce.createElement(hIe,{root:e,ancestor:a,renderElement:r,renderChunk:s})});return Ce.createElement(y.Fragment,{key:i},o)}var l=a.node;return r(l,a.index,a.key)})},dIe=pre,hIe=Ce.memo(pre,(t,e)=>t.root===e.root&&t.renderElement===e.renderElement&&t.renderChunk===e.renderChunk&&!e.root.modifiedChunks.has(e.ancestor)),fIe=y.createContext(null),gre=t=>{var{decorations:e,node:n,renderElement:r,renderChunk:s,renderPlaceholder:a,renderText:i,renderLeaf:o}=t,l=Tu();fg.set(l,!1);var u=Q.isEditor(n),d=!u&&jt.isElement(n)&&!l.isInline(n),f=d&&Q.hasInlines(l,n),m=f?null:l.getChunkSize(n),g=!!m,{decorationsByChild:x,childrenToRedecorate:b}=mIe(l,n,e);g||n.children.forEach((E,T)=>{ig.set(E,T),Lx.set(E,n)});var C=y.useCallback((E,T,_)=>{var A=_??dt.findKey(l,E);return Ce.createElement(fIe.Provider,{key:"provider-".concat(A.id),value:E},Ce.createElement(sIe,{decorations:x[T],element:E,key:A.id,renderElement:r,renderChunk:s,renderPlaceholder:a,renderLeaf:o,renderText:i}))},[l,x,r,s,a,o,i]),S=(E,T)=>{var _=dt.findKey(l,E);return Ce.createElement(fre,{decorations:x[T],key:_.id,isLast:T===n.children.length-1,parent:n,renderPlaceholder:a,renderLeaf:o,renderText:i,text:E})};if(!g)return n.children.map((E,T)=>mt.isText(E)?S(E,T):C(E,T));var w=mre(l,n,{reconcile:{chunkSize:m,rerenderChildren:b,onInsert:(E,T)=>{ig.set(E,T),Lx.set(E,n)},onUpdate:(E,T)=>{ig.set(E,T),Lx.set(E,n)},onIndexChange:(E,T)=>{ig.set(E,T)}}});return Ce.createElement(dIe,{root:w,ancestor:w,renderElement:C,renderChunk:s})},mIe=(t,e,n)=>{var r=aMe(t,e,n),s=y.useRef(r).current,a=[];s.length=r.length;for(var i=0;i<r.length;i++){var o,l=r[i],u=(o=s[i])!==null&&o!==void 0?o:null;sM(u,l)||(s[i]=l,a.push(i))}return{decorationsByChild:s,childrenToRedecorate:a}},vre=y.createContext(!1),pIe=()=>y.useContext(vre),oM=y.createContext({});function gIe(){var t=y.useRef(new Set),e=y.useRef(new Set),n=y.useCallback(()=>{t.current.forEach(i=>i())},[]),r=y.useCallback(()=>{e.current.forEach(i=>i()),e.current.clear()},[]),s=y.useCallback(function(i){var{deferred:o=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o?()=>e.current.add(i):i;return t.current.add(l),()=>{t.current.delete(l)}},[]),a=y.useMemo(()=>({addEventListener:s,flushDeferred:r}),[s,r]);return{selectorContext:a,onChange:n}}function vIe(){var{flushDeferred:t}=y.useContext(oM);Ld(t)}var yIe=()=>{var{addEventListener:t}=y.useContext(oM),[,e]=y.useReducer(n=>n+1,0);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Ld(()=>t(e),[t]),Tu()};function xIe(){var t=Tu(),e=y.useRef(!1),n=y.useRef(0),r=y.useCallback(()=>{if(!e.current){e.current=!0;var s=dt.getWindow(t);s.cancelAnimationFrame(n.current),n.current=s.requestAnimationFrame(()=>{e.current=!1})}},[t]);return y.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:e,onUserInput:r}}var bIe=(t,e)=>{var n=[],r=()=>{n=[]},s=i=>{if(e.current){var o=i.filter(l=>eM(t,l,i));n.push(...o)}};function a(){n.length>0&&(n.reverse().forEach(i=>{i.type!=="characterData"&&(i.removedNodes.forEach(o=>{i.target.insertBefore(o,i.nextSibling)}),i.addedNodes.forEach(o=>{i.target.removeChild(o)}))}),r())}return{registerMutations:s,restoreDOM:a,clear:r}},wIe={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class yre extends y.Component{constructor(){super(...arguments),as(this,"context",null),as(this,"manager",null),as(this,"mutationObserver",null)}observe(){var e,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(n.current,wIe)}componentDidMount(){var{receivedUserInput:e}=this.props,n=this.context;this.manager=bIe(n,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,n,r,s=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(s!=null&&s.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(s)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}as(yre,"contextType",iM);var CIe=li?yre:t=>{var{children:e}=t;return Ce.createElement(Ce.Fragment,null,e)},SIe=y.createContext(!1),kIe=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],EIe=["text"];function fV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(n),!0).forEach(function(r){as(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _Ie=t=>Ce.createElement(Ce.Fragment,null,gre(t)),TIe=y.forwardRef((t,e)=>{var n=y.useCallback(se=>Ce.createElement(AIe,qc({},se)),[]),{autoFocus:r,decorate:s=NIe,onDOMBeforeInput:a,placeholder:i,readOnly:o=!1,renderElement:l,renderChunk:u,renderLeaf:d,renderText:f,renderPlaceholder:m=n,scrollSelectionIntoView:g=jIe,style:x={},as:b="div",disableDefaultStyles:C=!1}=t,S=D4(t,kIe),w=yIe(),[E,T]=y.useState(!1),_=y.useRef(null),A=y.useRef([]),[j,D]=y.useState(),z=y.useRef(!1),{onUserInput:F,receivedUserInput:R}=xIe(),[,L]=y.useReducer(se=>se+1,0);Jne.set(w,L),vD.set(w,o);var O=y.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);y.useEffect(()=>{_.current&&r&&_.current.focus()},[r]);var H=y.useRef(),P=y.useMemo(()=>$De(()=>{if(fg.get(w)){P();return}var se=dt.toDOMNode(w,w),ce=se.getRootNode();if(!z.current&&Am&&ce instanceof ShadowRoot){z.current=!0;var ue=RRe();ue?document.execCommand("indent"):rt.deselect(w),z.current=!1;return}var oe=H.current;if((li||!dt.isComposing(w))&&(!O.isUpdatingSelection||oe!=null&&oe.isFlushing())&&!O.isDraggingInternally){var Ne=dt.findDocumentOrShadowRoot(w),{activeElement:ve}=Ne,He=dt.toDOMNode(w,w),nt=Bx(Ne);if(ve===He?(O.latestElement=ve,Jh.set(w,!0)):Jh.delete(w),!nt)return rt.deselect(w);var{anchorNode:Me,focusNode:$e}=nt,Le=dt.hasEditableTarget(w,Me)||dt.isTargetInsideNonReadonlyVoid(w,Me),ae=dt.hasTarget(w,$e);if(Le&&ae){var pe=dt.toSlateRange(w,nt,{exactMatch:!1,suppressThrow:!0});pe&&(!dt.isComposing(w)&&!(oe!=null&&oe.hasPendingChanges())&&!(oe!=null&&oe.isFlushing())?rt.select(w,pe):oe==null||oe.handleUserSelect(pe))}o&&(!Le||!ae)&&rt.deselect(w)}},100),[w,o,O]),I=y.useMemo(()=>BDe(P,0),[P]);H.current=zMe({node:_,onDOMSelectionChange:P,scheduleOnDOMSelectionChange:I}),Ld(()=>{var se,ce,ue;_.current&&(ue=ZR(_.current))?(Xne.set(w,ue),zx.set(w,_.current),Vm.set(w,_.current),F1.set(_.current,w)):Vm.delete(w);var{selection:oe}=w,Ne=dt.findDocumentOrShadowRoot(w),ve=Bx(Ne);if(!(!ve||!dt.isFocused(w)||(se=H.current)!==null&&se!==void 0&&se.hasPendingAction())){var He=Le=>{var ae=ve.type!=="None";if(!(!oe&&!ae)){var pe=ve.focusNode,_e;if(ag&&ve.rangeCount>1){var Ue=ve.getRangeAt(0),Je=ve.getRangeAt(ve.rangeCount-1);Ue.startContainer===pe?_e=Je.endContainer:_e=Ue.startContainer}else _e=ve.anchorNode;var qe=zx.get(w),xe=!1;if(Hm(qe,_e)&&Hm(qe,pe)&&(xe=!0),ae&&xe&&oe&&!Le){var Ae=dt.toSlateRange(w,ve,{exactMatch:!0,suppressThrow:!0});if(Ae&&Be.equals(Ae,oe)){var Fe;if(!O.hasMarkPlaceholder||(Fe=_e)!==null&&Fe!==void 0&&(Fe=Fe.parentElement)!==null&&Fe!==void 0&&Fe.hasAttribute("data-slate-mark-placeholder"))return}}if(oe&&!dt.hasRange(w,oe)){w.selection=dt.toSlateRange(w,ve,{exactMatch:!1,suppressThrow:!0});return}O.isUpdatingSelection=!0;var Qe=null;try{Qe=oe&&dt.toDOMRange(w,oe)}catch{}return Qe?(dt.isComposing(w)&&!li?ve.collapseToEnd():Be.isBackward(oe)?ve.setBaseAndExtent(Qe.endContainer,Qe.endOffset,Qe.startContainer,Qe.startOffset):ve.setBaseAndExtent(Qe.startContainer,Qe.startOffset,Qe.endContainer,Qe.endOffset),g(w,Qe)):ve.removeAllRanges(),Qe}};ve.rangeCount<=1&&He();var nt=((ce=H.current)===null||ce===void 0?void 0:ce.isFlushing())==="action";if(!li||!nt){setTimeout(()=>{O.isUpdatingSelection=!1});return}var Me=null,$e=requestAnimationFrame(()=>{if(nt){var Le=ae=>{try{var pe=dt.toDOMNode(w,w);pe.focus(),He(ae)}catch{}};Le(),Me=setTimeout(()=>{Le(!0),O.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame($e),Me&&clearTimeout(Me)}}});var U=y.useCallback(se=>{mV(w,se);var ce=dt.toDOMNode(w,w),ue=ce.getRootNode();if(z!=null&&z.current&&Am&&ue instanceof ShadowRoot){var oe=se.getTargetRanges(),Ne=oe[0],ve=new window.Range;ve.setStart(Ne.startContainer,Ne.startOffset),ve.setEnd(Ne.endContainer,Ne.endOffset);var He=dt.toSlateRange(w,ve,{exactMatch:!1,suppressThrow:!1});rt.select(w,He),se.preventDefault(),se.stopImmediatePropagation();return}if(F(),!o&&dt.hasEditableTarget(w,se.target)&&!DIe(se,a)){var nt;if(H.current)return H.current.handleDOMBeforeInput(se);I.flush(),P.flush();var{selection:Me}=w,{inputType:$e}=se,Le=se.dataTransfer||se.data||void 0,ae=$e==="insertCompositionText"||$e==="deleteCompositionText";if(ae&&dt.isComposing(w))return;var pe=!1;if($e==="insertText"&&Me&&Be.isCollapsed(Me)&&se.data&&se.data.length===1&&/[a-z ]/i.test(se.data)&&Me.anchor.offset!==0&&(pe=!0,w.marks&&(pe=!1),!fg.get(w))){var _e,Ue,{anchor:Je}=Me,[qe,xe]=dt.toDOMPoint(w,Je),Ae=(_e=qe.parentElement)===null||_e===void 0?void 0:_e.closest("a"),Fe=dt.getWindow(w);if(pe&&Ae&&dt.hasDOMNode(w,Ae)){var Qe,vt=Fe==null?void 0:Fe.document.createTreeWalker(Ae,NodeFilter.SHOW_TEXT).lastChild();vt===qe&&((Qe=vt.textContent)===null||Qe===void 0?void 0:Qe.length)===xe&&(pe=!1)}if(pe&&qe.parentElement&&(Fe==null||(Ue=Fe.getComputedStyle(qe.parentElement))===null||Ue===void 0?void 0:Ue.whiteSpace)==="pre"){var at=Q.above(w,{at:Je.path,match:jn=>jt.isElement(jn)&&Q.isBlock(w,jn)});at&&pt.string(at[0]).includes("	")&&(pe=!1)}}if((!$e.startsWith("delete")||$e.startsWith("deleteBy"))&&!fg.get(w)){var[Tt]=se.getTargetRanges();if(Tt){var wt=dt.toSlateRange(w,Tt,{exactMatch:!1,suppressThrow:!1}),cn={anchor:wt.focus,focus:wt.anchor};if(!Me||!(Be.equals(Me,wt)||Be.equals(Me,cn))){pe=!1;var $t=!ae&&w.selection&&Q.rangeRef(w,w.selection);rt.select(w,wt),$t&&$x.set(w,$t)}}}if(ae)return;if(pe||se.preventDefault(),Me&&Be.isExpanded(Me)&&$e.startsWith("delete")){var hn=$e.endsWith("Backward")?"backward":"forward";Q.deleteFragment(w,{direction:hn});return}switch($e){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{Q.deleteFragment(w);break}case"deleteContent":case"deleteContentForward":{Q.deleteForward(w);break}case"deleteContentBackward":{Q.deleteBackward(w);break}case"deleteEntireSoftLine":{Q.deleteBackward(w,{unit:"line"}),Q.deleteForward(w,{unit:"line"});break}case"deleteHardLineBackward":{Q.deleteBackward(w,{unit:"block"});break}case"deleteSoftLineBackward":{Q.deleteBackward(w,{unit:"line"});break}case"deleteHardLineForward":{Q.deleteForward(w,{unit:"block"});break}case"deleteSoftLineForward":{Q.deleteForward(w,{unit:"line"});break}case"deleteWordBackward":{Q.deleteBackward(w,{unit:"word"});break}case"deleteWordForward":{Q.deleteForward(w,{unit:"word"});break}case"insertLineBreak":Q.insertSoftBreak(w);break;case"insertParagraph":{Q.insertBreak(w);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{$e==="insertFromComposition"&&dt.isComposing(w)&&(T(!1),Om.set(w,!1)),(Le==null?void 0:Le.constructor.name)==="DataTransfer"?dt.insertData(w,Le):typeof Le=="string"&&(pe?A.current.push(()=>Q.insertText(w,Le)):Q.insertText(w,Le));break}}var Kn=(nt=$x.get(w))===null||nt===void 0?void 0:nt.unref();$x.delete(w),Kn&&(!w.selection||!Be.equals(w.selection,Kn))&&rt.select(w,Kn)}},[w,P,F,a,o,I]),W=y.useCallback(se=>{se==null?(P.cancel(),I.cancel(),zx.delete(w),Vm.delete(w),_.current&&Rh&&_.current.removeEventListener("beforeinput",U)):Rh&&se.addEventListener("beforeinput",U),_.current=se,typeof e=="function"?e(se):e&&(e.current=se)},[P,I,w,U,e]);Ld(()=>{var se=dt.getWindow(w),ce=oe=>{var{target:Ne}=oe,ve=Ne instanceof HTMLElement?Ne:null,He=ve==null?void 0:ve.tagName;He==="INPUT"||He==="TEXTAREA"||I()};se.document.addEventListener("selectionchange",ce);var ue=()=>{O.isDraggingInternally=!1};return se.document.addEventListener("dragend",ue),se.document.addEventListener("drop",ue),()=>{se.document.removeEventListener("selectionchange",ce),se.document.removeEventListener("dragend",ue),se.document.removeEventListener("drop",ue)}},[I,O]);var Y=s([w,[]]),B=QMe(s),Z=i&&w.children.length===1&&Array.from(pt.texts(w)).length===1&&pt.string(w)===""&&!E,le=y.useCallback(se=>{if(se&&Z){var ce;D((ce=se.getBoundingClientRect())===null||ce===void 0?void 0:ce.height)}else D(void 0)},[Z]);if(Z){var G=Q.start(w,[]);Y.push({[Bg]:!0,placeholder:i,onPlaceholderResize:le,anchor:G,focus:G})}var{marks:K}=w;if(O.hasMarkPlaceholder=!1,w.selection&&Be.isCollapsed(w.selection)&&K){var{anchor:te}=w.selection,ie=pt.leaf(w,te.path),de=D4(ie,EIe);if(!mt.equals(ie,K,{loose:!0})){O.hasMarkPlaceholder=!0;var fe=Object.fromEntries(Object.keys(de).map(se=>[se,null]));Y.push(qc(qc(qc({[Qne]:!0},fe),K),{},{anchor:te,focus:te}))}}return y.useEffect(()=>{setTimeout(()=>{var{selection:se}=w;if(se){var{anchor:ce}=se,ue=pt.leaf(w,ce.path);if(K&&!mt.equals(ue,K,{loose:!0})){tc.set(w,K);return}}tc.delete(w)})}),vIe(),Ce.createElement(vre.Provider,{value:o},Ce.createElement(SIe.Provider,{value:E},Ce.createElement(ure.Provider,{value:B},Ce.createElement(CIe,{node:_,receivedUserInput:R},Ce.createElement(b,qc(qc({role:o?void 0:"textbox","aria-multiline":o?void 0:!0,translate:"no"},S),{},{spellCheck:Rh||!ES?S.spellCheck:!1,autoCorrect:Rh||!ES?S.autoCorrect:"false",autoCapitalize:Rh||!ES?S.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!o,zindex:-1,suppressContentEditableWarning:!0,ref:W,style:qc(qc({},C?{}:qc({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},j?{minHeight:j}:{})),x),onBeforeInput:y.useCallback(se=>{if(!Rh&&!o&&!wi(se,S.onBeforeInput)&&dt.hasSelectableTarget(w,se.target)&&(se.preventDefault(),!dt.isComposing(w))){var ce=se.data;Q.insertText(w,ce)}},[S.onBeforeInput,w,o]),onInput:y.useCallback(se=>{if(!wi(se,S.onInput)){if(H.current){H.current.handleInput();return}for(var ce of A.current)ce();A.current=[],dt.isFocused(w)||mV(w,se.nativeEvent)}},[S.onInput,w]),onBlur:y.useCallback(se=>{if(!(o||O.isUpdatingSelection||!dt.hasSelectableTarget(w,se.target)||wi(se,S.onBlur))){var ce=dt.findDocumentOrShadowRoot(w);if(O.latestElement!==ce.activeElement){var{relatedTarget:ue}=se,oe=dt.toDOMNode(w,w);if(ue!==oe&&!(xl(ue)&&ue.hasAttribute("data-slate-spacer"))){if(ue!=null&&wf(ue)&&dt.hasDOMNode(w,ue)){var Ne=dt.toSlateNode(w,ue);if(jt.isElement(Ne)&&!w.isVoid(Ne))return}if(Am){var ve=Bx(ce);ve==null||ve.removeAllRanges()}Jh.delete(w)}}}},[o,O.isUpdatingSelection,O.latestElement,w,S.onBlur]),onClick:y.useCallback(se=>{if(dt.hasTarget(w,se.target)&&!wi(se,S.onClick)&&wf(se.target)){var ce=dt.toSlateNode(w,se.target),ue=dt.findPath(w,ce);if(!Q.hasPath(w,ue)||pt.get(w,ue)!==ce)return;if(se.detail===JRe&&ue.length>=1){var oe=ue;if(!(jt.isElement(ce)&&Q.isBlock(w,ce))){var Ne,ve=Q.above(w,{match:pe=>jt.isElement(pe)&&Q.isBlock(w,pe),at:ue});oe=(Ne=ve==null?void 0:ve[1])!==null&&Ne!==void 0?Ne:ue.slice(0,1)}var He=Q.range(w,oe);rt.select(w,He);return}if(o)return;var nt=Q.start(w,ue),Me=Q.end(w,ue),$e=Q.void(w,{at:nt}),Le=Q.void(w,{at:Me});if($e&&Le&&be.equals($e[1],Le[1])){var ae=Q.range(w,nt);rt.select(w,ae)}}},[w,S.onClick,o]),onCompositionEnd:y.useCallback(se=>{if(!Zy(se)&&dt.hasSelectableTarget(w,se.target)){var ce;if(dt.isComposing(w)&&Promise.resolve().then(()=>{T(!1),Om.set(w,!1)}),(ce=H.current)===null||ce===void 0||ce.handleCompositionEnd(se),wi(se,S.onCompositionEnd)||li)return;if(!Am&&!FRe&&!IRe&&!LRe&&!BRe&&se.data){var ue=tc.get(w);tc.delete(w),ue!==void 0&&(bd.set(w,w.marks),w.marks=ue),Q.insertText(w,se.data);var oe=bd.get(w);bd.delete(w),oe!==void 0&&(w.marks=oe)}}},[S.onCompositionEnd,w]),onCompositionUpdate:y.useCallback(se=>{dt.hasSelectableTarget(w,se.target)&&!wi(se,S.onCompositionUpdate)&&!Zy(se)&&(dt.isComposing(w)||(T(!0),Om.set(w,!0)))},[S.onCompositionUpdate,w]),onCompositionStart:y.useCallback(se=>{if(!Zy(se)&&dt.hasSelectableTarget(w,se.target)){var ce;if((ce=H.current)===null||ce===void 0||ce.handleCompositionStart(se),wi(se,S.onCompositionStart)||li)return;T(!0);var{selection:ue}=w;if(ue&&Be.isExpanded(ue)){Q.deleteFragment(w);return}}},[S.onCompositionStart,w]),onCopy:y.useCallback(se=>{dt.hasSelectableTarget(w,se.target)&&!wi(se,S.onCopy)&&!Zy(se)&&(se.preventDefault(),dt.setFragmentData(w,se.clipboardData,"copy"))},[S.onCopy,w]),onCut:y.useCallback(se=>{if(!o&&dt.hasSelectableTarget(w,se.target)&&!wi(se,S.onCut)&&!Zy(se)){se.preventDefault(),dt.setFragmentData(w,se.clipboardData,"cut");var{selection:ce}=w;if(ce)if(Be.isExpanded(ce))Q.deleteFragment(w);else{var ue=pt.parent(w,ce.anchor.path);Q.isVoid(w,ue)&&rt.delete(w)}}},[o,w,S.onCut]),onDragOver:y.useCallback(se=>{if(dt.hasTarget(w,se.target)&&!wi(se,S.onDragOver)){var ce=dt.toSlateNode(w,se.target);jt.isElement(ce)&&Q.isVoid(w,ce)&&se.preventDefault()}},[S.onDragOver,w]),onDragStart:y.useCallback(se=>{if(!o&&dt.hasTarget(w,se.target)&&!wi(se,S.onDragStart)){var ce=dt.toSlateNode(w,se.target),ue=dt.findPath(w,ce),oe=jt.isElement(ce)&&Q.isVoid(w,ce)||Q.void(w,{at:ue,voids:!0});if(oe){var Ne=Q.range(w,ue);rt.select(w,Ne)}O.isDraggingInternally=!0,dt.setFragmentData(w,se.dataTransfer,"drag")}},[o,w,S.onDragStart,O]),onDrop:y.useCallback(se=>{if(!o&&dt.hasTarget(w,se.target)&&!wi(se,S.onDrop)){se.preventDefault();var ce=w.selection,ue=dt.findEventRange(w,se),oe=se.dataTransfer;rt.select(w,ue),O.isDraggingInternally&&ce&&!Be.equals(ce,ue)&&!Q.void(w,{at:ue,voids:!0})&&rt.delete(w,{at:ce}),dt.insertData(w,oe),dt.isFocused(w)||dt.focus(w)}},[o,w,S.onDrop,O]),onDragEnd:y.useCallback(se=>{!o&&O.isDraggingInternally&&S.onDragEnd&&dt.hasTarget(w,se.target)&&S.onDragEnd(se)},[o,O,S,w]),onFocus:y.useCallback(se=>{if(!o&&!O.isUpdatingSelection&&dt.hasEditableTarget(w,se.target)&&!wi(se,S.onFocus)){var ce=dt.toDOMNode(w,w),ue=dt.findDocumentOrShadowRoot(w);if(O.latestElement=ue.activeElement,ag&&se.target!==ce){ce.focus();return}Jh.set(w,!0)}},[o,O,w,S.onFocus]),onKeyDown:y.useCallback(se=>{if(!o&&dt.hasEditableTarget(w,se.target)){var ce;(ce=H.current)===null||ce===void 0||ce.handleKeyDown(se);var{nativeEvent:ue}=se;if(dt.isComposing(w)&&ue.isComposing===!1&&(Om.set(w,!1),T(!1)),wi(se,S.onKeyDown)||dt.isComposing(w))return;var{selection:oe}=w,Ne=w.children[oe!==null?oe.focus.path[0]:0],ve=jne(pt.string(Ne))==="rtl";if(hs.isRedo(ue)){se.preventDefault();var He=w;typeof He.redo=="function"&&He.redo();return}if(hs.isUndo(ue)){se.preventDefault();var nt=w;typeof nt.undo=="function"&&nt.undo();return}if(hs.isMoveLineBackward(ue)){se.preventDefault(),rt.move(w,{unit:"line",reverse:!0});return}if(hs.isMoveLineForward(ue)){se.preventDefault(),rt.move(w,{unit:"line"});return}if(hs.isExtendLineBackward(ue)){se.preventDefault(),rt.move(w,{unit:"line",edge:"focus",reverse:!0});return}if(hs.isExtendLineForward(ue)){se.preventDefault(),rt.move(w,{unit:"line",edge:"focus"});return}if(hs.isMoveBackward(ue)){se.preventDefault(),oe&&Be.isCollapsed(oe)?rt.move(w,{reverse:!ve}):rt.collapse(w,{edge:ve?"end":"start"});return}if(hs.isMoveForward(ue)){se.preventDefault(),oe&&Be.isCollapsed(oe)?rt.move(w,{reverse:ve}):rt.collapse(w,{edge:ve?"start":"end"});return}if(hs.isMoveWordBackward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)&&rt.collapse(w,{edge:"focus"}),rt.move(w,{unit:"word",reverse:!ve});return}if(hs.isMoveWordForward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)&&rt.collapse(w,{edge:"focus"}),rt.move(w,{unit:"word",reverse:ve});return}if(Rh){if((tM||Am)&&oe&&(hs.isDeleteBackward(ue)||hs.isDeleteForward(ue))&&Be.isCollapsed(oe)){var Me=pt.parent(w,oe.anchor.path);if(jt.isElement(Me)&&Q.isVoid(w,Me)&&(Q.isInline(w,Me)||Q.isBlock(w,Me))){se.preventDefault(),Q.deleteBackward(w,{unit:"block"});return}}}else{if(hs.isBold(ue)||hs.isItalic(ue)||hs.isTransposeCharacter(ue)){se.preventDefault();return}if(hs.isSoftBreak(ue)){se.preventDefault(),Q.insertSoftBreak(w);return}if(hs.isSplitBlock(ue)){se.preventDefault(),Q.insertBreak(w);return}if(hs.isDeleteBackward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)?Q.deleteFragment(w,{direction:"backward"}):Q.deleteBackward(w);return}if(hs.isDeleteForward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)?Q.deleteFragment(w,{direction:"forward"}):Q.deleteForward(w);return}if(hs.isDeleteLineBackward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)?Q.deleteFragment(w,{direction:"backward"}):Q.deleteBackward(w,{unit:"line"});return}if(hs.isDeleteLineForward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)?Q.deleteFragment(w,{direction:"forward"}):Q.deleteForward(w,{unit:"line"});return}if(hs.isDeleteWordBackward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)?Q.deleteFragment(w,{direction:"backward"}):Q.deleteBackward(w,{unit:"word"});return}if(hs.isDeleteWordForward(ue)){se.preventDefault(),oe&&Be.isExpanded(oe)?Q.deleteFragment(w,{direction:"forward"}):Q.deleteForward(w,{unit:"word"});return}}}},[o,w,S.onKeyDown]),onPaste:y.useCallback(se=>{!o&&dt.hasEditableTarget(w,se.target)&&!wi(se,S.onPaste)&&(!Rh||_Re(se.nativeEvent)||Am)&&(se.preventDefault(),dt.insertData(w,se.clipboardData))},[o,w,S.onPaste])}),Ce.createElement(_Ie,{decorations:Y,node:w,renderElement:l,renderChunk:u,renderPlaceholder:m,renderLeaf:d,renderText:f}))))))}),AIe=t=>{var{attributes:e,children:n}=t;return Ce.createElement("span",qc({},e),n,li&&Ce.createElement("br",null))},NIe=()=>[],jIe=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&Be.isCollapsed(t.selection))){var n=e.startContainer.parentElement,r=e.getBoundingClientRect(),s=r.width===0&&r.height===0&&r.x===0&&r.y===0;if(s){var a=n.getBoundingClientRect(),i=a.width>0||a.height>0;if(i)return}n.getBoundingClientRect=e.getBoundingClientRect.bind(e),VDe(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},wi=(t,e)=>{if(!e)return!1;var n=e(t);return n??(t.isDefaultPrevented()||t.isPropagationStopped())},Zy=t=>wf(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),DIe=(t,e)=>{if(!e)return!1;var n=e(t);return n??t.defaultPrevented},mV=(t,e)=>{var n=t;if(e.inputType==="historyUndo"&&typeof n.undo=="function"){n.undo();return}if(e.inputType==="historyRedo"&&typeof n.redo=="function"){n.redo();return}},RIe=y.createContext(!1),xre=parseInt(Ce.version.split(".")[0],10),MIe=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],IIe=t=>{var{editor:e,children:n,onChange:r,onSelectionChange:s,onValueChange:a,initialValue:i}=t,o=D4(t,MIe);Ce.useState(()=>{if(!pt.isNodeList(i))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(ua.stringify(i)));if(!Q.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(ua.stringify(e)));e.children=i,Object.assign(e,o)});var{selectorContext:l,onChange:u}=gIe(),d=y.useCallback(g=>{var x;switch(r&&r(e.children),g==null||(x=g.operation)===null||x===void 0?void 0:x.type){case"set_selection":s==null||s(e.selection);break;default:a==null||a(e.children)}u()},[e,u,r,s,a]);y.useEffect(()=>(yD.set(e,d),()=>{yD.set(e,()=>{})}),[e,d]);var[f,m]=y.useState(dt.isFocused(e));return y.useEffect(()=>{m(dt.isFocused(e))},[e]),Ld(()=>{var g=()=>m(dt.isFocused(e));return xre>=17?(document.addEventListener("focusin",g),document.addEventListener("focusout",g),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",g)}):(document.addEventListener("focus",g,!0),document.addEventListener("blur",g,!0),()=>{document.removeEventListener("focus",g,!0),document.removeEventListener("blur",g,!0)})},[]),Ce.createElement(oM.Provider,{value:l},Ce.createElement(iM.Provider,{value:e},Ce.createElement(RIe.Provider,{value:f},n)))},OIe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e;r=XRe(r,n);var{onChange:s,apply:a,insertText:i}=r;return r.getChunkSize=()=>null,li&&(r.insertText=(o,l)=>(md.delete(r),i(o,l))),r.onChange=o=>{var l=xre<18?nk.unstable_batchedUpdates:u=>u();l(()=>{s(o)})},r.apply=o=>{if(o.type==="move_node"){var l=pt.parent(r,o.path),u=!!r.getChunkSize(l);if(u){var d=pt.get(r,o.path),f=mre(r,l),m=dt.findKey(r,d);f.movedNodeKeys.add(m)}}a(o)},r};const lc=()=>new Map,SD=t=>{const e=lc();return t.forEach((n,r)=>{e.set(r,n)}),e},$f=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},PIe=(t,e)=>{const n=[];for(const[r,s]of t)n.push(e(s,r));return n},FIe=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Lg=()=>new Set,$A=t=>t[t.length-1],BIe=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},i0=Array.from,lM=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},bre=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},LIe=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},zk=Array.isArray;class zIe{constructor(){this._observers=lc()}on(e,n){return $f(this._observers,e,Lg).add(n),n}once(e,n){const r=(...s)=>{this.off(e,r),n(...s)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return i0((this._observers.get(e)||lc()).values()).forEach(r=>r(...n))}destroy(){this._observers=lc()}}const vu=Math.floor,TS=Math.abs,wre=(t,e)=>t<e?t:e,Rv=(t,e)=>t>e?t:e,Cre=t=>t!==0?t<0:1/t<0,pV=1,gV=2,UA=4,HA=8,z1=32,Ad=64,Oo=128,$k=31,kD=63,Wm=127,$Ie=2147483647,R4=Number.MAX_SAFE_INTEGER,vV=Number.MIN_SAFE_INTEGER,UIe=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&vu(t)===t),HIe=String.fromCharCode,VIe=t=>t.toLowerCase(),qIe=/^\s*/g,GIe=t=>t.replace(qIe,""),WIe=/([A-Z])/g,yV=(t,e)=>GIe(t.replace(WIe,n=>`${e}${VIe(n)}`)),KIe=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.codePointAt(s);return r},$1=typeof TextEncoder<"u"?new TextEncoder:null,YIe=t=>$1.encode(t),XIe=$1?YIe:KIe;let Hx=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Hx&&Hx.decode(new Uint8Array).length===1&&(Hx=null);const JIe=(t,e)=>LIe(e,()=>t).join("");class cw{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const uw=()=>new cw,QIe=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},nc=t=>{const e=new Uint8Array(QIe(t));let n=0;for(let r=0;r<t.bufs.length;r++){const s=t.bufs[r];e.set(s,n),n+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},ZIe=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Rv(n,e)*2),t.cpos=0)},Na=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},U1=Na,Gn=(t,e)=>{for(;e>Wm;)Na(t,Oo|Wm&e),e=vu(e/128);Na(t,Wm&e)},Uk=(t,e)=>{const n=Cre(e);for(n&&(e=-e),Na(t,(e>kD?Oo:0)|(n?Ad:0)|kD&e),e=vu(e/64);e>0;)Na(t,(e>Wm?Oo:0)|Wm&e),e=vu(e/128)},ED=new Uint8Array(3e4),eOe=ED.length/3,tOe=(t,e)=>{if(e.length<eOe){const n=$1.encodeInto(e,ED).written||0;Gn(t,n);for(let r=0;r<n;r++)Na(t,ED[r])}else ko(t,XIe(e))},nOe=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Gn(t,r);for(let s=0;s<r;s++)Na(t,n.codePointAt(s))},Km=$1&&$1.encodeInto?tOe:nOe,Hk=(t,e)=>{const n=t.cbuf.length,r=t.cpos,s=wre(n-r,e.length),a=e.length-s;t.cbuf.set(e.subarray(0,s),r),t.cpos+=s,a>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Rv(n*2,a)),t.cbuf.set(e.subarray(s)),t.cpos=a)},ko=(t,e)=>{Gn(t,e.byteLength),Hk(t,e)},cM=(t,e)=>{ZIe(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},rOe=(t,e)=>cM(t,4).setFloat32(0,e,!1),sOe=(t,e)=>cM(t,8).setFloat64(0,e,!1),aOe=(t,e)=>cM(t,8).setBigInt64(0,e,!1),xV=new DataView(new ArrayBuffer(4)),iOe=t=>(xV.setFloat32(0,t),xV.getFloat32(0)===t),H1=(t,e)=>{switch(typeof e){case"string":Na(t,119),Km(t,e);break;case"number":UIe(e)&&TS(e)<=$Ie?(Na(t,125),Uk(t,e)):iOe(e)?(Na(t,124),rOe(t,e)):(Na(t,123),sOe(t,e));break;case"bigint":Na(t,122),aOe(t,e);break;case"object":if(e===null)Na(t,126);else if(zk(e)){Na(t,117),Gn(t,e.length);for(let n=0;n<e.length;n++)H1(t,e[n])}else if(e instanceof Uint8Array)Na(t,116),ko(t,e);else{Na(t,118);const n=Object.keys(e);Gn(t,n.length);for(let r=0;r<n.length;r++){const s=n[r];Km(t,s),H1(t,e[s])}}break;case"boolean":Na(t,e?120:121);break;default:Na(t,127)}};class bV extends cw{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Gn(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const wV=t=>{t.count>0&&(Uk(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Gn(t.encoder,t.count-2))};class AS{constructor(){this.encoder=new cw,this.s=0,this.count=0}write(e){this.s===e?this.count++:(wV(this),this.count=1,this.s=e)}toUint8Array(){return wV(this),nc(this.encoder)}}const CV=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);Uk(t.encoder,e),t.count>1&&Gn(t.encoder,t.count-2)}};class VA{constructor(){this.encoder=new cw,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(CV(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return CV(this),nc(this.encoder)}}class oOe{constructor(){this.sarr=[],this.s="",this.lensE=new AS}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new cw;return this.sarr.push(this.s),this.s="",Km(e,this.sarr.join("")),Hk(e,this.lensE.toUint8Array()),nc(e)}}const yu=t=>new Error(t),cc=()=>{throw yu("Method unimplemented")},io=()=>{throw yu("Unexpected case")},Sre=yu("Unexpected end of array"),kre=yu("Integer out of Range");class Vk{constructor(e){this.arr=e,this.pos=0}}const qk=t=>new Vk(t),Ere=t=>t.pos!==t.arr.length,lOe=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Eo=t=>lOe(t,Pn(t)),zg=t=>t.arr[t.pos++],Pn=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const s=t.arr[t.pos++];if(e=e+(s&Wm)*n,n*=128,s<Oo)return e;if(e>R4)throw kre}throw Sre},Gk=t=>{let e=t.arr[t.pos++],n=e&kD,r=64;const s=(e&Ad)>0?-1:1;if((e&Oo)===0)return s*n;const a=t.arr.length;for(;t.pos<a;){if(e=t.arr[t.pos++],n=n+(e&Wm)*r,r*=128,e<Oo)return s*n;if(n>R4)throw kre}throw Sre},cOe=t=>{let e=Pn(t);if(e===0)return"";{let n=String.fromCodePoint(zg(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(zg(t));else for(;e>0;){const r=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,s),e-=r}return decodeURIComponent(escape(n))}},uOe=t=>Hx.decode(Eo(t)),Ym=Hx?uOe:cOe,uM=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},dOe=t=>uM(t,4).getFloat32(0,!1),hOe=t=>uM(t,8).getFloat64(0,!1),fOe=t=>uM(t,8).getBigInt64(0,!1),mOe=[t=>{},t=>null,Gk,dOe,hOe,fOe,t=>!1,t=>!0,Ym,t=>{const e=Pn(t),n={};for(let r=0;r<e;r++){const s=Ym(t);n[s]=V1(t)}return n},t=>{const e=Pn(t),n=[];for(let r=0;r<e;r++)n.push(V1(t));return n},Eo],V1=t=>mOe[127-zg(t)](t);class SV extends Vk{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Ere(this)?this.count=Pn(this)+1:this.count=-1),this.count--,this.s}}class NS extends Vk{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Gk(this);const e=Cre(this.s);this.count=1,e&&(this.s=-this.s,this.count=Pn(this)+2)}return this.count--,this.s}}class qA extends Vk{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Gk(this),n=e&1;this.diff=vu(e/2),this.count=1,n&&(this.count=Pn(this)+2)}return this.s+=this.diff,this.count--,this.s}}class pOe{constructor(e){this.decoder=new NS(e),this.str=Ym(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const gOe=crypto.getRandomValues.bind(crypto),_re=()=>gOe(new Uint32Array(1))[0],vOe="10000000-1000-4000-8000"+-1e11,yOe=()=>vOe.replace(/[018]/g,t=>(t^_re()&15>>t/4).toString(16)),kV=t=>new Promise(t);Promise.all.bind(Promise);const EV=t=>t===void 0?null:t;class xOe{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let Tre=new xOe,bOe=!0;try{typeof localStorage<"u"&&localStorage&&(Tre=localStorage,bOe=!1)}catch{}const wOe=Tre,q1=Symbol("Equality"),Are=(t,e)=>{var n;return t===e||!!((n=t==null?void 0:t[q1])!=null&&n.call(t,e))||!1},COe=t=>typeof t=="object",SOe=Object.assign,kOe=Object.keys,EOe=(t,e)=>{for(const n in t)e(t[n],n)},M4=t=>kOe(t).length,_Oe=t=>{for(const e in t)return!1;return!0},dw=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},dM=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),TOe=(t,e)=>t===e||M4(t)===M4(e)&&dw(t,(n,r)=>(n!==void 0||dM(e,r))&&Are(e[r],n)),AOe=Object.freeze,Nre=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&Nre(t[e])}return AOe(t)},hM=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&hM(t,e,n+1)}},jS=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[q1]!=null)return t[q1](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!jS(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(M4(t)!==M4(e))return!1;for(const n in t)if(!dM(t,n)||!jS(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!jS(t[n],e[n]))return!1;break;default:return!1}return!0},NOe=(t,e)=>e.includes(t);var jre={};const G1=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let $c;const jOe=()=>{if($c===void 0)if(G1){$c=lc();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&$c.set(e,""),e=r):e!==null&&($c.set(e,r),e=null)}e!==null&&$c.set(e,"")}else typeof location=="object"?($c=lc(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");$c.set(`--${yV(e,"-")}`,n),$c.set(`-${yV(e,"-")}`,n)}})):$c=lc();return $c},_D=t=>jOe().has(t),I4=t=>EV(G1?jre[t.toUpperCase().replaceAll("-","_")]:wOe.getItem(t)),Dre=t=>_D("--"+t)||I4(t)!==null,DOe=Dre("production"),ROe=G1&&NOe(jre.FORCE_COLOR,["true","1","2"]),MOe=ROe||!_D("--no-colors")&&!Dre("no-color")&&(!G1||process.stdout.isTTY)&&(!G1||_D("--color")||I4("COLORTERM")!==null||(I4("TERM")||"").includes("color")),IOe=t=>new Uint8Array(t),OOe=t=>{const e=IOe(t.byteLength);return e.set(t),e};class POe{constructor(e,n){this.left=e,this.right=n}}const rd=(t,e)=>new POe(t,e),_V=t=>t.next()>=.5,GA=(t,e,n)=>vu(t.next()*(n+1-e)+e),Rre=(t,e,n)=>vu(t.next()*(n+1-e)+e),fM=(t,e,n)=>Rre(t,e,n),FOe=t=>HIe(fM(t,97,122)),BOe=(t,e=0,n=20)=>{const r=fM(t,e,n);let s="";for(let a=0;a<r;a++)s+=FOe(t);return s},WA=(t,e)=>e[fM(t,0,e.length-1)],LOe=Symbol("0schema");class zOe{constructor(){this._rerrs=[]}extend(e,n,r,s=null){this._rerrs.push({path:e,expected:n,has:r,message:s})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(JIe(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const TD=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[q1]?Are(t,e):zk(t)?lM(t,n=>bre(e,r=>TD(n,r))):COe(t)?dw(t,(n,r)=>TD(n,e[r])):!1;var WN;let Fi=(WN=class{extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),TD(n,r)}equals(e){return this.constructor===e.constructor&&jS(this.shape,e.shape)}[LOe](){return!0}[q1](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){cc()}get nullable(){return Mv(this,Jk)}get optional(){return new Ore(this)}cast(e){return TV(e,this),e}expect(e){return TV(e,this),e}},Ie(WN,"_dilutes",!1),WN);class mM extends Fi{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=(e==null?void 0:e.constructor)===this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name,(e==null?void 0:e.constructor)!==this.shape?"Constructor match failed":"Check failed")),r}}const Zs=(t,e=null)=>new mM(t,e);Zs(mM);class pM extends Fi{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&(n==null||n.extend(null,"custom prop",e==null?void 0:e.constructor.name,"failed to check custom prop")),r}}const La=t=>new pM(t);Zs(pM);class Wk extends Fi{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(s=>s===e);return!r&&(n==null||n.extend(null,this.shape.join(" | "),e.toString())),r}}const Kk=(...t)=>new Wk(t),Mre=Zs(Wk),$Oe=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),Ire=t=>{if($g.check(t))return[$Oe(t)];if(Mre.check(t))return t.shape.map(e=>e+"");if(Vre.check(t))return["[+-]?\\d+.?\\d*"];if(qre.check(t))return[".*"];if(P4.check(t))return t.shape.map(Ire).flat(1);io()};class UOe extends Fi{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(Ire).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&(n==null||n.extend(null,this._r.toString(),e.toString(),"String doesn't match string template.")),r}}Zs(UOe);const HOe=Symbol("optional");class Ore extends Fi{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&(n==null||n.extend(null,"undefined (optional)","()")),r}get[HOe](){return!0}}const VOe=Zs(Ore);class qOe extends Fi{check(e,n){return n==null||n.extend(null,"never",typeof e),!1}}Zs(qOe);const Z5=class Z5 extends Fi{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}get partial(){return new Z5(this.shape,!0)}check(e,n){return e==null?(n==null||n.extend(null,"object","null"),!1):dw(this.shape,(r,s)=>{const a=this._isPartial&&!dM(e,s)||r.check(e[s],n);return!a&&(n==null||n.extend(s.toString(),r.toString(),typeof e[s],"Object property does not match")),a})}};Ie(Z5,"_dilutes",!0);let O4=Z5;const GOe=t=>new O4(t),WOe=Zs(O4),KOe=La(t=>t!=null&&(t.constructor===Object||t.constructor==null));class Pre extends Fi{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&dw(e,(r,s)=>{const a=this.shape.keys.check(s,n);return!a&&(n==null||n.extend(s+"","Record",typeof e,a?"Key doesn't match schema":"Value doesn't match value")),a&&this.shape.values.check(r,n)})}}const Fre=(t,e)=>new Pre(t,e),YOe=Zs(Pre);class Bre extends Fi{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&dw(this.shape,(r,s)=>{const a=r.check(e[s],n);return!a&&(n==null||n.extend(s.toString(),"Tuple",typeof r)),a})}}const XOe=(...t)=>new Bre(t);Zs(Bre);class Lre extends Fi{constructor(e){super(),this.shape=e.length===1?e[0]:new Yk(e)}check(e,n){const r=zk(e)&&lM(e,s=>this.shape.check(s));return!r&&(n==null||n.extend(null,"Array","")),r}}const zre=(...t)=>new Lre(t),JOe=Zs(Lre),QOe=La(t=>zk(t));class $re extends Fi{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name)),r}}const ZOe=(t,e=null)=>new $re(t,e);Zs($re);const e9e=ZOe(Fi);class t9e extends Fi{constructor(e){super(),this.len=e.length-1,this.args=XOe(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&(n==null||n.extend(null,"function",typeof e)),r}}const n9e=Zs(t9e),r9e=La(t=>typeof t=="function");class s9e extends Fi{constructor(e){super(),this.shape=e}check(e,n){const r=lM(this.shape,s=>s.check(e,n));return!r&&(n==null||n.extend(null,"Intersectinon",typeof e)),r}}Zs(s9e,t=>t.shape.length>0);class Yk extends Fi{constructor(e){super(),this.shape=e}check(e,n){const r=bre(this.shape,s=>s.check(e,n));return n==null||n.extend(null,"Union",typeof e),r}}Ie(Yk,"_dilutes",!0);const Mv=(...t)=>t.findIndex(e=>P4.check(e))>=0?Mv(...t.map(e=>W1(e)).map(e=>P4.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new Yk(t),P4=Zs(Yk),Ure=()=>!0,F4=La(Ure),a9e=Zs(pM,t=>t.shape===Ure),gM=La(t=>typeof t=="bigint"),i9e=La(t=>t===gM),Hre=La(t=>typeof t=="symbol");La(t=>t===Hre);const pg=La(t=>typeof t=="number"),Vre=La(t=>t===pg),$g=La(t=>typeof t=="string"),qre=La(t=>t===$g),Xk=La(t=>typeof t=="boolean"),o9e=La(t=>t===Xk),Gre=Kk(void 0);Zs(Wk,t=>t.shape.length===1&&t.shape[0]===void 0);Kk(void 0);const Jk=Kk(null),l9e=Zs(Wk,t=>t.shape.length===1&&t.shape[0]===null);Zs(Uint8Array);Zs(mM,t=>t.shape===Uint8Array);const c9e=Mv(pg,$g,Jk,Gre,gM,Xk,Hre);(()=>{const t=zre(F4),e=Fre($g,F4),n=Mv(pg,$g,Jk,Xk,t,e);return t.shape=n,e.shape.values=n,n})();const W1=t=>{if(e9e.check(t))return t;if(KOe.check(t)){const e={};for(const n in t)e[n]=W1(t[n]);return GOe(e)}else{if(QOe.check(t))return Mv(...t.map(W1));if(c9e.check(t))return Kk(t);if(r9e.check(t))return Zs(t)}io()},TV=DOe?()=>{}:(t,e)=>{const n=new zOe;if(!e.check(t,n))throw yu(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class u9e{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:W1(e),h:n}),this}else(e){return this.if(F4,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const s=this.patterns[r];if(s.if.check(e))return s.h(e,n)}throw yu("Unhandled pattern")}}}const d9e=t=>new u9e(t),Wre=d9e(F4).if(Vre,(t,e)=>GA(e,vV,R4)).if(qre,(t,e)=>BOe(e)).if(o9e,(t,e)=>_V(e)).if(i9e,(t,e)=>BigInt(GA(e,vV,R4))).if(P4,(t,e)=>Mp(e,WA(e,t.shape))).if(WOe,(t,e)=>{const n={};for(const r in t.shape){let s=t.shape[r];if(VOe.check(s)){if(_V(e))continue;s=s.shape}n[r]=Wre(s,e)}return n}).if(JOe,(t,e)=>{const n=[],r=Rre(e,0,42);for(let s=0;s<r;s++)n.push(Mp(e,t.shape));return n}).if(Mre,(t,e)=>WA(e,t.shape)).if(l9e,(t,e)=>null).if(n9e,(t,e)=>{const n=Mp(e,t.res);return()=>n}).if(a9e,(t,e)=>Mp(e,WA(e,[pg,$g,Jk,Gre,gM,Xk,zre(pg),Fre(Mv("a","b","c"),pg)]))).if(YOe,(t,e)=>{const n={},r=GA(e,0,3);for(let s=0;s<r;s++){const a=Mp(e,t.shape.keys),i=Mp(e,t.shape.values);n[a]=i}return n}).done(),Mp=(t,e)=>Wre(W1(e),t),Qk=typeof document<"u"?document:{};La(t=>t.nodeType===g9e);typeof DOMParser<"u"&&new DOMParser;La(t=>t.nodeType===f9e);La(t=>t.nodeType===m9e);const h9e=t=>PIe(t,(e,n)=>`${n}:${e};`).join(""),f9e=Qk.ELEMENT_NODE,m9e=Qk.TEXT_NODE,p9e=Qk.DOCUMENT_NODE,g9e=Qk.DOCUMENT_FRAGMENT_NODE;La(t=>t.nodeType===p9e);const Xd=Symbol,Kre=Xd(),Yre=Xd(),v9e=Xd(),y9e=Xd(),x9e=Xd(),Xre=Xd(),b9e=Xd(),vM=Xd(),w9e=Xd(),C9e=t=>{var s;t.length===1&&((s=t[0])==null?void 0:s.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const a=t[r];if(a===void 0)break;if(a.constructor===String||a.constructor===Number)e.push(a);else if(a.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const a=t[r];a instanceof Symbol||n.push(a)}return n},S9e={[Kre]:rd("font-weight","bold"),[Yre]:rd("font-weight","normal"),[v9e]:rd("color","blue"),[x9e]:rd("color","green"),[y9e]:rd("color","grey"),[Xre]:rd("color","red"),[b9e]:rd("color","purple"),[vM]:rd("color","orange"),[w9e]:rd("color","black")},k9e=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[],r=lc();let s=[],a=0;for(;a<t.length;a++){const o=t[a],l=S9e[o];if(l!==void 0)r.set(l.left,l.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const u=h9e(r);a>0||u.length>0?(e.push("%c"+o),n.push(u)):e.push(o)}else break}}for(a>0&&(s=n,s.unshift(e.join("")));a<t.length;a++){const o=t[a];o instanceof Symbol||s.push(o)}return s},Jre=MOe?k9e:C9e,E9e=(...t)=>{console.log(...Jre(t)),Qre.forEach(e=>e.print(t))},_9e=(...t)=>{console.warn(...Jre(t)),t.unshift(vM),Qre.forEach(e=>e.print(t))},Qre=Lg(),Zre=t=>({[Symbol.iterator](){return this},next:t}),T9e=(t,e)=>Zre(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),KA=(t,e)=>Zre(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class ese{constructor(e,n){this.clock=e,this.len=n}}class Zk{constructor(){this.clients=new Map}}const tse=(t,e,n)=>e.clients.forEach((r,s)=>{const a=t.doc.store.clients.get(s);if(a!=null){const i=a[a.length-1],o=i.id.clock+i.length;for(let l=0,u=r[l];l<r.length&&u.clock<o;u=r[++l])pse(t,a,u.clock,u.len,n)}}),A9e=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const s=vu((n+r)/2),a=t[s],i=a.clock;if(i<=e){if(e<i+a.len)return s;n=s+1}else r=s-1}return null},nse=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&A9e(n,e.clock)!==null},yM=t=>{t.clients.forEach(e=>{e.sort((s,a)=>s.clock-a.clock);let n,r;for(n=1,r=1;n<e.length;n++){const s=e[r-1],a=e[n];s.clock+s.len>=a.clock?s.len=Rv(s.len,a.clock+a.len-s.clock):(r<n&&(e[r]=a),r++)}e.length=r})},N9e=t=>{const e=new Zk;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,s)=>{if(!e.clients.has(s)){const a=r.slice();for(let i=n+1;i<t.length;i++)BIe(a,t[i].clients.get(s)||[]);e.clients.set(s,a)}});return yM(e),e},B4=(t,e,n,r)=>{$f(t.clients,e,()=>[]).push(new ese(n,r))},xM=(t,e)=>{Gn(t.restEncoder,e.clients.size),i0(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Gn(t.restEncoder,n);const s=r.length;Gn(t.restEncoder,s);for(let a=0;a<s;a++){const i=r[a];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},j9e=t=>{const e=new Zk,n=Pn(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const s=Pn(t.restDecoder),a=Pn(t.restDecoder);if(a>0){const i=$f(e.clients,s,()=>[]);for(let o=0;o<a;o++)i.push(new ese(t.readDsClock(),t.readDsLen()))}}return e},AV=(t,e,n)=>{const r=new Zk,s=Pn(t.restDecoder);for(let a=0;a<s;a++){t.resetDsCurVal();const i=Pn(t.restDecoder),o=Pn(t.restDecoder),l=n.clients.get(i)||[],u=Qs(n,i);for(let d=0;d<o;d++){const f=t.readDsClock(),m=f+t.readDsLen();if(f<u){u<m&&B4(r,i,u,m-u);let g=xu(l,f),x=l[g];for(!x.deleted&&x.id.clock<f&&(l.splice(g+1,0,V4(e,x,f-x.id.clock)),g++);g<l.length&&(x=l[g++],x.id.clock<m);)x.deleted||(m<x.id.clock+x.length&&l.splice(g,0,V4(e,x,m-x.id.clock)),x.delete(e))}else B4(r,i,f,m-f)}}if(r.clients.size>0){const a=new eE;return Gn(a.restEncoder,0),xM(a,r),a.toUint8Array()}return null},rse=_re;class Iv extends zIe{constructor({guid:e=yOe(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:a=null,autoLoad:i=!1,shouldLoad:o=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=rse(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new fse,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=i,this.meta=a,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=kV(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>kV(u=>{const d=f=>{(f===void 0||f===!0)&&(this.off("sync",d),u())};this.on("sync",d)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Gr(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(i0(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Gr(this,e,n)}get(e,n=Ja){const r=$f(this.share,e,()=>{const a=new n;return a._integrate(this,null),a}),s=r.constructor;if(n!==Ja&&s!==n)if(s===Ja){const a=new n;a._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=a}),a._start=r._start;for(let i=a._start;i!==null;i=i.right)i.parent=a;return a._length=r._length,this.share.set(e,a),a._integrate(this,null),a}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,yg)}getText(e=""){return this.get(e,Hg)}getMap(e=""){return this.get(e,Ug)}getXmlElement(e=""){return this.get(e,Vg)}getXmlFragment(e=""){return this.get(e,o0)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,i0(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Iv({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Gr(e.parent.doc,r=>{const s=n.doc;e.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class D9e{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Pn(this.restDecoder)}readDsLen(){return Pn(this.restDecoder)}}class sse extends D9e{readLeftID(){return _n(Pn(this.restDecoder),Pn(this.restDecoder))}readRightID(){return _n(Pn(this.restDecoder),Pn(this.restDecoder))}readClient(){return Pn(this.restDecoder)}readInfo(){return zg(this.restDecoder)}readString(){return Ym(this.restDecoder)}readParentInfo(){return Pn(this.restDecoder)===1}readTypeRef(){return Pn(this.restDecoder)}readLen(){return Pn(this.restDecoder)}readAny(){return V1(this.restDecoder)}readBuf(){return OOe(Eo(this.restDecoder))}readJSON(){return JSON.parse(Ym(this.restDecoder))}readKey(){return Ym(this.restDecoder)}}class R9e{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Pn(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Pn(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class L4 extends R9e{constructor(e){super(e),this.keys=[],Pn(e),this.keyClockDecoder=new qA(Eo(e)),this.clientDecoder=new NS(Eo(e)),this.leftClockDecoder=new qA(Eo(e)),this.rightClockDecoder=new qA(Eo(e)),this.infoDecoder=new SV(Eo(e),zg),this.stringDecoder=new pOe(Eo(e)),this.parentInfoDecoder=new SV(Eo(e),zg),this.typeRefDecoder=new NS(Eo(e)),this.lenDecoder=new NS(Eo(e))}readLeftID(){return new gg(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new gg(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return V1(this.restDecoder)}readBuf(){return Eo(this.restDecoder)}readJSON(){return V1(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class M9e{constructor(){this.restEncoder=uw()}toUint8Array(){return nc(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Gn(this.restEncoder,e)}writeDsLen(e){Gn(this.restEncoder,e)}}class ase extends M9e{writeLeftID(e){Gn(this.restEncoder,e.client),Gn(this.restEncoder,e.clock)}writeRightID(e){Gn(this.restEncoder,e.client),Gn(this.restEncoder,e.clock)}writeClient(e){Gn(this.restEncoder,e)}writeInfo(e){U1(this.restEncoder,e)}writeString(e){Km(this.restEncoder,e)}writeParentInfo(e){Gn(this.restEncoder,e?1:0)}writeTypeRef(e){Gn(this.restEncoder,e)}writeLen(e){Gn(this.restEncoder,e)}writeAny(e){H1(this.restEncoder,e)}writeBuf(e){ko(this.restEncoder,e)}writeJSON(e){Km(this.restEncoder,JSON.stringify(e))}writeKey(e){Km(this.restEncoder,e)}}class I9e{constructor(){this.restEncoder=uw(),this.dsCurrVal=0}toUint8Array(){return nc(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Gn(this.restEncoder,n)}writeDsLen(e){e===0&&io(),Gn(this.restEncoder,e-1),this.dsCurrVal+=e}}class eE extends I9e{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new VA,this.clientEncoder=new AS,this.leftClockEncoder=new VA,this.rightClockEncoder=new VA,this.infoEncoder=new bV(U1),this.stringEncoder=new oOe,this.parentInfoEncoder=new bV(U1),this.typeRefEncoder=new AS,this.lenEncoder=new AS}toUint8Array(){const e=uw();return Gn(e,0),ko(e,this.keyClockEncoder.toUint8Array()),ko(e,this.clientEncoder.toUint8Array()),ko(e,this.leftClockEncoder.toUint8Array()),ko(e,this.rightClockEncoder.toUint8Array()),ko(e,nc(this.infoEncoder)),ko(e,this.stringEncoder.toUint8Array()),ko(e,nc(this.parentInfoEncoder)),ko(e,this.typeRefEncoder.toUint8Array()),ko(e,this.lenEncoder.toUint8Array()),Hk(e,nc(this.restEncoder)),nc(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){H1(this.restEncoder,e)}writeBuf(e){ko(this.restEncoder,e)}writeJSON(e){H1(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const O9e=(t,e,n,r)=>{r=Rv(r,e[0].id.clock);const s=xu(e,r);Gn(t.restEncoder,e.length-s),t.writeClient(n),Gn(t.restEncoder,r);const a=e[s];a.write(t,r-a.id.clock);for(let i=s+1;i<e.length;i++)e[i].write(t,0)},ise=(t,e,n)=>{const r=new Map;n.forEach((s,a)=>{Qs(e,a)>s&&r.set(a,s)}),wM(e).forEach((s,a)=>{n.has(a)||r.set(a,0)}),Gn(t.restEncoder,r.size),i0(r.entries()).sort((s,a)=>a[0]-s[0]).forEach(([s,a])=>{O9e(t,e.clients.get(s),s,a)})},P9e=(t,e)=>{const n=lc(),r=Pn(t.restDecoder);for(let s=0;s<r;s++){const a=Pn(t.restDecoder),i=new Array(a),o=t.readClient();let l=Pn(t.restDecoder);n.set(o,{i:0,refs:i});for(let u=0;u<a;u++){const d=t.readInfo();switch($k&d){case 0:{const f=t.readLen();i[u]=new bl(_n(o,l),f),l+=f;break}case 10:{const f=Pn(t.restDecoder);i[u]=new Yl(_n(o,l),f),l+=f;break}default:{const f=(d&(Ad|Oo))===0,m=new ha(_n(o,l),null,(d&Oo)===Oo?t.readLeftID():null,null,(d&Ad)===Ad?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(d&z1)===z1?t.readString():null,Ose(t,d));i[u]=m,l+=m.length}}}}return n},F9e=(t,e,n)=>{const r=[];let s=i0(n.keys()).sort((g,x)=>g-x);if(s.length===0)return null;const a=()=>{if(s.length===0)return null;let g=n.get(s[s.length-1]);for(;g.refs.length===g.i;)if(s.pop(),s.length>0)g=n.get(s[s.length-1]);else return null;return g};let i=a();if(i===null)return null;const o=new fse,l=new Map,u=(g,x)=>{const b=l.get(g);(b==null||b>x)&&l.set(g,x)};let d=i.refs[i.i++];const f=new Map,m=()=>{for(const g of r){const x=g.id.client,b=n.get(x);b?(b.i--,o.clients.set(x,b.refs.slice(b.i)),n.delete(x),b.i=0,b.refs=[]):o.clients.set(x,[g]),s=s.filter(C=>C!==x)}r.length=0};for(;;){if(d.constructor!==Yl){const x=$f(f,d.id.client,()=>Qs(e,d.id.client))-d.id.clock;if(x<0)r.push(d),u(d.id.client,d.id.clock-1),m();else{const b=d.getMissing(t,e);if(b!==null){r.push(d);const C=n.get(b)||{refs:[],i:0};if(C.refs.length===C.i)u(b,Qs(e,b)),m();else{d=C.refs[C.i++];continue}}else(x===0||x<d.length)&&(d.integrate(t,x),f.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(i!==null&&i.i<i.refs.length)d=i.refs[i.i++];else{if(i=a(),i===null)break;d=i.refs[i.i++]}}if(o.clients.size>0){const g=new eE;return ise(g,o,new Map),Gn(g.restEncoder,0),{missing:l,update:g.toUint8Array()}}return null},B9e=(t,e)=>ise(t,e.doc.store,e.beforeState),L9e=(t,e,n,r=new L4(t))=>Gr(e,s=>{s.local=!1;let a=!1;const i=s.doc,o=i.store,l=P9e(r,i),u=F9e(s,o,l),d=o.pendingStructs;if(d){for(const[m,g]of d.missing)if(g<Qs(o,m)){a=!0;break}if(u){for(const[m,g]of u.missing){const x=d.missing.get(m);(x==null||x>g)&&d.missing.set(m,g)}d.update=jD([d.update,u.update])}}else o.pendingStructs=u;const f=AV(r,s,o);if(o.pendingDs){const m=new L4(qk(o.pendingDs));Pn(m.restDecoder);const g=AV(m,s,o);f&&g?o.pendingDs=jD([f,g]):o.pendingDs=f||g}else o.pendingDs=f;if(a){const m=o.pendingStructs.update;o.pendingStructs=null,ose(s.doc,m)}},n,!1),ose=(t,e,n,r=L4)=>{const s=qk(e);L9e(s,t,n,new r(s))},z9e=(t,e,n)=>ose(t,e,n,sse);let $9e=class{constructor(){this.l=[]}};const NV=()=>new $9e,jV=(t,e)=>t.l.push(e),DV=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(s=>e!==s),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},lse=(t,e,n)=>hM(t.l,[e,n]);class gg{constructor(e,n){this.client=e,this.clock=n}}const EC=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,_n=(t,e)=>new gg(t,e),RV=(t,e)=>{Gn(t,e.client),Gn(t,e.clock)},MV=t=>_n(Pn(t),Pn(t)),cse=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw io()};class bM{constructor(e,n,r,s=0){this.type=e,this.tname=n,this.item=r,this.assoc=s}}const U9e=t=>new bM(t.type==null?null:_n(t.type.client,t.type.clock),t.tname??null,t.item==null?null:_n(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class H9e{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const V9e=(t,e,n=0)=>new H9e(t,e,n),_C=(t,e,n)=>{let r=null,s=null;return t._item===null?s=cse(t):r=_n(t._item.id.client,t._item.id.clock),new bM(r,s,e,n)},use=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return _C(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return _C(t,_n(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return _C(t,r.lastId,n);r=r.right}return _C(t,null,n)},q9e=(t,e)=>{const{type:n,tname:r,item:s,assoc:a}=e;if(s!==null)Gn(t,0),RV(t,s);else if(r!==null)U1(t,1),Km(t,r);else if(n!==null)U1(t,2),RV(t,n);else throw io();return Uk(t,a),t},G9e=t=>{const e=uw();return q9e(e,t),nc(e)},W9e=t=>{let e=null,n=null,r=null;switch(Pn(t)){case 0:r=MV(t);break;case 1:n=Ym(t);break;case 2:e=MV(t)}const s=Ere(t)?Gk(t):0;return new bM(e,n,r,s)},dse=t=>W9e(qk(t)),K9e=(t,e)=>{const n=vg(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},hse=(t,e,n=!0)=>{const r=e.store,s=t.item,a=t.type,i=t.tname,o=t.assoc;let l=null,u=0;if(s!==null){if(Qs(r,s.client)<=s.clock)return null;const d=n?$V(r,s):K9e(r,s),f=d.item;if(!(f instanceof ha))return null;if(l=f.parent,l._item===null||!l._item.deleted){u=f.deleted||!f.countable?0:d.diff+(o>=0?0:1);let m=f.left;for(;m!==null;)!m.deleted&&m.countable&&(u+=m.length),m=m.left}}else{if(i!==null)l=e.get(i);else if(a!==null){if(Qs(r,a.client)<=a.clock)return null;const{item:d}=n?$V(r,a):{item:vg(r,a)};if(d instanceof ha&&d.content instanceof Au)l=d.content.type;else return null}else throw io();o>=0?u=l._length:u=0}return V9e(l,u,t.assoc)},qp=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!nse(e.ds,t.id),AD=(t,e)=>{const n=$f(t.meta,AD,Lg),r=t.doc.store;n.has(e)||(e.sv.forEach((s,a)=>{s<Qs(r,a)&&Cf(t,_n(a,s))}),tse(t,e.ds,s=>{}),n.add(e))};class fse{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const wM=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const s=n[n.length-1];e.set(r,s.id.clock+s.length)}),e},Qs=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},mse=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw io()}n.push(e)},xu=(t,e)=>{let n=0,r=t.length-1,s=t[r],a=s.id.clock;if(a===e)return r;let i=vu(e/(a+s.length-1)*r);for(;n<=r;){if(s=t[i],a=s.id.clock,a<=e){if(e<a+s.length)return i;n=i+1}else r=i-1;i=vu((n+r)/2)}throw io()},Y9e=(t,e)=>{const n=t.clients.get(e.client);return n[xu(n,e.clock)]},vg=Y9e,ND=(t,e,n)=>{const r=xu(e,n),s=e[r];return s.id.clock<n&&s instanceof ha?(e.splice(r+1,0,V4(t,s,n-s.id.clock)),r+1):r},Cf=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[ND(t,n,e.clock)]},IV=(t,e,n)=>{const r=e.clients.get(n.client),s=xu(r,n.clock),a=r[s];return n.clock!==a.id.clock+a.length-1&&a.constructor!==bl&&r.splice(s+1,0,V4(t,a,n.clock-a.id.clock+1)),a},X9e=(t,e,n)=>{const r=t.clients.get(e.id.client);r[xu(r,e.id.clock)]=n},pse=(t,e,n,r,s)=>{if(r===0)return;const a=n+r;let i=ND(t,e,n),o;do o=e[i++],a<o.id.clock+o.length&&ND(t,e,a),s(o);while(i<e.length&&e[i].id.clock<a)};class J9e{constructor(e,n,r){this.doc=e,this.deleteSet=new Zk,this.beforeState=wM(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const OV=(t,e)=>e.deleteSet.clients.size===0&&!FIe(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(yM(e.deleteSet),B9e(t,e),xM(t,e.deleteSet),!0),PV=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&$f(t.changed,e,Lg).add(n)},DS=(t,e)=>{let n=t[e],r=t[e-1],s=e;for(;s>0;n=r,r=t[--s-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof ha&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const a=e-s;return a&&t.splice(e+1-a,a),a},Q9e=(t,e,n)=>{for(const[r,s]of t.clients.entries()){const a=e.clients.get(r);for(let i=s.length-1;i>=0;i--){const o=s[i],l=o.clock+o.len;for(let u=xu(a,o.clock),d=a[u];u<a.length&&d.id.clock<l;d=a[++u]){const f=a[u];if(o.clock+o.len<=f.id.clock)break;f instanceof ha&&f.deleted&&!f.keep&&n(f)&&f.gc(e,!1)}}}},Z9e=(t,e)=>{t.clients.forEach((n,r)=>{const s=e.clients.get(r);for(let a=n.length-1;a>=0;a--){const i=n[a],o=wre(s.length-1,1+xu(s,i.clock+i.len-1));for(let l=o,u=s[l];l>0&&u.id.clock>=i.clock;u=s[l])l-=1+DS(s,l)}})},gse=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,s=r.store,a=n.deleteSet,i=n._mergeStructs;try{yM(a),n.afterState=wM(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const o=[];n.changed.forEach((l,u)=>o.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(n,l)})),o.push(()=>{n.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=u,d._path=null}),l.sort((d,f)=>d.path.length-f.path.length),o.push(()=>{lse(u._dEH,l,n)}))}),o.push(()=>r.emit("afterTransaction",[n,r])),o.push(()=>{n._needFormattingCleanup&&xPe(n)})}),hM(o,[])}finally{r.gc&&Q9e(a,s,r.gcFilter),Z9e(a,s),n.afterState.forEach((d,f)=>{const m=n.beforeState.get(f)||0;if(m!==d){const g=s.clients.get(f),x=Rv(xu(g,m),1);for(let b=g.length-1;b>=x;)b-=1+DS(g,b)}});for(let d=i.length-1;d>=0;d--){const{client:f,clock:m}=i[d].id,g=s.clients.get(f),x=xu(g,m);x+1<g.length&&DS(g,x+1)>1||x>0&&DS(g,x)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(E9e(vM,Kre,"[yjs] ",Yre,Xre,"Changed the client-id because another client seems to be using it."),r.clientID=rse()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new ase;OV(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new eE;OV(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:o,subdocsLoaded:l,subdocsRemoved:u}=n;(o.size>0||u.size>0||l.size>0)&&(o.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),u.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:o,removed:u},r,n]),u.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):gse(t,e+1)}}},Gr=(t,e,n=null,r=!0)=>{const s=t._transactionCleanups;let a=!1,i=null;t._transaction===null&&(a=!0,t._transaction=new J9e(t,n,r),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(a){const o=t._transaction===s[0];t._transaction=null,o&&gse(s,0)}}return i};function*ePe(t){const e=Pn(t.restDecoder);for(let n=0;n<e;n++){const r=Pn(t.restDecoder),s=t.readClient();let a=Pn(t.restDecoder);for(let i=0;i<r;i++){const o=t.readInfo();if(o===10){const l=Pn(t.restDecoder);yield new Yl(_n(s,a),l),a+=l}else if(($k&o)!==0){const l=(o&(Ad|Oo))===0,u=new ha(_n(s,a),null,(o&Oo)===Oo?t.readLeftID():null,null,(o&Ad)===Ad?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(o&z1)===z1?t.readString():null,Ose(t,o));yield u,a+=u.length}else{const l=t.readLen();yield new bl(_n(s,a),l),a+=l}}}}class tPe{constructor(e,n){this.gen=ePe(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Yl);return this.curr}}class nPe{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const rPe=t=>jD(t,sse,ase),sPe=(t,e)=>{if(t.constructor===bl){const{client:n,clock:r}=t.id;return new bl(_n(n,r+e),t.length-e)}else if(t.constructor===Yl){const{client:n,clock:r}=t.id;return new Yl(_n(n,r+e),t.length-e)}else{const n=t,{client:r,clock:s}=n.id;return new ha(_n(r,s+e),null,_n(r,s+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},jD=(t,e=L4,n=eE)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(qk(d)));let s=r.map(d=>new tPe(d,!0)),a=null;const i=new n,o=new nPe(i);for(;s=s.filter(m=>m.curr!==null),s.sort((m,g)=>{if(m.curr.id.client===g.curr.id.client){const x=m.curr.id.clock-g.curr.id.clock;return x===0?m.curr.constructor===g.curr.constructor?0:m.curr.constructor===Yl?1:-1:x}else return g.curr.id.client-m.curr.id.client}),s.length!==0;){const d=s[0],f=d.curr.id.client;if(a!==null){let m=d.curr,g=!1;for(;m!==null&&m.id.clock+m.length<=a.struct.id.clock+a.struct.length&&m.id.client>=a.struct.id.client;)m=d.next(),g=!0;if(m===null||m.id.client!==f||g&&m.id.clock>a.struct.id.clock+a.struct.length)continue;if(f!==a.struct.id.client)ex(o,a.struct,a.offset),a={struct:m,offset:0},d.next();else if(a.struct.id.clock+a.struct.length<m.id.clock)if(a.struct.constructor===Yl)a.struct.length=m.id.clock+m.length-a.struct.id.clock;else{ex(o,a.struct,a.offset);const x=m.id.clock-a.struct.id.clock-a.struct.length;a={struct:new Yl(_n(f,a.struct.id.clock+a.struct.length),x),offset:0}}else{const x=a.struct.id.clock+a.struct.length-m.id.clock;x>0&&(a.struct.constructor===Yl?a.struct.length-=x:m=sPe(m,x)),a.struct.mergeWith(m)||(ex(o,a.struct,a.offset),a={struct:m,offset:0},d.next())}}else a={struct:d.curr,offset:0},d.next();for(let m=d.curr;m!==null&&m.id.client===f&&m.id.clock===a.struct.id.clock+a.struct.length&&m.constructor!==Yl;m=d.next())ex(o,a.struct,a.offset),a={struct:m,offset:0}}a!==null&&(ex(o,a.struct,a.offset),a=null),aPe(o);const l=r.map(d=>j9e(d)),u=N9e(l);return xM(i,u),i.toUint8Array()},vse=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:nc(t.encoder.restEncoder)}),t.encoder.restEncoder=uw(),t.written=0)},ex=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&vse(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Gn(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},aPe=t=>{vse(t);const e=t.encoder.restEncoder;Gn(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Gn(e,r.written),Hk(e,r.restEncoder)}},FV="You must not compute changes after the event-handler fired.";class tE{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=iPe(this.currentTarget,this.target))}deletes(e){return nse(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw yu(FV);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const a=n._map.get(s);let i,o;if(this.adds(a)){let l=a.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(a))if(l!==null&&this.deletes(l))i="delete",o=$A(l.content.getContent());else return;else l!==null&&this.deletes(l)?(i="update",o=$A(l.content.getContent())):(i="add",o=void 0)}else if(this.deletes(a))i="delete",o=$A(a.content.getContent());else return;e.set(s,{action:i,oldValue:o})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw yu(FV);const n=this.target,r=Lg(),s=Lg(),a=[];if(e={added:r,deleted:s,delta:a,keys:this.keys},this.transaction.changed.get(n).has(null)){let o=null;const l=()=>{o&&a.push(o)};for(let u=n._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((o===null||o.delete===void 0)&&(l(),o={delete:0}),o.delete+=u.length,s.add(u)):this.adds(u)?((o===null||o.insert===void 0)&&(l(),o={insert:[]}),o.insert=o.insert.concat(u.content.getContent()),r.add(u)):((o===null||o.retain===void 0)&&(l(),o={retain:0}),o.retain+=u.length);o!==null&&o.retain===void 0&&l()}this._changes=e}return e}}const iPe=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(r+=s.length),s=s.right;n.unshift(r)}e=e._item.parent}return n},hi=()=>{_9e("Invalid access: Add Yjs type to a document before reading data.")},yse=80;let CM=0;class oPe{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=CM++}}const lPe=t=>{t.timestamp=CM++},xse=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=CM++},cPe=(t,e,n)=>{if(t.length>=yse){const r=t.reduce((s,a)=>s.timestamp<a.timestamp?s:a);return xse(r,e,n),r}else{const r=new oPe(e,n);return t.push(r),r}},nE=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((a,i)=>TS(e-a.index)<TS(e-i.index)?a:i);let r=t._start,s=0;for(n!==null&&(r=n.p,s=n.index,lPe(n));r.right!==null&&s<e;){if(!r.deleted&&r.countable){if(e<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>e;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&TS(n.index-s)<r.parent.length/yse?(xse(n,r,s),n):cPe(t._searchMarker,r,s)},K1=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const s=t[r];if(n>0){let a=s.p;for(a.marker=!1;a&&(a.deleted||!a.countable);)a=a.left,a&&!a.deleted&&a.countable&&(s.index-=a.length);if(a===null||a.marker===!0){t.splice(r,1);continue}s.p=a,a.marker=!0}(e<s.index||n>0&&e===s.index)&&(s.index=Rv(e,s.index+n))}},rE=(t,e,n)=>{const r=t,s=e.changedParentTypes;for(;$f(s,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;lse(r._eH,n,e)};class Ja{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=NV(),this._dEH=NV(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw cc()}clone(){throw cc()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){jV(this._eH,e)}observeDeep(e){jV(this._dEH,e)}unobserve(e){DV(this._eH,e)}unobserveDeep(e){DV(this._dEH,e)}toJSON(){}}const bse=(t,e,n)=>{t.doc??hi(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const s=[];let a=t._start;for(;a!==null&&r>0;){if(a.countable&&!a.deleted){const i=a.content.getContent();if(i.length<=e)e-=i.length;else{for(let o=e;o<i.length&&r>0;o++)s.push(i[o]),r--;e=0}}a=a.right}return s},wse=t=>{t.doc??hi();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)e.push(r[s])}n=n.right}return e},Y1=(t,e)=>{let n=0,r=t._start;for(t.doc??hi();r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let a=0;a<s.length;a++)e(s[a],n++,t)}r=r.right}},Cse=(t,e)=>{const n=[];return Y1(t,(r,s)=>{n.push(e(r,s,t))}),n},uPe=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},Sse=(t,e)=>{t.doc??hi();const n=nE(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},z4=(t,e,n,r)=>{let s=n;const a=t.doc,i=a.clientID,o=a.store,l=n===null?e._start:n.right;let u=[];const d=()=>{u.length>0&&(s=new ha(_n(i,Qs(o,i)),s,s&&s.lastId,l,l&&l.id,e,null,new l0(u)),s.integrate(t,0),u=[])};r.forEach(f=>{if(f===null)u.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(f);break;default:switch(d(),f.constructor){case Uint8Array:case ArrayBuffer:s=new ha(_n(i,Qs(o,i)),s,s&&s.lastId,l,l&&l.id,e,null,new hw(new Uint8Array(f))),s.integrate(t,0);break;case Iv:s=new ha(_n(i,Qs(o,i)),s,s&&s.lastId,l,l&&l.id,e,null,new fw(f)),s.integrate(t,0);break;default:if(f instanceof Ja)s=new ha(_n(i,Qs(o,i)),s,s&&s.lastId,l,l&&l.id,e,null,new Au(f)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},kse=()=>yu("Length exceeded!"),Ese=(t,e,n,r)=>{if(n>e._length)throw kse();if(n===0)return e._searchMarker&&K1(e._searchMarker,n,r.length),z4(t,e,null,r);const s=n,a=nE(e,n);let i=e._start;for(a!==null&&(i=a.p,n-=a.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&Cf(t,_n(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&K1(e._searchMarker,s,r.length),z4(t,e,i,r)},dPe=(t,e,n)=>{let s=(e._searchMarker||[]).reduce((a,i)=>i.index>a.index?i:a,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return z4(t,e,s,n)},_se=(t,e,n,r)=>{if(r===0)return;const s=n,a=r,i=nE(e,n);let o=e._start;for(i!==null&&(o=i.p,n-=i.index);o!==null&&n>0;o=o.right)!o.deleted&&o.countable&&(n<o.length&&Cf(t,_n(o.id.client,o.id.clock+n)),n-=o.length);for(;r>0&&o!==null;)o.deleted||(r<o.length&&Cf(t,_n(o.id.client,o.id.clock+r)),o.delete(t),r-=o.length),o=o.right;if(r>0)throw kse();e._searchMarker&&K1(e._searchMarker,s,-a+r)},$4=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},SM=(t,e,n,r)=>{const s=e._map.get(n)||null,a=t.doc,i=a.clientID;let o;if(r==null)o=new l0([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:o=new l0([r]);break;case Uint8Array:o=new hw(r);break;case Iv:o=new fw(r);break;default:if(r instanceof Ja)o=new Au(r);else throw new Error("Unexpected content type")}new ha(_n(i,Qs(a.store,i)),s,s&&s.lastId,null,null,e,n,o).integrate(t,0)},kM=(t,e)=>{t.doc??hi();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Tse=t=>{const e={};return t.doc??hi(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},Ase=(t,e)=>{t.doc??hi();const n=t._map.get(e);return n!==void 0&&!n.deleted},hPe=(t,e)=>{const n={};return t._map.forEach((r,s)=>{let a=r;for(;a!==null&&(!e.sv.has(a.id.client)||a.id.clock>=(e.sv.get(a.id.client)||0));)a=a.left;a!==null&&qp(a,e)&&(n[s]=a.content.getContent()[a.length-1])}),n},TC=t=>(t.doc??hi(),T9e(t._map.entries(),e=>!e[1].deleted));class fPe extends tE{}class yg extends Ja{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new yg;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new yg}clone(){const e=new yg;return e.insert(0,this.toArray().map(n=>n instanceof Ja?n.clone():n)),e}get length(){return this.doc??hi(),this._length}_callObserver(e,n){super._callObserver(e,n),rE(this,e,new fPe(this,e))}insert(e,n){this.doc!==null?Gr(this.doc,r=>{Ese(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Gr(this.doc,n=>{dPe(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Gr(this.doc,r=>{_se(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Sse(this,e)}toArray(){return wse(this)}slice(e=0,n=this.length){return bse(this,e,n)}toJSON(){return this.map(e=>e instanceof Ja?e.toJSON():e)}map(e){return Cse(this,e)}forEach(e){Y1(this,e)}[Symbol.iterator](){return uPe(this)}_write(e){e.writeTypeRef(FPe)}}const mPe=t=>new yg;class pPe extends tE{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Ug extends Ja{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new Ug}clone(){const e=new Ug;return this.forEach((n,r)=>{e.set(r,n instanceof Ja?n.clone():n)}),e}_callObserver(e,n){rE(this,e,new pPe(this,e,n))}toJSON(){this.doc??hi();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];e[r]=s instanceof Ja?s.toJSON():s}}),e}get size(){return[...TC(this)].length}keys(){return KA(TC(this),e=>e[0])}values(){return KA(TC(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return KA(TC(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??hi(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Gr(this.doc,n=>{$4(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Gr(this.doc,r=>{SM(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return kM(this,e)}has(e){return Ase(this,e)}clear(){this.doc!==null?Gr(this.doc,e=>{this.forEach(function(n,r,s){$4(e,s,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(BPe)}}const gPe=t=>new Ug,Qh=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&TOe(t,e);class DD{constructor(e,n,r,s){this.left=e,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&io(),this.right.content.constructor){case xa:this.right.deleted||Ov(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const BV=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case xa:e.right.deleted||Ov(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Cf(t,_n(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},AC=(t,e,n,r)=>{const s=new Map,a=r?nE(e,n):null;if(a){const i=new DD(a.p.left,a.p,a.index,s);return BV(t,i,n-a.index)}else{const i=new DD(null,e._start,0,s);return BV(t,i,n)}},Nse=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===xa&&Qh(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=t.doc,a=s.clientID;r.forEach((i,o)=>{const l=n.left,u=n.right,d=new ha(_n(a,Qs(s.store,a)),l,l&&l.lastId,u,u&&u.id,e,null,new xa(o,i));d.integrate(t,0),n.right=d,n.forward()})},Ov=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},jse=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===xa&&Qh(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},Dse=(t,e,n,r)=>{const s=t.doc,a=s.clientID,i=new Map;for(const o in r){const l=r[o],u=n.currentAttributes.get(o)??null;if(!Qh(u,l)){i.set(o,u);const{left:d,right:f}=n;n.right=new ha(_n(a,Qs(s.store,a)),d,d&&d.lastId,f,f&&f.id,e,null,new xa(o,l)),n.right.integrate(t,0),n.forward()}}return i},YA=(t,e,n,r,s)=>{n.currentAttributes.forEach((m,g)=>{s[g]===void 0&&(s[g]=null)});const a=t.doc,i=a.clientID;jse(n,s);const o=Dse(t,e,n,s),l=r.constructor===String?new bu(r):r instanceof Ja?new Au(r):new A0(r);let{left:u,right:d,index:f}=n;e._searchMarker&&K1(e._searchMarker,n.index,l.getLength()),d=new ha(_n(i,Qs(a.store,i)),u,u&&u.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=f,n.forward(),Nse(t,e,n,o)},LV=(t,e,n,r,s)=>{const a=t.doc,i=a.clientID;jse(n,s);const o=Dse(t,e,n,s);e:for(;n.right!==null&&(r>0||o.size>0&&(n.right.deleted||n.right.content.constructor===xa));){if(!n.right.deleted)switch(n.right.content.constructor){case xa:{const{key:l,value:u}=n.right.content,d=s[l];if(d!==void 0){if(Qh(d,u))o.delete(l);else{if(r===0)break e;o.set(l,u)}n.right.delete(t)}else n.currentAttributes.set(l,u);break}default:r<n.right.length&&Cf(t,_n(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new ha(_n(i,Qs(a.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new bu(l)),n.right.integrate(t,0),n.forward()}Nse(t,e,n,o)},Rse=(t,e,n,r,s)=>{let a=e;const i=lc();for(;a&&(!a.countable||a.deleted);){if(!a.deleted&&a.content.constructor===xa){const u=a.content;i.set(u.key,u)}a=a.right}let o=0,l=!1;for(;e!==a;){if(n===e&&(l=!0),!e.deleted){const u=e.content;switch(u.constructor){case xa:{const{key:d,value:f}=u,m=r.get(d)??null;(i.get(d)!==u||m===f)&&(e.delete(t),o++,!l&&(s.get(d)??null)===f&&m!==f&&(m===null?s.delete(d):s.set(d,m))),!l&&!e.deleted&&Ov(s,u);break}}}e=e.right}return o},vPe=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===xa){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},yPe=t=>{let e=0;return Gr(t.doc,n=>{let r=t._start,s=t._start,a=lc();const i=SD(a);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case xa:Ov(i,s.content);break;default:e+=Rse(n,r,s,a,i),a=SD(i),r=s;break}s=s.right}}),e},xPe=t=>{const e=new Set,n=t.doc;for(const[r,s]of t.afterState.entries()){const a=t.beforeState.get(r)||0;s!==a&&pse(t,n.store.clients.get(r),a,s,i=>{!i.deleted&&i.content.constructor===xa&&i.constructor!==bl&&e.add(i.parent)})}Gr(n,r=>{tse(t,t.deleteSet,s=>{if(s instanceof bl||!s.parent._hasFormatting||e.has(s.parent))return;const a=s.parent;s.content.constructor===xa?e.add(a):vPe(r,s)});for(const s of e)yPe(s)})},zV=(t,e,n)=>{const r=n,s=SD(e.currentAttributes),a=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Au:case A0:case bu:n<e.right.length&&Cf(t,_n(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}a&&Rse(t,a,e.right,s,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&K1(i._searchMarker,e.index,-r+n),e};class Mse extends tE{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Gr(e,r=>{const s=new Map,a=new Map;let i=this.target._start,o=null;const l={};let u="",d=0,f=0;const m=()=>{if(o!==null){let g=null;switch(o){case"delete":f>0&&(g={delete:f}),f=0;break;case"insert":(typeof u=="object"||u.length>0)&&(g={insert:u},s.size>0&&(g.attributes={},s.forEach((x,b)=>{x!==null&&(g.attributes[b]=x)}))),u="";break;case"retain":d>0&&(g={retain:d},_Oe(l)||(g.attributes=SOe({},l))),d=0;break}g&&n.push(g),o=null}};for(;i!==null;){switch(i.content.constructor){case Au:case A0:this.adds(i)?this.deletes(i)||(m(),o="insert",u=i.content.getContent()[0],m()):this.deletes(i)?(o!=="delete"&&(m(),o="delete"),f+=1):i.deleted||(o!=="retain"&&(m(),o="retain"),d+=1);break;case bu:this.adds(i)?this.deletes(i)||(o!=="insert"&&(m(),o="insert"),u+=i.content.str):this.deletes(i)?(o!=="delete"&&(m(),o="delete"),f+=i.length):i.deleted||(o!=="retain"&&(m(),o="retain"),d+=i.length);break;case xa:{const{key:g,value:x}=i.content;if(this.adds(i)){if(!this.deletes(i)){const b=s.get(g)??null;Qh(b,x)?x!==null&&i.delete(r):(o==="retain"&&m(),Qh(x,a.get(g)??null)?delete l[g]:l[g]=x)}}else if(this.deletes(i)){a.set(g,x);const b=s.get(g)??null;Qh(b,x)||(o==="retain"&&m(),l[g]=b)}else if(!i.deleted){a.set(g,x);const b=l[g];b!==void 0&&(Qh(b,x)?b!==null&&i.delete(r):(o==="retain"&&m(),x===null?delete l[g]:l[g]=x))}i.deleted||(o==="insert"&&m(),Ov(s,i.content));break}}i=i.right}for(m();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Hg extends Ja{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??hi(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Hg}clone(){const e=new Hg;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new Mse(this,e,n);rE(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??hi();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===bu&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Gr(this.doc,r=>{const s=new DD(null,this._start,0,new Map);for(let a=0;a<e.length;a++){const i=e[a];if(i.insert!==void 0){const o=!n&&typeof i.insert=="string"&&a===e.length-1&&s.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof o!="string"||o.length>0)&&YA(r,this,s,o,i.attributes||{})}else i.retain!==void 0?LV(r,this,s,i.retain,i.attributes||{}):i.delete!==void 0&&zV(r,s,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??hi();const s=[],a=new Map,i=this.doc;let o="",l=this._start;function u(){if(o.length>0){const f={};let m=!1;a.forEach((x,b)=>{m=!0,f[b]=x});const g={insert:o};m&&(g.attributes=f),s.push(g),o=""}}const d=()=>{for(;l!==null;){if(qp(l,e)||n!==void 0&&qp(l,n))switch(l.content.constructor){case bu:{const f=a.get("ychange");e!==void 0&&!qp(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(u(),a.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!qp(l,n)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(u(),a.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(u(),a.delete("ychange")),o+=l.content.str;break}case Au:case A0:{u();const f={insert:l.content.getContent()[0]};if(a.size>0){const m={};f.attributes=m,a.forEach((g,x)=>{m[x]=g})}s.push(f);break}case xa:qp(l,e)&&(u(),Ov(a,l.content));break}l=l.right}u()};return e||n?Gr(i,f=>{e&&AD(f,e),n&&AD(f,n),d()},"cleanup"):d(),s}insert(e,n,r){if(n.length<=0)return;const s=this.doc;s!==null?Gr(s,a=>{const i=AC(a,this,e,!r);r||(r={},i.currentAttributes.forEach((o,l)=>{r[l]=o})),YA(a,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const s=this.doc;s!==null?Gr(s,a=>{const i=AC(a,this,e,!r);YA(a,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Gr(r,s=>{zV(s,AC(s,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const s=this.doc;s!==null?Gr(s,a=>{const i=AC(a,this,e,!1);i.right!==null&&LV(a,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Gr(this.doc,n=>{$4(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Gr(this.doc,r=>{SM(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return kM(this,e)}getAttributes(){return Tse(this)}_write(e){e.writeTypeRef(LPe)}}const bPe=t=>new Hg;class XA{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??hi()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Vg||n.constructor===o0)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class o0 extends Ja{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new o0}clone(){const e=new o0;return e.insert(0,this.toArray().map(n=>n instanceof Ja?n.clone():n)),e}get length(){return this.doc??hi(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new XA(this,e)}querySelector(e){e=e.toUpperCase();const r=new XA(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),i0(new XA(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){rE(this,e,new SPe(this,n,e))}toString(){return Cse(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const s=e.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),Y1(this,a=>{s.insertBefore(a.toDOM(e,n,r),null)}),s}insert(e,n){this.doc!==null?Gr(this.doc,r=>{Ese(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Gr(this.doc,r=>{const s=e&&e instanceof Ja?e._item:e;z4(r,this,s,n)});else{const r=this._prelimContent,s=e===null?0:r.findIndex(a=>a===e)+1;if(s===0&&e!==null)throw yu("Reference item not found");r.splice(s,0,...n)}}delete(e,n=1){this.doc!==null?Gr(this.doc,r=>{_se(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return wse(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Sse(this,e)}slice(e=0,n=this.length){return bse(this,e,n)}forEach(e){Y1(this,e)}_write(e){e.writeTypeRef($Pe)}}const wPe=t=>new o0;class Vg extends o0{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new Vg(this.nodeName)}clone(){const e=new Vg(this.nodeName),n=this.getAttributes();return EOe(n,(r,s)=>{e.setAttribute(s,r)}),e.insert(0,this.toArray().map(r=>r instanceof Ja?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const o in e)r.push(o);r.sort();const s=r.length;for(let o=0;o<s;o++){const l=r[o];n.push(l+'="'+e[l]+'"')}const a=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${a}${i}>${super.toString()}</${a}>`}removeAttribute(e){this.doc!==null?Gr(this.doc,n=>{$4(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Gr(this.doc,r=>{SM(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return kM(this,e)}hasAttribute(e){return Ase(this,e)}getAttributes(e){return e?hPe(this,e):Tse(this)}toDOM(e=document,n={},r){const s=e.createElement(this.nodeName),a=this.getAttributes();for(const i in a){const o=a[i];typeof o=="string"&&s.setAttribute(i,o)}return Y1(this,i=>{s.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(zPe),e.writeKey(this.nodeName)}}const CPe=t=>new Vg(t.readKey());class SPe extends tE{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class U4 extends Ug{constructor(e){super(),this.hookName=e}_copy(){return new U4(this.hookName)}clone(){const e=new U4(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const s=n[this.hookName];let a;return s!==void 0?a=s.createDom(this):a=document.createElement(this.hookName),a.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(a,this),a}_write(e){e.writeTypeRef(UPe),e.writeKey(this.hookName)}}const kPe=t=>new U4(t.readKey());class Oa extends Hg{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Oa}clone(){const e=new Oa;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const s=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const n=[];for(const s in e.attributes){const a=[];for(const i in e.attributes[s])a.push({key:i,value:e.attributes[s][i]});a.sort((i,o)=>i.key<o.key?-1:1),n.push({nodeName:s,attrs:a})}n.sort((s,a)=>s.nodeName<a.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const a=n[s];r+=`<${a.nodeName}`;for(let i=0;i<a.attrs.length;i++){const o=a.attrs[i];r+=` ${o.key}="${o.value}"`}r+=">"}r+=e.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(HPe)}}const EPe=t=>new Oa;class EM{constructor(e,n){this.id=e,this.length=n}get deleted(){throw cc()}mergeWith(e){return!1}write(e,n,r){throw cc()}integrate(e,n){throw cc()}}const _Pe=0;class bl extends EM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),mse(e.doc.store,this)}write(e,n){e.writeInfo(_Pe),e.writeLen(this.length-n)}getMissing(e,n){return null}}class hw{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new hw(this.content)}splice(e){throw cc()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const TPe=t=>new hw(t.readBuf());class X1{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new X1(this.len)}splice(e){const n=new X1(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){B4(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const APe=t=>new X1(t.readLen()),Ise=(t,e)=>new Iv({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class fw{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new fw(Ise(this.doc.guid,this.opts))}splice(e){throw cc()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const NPe=t=>new fw(Ise(t.readString(),t.readAny()));class A0{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new A0(this.embed)}splice(e){throw cc()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const jPe=t=>new A0(t.readJSON());class xa{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new xa(this.key,this.value)}splice(e){throw cc()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const DPe=t=>new xa(t.readKey(),t.readJSON());class H4{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new H4(this.arr)}splice(e){const n=new H4(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const a=this.arr[s];e.writeString(a===void 0?"undefined":JSON.stringify(a))}}getRef(){return 2}}const RPe=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const s=t.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new H4(n)},MPe=I4("node_env")==="development";class l0{constructor(e){this.arr=e,MPe&&Nre(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new l0(this.arr)}splice(e){const n=new l0(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const a=this.arr[s];e.writeAny(a)}}getRef(){return 8}}const IPe=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new l0(n)};class bu{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new bu(this.str)}splice(e){const n=new bu(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const OPe=t=>new bu(t.readString()),PPe=[mPe,gPe,bPe,CPe,wPe,kPe,EPe],FPe=0,BPe=1,LPe=2,zPe=3,$Pe=4,UPe=5,HPe=6;class Au{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Au(this.type._copy())}splice(e){throw cc()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const VPe=t=>new Au(PPe[t.readTypeRef()](t)),$V=(t,e)=>{let n=e,r=0,s;do r>0&&(n=_n(n.client,n.clock+r)),s=vg(t,n),r=n.clock-s.id.clock,n=s.redone;while(n!==null&&s instanceof ha);return{item:s,diff:r}},V4=(t,e,n)=>{const{client:r,clock:s}=e.id,a=new ha(_n(r,s+n),e,_n(r,s+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&a.markDeleted(),e.keep&&(a.keep=!0),e.redone!==null&&(a.redone=_n(e.redone.client,e.redone.clock+n)),e.right=a,a.right!==null&&(a.right.left=a),t._mergeStructs.push(a),a.parentSub!==null&&a.right===null&&a.parent._map.set(a.parentSub,a),e.length=n,a};let ha=class RD extends EM{constructor(e,n,r,s,a,i,o,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=a,this.parent=i,this.parentSub=o,this.redone=null,this.content=l,this.info=this.content.isCountable()?gV:0}set marker(e){(this.info&HA)>0!==e&&(this.info^=HA)}get marker(){return(this.info&HA)>0}get keep(){return(this.info&pV)>0}set keep(e){this.keep!==e&&(this.info^=pV)}get countable(){return(this.info&gV)>0}get deleted(){return(this.info&UA)>0}set deleted(e){this.deleted!==e&&(this.info^=UA)}markDeleted(){this.info|=UA}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Qs(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Qs(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===gg&&this.id.client!==this.parent.client&&this.parent.clock>=Qs(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=IV(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Cf(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===bl||this.right&&this.right.constructor===bl)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===RD?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===RD&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===gg){const r=vg(n,this.parent);r.constructor===bl?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=IV(e,e.doc.store,_n(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const a=new Set,i=new Set;for(;s!==null&&s!==this.right;){if(i.add(s),a.add(s),EC(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,a.clear();else if(EC(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&i.has(vg(e.doc.store,s.origin)))a.has(vg(e.doc.store,s.origin))||(r=s,a.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),mse(e.doc.store,this),this.content.integrate(e,this),PV(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new bl(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:_n(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&EC(e.origin,this.lastId)&&this.right===e&&EC(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),B4(e.deleteSet,this.id.client,this.id.clock,this.length),PV(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw io();this.content.gc(e),n?X9e(e,this,new bl(this.id,this.length)):this.content=new X1(this.length)}write(e,n){const r=n>0?_n(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,a=this.parentSub,i=this.content.getRef()&$k|(r===null?0:Oo)|(s===null?0:Ad)|(a===null?0:z1);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),s!==null&&e.writeRightID(s),r===null&&s===null){const o=this.parent;if(o._item!==void 0){const l=o._item;if(l===null){const u=cse(o);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else o.constructor===String?(e.writeParentInfo(!0),e.writeString(o)):o.constructor===gg?(e.writeParentInfo(!1),e.writeLeftID(o)):io();a!==null&&e.writeString(a)}this.content.write(e,n)}};const Ose=(t,e)=>qPe[e&$k](t),qPe=[()=>{io()},APe,RPe,TPe,OPe,jPe,DPe,VPe,IPe,NPe,()=>{io()}],GPe=10;class Yl extends EM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){io()}write(e,n){e.writeInfo(GPe),Gn(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const Pse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Fse="__ $YJS$ __";Pse[Fse]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Pse[Fse]=!0;var WPe=Object.defineProperty,KPe=Object.defineProperties,YPe=Object.getOwnPropertyDescriptors,q4=Object.getOwnPropertySymbols,Bse=Object.prototype.hasOwnProperty,Lse=Object.prototype.propertyIsEnumerable,UV=(t,e,n)=>e in t?WPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ri=(t,e)=>{for(var n in e||(e={}))Bse.call(e,n)&&UV(t,n,e[n]);if(q4)for(var n of q4(e))Lse.call(e,n)&&UV(t,n,e[n]);return t},Pv=(t,e)=>KPe(t,YPe(e)),XPe=(t,e)=>{var n={};for(var r in t)Bse.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&q4)for(var r of q4(t))e.indexOf(r)<0&&Lse.call(t,r)&&(n[r]=t[r]);return n};function HV(t){return Object.prototype.toString.call(t)==="[object Object]"}function VV(t){if(!HV(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(HV(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)}function _M(t,e){for(const n in t){const r=t[n],s=e[n];if(VV(r)&&VV(s)){if(!_M(r,s))return!1}else if(Array.isArray(r)&&Array.isArray(s)){if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1}else if(r!==s)return!1}for(const n in e)if(t[n]===void 0&&e[n]!==void 0)return!1;return!0}function JPe(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.includes(n)))}function QPe(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>!e.includes(n)))}function ZPe(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==null))}function eFe(t){var e,n;const r=[];for(const s of t){if(typeof s.insert=="string"&&s.insert.length===0)continue;const a=r[r.length-1];if(!a||typeof a.insert!="string"||typeof s.insert!="string"){r.push(s);continue}if(a.attributes===s.attributes||!a.attributes==!s.attributes&&_M((e=a.attributes)!=null?e:{},(n=s.attributes)!=null?n:{})){a.insert+=s.insert;continue}r.push(s)}return r}function Jd(t){return eFe(t.toDelta())}function zse({insert:t}){return typeof t=="string"?t.length:1}function $se(t){return t.reduce((e,n)=>e+zse(n),0)}function Use(t,e,n){if(n<1)return[];let r=0;const s=[],a=e+n;for(let i=0;i<t.length&&!(r>=a);i++){const o=t[i],l=zse(o);if(r+l<=e){r+=l;continue}if(typeof o.insert!="string"){r+=l,s.push(o);continue}const u=Math.max(0,e-r),d=Math.min(l,l-(r+l-a));s.push(Pv(Ri({},o),{insert:o.insert.slice(u,d)})),r+=l}return s}function wd(t){return QPe(t,mt.isText(t)?"text":"children")}function Hse(t){const e=Jd(t),n=e.length>0?e.map(MD):[{text:""}];return Pv(Ri({},t.getAttributes()),{children:n})}function MD(t){return typeof t.insert=="string"?Pv(Ri({},t.attributes),{text:t.insert}):Hse(t.insert)}function tFe(t){return t.map(e=>mt.isText(e)?{insert:e.text,attributes:wd(e)}:{insert:Vse(e)})}function Vse(t){var e=t,{children:n}=e,r=XPe(e,["children"]);const s=new Oa;return Object.entries(r).forEach(([a,i])=>{s.setAttribute(a,i)}),s.applyDelta(tFe(n),{sanitize:!1}),s}function J1(t){return t?mt.isText(t)?t.text.length:1:0}function nFe(t,e){return t.children.slice(0,e).reduce((n,r)=>n+J1(r),0)}function Vo(t,e,n){var r;if(n.length===0)throw new Error("Path has to a have a length >= 1");if(mt.isText(e))throw new Error("Cannot descent into slate text");const[s,...a]=n,i=nFe(e,s),o=e.children[s],l=Jd(t),u=J1(o),d=Use(l,i,u);if(d.length>1)throw new Error("Path doesn't match yText, yTarget spans multiple nodes");const f=(r=d[0])==null?void 0:r.insert;if(a.length>0){if(!(f instanceof Oa))throw new Error("Path doesn't match yText, cannot descent into non-yText");return Vo(f,o,a)}return{yParent:t,textRange:{start:i,end:i+u},yTarget:f instanceof Oa?f:void 0,slateParent:e,slateTarget:o,targetDelta:d}}function Dm(t,e,n={}){const{assoc:r=0,insert:s=!1}=n;let a=0,i=0;for(let u=0;u<t.children.length;u++){const d=t.children[u],f=mt.isText(d)?d.text.length:1;f>0&&(i=u);const m=a+f;if(f>0&&(r>=0?m>e:m>=e))return[u,e-a];a+=f}if(e>a+(s?1:0))throw new Error("yOffset out of bounds");if(s)return[t.children.length,0];const o=t.children[i],l=mt.isText(o)?o.text.length:1;return[i,l]}function qse(t,e,n){const r=[n];for(;r[0]!==t;){const{parent:a}=r[0];if(!a)throw new Error("yText isn't a descendant of root element");if(!(a instanceof Oa))throw new Error("Unexpected y parent type");r.unshift(a)}if(r.length<2)return[];let s=e;return r.reduce((a,i,o)=>{const l=r[o+1];if(!l)return a;let u=0;const d=Jd(i);for(const m of d){if(m.insert===l)break;u+=typeof m.insert=="string"?m.insert.length:1}if(mt.isText(s))throw new Error("Cannot descent into slate text");const[f]=Dm(s,u);return s=s.children[f],a.concat(f)},[])}function rFe(t,e,n){const r=[];let s=n.reduce((a,i)=>"retain"in i?a+i.retain:"delete"in i?a+i.delete:a,0);return n.reverse().forEach(a=>{var i;if("attributes"in a&&"retain"in a){const[o,l]=Dm(t,s-a.retain),[u,d]=Dm(t,s,{assoc:-1});for(let f=u;f>=o;f--){const m=t.children[f],g=[...e,f];if(!mt.isText(m))continue;const x=a.attributes,b=JPe(t,...Object.keys(a.attributes));if(f===o||f===u){const C=f===o?l:0,S=f===u?d:m.text.length;if(S!==m.text.length&&r.push({type:"split_node",path:g,position:S,properties:wd(m)}),C!==0){r.push({type:"split_node",path:g,position:C,properties:ZPe(Ri(Ri({},wd(m)),x))});continue}}r.push({type:"set_node",newProperties:x,path:g,properties:b})}}if("retain"in a&&(s-=a.retain),"delete"in a){const[o,l]=Dm(t,s-a.delete),[u,d]=Dm(t,s,{assoc:-1});for(let f=d===0?u-1:u;f>=o;f--){const m=t.children[f],g=[...e,f];if(mt.isText(m)&&(f===o||f===u)){const x=f===o?l:0,b=f===u?d:m.text.length;r.push({type:"remove_text",offset:x,text:m.text.slice(x,b),path:g}),s-=b-x;continue}r.push({type:"remove_node",node:m,path:g}),s-=J1(m)}return}if("insert"in a){const[o,l]=Dm(t,s,{insert:!0}),u=t.children[o],d=[...e,o];if(mt.isText(u)){const f=r[r.length-1],m=f!=null&&f.type==="insert_node"?f.node:wd(u);let g=[];if(f!=null&&(f.type==="insert_node"||f.type==="insert_text"||f.type==="split_node"||f.type==="set_node")&&(g=f.path),typeof a.insert=="string"&&_M((i=a.attributes)!=null?i:{},m)&&be.equals(d,g))return r.push({type:"insert_text",offset:l,text:a.insert,path:d});const x=MD(a);return l===0?r.push({type:"insert_node",path:d,node:x}):(l<u.text.length&&r.push({type:"split_node",path:d,position:l,properties:wd(u)}),r.push({type:"insert_node",path:be.next(d),node:x}))}return r.push({type:"insert_node",path:d,node:MD(a)})}}),r}function sFe(t,e,n){const{target:r,changes:s}=n,a=n.delta;if(!(r instanceof Oa))throw new Error("Unexpected target node type");const i=[],o=qse(t,e,r),l=pt.get(e,o);if(mt.isText(l))throw new Error("Cannot apply yTextEvent to text node");const u=Array.from(s.keys.entries());if(o.length>0&&u.length>0){const d=Object.fromEntries(u.map(([m,g])=>[m,g.action==="delete"?null:r.getAttribute(m)])),f=Object.fromEntries(u.map(([m])=>[m,l[m]]));i.push({type:"set_node",newProperties:d,properties:f,path:o})}return a.length>0&&i.push(...rFe(l,o,a)),i}function aFe(t,e,n){if(n instanceof Mse)return sFe(t,e,n);throw new Error("Unexpected Y event type")}function iFe(t,e,n){Q.withoutNormalizing(e,()=>{n.forEach(r=>{aFe(t,e,r).forEach(s=>{e.apply(s)})})})}function oFe(t,e,n){const{yParent:r,textRange:s}=Vo(t,e,n.path);if(mt.isText(n.node))return r.insert(s.start,n.node.text,wd(n.node));r.insertEmbed(s.start,Vse(n.node))}function sE(t){return t.map(e=>typeof e.insert=="string"?e:Pv(Ri({},e),{insert:lFe(e.insert)}))}function lFe(t){const e=new Oa,n=t.getAttributes();return Object.entries(n).forEach(([r,s])=>{e.setAttribute(r,s)}),e.applyDelta(sE(Jd(t)),{sanitize:!1}),e}function xg(t){if(!t.doc)throw new Error("shared type isn't attached to a document")}var c0="__slateYjsStoredPosition_";function cFe(t,e,n){const{yTarget:r,yParent:s,textRange:a}=Vo(t,e,n.path);if(r)throw new Error("Slate point points to a non-text element inside sharedRoot");const i=a.start+n.offset;return use(s,i,i===a.end?-1:0)}function uFe(t,e,{type:n,index:r,assoc:s}){if(!(n instanceof Oa))throw new Error("Absolute position points to a non-XMLText");const a=qse(t,e,n),i=pt.get(e,a);if(mt.isText(i))throw new Error("Absolute position doesn't match slateRoot, cannot descent into text");const[o,l]=Dm(i,r,{assoc:s}),u=i.children[o];return mt.isText(u)?{path:[...a,o],offset:l}:null}function dFe(t,e,n){if(!t.doc)throw new Error("sharedRoot isn't attach to a yDoc");const r=hse(n,t.doc);return r&&uFe(t,e,r)}function hFe(t,e){const n=t.getAttribute(c0+e);return n?dse(n):null}function fFe(t){return Object.fromEntries(Object.entries(t.getAttributes()).filter(([e])=>e.startsWith(c0)).map(([e,n])=>[e.slice(c0.length),U9e(n)]))}function mFe(t){return xg(t),Object.fromEntries(Object.entries(t.getAttributes()).filter(([e])=>e.startsWith(c0)).map(([e,n])=>[e.slice(c0.length),hse(dse(n),t.doc)]).filter(([,e])=>e))}function pFe(t,e){t.removeAttribute(c0+e)}function Gse(t,e,n){t.setAttribute(c0+e,G9e(n))}function Wse(t,e,n){return Object.fromEntries(Object.entries(t).filter(([,r])=>r.type!==e?!1:n?r.assoc>=0?r.index>=n.start&&r.index<n.end:r.index>n.start&&r.index>=n.end:!0))}function Kse(t,e,n=""){const r={[n]:Wse(t,e)};return Jd(e).forEach(({insert:a},i)=>{a instanceof Oa&&Object.assign(r,Kse(t,a,n?`${n}.${i}`:i.toString()))}),r}function TM(t,e,n,r=0){const s=mFe(t),a={"":Wse(s,e,{start:r,end:r+$se(n)})};return n.forEach(({insert:i},o)=>{i instanceof Oa&&Object.assign(a,Kse(s,i,o.toString()))}),a}function aE(t,e,n,r,s=0,a=0,i=""){const o=n[i];o&&Object.entries(o).forEach(([l,u])=>{Gse(t,l,use(e,u.index-a+s,u.assoc))}),r.forEach(({insert:l},u)=>{l instanceof Oa&&aE(t,l,n,Jd(l),0,0,i?`${i}.${u}`:u.toString())})}function gFe(t,e,n){const r=Vo(t,e,n.path),s=Vo(r.yParent,r.slateParent,be.previous(n.path.slice(-1)));if(!r.yTarget!=!s.yTarget)throw new Error("Cannot merge y text with y element");if(!s.yTarget||!r.yTarget){const{yParent:d,textRange:f,slateTarget:m}=r;if(!m)throw new Error("Expected Slate target node for merge op.");const g=pt.get(e,be.previous(n.path));if(!mt.isText(g))throw new Error("Path points to Y.Text but not a Slate text node.");const x=wd(m),b=wd(g),C=Object.keys(x).reduce((S,w)=>w in b?S:Pv(Ri({},S),{[w]:null}),{});return d.format(f.start,f.end-f.start,Ri(Ri({},C),b))}const a=s.yTarget.length,i=Jd(r.yTarget),o=sE(i),l=TM(t,r.yTarget,i,a),u=[{retain:a},...o];s.yTarget.applyDelta(u,{sanitize:!1}),r.yParent.delete(r.textRange.start,r.textRange.end-r.textRange.start),aE(t,s.yTarget,l,o,a)}function vFe(t,e,n){const r=be.parent(n.newPath),s=n.newPath[n.newPath.length-1],a=pt.get(e,r);if(mt.isText(a))throw new Error("Cannot move slate node into text element");const i=[...r,Math.min(s,a.children.length)],o=Vo(t,e,n.path),l=Vo(t,e,i),u=sE(o.targetDelta),d=TM(t,o.yParent,o.targetDelta);o.yParent.delete(o.textRange.start,o.textRange.end-o.textRange.start);const f=$se(Jd(l.yParent)),m=Math.min(l.textRange.start,f),g=[{retain:m},...u];l.yParent.applyDelta(g,{sanitize:!1}),aE(t,l.yParent,d,u,m,o.textRange.start)}function yFe(t,e,n){const{yParent:r,textRange:s}=Vo(t,e,n.path);r.delete(s.start,s.end-s.start)}function xFe(t,e,n){const{yTarget:r,textRange:s,yParent:a}=Vo(t,e,n.path);if(r)return Object.entries(n.newProperties).forEach(([l,u])=>{if(u===null)return r.removeAttribute(l);r.setAttribute(l,u)}),Object.entries(n.properties).forEach(([l])=>{n.newProperties.hasOwnProperty(l)||r.removeAttribute(l)});const i=Object.fromEntries(Object.keys(n.properties).map(l=>[l,null])),o=Ri(Ri({},i),n.newProperties);a.format(s.start,s.end-s.start,o)}function bFe(t,e,n){const r=Vo(t,e,n.path);if(!r.slateTarget)throw new Error("Y target without corresponding slate node");if(!r.yTarget){if(!mt.isText(r.slateTarget))throw new Error("Mismatch node type between y target and slate node");const f={};return r.targetDelta.forEach(m=>{m.attributes&&Object.keys(m.attributes).forEach(g=>{f[g]=null})}),r.yParent.format(r.textRange.start,r.textRange.end-r.textRange.start,Ri(Ri({},f),n.properties))}if(mt.isText(r.slateTarget))throw new Error("Mismatch node type between y target and slate node");const s=Vo(r.yTarget,r.slateTarget,[n.position]),a=r.slateTarget.children.slice(0,n.position).reduce((f,m)=>f+J1(m),0),i=r.slateTarget.children.reduce((f,m)=>f+J1(m),0),o=Use(Jd(r.yTarget),a,i-a),l=sE(o),u=TM(t,r.yTarget,o,a),d=new Oa;d.applyDelta(l,{sanitize:!1}),Object.entries(n.properties).forEach(([f,m])=>{d.setAttribute(f,m)}),r.yTarget.delete(s.textRange.start,r.yTarget.length-s.textRange.start),r.yParent.insertEmbed(r.textRange.end,d),aE(t,d,u,l,0,a)}var wFe={insert_node:oFe,remove_node:yFe,set_node:xFe,merge_node:gFe,move_node:vFe,split_node:bFe};function CFe(t,e,n){const{yParent:r,textRange:s}=Vo(t,e,n.path),a=pt.get(e,n.path);if(!mt.isText(a))throw new Error("Cannot insert text into non-text node");r.insert(s.start+n.offset,n.text,wd(a))}function SFe(t,e,n){const{yParent:r,textRange:s}=Vo(t,e,n.path);r.delete(s.start+n.offset,n.text.length)}var kFe={insert_text:CFe,remove_text:SFe},EFe=()=>{},_Fe=Pv(Ri(Ri({},kFe),wFe),{set_selection:EFe});function TFe(t,e,n){const r=_Fe[n.type];if(!r)throw new Error(`Unknown operation: ${n.type}`);r(t,e,n)}var AFe=Symbol("slate-yjs-operation"),NFe=Symbol("slate-yjs-position-storage"),JA=new WeakMap,ID=new WeakMap,OD=new WeakSet,Gs={isYjsEditor(t){return Q.isEditor(t)&&t.sharedRoot instanceof Oa&&"localOrigin"in t&&"positionStorageOrigin"in t&&typeof t.applyRemoteEvents=="function"&&typeof t.storeLocalChange=="function"&&typeof t.flushLocalChanges=="function"&&typeof t.isLocalOrigin=="function"&&typeof t.connect=="function"&&typeof t.disconnect=="function"},localChanges(t){var e;return(e=ID.get(t))!=null?e:[]},applyRemoteEvents(t,e,n){t.applyRemoteEvents(e,n)},storeLocalChange(t,e){t.storeLocalChange(e)},flushLocalChanges(t){t.flushLocalChanges()},connected(t){return OD.has(t)},connect(t){t.connect()},disconnect(t){t.disconnect()},isLocal(t){return t.isLocalOrigin(Gs.origin(t))},origin(t){const e=JA.get(t);return e!==void 0?e:t.localOrigin},withOrigin(t,e,n){const r=Gs.origin(t);JA.set(t,e),n(),JA.set(t,r)},storePosition(t,e,n){const{sharedRoot:r,positionStorageOrigin:s}=t;xg(r);const a=cFe(r,t,n);r.doc.transact(()=>{Gse(r,e,a)},s)},removeStoredPosition(t,e){const{sharedRoot:n,positionStorageOrigin:r}=t;xg(n),n.doc.transact(()=>{pFe(n,e)},r)},position(t,e){const n=hFe(t.sharedRoot,e);if(n)return dFe(t.sharedRoot,t,n)},storedPositionsRelative(t){return fFe(t.sharedRoot)}};function jFe(t,e,{localOrigin:n,positionStorageOrigin:r,autoConnect:s=!1}={}){const a=t;a.sharedRoot=e,a.localOrigin=n??AFe,a.positionStorageOrigin=r??NFe,a.applyRemoteEvents=(d,f)=>{Gs.flushLocalChanges(a),Q.withoutNormalizing(a,()=>{Gs.withOrigin(a,f,()=>{iFe(a.sharedRoot,a,d)})})},a.isLocalOrigin=d=>d===a.localOrigin;const i=(d,f)=>{a.isLocalOrigin(f.origin)||Gs.applyRemoteEvents(a,d,f.origin)};let o=null;s&&(o=setTimeout(()=>{o=null,Gs.connect(a)})),a.connect=()=>{if(Gs.connected(a))throw new Error("already connected");a.sharedRoot.observeDeep(i);const d=Hse(a.sharedRoot);a.children=d.children,OD.add(a),Q.normalize(t,{force:!0}),t.operations.length||t.onChange()},a.disconnect=()=>{o&&clearTimeout(o),Gs.flushLocalChanges(a),a.sharedRoot.unobserveDeep(i),OD.delete(a)},a.storeLocalChange=d=>{ID.set(a,[...Gs.localChanges(a),{op:d,doc:t.children,origin:Gs.origin(a)}])},a.flushLocalChanges=()=>{xg(a.sharedRoot);const d=Gs.localChanges(a);ID.delete(a);const f=[];d.forEach(m=>{const g=f[f.length-1];if(g&&g[0].origin===m.origin)return g.push(m);f.push([m])}),f.forEach(m=>{xg(a.sharedRoot),a.sharedRoot.doc.transact(()=>{m.forEach(g=>{xg(a.sharedRoot),TFe(a.sharedRoot,{children:g.doc},g.op)})},m[0].origin)})};const{apply:l,onChange:u}=a;return a.apply=d=>{Gs.connected(a)&&Gs.isLocal(a)&&Gs.storeLocalChange(a,d),l(d)},a.onChange=()=>{Gs.connected(a)&&Gs.flushLocalChanges(a),u()},a}const tx=(t,e)=>{Gp(t,e)?Q.removeMark(t,e):Q.addMark(t,e,!0)},Gp=(t,e)=>{const{selection:n}=t;if(!n)return!1;const r=Q.marks(t);return r?r[e]===!0:!1},pm=(t,e)=>{const n=$h(t,e),r=["numbered-list","bulleted-list"].includes(e);rt.unwrapNodes(t,{match:a=>!Q.isEditor(a)&&jt.isElement(a)&&["numbered-list","bulleted-list"].includes(a.type),split:!0});const s={type:n?"paragraph":r?"list-item":e};if(rt.setNodes(t,s),!n&&r){const a={type:e,children:[]};rt.wrapNodes(t,a)}},$h=(t,e)=>{const{selection:n}=t;if(!n)return!1;const[r]=Array.from(Q.nodes(t,{at:Q.unhangRange(t,n),match:s=>!Q.isEditor(s)&&jt.isElement(s)&&s.type===e}));return!!r},ul=({active:t,onMouseDown:e,children:n,title:r})=>c.jsx("button",{onMouseDown:e,title:r,className:`p-2.5 rounded-lg transition-all duration-200 ${t?"bg-theme-0 text-theme-link scale-95":"text-theme-1 hover:text-theme-0 hover:bg-theme-1"}`,children:n}),DFe=({editorContainer:t,editor:e})=>{const n=y.useRef(null),[r,s]=y.useState(!1);return y.useEffect(()=>{const a=()=>{var m,g;const{selection:u}=e,d=n.current;if(!d||!u||!dt.isFocused(e)){s(!1);return}if(Q.string(e,u)===""){s(!1);return}try{const b=dt.toDOMRange(e,u).getBoundingClientRect();if(b.width===0&&b.height===0){s(!1);return}s(!0);const S=dt.toDOMNode(e,e).getBoundingClientRect(),w=((m=t.current)==null?void 0:m.getBoundingClientRect())??S;let E=b.top-S.top-d.offsetHeight-10+32;E<=(((g=t.current)==null?void 0:g.scrollTop)??0)&&(E=b.bottom-S.top+d.offsetHeight+10);const T=Math.min(w.right-S.left-d.offsetWidth,Math.max(w.left-S.left,b.left-S.left+b.width/2-d.offsetWidth/2));d.style.top=`${E}px`,d.style.left=`${T}px`}catch(x){console.error("Error getting DOM range:",x),s(!1);return}};a();const o=dt.getWindow(e).document,l=()=>{requestAnimationFrame(a)};return o.addEventListener("selectionchange",l),()=>{o.removeEventListener("selectionchange",l)}},[e,t]),c.jsxs("div",{ref:n,className:`absolute z-50 backdrop-blur-2xl bg-theme-0/95 border border-theme rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.12)] p-2 flex gap-0.5 transition-all duration-200 ${r?"opacity-100 scale-100":"opacity-0 scale-90 pointer-events-none"}`,onMouseDown:a=>a.preventDefault(),children:[c.jsx(ul,{active:Gp(e,"bold"),onMouseDown:a=>{a.preventDefault(),tx(e,"bold")},title:"Bold",children:c.jsx(nZ,{className:"size-4"})}),c.jsx(ul,{active:Gp(e,"italic"),onMouseDown:a=>{a.preventDefault(),tx(e,"italic")},title:"Italic",children:c.jsx(uZ,{className:"size-4"})}),c.jsx(ul,{active:Gp(e,"underline"),onMouseDown:a=>{a.preventDefault(),tx(e,"underline")},title:"Underline",children:c.jsx(yZ,{className:"size-4"})}),c.jsx(ul,{active:Gp(e,"code"),onMouseDown:a=>{a.preventDefault(),tx(e,"code")},title:"Code",children:c.jsx(iU,{className:"size-4"})}),c.jsx(ul,{active:Gp(e,"highlight"),onMouseDown:a=>{a.preventDefault(),tx(e,"highlight")},title:"Highlight",children:c.jsx(_m,{className:"size-4"})}),c.jsx("div",{className:"w-px h-6 bg-theme mx-1 my-auto"}),c.jsx(ul,{active:$h(e,"heading-one"),onMouseDown:a=>{a.preventDefault(),pm(e,"heading-one")},title:"Heading 1",children:c.jsx(Fj,{className:"size-4"})}),c.jsx(ul,{active:$h(e,"heading-two"),onMouseDown:a=>{a.preventDefault(),pm(e,"heading-two")},title:"Heading 2",children:c.jsx(Bj,{className:"size-4"})}),c.jsx(ul,{active:$h(e,"heading-three"),onMouseDown:a=>{a.preventDefault(),pm(e,"heading-three")},title:"Heading 3",children:c.jsx(Lj,{className:"size-4"})}),c.jsx("div",{className:"w-px h-6 bg-theme mx-1 my-auto"}),c.jsx(ul,{active:$h(e,"bulleted-list"),onMouseDown:a=>{a.preventDefault(),pm(e,"bulleted-list")},title:"Bulleted List",children:c.jsx(p4,{className:"size-4"})}),c.jsx(ul,{active:$h(e,"numbered-list"),onMouseDown:a=>{a.preventDefault(),pm(e,"numbered-list")},title:"Numbered List",children:c.jsx(zj,{className:"size-4"})}),c.jsx(ul,{active:$h(e,"block-quote"),onMouseDown:a=>{a.preventDefault(),pm(e,"block-quote")},title:"Quote",children:c.jsx(x_e,{className:"size-4"})}),c.jsx(ul,{active:$h(e,"code-block"),onMouseDown:a=>{a.preventDefault(),pm(e,"code-block")},title:"Code Block",children:c.jsx(iU,{className:"size-4"})})]})},RFe=({status:t})=>{const n=(()=>{switch(t){case"saving":return{icon:c.jsx(nke,{className:"size-3 animate-pulse"}),text:"Saving...",color:"blue"};case"saved":return{icon:c.jsx(_l,{className:"size-3"}),text:"Saved",color:"green"};case"error":return{icon:c.jsx(Gke,{className:"size-3"}),text:"Error (retrying...)",color:"red"}}})(),r={blue:"bg-blue-500/10 border-blue-500/20 text-blue-600 dark:text-blue-400",green:"bg-green-500/10 border-green-500/20 text-green-600 dark:text-green-400",red:"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400"};return c.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border ${r[n.color]}`,children:[n.icon,c.jsx("span",{className:"text-xs font-medium",children:n.text})]})},MFe=({attributes:t,children:e,leaf:n})=>(n.bold&&(e=c.jsx("strong",{className:"font-semibold",children:e})),n.italic&&(e=c.jsx("em",{className:"italic",children:e})),n.underline&&(e=c.jsx("u",{className:"underline decoration-2 underline-offset-2",children:e})),n.code&&(e=c.jsx("code",{className:"px-2 py-0.5 bg-theme-1 text-theme-link rounded-md font-mono text-[0.9em] border border-theme",children:e})),n.highlight&&(e=c.jsx("mark",{className:"bg-yellow-300/40 dark:bg-yellow-400/20 px-1 rounded",children:e})),c.jsx("span",{...t,children:e})),IFe=({attributes:t,children:e,element:n})=>{const r={textAlign:("align"in n?n.align:void 0)||"left"};switch(n.type){case"heading-one":return c.jsx("h1",{...t,style:r,className:"text-3xl font-bold text-theme-0 mt-8 mb-3 tracking-tight",children:e});case"heading-two":return c.jsx("h2",{...t,style:r,className:"text-2xl font-semibold text-theme-0 mt-6 mb-2 tracking-tight",children:e});case"heading-three":return c.jsx("h3",{...t,style:r,className:"text-xl font-semibold text-theme-0 mt-5 mb-2",children:e});case"block-quote":return c.jsx("blockquote",{...t,className:"border-l-[3px] border-theme-link pl-6 italic text-theme-1 my-6 py-1",children:e});case"bulleted-list":return c.jsx("ul",{...t,className:"list-disc pl-6 my-4 text-theme-0 space-y-2",children:e});case"numbered-list":return c.jsx("ol",{...t,className:"list-decimal pl-6 my-4 text-theme-0 space-y-2",children:e});case"list-item":return c.jsx("li",{...t,className:"text-theme-0 leading-relaxed",children:e});case"code-block":return c.jsx("pre",{...t,className:"bg-theme-1 text-theme-0 p-4 rounded-xl my-6 overflow-x-auto font-mono text-sm border border-theme",children:c.jsx("code",{children:e})});default:return c.jsx("p",{...t,style:r,className:"text-theme-0 leading-[1.8] my-3",children:e})}},OFe=()=>{const{noteId:t}=Fr(),{authenticatedFetch:e}=ut(),[n,r]=y.useState("saved"),[s,a]=y.useState(!0),i=y.useRef(null),o=y.useRef(null),l=y.useRef([]),u=y.useMemo(()=>new Iv,[]),d=y.useMemo(()=>u.get("content",Oa),[u]),f=y.useMemo(()=>OIe(jFe(CRe(),d)),[d]),m=y.useCallback((w,E)=>{E!=="server"&&(l.current.push(w),r("saving"),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{g()},2e3))},[]);y.useEffect(()=>(u.on("update",m),()=>u.off("update",m)),[u,m]);const g=y.useCallback(async()=>{if(!t||l.current.length===0)return;const w=l.current;l.current=[];try{const E=rPe(w),T=new FormData;if(T.append("noteId",t),T.append("delta",new Blob([E],{type:"application/octet-stream"})),!(await e(`${Jr}/notes/update-note`,{method:"POST",body:T})).ok){l.current=[...w,...l.current],r("error");return}r("saved")}catch{l.current=[...w,...l.current],r("error")}},[t,e]),x=y.useCallback(async()=>{if(!t){a(!1);return}a(!0);try{const w=await e(`${Jr}/notes/load-note`,{method:"POST",body:{noteId:t}});if(!w.ok)throw new Error("Failed to load");const E=await w.json(),T=(E==null?void 0:E.message)||E;if(T.yjsState&&Array.isArray(T.yjsState)&&T.yjsState.length>0){const _=new Uint8Array(T.yjsState);z9e(u,_,"server"),console.log("content",u.get("content",Oa).toJSON())}}catch(w){console.error(w)}finally{a(!1)}},[t,e]);y.useEffect(()=>{x()},[t]),y.useEffect(()=>{if(!(s||!f))return Gs.connected(f)||Gs.connect(f),()=>{Gs.connected(f)&&Gs.disconnect(f)}},[f,s]),y.useEffect(()=>(window.addEventListener("beforeunload",g),()=>{window.removeEventListener("beforeunload",g),f.selection=null,g()}),[]);const b=y.useMemo(()=>s?"loading":`ready-${t}`,[s,t]),C=y.useCallback(w=>c.jsx(MFe,{...w}),[]),S=y.useCallback(w=>c.jsx(IFe,{...w}),[]);if(s)return c.jsx("div",{className:"flex flex-col justify-center items-center w-full h-full",children:c.jsx(js,{className:"size-6 animate-spin text-theme-0 mb-2"})});if(t!==null)return c.jsxs("div",{className:"flex flex-col justify-center w-full h-full",children:[c.jsx("div",{className:"absolute top-4 right-4 z-10",children:c.jsx(RFe,{status:n})}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",ref:i,children:c.jsx("div",{className:"max-w-[640px] mx-auto px-2 py-8 relative",children:c.jsxs(IIe,{editor:f,initialValue:[{type:"paragraph",children:[{text:""}]}],children:[c.jsx(DFe,{editorContainer:i,editor:f}),c.jsx(TIe,{renderLeaf:C,renderElement:S,placeholder:"Start writing...",className:"min-h-[70vh] focus:outline-none"})]},b)})})]})},PFe=()=>{const{setNoteId:t,handleDeleteNote:e}=Fr();return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute top-4 left-4 z-10",children:c.jsx("button",{onClick:()=>t(null),className:"cursor-pointer py-1.5 px-2 rounded-md g-theme-1 hover:bg-theme-2 transition-all duration-200",children:c.jsx(t_e,{className:"size-4.5 text-theme-0"})})}),c.jsx("div",{className:"absolute top-4 right-4 z-10",children:c.jsxs(zo,{children:[c.jsx($o,{asChild:!0,children:c.jsx("button",{className:"cursor-pointer py-1.5 px-2 rounded-md g-theme-1 hover:bg-theme-2 transition-all duration-200",children:c.jsx(Wb,{className:"size-4.5 text-theme-0"})})}),c.jsx(Uo,{children:c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("button",{onClick:e,className:"flex items-center gap-2 cursor-pointer py-1.5 px-2 rounded-md g-theme-1 hover:bg-theme-2 transition-all duration-200",children:[c.jsx(wv,{className:"size-4.5 text-theme-0"}),c.jsx("span",{className:"text-sm font-medium text-theme-0",children:"Delete Note"})]})})})]})})]})},FFe=()=>{var S,w,E,T,_;const[t,e]=y.useState("notes"),{activeCourse:n,transcriptTabOpen:r,notesMetadata:s,noteId:a,handleMetadataChange:i,setNoteId:o,handleDeleteNote:l,portal:u}=Fr(),{courseData:d}=zr(),f=A=>{e(A)},m=((S=d==null?void 0:d[n])==null?void 0:S.color)||"#6366f1",g=((w=d==null?void 0:d[n])==null?void 0:w.code)||((E=d==null?void 0:d[n])==null?void 0:E.default)||"Unknown Course";(T=d==null?void 0:d[n])!=null&&T.img;const x=((_=s==null?void 0:s[n])==null?void 0:_.find(A=>A.id===a))??null,[b,C]=y.useState((x==null?void 0:x.title)||"");return c.jsxs("div",{className:"flex flex-col w-full h-full bg-theme-0 overflow-hidden relative",children:[c.jsx(PFe,{}),c.jsx("div",{className:"relative overflow-hidden",children:c.jsxs("div",{className:"relative max-w-[640px] mx-auto pt-20 pb-4",children:[c.jsx("div",{className:"flex items-center gap-3 mb-1 group",children:c.jsxs("div",{className:"flex gap-1.5 items-center",children:[c.jsx("div",{className:"size-2.5 rounded-full",style:{backgroundColor:m}}),c.jsx("p",{className:"text-sm font-bold tracking-wide transition-colors duration-200",style:{color:m},children:g})]})}),c.jsxs("div",{className:"relative mb-4 group",children:[c.jsx("input",{type:"text",value:b,onInput:A=>C(A.target.value),onBlur:()=>i({title:b}),placeholder:"Untitled Note",className:"text-3xl font-bold text-theme-0 bg-transparent border-none outline-none w-full placeholder:text-theme-1/20 tracking-tight leading-tight transition-all duration-200 focus:placeholder:text-theme-1/40",style:{textShadow:"0 1px 2px rgba(0,0,0,0.02)"}}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-theme-1/20 to-transparent opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"})]})]})}),c.jsx("div",{className:"h-[1px] border-t border-theme relative",children:c.jsx("div",{className:"absolute top-0 left-0 w-full flex justify-center z-10",children:c.jsx("div",{className:"w-full max-w-[640px] translate-y-[-50%]",children:c.jsx(BFe,{tab:t,switchTab:f})})})}),c.jsxs("div",{className:"flex-1 min-h-0 relative",children:[t==="notes"&&c.jsx(OFe,{}),t==="smartnotes"&&c.jsx(kDe,{})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Wo,{mode:"wait",initial:!1,children:r&&c.jsx(pa.div,{initial:{height:0,opacity:0},animate:{height:320,opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden border-t border-theme",children:c.jsx("div",{className:"h-full overflow-y-auto",children:c.jsx(ste,{})})},"transcript")}),c.jsx(rte,{})]})]})},BFe=({tab:t,switchTab:e})=>c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs(xk,{value:t,onValueChange:e,className:"grid grid-flow-col auto-cols-fr gap-0.5 bg-theme-1 p-[3px] rounded-xl border border-theme",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(oc,{value:"notes",id:"notes",className:"peer sr-only"}),c.jsxs("label",{htmlFor:"notes",className:`cursor-pointer flex items-center gap-2 text-sm font-semibold px-2.5 py-2 rounded-lg text-center transition-all duration-300 ${t==="notes"?"bg-theme-0 shadow-lg text-theme-0":"text-theme-1 hover:text-theme-0"}`,children:[c.jsx(z_e,{className:"size-4"}),c.jsx("span",{className:"hidden",children:"Notes"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(oc,{value:"smartnotes",id:"smartnotes",className:"peer sr-only"}),c.jsxs("label",{htmlFor:"smartnotes",className:`cursor-pointer flex items-center gap-2 text-sm font-semibold px-2.5 py-2 rounded-lg text-center transition-all duration-300 ${t==="smartnotes"?"bg-theme-0 shadow-lg text-theme-0":"text-theme-1 hover:text-theme-0"}`,children:[c.jsx(wZ,{className:"size-4"}),c.jsx("span",{className:"hidden",children:"SmartNote"})]})]})]})}),LFe=()=>{const t={},[e,n]=y.useState(()=>t.filesai_width||200),[r,s]=y.useState("navigation"),[a,i]=y.useState(!1),o=y.useRef(null),{noteId:l,notesMetadata:u,activeCourse:d,sidebarOpen:f,setSidebarOpen:m,transcriptTabOpen:g}=Fr();if(y.useMemo(()=>{var b;console.log(l,u,u==null?void 0:u[d]);const x=(b=((u==null?void 0:u[d])||[]).filter(C=>C.id===l))==null?void 0:b[0];return(x==null?void 0:x.title)||"No note selected"},[l,d,u]),y.useEffect(()=>{const x=()=>{if(o.current){const b=o.current.offsetWidth;i(b<600)}};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),y.useEffect(()=>{a&&l&&s("content")},[l,a]),a){const x=()=>c.jsxs("div",{className:"flex flex-1 overflow-hidden font-normal font-theme",children:[c.jsx("div",{className:"w-[45%] border-r border-theme",children:c.jsx(tU,{})}),c.jsx("div",{className:"w-[55%] min-h-0 flex flex-col gap-[10px] overflow-y-auto",children:c.jsx(u3e,{})})]}),b=()=>c.jsxs("div",{className:"flex-1 flex flex-col font-normal font-theme",children:[c.jsx(CDe,{setActiveTab:()=>s("navigation")}),c.jsx("div",{className:"flex flex-1 h-[calc(100%-60px)] overflow-hidden",children:c.jsx(nNe,{})})]});return c.jsx("div",{ref:o,className:"flex h-full w-full bg-theme-0 text-theme-0 font-theme",children:r==="navigation"?x():b()})}return c.jsxs("div",{ref:o,className:"flex h-full w-full bg-theme-0 text-theme-0 font-theme font-normal",children:[c.jsx("div",{className:"w-1/4 max-w-[225px] backdrop-filter backdrop-invert-[.02]",children:c.jsx(tU,{})}),c.jsx("div",{className:"w-full min-h-0 flex flex-col gap-[10px] backdrop-filter backdrop-invert-[.02] relative overflow-hidden ml-0",children:c.jsx("div",{className:"border-l border-theme overflow-hidden h-full",children:c.jsxs(Wo,{mode:"wait",initial:!1,children:[l?c.jsx(pa.div,{initial:{opacity:.4},animate:{opacity:1},exit:{opacity:.4},transition:{duration:.2,ease:"easeInOut"},className:"inset-0 h-full",children:c.jsx(FFe,{})},"note"):c.jsx(pa.div,{initial:{opacity:.4},animate:{opacity:1},exit:{opacity:.4},transition:{duration:.2,ease:"easeInOut"},className:"inset-0 h-full",children:c.jsx(d3e,{})},"browser"),l||" no note id"]})})})]})},hu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Yse=Object.create(null);for(const t in hu)Object.hasOwn(hu,t)&&(Yse[hu[t]]=t);const da={to:{},get:{}};da.get=function(t){const e=t.slice(0,3).toLowerCase();let n,r;switch(e){case"hsl":{n=da.get.hsl(t),r="hsl";break}case"hwb":{n=da.get.hwb(t),r="hwb";break}default:{n=da.get.rgb(t),r="rgb";break}}return n?{model:r,value:n}:null};da.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let i=[0,0,0,1],o,l,u;if(o=t.match(n)){for(u=o[2],o=o[1],l=0;l<3;l++){const d=l*2;i[l]=Number.parseInt(o.slice(d,d+2),16)}u&&(i[3]=Number.parseInt(u,16)/255)}else if(o=t.match(e)){for(o=o[1],u=o[3],l=0;l<3;l++)i[l]=Number.parseInt(o[l]+o[l],16);u&&(i[3]=Number.parseInt(u+u,16)/255)}else if(o=t.match(r)){for(l=0;l<3;l++)i[l]=Number.parseInt(o[l+1],10);o[4]&&(i[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=t.match(s)){for(l=0;l<3;l++)i[l]=Math.round(Number.parseFloat(o[l+1])*2.55);o[4]&&(i[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=t.match(a))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(hu,o[1])?(i=hu[o[1]],i[3]=1,i):null:null;for(l=0;l<3;l++)i[l]=of(i[l],0,255);return i[3]=of(i[3],0,1),i};da.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=of(Number.parseFloat(n[2]),0,100),i=of(Number.parseFloat(n[3]),0,100),o=of(Number.isNaN(r)?1:r,0,1);return[s,a,i,o]}return null};da.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=of(Number.parseFloat(n[2]),0,100),i=of(Number.parseFloat(n[3]),0,100),o=of(Number.isNaN(r)?1:r,0,1);return[s,a,i,o]}return null};da.to.hex=function(...t){return"#"+NC(t[0])+NC(t[1])+NC(t[2])+(t[3]<1?NC(Math.round(t[3]*255)):"")};da.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};da.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"};da.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};da.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};da.to.keyword=function(...t){return Yse[t.slice(0,3)]};function of(t,e,n){return Math.min(Math.max(e,t),n)}function NC(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const Xse={};for(const t of Object.keys(hu))Xse[hu[t]]=t;const Ct={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Nd=(6/29)**3;function bg(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function wg(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(Ct)){if(!("channels"in Ct[t]))throw new Error("missing channels property: "+t);if(!("labels"in Ct[t]))throw new Error("missing channel labels property: "+t);if(Ct[t].labels.length!==Ct[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=Ct[t];delete Ct[t].channels,delete Ct[t].labels,Object.defineProperty(Ct[t],"channels",{value:e}),Object.defineProperty(Ct[t],"labels",{value:n})}Ct.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=a-s;let o,l;switch(a){case s:{o=0;break}case e:{o=(n-r)/i;break}case n:{o=2+(r-e)/i;break}case r:{o=4+(e-n)/i;break}}o=Math.min(o*60,360),o<0&&(o+=360);const u=(s+a)/2;return a===s?l=0:u<=.5?l=i/(a+s):l=i/(2-a-s),[o,l*100,u*100]};Ct.rgb.hsv=function(t){let e,n,r,s,a;const i=t[0]/255,o=t[1]/255,l=t[2]/255,u=Math.max(i,o,l),d=u-Math.min(i,o,l),f=function(m){return(u-m)/6/d+1/2};if(d===0)s=0,a=0;else{switch(a=d/u,e=f(i),n=f(o),r=f(l),u){case i:{s=r-n;break}case o:{s=1/3+e-r;break}case l:{s=2/3+n-e;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,a*100,u*100]};Ct.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const s=Ct.rgb.hsl(t)[0],a=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[s,a*100,r*100]};Ct.rgb.oklab=function(t){const e=wg(t[0]/255),n=wg(t[1]/255),r=wg(t[2]/255),s=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*r),a=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*r),i=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*r),o=.2104542553*s+.793617785*a-.0040720468*i,l=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[o*100,l*100,u*100]};Ct.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(1-e,1-n,1-r),a=(1-e-s)/(1-s)||0,i=(1-n-s)/(1-s)||0,o=(1-r-s)/(1-s)||0;return[a*100,i*100,o*100,s*100]};function zFe(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Ct.rgb.keyword=function(t){const e=Xse[t];if(e)return e;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(hu)){const a=hu[s],i=zFe(t,a);i<n&&(n=i,r=s)}return r};Ct.keyword.rgb=function(t){return hu[t]};Ct.rgb.xyz=function(t){const e=wg(t[0]/255),n=wg(t[1]/255),r=wg(t[2]/255),s=e*.4124564+n*.3575761+r*.1804375,a=e*.2126729+n*.7151522+r*.072175,i=e*.0193339+n*.119192+r*.9503041;return[s*100,a*100,i*100]};Ct.rgb.lab=function(t){const e=Ct.rgb.xyz(t);let n=e[0],r=e[1],s=e[2];n/=95.047,r/=100,s/=108.883,n=n>Nd?n**(1/3):7.787*n+16/116,r=r>Nd?r**(1/3):7.787*r+16/116,s=s>Nd?s**(1/3):7.787*s+16/116;const a=116*r-16,i=500*(n-r),o=200*(r-s);return[a,i,o]};Ct.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let s,a;if(n===0)return a=r*255,[a,a,a];const i=r<.5?r*(1+n):r+n-r*n,o=2*r-i,l=[0,0,0];for(let u=0;u<3;u++)s=e+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=o+(i-o)*6*s:2*s<1?a=i:3*s<2?a=o+(i-o)*(2/3-s)*6:a=o,l[u]=a*255;return l};Ct.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;const i=(r+n)/2,o=r===0?2*s/(a+s):2*n/(r+n);return[e,o*100,i*100]};Ct.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const s=Math.floor(e)%6,a=e-Math.floor(e),i=255*r*(1-n),o=255*r*(1-n*a),l=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,l,i];case 1:return[o,r,i];case 2:return[i,r,l];case 3:return[i,o,r];case 4:return[l,i,r];case 5:return[r,i,o]}};Ct.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,s=Math.max(r,.01);let a,i;i=(2-n)*r;const o=(2-n)*s;return a=n*s,a/=o<=1?o:2-o,a=a||0,i/=2,[e,a*100,i*100]};Ct.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const i=Math.floor(6*e),o=1-r;a=6*e-i,(i&1)!==0&&(a=1-a);const l=n+a*(o-n);let u,d,f;switch(i){default:case 6:case 0:{u=o,d=l,f=n;break}case 1:{u=l,d=o,f=n;break}case 2:{u=n,d=o,f=l;break}case 3:{u=n,d=l,f=o;break}case 4:{u=l,d=n,f=o;break}case 5:{u=o,d=n,f=l;break}}return[u*255,d*255,f*255]};Ct.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=t[3]/100,a=1-Math.min(1,e*(1-s)+s),i=1-Math.min(1,n*(1-s)+s),o=1-Math.min(1,r*(1-s)+s);return[a*255,i*255,o*255]};Ct.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let s,a,i;return s=e*3.2404542+n*-1.5371385+r*-.4985314,a=e*-.969266+n*1.8760108+r*.041556,i=e*.0556434+n*-.2040259+r*1.0572252,s=bg(s),a=bg(a),i=bg(i),[s*255,a*255,i*255]};Ct.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>Nd?e**(1/3):7.787*e+16/116,n=n>Nd?n**(1/3):7.787*n+16/116,r=r>Nd?r**(1/3):7.787*r+16/116;const s=116*n-16,a=500*(e-n),i=200*(n-r);return[s,a,i]};Ct.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*r),a=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*r),i=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*r),o=.2104542553*s+.793617785*a-.0040720468*i,l=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[o*100,l*100,u*100]};Ct.oklab.oklch=function(t){return Ct.lab.lch(t)};Ct.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=(.999999998*e+.396337792*n+.215803758*r)**3,a=(1.000000008*e-.105561342*n-.063854175*r)**3,i=(1.000000055*e-.089484182*n-1.291485538*r)**3,o=1.227013851*s-.55779998*a+.281256149*i,l=-.040580178*s+1.11225687*a-.071676679*i,u=-.076381285*s-.421481978*a+1.58616322*i;return[o*100,l*100,u*100]};Ct.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=(e+.3963377774*n+.2158037573*r)**3,a=(e-.1055613458*n-.0638541728*r)**3,i=(e-.0894841775*n-1.291485548*r)**3,o=bg(4.0767416621*s-3.3077115913*a+.2309699292*i),l=bg(-1.2684380046*s+2.6097574011*a-.3413193965*i),u=bg(-.0041960863*s-.7034186147*a+1.707614701*i);return[o*255,l*255,u*255]};Ct.oklch.oklab=function(t){return Ct.lch.lab(t)};Ct.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let s,a,i;a=(e+16)/116,s=n/500+a,i=a-r/200;const o=a**3,l=s**3,u=i**3;return a=o>Nd?o:(a-16/116)/7.787,s=l>Nd?l:(s-16/116)/7.787,i=u>Nd?u:(i-16/116)/7.787,s*=95.047,a*=100,i*=108.883,[s,a,i]};Ct.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(n*n+r*r);return[e,i,s]};Ct.lch.lab=function(t){const e=t[0],n=t[1],s=t[2]/360*2*Math.PI,a=n*Math.cos(s),i=n*Math.sin(s);return[e,a,i]};Ct.rgb.ansi16=function(t,e=null){const[n,r,s]=t;let a=e===null?Ct.rgb.hsv(t)[2]:e;if(a=Math.round(a/50),a===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(i+=60),i};Ct.hsv.ansi16=function(t){return Ct.rgb.ansi16(Ct.hsv.rgb(t),t[2])};Ct.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e>>4===n>>4&&n>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};Ct.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,r=(e&1)*n*255,s=(e>>1&1)*n*255,a=(e>>2&1)*n*255;return[r,s,a]};Ct.ansi256.rgb=function(t){if(t=t[0],t>=232){const a=(t-232)*10+8;return[a,a,a]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,s=e%6/5*255;return[n,r,s]};Ct.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};Ct.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(o=>o+o).join(""));const r=Number.parseInt(n,16),s=r>>16&255,a=r>>8&255,i=r&255;return[s,a,i]};Ct.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(Math.max(e,n),r),a=Math.min(Math.min(e,n),r),i=s-a;let o;const l=i<1?a/(1-i):0;return i<=0?o=0:s===e?o=(n-r)/i%6:s===n?o=2+(r-e)/i:o=4+(e-n)/i,o/=6,o%=1,[o*360,i*100,l*100]};Ct.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[t[0],r*100,s*100]};Ct.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[t[0],r*100,s*100]};Ct.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],a=e%1*6,i=a%1,o=1-i;let l=0;switch(Math.floor(a)){case 0:{s[0]=1,s[1]=i,s[2]=0;break}case 1:{s[0]=o,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=i;break}case 3:{s[0]=0,s[1]=o,s[2]=1;break}case 4:{s[0]=i,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=o}return l=(1-n)*r,[(n*s[0]+l)*255,(n*s[1]+l)*255,(n*s[2]+l)*255]};Ct.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let s=0;return r>0&&(s=e/r),[t[0],s*100,r*100]};Ct.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let s=0;return r>0&&r<.5?s=e/(2*r):r>=.5&&r<1&&(s=e/(2*(1-r))),[t[0],s*100,r*100]};Ct.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]};Ct.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,s=r-e;let a=0;return s<1&&(a=(r-s)/(1-s)),[t[0],s*100,a*100]};Ct.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Ct.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Ct.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Ct.gray.hsl=function(t){return[0,0,t[0]]};Ct.gray.hsv=Ct.gray.hsl;Ct.gray.hwb=function(t){return[0,100,t[0]]};Ct.gray.cmyk=function(t){return[0,0,0,t[0]]};Ct.gray.lab=function(t){return[t[0],0,0]};Ct.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};Ct.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function $Fe(){const t={},e=Object.keys(Ct);for(let{length:n}=e,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function UFe(t){const e=$Fe(),n=[t];for(e[t].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(Ct[r]);for(let{length:a}=s,i=0;i<a;i++){const o=s[i],l=e[o];l.distance===-1&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(o))}}return e}function HFe(t,e){return function(n){return e(t(n))}}function VFe(t,e){const n=[e[t].parent,t];let r=Ct[e[t].parent][t],s=e[t].parent;for(;e[s].parent;)n.unshift(e[s].parent),r=HFe(Ct[e[s].parent][s],r),s=e[s].parent;return r.conversion=n,r}function qFe(t){const e=UFe(t),n={},r=Object.keys(e);for(let{length:s}=r,a=0;a<s;a++){const i=r[a];e[i].parent!==null&&(n[i]=VFe(i,e))}return n}const Ra={},GFe=Object.keys(Ct);function WFe(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function KFe(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=t(n);if(typeof s=="object")for(let{length:a}=s,i=0;i<a;i++)s[i]=Math.round(s[i]);return s};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of GFe){Ra[t]={},Object.defineProperty(Ra[t],"channels",{value:Ct[t].channels}),Object.defineProperty(Ra[t],"labels",{value:Ct[t].labels});const e=qFe(t),n=Object.keys(e);for(const r of n){const s=e[r];Ra[t][r]=KFe(s),Ra[t][r].raw=WFe(s)}}const Jse=["keyword","gray","hex"],PD={};for(const t of Object.keys(Ra))PD[[...Ra[t].labels].sort().join("")]=t;const Vx={};function Wr(t,e){if(!(this instanceof Wr))return new Wr(t,e);if(e&&e in Jse&&(e=null),e&&!(e in Ra))throw new Error("Unknown model: "+e);let n,r;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Wr)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const s=da.get(t);if(s===null)throw new Error("Unable to parse color from string: "+t);this.model=s.model,r=Ra[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(t.length>0){this.model=e||"rgb",r=Ra[this.model].channels;const s=Array.prototype.slice.call(t,0,r);this.color=FD(s,r),this.valpha=typeof t[r]=="number"?t[r]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(t);"alpha"in t&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const a=s.sort().join("");if(!(a in PD))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=PD[a];const{labels:i}=Ra[this.model],o=[];for(n=0;n<i.length;n++)o.push(t[i[n]]);this.color=FD(o)}if(Vx[this.model])for(r=Ra[this.model].channels,n=0;n<r;n++){const s=Vx[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Wr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in da.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return da.to[e.model](...n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return da.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=Ra[this.model],{labels:n}=Ra[this.model];for(let r=0;r<e;r++)t[n[r]]=this.color[r];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Wr([...this.color.map(XFe(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Wr([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Es("rgb",0,ia(255)),green:Es("rgb",1,ia(255)),blue:Es("rgb",2,ia(255)),hue:Es(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Es("hsl",1,ia(100)),lightness:Es("hsl",2,ia(100)),saturationv:Es("hsv",1,ia(100)),value:Es("hsv",2,ia(100)),chroma:Es("hcg",1,ia(100)),gray:Es("hcg",2,ia(100)),white:Es("hwb",1,ia(100)),wblack:Es("hwb",2,ia(100)),cyan:Es("cmyk",0,ia(100)),magenta:Es("cmyk",1,ia(100)),yellow:Es("cmyk",2,ia(100)),black:Es("cmyk",3,ia(100)),x:Es("xyz",0,ia(95.047)),y:Es("xyz",1,ia(100)),z:Es("xyz",2,ia(108.833)),l:Es("lab",0,ia(100)),a:Es("lab",1),b:Es("lab",2),keyword(t){return t!==void 0?new Wr(t):Ra[this.model].keyword(this.color)},hex(t){return t!==void 0?new Wr(t):da.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new Wr(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),da.to.hex(...e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,r]of t.entries()){const s=r/255;e[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Wr.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),r=this.rgb(),s=e===void 0?.5:e,a=2*s-1,i=n.alpha()-r.alpha(),o=((a*i===-1?a:(a+i)/(1+a*i))+1)/2,l=1-o;return Wr.rgb(o*n.red()+l*r.red(),o*n.green()+l*r.green(),o*n.blue()+l*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const t of Object.keys(Ra)){if(Jse.includes(t))continue;const{channels:e}=Ra[t];Wr.prototype[t]=function(...n){return this.model===t?new Wr(this):n.length>0?new Wr(n,t):new Wr([...JFe(Ra[this.model][t].raw(this.color)),this.valpha],t)},Wr[t]=function(...n){let r=n[0];return typeof r=="number"&&(r=FD(n,e)),new Wr(r,t)}}function YFe(t,e){return Number(t.toFixed(e))}function XFe(t){return function(e){return YFe(e,t)}}function Es(t,e,n){t=Array.isArray(t)?t:[t];for(const r of t)(Vx[r]||(Vx[r]=[]))[e]=n;return t=t[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[t](),s.color[e]=r,s):(s=this[t]().color[e],n&&(s=n(s)),s)}}function ia(t){return function(e){return Math.max(0,Math.min(t,e))}}function JFe(t){return Array.isArray(t)?t:[t]}function FD(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}const QFe={"background-0":"#161616","background-1":"#1e1e1e","background-2":"#262626",borders:"#3c3c3c",buttons:"#3c3c3c",links:"#56Caf0",sidebar:"#1e1e1e","sidebar-text":"#f5f5f5","text-0":"#f5f5f5","text-1":"#e2e2e2","text-2":"#ababab"};function ZFe(t){return t.replace(/\s+/g,"+")}function eBe(t){let e=document.getElementById("bettercanvas_custom_font_link"),n=document.getElementById("bettercanvas_custom_font"),r=t!=null&&t.theme_enabled&&(t==null?void 0:t.custom_font)||"Lato",s=()=>{document.head.appendChild(n);const i=ZFe(r);e.href=`https://fonts.googleapis.com/css2?family=${i}:wght@400;500;600;700&display=swap`,e.rel="stylesheet",document.head.appendChild(e),n.textContent=`*, input, a, button, h1, h2, h3, h4, h5, h6, p, span {font-family: '${r}'!important}:root {--bcfont: '${r}'!important}`},a=()=>{e=document.createElement("link"),e.id="bettercanvas_custom_font_link",n=document.createElement("style"),n.id="bettercanvas_custom_font",s()};e&&n?s():document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",()=>{a()})}const tBe=t=>{const e=t.match(/linear-gradient\((.*?)\)/);return e?e[1].split(",").map(s=>s.trim()).filter(s=>s.startsWith("#")||s.startsWith("rgb")||s.startsWith("hsl")).map(s=>{try{return new Wr(s).hex()}catch{return"#000000"}}):["#000000","#000000"]},nBe=t=>{var e,n,r,s;if((t==null?void 0:t.device_dark)===!0)return!!window.matchMedia("(prefers-color-scheme: dark)").matches;if((t==null?void 0:t.auto_dark)===!0){const a=new Date,i=a.getHours()*60+a.getMinutes(),o=parseInt((e=t==null?void 0:t.auto_dark_start)==null?void 0:e.hour)*60+parseInt((n=t==null?void 0:t.auto_dark_start)==null?void 0:n.minute),l=parseInt((r=t==null?void 0:t.auto_dark_end)==null?void 0:r.hour)*60+parseInt((s=t==null?void 0:t.auto_dark_end)==null?void 0:s.minute);return o>l?i>=o||i<l:i>=o&&i<l}return!!(t!=null&&t.dark_mode)};function rBe(t){var s;t=t||{};let e;const n=nBe(t);if(t.theme_enabled===!0){const a=n?"dark_preset":"light_preset";e=(t==null?void 0:t[a])||{}}else e=n?QFe:{};let r=`
        body {
            transition: background-color 0.3s ease !important;
    `;return e!=null&&e.cards||(e.cards="#00000000"),Object.keys(e).forEach(a=>{if(typeof e[a]=="string"){if(e[a].includes("linear-gradient")){const i=tBe(e[a]);r+="--bc"+a+"-ungradient:"+i[0]+";"}r+="--bc"+a+":"+e[a]+";"}}),r+=`--bcshadow: 0 0 10px 0 ${(s=t==null?void 0:t.dark_preset)==null?void 0:s.borders}40;`,r+"}"}const iE=()=>{const{useRerenderListener:t}=ut(),{options:e,trigger:n}=t(["dark_mode","theme_enabled","dark_preset","light_preset"]);return y.useEffect(()=>{eBe(e)},[n]),c.jsxs("style",{children:[rBe(e),sBe]})},sBe=`
.bg-theme-0 {
background:  var(--bcbackground-0, #fff)
}
.bg-theme-1 {
background: var(--bcbackground-1, #f2f4f4);
}
.bg-theme-2 {
background: var(--bcbackground-2, #e4e8e8);
}
.bg-sidebar {
background: var(--bcsidebar, #e4e8e8);
}
.!bg-theme-0 {
background: var(--bcbackground-0, #fff) !important;
}
.!bg-theme-1 {
background: var(--bcbackground-1, #f2f4f4) !important;
}
.!bg-theme-2 {
background: var(--bcbackground-2, #e4e8e8) !important;
}
.text-theme-0 {
color: var(--bctext-0, #273540);
}
.text-theme-1 {
color: var(--bctext-1, #777777);
}
.text-theme-2 {
color: var(--bctext-2, #ababab);
}
.!text-theme-0 {
color: var(--bctext-0, #273540) !important;
}
.!text-theme-1 {
color: var(--bctext-1, #777777) !important;
}
.text-theme-link {
color: var(--bclinks, #4a90e2);
}
.text-sidebar {
color: var(--bcsidebar-text, #273540);
}
.text-sidebar-default {
color: var(--bcsidebar-text, #fff);
}
.border-theme {
border-color: var(--bcborders, #e8eaec);
}
.border-theme-link {
border-color: var(--bclinks, #4a90e2);
}
.ring-theme {
ring-color: var(--bctext-0, #273540) !important;
}
.hover:bg-theme-0:hover {
background: var(--bcbackground-0, #fff) !important;
}
.hover:bg-theme-1:hover {
background: var(--bcbackground-1, #f2f4f4) !important;
}
.hover:bg-theme-2:hover {
background: var(--bcbackground-2, #e4e8e8) !important;
}
.hover:border-theme:hover {
border-color: var(--bcborders, #e8eaec) !important;
}
.fill-theme-links {
fill: var(--bclinks, #4a90e2);
}
.fill-text-theme-0 {
fill: var(--bctext-0, #273540);
}
.fill-bg-theme-2 {
fill: var(--bcbackground-2, #e4e8e8) !important;
}
.switch-checked[data-state="checked"] {
background: var(--bclinks, #4a90e2);
}
.switch-unchecked[data-state="unchecked"] {
background: var(--bcbackground-2, #e4e8e8);
}
.select-open-theme[data-state="open"] {
border-color: var(--bcborders, #e8eaec) !important;
}
.shadow-theme {
box-shadow: var(--bcshadow, 0 0 10px 0 #e8eaec50);
}
.font-theme {
font-family: var(--bcfont, "Lato Extended"), sans-serif;
}
.bg-brand-gradient {
background: linear-gradient(90deg, #ffa952, #ff686c);
}
.bg-brand-gradient-alt {
background: linear-gradient(90deg, #ef54c3, #ac92ff);
}

.data-[state=on]:bg-theme-2[data-state="on"] {
background: var(--bcbackground-2, #e4e8e8) !important;
}
.data-[state=on]:text-theme-0[data-state="on"] {
color: var(--bctext-0, #273540) !important;
}

/* inverses */

.data-[selected-single=true]:bg-theme-text-0[data-selected-single="true"],
.bg-theme-text-0 {
background: var(--bctext-0, #273540) !important;
}
.data-[selected-single=true]:text-theme-bg-0[data-selected-single="true"],
.text-theme-bg-0 {
color: var(--bcbackground-0, #fff) !important;
}

.bg-theme-link {
background: var(--bclinks, #4a90e2);
}
.bg-theme-text-0 {
background: var(--bctext-0, #273540);
}
.bg-theme-text-sidebar {
background: var(--bcsidebar-text, #273540);
}
.text-theme-bg {
color: var(--bcbackground-0, #fff);
}
.hover:text-theme-bg:hover {
color: var(--bcbackground-0, #fff);
}
.hover:text-sidebar:hover {
color: var(--bcsidebar-text, #273540);
}
.text-theme-bg-ungradient {
color: var(--bcbackground-0-ungradient, #fff);
}
.bg-theme-border {
background: var(--bcborders, #e8eaec);
}
.bg-theme-0-ungradient {
background: var(--bcbackground-0-ungradient, #fff);
}
.bg-sidebar-ungradient {
background: var(--bcsidebar-ungradient, #e4e8e8);
}
`;function Qse({isOpen:t,onComplete:e,onSkip:n,steps:r,container:s}){const[a,i]=y.useState(0),[o,l]=y.useState(!1),u=a===r.length-1,d=()=>{u?e():(i(a+1),l(!1))},f=r[a];if(!f)return null;const m=`${window.location.origin}${f.gifPath}`;return c.jsx(_c,{open:t,children:c.jsx(Tc,{container:s,showCloseButton:!1,variant:"default",className:"bg-white border border-gray-200 rounded-lg shadow-lg text-black max-w-[400px] p-0 overflow-hidden",onOpenAutoFocus:g=>g.preventDefault(),children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("div",{className:"relative w-full h-48 overflow-hidden bg-gray-100",children:o?c.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl",children:f.emoji}):c.jsx("video",{src:m,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",onError:g=>{console.error("Video failed to load:",m,g),l(!0)}},a)}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-2 text-black",children:[f.emoji," ",f.title]}),c.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.description})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:n,className:"text-sm px-4 py-2 text-gray-500 hover:text-gray-600 transition-colors cursor-pointer",children:"Skip"}),c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"flex gap-2",children:r.map((g,x)=>c.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${x===a?"bg-blue-500":x<a?"bg-blue-300":"bg-gray-300"}`},x))})}),c.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors cursor-pointer text-sm font-medium",children:u?"Done":"Next"})]})]})]})})})}const aBe=[{emoji:"",title:"Class-Based Organization",description:"Keep notes sorted by class automatically, instead of being a giant mess you'll never revisit.",gifPath:"/first-time/notes/ClassBased.webm"},{emoji:"",title:"AI-Powered Lecture Notes",description:"Catch what you might miss in class with real-time transcription and smart summaries.",gifPath:"/first-time/notes/Transcript.webm"},{emoji:"",title:"AI Engagement with Notes",description:"Turn your notes into flashcards, quizzes, or even a podcast  study the way that works best for you.",gifPath:"/first-time/notes/AIEngagement.webm"}],iBe=[{emoji:"",title:"Clean Assignment Overview",description:"All your due dates in one place  no more digging through multiple tabs and missing something.",gifPath:"/first-time/assignments/Overview.webm"},{emoji:"",title:"Planning Tool",description:"Decide when you'll actually do your work, not just track deadlines.",gifPath:"/first-time/assignments/Plan.webm"},{emoji:"",title:"Calendar Sync",description:"Your school life finally talks to your real life calendar  assignments, class times, and planned work times all in one view.",gifPath:"/first-time/assignments/Sync.webm"}],oBe=()=>{const{getOptions:t,updateOptions:e}=ut(),[n,r]=y.useState(!1),[s,a]=y.useState(null),i=y.useRef(!1);y.useEffect(()=>{if(i.current)return;i.current=!0,t().notes_onboarding_viewed||r(!0)},[t]);const o=()=>{e({notes_onboarding_viewed:!0}),r(!1)},l=()=>{e({notes_onboarding_viewed:!0}),r(!1)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed top-0 left-0 z-[100000000000000]",ref:a}),c.jsxs(obe,{children:[c.jsx(LFe,{}),c.jsx(Qse,{isOpen:n,onComplete:o,onSkip:l,steps:aBe,container:s})]})]})},lBe=()=>c.jsxs(Wd,{children:[c.jsx(iE,{}),c.jsx(oBe,{})]}),QA=(t,e)=>{},qV=t=>{switch(t){case"style":return"Style+";case"trial":return"Learn+ Trial";case"pro":return"Learn+";case"free":return"Free";default:return t.charAt(0).toUpperCase()+t.slice(1)}},cBe=t=>t?new Date(t*1e3).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"",uBe=()=>{var T,_,A,j;const{authenticatedClient:t,sendMessage:e,getOptions:n,updateOptions:r}=ut(),{authUser:s,planType:a,planEnd:i}=wa(),[o,l]=y.useState(""),u=y.useRef(((T=s==null?void 0:s.app_metadata)==null?void 0:T.username)||""),[d,f]=y.useState(!1),[m,g]=y.useState("");y.useEffect(()=>{var D,z;l(((D=s==null?void 0:s.app_metadata)==null?void 0:D.username)||""),u.current=((z=s==null?void 0:s.app_metadata)==null?void 0:z.username)||""},[s]);const x=async()=>{const D=await t();if(!D)return;const{error:z}=await D.functions.invoke("delete-account");z||e({type:"CALL_EXTENSION_FUNC",payload:{func:"updateSettings",payload:{auth:null}}})},b=()=>{g(o),f(!0)},C=()=>{f(!1),g("")},S=async()=>{var z,F,R,L,O;if(m===u.current){f(!1);return}const D=await t();if(D)try{const{data:H,error:P}=await D.rpc("change_username",{new_username:m.replace(/\s/g,"_")});if(P){QA("Couldn't update your username. It may already be taken.","error");return}if(H&&Array.isArray(H)&&H.length>0&&((z=H[0])!=null&&z.success)){const I=n(),U=H[0].username;l(U),u.current=U,f(!1),r({auth:{...I==null?void 0:I.auth,user:{...(F=I==null?void 0:I.auth)==null?void 0:F.user,app_metadata:{...(L=(R=I==null?void 0:I.auth)==null?void 0:R.user)==null?void 0:L.app_metadata,username:U}}}}),QA("Username updated successfully!","success")}else{const I=H&&Array.isArray(H)&&((O=H[0])==null?void 0:O.message)||"Couldn't update your username. It may already be taken.";QA(I,"error")}}catch{}},w=(_=s==null?void 0:s.user_metadata)==null?void 0:_.avatar_url,E=a!=="none";return c.jsxs("div",{className:"flex flex-col gap-0 p-4 min-h-full bg-theme-0",children:[c.jsxs("div",{className:"mb-6 bg-theme-0",children:[c.jsx("div",{className:"size-20 flex items-center justify-center overflow-hidden rounded-full border border-theme mb-4",children:w?c.jsx("img",{src:w,alt:"Profile",className:"size-full object-cover"}):c.jsx(bZ,{className:"size-8 text-theme-1"})}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("h2",{className:"text-2xl font-semibold text-theme-0",children:((A=s==null?void 0:s.user_metadata)==null?void 0:A.full_name)||"User"}),c.jsxs("span",{className:"text-sm text-theme-1",children:["(@",o||"username",")"]})]}),c.jsx("p",{className:"text-sm text-theme-1 mt-0.5",children:(s==null?void 0:s.email)||""}),E&&c.jsxs("div",{className:"mt-4 bg-theme-1 rounded-lg px-4 py-3 flex items-center gap-3",children:[c.jsx("span",{className:"bg-theme-0 text-theme-0 text-xs font-semibold px-2 py-1 rounded",children:qV(a)}),c.jsxs("span",{className:"text-sm text-theme-0",children:["You're on the ",qV(a)," plan.",i&&a!=="free"?` Renewing on ${cBe(i)}.`:""]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-theme-0",children:"Personal details"}),c.jsx("div",{className:"py-4 border-b border-theme",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-theme-0",children:"Full name"}),c.jsx("p",{className:"text-sm text-theme-1 mt-0.5",children:((j=s==null?void 0:s.user_metadata)==null?void 0:j.full_name)||"Not set"})]})}),c.jsx("div",{className:"py-4 border-b border-theme",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-semibold text-theme-0",children:"Username"}),d?c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx("input",{type:"text",value:m,onChange:D=>g(D.target.value.replace(/\s/g,"_")),className:"h-[36px] flex-1 border border-theme rounded-lg px-3 bg-theme-0 text-theme-0",autoFocus:!0}),c.jsx("button",{onClick:C,className:"text-sm text-theme-1 hover:text-theme-0 font-bold",children:"Cancel"}),c.jsx("button",{onClick:S,className:"text-sm text-brand font-bold",children:"Save"})]}):c.jsx("p",{className:"text-sm text-theme-1 mt-0.5",children:o||"Not set"})]}),!d&&c.jsx("button",{onClick:b,className:"text-sm text-theme-0 hover:text-theme-1 font-bold",children:"Edit"})]})}),c.jsxs("div",{className:"py-4",children:[c.jsx("p",{className:"text-sm font-semibold text-theme-0",children:"Email"}),c.jsx("p",{className:"text-sm text-theme-1 mt-0.5",children:(s==null?void 0:s.email)||"Not set"})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-theme-0 mb-4",children:"Manage account"}),c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-theme-0",children:"Delete account"}),c.jsx("p",{className:"text-sm text-theme-1 mt-0.5",children:"Permanently delete your BetterCanvas account."})]}),c.jsxs(_c,{children:[c.jsx(nw,{asChild:!0,children:c.jsx("button",{className:"text-sm text-red-500 font-bold cursor-pointer hover:text-red-600",children:"Delete"})}),c.jsxs(Tc,{className:"w-[400px] bg-theme-0 border-theme",children:[c.jsxs(_0,{children:[c.jsx(rw,{children:"Delete Account"}),c.jsx(Y6e,{children:"Are you sure you want to delete your account? This action is irreversible."})]}),c.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded-md",onClick:x,children:"Delete Account"})]})]})]})]})]})};var oE="Switch",[dBe]=Fa(oE),[hBe,fBe]=dBe(oE),Zse=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:o,value:l="on",onCheckedChange:u,form:d,...f}=t,[m,g]=y.useState(null),x=Bt(e,E=>g(E)),b=y.useRef(!1),C=m?d||!!m.closest("form"):!0,[S,w]=Mi({prop:s,defaultProp:a??!1,onChange:u,caller:oE});return c.jsxs(hBe,{scope:n,checked:S,disabled:o,children:[c.jsx(Nt.button,{type:"button",role:"switch","aria-checked":S,"aria-required":i,"data-state":rae(S),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:x,onClick:yt(t.onClick,E=>{w(T=>!T),C&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),C&&c.jsx(nae,{control:m,bubbles:!b.current,name:r,value:l,checked:S,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Zse.displayName=oE;var eae="SwitchThumb",tae=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=fBe(eae,n);return c.jsx(Nt.span,{"data-state":rae(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});tae.displayName=eae;var mBe="SwitchBubbleInput",nae=y.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const i=y.useRef(null),o=Bt(i,a),l=vk(n),u=gk(e);return y.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const x=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(x)}},[l,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nae.displayName=mBe;function rae(t){return t?"checked":"unchecked"}var pBe=Zse,gBe=tae;const vBe=Oi("peer cursor-pointer focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex shrink-0 items-center rounded-full shadow-xs transition-all duration-200 outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"data-[state=checked]:bg-[#ff895f] data-[state=unchecked]:bg-gray-300",theme:"switch-checked switch-unchecked"},size:{18:"h-[18px] w-[30.6px]",20:"h-[20px] w-[34px]",32:"h-[32px] w-[54.4px]"}}}),yBe=Oi("dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block rounded-full ring-0 transition-all duration-300 ease-in-out",{variants:{variant:{default:"bg-white",theme:"bg-theme-0"},size:{18:"size-[13.5px] data-[state=unchecked]:translate-x-[2.25px] data-[state=checked]:translate-x-[14.85px]",20:"size-[15px] data-[state=unchecked]:translate-x-[2.5px] data-[state=checked]:translate-x-[16.5px]",32:"size-[24px] data-[state=unchecked]:translate-x-[4px] data-[state=checked]:translate-x-[26.4px]"}}});function Xl({className:t,variant:e="theme",height:n=32,...r}){const s=n===18?"18":n===20?"20":"32";return c.jsx(pBe,{"data-slot":"switch",className:ge(vBe({variant:e,size:s}),t),...r,children:c.jsx(gBe,{"data-slot":"switch-thumb",className:ge(yBe({variant:e,size:s}))})})}const xBe=Oi("data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",{variants:{variant:{default:"border-input bg-transparent border-theme",theme:"border-theme bg-theme-0 text-theme-0 font-theme"}},defaultVariants:{variant:"theme"}}),bBe=({options:t,value:e=[],onValueChange:n,placeholder:r="Select options",triggerClassName:s="",contentClassName:a="w-[200px] p-0",container:i,variant:o="theme"})=>{const l=f=>{const m=e||[];let g;m.includes(f)?g=m.filter(x=>x!==f):g=[...m,f],n(g)},u=(e==null?void 0:e.length)||0,d=u>0?`${u} selected`:r;return c.jsxs(zo,{children:[c.jsx($o,{asChild:!0,children:c.jsxs("div",{className:`${xBe({variant:o})} ${s}`,children:[c.jsx("span",{className:"text-base-0",children:d}),c.jsx(oi,{className:"h-4 w-4 text-base-1"})]})}),c.jsx(Uo,{className:a+" bg-theme-0 border-theme overflow-hidden text-theme-0",container:i,variant:o,children:c.jsx("div",{children:t.map(f=>c.jsxs("div",{className:"relative flex w-full cursor-pointer text-base-0 hover:bg-base-1 hover:text-base-0 select-none items-center border-base px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",onClick:()=>l(f.value),children:[c.jsx("span",{className:"flex-1",children:f.label}),(e==null?void 0:e.includes(f.value))&&c.jsx(or,{className:"h-4 w-4"})]},f.value))})})]})},wBe=()=>{const{updateOptions:t,useRerenderListener:e}=ut(),{options:n}=e(["todo_reminders_time","notification_preferences","extension_updates","show_changelog_popups","browser_show_notifications"]),r=n.notification_preferences||{task_due_soon:{browser:!0},task_due_today:{browser:!0},overdue_task:{browser:!1}},s=n.todo_reminders_time??1,a=[1,2,3,6,12,24],i=n.extension_updates??!1,o=n.show_changelog_popups??!0,l=(d,f,m)=>{const g={...r,[d]:{...r[d],[f]:m}};t({notification_preferences:g})},u=d=>{t({todo_reminders_time:d})};return c.jsxs("div",{className:"flex flex-col gap-4 p-4 h-full",children:[c.jsx("h1",{className:"font-semibold text-lg",children:"Notifications"}),c.jsxs("div",{className:"bg-theme-0 rounded-lg border border-theme p-4",children:[c.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-[50%_1fr_1fr] text-sm",children:[c.jsx("div",{className:"font-medium",children:"Type"}),c.jsx("div",{className:"text-right",children:c.jsxs(ga,{children:[c.jsx(Ia,{children:c.jsx("div",{className:"font-medium text-theme-2 opacity-60 cursor-help",children:"Email"})}),c.jsx(va,{children:"Coming soon"})]})}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"font-medium justify-end flex items-center gap-1",children:[c.jsx("span",{children:"Browser"}),c.jsxs(zo,{children:[c.jsx($o,{className:"cursor-pointer hover:scale-105 transition-all duration-300",children:c.jsx(E1,{className:"size-4 text-theme-1"})}),c.jsx(Uo,{className:"p-3 bg-theme-0 border-theme",children:c.jsxs("div",{className:"flex flex-col justify-between gap-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Display on"}),c.jsx(bBe,{options:[{value:"non_canvas",label:"Non-Canvas pages"},{value:"canvas",label:"Canvas pages"}],value:n.browser_show_notifications||[],onValueChange:d=>t({browser_show_notifications:d}),placeholder:"Select pages",variant:"default",triggerClassName:"h-[32px] cursor-pointer"})]})})]})]})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid gap-4 items-center grid-cols-[50%_1fr_1fr]",children:[c.jsxs("div",{className:"text-sm flex items-center gap-2",children:[c.jsx("span",{children:"Task Due Soon"}),r.task_due_soon.browser&&c.jsxs(zo,{children:[c.jsx($o,{className:"cursor-pointer hover:scale-105 transition-all duration-300",children:c.jsx(E1,{className:"size-4 text-theme-1"})}),c.jsx(Uo,{className:"p-3",children:c.jsxs("div",{className:"flex flex-col justify-between gap-1",children:[c.jsx("h3",{className:"text-sm font-medium",children:"Remind me"}),c.jsx("div",{className:"flex",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsxs(jo,{value:String(s),onValueChange:d=>u(parseInt(d)),children:[c.jsx(Do,{className:"h-[32px] rounded-md border border-theme bg-theme-0 px-2",children:c.jsx(Td,{})}),c.jsx(Ro,{className:"z-100",children:a.map(d=>c.jsx(Xt,{value:d.toString(),children:`${d} hour${d===1?"":"s"}`},d))})]}),c.jsx("span",{children:" before due"})]})})]})})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs(ga,{children:[c.jsx(Ia,{children:c.jsx(Xl,{height:20,checked:!1,variant:"default",disabled:!0,className:"opacity-40"})}),c.jsx(va,{children:"Coming soon"})]})}),c.jsx("div",{className:"flex justify-end",children:c.jsx(Xl,{height:20,checked:r.task_due_soon.browser,onCheckedChange:d=>l("task_due_soon","browser",d===!0)})})]}),c.jsxs("div",{className:"grid gap-4 items-center grid-cols-[50%_1fr_1fr]",children:[c.jsx("div",{className:"text-sm",children:"Extension Updates"}),c.jsx("div",{className:"flex justify-end",children:c.jsxs(ga,{children:[c.jsx(Ia,{children:c.jsx(Xl,{height:20,checked:!1,disabled:!0,className:"opacity-40"})}),c.jsx(va,{children:"Coming soon"})]})}),c.jsx("div",{className:"flex justify-end",children:c.jsx(Xl,{height:20,checked:i,onCheckedChange:d=>t({extension_updates:d})})})]})]})]}),c.jsx("div",{className:"space-y-2",children:c.jsx("div",{className:"border border-theme bg-theme-0 rounded-lg p-3 flex items-center justify-between gap-2",children:c.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[c.jsx("p",{className:"text-sm",children:"Show changelog popups"}),c.jsx(Xl,{height:20,checked:o,onCheckedChange:d=>t({show_changelog_popups:d})})]})})})]})},CBe=()=>c.jsx("div",{children:c.jsx("h1",{children:"Privacy"})}),SBe={pro:"Learn+",style:"Style+",prolite:"Style+",free:"Free",trial:"Trial",trialThenPro:"Trial"},kBe=()=>{var D,z,F,R,L,O;const{authenticatedClient:t,authenticatedFetch:e,loadAuthModal:n}=ut(),{planType:r}=wa(),[s,a]=y.useState(null),[i,o]=y.useState(!0);y.useEffect(()=>{l()},[]);async function l(){try{const H=await e(`${Jr}/users/billing-info`,{method:"GET"});if(H.ok){const P=await H.json();a(P.message)}}catch(H){console.error("Failed to fetch billing info:",H)}finally{o(!1)}}async function u(){var W;const H=window.open("","stripe-portal","width=1000,height=720"),I=await(await t()).functions.invoke("create-portal",{method:"POST",body:{returnUrl:window.location.origin+"/portal-return"}}),{url:U}=await((W=I.data)==null?void 0:W.message);if(U&&H){H.location.href=U;return}}const d=()=>{n("upgrade")},f=H=>H?new Date(H*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):null,m=(H,P)=>H==null?null:new Intl.NumberFormat("en-US",{style:"currency",currency:(P==null?void 0:P.toUpperCase())||"USD"}).format(H),g=((D=s==null?void 0:s.subscription)==null?void 0:D.planType)||r,x=SBe[g]||"Free",b=["pro","style","prolite","trial","trialThenPro"].includes(g),C=["trial","trialThenPro"].includes(g),S=(z=s==null?void 0:s.billingInfo)==null?void 0:z.cancelAtPeriodEnd,w=f((F=s==null?void 0:s.billingInfo)==null?void 0:F.currentPeriodEnd),E=m((R=s==null?void 0:s.billingInfo)==null?void 0:R.amount,(L=s==null?void 0:s.billingInfo)==null?void 0:L.currency),T=(O=s==null?void 0:s.billingInfo)==null?void 0:O.interval;if(i)return c.jsx("div",{className:"flex flex-col gap-4 p-4 h-full items-center justify-center",children:c.jsx(js,{className:"size-6 animate-spin text-theme-1"})});const _=!T||T==="month",A=b&&!C,j=b&&_&&!S&&!C;return c.jsxs("div",{className:"flex flex-col gap-4 p-4 h-full",children:[c.jsx("h1",{className:"font-bold text-2xl text-theme-0 mb-2",children:x}),A&&c.jsxs("div",{className:"bg-theme-1 rounded-xl px-4 py-3.5 flex items-center gap-3",children:[c.jsx(Mg,{className:"size-[18px] text-theme-0 flex-shrink-0",strokeWidth:1.5}),c.jsx("p",{className:"text-sm text-theme-0",children:S?c.jsxs(c.Fragment,{children:["Your plan ends on ",w||"soon","."]}):w&&E?c.jsxs(c.Fragment,{children:["Your next bill is ",E," on ",w,".","   ",c.jsx("button",{onClick:u,className:"underline hover:no-underline",children:"See billing details"})]}):c.jsxs(c.Fragment,{children:["View your billing information.","   ",c.jsx("button",{onClick:u,className:"underline hover:no-underline",children:"See billing details"})]})})]}),C&&c.jsxs("div",{className:"bg-theme-1 rounded-xl px-4 py-3.5 flex items-center gap-3",children:[c.jsx(Mg,{className:"size-[18px] text-theme-0 flex-shrink-0",strokeWidth:1.5}),c.jsxs("p",{className:"text-sm text-theme-0",children:["Your trial ends on ",w||"soon","."]})]}),j&&c.jsxs("div",{className:"bg-theme-1 rounded-xl px-4 py-3.5 flex items-center gap-3 opacity-60",children:[c.jsx(S0,{className:"size-[18px] text-theme-0 flex-shrink-0",strokeWidth:1.5}),c.jsxs("p",{className:"text-sm text-theme-0",children:["Save with a yearly ",x," plan  ",c.jsx("span",{className:"text-theme-1",children:"Coming soon"})]})]}),E&&T&&c.jsxs("p",{className:"text-lg font-semibold text-theme-0 mt-2",children:[E,"/",T]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:d,style:{background:"var(--bctext-0)",color:"var(--bcbackground-0)"},className:"px-5 py-2 rounded-full font-medium text-sm hover:opacity-90 transition-opacity",children:"Upgrade"}),b&&!S&&c.jsx("button",{onClick:u,className:"bg-theme-1 text-theme-0 px-5 py-2 rounded-full font-medium text-sm hover:brightness-95 transition-all",children:"Cancel plan"}),b&&c.jsx("button",{onClick:u,className:"bg-theme-1 text-theme-0 px-5 py-2 rounded-full font-medium text-sm hover:brightness-95 transition-all",children:"Manage billing"})]}),c.jsxs("p",{className:"text-sm text-[#666] dark:text-theme-1 mt-1",children:["View all plans & features on the"," ",c.jsx("a",{href:"/upgrade",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:"Pricing"})," ","page."]})]})},EBe=()=>{const[t]=g8(),e=t.get("tab")||"account",[n,r]=y.useState(e);return y.useEffect(()=>{r(e)},[e]),c.jsxs("div",{className:"w-full h-full bg-theme-0 rounded-lg flex gap-2 text-theme-0 overflow-hidden",children:[c.jsxs("div",{className:"rounded-xl p-4 flex flex-col gap-2 min-w-max m-3",style:{backdropFilter:"invert(.03)"},children:[c.jsx("p",{className:"text-theme-0 text-xl font-bold ml-2 mb-2",children:"Settings"}),c.jsxs("button",{className:`flex items-center gap-2 cursor-pointer px-3 py-2 pr-12 w-full text-left rounded-xl border transition-all duration-200 ${n==="account"?"bg-theme-0 text-theme-0 border-theme":"border-transparent hover:bg-theme-1"}`,onClick:()=>r("account"),children:[c.jsx(bZ,{className:"size-4"})," Account"]}),c.jsxs("button",{className:`flex items-center gap-2 cursor-pointer px-3 py-2 pr-12 w-full text-left rounded-xl border transition-all duration-200 ${n==="notifications"?"bg-theme-0 text-theme-0 border-theme":"border-transparent hover:bg-theme-1"}`,onClick:()=>r("notifications"),children:[c.jsx(wke,{className:"size-4"})," Notifications"]}),c.jsxs("button",{className:`flex items-center gap-2 cursor-pointer px-3 py-2 pr-12 w-full text-left rounded-xl border transition-all duration-200 ${n==="privacy"?"bg-theme-0 text-theme-0 border-theme":"border-transparent hover:bg-theme-1"}`,onClick:()=>r("privacy"),children:[c.jsx(N_e,{className:"size-4"})," Privacy"]}),c.jsxs("button",{className:`flex items-center gap-2 cursor-pointer px-3 py-2 pr-12 w-full text-left rounded-xl border transition-all duration-200 ${n==="billing"?"bg-theme-0 text-theme-0 border-theme":"border-transparent hover:bg-theme-1"}`,onClick:()=>r("billing"),children:[c.jsx(eEe,{className:"size-4"})," Plan and Billing"]})]}),c.jsxs("div",{className:"flex-1 max-w-[700px] w-full mx-auto p-6 overflow-y-auto h-full",children:[n==="account"&&c.jsx(uBe,{}),n==="notifications"&&c.jsx(wBe,{}),n==="privacy"&&c.jsx(CBe,{}),n==="billing"&&c.jsx(kBe,{})]})]})},_Be=()=>c.jsxs(Wd,{children:[c.jsx(iE,{}),c.jsx(EBe,{})]}),TBe=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(null),{useRerenderListener:s,sendMessageAndListen:a}=ut(),{options:i}=s(["google_cal_events","google_cal_events_last_sync"],"local"),{options:o}=s(["google_calendars","google_cal_sync_token"],"sync");y.useEffect(()=>{const f=(i==null?void 0:i.google_cal_events)||{},m=(i==null?void 0:i.google_cal_events_last_sync)||null;console.log("[useGoogleCalendarEvents] Processing cached events from local storage");const g=[];for(const x of Object.values(f))Array.isArray(x)&&g.push(...x);g.sort((x,b)=>{var w,E,T,_;const C=new Date(((w=x.start)==null?void 0:w.dateTime)||((E=x.start)==null?void 0:E.date)||0),S=new Date(((T=b.start)==null?void 0:T.dateTime)||((_=b.start)==null?void 0:_.date)||0);return C.getTime()-S.getTime()}),console.log(`[useGoogleCalendarEvents] Loaded ${g.length} events from cache`),e(g),r(m)},[i==null?void 0:i.google_cal_events,i==null?void 0:i.google_cal_events_last_sync]);const l=y.useCallback(async()=>{const f=await a({type:"CALL_EXTENSION_FUNC",payload:{func:"checkAndRefreshCalendarTokens",args:{}}});return f.success?f.token:null},[]),u=y.useCallback(async(f,m,g)=>{var b;const x=await l();if(console.log("[useGoogleCalendarEvents] validToken",x),!x)return console.error("[useGoogleCalendarEvents] No valid token available"),[];try{const C=new URL(`https://www.googleapis.com/calendar/v3/calendars/${f}/events`);C.searchParams.append("timeMin",m.toISOString()),C.searchParams.append("timeMax",g.toISOString()),C.searchParams.append("maxResults","250"),C.searchParams.append("singleEvents","true"),C.searchParams.append("orderBy","startTime"),console.log(`[useGoogleCalendarEvents] Fetching from: ${C.toString()}`);const S=await fetch(C.toString(),{headers:{Authorization:`Bearer ${x.access_token}`,"Content-Type":"application/json"}});if(!S.ok)return console.error(`[useGoogleCalendarEvents] Failed to fetch calendar ${f}: ${S.status}`),[];const w=await S.json();return console.log(`[useGoogleCalendarEvents] Fetched ${((b=w.items)==null?void 0:b.length)||0} events for calendar ${f}`),(w.items||[]).filter(E=>{var _,A,j,D;return!(((A=(_=E.extendedProperties)==null?void 0:_.private)==null?void 0:A.canvasId)||((D=(j=E.extendedProperties)==null?void 0:j.private)==null?void 0:D.canvasType))&&E.status!=="cancelled"})}catch(C){return console.error(`[useGoogleCalendarEvents] Error fetching calendar ${f}:`,C),[]}},[l]),d=y.useCallback(async f=>{try{if(!(o!=null&&o.google_calendars)||!(o!=null&&o.google_cal_sync_token))return[];const m=ou(f),g=i4(m,1);console.log(`[useGoogleCalendarEvents] Fetching events from ${m.toISOString()} to ${g.toISOString()}`);const x=[];for(const[b,C]of Object.entries(o.google_calendars)){const S=C;if(!S.shouldSync)continue;const E=(await u(b,m,g)).map(T=>({...T,calendarId:b,calendarColor:S.backgroundColor}));x.push(...E)}return x.sort((b,C)=>{var E,T,_,A;const S=new Date(((E=b.start)==null?void 0:E.dateTime)||((T=b.start)==null?void 0:T.date)||0),w=new Date(((_=C.start)==null?void 0:_.dateTime)||((A=C.start)==null?void 0:A.date)||0);return S.getTime()-w.getTime()}),console.log(`[useGoogleCalendarEvents] Fetched ${x.length} events for range`),x}catch(m){return console.error("[useGoogleCalendarEvents] Error fetching date range:",m),[]}},[o==null?void 0:o.google_calendars,o==null?void 0:o.google_cal_sync_token,u]);return y.useMemo(()=>({events:t,loading:!1,lastSync:n,fetchEventsForDateRange:d,refetch:()=>{}}),[t,n,d])},ABe=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(null),{useRerenderListener:s,sendMessageAndListen:a,authenticatedClient:i,updateOptions:o}=ut(),{options:l}=s(["microsoft_cal_events","microsoft_cal_events_last_sync"],"local"),{options:u}=s(["microsoft_calendars","microsoft_cal_sync_token"],"sync"),d=(x,b,C)=>{var _,A,j,D,z;const S=x.isAllDay||!1,w=(F,R)=>{const L=F.replace(/\.\d{7}$/,"");return R==="UTC"&&!S?L+"Z":L},E=w(x.start.dateTime,x.start.timeZone),T=w(x.end.dateTime,x.end.timeZone);return{id:x.id,summary:x.subject||"Untitled Event",description:x.bodyPreview||((_=x.body)==null?void 0:_.content),start:S?{date:E.split("T")[0],timeZone:x.start.timeZone}:{dateTime:E,timeZone:x.start.timeZone},end:S?{date:T.split("T")[0],timeZone:x.end.timeZone}:{dateTime:T,timeZone:x.end.timeZone},htmlLink:x.webLink,status:x.isCancelled?"cancelled":"confirmed",organizer:x.organizer?{email:(A=x.organizer.emailAddress)==null?void 0:A.address,displayName:(j=x.organizer.emailAddress)==null?void 0:j.name}:void 0,attendees:(D=x.attendees)==null?void 0:D.map(F=>{var R,L,O;return{email:(R=F.emailAddress)==null?void 0:R.address,displayName:(L=F.emailAddress)==null?void 0:L.name,responseStatus:(O=F.status)==null?void 0:O.response}}),location:(z=x.location)==null?void 0:z.displayName,recurringEventId:x.seriesMasterId,calendarId:b,calendarColor:C}};y.useEffect(()=>{const x=(l==null?void 0:l.microsoft_cal_events)||{},b=(l==null?void 0:l.microsoft_cal_events_last_sync)||null;console.log("[useMicrosoftCalendarEvents] Processing cached events from local storage");const C=[];for(const S of Object.values(x))Array.isArray(S)&&C.push(...S);C.sort((S,w)=>{var _,A,j,D;const E=new Date(((_=S.start)==null?void 0:_.dateTime)||((A=S.start)==null?void 0:A.date)||0),T=new Date(((j=w.start)==null?void 0:j.dateTime)||((D=w.start)==null?void 0:D.date)||0);return E.getTime()-T.getTime()}),console.log(`[useMicrosoftCalendarEvents] Loaded ${C.length} events from cache`),e(C),r(b)},[l==null?void 0:l.microsoft_cal_events,l==null?void 0:l.microsoft_cal_events_last_sync]);const f=y.useCallback(async()=>await a({type:"CALL_EXTENSION_FUNC",payload:{func:"checkAndRefreshCalendarTokens",args:{}}}),[a]),m=y.useCallback(async(x,b,C)=>{var w;const S=await f();if(!S)return console.error("[useMicrosoftCalendarEvents] No valid token available"),[];try{const E=new URL(`https://graph.microsoft.com/v1.0/me/calendars/${x}/calendarview`);E.searchParams.append("startDateTime",b.toISOString()),E.searchParams.append("endDateTime",C.toISOString()),E.searchParams.append("$top","250"),E.searchParams.append("$orderby","start/dateTime"),E.searchParams.append("$select","id,subject,bodyPreview,body,start,end,location,webLink,isAllDay,isCancelled,organizer,attendees,categories,recurrence,seriesMasterId"),console.log(`[useMicrosoftCalendarEvents] Fetching from: ${E.toString()}`);const T=await fetch(E.toString(),{headers:{Authorization:`Bearer ${S.access_token}`,"Content-Type":"application/json"}});if(!T.ok)return console.error(`[useMicrosoftCalendarEvents] Failed to fetch calendar ${x}: ${T.status}`),[];const _=await T.json();return console.log(`[useMicrosoftCalendarEvents] Fetched ${((w=_.value)==null?void 0:w.length)||0} events for calendar ${x}`),(_.value||[]).filter(A=>{var D;return!((D=A.categories)==null?void 0:D.includes("BetterCanvas"))&&!A.isCancelled})}catch(E){return console.error(`[useMicrosoftCalendarEvents] Error fetching calendar ${x}:`,E),[]}},[f]),g=y.useCallback(async x=>{try{if(!(u!=null&&u.microsoft_calendars)||!(u!=null&&u.microsoft_cal_sync_token))return[];const b=ou(x),C=i4(b,1);console.log(`[useMicrosoftCalendarEvents] Fetching events from ${b.toISOString()} to ${C.toISOString()}`);const S=[];for(const[w,E]of Object.entries(u.microsoft_calendars)){const T=E;if(!T.shouldSync)continue;const A=(await m(w,b,C)).map(j=>d(j,w,T.color||"#0078D4"));S.push(...A)}return S.sort((w,E)=>{var A,j,D,z;const T=new Date(((A=w.start)==null?void 0:A.dateTime)||((j=w.start)==null?void 0:j.date)||0),_=new Date(((D=E.start)==null?void 0:D.dateTime)||((z=E.start)==null?void 0:z.date)||0);return T.getTime()-_.getTime()}),console.log(`[useMicrosoftCalendarEvents] Fetched ${S.length} events for range`),S}catch(b){return console.error("[useMicrosoftCalendarEvents] Error fetching date range:",b),[]}},[u==null?void 0:u.microsoft_calendars,u==null?void 0:u.microsoft_cal_sync_token,m]);return y.useMemo(()=>({events:t,loading:!1,lastSync:n,fetchEventsForDateRange:g,refetch:()=>{}}),[t,n,g])},NBe=()=>{const t=y.useRef({start:null,end:null});return{isFullyCovered:(s,a)=>{if(!t.current.start||!t.current.end)return!1;const i=ou(s),o=HT(a);return!pS(i,t.current.start)&&!qT(o,t.current.end)},getUnfetchedRange:(s,a)=>{console.log("[useCoverage] getUnfetchedRange called",s,a,t.current);const i=ou(s),o=HT(a);let l=[];if(!t.current.start||!t.current.end)return[{start:i,end:o}];if(pS(i,t.current.start)){let d=t.current.start;const f=[];for(;qT(d,i);){const m=d,g=i4(d,-1);f.push({start:g,end:m}),d=g}l.push(...f.reverse())}if(qT(o,t.current.end)){let d=t.current.end;for(;pS(d,o);){const f=d,m=i4(d,1);l.push({start:f,end:m}),d=m}}return l},updateCoverageRange:(s,a)=>{const i=ou(s),o=HT(a);if(!t.current.start||!t.current.end){t.current.start=i,t.current.end=o;return}i<t.current.start&&(t.current.start=i),o>t.current.end&&(t.current.end=o)}}},jBe=t=>t.map(e=>{var a,i,o,l,u;const n=new Date(((a=e.start)==null?void 0:a.dateTime)||((i=e.start)==null?void 0:i.date)||0),r=new Date(((o=e.end)==null?void 0:o.dateTime)||((l=e.end)==null?void 0:l.date)||0),s=!((u=e.start)!=null&&u.dateTime);return{id:`google_${e.id}`,title:e.summary||"Untitled Event",description:e.description,startDate:n,endDate:r,isAllDay:s,duration:Math.floor((r.getTime()-n.getTime())/(1e3*60)),plannedAt:n.toISOString(),location:e.location,htmlLink:e.htmlLink,calendarColor:e.calendarColor,calendarId:e.calendarId,source:"google_calendar",isGoogleEvent:!0,isMicrosoftEvent:!1}}),DBe=t=>t.map(e=>{var a,i,o,l,u;const n=new Date(((a=e.start)==null?void 0:a.dateTime)||((i=e.start)==null?void 0:i.date)||0),r=new Date(((o=e.end)==null?void 0:o.dateTime)||((l=e.end)==null?void 0:l.date)||0),s=!((u=e.start)!=null&&u.dateTime);return{id:`microsoft_${e.id}`,title:e.summary||"Untitled Event",description:e.description,startDate:n,endDate:r,isAllDay:s,plannedAt:n.toISOString(),duration:Math.floor((r.getTime()-n.getTime())/(1e3*60)),location:e.location,htmlLink:e.htmlLink,calendarColor:e.calendarColor,calendarId:e.calendarId,source:"microsoft_calendar",isGoogleEvent:!1,isMicrosoftEvent:!0}}),mw=(t,e)=>{const[n,r]=y.useState([]),[s,a]=y.useState(!1),[i,o]=y.useState({}),{getUnfetchedRange:l,updateCoverageRange:u}=NBe(),d=TBe(),f=ABe();return y.useEffect(()=>{(async()=>{if(!t||!e)return;const g=l(t,e);if(g.length===0)return;const x=[];for(const b of g){u(b.start,b.end);const C=await d.fetchEventsForDateRange(b.start),S=await f.fetchEventsForDateRange(b.start),w=jBe(C),E=DBe(S);x.push(...w,...E)}r(b=>[...b,...x])})()},[t,e]),{events:n,loading:s,lastSync:i,googleEvents:d.events,microsoftEvents:f.events}},Qa={due:new Date().toISOString(),duration:30},RBe=()=>{const{getOptions:t,updateOptions:e,authenticatedClient:n,showError:r,sendMessage:s,sendMessageAndListen:a,authenticatedFetch:i,openGatedDialog:o}=ut(),l=async(b,C)=>{console.log("[updatePlannedCache] Called with action:",C,"assignments:",b);const w=t("local").cached_planned_assignments??{};b.forEach(E=>{const T=E.id;T&&(C==="add"?w[T]=E:C==="update"?w[T]={...w[T],...E}:C==="delete"&&delete w[T])}),console.log("[updatePlannedCache] Writing to local storage:",w),e({cached_planned_assignments:w},"local")},u=async b=>{console.log("[upsertPlannedAssignment] Called with assignments:",b);const C=b.map(T=>sae(T)),S=await i(`${Jr}/assignments/upsert`,{method:"POST",body:{assignments:C}}),{message:w,error:E}=await S.json();if((E==null?void 0:E.code)===429||S.status===429)throw o("assignments_upsert"),new Error("gated");if(E&&E.includes("gated"))throw new Error("gated");for(const T of b)f({assignmentId:T.id.toString(),assignmentData:T,syncType:"planned"});return w},d=async(b,C={})=>{var T;const S=[];let w=null;const E=C.showError!==!1;for(const _ of b){let A=null,j=null;try{const D=await i(`${Jr}/assignments/${_}`,{method:"DELETE"}),z=await D.text();if(z.trim().length>0)try{j=JSON.parse(z)}catch(L){console.warn(`Failed to parse delete response for ${_}:`,L)}const F=j==null?void 0:j.error,R=D.status===404;if(!D.ok&&!R){const L=F||`HTTP ${D.status}`;console.error(`Error deleting assignment ${_}:`,L),E&&r("There was an error deleting the assignment","error"),S.push({id:_,success:!1});continue}if(F&&!((T=F.toLowerCase)!=null&&T.call(F).includes("not found"))){console.error(`Error deleting assignment ${_}:`,F),E&&r("There was an error deleting the assignment","error"),S.push({id:_,success:!1});continue}A=j==null?void 0:j.message}catch(D){console.error(`Failed to delete assignment ${_}:`,D),E&&r("There was an error deleting the assignment","error"),S.push({id:_,success:!1});continue}try{await g(_)}catch(D){console.error(`Failed to remove assignment ${_} from calendars:`,D)}A!=null&&A.usage&&(w=A.usage),S.push({id:_,success:!0})}return{count:S.filter(_=>_.success).length,usage:w}},f=async({assignmentId:b,assignmentData:C,syncType:S})=>await a({type:"CALL_EXTENSION_FUNC",payload:{func:"syncAssignmentToCalendars",args:{assignmentId:b,assignmentData:C,syncType:S}}}),m=async()=>await a({type:"CALL_EXTENSION_FUNC",payload:{func:"triggerCalendarPullSync",args:{}}}),g=async b=>await a({type:"CALL_EXTENSION_FUNC",payload:{func:"deleteAssignmentFromCalendars",args:{assignmentId:b}}});return{updatePlannedCache:l,upsertPlannedAssignment:u,deletePlannedAssignments:d,syncAssignmentToCalendars:f,triggerCalendarPullSync:m,deleteAssignmentFromCalendars:g,getWeeklyUsage:async()=>{const b=await i(`${Jr}/assignments/weekly-usage`,{method:"GET"}),{message:C,error:S}=await b.json();if(S)throw console.error("Error fetching weekly usage:",S),new Error(S);return C}}};function sae(t){const e={};return t.id!==void 0&&(e.assignment_id=t.id),t.course!==void 0&&(e.course=t.course),t.title!==void 0&&(e.title=t.title),t.duration!==void 0&&(e.duration=t.duration),t.plannedAt!==void 0&&(e.planned_at=t.plannedAt),t.status!==void 0&&(e.status=t.status),e}const MBe=()=>{const{getOptions:t,updateOptions:e}=ut();return{addToQueue:async(r,s,a)=>{console.log("[CalendarQueue] Adding to queue:",{canvasId:r,operation:s,eventData:a});const i=t("local"),o=[...(i==null?void 0:i.unsynced_calendar)||[]],l={canvasId:r,operation:s,eventData:a};o.push(l),e({unsynced_calendar:o},"local"),console.log("[CalendarQueue] Queue updated, length:",o.length)}}};var aae=(t=>(t.NOTE="note",t.ASSIGNMENT="assignment",t.FILE="file",t.EXTERNAL="external",t))(aae||{});function GV(t){const e={assignment:{},note:{},file:{},external:{}};return t.forEach(n=>{const[r,s]=n;e[r.type][r.target]||(e[r.type][r.target]=[]),e[r.type][r.target].push(s),e[s.type][s.target]||(e[s.type][s.target]=[]),e[s.type][s.target].push(r)}),e}const WV=t=>{let e=[];for(const n of(t==null?void 0:t.custom_assignments_overflow)||[]){const r=(t==null?void 0:t[n])||[];e=e.concat(r||[])}return e},IBe=()=>{const{useRerenderListener:t}=ut(),{options:e,trigger:n}=t(["custom_assignments_overflow","custom_assignments_(.*)"]),[r,s]=y.useState(()=>WV(e));return y.useEffect(()=>{const a=WV(e);s(a)},[n]),r},OBe=()=>{const{useRerenderListener:t}=ut(),{options:e,trigger:n}=t(["overrides"]),[r,s]=y.useState(e.overrides||{});return y.useEffect(()=>{s((e==null?void 0:e.overrides)||{})},[n]),r},PBe=()=>{const{useRerenderListener:t}=ut(),{options:e,trigger:n}=t(["links"]),[r,s]=y.useState(GV((e==null?void 0:e.links)||[]));return y.useEffect(()=>{s(GV((e==null?void 0:e.links)||[]))},[n]),r},iae=y.createContext(null),oae=y.createContext(null),Fv=()=>{const t=y.useContext(iae);if(!t)throw new Error("useDrag must be used within an DragProvider");return t},zt=()=>{const t=y.useContext(oae);if(!t)throw new Error("usePlanner must be used within an PlannerProvider");return t},FBe=({children:t})=>{const[e,n]=y.useState(null),[r,s]=y.useState(null),[a,i]=y.useState(null),[o,l]=y.useState(null),[u,d]=y.useState(null),[f,m]=y.useState(null),[g,x]=y.useState(!1),b=y.useMemo(()=>({currentDragDate:e,setCurrentDragDate:n,activeDragItem:a,setActiveDragItem:i,resizeHeight:o,setResizeHeight:l,dropZone:u,setDropZone:d,currentDragDelta:f,setCurrentDragDelta:m,activeCalendarDragItem:r,setActiveCalendarDragItem:s,shouldAnimateDrop:g,setShouldAnimateDrop:x}),[e,r,a,o,u,f,g]);return c.jsx(iae.Provider,{value:b,children:t})},BBe=({children:t,portal:e})=>{var Yr,Fu;const n=new Date;n.setHours(0,0,0,0);const{updateOptions:r,useRerenderListener:s,sendMessageAndListen:a,getOptions:i,showError:o,openGate:l}=ut(),{schedule:u}=zr(),{events:d}=mw(new Date,ir(new Date,7)),{updatePlannedCache:f,upsertPlannedAssignment:m,deletePlannedAssignments:g,getWeeklyUsage:x}=RBe(),{planType:b}=wa(),{addToQueue:C}=MBe(),[S,w]=y.useState("planner"),[E,T]=y.useState(n),[_,A]=y.useState(n),[j,D]=y.useState(n),[z,F]=y.useState("default"),[R,L]=y.useState(null),[O,H]=y.useState(null),[P,I]=y.useState(!0),{options:U,trigger:W}=s(["assignments_unassigned_period","assignments_minical_days","assignments_week_days","assignments_calendar_view_type","assignments_zoom","assignments_view","assignments_auto_plan","assignments_display_off","todo_24hr","assignments_block_height"]),[Y,B]=y.useState(()=>{const Ke=new URLSearchParams(window.location.search).get("filter_course");return{course:Ke?[Ke]:[],status:[],duration:[],type:[],linked:[]}}),Z=Math.round(72*((U.assignments_zoom||100)/100)),le=290,G=100,K=0,te=4,ie=60/te,de=Z/te,[fe,se]=y.useState(new Date),ce=y.useRef(null),ue=async We=>{r(We)},oe=()=>{var We;if(U.assignments_view==="planner"){const ft=(U.assignments_calendar_view_type||"week")==="5day"?5:U.assignments_week_days||7,nn=(((We=ce.current)==null?void 0:We.clientWidth)??window.innerWidth)-G;return Math.floor(nn/ft)}return U.assignments_minical_days===3?120:U.assignments_minical_days===2?150:U.assignments_minical_days===1?220:320},[Ne,ve]=y.useState(oe()),He=We=>{ue({assignments_week_days:We})},nt=We=>{ue({assignments_zoom:We})};y.useEffect(()=>{ve(oe())},[W]);const Me=We=>{const Ke=Math.floor((We==null?void 0:We.getMinutes())/(60/te));return(We==null?void 0:We.getHours())+Ke/te},[$e,Le]=y.useState(null),ae=y.useRef({top:0,left:0}),pe=y.useRef(null);y.useEffect(()=>{if(U.assignments_view!=="planner")return;const We=ce.current;if(!We)return;const Ke=Jt=>{const ln=(U.assignments_calendar_view_type||"week")==="5day"?5:U.assignments_week_days||7,rn=Jt-G;if(!Number.isFinite(rn)||rn<=0)return;const Gt=Math.max(1,Math.floor(rn/ln));ve(Qt=>Qt===Gt?Qt:Gt)};if(Ke(We.clientWidth),typeof ResizeObserver>"u")return;const ft=new ResizeObserver(Jt=>{var ln,rn;const nn=((rn=(ln=Jt[0])==null?void 0:ln.contentRect)==null?void 0:rn.width)??We.clientWidth;Ke(nn)});return ft.observe(We),()=>ft.disconnect()},[U.assignments_view,U.assignments_calendar_view_type,U.assignments_week_days,G]);const _e=IBe(),Ue=OBe(),Je=PBe(),qe=s(["cached_planned_assignments"],"local"),xe=y.useRef(((Yr=qe.options)==null?void 0:Yr.cached_planned_assignments)||{}),[Ae,Fe]=y.useState(0),Qe=y.useRef(null),vt=xe.current;y.useEffect(()=>{var Ke;const We=((Ke=qe.options)==null?void 0:Ke.cached_planned_assignments)||{};JSON.stringify(We)!==JSON.stringify(xe.current)&&(xe.current=We,Fe(ft=>ft+1))},[(Fu=qe.options)==null?void 0:Fu.cached_planned_assignments]),console.log("useCachedData planned",vt);const[at,Tt]=y.useState([]),[wt,cn]=y.useState([]),$t=y.useRef(!1),[hn,Kn]=y.useState(0),[jn,Hn]=y.useState(()=>((U.assignments_calendar_view_type||"week")==="5day"?5:U.assignments_week_days||7)*3),[za,$a]=y.useState(!1);y.useEffect(()=>{const Ke=(U.assignments_calendar_view_type||"week")==="5day"?5:U.assignments_week_days||7;Hn(Ke*3)},[U.assignments_calendar_view_type,U.assignments_week_days]),y.useEffect(()=>{(async()=>{try{const Ke=await x();H(Ke)}catch(Ke){console.error("Failed to fetch weekly usage:",Ke)}finally{I(!1)}})()},[b]);const Dn=(We=1)=>{b!=="pro"&&O&&H(Ke=>Ke?{...Ke,current_usage:Ke.current_usage+We,remaining:Math.max(0,Ke.remaining-We)}:null)},mr=(We=1)=>{b!=="pro"&&O&&H(Ke=>Ke?{...Ke,current_usage:Math.max(0,Ke.current_usage-We),remaining:Math.min(Ke.max_limit,Ke.remaining+We)}:null)},Et=async We=>{w(We),ue({assignments_view:We})},fn=async(We,Ke)=>{var Jt;const ft=await a({type:"CALL_EXTENSION_FUNC",payload:{func:"updateCoverage",args:{start:We.toISOString(),end:Ke.toISOString()}}});console.log("updateCoverage response in iframe",ft),cn(((Jt=ft==null?void 0:ft.data)==null?void 0:Jt.todo)||[])},mn=async()=>{$t.current===!1&&($t.current=!0,await fn(new Date,ir(new Date,7)),w("due"),T(E))};y.useEffect(()=>{mn()},[]),y.useEffect(()=>{(async()=>{await fn(E,ir(E,7))})()},[E]),y.useEffect(()=>{(async()=>{await fn(fe,ir(fe,U.assignments_unassigned_period))})()},[fe,U.assignments_unassigned_period]);const Sn=We=>Y.status.includes(We),vr=We=>Y.course.includes(We),er=We=>Y.duration.reduce((Ke,ft)=>ft==="short"?Ke||We<=30:ft==="medium"?Ke||We>30&&We<=60:ft==="long"?Ke||We>60&&We<=120:ft==="extended"?Ke||We>120:Ke,!1),qt=We=>{const Ke=new Date(We),ft=new Date;return Y.due.reduce((Jt,nn)=>nn.label==="overdue"?Jt||pS(Ke,ft):nn.label==="today"?Jt||xd(Ke,ft):nn.label==="tomorrow"?Jt||xd(Ke,ir(ft,1)):Jt,!1)},Vn=(We,Ke)=>Y.type.some(ft=>{if(ft.includes(":")){const[Jt,nn]=ft.split(":"),ln=We==null?void 0:We.toLowerCase().replace(/\s+/g,"_");return Jt===(Ke==null?void 0:Ke.toString())&&nn===ln}return ft===We}),xn=We=>{var Ke;return Y.linked.includes(((Ke=We==null?void 0:We.current)==null?void 0:Ke.numLinks)>0?"haslinked":"nolinked")},Xn=We=>We.filter(Ke=>Object.keys(Y).every(ft=>{var Jt,nn,ln,rn,Gt,Qt,Rn,bs;if(Y[ft].length===0)return!0;if(ft==="status")return Sn((Jt=Ke==null?void 0:Ke.current)==null?void 0:Jt.status);if(ft==="course")return vr((ln=(nn=Ke==null?void 0:Ke.current)==null?void 0:nn.course)==null?void 0:ln.toString());if(ft==="duration")return er((rn=Ke==null?void 0:Ke.current)==null?void 0:rn.duration);if(ft==="due")return qt((Gt=Ke==null?void 0:Ke.current)==null?void 0:Gt.due);if(ft==="type")return Vn((Qt=Ke==null?void 0:Ke.current)==null?void 0:Qt.type,(Rn=Ke==null?void 0:Ke.current)==null?void 0:Rn.course);if(ft==="linked")return xn((bs=Ke==null?void 0:Ke.current)==null?void 0:bs.numLinks)})),ta=async(We,Ke)=>{var rn,Gt;const ft=i(),Jt=We==null?void 0:We.toString(),ln={...((rn=ft.overrides)==null?void 0:rn[Jt])||((Gt=ft.overrides)==null?void 0:Gt[We])||{},...Ke};r({overrides:{...ft.overrides,[Jt]:ln}});try{const Qt=await m([{id:We,...Ke}]);Qt!=null&&Qt.usage&&H(Qt.usage),await f([{id:We,...Ke}],"update")}catch(Qt){console.error("error in modifyOverrides",Qt),Qt.message==="gated"&&l("assignments_upsert");return}},us=async We=>{var Qt;if(console.log("modifyPlanned called with updates",We),!(We!=null&&We.id))return;const Ke=((Qt=We==null?void 0:We.id)==null?void 0:Qt.toString())||"",ft={...xe.current[Ke]||{}};console.log("reversionData",ft);const Jt=(ft==null?void 0:ft.plannedAt)!=null,nn=(We==null?void 0:We.plannedAt)!=null;xe.current[Ke]||(xe.current[Ke]={}),Object.assign(xe.current[Ke],We),Fe(Rn=>Rn+1),!Jt&&nn?Dn(1):Jt&&!nn&&mr(1);try{const Rn=await m([We]);Rn!=null&&Rn.usage&&H(Rn.usage),await f([We],"update")}catch(Rn){console.log("error in modifyPlanned",Rn),Object.keys(ft).length>0?Object.assign(xe.current[Ke],ft):delete xe.current[Ke],Fe(bs=>bs+1),!Jt&&nn?mr(1):Jt&&!nn&&Dn(1),Rn.message.includes("gated")&&l("assignments_upsert");return}const{cached_planned_assignments:ln}=i("local"),rn=(ln==null?void 0:ln[Ke])||{},Gt=`planned_${Ke}`;return rn!=null&&rn.plannedAt?await C(Gt,"insert",{title:rn.title||"Untitled",startDateTime:rn.plannedAt,duration:rn.duration||30,description:`Course: ${rn.course||"Unknown"}
Planned work time`,type:"planned"}):await C(Gt,"delete",{title:"",startDateTime:""}),!0},cr=We=>{B(Ke=>({...Ke,...We}))};function vi(We,Ke,ft,Jt,nn,ln){if(!Jt){const xt=i("local")||{};Jt=xe.current||xt.cached_planned_assignments||{}}const rn=Jt||{},Gt=We;if(!(Gt!=null&&Gt.plannedAt)&&!ft)return null;const Qt=new Date(ft||Gt.plannedAt),Rn=Ke||(Gt==null?void 0:Gt.duration)||Qa.duration,bs=new Date(Qt.getFullYear(),Qt.getMonth(),Qt.getDate(),0,0,0),Er=Qt.getHours()*60+Qt.getMinutes(),Ls=Er+Rn,zs=Object.keys(rn).reduce((xt,un)=>{var _r;const bn=rn[un];if(!bn.plannedAt||un.toString()===((_r=Gt==null?void 0:Gt.id)==null?void 0:_r.toString()))return xt;const rr=new Date(bn.plannedAt);if(xd(rr,bs)){const Zo=rr.getHours()*60+rr.getMinutes();xt.push({start:Zo,end:Zo+parseInt((bn==null?void 0:bn.duration)||"30"),type:"planned"})}return xt},[]);if(nn){const xt=Qt.getDay();(nn[xt]||[]).forEach(bn=>{zs.push({start:bn.start,end:bn.end,type:"class",course:bn.course})})}ln&&Array.isArray(ln)&&ln.forEach(xt=>{var rr,_r,Zo,ws;const un=new Date(xt.startDate||((rr=xt.start)==null?void 0:rr.dateTime)||((_r=xt.start)==null?void 0:_r.date)),bn=new Date(xt.endDate||((Zo=xt.end)==null?void 0:Zo.dateTime)||((ws=xt.end)==null?void 0:ws.date));if(xd(un,bs)){const jc=un.getHours()*60+un.getMinutes(),Bu=bn.getHours()*60+bn.getMinutes();!xt.isAllDay&&jc<Bu&&zs.push({start:jc,end:Bu,type:"external",source:xt.source||"calendar"})}}),zs.sort((xt,un)=>xt.start-un.start);const $s=[];for(const xt of zs){const un=$s[$s.length-1];!un||xt.start>un.end?$s.push({...xt}):un.end=Math.max(un.end,xt.end)}const Qo=Ls-Er;let xi=1/0,$r=null;for(let xt=0;xt<=$s.length;xt++){const un=xt===0?0:$s[xt-1].end,bn=xt===$s.length?1440:$s[xt].start;if(un<=Er&&Ls<=bn){xi=0,$r=Er;break}if(un+Qo<=bn){const rr=un,_r=Math.abs(rr-Er);_r<xi&&(xi=_r,$r=rr)}if(un<=bn-Qo){const rr=bn-Qo,_r=Math.abs(rr-Er);_r<xi&&(xi=_r,$r=rr)}}return $r===null?null:(Qt.setHours(Math.floor($r/60),$r%60,0,0),{plannedAt:Qt.toISOString(),duration:Rn})}const yi=We=>{if(We.length>0){const ft={...i().planned};for(let Jt of We)delete ft[Jt];r({cached_planned_assignments:ft},"local")}},Pu=async We=>{var nn;const Ke=Object.keys(We);if(Ke.length===0)return;const ft=[],Jt={};for(const ln of Ke){const rn=ln.toString(),Gt=(nn=xe.current)==null?void 0:nn[rn];if(!(Gt!=null&&Gt.plannedAt))continue;const Qt=We[rn],Rn=new Date(Qt).getTime(),bs=new Date(Gt.plannedAt).getTime();if(Qt&&bs!==Rn)continue;const Er=Number(rn);Jt[rn]={id:Number.isFinite(Er)?Er:Gt.id,...Gt},ft.push(rn)}if(ft.length!==0){for(const ln of ft)delete xe.current[ln];Fe(ln=>ln+1);try{const ln=ft.map(Gt=>({id:Number(Gt)}));if(await f(ln,"delete"),await g(ft,{showError:!1})===null)throw new Error("Failed to delete assignments from backend")}catch{for(const[rn,Gt]of Object.entries(Jt))xe.current[rn]=Gt;Fe(rn=>rn+1),await f(Object.values(Jt),"update"),o("Failed to undo auto-planned assignments. Changes have been reverted.","error")}}},Yo=async We=>{try{delete xe.current[We.id],Fe(Jt=>Jt+1),await f([{id:We.id}],"delete");const Ke=await g([We.id],{showError:!1});Ke!=null&&Ke.usage&&H(Ke.usage);const ft=`planned_${We.id}`;await C(ft,"delete",{title:"",startDateTime:""})}catch(Ke){console.error("Error removing assignment from calendar:",Ke)}};async function Xo(We){if(!We||We.length===0)return{};Qe.current&&await Qe.current;const Ke=(async()=>{var Qo,xi,$r;const Jt={...((Qo=i("local"))==null?void 0:Qo.cached_planned_assignments)||{},...xe.current||{}},nn=(xi=U==null?void 0:U.assignments_auto_plan)==null?void 0:xi.days,ln=($r=U==null?void 0:U.assignments_auto_plan)==null?void 0:$r.time,rn=typeof nn=="number"&&Number.isFinite(nn)?nn:0,Gt={},Qt={morning:10,afternoon:14,evening:18,night:22},bs=(xt=>{if(typeof xt=="number"&&Number.isFinite(xt))return Math.max(0,Math.min(23,Math.round(xt)));if(typeof xt=="string"){const un=xt.trim().toLowerCase(),bn=Qt[un];if(typeof bn=="number")return bn;const rr=Number.parseInt(un,10);if(Number.isFinite(rr))return Math.max(0,Math.min(23,rr))}return Qt.morning})(ln),Er={...Jt};let Ls=0;const zs={},$s=new Date;for(const xt of We){const un=Math.max(0,_8(xt.current.due,$s)-rn),bn=new Date($s.getFullYear(),$s.getMonth(),$s.getDate()+un,bs),rr=await vi(xt.current,null,bn,Er,u,d);if(!rr){o("Couldn't find space to fit this task for this day","error");continue}Er[xt.current.id]={course:xt.current.course,title:xt.current.title,...rr},Ls++,zs[xt.current.id]={id:xt.current.id,course:xt.current.course,title:xt.current.title,...rr},Gt[String(xt.current.id)]=rr.plannedAt}if(Object.keys(zs).length>0){console.log("new planned here",Object.values(zs),Object.values(zs).map(xt=>sae(xt)));for(const[xt,un]of Object.entries(zs))xe.current[xt]||(xe.current[xt]={}),Object.assign(xe.current[xt],un);Fe(xt=>xt+1);try{const xt=await m(Object.values(zs));await f(Object.values(zs),"update"),b!=="pro"&&(xt!=null&&xt.usage)&&H(xt.usage);const un={};for(const rr of We){const _r=Er[rr.current.id];if(_r!=null&&_r.plannedAt){const ws=new Date(_r.plannedAt).toLocaleDateString("en-US",{weekday:"long"});un[ws]=(un[ws]||0)+1}}const bn=Object.entries(un).map(([rr,_r])=>`${_r} on ${rr}`);bn.length>0&&o(`Scheduled: ${bn.join(", ")}`,"success")}catch(xt){const un=i("local").cached_planned_assignments||{};return xe.current=un,Fe(bn=>bn+1),xt.message==="gated"?l("assignments_upsert"):o("Failed to schedule assignments. Changes have been reverted.","error"),{}}}return Ls===0?{}:(Ls>0&&(console.log("[PlannerContext] Triggering calendar sync for",Ls,"auto-scheduled items"),setTimeout(async()=>{try{for(const xt of We){const un={...xt.current,...Er[xt.current.id]},bn=`planned_${xt.current.id}`;await C(bn,"insert",{title:un.title||"Untitled",startDateTime:un.plannedAt,duration:un.duration||30,description:`Course: ${un.course||"Unknown"}
Planned work time`,type:"planned"})}}catch(xt){console.error("[PlannerContext] Error triggering calendar sync for auto-scheduled items:",xt)}},200)),Gt)})();Qe.current=Ke;try{return await Ke}finally{Qe.current=null}}const es=()=>{const We={plannedAt:null,duration:30,status:"incomplete",points:null,is_custom:!1,url:null,priority:null},Ke=wt.concat(_e).map(nn=>{var Qt,Rn;const ln=(Ue==null?void 0:Ue[nn.id])||{},rn=(vt==null?void 0:vt[nn.id])||{},Gt={...We,...nn};return{original:Gt,current:{...Gt,...rn,...ln,numLinks:((Rn=(Qt=Je==null?void 0:Je[aae.ASSIGNMENT])==null?void 0:Qt[nn.id])==null?void 0:Rn.length)||0}}}),ft=Array.from(Ke.reduce((nn,ln)=>{var Qt,Rn;const rn=((Qt=ln==null?void 0:ln.current)==null?void 0:Qt.id)??((Rn=ln==null?void 0:ln.original)==null?void 0:Rn.id);if(rn==null)return nn;const Gt=String(rn);return nn.has(Gt)||nn.set(Gt,ln),nn},new Map).values()),Jt=Object.keys(Y).some(nn=>Y[nn].length>0)?Xn(ft):ft;Tt(Jt)};y.useEffect(()=>{es()},[_e,Y,Ue,wt,Ae,Je,hn]);const Jo={startDate:E,setStartDate:T,dueItems:at,setDueItems:Tt,scrollPos:ae,scrollArea:ce,calendarActions:pe,view:S,setView:Et,miniCalStart:j,setMiniCalStart:D,modifyOverrides:ta,filters:Y,updateFilters:cr,miniCalDate:_,setMiniCalDate:A,settings:U,updateSettings:ue,scrollToHour:$e,setScrollToHour:Le,numCols:jn,setNumCols:Hn,findClosestAvailableTime:(We,Ke,ft,Jt)=>vi(We,Ke,ft,Jt,u,d),blockHeight:Z,blockWidth:Ne,timeWidth:G,blockMargin:K,subBlocks:te,subBlockMinutes:ie,subBlockHeight:de,getRowFromDelta:Me,dueBlockWidth:le,setWeekDays:He,setZoom:nt,unassignedStart:fe,setUnassignedStart:se,autoScheduleTasks:Xo,overrides:Ue,cursorType:z,setCursorType:F,loading:za,modifyPlanned:us,planned:vt,portal:e,creatorAssignment:R,setCreatorAssignment:L,removeFromCalendar:Yo,removeLastAutomPlanFromCalendar:yi,undoAutoPlannedAssignments:Pu,updateCoverage:fn,weeklyUsage:O,usageLoading:P};return c.jsx(oae.Provider,{value:Jo,children:t})},lE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bv(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function AM(t){return"nodeType"in t}function Bi(t){var e,n;return t?Bv(t)?t:AM(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function NM(t){const{Document:e}=Bi(t);return t instanceof e}function pw(t){return Bv(t)?!1:t instanceof Bi(t).HTMLElement}function lae(t){return t instanceof Bi(t).SVGElement}function Lv(t){return t?Bv(t)?t.document:AM(t)?NM(t)?t:pw(t)||lae(t)?t.ownerDocument:document:document:document}const zd=lE?y.useLayoutEffect:y.useEffect;function cE(t){const e=y.useRef(t);return zd(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function LBe(){const t=y.useRef(null),e=y.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Q1(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return zd(()=>{n.current!==t&&(n.current=t)},e),n}function gw(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function G4(t){const e=cE(t),n=y.useRef(null),r=y.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function W4(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let ZA={};function uE(t,e){return y.useMemo(()=>{if(e)return e;const n=ZA[t]==null?0:ZA[t]+1;return ZA[t]=n,t+"-"+n},[t,e])}function cae(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,i)=>{const o=Object.entries(i);for(const[l,u]of o){const d=a[l];d!=null&&(a[l]=d+t*u)}return a},{...e})}}const Cg=cae(1),K4=cae(-1);function zBe(t){return"clientX"in t&&"clientY"in t}function jM(t){if(!t)return!1;const{KeyboardEvent:e}=Bi(t.target);return e&&t instanceof e}function $Be(t){if(!t)return!1;const{TouchEvent:e}=Bi(t.target);return e&&t instanceof e}function Y4(t){if($Be(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return zBe(t)?{x:t.clientX,y:t.clientY}:null}const Z1=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Z1.Translate.toString(t),Z1.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),KV="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function UBe(t){return t.matches(KV)?t:t.querySelector(KV)}const HBe={display:"none"};function VBe(t){let{id:e,value:n}=t;return Ce.createElement("div",{id:e,style:HBe},n)}function qBe(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function GBe(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const uae=y.createContext(null);function WBe(t){const e=y.useContext(uae);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function KBe(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:s,event:a}=r;t.forEach(i=>{var o;return(o=i[s])==null?void 0:o.call(i,a)})},[t]),e]}const YBe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},XBe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function JBe(t){let{announcements:e=XBe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=YBe}=t;const{announce:a,announcement:i}=GBe(),o=uE("DndLiveRegion"),[l,u]=y.useState(!1);if(y.useEffect(()=>{u(!0)},[]),WBe(y.useMemo(()=>({onDragStart(f){let{active:m}=f;a(e.onDragStart({active:m}))},onDragMove(f){let{active:m,over:g}=f;e.onDragMove&&a(e.onDragMove({active:m,over:g}))},onDragOver(f){let{active:m,over:g}=f;a(e.onDragOver({active:m,over:g}))},onDragEnd(f){let{active:m,over:g}=f;a(e.onDragEnd({active:m,over:g}))},onDragCancel(f){let{active:m,over:g}=f;a(e.onDragCancel({active:m,over:g}))}}),[a,e])),!l)return null;const d=Ce.createElement(Ce.Fragment,null,Ce.createElement(VBe,{id:r,value:s.draggable}),Ce.createElement(qBe,{id:o,announcement:i}));return n?tu.createPortal(d,n):d}var ca;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ca||(ca={}));function X4(){}function YV(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function QBe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const xc=Object.freeze({x:0,y:0});function ZBe(t,e){const n=Y4(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function eLe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function tLe(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function nLe(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),i=s-r,o=a-n;if(r<s&&n<a){const l=e.width*e.height,u=t.width*t.height,d=i*o,f=d/(l+u-d);return Number(f.toFixed(4))}return 0}const dae=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const a of r){const{id:i}=a,o=n.get(i);if(o){const l=nLe(o,e);l>0&&s.push({id:i,data:{droppableContainer:a,value:l}})}}return s.sort(eLe)};function rLe(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function hae(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:xc}function sLe(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,o)=>({...i,top:i.top+t*o.y,bottom:i.bottom+t*o.y,left:i.left+t*o.x,right:i.right+t*o.x}),{...n})}}const aLe=sLe(1);function fae(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function iLe(t,e,n){const r=fae(e);if(!r)return t;const{scaleX:s,scaleY:a,x:i,y:o}=r,l=t.left-i-(1-s)*parseFloat(n),u=t.top-o-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?t.width/s:t.width,f=a?t.height/a:t.height;return{width:d,height:f,top:u,right:l+d,bottom:u+f,left:l}}const oLe={ignoreTransform:!1};function vw(t,e){e===void 0&&(e=oLe);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=Bi(t).getComputedStyle(t);u&&(n=iLe(n,u,d))}const{top:r,left:s,width:a,height:i,bottom:o,right:l}=n;return{top:r,left:s,width:a,height:i,bottom:o,right:l}}function XV(t){return vw(t,{ignoreTransform:!0})}function lLe(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function cLe(t,e){return e===void 0&&(e=Bi(t).getComputedStyle(t)),e.position==="fixed"}function uLe(t,e){e===void 0&&(e=Bi(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=e[s];return typeof a=="string"?n.test(a):!1})}function DM(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(NM(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!pw(s)||lae(s)||n.includes(s))return n;const a=Bi(t).getComputedStyle(s);return s!==t&&uLe(s,a)&&n.push(s),cLe(s,a)?n:r(s.parentNode)}return t?r(t):n}function mae(t){const[e]=DM(t,1);return e??null}function e6(t){return!lE||!t?null:Bv(t)?t:AM(t)?NM(t)||t===Lv(t).scrollingElement?window:pw(t)?t:null:null}function pae(t){return Bv(t)?t.scrollX:t.scrollLeft}function gae(t){return Bv(t)?t.scrollY:t.scrollTop}function BD(t){return{x:pae(t),y:gae(t)}}var Da;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Da||(Da={}));function vae(t){return!lE||!t?!1:t===document.scrollingElement}function yae(t){const e={x:0,y:0},n=vae(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,i=t.scrollTop>=r.y,o=t.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:i,isRight:o,maxScroll:r,minScroll:e}}const dLe={x:.2,y:.2};function hLe(t,e,n,r,s){let{top:a,left:i,right:o,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=dLe);const{isTop:u,isBottom:d,isLeft:f,isRight:m}=yae(t),g={x:0,y:0},x={x:0,y:0},b={height:e.height*s.y,width:e.width*s.x};return!u&&a<=e.top+b.height?(g.y=Da.Backward,x.y=r*Math.abs((e.top+b.height-a)/b.height)):!d&&l>=e.bottom-b.height&&(g.y=Da.Forward,x.y=r*Math.abs((e.bottom-b.height-l)/b.height)),!m&&o>=e.right-b.width?(g.x=Da.Forward,x.x=r*Math.abs((e.right-b.width-o)/b.width)):!f&&i<=e.left+b.width&&(g.x=Da.Backward,x.x=r*Math.abs((e.left+b.width-i)/b.width)),{direction:g,speed:x}}function fLe(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function xae(t){return t.reduce((e,n)=>Cg(e,BD(n)),xc)}function mLe(t){return t.reduce((e,n)=>e+pae(n),0)}function pLe(t){return t.reduce((e,n)=>e+gae(n),0)}function bae(t,e){if(e===void 0&&(e=vw),!t)return;const{top:n,left:r,bottom:s,right:a}=e(t);mae(t)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const gLe=[["x",["left","right"],mLe],["y",["top","bottom"],pLe]];class RM{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=DM(n),s=xae(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,i,o]of gLe)for(const l of i)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=s[a]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qx{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function vLe(t){const{EventTarget:e}=Bi(t);return t instanceof e?t:Lv(t)}function t6(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var pl;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(pl||(pl={}));function JV(t){t.preventDefault()}function yLe(t){t.stopPropagation()}var Mr;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Mr||(Mr={}));const wae={start:[Mr.Space,Mr.Enter],cancel:[Mr.Esc],end:[Mr.Space,Mr.Enter,Mr.Tab]},xLe=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Mr.Right:return{...n,x:n.x+25};case Mr.Left:return{...n,x:n.x-25};case Mr.Down:return{...n,y:n.y+25};case Mr.Up:return{...n,y:n.y-25}}};class Cae{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new qx(Lv(n)),this.windowListeners=new qx(Bi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(pl.Resize,this.handleCancel),this.windowListeners.add(pl.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(pl.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&bae(r),n(xc)}handleKeyDown(e){if(jM(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=wae,coordinateGetter:i=xLe,scrollBehavior:o="smooth"}=s,{code:l}=e;if(a.end.includes(l)){this.handleEnd(e);return}if(a.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:xc;this.referenceCoordinates||(this.referenceCoordinates=d);const f=i(e,{active:n,context:r.current,currentCoordinates:d});if(f){const m=K4(f,d),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const b of x){const C=e.code,{isTop:S,isRight:w,isLeft:E,isBottom:T,maxScroll:_,minScroll:A}=yae(b),j=fLe(b),D={x:Math.min(C===Mr.Right?j.right-j.width/2:j.right,Math.max(C===Mr.Right?j.left:j.left+j.width/2,f.x)),y:Math.min(C===Mr.Down?j.bottom-j.height/2:j.bottom,Math.max(C===Mr.Down?j.top:j.top+j.height/2,f.y))},z=C===Mr.Right&&!w||C===Mr.Left&&!E,F=C===Mr.Down&&!T||C===Mr.Up&&!S;if(z&&D.x!==f.x){const R=b.scrollLeft+m.x,L=C===Mr.Right&&R<=_.x||C===Mr.Left&&R>=A.x;if(L&&!m.y){b.scrollTo({left:R,behavior:o});return}L?g.x=b.scrollLeft-R:g.x=C===Mr.Right?b.scrollLeft-_.x:b.scrollLeft-A.x,g.x&&b.scrollBy({left:-g.x,behavior:o});break}else if(F&&D.y!==f.y){const R=b.scrollTop+m.y,L=C===Mr.Down&&R<=_.y||C===Mr.Up&&R>=A.y;if(L&&!m.x){b.scrollTo({top:R,behavior:o});return}L?g.y=b.scrollTop-R:g.y=C===Mr.Down?b.scrollTop-_.y:b.scrollTop-A.y,g.y&&b.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(e,Cg(K4(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Cae.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=wae,onActivation:s}=e,{active:a}=n;const{code:i}=t.nativeEvent;if(r.start.includes(i)){const o=a.activatorNode.current;return o&&t.target!==o?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function QV(t){return!!(t&&"distance"in t)}function ZV(t){return!!(t&&"delay"in t)}class MM{constructor(e,n,r){var s;r===void 0&&(r=vLe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:i}=a;this.props=e,this.events=n,this.document=Lv(i),this.documentListeners=new qx(this.document),this.listeners=new qx(r),this.windowListeners=new qx(Bi(i)),this.initialCoordinates=(s=Y4(a))!=null?s:xc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(pl.Resize,this.handleCancel),this.windowListeners.add(pl.DragStart,JV),this.windowListeners.add(pl.VisibilityChange,this.handleCancel),this.windowListeners.add(pl.ContextMenu,JV),this.documentListeners.add(pl.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ZV(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(QV(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(pl.Click,yLe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(pl.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:i,options:{activationConstraint:o}}=a;if(!s)return;const l=(n=Y4(e))!=null?n:xc,u=K4(s,l);if(!r&&o){if(QV(o)){if(o.tolerance!=null&&t6(u,o.tolerance))return this.handleCancel();if(t6(u,o.distance))return this.handleStart()}if(ZV(o)&&t6(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Mr.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const bLe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Sae extends MM{constructor(e){const{event:n}=e,r=Lv(n.target);super(e,bLe,r)}}Sae.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const wLe={move:{name:"mousemove"},end:{name:"mouseup"}};var LD;(function(t){t[t.RightClick=2]="RightClick"})(LD||(LD={}));class kae extends MM{constructor(e){super(e,wLe,Lv(e.event.target))}}kae.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===LD.RightClick?!1:(r==null||r({event:n}),!0)}}];const n6={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Eae extends MM{constructor(e){super(e,n6)}static setup(){return window.addEventListener(n6.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(n6.move.name,e)};function e(){}}}Eae.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Gx;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Gx||(Gx={}));var J4;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(J4||(J4={}));function CLe(t){let{acceleration:e,activator:n=Gx.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:i=5,order:o=J4.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:m}=t;const g=kLe({delta:f,disabled:!a}),[x,b]=LBe(),C=y.useRef({x:0,y:0}),S=y.useRef({x:0,y:0}),w=y.useMemo(()=>{switch(n){case Gx.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Gx.DraggableRect:return s}},[n,s,l]),E=y.useRef(null),T=y.useCallback(()=>{const A=E.current;if(!A)return;const j=C.current.x*S.current.x,D=C.current.y*S.current.y;A.scrollBy(j,D)},[]),_=y.useMemo(()=>o===J4.TreeOrder?[...u].reverse():u,[o,u]);y.useEffect(()=>{if(!a||!u.length||!w){b();return}for(const A of _){if((r==null?void 0:r(A))===!1)continue;const j=u.indexOf(A),D=d[j];if(!D)continue;const{direction:z,speed:F}=hLe(A,D,w,e,m);for(const R of["x","y"])g[R][z[R]]||(F[R]=0,z[R]=0);if(F.x>0||F.y>0){b(),E.current=A,x(T,i),C.current=F,S.current=z;return}}C.current={x:0,y:0},S.current={x:0,y:0},b()},[e,T,r,b,a,i,JSON.stringify(w),JSON.stringify(g),x,u,_,d,JSON.stringify(m)])}const SLe={x:{[Da.Backward]:!1,[Da.Forward]:!1},y:{[Da.Backward]:!1,[Da.Forward]:!1}};function kLe(t){let{delta:e,disabled:n}=t;const r=W4(e);return gw(s=>{if(n||!r||!s)return SLe;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Da.Backward]:s.x[Da.Backward]||a.x===-1,[Da.Forward]:s.x[Da.Forward]||a.x===1},y:{[Da.Backward]:s.y[Da.Backward]||a.y===-1,[Da.Forward]:s.y[Da.Forward]||a.y===1}}},[n,e,r])}function ELe(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return gw(s=>{var a;return e==null?null:(a=r??s)!=null?a:null},[r,e])}function _Le(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(i=>({eventName:i.eventName,handler:e(i.handler,r)}));return[...n,...a]},[]),[t,e])}var eb;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(eb||(eb={}));var zD;(function(t){t.Optimized="optimized"})(zD||(zD={}));const eq=new Map;function TLe(t,e){let{dragging:n,dependencies:r,config:s}=e;const[a,i]=y.useState(null),{frequency:o,measure:l,strategy:u}=s,d=y.useRef(t),f=C(),m=Q1(f),g=y.useCallback(function(S){S===void 0&&(S=[]),!m.current&&i(w=>w===null?S:w.concat(S.filter(E=>!w.includes(E))))},[m]),x=y.useRef(null),b=gw(S=>{if(f&&!n)return eq;if(!S||S===eq||d.current!==t||a!=null){const w=new Map;for(let E of t){if(!E)continue;if(a&&a.length>0&&!a.includes(E.id)&&E.rect.current){w.set(E.id,E.rect.current);continue}const T=E.node.current,_=T?new RM(l(T),T):null;E.rect.current=_,_&&w.set(E.id,_)}return w}return S},[t,a,n,f,l]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{f||g()},[n,f]),y.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),y.useEffect(()=>{f||typeof o!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},o))},[o,f,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:a!=null};function C(){switch(u){case eb.Always:return!1;case eb.BeforeDragging:return n;default:return!n}}}function IM(t,e){return gw(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function ALe(t,e){return IM(t,e)}function NLe(t){let{callback:e,disabled:n}=t;const r=cE(e),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function dE(t){let{callback:e,disabled:n}=t;const r=cE(e),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function jLe(t){return new RM(vw(t),t)}function tq(t,e,n){e===void 0&&(e=jLe);const[r,s]=y.useState(null);function a(){s(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=NLe({callback(l){if(t)for(const u of l){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){a();break}}}}),o=dE({callback:a});return zd(()=>{a(),t?(o==null||o.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),i==null||i.disconnect())},[t]),r}function DLe(t){const e=IM(t);return hae(t,e)}const nq=[];function RLe(t){const e=y.useRef(t),n=gw(r=>t?r&&r!==nq&&t&&e.current&&t.parentNode===e.current.parentNode?r:DM(t):nq,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function MLe(t){const[e,n]=y.useState(null),r=y.useRef(t),s=y.useCallback(a=>{const i=e6(a.target);i&&n(o=>o?(o.set(i,BD(i)),new Map(o)):null)},[]);return y.useEffect(()=>{const a=r.current;if(t!==a){i(a);const o=t.map(l=>{const u=e6(l);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,BD(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=t}return()=>{i(t),i(a)};function i(o){o.forEach(l=>{const u=e6(l);u==null||u.removeEventListener("scroll",s)})}},[s,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,i)=>Cg(a,i),xc):xae(t):xc,[t,e])}function rq(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==xc;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?K4(t,n.current):xc}function ILe(t){y.useEffect(()=>{if(!lE)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function OLe(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=i=>{a(i,e)},n},{}),[t,e])}function _ae(t){return y.useMemo(()=>t?lLe(t):null,[t])}const sq=[];function PLe(t,e){e===void 0&&(e=vw);const[n]=t,r=_ae(n?Bi(n):null),[s,a]=y.useState(sq);function i(){a(()=>t.length?t.map(l=>vae(l)?r:new RM(e(l),l)):sq)}const o=dE({callback:i});return zd(()=>{o==null||o.disconnect(),i(),t.forEach(l=>o==null?void 0:o.observe(l))},[t]),s}function Tae(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return pw(e)?e:t}function FLe(t){let{measure:e}=t;const[n,r]=y.useState(null),s=y.useCallback(u=>{for(const{target:d}of u)if(pw(d)){r(f=>{const m=e(d);return f?{...f,width:m.width,height:m.height}:m});break}},[e]),a=dE({callback:s}),i=y.useCallback(u=>{const d=Tae(u);a==null||a.disconnect(),d&&(a==null||a.observe(d)),r(d?e(d):null)},[e,a]),[o,l]=G4(i);return y.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const BLe=[{sensor:Sae,options:{}},{sensor:Cae,options:{}}],LLe={current:{}},RS={draggable:{measure:XV},droppable:{measure:XV,strategy:eb.WhileDragging,frequency:zD.Optimized},dragOverlay:{measure:vw}};class Wx extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const zLe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wx,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:X4},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:RS,measureDroppableContainers:X4,windowRect:null,measuringScheduled:!1},Aae={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:X4,draggableNodes:new Map,over:null,measureDroppableContainers:X4},yw=y.createContext(Aae),Nae=y.createContext(zLe);function $Le(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wx}}}function ULe(t,e){switch(e.type){case ca.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ca.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ca.DragEnd:case ca.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ca.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Wx(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case ca.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const i=new Wx(t.droppable.containers);return i.set(n,{...a,disabled:s}),{...t,droppable:{...t.droppable,containers:i}}}case ca.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const a=new Wx(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function HLe(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=y.useContext(yw),a=W4(r),i=W4(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&a&&i!=null){if(!jM(a)||document.activeElement===a.target)return;const o=s.get(i);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const f=UBe(d);if(f){f.focus();break}}})}},[r,e,s,i,a]),null}function jae(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,a)=>a({transform:s,...r}),n):n}function VLe(t){return y.useMemo(()=>({draggable:{...RS.draggable,...t==null?void 0:t.draggable},droppable:{...RS.droppable,...t==null?void 0:t.droppable},dragOverlay:{...RS.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function qLe(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const a=y.useRef(!1),{x:i,y:o}=typeof s=="boolean"?{x:s,y:s}:s;zd(()=>{if(!i&&!o||!e){a.current=!1;return}if(a.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=hae(d,r);if(i||(f.x=0),o||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=mae(u);m&&m.scrollBy({top:f.y,left:f.x})}},[e,i,o,r,n])}const hE=y.createContext({...xc,scaleX:1,scaleY:1});var Vh;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Vh||(Vh={}));const GLe=y.memo(function(e){var n,r,s,a;let{id:i,accessibility:o,autoScroll:l=!0,children:u,sensors:d=BLe,collisionDetection:f=dae,measuring:m,modifiers:g,...x}=e;const b=y.useReducer(ULe,void 0,$Le),[C,S]=b,[w,E]=KBe(),[T,_]=y.useState(Vh.Uninitialized),A=T===Vh.Initialized,{draggable:{active:j,nodes:D,translate:z},droppable:{containers:F}}=C,R=j!=null?D.get(j):null,L=y.useRef({initial:null,translated:null}),O=y.useMemo(()=>{var Dn;return j!=null?{id:j,data:(Dn=R==null?void 0:R.data)!=null?Dn:LLe,rect:L}:null},[j,R]),H=y.useRef(null),[P,I]=y.useState(null),[U,W]=y.useState(null),Y=Q1(x,Object.values(x)),B=uE("DndDescribedBy",i),Z=y.useMemo(()=>F.getEnabled(),[F]),le=VLe(m),{droppableRects:G,measureDroppableContainers:K,measuringScheduled:te}=TLe(Z,{dragging:A,dependencies:[z.x,z.y],config:le.droppable}),ie=ELe(D,j),de=y.useMemo(()=>U?Y4(U):null,[U]),fe=$a(),se=ALe(ie,le.draggable.measure);qLe({activeNode:j!=null?D.get(j):null,config:fe.layoutShiftCompensation,initialRect:se,measure:le.draggable.measure});const ce=tq(ie,le.draggable.measure,se),ue=tq(ie?ie.parentElement:null),oe=y.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=F.getNodeFor((n=oe.current.over)==null?void 0:n.id),ve=FLe({measure:le.dragOverlay.measure}),He=(r=ve.nodeRef.current)!=null?r:ie,nt=A?(s=ve.rect)!=null?s:ce:null,Me=!!(ve.nodeRef.current&&ve.rect),$e=DLe(Me?null:ce),Le=_ae(He?Bi(He):null),ae=RLe(A?Ne??ie:null),pe=PLe(ae),_e=jae(g,{transform:{x:z.x-$e.x,y:z.y-$e.y,scaleX:1,scaleY:1},activatorEvent:U,active:O,activeNodeRect:ce,containerNodeRect:ue,draggingNodeRect:nt,over:oe.current.over,overlayNodeRect:ve.rect,scrollableAncestors:ae,scrollableAncestorRects:pe,windowRect:Le}),Ue=de?Cg(de,z):null,Je=MLe(ae),qe=rq(Je),xe=rq(Je,[ce]),Ae=Cg(_e,qe),Fe=nt?aLe(nt,_e):null,Qe=O&&Fe?f({active:O,collisionRect:Fe,droppableRects:G,droppableContainers:Z,pointerCoordinates:Ue}):null,vt=tLe(Qe,"id"),[at,Tt]=y.useState(null),wt=Me?_e:Cg(_e,xe),cn=rLe(wt,(a=at==null?void 0:at.rect)!=null?a:null,ce),$t=y.useRef(null),hn=y.useCallback((Dn,mr)=>{let{sensor:Et,options:fn}=mr;if(H.current==null)return;const mn=D.get(H.current);if(!mn)return;const Sn=Dn.nativeEvent,vr=new Et({active:H.current,activeNode:mn,event:Sn,options:fn,context:oe,onAbort(qt){if(!D.get(qt))return;const{onDragAbort:xn}=Y.current,Xn={id:qt};xn==null||xn(Xn),w({type:"onDragAbort",event:Xn})},onPending(qt,Vn,xn,Xn){if(!D.get(qt))return;const{onDragPending:us}=Y.current,cr={id:qt,constraint:Vn,initialCoordinates:xn,offset:Xn};us==null||us(cr),w({type:"onDragPending",event:cr})},onStart(qt){const Vn=H.current;if(Vn==null)return;const xn=D.get(Vn);if(!xn)return;const{onDragStart:Xn}=Y.current,ta={activatorEvent:Sn,active:{id:Vn,data:xn.data,rect:L}};tu.unstable_batchedUpdates(()=>{Xn==null||Xn(ta),_(Vh.Initializing),S({type:ca.DragStart,initialCoordinates:qt,active:Vn}),w({type:"onDragStart",event:ta}),I($t.current),W(Sn)})},onMove(qt){S({type:ca.DragMove,coordinates:qt})},onEnd:er(ca.DragEnd),onCancel:er(ca.DragCancel)});$t.current=vr;function er(qt){return async function(){const{active:xn,collisions:Xn,over:ta,scrollAdjustedTranslate:us}=oe.current;let cr=null;if(xn&&us){const{cancelDrop:vi}=Y.current;cr={activatorEvent:Sn,active:xn,collisions:Xn,delta:us,over:ta},qt===ca.DragEnd&&typeof vi=="function"&&await Promise.resolve(vi(cr))&&(qt=ca.DragCancel)}H.current=null,tu.unstable_batchedUpdates(()=>{S({type:qt}),_(Vh.Uninitialized),Tt(null),I(null),W(null),$t.current=null;const vi=qt===ca.DragEnd?"onDragEnd":"onDragCancel";if(cr){const yi=Y.current[vi];yi==null||yi(cr),w({type:vi,event:cr})}})}}},[D]),Kn=y.useCallback((Dn,mr)=>(Et,fn)=>{const mn=Et.nativeEvent,Sn=D.get(fn);if(H.current!==null||!Sn||mn.dndKit||mn.defaultPrevented)return;const vr={active:Sn};Dn(Et,mr.options,vr)===!0&&(mn.dndKit={capturedBy:mr.sensor},H.current=fn,hn(Et,mr))},[D,hn]),jn=_Le(d,Kn);ILe(d),zd(()=>{ce&&T===Vh.Initializing&&_(Vh.Initialized)},[ce,T]),y.useEffect(()=>{const{onDragMove:Dn}=Y.current,{active:mr,activatorEvent:Et,collisions:fn,over:mn}=oe.current;if(!mr||!Et)return;const Sn={active:mr,activatorEvent:Et,collisions:fn,delta:{x:Ae.x,y:Ae.y},over:mn};tu.unstable_batchedUpdates(()=>{Dn==null||Dn(Sn),w({type:"onDragMove",event:Sn})})},[Ae.x,Ae.y]),y.useEffect(()=>{const{active:Dn,activatorEvent:mr,collisions:Et,droppableContainers:fn,scrollAdjustedTranslate:mn}=oe.current;if(!Dn||H.current==null||!mr||!mn)return;const{onDragOver:Sn}=Y.current,vr=fn.get(vt),er=vr&&vr.rect.current?{id:vr.id,rect:vr.rect.current,data:vr.data,disabled:vr.disabled}:null,qt={active:Dn,activatorEvent:mr,collisions:Et,delta:{x:mn.x,y:mn.y},over:er};tu.unstable_batchedUpdates(()=>{Tt(er),Sn==null||Sn(qt),w({type:"onDragOver",event:qt})})},[vt]),zd(()=>{oe.current={activatorEvent:U,active:O,activeNode:ie,collisionRect:Fe,collisions:Qe,droppableRects:G,draggableNodes:D,draggingNode:He,draggingNodeRect:nt,droppableContainers:F,over:at,scrollableAncestors:ae,scrollAdjustedTranslate:Ae},L.current={initial:nt,translated:Fe}},[O,ie,Qe,Fe,D,He,nt,G,F,at,ae,Ae]),CLe({...fe,delta:z,draggingRect:Fe,pointerCoordinates:Ue,scrollableAncestors:ae,scrollableAncestorRects:pe});const Hn=y.useMemo(()=>({active:O,activeNode:ie,activeNodeRect:ce,activatorEvent:U,collisions:Qe,containerNodeRect:ue,dragOverlay:ve,draggableNodes:D,droppableContainers:F,droppableRects:G,over:at,measureDroppableContainers:K,scrollableAncestors:ae,scrollableAncestorRects:pe,measuringConfiguration:le,measuringScheduled:te,windowRect:Le}),[O,ie,ce,U,Qe,ue,ve,D,F,G,at,K,ae,pe,le,te,Le]),za=y.useMemo(()=>({activatorEvent:U,activators:jn,active:O,activeNodeRect:ce,ariaDescribedById:{draggable:B},dispatch:S,draggableNodes:D,over:at,measureDroppableContainers:K}),[U,jn,O,ce,S,B,D,at,K]);return Ce.createElement(uae.Provider,{value:E},Ce.createElement(yw.Provider,{value:za},Ce.createElement(Nae.Provider,{value:Hn},Ce.createElement(hE.Provider,{value:cn},u)),Ce.createElement(HLe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),Ce.createElement(JBe,{...o,hiddenTextDescribedById:B}));function $a(){const Dn=(P==null?void 0:P.autoScrollEnabled)===!1,mr=typeof l=="object"?l.enabled===!1:l===!1,Et=A&&!Dn&&!mr;return typeof l=="object"?{...l,enabled:Et}:{enabled:Et}}}),WLe=y.createContext(null),aq="button",KLe="Draggable";function Kx(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const a=uE(KLe),{activators:i,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:m}=y.useContext(yw),{role:g=aq,roleDescription:x="draggable",tabIndex:b=0}=s??{},C=(l==null?void 0:l.id)===e,S=y.useContext(C?hE:WLe),[w,E]=G4(),[T,_]=G4(),A=OLe(i,e),j=Q1(n);zd(()=>(f.set(e,{id:e,key:a,node:w,activatorNode:T,data:j}),()=>{const z=f.get(e);z&&z.key===a&&f.delete(e)}),[f,e]);const D=y.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":C&&g===aq?!0:void 0,"aria-roledescription":x,"aria-describedby":d.draggable}),[r,g,b,C,x,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:D,isDragging:C,listeners:r?void 0:A,node:w,over:m,setNodeRef:E,setActivatorNodeRef:_,transform:S}}function YLe(){return y.useContext(Nae)}const XLe="Droppable",JLe={timeout:25};function OM(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const a=uE(XLe),{active:i,dispatch:o,over:l,measureDroppableContainers:u}=y.useContext(yw),d=y.useRef({disabled:n}),f=y.useRef(!1),m=y.useRef(null),g=y.useRef(null),{disabled:x,updateMeasurementsFor:b,timeout:C}={...JLe,...s},S=Q1(b??r),w=y.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(S.current)?S.current:[S.current]),g.current=null},C)},[C]),E=dE({callback:w,disabled:x||!i}),T=y.useCallback((D,z)=>{E&&(z&&(E.unobserve(z),f.current=!1),D&&E.observe(D))},[E]),[_,A]=G4(T),j=Q1(e);return y.useEffect(()=>{!E||!_.current||(E.disconnect(),f.current=!1,E.observe(_.current))},[_,E]),y.useEffect(()=>(o({type:ca.RegisterDroppable,element:{id:r,key:a,disabled:n,node:_,rect:m,data:j}}),()=>o({type:ca.UnregisterDroppable,key:a,id:r})),[r]),y.useEffect(()=>{n!==d.current.disabled&&(o({type:ca.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)},[r,a,n,o]),{active:i,rect:m,isOver:(l==null?void 0:l.id)===r,node:_,over:l,setNodeRef:A}}function QLe(t){let{animation:e,children:n}=t;const[r,s]=y.useState(null),[a,i]=y.useState(null),o=W4(n);return!n&&!r&&o&&s(o),zd(()=>{if(!a)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){s(null);return}Promise.resolve(e(u,a)).then(()=>{s(null)})},[e,r,a]),Ce.createElement(Ce.Fragment,null,n,r?y.cloneElement(r,{ref:i}):null)}const ZLe={x:0,y:0,scaleX:1,scaleY:1};function eze(t){let{children:e}=t;return Ce.createElement(yw.Provider,{value:Aae},Ce.createElement(hE.Provider,{value:ZLe},e))}const tze={position:"fixed",touchAction:"none"},nze=t=>jM(t)?"transform 250ms ease":void 0,rze=y.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:i,rect:o,style:l,transform:u,transition:d=nze}=t;if(!o)return null;const f=s?u:{...u,scaleX:1,scaleY:1},m={...tze,width:o.width,height:o.height,top:o.top,left:o.left,transform:Z1.Transform.toString(f),transformOrigin:s&&r?ZBe(r,o):void 0,transition:typeof d=="function"?d(r):d,...l};return Ce.createElement(n,{className:i,style:m,ref:e},a)}),sze=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:a,className:i}=t;if(a!=null&&a.active)for(const[o,l]of Object.entries(a.active))l!==void 0&&(s[o]=n.node.style.getPropertyValue(o),n.node.style.setProperty(o,l));if(a!=null&&a.dragOverlay)for(const[o,l]of Object.entries(a.dragOverlay))l!==void 0&&r.node.style.setProperty(o,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,u]of Object.entries(s))n.node.style.setProperty(l,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},aze=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Z1.Transform.toString(e)},{transform:Z1.Transform.toString(n)}]},Dae={duration:250,easing:"ease",keyframes:aze,sideEffects:sze({styles:{active:{opacity:"0"}}})};function ize(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return cE((a,i)=>{if(e===null)return;const o=n.get(a);if(!o)return;const l=o.node.current;if(!l)return;const u=Tae(i);if(!u)return;const{transform:d}=Bi(i).getComputedStyle(i),f=fae(d);if(!f)return;const m=typeof e=="function"?e:oze(e);return bae(l,s.draggable.measure),m({active:{id:a,data:o.data,node:l,rect:s.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function oze(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...Dae,...t};return a=>{let{active:i,dragOverlay:o,transform:l,...u}=a;if(!e)return;const d={x:o.rect.left-i.rect.left,y:o.rect.top-i.rect.top},f={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/o.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/o.rect.height:1},m={x:l.x-d.x,y:l.y-d.y,...f},g=s({...u,active:i,dragOverlay:o,transform:{initial:l,final:m}}),[x]=g,b=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(b))return;const C=r==null?void 0:r({active:i,dragOverlay:o,...u}),S=o.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{S.onfinish=()=>{C==null||C(),w()}})}}let iq=0;function lze(t){return y.useMemo(()=>{if(t!=null)return iq++,iq},[t])}const cze=Ce.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:i,wrapperElement:o="div",className:l,zIndex:u=999}=t;const{activatorEvent:d,active:f,activeNodeRect:m,containerNodeRect:g,draggableNodes:x,droppableContainers:b,dragOverlay:C,over:S,measuringConfiguration:w,scrollableAncestors:E,scrollableAncestorRects:T,windowRect:_}=YLe(),A=y.useContext(hE),j=lze(f==null?void 0:f.id),D=jae(i,{activatorEvent:d,active:f,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:C.rect,over:S,overlayNodeRect:C.rect,scrollableAncestors:E,scrollableAncestorRects:T,transform:A,windowRect:_}),z=IM(m),F=ize({config:r,draggableNodes:x,droppableContainers:b,measuringConfiguration:w}),R=z?C.setRef:void 0;return Ce.createElement(eze,null,Ce.createElement(QLe,{animation:F},f&&j?Ce.createElement(rze,{key:j,id:f.id,ref:R,as:o,activatorEvent:d,adjustScale:e,className:l,transition:a,rect:z,style:{zIndex:u,...s},transform:D},n):null))}),Rae=y.createContext(void 0);function uze(t){return t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function dze({children:t}){const{sendMessageAndListen:e,useRerenderListener:n}=ut(),{orderedCourseIds:r,courseData:s}=zr(),{options:a}=n(["course_custom_types"]),[i,o]=y.useState([]),[l,u]=y.useState(!1),[d,f]=y.useState(null);y.useEffect(()=>{if(!r||r.length===0){o([]),u(!1);return}(async()=>{u(!0),f(null);try{const C=await e({type:"CALL_EXTENSION_FUNC",payload:{func:"getAssignmentGroupsForCourses",args:{courseIds:r}}});if(!(C!=null&&C.success))throw new Error((C==null?void 0:C.error)||"Failed to fetch assignment groups");const S=C.data||{},w=(a==null?void 0:a.course_custom_types)||{},E=r.map(T=>{const _=s==null?void 0:s[T],A=(_==null?void 0:_.code)||(_==null?void 0:_.default)||T,j=S[T]||[],D=w[T]||[],z=new Map;Array.isArray(j)&&j.forEach(R=>{if(R!=null&&R.name){const L=R.name.toLowerCase().replace(/\s+/g,"_"),O=`${T}:${L}`;z.has(O)||z.set(O,{value:O,label:R.name,isCustom:!1,isCanvasGroup:!0})}}),Array.isArray(D)&&D.forEach(R=>{const L=R.toLowerCase(),O=`${T}:${L}`;z.has(O)||z.set(O,{value:O,label:uze(R),isCustom:!0,isCanvasGroup:!1})});const F=Array.from(z.values()).sort((R,L)=>R.label.localeCompare(L.label));return{courseId:T,courseName:A,types:F}}).filter(T=>T.types.length>0);o(E)}catch(C){console.error("Failed to fetch assignment types:",C),f("Failed to load assignment types"),o([])}finally{u(!1)}})()},[r,s,a==null?void 0:a.course_custom_types,e]);const m=y.useMemo(()=>{const b={};return i.forEach(C=>{C.types.forEach(S=>{b[S.value]=S.label})}),b},[i]),g=y.useMemo(()=>{const b=new Map;return i.forEach(C=>{C.types.forEach(S=>{b.has(S.value)||b.set(S.value,S)})}),Array.from(b.values()).sort((C,S)=>C.label.localeCompare(S.label))},[i]),x={typesByCourse:i,types:g,typeLabels:m,isLoading:l,error:d};return c.jsx(Rae.Provider,{value:x,children:t})}function PM(){const t=y.useContext(Rae);if(t===void 0)throw new Error("useAssignmentTypes must be used within AssignmentTypesProvider");return t}const $D={incomplete:"Not started","in-progress":"In progress",complete:"Complete",graded:"Graded"},UD={short:"Short (< 30m)",medium:"Medium (30m - 1hr)",long:"Long (1hr - 2hr)",extended:"Extended (> 2hr)"},HD={haslinked:"Has linked items",nolinked:"No linked items"},hze=y.memo(({value:t,onClick:e})=>c.jsxs("button",{className:"flex items-center gap-[5px] text-sm bg-theme-1 rounded-full px-[10px] py-[2px] cursor-pointer hover:bg-theme-2",onClick:e,children:[c.jsx("p",{children:t}),c.jsx(ys,{className:"h-[14px] w-[14px] text-theme-0"})]})),fze=()=>{const{filters:t,updateFilters:e}=zt(),{courseData:n}=zr(),{typeLabels:r}=PM(),s={status:$D,duration:UD,type:r,linked:HD},a=d=>{if(d.includes(":")){const[f,m]=d.split(":"),g=n==null?void 0:n[f],x=(g==null?void 0:g.code)||(g==null?void 0:g.default)||"",b=r[d]||m;return`${x}: ${b}`}return r[d]||d},i=y.useCallback((d,f)=>{e({[d]:t[d].filter(m=>m!==f)})},[t,e]),o=y.useCallback(()=>{e({course:[],status:[],duration:[],type:[],linked:[]})},[e]),u=(()=>{let d=[];return Object.keys(t).map(f=>{t[f].forEach(m=>{var x,b,C,S;let g;f==="course"?g=((x=n==null?void 0:n[m])==null?void 0:x.code)!==""?(b=n==null?void 0:n[m])==null?void 0:b.code:(C=n==null?void 0:n[m])==null?void 0:C.default:f==="type"?g=a(m):g=(S=s[f])==null?void 0:S[m],d.push(c.jsx(hze,{value:g,onClick:()=>i(f,m)},f+"_"+m))})}),d})();return u.length===0?null:c.jsxs("div",{className:"flex items-center gap-[5px] px-[10px] pb-[10px]",children:[u,c.jsx("button",{className:"text-sm text-theme-0/60 cursor-pointer hover:text-theme-0 ml-[5px] underline",onClick:o,children:"Clear Filters"})]})},xw=y.memo(({label:t,checked:e,onClick:n})=>c.jsxs("div",{className:"flex items-center gap-[5px] cursor-pointer",onClick:n,children:[c.jsx(or,{className:"h-[16px] w-[16px] transition-opacity duration-200",style:{opacity:e?1:0}}),c.jsx("label",{htmlFor:t,children:t})]})),mze=()=>{const{updateFilters:t,filters:e}=zt(),{courseData:n}=zr(),r=a=>{t({course:bw(e.course,a)})};return Object.keys(n).map(a=>{const i=n[a];return c.jsx(xw,{label:i.default,onClick:()=>r(a),checked:e.course.includes(a)},a)})},pze=()=>{const{updateFilters:t,filters:e}=zt();return Object.keys($D).map(r=>c.jsx(xw,{label:$D[r],onClick:()=>{t({status:bw(e.status,r)})},checked:e.status.includes(r)},r))},gze=()=>{const{updateFilters:t,filters:e}=zt();return Object.keys(UD).map(r=>c.jsx(xw,{label:UD[r],onClick:()=>{t({duration:bw(e.duration,r)})},checked:e.duration.includes(r)},r))},nx=({children:t,open:e,setOpen:n,close:r})=>{const s=()=>{r(),n(!0)},{portal:a}=zt();return c.jsxs(eD,{open:e,children:[c.jsx(tD,{onPointerEnter:s,children:t==null?void 0:t[0]}),c.jsx(Qj,{container:a,children:c.jsx(nD,{className:"flex flex-col gap-[5px]",children:t==null?void 0:t[1]})})]})},vze=()=>{const{updateFilters:t,filters:e}=zt(),{typesByCourse:n,isLoading:r,error:s}=PM();return r?c.jsxs("div",{className:"flex items-center gap-2 text-theme-1 py-2 px-1",children:[c.jsx(js,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"text-sm",children:"Loading..."})]}):s?c.jsx("div",{className:"text-sm text-red-500 py-2 px-1",children:s}):n.length===0?c.jsx("div",{className:"text-sm text-theme-1 py-2 px-1",children:"No types found"}):c.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:n.map((a,i)=>c.jsxs("div",{children:[i>0&&c.jsx("div",{className:"h-px bg-theme-1/20 my-2"}),c.jsx("div",{className:"text-xs font-medium text-theme-1 px-1 py-1 truncate",children:a.courseName}),a.types.map(o=>c.jsx(xw,{label:o.label,onClick:()=>{t({type:bw(e.type,o.value)})},checked:e.type.includes(o.value)},`${a.courseId}-${o.value}`))]},a.courseId))})},yze=()=>{const{updateFilters:t,filters:e}=zt();return Object.keys(HD).map(n=>c.jsx(xw,{label:HD[n],onClick:()=>{t({linked:bw(e.linked,n)})},checked:e.linked.includes(n)},n))},bw=(t,e)=>t.includes(e)?t.filter(n=>n!==e):[...t,e],xze=()=>{const{updateFilters:t,filters:e,portal:n}=zt(),[r,s]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[u,d]=y.useState(!1),[f,m]=y.useState(!1),g=()=>{s(!1),i(!1),l(!1),d(!1),m(!1)};return c.jsx(c.Fragment,{children:c.jsxs(Tv,{modal:!1,onOpenChange:g,children:[c.jsx(Av,{asChild:!0,children:c.jsxs("button",{className:"text-sm flex items-center gap-[5px] px-[10px] rounded-lg py-1 text-theme-0 border border-theme cursor-pointer hover:bg-theme-1 transition-all duration-200",children:[c.jsx(UEe,{className:"h-[16px] w-[16px]"}),c.jsx("p",{children:"Filter"})]})}),c.jsxs(Nv,{children:[c.jsxs(nx,{open:r,setOpen:s,close:g,children:[c.jsx("p",{children:"Course"}),c.jsx(mze,{})]}),c.jsxs(nx,{open:a,setOpen:i,close:g,children:[c.jsx("p",{children:"Status"}),c.jsx(pze,{})]}),c.jsxs(nx,{open:o,setOpen:l,close:g,children:[c.jsx("p",{children:"Time estimate"}),c.jsx(gze,{})]}),c.jsxs(nx,{open:u,setOpen:d,close:g,children:[c.jsx("p",{children:"Type"}),c.jsx(vze,{})]}),c.jsxs(nx,{open:f,setOpen:m,close:g,children:[c.jsx("p",{children:"Linked items"}),c.jsx(yze,{})]})]})]})})},zv=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:t,viewBox:"-0.5 0 48 48",version:"1.1",children:[c.jsx("title",{children:"Google-color"}),c.jsx("desc",{children:"Created with Sketch."}),c.jsx("defs",{}),c.jsx("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:c.jsx("g",{id:"Color-",transform:"translate(-401.000000, -860.000000)",children:c.jsxs("g",{id:"Google",transform:"translate(401.000000, 860.000000)",children:[c.jsx("path",{d:"M9.82727273,24 C9.82727273,22.4757333 10.0804318,21.0144 10.5322727,19.6437333 L2.62345455,13.6042667 C1.08206818,16.7338667 0.213636364,20.2602667 0.213636364,24 C0.213636364,27.7365333 1.081,31.2608 2.62025,34.3882667 L10.5247955,28.3370667 C10.0772273,26.9728 9.82727273,25.5168 9.82727273,24",id:"Fill-1",fill:"#FBBC05"}),c.jsx("path",{d:"M23.7136364,10.1333333 C27.025,10.1333333 30.0159091,11.3066667 32.3659091,13.2266667 L39.2022727,6.4 C35.0363636,2.77333333 29.6954545,0.533333333 23.7136364,0.533333333 C14.4268636,0.533333333 6.44540909,5.84426667 2.62345455,13.6042667 L10.5322727,19.6437333 C12.3545909,14.112 17.5491591,10.1333333 23.7136364,10.1333333",id:"Fill-2",fill:"#EB4335"}),c.jsx("path",{d:"M23.7136364,37.8666667 C17.5491591,37.8666667 12.3545909,33.888 10.5322727,28.3562667 L2.62345455,34.3946667 C6.44540909,42.1557333 14.4268636,47.4666667 23.7136364,47.4666667 C29.4455,47.4666667 34.9177955,45.4314667 39.0249545,41.6181333 L31.5177727,35.8144 C29.3995682,37.1488 26.7323182,37.8666667 23.7136364,37.8666667",id:"Fill-3",fill:"#34A853"}),c.jsx("path",{d:"M46.1454545,24 C46.1454545,22.6133333 45.9318182,21.12 45.6113636,19.7333333 L23.7136364,19.7333333 L23.7136364,28.8 L36.3181818,28.8 C35.6879545,31.8912 33.9724545,34.2677333 31.5177727,35.8144 L39.0249545,41.6181333 C43.3393409,37.6138667 46.1454545,31.6490667 46.1454545,24",id:"Fill-4",fill:"#4285F4"})]})})})]}),FM=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 23 23",className:t,children:[c.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),c.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),c.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),c.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]}),fE=({className:t})=>c.jsx("svg",{className:t,"aria-label":"Done",viewBox:"0 0 14 14",fill:"currentColor",role:"img",focusable:"false","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C10.866 14 14 10.866 14 7C14 3.13401 10.866 0 7 0ZM11.101 5.10104C11.433 4.76909 11.433 4.23091 11.101 3.89896C10.7691 3.56701 10.2309 3.56701 9.89896 3.89896L5.5 8.29792L4.10104 6.89896C3.7691 6.56701 3.2309 6.56701 2.89896 6.89896C2.56701 7.2309 2.56701 7.7691 2.89896 8.10104L4.89896 10.101C5.2309 10.433 5.7691 10.433 6.10104 10.101L11.101 5.10104Z"})}),mE=({className:t})=>c.jsxs("svg",{"aria-label":"In Progress",className:t,viewBox:"0 0 14 14",fill:"none",role:"img",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"1",y:"1",width:"12",height:"12",rx:"6",stroke:"currentColor","stroke-width":"1.5",fill:"none"}),c.jsx("path",{fill:"currentColor",stroke:"none",d:"M 3.5,3.5 L3.5,0 A3.5,3.5 0 0,1 7, 3.5 z",transform:"translate(3.5,3.5)"})]}),pE=({className:t})=>c.jsxs("svg",{"aria-label":"Todo",className:t,viewBox:"0 0 14 14",fill:"none",role:"img",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"1",y:"1",width:"12",height:"12",rx:"6",stroke:"currentColor","stroke-width":"1.5",fill:"none"}),c.jsx("path",{fill:"currentColor",stroke:"none",d:"M 3.5,3.5 L3.5,0 A3.5,3.5 0 0,1 3.5, 0 z",transform:"translate(3.5,3.5)"})]}),bze=({className:t})=>c.jsxs("svg",{"aria-label":"High Priority",className:t,width:"16",height:"16",viewBox:"0 0 16 16",fill:"lch(64.892% 1.933 272 / 1)",role:"img",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"1.5",y:"8",width:"3",height:"6",rx:"1"}),c.jsx("rect",{x:"6.5",y:"5",width:"3",height:"9",rx:"1"}),c.jsx("rect",{x:"11.5",y:"2",width:"3",height:"12",rx:"1"})]}),wze=({className:t})=>c.jsxs("svg",{"aria-label":"Medium Priority",className:t,width:"16",height:"16",viewBox:"0 0 16 16",role:"img",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"1.5",y:"8",width:"3",height:"6",rx:"1"}),c.jsx("rect",{x:"6.5",y:"5",width:"3",height:"9",rx:"1"}),c.jsx("rect",{x:"11.5",y:"2",width:"3",height:"12",rx:"1","fill-opacity":"0.4"})]}),Cze=({className:t})=>c.jsxs("svg",{"aria-label":"Low Priority",className:t,width:"16",height:"16",viewBox:"0 0 16 16",role:"img",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"1.5",y:"8",width:"3",height:"6",rx:"1"}),c.jsx("rect",{x:"6.5",y:"5",width:"3",height:"9",rx:"1","fill-opacity":"0.4"}),c.jsx("rect",{x:"11.5",y:"2",width:"3",height:"12",rx:"1","fill-opacity":"0.4"})]}),gE=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 32 32",fill:"none",children:[c.jsx("rect",{x:"10",y:"2",width:"20",height:"28",rx:"2",fill:"#1066B5"}),c.jsx("rect",{x:"10",y:"2",width:"20",height:"28",rx:"2",fill:"url(#paint0_linear_87_7742)"}),c.jsx("rect",{x:"10",y:"5",width:"10",height:"10",fill:"#32A9E7"}),c.jsx("rect",{x:"10",y:"15",width:"10",height:"10",fill:"#167EB4"}),c.jsx("rect",{x:"20",y:"15",width:"10",height:"10",fill:"#32A9E7"}),c.jsx("rect",{x:"20",y:"5",width:"10",height:"10",fill:"#58D9FD"}),c.jsx("mask",{id:"mask0_87_7742",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"8",y:"14",width:"24",height:"16",children:c.jsx("path",{d:"M8 14H30C31.1046 14 32 14.8954 32 16V28C32 29.1046 31.1046 30 30 30H10C8.89543 30 8 29.1046 8 28V14Z",fill:"url(#paint1_linear_87_7742)"})}),c.jsxs("g",{mask:"url(#mask0_87_7742)",children:[c.jsx("path",{d:"M32 14V18H30V14H32Z",fill:"#135298"}),c.jsx("path",{d:"M32 30V16L7 30H32Z",fill:"url(#paint2_linear_87_7742)"}),c.jsx("path",{d:"M8 30V16L33 30H8Z",fill:"url(#paint3_linear_87_7742)"})]}),c.jsx("path",{d:"M8 12C8 10.3431 9.34315 9 11 9H17C18.6569 9 20 10.3431 20 12V24C20 25.6569 18.6569 27 17 27H8V12Z",fill:"#000000",fillOpacity:"0.3"}),c.jsx("rect",{y:"7",width:"18",height:"18",rx:"2",fill:"url(#paint4_linear_87_7742)"}),c.jsx("path",{d:"M14 16.0693V15.903C14 13.0222 11.9272 11 9.01582 11C6.08861 11 4 13.036 4 15.9307V16.097C4 18.9778 6.07278 21 9 21C11.9114 21 14 18.964 14 16.0693ZM11.6424 16.097C11.6424 18.0083 10.5665 19.1579 9.01582 19.1579C7.46519 19.1579 6.37342 17.9806 6.37342 16.0693V15.903C6.37342 13.9917 7.44937 12.8421 9 12.8421C10.5348 12.8421 11.6424 14.0194 11.6424 15.9307V15.903Z",fill:"white"}),c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"paint0_linear_87_7742",x1:"10",y1:"16",x2:"30",y2:"16",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#064484"}),c.jsx("stop",{offset:"1",stopColor:"#0F65B5"})]}),c.jsxs("linearGradient",{id:"paint1_linear_87_7742",x1:"8",y1:"26.7692",x2:"32",y2:"26.7692",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#1B366F"}),c.jsx("stop",{offset:"1",stopColor:"#2657B0"})]}),c.jsxs("linearGradient",{id:"paint2_linear_87_7742",x1:"32",y1:"23",x2:"8",y2:"23",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#44DCFD"}),c.jsx("stop",{offset:"0.453125",stopColor:"#259ED0"})]}),c.jsxs("linearGradient",{id:"paint3_linear_87_7742",x1:"8",y1:"23",x2:"32",y2:"23",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#259ED0"}),c.jsx("stop",{offset:"1",stopColor:"#44DCFD"})]}),c.jsxs("linearGradient",{id:"paint4_linear_87_7742",x1:"0",y1:"16",x2:"18",y2:"16",gradientUnits:"userSpaceOnUse",children:[c.jsx("stop",{stopColor:"#064484"}),c.jsx("stop",{offset:"1",stopColor:"#0F65B5"})]})]})]}),Sze=["planning_type","planningType","planningtype","planning","plan_type","planType","plan","class_type","classType","delivery_type","deliveryType","delivery_mode","deliveryMode","format","modality","in_class","inClass"],kze=["is_take_home","isTakeHome","take_home","takeHome","takehome"],jC=(t,e)=>{if(t){if(t[e]!==void 0)return t[e];if(t!=null&&t.metadata&&t.metadata[e]!==void 0)return t.metadata[e]}},Eze=t=>{for(const e of kze){const n=jC(t==null?void 0:t.current,e)??jC(t==null?void 0:t.original,e);if(n==null)continue;return(typeof n=="string"?n.trim().toLowerCase()==="true":!!n)?"take-home":"in-class"}for(const e of Sze){const n=jC(t==null?void 0:t.current,e)??jC(t==null?void 0:t.original,e);if(n==null)continue;if(typeof n=="boolean")return n?"in-class":"take-home";const r=n.toString().trim().toLowerCase().replace(/\s+/g,"-");if(r)return r}return"take-home"},tb=t=>{const e=Eze(t);return e?e.includes("take"):!1},_ze=()=>{const{blockHeight:t,blockWidth:e,timeWidth:n,blockMargin:r,dueBlockWidth:s,view:a,cursorType:i}=zt();return c.jsx("style",{children:`
                html {
                    --block-height: ${t}px;
                    --block-height-1: ${t-1}px;
                    --block-width: ${e}px;
                    --due-block-width: ${s}px;
                    --time-width: ${n}px;
                    --block-margin: ${r}px;
                    cursor: ${i||"default"};
                }

            `})},BM=y.memo(()=>{const t=Array.from({length:25},(e,n)=>{const r=Sr(new Date(0,0,0,n),"h:mmaaa");return c.jsx(Nze,{time:r,last:n===24},"time-indicator-"+n)});return c.jsxs("div",{className:"flex flex-col w-max mt-[20px]",children:[t,c.jsx("p",{className:"opacity-0",children:"88:88AM"})]})}),Mae=y.memo(({date:t,today:e})=>c.jsxs("div",{className:"flex-1 flex items-center justify-center gap-[5px] min-w-[var(--block-width)] max-w-[var(--block-width)]",children:[c.jsx("p",{className:"font-medium",children:Sr(t,"eee")}),c.jsx("p",{className:"text-theme-1",children:Sr(t,"MMM d")}),e&&c.jsx("p",{className:"text-sm text-theme-link font-medium",children:"Today"})]})),LM=y.memo(()=>{const{blockHeight:t}=zt(),e=y.useMemo(()=>Array.from({length:25},(n,r)=>c.jsx("div",{className:"absolute w-full h-[1px] border-b border-theme",style:{top:r*t+"px"}},"row-line-"+r)),[t]);return c.jsx("div",{className:"absolute top-0 left-0 w-full h-full z-1 mt-[20px]",children:e})}),Tze=({item:t})=>{const{dueItems:e,blockHeight:n,overrides:r}=zt(),{courseData:s}=zr();Math.max(((t==null?void 0:t.duration)||30)/60*n,20);const a=s==null?void 0:s[t==null?void 0:t.course],i=(a==null?void 0:a.color)||"gray";return y.useMemo(()=>{try{return Wr(i).lightness()>50?"#000":"#fff"}catch{return"#000000"}},[i]),t?c.jsx("div",{className:"opacity-50 bg-theme-1 rounded-md",children:c.jsx(WM,{item:{current:t,original:t},onAutoSchedule:()=>{}})}):null},Iae=()=>{const{activeDragItem:t,shouldAnimateDrop:e}=Fv(),{settings:n}=zt(),r=((n==null?void 0:n.assignments_view)||"planner")==="due",s=y.useMemo(()=>r&&e?Dae:null,[r,e]);return c.jsx(cze,{dropAnimation:s,children:c.jsx(Tze,{item:t})})},Aze=()=>{const{getRowFromDelta:t,blockHeight:e,settings:n}=zt(),{activeCalendarDragItem:r,currentDragDelta:s,resizeHeight:a}=Fv(),{courseData:i}=zr();if(!r)return null;const o=r,l=y.useMemo(()=>s||(o!=null&&o.plannedAt?new Date(o.plannedAt):null),[s,o]);if(!l)return null;const u=t(l),d=((o==null?void 0:o.duration)||Qa.duration)/60*e,f=a||Math.max(d,20),m=new Date(l),g=If(m,(o==null?void 0:o.duration)||Qa.duration),x=(i==null?void 0:i[o==null?void 0:o.course])||{},b=(x==null?void 0:x.color)||"gray",C=x==null?void 0:x.img,w=C&&C!==""?{background:`linear-gradient(${b}dd, ${b}cc), url('${C}')`,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:b};console.log("color of the dragging preview",b,x,o);const E=y.useMemo(()=>{try{return Wr(b).lightness()>50?"#000":"#fff"}catch{return"#000000"}},[b]),T=o.duration<=15,_=$M((o==null?void 0:o.duration)||0),A=(n.assignments_zoom||100)/100,j=Math.max(8,Math.round(T?11*A:12*A)),D=Math.max(9,Math.round(T?12*A:13*A)),z=Math.max(7,Math.round(10*A));return c.jsx("div",{className:"absolute left-0 w-full bg-theme-0 p-[2px] rounded-lg cursor-grab",style:{top:u*e+"px",height:f+"px"},children:c.jsxs("div",{className:"overflow-hidden max-h-full h-full flex items-start gap-1 bg-theme-1 rounded-md px-[5px] relative z-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-md z-[-1]",style:w}),c.jsx("button",{className:"mt-1 cursor-pointer flex-shrink-0 opacity-75 hover:scale-105 hover:opacity-100 transition-all duration-200",style:{color:E},children:o.status==="in-progress"?c.jsx(mE,{className:"w-[14px] h-[14px]"}):o.status==="complete"||o.status==="graded"?c.jsx(fE,{className:"w-[14px] h-[14px]"}):c.jsx(pE,{className:"w-[14px] h-[14px]"})}),c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",style:{color:E},children:[c.jsxs("div",{className:"flex items-start gap-1",children:[c.jsx("p",{className:`font-semibold flex-1 overflow-hidden ${o.status==="complete"||o.status==="graded"?"line-through":""}`,style:{fontSize:`${j}px`,lineHeight:`${D}px`,display:"-webkit-box",WebkitLineClamp:_,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},children:o.title}),c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx("button",{className:"shrink-0 cursor-pointer hover:scale-105 transition-all duration-200",children:c.jsx(xZ,{className:"w-4 h-4"})})}),c.jsx(va,{className:"mb-2",children:c.jsx("span",{children:"Remove from calendar"})})]})]}),c.jsxs("div",{className:"flex items-center gap-[5px] overflow-hidden whitespace-nowrap",style:{fontSize:`${z}px`,lineHeight:`${z+2}px`,color:E},children:[c.jsx("p",{children:ic(m,"h:mmaaa")}),c.jsx("span",{children:"-"}),c.jsx("p",{children:ic(g,"h:mmaaa")})]})]})]})},o.title)},Nze=y.memo(({time:t,last:e})=>c.jsx("div",{className:`relative border-t border-theme ${e?"h-2":"h-[var(--block-height)]"}`,children:c.jsx("p",{className:"absolute top-[-10px] right-[5px] bg-theme-0 text-theme-1 text-sm",children:t})})),zM=({start:t,items:e,today:n,scheduleItems:r,dueItems:s,calendarEvents:a,compactDuePopover:i=!1,showTimeIndicator:o=!1})=>{const{courseData:l}=zr(),{activeCalendarDragItem:u,currentDragDelta:d,resizeHeight:f,activeDragItem:m}=Fv(),{blockHeight:g,scrollArea:x,settings:b}=zt(),[C,S]=y.useState(0),w=y.useRef(null),{setNodeRef:E}=OM({id:t.toISOString(),data:{type:"calendar-column",day:t.getDate(),month:t.getMonth(),year:t.getFullYear()}}),T=()=>{var P,I,U,W;if(!s)return null;const z=Y=>{const B=new Date(Y);return B.setSeconds(0,0),B},F={};b!=null&&b.assignments_calendar_view_type;const R=[],L=new Set,O=(Y,B)=>{if(!Y||!xd(Y,t))return!1;const Z=Y.getHours()*60+Y.getMinutes();return Z>=B.start&&Z<=B.end};for(const Y of s){if(tb(Y))continue;const B=(P=Y==null?void 0:Y.current)!=null&&P.due?new Date(Y.current.due):null;if(!B||!xd(B,t))continue;const Z=((I=Y==null?void 0:Y.current)==null?void 0:I.id)??((U=Y==null?void 0:Y.original)==null?void 0:U.id);if(Z!=null){const K=String(Z);if(L.has(K))continue;L.add(K)}const le=(W=Y==null?void 0:Y.current)!=null&&W.plannedAt?new Date(Y.current.plannedAt):null;r!=null&&r.some(K=>O(B,K)||O(le,K))||R.push(Y)}return R.forEach(Y=>{if(!Y.current.due)return;const B=new Date(Y.current.due),le=z(B).toISOString();F[le]||(F[le]=[]),F[le].push(Y)}),Object.entries(F).sort(([Y],[B])=>Y.localeCompare(B)).map(([Y,B])=>{const Z=new Date(Y),le=Z.getHours(),G=Z.getMinutes(),K=(le+G/60)*g;return c.jsx(jze,{items:B,top:K},Y)})},_=()=>{if(!e)return null;const z=R=>{if(!(R!=null&&R.plannedAt))return!1;const L=new Date(R.plannedAt),O=L.getHours()*60+L.getMinutes(),H=O+(R.duration||Qa.duration);return r==null?void 0:r.some(P=>O<P.end&&H>P.start)};return e.filter(R=>!z(R)).map(R=>c.jsx(Ize,{item:R},R==null?void 0:R.id))},A=()=>{if(!r)return null;const z=(x==null?void 0:x.current)||void 0;return r.map(F=>{const R=F.start,L=F.end,O=I=>{if(!I||I.getFullYear()!==t.getFullYear()||I.getMonth()!==t.getMonth()||I.getDate()!==t.getDate())return!1;const U=I.getHours()*60+I.getMinutes();return U>=R&&U<=L},H=new Set,P=s.filter(I=>{var Z,le,G;const U=(Z=I==null?void 0:I.current)!=null&&Z.due?new Date(I.current.due):null,W=O(U),Y=!tb(I);if(!W||!Y)return!1;const B=((le=I==null?void 0:I.current)==null?void 0:le.id)??((G=I==null?void 0:I.original)==null?void 0:G.id);if(B!=null){const K=String(B);if(H.has(K))return!1;H.add(K)}return!0});return c.jsx(Oze,{item:F,course:l[F.course],dueItemsWithin:P,portalContainer:z,compact:i},F.course)})},j=()=>a?a.map(z=>c.jsx(Mze,{item:z},z.id)):null,D=y.useMemo(()=>!(!u||!d&&!f||d.getFullYear()!==t.getFullYear()||d.getMonth()!==t.getMonth()||d.getDate()!==t.getDate()),[u,d,f]);return c.jsxs("div",{className:"relative flex-1 min-w-[var(--block-width)] max-w-[var(--block-width)] mt-[20px]",ref:z=>{E(z),z&&(w.current=z)},children:[m&&c.jsx("div",{className:"overflow-hidden m-1 absolute inset-0 border-2 border-dashed border-theme-link opacity-50 rounded-lg pointer-events-none z-10",children:c.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-20 z-[10] bg-theme-link"})}),T(),_(),A(),j(),D&&c.jsx(Aze,{}),(o||n)&&c.jsx(Pze,{})]})},jze=({items:t,top:e})=>{const{blockHeight:n,settings:r,scrollArea:s}=zt(),{courseData:a}=zr(),{loadSharedComponent:i}=ut(),o=t.length<=2?t.length:1,l=t.slice(0,o),u=Math.max(t.length-l.length,0),d=(r.assignments_zoom||100)/100,f=Math.max(10,Math.round(11*d)),m=Math.max(26,Math.round(n*.22)),g=Math.max(m,Math.round(n*.25)),x=l.length+(u>0?1:0),b=Math.max(g,x*m+Math.max(x-1,0)*6),C=T=>{var _;return((_=a==null?void 0:a[T])==null?void 0:_.color)||"gray"},S=T=>{if(T!=null&&T.current&&(T!=null&&T.original))return{current:{...T.current},original:{...T.original}};const _=(T==null?void 0:T.current)||T||{};return{current:{id:_.id,title:_.title,course:_.course,due:_.due,plannedAt:_.plannedAt,duration:_.duration||Qa.duration,status:_.status,type:_.type,points:_.points,score:_.score,url:_.url,numLinks:_.numLinks},original:{id:_.id,title:_.title,course:_.course,due:_.due,plannedAt:_.plannedAt,duration:_.duration||Qa.duration,status:_.status,type:_.type,points:_.points,score:_.score,url:_.url,numLinks:_.numLinks}}},w=()=>{const T=t[0];T&&i("AssignmentCreator",{assignment:S(T)})},E=(T,_)=>{var z,F,R,L,O;const A=C(((z=T==null?void 0:T.current)==null?void 0:z.course)||""),j=(F=T==null?void 0:T.current)!=null&&F.due?Sr(new Date(T.current.due),"h:mmaaa"):"";let D="rgba(0,0,0,0.04)";try{D=Wr(A).alpha(.14).string()}catch{D="rgba(0,0,0,0.04)"}return c.jsxs("button",{"data-due-chip":"true",className:"flex items-center gap-[6px] rounded-md px-[8px] py-[4px] border border-theme bg-theme-0 text-theme-0 text-left w-full min-w-0 cursor-pointer hover:brightness-95 transition-all duration-150",style:{borderColor:A,background:D},onClick:H=>{H.stopPropagation(),i("AssignmentCreator",{assignment:S(T)})},onMouseDown:H=>{H.stopPropagation(),H.button===0&&i("AssignmentCreator",{assignment:S(T)})},children:[c.jsx("span",{className:"h-[10px] w-[10px] rounded-full flex-shrink-0",style:{background:A}}),c.jsx("span",{className:"flex-1 min-w-0 font-semibold truncate",style:{fontSize:`${f}px`},children:((R=T==null?void 0:T.current)==null?void 0:R.title)||"Due item"}),j&&c.jsx("span",{className:"text-[11px] text-theme-1 whitespace-nowrap",children:j})]},(((L=T==null?void 0:T.current)==null?void 0:L.id)||((O=T==null?void 0:T.current)==null?void 0:O.title)||"due-item")+_)};return c.jsx("div",{className:"absolute left-0 w-full px-[4px] z-10 pointer-events-auto",style:{top:`${e}px`,minHeight:`${b}px`,cursor:"pointer"},onClick:w,onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),w())},role:"button",tabIndex:0,children:c.jsxs("div",{className:"flex items-center gap-[8px] overflow-hidden",children:[c.jsxs("div",{className:"flex flex-col gap-[6px] flex-1 min-w-0",children:[l.map((T,_)=>c.jsx("div",{style:{minHeight:`${m}px`},children:E(T,"-visible-"+_)},_)),u>0&&c.jsxs(zo,{children:[c.jsx($o,{asChild:!0,children:c.jsxs("button",{className:"flex items-center justify-between rounded-md px-[10px] py-[5px] border border-theme text-xs font-semibold text-theme-link bg-theme-0 hover:bg-theme-1 transition-all duration-150 w-full",style:{minHeight:`${m}px`},onClick:T=>T.stopPropagation(),onMouseDown:T=>T.stopPropagation(),onMouseUp:T=>T.stopPropagation(),children:["+",u," more"]})}),c.jsxs(Uo,{side:"bottom",align:"start",sideOffset:8,avoidCollisions:!1,className:"w-[320px] p-[12px]",zIndex:1,container:(s==null?void 0:s.current)||void 0,onClick:T=>T.stopPropagation(),onMouseDown:T=>T.stopPropagation(),onMouseUp:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-[8px]",children:[c.jsx("p",{className:"text-sm font-semibold",children:"Due items"}),c.jsxs("p",{className:"text-xs text-theme-1",children:[t.length," total"]})]}),c.jsx("div",{className:"flex flex-col gap-[8px]",children:t.map((T,_)=>c.jsx("div",{onClick:()=>i("AssignmentCreator",{assignment:S(T)}),children:E(T,"-list-"+_)},_))})]})]})]}),u>0&&c.jsx("div",{className:"hidden"})]})})},Dze=({className:t})=>c.jsxs("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:t,children:[c.jsx("title",{children:"Google"}),c.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})]}),Rze=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:t,children:[c.jsx("path",{d:"M0 0h15.206v15.206H0z"}),c.jsx("path",{d:"M16.794 0H32v15.206H16.794z"}),c.jsx("path",{d:"M0 16.794h15.206V32H0z"}),c.jsx("path",{d:"M16.794 16.794H32V32H16.794z"})]}),$M=t=>t<=40?1:t<=55?2:t<=70?3:4,Mze=({item:t})=>{const{blockHeight:e,subBlocks:n,settings:r}=zt(),s=S=>{const w=new Date(S),E=Math.floor((w==null?void 0:w.getMinutes())/(60/n));return(w==null?void 0:w.getHours())+E/n},a=t.calendarColor,i=y.useMemo(()=>{try{return Wr(a).lightness()>50?"#000":"#fff"}catch{return"#000000"}},[a]),o=new Date(t.plannedAt??""),l=If(o,t.duration),u=t.duration<=15,d=t.duration===0?20:Math.max(t.duration/60*e,20),f=$M((t==null?void 0:t.duration)||0),m=(r.assignments_zoom||100)/100,g=Math.max(8,Math.round(12*m)),x=Math.max(9,Math.round(13*m)),b=Math.max(7,Math.round(11*m)),C=Math.max(8,Math.round(12*m));return c.jsx("div",{className:"absolute left-0 w-full bg-theme-0 p-[2px] rounded-lg",style:{top:s(t.plannedAt)*e+"px",height:d+"px",cursor:t.htmlLink?"pointer":"default"},onClick:()=>{t.htmlLink&&window.open(t.htmlLink,"_blank")},children:c.jsxs("div",{className:"overflow-hidden max-h-full h-full flex flex-col bg-theme-1 rounded-md px-[5px] relative z-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-theme-1 rounded-md z-[-1]",style:{background:a}}),c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",style:{color:i},children:[c.jsxs("div",{className:"flex items-start justify-between gap-1",children:[c.jsx("p",{className:"font-semibold flex-1 overflow-hidden",style:{fontSize:`${g}px`,lineHeight:`${x}px`,display:"-webkit-box",WebkitLineClamp:f,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},children:t.title}),t.isGoogleEvent&&c.jsx(Dze,{className:"w-[12px] h-[12px] flex-shrink-0"}),t.isMicrosoftEvent&&c.jsx(Rze,{className:"w-[12px] h-[12px] flex-shrink-0"})]}),c.jsxs("div",{className:"flex items-center gap-[5px] overflow-hidden whitespace-nowrap",style:{fontSize:`${b}px`,lineHeight:`${b+2}px`,color:i},children:[c.jsx("p",{children:ic(o,"h:mmaaa")}),c.jsx("span",{children:"-"}),c.jsx("p",{children:ic(l,"h:mmaaa")})]}),!u&&t.location&&c.jsx("p",{className:"opacity-60 truncate",style:{fontSize:`${C}px`,lineHeight:`${C+2}px`},children:t.location})]})]})})},Ize=({item:t})=>{if(!t)return null;const{attributes:e,listeners:n,setNodeRef:r}=Kx({id:"calendar_item_"+(t==null?void 0:t.id),data:{type:"calendar-item",planner:{id:t==null?void 0:t.id,plannedAt:t==null?void 0:t.plannedAt,duration:(t==null?void 0:t.duration)||Qa.duration,title:t==null?void 0:t.title,course:t==null?void 0:t.course,status:t==null?void 0:t.status}}}),{courseData:s}=zr(),{blockHeight:a,subBlocks:i,removeFromCalendar:o,settings:l,dueItems:u,modifyOverrides:d,modifyPlanned:f}=zt(),{activeCalendarDragItem:m}=Fv(),{loadSharedComponent:g}=ut(),x=Y=>{const B=new Date(Y),Z=Math.floor((B==null?void 0:B.getMinutes())/(60/i));return(B==null?void 0:B.getHours())+Z/i},b=()=>{const{attributes:Y,listeners:B,setNodeRef:Z}=Kx({id:"resize_bottom_"+t.id,data:{type:"calendar-item-resize-bottom",planner:{id:t.id,title:t.title,course:t.course,plannedAt:t.plannedAt,duration:t.duration||Qa.duration,status:t.status}}});return c.jsx("div",{ref:Z,...B,...Y,className:"opacity-0 absolute -bottom-[0px] h-[10px] w-full bg-theme-1 rounded-lg cursor-ns-resize z-10"})},C=()=>{const{attributes:Y,listeners:B,setNodeRef:Z}=Kx({id:"resize_top_"+t.id,data:{type:"calendar-item-resize-top",planner:{id:t.id,title:t.title,course:t.course,plannedAt:t.plannedAt,duration:t.duration||Qa.duration,status:t.status}}});return c.jsx("div",{ref:Z,...B,...Y,className:"opacity-0 absolute -top-[0px] h-[10px] w-full bg-theme-1 rounded-lg cursor-ns-resize z-10"})},S=s==null?void 0:s[t.course],w=S==null?void 0:S.img,E=(S==null?void 0:S.color)||"gray",_=w&&w!==""?{background:`linear-gradient(${E}dd, ${E}cc), url('${w}')`,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:E},[A,j]=y.useState((t==null?void 0:t.status)||"incomplete");y.useEffect(()=>{j((t==null?void 0:t.status)||"incomplete")},[t==null?void 0:t.status]);const D=y.useMemo(()=>{try{return Wr(E).lightness()>50?"#000":"#fff"}catch{return"#000000"}},[E]),z=new Date(t.plannedAt??""),F=If(z,t.duration),R=t.duration<=15,L=Math.max(t.duration/60*a,20),O=$M((t==null?void 0:t.duration)||0),H=(l.assignments_zoom||100)/100,P=Math.max(8,Math.round(R?11*H:12*H)),I=Math.max(9,Math.round(R?12*H:13*H)),U=Math.max(7,Math.round(10*H)),W=Y=>{var le;if((le=Y.target)!=null&&le.closest("button"))return;const Z=(u==null?void 0:u.find(G=>{var K;return String((K=G==null?void 0:G.current)==null?void 0:K.id)===String(t.id)}))||{current:{id:t.id,title:t.title,course:t.course,plannedAt:t.plannedAt,duration:t.duration,status:t.status},original:{id:t.id,title:t.title,course:t.course,plannedAt:t.plannedAt,duration:t.duration,status:t.status}};g("AssignmentCreator",{assignment:Z})};return c.jsxs("div",{className:"absolute left-0 w-full bg-theme-0 p-[2px] rounded-lg cursor-grab",style:{opacity:(m==null?void 0:m.id)===t.id?0:1,top:x(t.plannedAt)*a+"px",height:L+"px"},children:[c.jsx(C,{}),c.jsxs("div",{ref:r,...n,...e,className:"overflow-hidden max-h-full h-full flex items-start gap-1 bg-theme-1 rounded-md px-[5px] relative z-10",onClick:W,children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-md z-[-1]",style:_}),c.jsx("button",{onClick:Y=>{var te;Y.stopPropagation();const B=A,Z=B==="complete"||B==="graded"?"incomplete":B==="incomplete"?"in-progress":"complete";j(Z);const le={id:t==null?void 0:t.id,status:Z,plannedAt:t==null?void 0:t.plannedAt,duration:t==null?void 0:t.duration,course:t==null?void 0:t.course,title:t==null?void 0:t.title},G=u==null?void 0:u.find(ie=>{var de;return String((de=ie==null?void 0:ie.current)==null?void 0:de.id)===String(t.id)}),K=((te=G==null?void 0:G.current)==null?void 0:te.id)??(t==null?void 0:t.id);K!=null&&(d==null||d(Number.isNaN(Number(K))?K:Number(K),{status:Z})),le.id!==void 0&&le.id!==null&&(f==null||f(le))},className:"mt-1 cursor-pointer flex-shrink-0 opacity-75 hover:scale-105 hover:opacity-100 transition-all duration-200",style:{color:D},children:A==="in-progress"?c.jsx(mE,{className:"w-[14px] h-[14px]"}):A==="complete"||A==="graded"?c.jsx(fE,{className:"w-[14px] h-[14px]"}):c.jsx(pE,{className:"w-[14px] h-[14px]"})}),c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",style:{color:D},children:[c.jsxs("div",{className:"flex items-start gap-1",children:[c.jsx("p",{className:`font-semibold flex-1 overflow-hidden ${A==="complete"||A==="graded"?"line-through":""}`,style:{fontSize:`${P}px`,lineHeight:`${I}px`,display:"-webkit-box",WebkitLineClamp:O,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},children:t.title}),c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx("button",{className:"shrink-0 cursor-pointer hover:scale-105 transition-all duration-200",onClick:async()=>await o(t),children:c.jsx(xZ,{className:"w-4 h-4"})})}),c.jsx(va,{className:"mb-2",children:c.jsx("span",{children:"Remove from calendar"})})]})]}),c.jsxs("div",{className:"flex items-center gap-[5px] overflow-hidden whitespace-nowrap",style:{fontSize:`${U}px`,lineHeight:`${U+2}px`,color:D},children:[c.jsx("p",{children:ic(z,"h:mmaaa")}),c.jsx("span",{children:"-"}),c.jsx("p",{children:ic(F,"h:mmaaa")})]})]})]}),c.jsx(b,{})]})},Oze=({item:t,course:e,dueItemsWithin:n=[],portalContainer:r,compact:s=!1})=>{const{blockHeight:a,settings:i}=zt(),{courseData:o}=zr(),{loadSharedComponent:l}=ut(),u=Math.abs(t.end-t.start),d=Math.max(u/60*a,20),f=t.start/60*a,m=(e==null?void 0:e.code)!==""?e==null?void 0:e.code:e==null?void 0:e.default,g=new Date,x=new Date(g.getFullYear(),g.getMonth(),g.getDate(),Math.floor(t.start/60),t.start%60),b=new Date(g.getFullYear(),g.getMonth(),g.getDate(),Math.floor(t.end/60),t.end%60),C=(i.assignments_zoom||100)/100,S=Math.max(8,Math.round(14*C)),w=Math.max(7,Math.round(12*C)),E=n&&n.length>0,T=()=>{if(!E)return null;const _=s?"mt-auto w-full text-[11px] font-semibold rounded-md px-[5px] py-[3px] border border-theme bg-theme-0 text-theme-0 hover:bg-theme-1 transition-colors flex items-center justify-between":"mt-auto w-full text-[11px] font-semibold rounded-md px-[6px] py-[4px] border border-theme bg-theme-0 text-theme-0 hover:bg-theme-1 transition-colors flex items-center justify-between",A=s?"w-[200px] p-[6px]":"w-[240px] p-[8px]",j=s?"mb-[6px]":"mb-[8px]",D=s?"gap-[4px]":"gap-[6px]",z=s?"flex items-center gap-[4px] rounded-md px-[5px] py-[3px] border border-theme bg-theme-0 text-theme-0 text-left w-full min-w-0 cursor-pointer hover:brightness-95 transition-all duration-150":"flex items-center gap-[4px] rounded-md px-[6px] py-[4px] border border-theme bg-theme-0 text-theme-0 text-left w-full min-w-0 cursor-pointer hover:brightness-95 transition-all duration-150",F=s?"text-[11px]":"text-[12px]",R=s?"text-[9px]":"text-[10px]",L=s?"text-xs":"text-sm",O=s?"text-[10px]":"text-xs";return c.jsxs(zo,{children:[c.jsx($o,{asChild:!0,children:c.jsxs("button",{className:_,children:[c.jsx("span",{children:"Due During Class"}),c.jsx("span",{className:"text-theme-1",children:n.length})]})}),c.jsxs(Uo,{side:"bottom",align:"center",sideOffset:8,avoidCollisions:!1,className:A,zIndex:10,container:r||void 0,children:[c.jsxs("div",{className:`flex items-center justify-between ${j}`,children:[c.jsx("p",{className:`${L} font-semibold`,children:"Due during class"}),c.jsxs("p",{className:`${O} text-theme-1`,children:[n.length," total"]})]}),c.jsx("div",{className:`flex flex-col ${D}`,children:n.map(H=>{var W,Y,B,Z,le;const P=(W=H.current)!=null&&W.due?new Date(H.current.due):null,I=((B=o==null?void 0:o[((Y=H.current)==null?void 0:Y.course)||""])==null?void 0:B.color)||"gray";let U="rgba(0,0,0,0.04)";try{U=Wr(I).alpha(.14).string()}catch{}return c.jsxs("button",{className:z,style:{borderColor:I,background:U},onClick:()=>l("AssignmentCreator",{assignment:H}),children:[c.jsx("span",{className:"h-[10px] w-[10px] rounded-full flex-shrink-0",style:{background:I}}),c.jsx("span",{className:`flex-1 min-w-0 font-semibold truncate ${F}`,children:((Z=H.current)==null?void 0:Z.title)||"Due item"}),P&&c.jsx("span",{className:`${R} text-theme-1 whitespace-nowrap`,children:ic(P,"h:mmaaa")})]},`class-due-${(le=H.current)==null?void 0:le.id}`)})})]})]})};return c.jsx("div",{className:"absolute left-0 w-full bg-theme-0 rounded-lg p-[2px] z-10",style:{top:f+"px",height:d+"px"},children:c.jsxs("div",{className:"max-h-full h-full flex flex-col flex-wrap gap-1 m-[var(--block-margin)] bg-theme-1 rounded-lg px-[5px] bg-theme-1 relative z-1 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-1 overflow-hidden",children:[c.jsx("div",{className:"size-2 bg-theme-1 rounded-full flex-shrink-0",style:{background:e.color||"#000000"}}),c.jsx("p",{className:"font-semibold truncate",style:{fontSize:`${S}px`,lineHeight:`${S+2}px`},children:m})]}),c.jsxs("p",{className:"truncate",style:{fontSize:`${w}px`,lineHeight:`${w+2}px`},children:[ic(x,"h:mmaaa")," - ",ic(b,"h:mmaaa")]}),c.jsx("div",{className:"mt-auto w-full flex flex-col gap-1 pb-[6px]",children:T()})]})})},Pze=()=>{const{blockHeight:t}=zt(),e=new Date,n=(e.getHours()+e.getMinutes()/60)*t;return c.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-theme-link z-[2] pointer-events-none",style:{top:n+"px"},children:c.jsx("div",{className:"h-[10px] w-[10px] bg-theme-link rounded-[5px] absolute top-[-5px] left-[-5px]"})})};function Fze(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var UM="ScrollArea",[Oae]=Fa(UM),[Bze,Dl]=Oae(UM),Pae=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=t,[o,l]=y.useState(null),[u,d]=y.useState(null),[f,m]=y.useState(null),[g,x]=y.useState(null),[b,C]=y.useState(null),[S,w]=y.useState(0),[E,T]=y.useState(0),[_,A]=y.useState(!1),[j,D]=y.useState(!1),z=Bt(e,R=>l(R)),F=k0(s);return c.jsx(Bze,{scope:n,type:r,dir:F,scrollHideDelay:a,scrollArea:o,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:_,onScrollbarXEnabledChange:A,scrollbarY:b,onScrollbarYChange:C,scrollbarYEnabled:j,onScrollbarYEnabledChange:D,onCornerWidthChange:w,onCornerHeightChange:T,children:c.jsx(Nt.div,{dir:F,...i,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});Pae.displayName=UM;var Fae="ScrollAreaViewport",Bae=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,i=Dl(Fae,n),o=y.useRef(null),l=Bt(e,o,i.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(Nt.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Bae.displayName=Fae;var Nu="ScrollAreaScrollbar",Lae=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Dl(Nu,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,o=t.orientation==="horizontal";return y.useEffect(()=>(o?a(!0):i(!0),()=>{o?a(!1):i(!1)}),[o,a,i]),s.type==="hover"?c.jsx(Lze,{...r,ref:e,forceMount:n}):s.type==="scroll"?c.jsx(zze,{...r,ref:e,forceMount:n}):s.type==="auto"?c.jsx(zae,{...r,ref:e,forceMount:n}):s.type==="always"?c.jsx(HM,{...r,ref:e}):null});Lae.displayName=Nu;var Lze=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Dl(Nu,t.__scopeScrollArea),[a,i]=y.useState(!1);return y.useEffect(()=>{const o=s.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),i(!0)},d=()=>{l=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(Ba,{present:n||a,children:c.jsx(zae,{"data-state":a?"visible":"hidden",...r,ref:e})})}),zze=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Dl(Nu,t.__scopeScrollArea),a=t.orientation==="horizontal",i=yE(()=>l("SCROLL_END"),100),[o,l]=Fze("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,s.scrollHideDelay,l]),y.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const g=u[d];f!==g&&(l("SCROLL"),i()),f=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,l,i]),c.jsx(Ba,{present:n||o!=="hidden",children:c.jsx(HM,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:yt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:yt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),zae=y.forwardRef((t,e)=>{const n=Dl(Nu,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,i]=y.useState(!1),o=t.orientation==="horizontal",l=yE(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(o?u:d)}},10);return qg(n.viewport,l),qg(n.content,l),c.jsx(Ba,{present:r||a,children:c.jsx(HM,{"data-state":a?"visible":"hidden",...s,ref:e})})}),HM=y.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Dl(Nu,t.__scopeScrollArea),a=y.useRef(null),i=y.useRef(0),[o,l]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=qae(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,g){return Gze(m,i.current,o,g)}return n==="horizontal"?c.jsx($ze,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,g=oq(m,o,s.dir);a.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?c.jsx(Uze,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,g=oq(m,o);a.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),$ze=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=Dl(Nu,t.__scopeScrollArea),[i,o]=y.useState(),l=y.useRef(null),u=Bt(e,l,a.onScrollbarXChange);return y.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(Uae,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":vE(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),Wae(m,f)&&d.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Z4(i.paddingLeft),paddingEnd:Z4(i.paddingRight)}})}})}),Uze=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=Dl(Nu,t.__scopeScrollArea),[i,o]=y.useState(),l=y.useRef(null),u=Bt(e,l,a.onScrollbarYChange);return y.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(Uae,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":vE(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),Wae(m,f)&&d.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Z4(i.paddingTop),paddingEnd:Z4(i.paddingBottom)}})}})}),[Hze,$ae]=Oae(Nu),Uae=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=t,g=Dl(Nu,n),[x,b]=y.useState(null),C=Bt(e,z=>b(z)),S=y.useRef(null),w=y.useRef(""),E=g.viewport,T=r.content-r.viewport,_=Pr(d),A=Pr(l),j=yE(f,10);function D(z){if(S.current){const F=z.clientX-S.current.left,R=z.clientY-S.current.top;u({x:F,y:R})}}return y.useEffect(()=>{const z=F=>{const R=F.target;(x==null?void 0:x.contains(R))&&_(F,T)};return document.addEventListener("wheel",z,{passive:!1}),()=>document.removeEventListener("wheel",z,{passive:!1})},[E,x,T,_]),y.useEffect(A,[r,A]),qg(x,j),qg(g.content,j),c.jsx(Hze,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:Pr(a),onThumbPointerUp:Pr(i),onThumbPositionChange:A,onThumbPointerDown:Pr(o),children:c.jsx(Nt.div,{...m,ref:C,style:{position:"absolute",...m.style},onPointerDown:yt(t.onPointerDown,z=>{z.button===0&&(z.target.setPointerCapture(z.pointerId),S.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),D(z))}),onPointerMove:yt(t.onPointerMove,D),onPointerUp:yt(t.onPointerUp,z=>{const F=z.target;F.hasPointerCapture(z.pointerId)&&F.releasePointerCapture(z.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),S.current=null})})})}),Q4="ScrollAreaThumb",Hae=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$ae(Q4,t.__scopeScrollArea);return c.jsx(Ba,{present:n||s.hasThumb,children:c.jsx(Vze,{ref:e,...r})})}),Vze=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=Dl(Q4,n),i=$ae(Q4,n),{onThumbPositionChange:o}=i,l=Bt(e,f=>i.onThumbChange(f)),u=y.useRef(void 0),d=yE(()=>{u.current&&(u.current(),u.current=void 0)},100);return y.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(d(),!u.current){const g=Wze(f,o);u.current=g,o()}};return o(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,d,o]),c.jsx(Nt.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:yt(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),x=f.clientX-g.left,b=f.clientY-g.top;i.onThumbPointerDown({x,y:b})}),onPointerUp:yt(t.onPointerUp,i.onThumbPointerUp)})});Hae.displayName=Q4;var VM="ScrollAreaCorner",Vae=y.forwardRef((t,e)=>{const n=Dl(VM,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?c.jsx(qze,{...t,ref:e}):null});Vae.displayName=VM;var qze=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Dl(VM,n),[a,i]=y.useState(0),[o,l]=y.useState(0),u=!!(a&&o);return qg(s.scrollbarX,()=>{var f;const d=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),qg(s.scrollbarY,()=>{var f;const d=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?c.jsx(Nt.div,{...r,ref:e,style:{width:a,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Z4(t){return t?parseInt(t,10):0}function qae(t,e){const n=t/e;return isNaN(n)?0:n}function vE(t){const e=qae(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Gze(t,e,n,r="ltr"){const s=vE(n),a=s/2,i=e||a,o=s-i,l=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return Gae([l,u],f)(t)}function oq(t,e,n="ltr"){const r=vE(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,i=e.content-e.viewport,o=a-r,l=n==="ltr"?[0,i]:[i*-1,0],u=rD(t,l);return Gae([0,i],[0,o])(u)}function Gae(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Wae(t,e){return t>0&&t<e}var Wze=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function s(){const a={left:t.scrollLeft,top:t.scrollTop},i=n.left!==a.left,o=n.top!==a.top;(i||o)&&e(),n=a,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function yE(t,e){const n=Pr(t),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function qg(t,e){const n=Pr(e);ya(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var Kze=Pae,Yze=Bae,Xze=Vae;function Yx({className:t,children:e,...n}){return c.jsxs(Kze,{"data-slot":"scroll-area",className:ge("relative",t),...n,children:[c.jsx(Yze,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),c.jsx(Jze,{}),c.jsx(Xze,{})]})}function Jze({className:t,orientation:e="vertical",...n}){return c.jsx(Lae,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ge("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:c.jsx(Hae,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Qze(t,e){const n=Math.max(0,Math.min(1439,t||0)),r=Math.floor(n/60),s=n%60;if(e==="12h"){let a=r%12;a===0&&(a=12);const i=r>=12?"PM":"AM";return{hour:a,minute:s,period:i}}else return{hour:r,minute:s}}function Zze(t,e){let n=t.hour;return e==="12h"&&(t.period==="AM"?t.hour===12&&(n=0):t.period==="PM"&&t.hour!==12&&(n=t.hour+12)),n*60+t.minute}function lq({value:t,onChange:e,format:n="12h",className:r,disabled:s=!1,variant:a="theme"}){const i=Qze(t||0,n),o=y.useMemo(()=>n==="12h"?Array.from({length:12},(b,C)=>C+1):Array.from({length:24},(b,C)=>C),[n]),l=y.useMemo(()=>Array.from({length:12},(b,C)=>C*5),[]),u=["AM","PM"],d=(b,C,S)=>{if(s)return;const w={hour:b!==void 0?b:i.hour,minute:C!==void 0?C:i.minute,period:n==="12h"?S!==void 0?S:i.period:void 0},E=Zze(w,n);e==null||e(E)},f=(b,C,S=32)=>{if(b.current){const w=C*S-b.current.clientHeight/2+S/2;b.current.scrollTo({top:Math.max(0,w),behavior:"smooth"})}},m=y.useRef(null),g=y.useRef(null),x=y.useRef(null);return y.useEffect(()=>{const b=n==="12h"?i.hour-1:i.hour;f(m,b);const C=Math.round(i.minute/5);if(f(g,C),n==="12h"&&i.period){const S=u.indexOf(i.period);f(x,S)}},[t,n]),c.jsxs("div",{className:ge("flex items-center",s&&"opacity-50 cursor-not-allowed",r),children:[c.jsx("div",{className:"flex flex-col items-center",children:c.jsx(Yx,{className:ge("w-16 border-r",a==="theme"?"border-theme":"border-border"),children:c.jsx("div",{ref:m,className:"p-1",children:o.map(b=>c.jsx("button",{disabled:s,onClick:()=>d(b),className:ge("cursor-pointer w-full h-8 flex items-center justify-center text-sm rounded-md transition-colors",i.hour===b?a==="theme"?"bg-theme-text-0 text-theme-bg-0":"bg-primary text-primary-foreground":a==="theme"?"hover:bg-theme-2":"hover:bg-accent hover:text-accent-foreground",s&&"cursor-not-allowed"),children:b.toString().padStart(2,"0")},b))})})}),c.jsx(Yx,{className:"w-16 h-full",children:c.jsx("div",{ref:g,className:"p-1",children:l.map(b=>c.jsx("button",{disabled:s,onClick:()=>d(void 0,b),className:ge("cursor-pointer w-full h-8 flex items-center justify-center text-sm rounded-md transition-colors",Math.round(i.minute/5)*5===b?a==="theme"?"bg-theme-text-0 text-theme-bg-0":"bg-primary text-primary-foreground":a==="theme"?"hover:bg-theme-2":"hover:bg-accent hover:text-accent-foreground",s&&"cursor-not-allowed"),children:b.toString().padStart(2,"0")},b))})}),n==="12h"&&c.jsx(Yx,{className:ge("w-16 border-l h-full",a==="theme"?"border-theme":"border-border"),children:c.jsx("div",{ref:x,className:"p-1",children:u.map(b=>c.jsx("button",{disabled:s,onClick:()=>d(void 0,void 0,b),className:ge("cursor-pointer w-full h-8 flex items-center justify-center text-sm rounded-md transition-colors",i.period===b?a==="theme"?"bg-theme-text-0 text-theme-bg-0":"bg-primary text-primary-foreground":a==="theme"?"hover:bg-theme-2":"hover:bg-accent hover:text-accent-foreground",s&&"cursor-not-allowed"),children:b},b))})})]})}var xE="Checkbox",[e$e]=Fa(xE),[t$e,qM]=e$e(xE);function n$e(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:o,onCheckedChange:l,required:u,value:d="on",internal_do_not_use_render:f}=t,[m,g]=Mi({prop:n,defaultProp:s??!1,onChange:l,caller:xE}),[x,b]=y.useState(null),[C,S]=y.useState(null),w=y.useRef(!1),E=x?!!i||!!x.closest("form"):!0,T={checked:m,disabled:a,setChecked:g,control:x,setControl:b,name:o,form:i,value:d,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:lf(s)?!1:s,isFormControl:E,bubbleInput:C,setBubbleInput:S};return c.jsx(t$e,{scope:e,...T,children:r$e(f)?f(T):r})}var Kae="CheckboxTrigger",Yae=y.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:i,disabled:o,checked:l,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:x}=qM(Kae,t),b=Bt(s,d),C=y.useRef(l);return y.useEffect(()=>{const S=a==null?void 0:a.form;if(S){const w=()=>f(C.current);return S.addEventListener("reset",w),()=>S.removeEventListener("reset",w)}},[a,f]),c.jsx(Nt.button,{type:"button",role:"checkbox","aria-checked":lf(l)?"mixed":l,"aria-required":u,"data-state":tie(l),"data-disabled":o?"":void 0,disabled:o,value:i,...r,ref:b,onKeyDown:yt(e,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:yt(n,S=>{f(w=>lf(w)?!0:!w),x&&g&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})})});Yae.displayName=Kae;var Xae=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:o,value:l,onCheckedChange:u,form:d,...f}=t;return c.jsx(n$e,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:o,required:i,onCheckedChange:u,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:m})=>c.jsxs(c.Fragment,{children:[c.jsx(Yae,{...f,ref:e,__scopeCheckbox:n}),m&&c.jsx(eie,{__scopeCheckbox:n})]})})});Xae.displayName=xE;var Jae="CheckboxIndicator",Qae=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=qM(Jae,n);return c.jsx(Ba,{present:r||lf(a.checked)||a.checked===!0,children:c.jsx(Nt.span,{"data-state":tie(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});Qae.displayName=Jae;var Zae="CheckboxBubbleInput",eie=y.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:o,disabled:l,name:u,value:d,form:f,bubbleInput:m,setBubbleInput:g}=qM(Zae,t),x=Bt(n,g),b=vk(a),C=gk(r);y.useEffect(()=>{const w=m;if(!w)return;const E=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(E,"checked").set,A=!s.current;if(b!==a&&_){const j=new Event("click",{bubbles:A});w.indeterminate=lf(a),_.call(w,lf(a)?!1:a),w.dispatchEvent(j)}},[m,b,a,s]);const S=y.useRef(lf(a)?!1:a);return c.jsx(Nt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??S.current,required:o,disabled:l,name:u,value:d,form:f,...e,tabIndex:-1,ref:x,style:{...e.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});eie.displayName=Zae;function r$e(t){return typeof t=="function"}function lf(t){return t==="indeterminate"}function tie(t){return lf(t)?"indeterminate":t?"checked":"unchecked"}function Gg({className:t,...e}){return c.jsx(Xae,{"data-slot":"checkbox",className:ge("peer border-input dark:bg-input/30 data-[state=checked]:bg-[#ff895f] data-[state=checked]:text-white dark:data-[state=checked]:bg-[#ff895f] data-[state=checked]:border-[#ff895f] focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:c.jsx(Qae,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:c.jsx(or,{className:"size-3.5"})})})}const e5=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s$e=({course:t,onClick:e})=>{if(!t)return null;const n=(t==null?void 0:t.schedule)||[],r=y.useMemo(()=>n.length===0?"No times added":n.map(s=>e5[s.day]).join(", "),[n]);return c.jsxs("div",{className:"cursor-pointer hover:bg-theme-1 transition-all duration-200 rounded-lg p-[10px] flex items-center justify-between w-full",onClick:e,children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx("div",{className:"size-[12px] rounded-full",style:{backgroundColor:t.color}}),c.jsx("h3",{className:"font-semibold text-theme-0",children:t.code!==""?t.code:t.default})]}),c.jsx("p",{className:"text-sm text-theme-1",children:r})]}),c.jsx(pc,{className:"h-[16px] w-[16px] text-theme-1"})]})},a$e=({initStart:t,initEnd:e,handleChange:n,handleDelete:r,showTrash:s})=>{const[a,i]=y.useState(t),[o,l]=y.useState(e),{settings:u}=ut(),d=u.hr24;y.useEffect(()=>{n({start:a})},[a]),y.useEffect(()=>{n({end:o})},[o]);const f=new Date,m=new Date(f.getFullYear(),f.getMonth(),f.getDate(),a/60,a%60),g=new Date(f.getFullYear(),f.getMonth(),f.getDate(),o/60,o%60);return c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsxs(zo,{children:[c.jsx($o,{asChild:!0,children:c.jsx("button",{className:"border border-theme rounded-md py-[5px] px-[10px] text-sm",children:Sr(m,d?"HH:mmaaa":"h:mmaaa")})}),c.jsx(Uo,{children:c.jsx(lq,{value:a,onChange:x=>i(x),format:d?"24h":"12h"})})]}),c.jsx("span",{children:"-"}),c.jsxs(zo,{children:[c.jsx($o,{asChild:!0,children:c.jsx("button",{className:"border border-theme rounded-md py-[5px] px-[10px] text-sm",children:Sr(g,d?"HH:mmaaa":"h:mmaaa")})}),c.jsx(Uo,{children:c.jsx(lq,{value:o,onChange:x=>l(x),format:d?"24h":"12h"})})]}),s&&c.jsx("button",{className:"rounded-md p-[5px] hover:bg-theme-2",onClick:r,children:c.jsx(wv,{className:"h-[16px] w-[16px] text-theme-0"})})]})},i$e=({sourceDayIndex:t,onCopy:e,children:n})=>{const[r,s]=y.useState([]),[a,i]=y.useState(!1),[o,l]=y.useState(!1);y.useEffect(()=>{o||(s([]),i(!1))},[o]);const u=m=>{if(i(m),m){const g=e5.map((x,b)=>b).filter(x=>x!==t);s(g)}else s([])},d=(m,g)=>{g?s([...r,m]):(s(r.filter(x=>x!==m)),i(!1))},f=()=>{e(r),l(!1)};return c.jsxs(zo,{open:o,onOpenChange:l,children:[c.jsx($o,{asChild:!0,children:n}),c.jsx(Uo,{className:"w-[300px] p-[20px]",children:c.jsxs("div",{className:"flex flex-col gap-[15px]",children:[c.jsx("h3",{className:"text-theme-0 font-semibold text-base",children:"Copy times to"}),c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(Gg,{checked:a,onCheckedChange:u}),c.jsx("label",{className:"text-theme-0 font-medium text-sm cursor-pointer",onClick:()=>u(!a),children:"Select All"})]}),c.jsx(Ns,{}),c.jsx("div",{className:"flex flex-col gap-[10px] max-h-[250px] overflow-y-auto",children:e5.map((m,g)=>g===t?null:c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(Gg,{checked:r.includes(g),onCheckedChange:x=>d(g,x)}),c.jsx("label",{className:"text-theme-0 text-sm cursor-pointer",onClick:()=>d(g,!r.includes(g)),children:m})]},g))}),c.jsxs("div",{className:"flex justify-end gap-[10px] pt-[10px]",children:[c.jsx("button",{onClick:()=>l(!1),className:"px-[15px] py-[6px] border border-theme rounded-md text-theme-0 text-sm hover:bg-theme-1 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:f,className:"px-[15px] py-[6px] bg-theme-0 rounded-md text-theme-5 text-sm hover:opacity-90 transition-opacity",children:"Apply"})]})]})})]})},o$e=({schedule:t,courseId:e,back:n,onScheduleChange:r})=>{const[s,a]=y.useState(t||[]),{updateOptions:i,getOptions:o}=ut(),l=w=>{var _;a(w);const E="card_"+e,T=((_=o())==null?void 0:_[E])||{};i({[E]:{...T,schedule:w}}),r()},u=(w,E)=>{const T=s.map((_,A)=>A===w?{..._,...E}:_);a(T),l(T)},d=w=>{const E=[...s,{day:w,start:780,end:840}];a(E),l(E)},f=w=>{const E=s.filter(j=>j.day===w);let T=780,_=840;if(E.length>0){const j=E[E.length-1];T=j.end,_=Math.min(j.end+60,1440)}const A=[...s,{day:w,start:T,end:_}];a(A),l(A)},m=w=>{const E=s.filter(T=>T.day!==w);a(E),l(E)},g=w=>{const E=s.filter((T,_)=>_!==w);a(E),l(E)},x=(w,E)=>{const T=s.filter(j=>j.day===w),_=E.flatMap(j=>T.map(D=>({...D,day:j}))),A=[...s,..._];a(A),l(A)},b=w=>{const E=s.map((_,A)=>({..._,originalIndex:A})).filter(_=>_.day===w),T=E.length>1;return E.map(_=>c.jsx(a$e,{initStart:_.start,initEnd:_.end,handleChange:A=>u(_.originalIndex,A),handleDelete:()=>g(_.originalIndex),showTrash:T},_.originalIndex))},C=(w,E)=>{w?d(E):m(E)},S=y.useMemo(()=>e5.map((w,E)=>{const T=s.some(_=>_.day===E);return c.jsx("div",{children:c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(Xl,{height:20,checked:T,onCheckedChange:_=>C(_,E)}),c.jsx("p",{className:"font-medium text-theme-0 min-w-[120px]",children:w}),c.jsx("div",{className:"flex items-center gap-[10px] flex-wrap",children:b(E)}),T&&c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx("button",{className:"rounded-md p-[5px] hover:bg-theme-2 transition-colors",onClick:()=>f(E),title:"Add new time slot",children:c.jsx(Yd,{className:"h-[16px] w-[16px] text-theme-0"})}),c.jsx(i$e,{sourceDayIndex:E,onCopy:_=>x(E,_),children:c.jsx("button",{className:"rounded-md p-[5px] hover:bg-theme-2 transition-colors",title:"Copy times to other days",children:c.jsx(cR,{className:"h-[16px] w-[16px] text-theme-0"})})})]})]})},w)}),[s]);return c.jsx("div",{className:"flex flex-col gap-[20px]",children:S})},nie=({initialCourseId:t})=>{var x;const[e,n]=y.useState(t||null),[r,s]=y.useState(!1),{courseData:a}=zr(),{trackEvent:i,withEventCooldown:o,googleCalendar:l,microsoftCalendar:u}=ut();y.useEffect(()=>()=>{r&&(l.refreshClassTimes(),u.refreshClassTimes())},[r]),y.useEffect(()=>{o("schedule_editor_opened",async()=>{await i("schedule_editor_opened")})},[]),y.useEffect(()=>{t&&n(t)},[t]);const{scheduledCourses:d,unscheduledCourses:f}=y.useMemo(()=>Object.keys(a).reduce((b,C)=>{const S=a[C],w=c.jsx(s$e,{course:S,onClick:()=>n(C)},C);return S!=null&&S.schedule&&S.schedule.length>0?b.scheduledCourses.push(w):b.unscheduledCourses.push(w),b},{scheduledCourses:[],unscheduledCourses:[]}),[a]),m=()=>{n(null)},g=()=>{if(!e)return c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsx("h3",{className:"text-xl font-semibold text-theme-0 flex items-center gap-[5px] cursor-pointer",children:c.jsx("span",{children:"Class schedules"})}),c.jsx("p",{className:"text-sm text-theme-1",children:"Add your class times here to block them on your calendar"})]});const b=a[e];return c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("h3",{className:"text-xl font-semibold text-theme-0 flex items-center gap-[10px] cursor-pointer",onClick:m,children:[c.jsx(Kd,{className:"h-[24px] w-[24px]"}),c.jsx("span",{children:"Class schedules"})]}),c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx("div",{className:"size-[12px] rounded-full",style:{backgroundColor:b.color}}),c.jsx("h2",{className:"font-semibold text-theme-0",children:b.code!==""?b.code:b.default})]})]})};return c.jsxs("div",{className:"w-[600px] h-[600px] p-[20px] flex flex-col",children:[c.jsx("div",{className:"flex items-center gap-[10px] flex-shrink-0",children:g()}),c.jsx("div",{className:"flex flex-col gap-[10px] mt-[20px] flex-1 min-h-0",children:c.jsx(Yx,{className:"h-full w-full",children:c.jsxs("div",{className:"pr-[15px] max-w-[475px]",children:[!e&&f.length>0&&c.jsxs("div",{className:"flex flex-col gap-[10px]",children:[c.jsx("h3",{className:"font-semibold text-theme-0",children:"Unscheduled"}),f]}),!e&&d.length>0&&c.jsxs(c.Fragment,{children:[c.jsx(Ns,{className:"my-[20px]"}),c.jsxs("div",{className:"flex flex-col gap-[10px]",children:[c.jsx("h3",{className:"font-semibold text-theme-0",children:"Scheduled"}),d]})]}),e&&c.jsx(o$e,{back:()=>n(null),schedule:(x=a[e])==null?void 0:x.schedule,courseId:e,onScheduleChange:()=>s(!0)})]})})})]})},GM=({highlight:t,className:e})=>{const{useRerenderListener:n,checkGateBoolean:r}=ut(),{trigger:s}=n(["auth"]),[a,i]=y.useState(!1);return y.useEffect(()=>{(async()=>{const{restricted:l}=await r(t);console.log("restricted",l),i(l===!0)})()},[t,s]),a?c.jsx(iZ,{className:ge("size-2.5 absolute -top-1 -right-1 fill-[#f3b434] text-[#f3b434]",e||"")}):null},l$e=()=>{const{settings:t,updateSettings:e}=zt(),{settings:n}=ut(),r=(t==null?void 0:t.assignments_auto_plan)??(n==null?void 0:n.assignments_auto_plan)??{days:0,time:"morning"},s=typeof r.days=="number"&&Number.isFinite(r.days)?r.days:0,a=typeof r.time=="string"&&r.time.length>0?r.time:"morning",i=async o=>{e({assignments_auto_plan:{...r,...o}})};return c.jsxs("div",{className:"flex flex-col gap-[5px] p-[20px] text-theme-0",children:[c.jsxs("h4",{className:"font-bold text-theme-0 text-xl",children:[c.jsx("span",{children:"Auto-plan"}),c.jsx(GM,{highlight:"assignments_auto_schedule",className:"absolute -top-1 -right-2.5 size-2.5"})]}),c.jsx("p",{className:"text-sm text-theme-1",children:"Automatically plan your tasks based on your day's availability"}),c.jsxs("div",{className:"mt-[20px]",children:[c.jsx("p",{className:"font-semibold",children:"Plan ahead"}),c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx("input",{type:"number",min:0,className:"w-[50px]",value:s,onChange:o=>{const l=o.target.value,u=l===""?0:Number(l);Number.isFinite(u)&&i({days:Math.max(0,Math.floor(u))})}}),c.jsx("span",{children:"Days before due"})]})]}),c.jsxs("div",{className:"mt-[10px]",children:[c.jsx("p",{className:"font-semibold",children:"Time of day"}),c.jsxs(xk,{className:"gap-[5px]",value:a,onValueChange:o=>i({time:o}),children:[c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(oc,{value:"morning",id:"autoplan-morning"}),c.jsx("label",{htmlFor:"autoplan-morning",children:"Morning (8am-11pm)"})]}),c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(oc,{value:"afternoon",id:"autoplan-afternoon"}),c.jsx("label",{htmlFor:"autoplan-afternoon",children:"Afternoon (12pm-5pm)"})]}),c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(oc,{value:"evening",id:"autoplan-evening"}),c.jsx("label",{htmlFor:"autoplan-evening",children:"Evening (6pm-10pm)"})]})]})]})]})},rie=({trigger:t,onOpenChange:e})=>c.jsxs(_c,{onOpenChange:e,children:[c.jsx(nw,{asChild:!0,children:t}),c.jsxs(Tc,{className:"bg-theme-0 border border-theme rounded-lg shadow-lg text-theme-1 z-10000 w-max p-[4px] relative",showCloseButton:!1,children:[c.jsxs(OR,{className:"ring-offset-background focus-visible:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs transition-opacity hover:opacity-70 focus-visible:ring-2 focus-visible:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(ys,{className:"text-base-1"}),c.jsx("span",{className:"sr-only",children:"Close"})]}),c.jsx(l$e,{})]})]}),c$e=({onDialogOpen:t,onDialogClose:e})=>{const{settings:n,setZoom:r}=zt(),{loadSharedComponent:s}=ut(),a=o=>{const l=n.assignments_zoom||100,u=Math.max(60,Math.min(200,l+o));r(u)},i=n.assignments_calendar_view_type||"week";return c.jsxs("div",{className:"flex flex-col gap-[2px]",children:[i!=="month"&&c.jsxs("div",{className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-[7px] px-[10px] rounded-md",children:[c.jsxs("span",{children:["Zoom ",n.assignments_zoom||100,"%"]}),c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx("button",{onClick:()=>a(-20),className:"hover:bg-theme-2 rounded p-[2px]",children:c.jsx(XEe,{className:"h-[14px] w-[14px]"})}),c.jsx("button",{onClick:()=>a(20),className:"hover:bg-theme-2 rounded p-[2px]",children:c.jsx(Yd,{className:"h-[14px] w-[14px]"})})]})]}),c.jsxs("button",{className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-[7px] px-[10px] rounded-md",onClick:()=>s("CalendarSyncGate",{showCloseButton:!0}),children:[c.jsx(b4,{restrictedPlans:["none","free","trial","trialThenPro"],className:"size-3 fill-current text-theme-0",children:c.jsx("span",{children:"Google Calendar Sync"})}),c.jsx(Um,{className:"h-[16px] w-[16px]"})]}),c.jsxs(_c,{onOpenChange:o=>o?t==null?void 0:t():e==null?void 0:e(),children:[c.jsx(nw,{asChild:!0,children:c.jsxs("button",{className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-[7px] px-[10px] rounded-md",children:[c.jsx("span",{children:"Class schedules"}),c.jsx(Um,{className:"h-[16px] w-[16px]"})]})}),c.jsxs(Tc,{className:"bg-theme-0 border border-theme rounded-lg shadow-lg text-theme-1 z-10000 w-max p-[4px] relative",showCloseButton:!1,children:[c.jsxs(OR,{className:"ring-offset-background focus-visible:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs transition-opacity hover:opacity-70 focus-visible:ring-2 focus-visible:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(ys,{className:"text-base-1"}),c.jsx("span",{className:"sr-only",children:"Close"})]}),c.jsx(nie,{})]})]}),c.jsx(rie,{onOpenChange:o=>o?t==null?void 0:t():e==null?void 0:e(),trigger:c.jsxs("button",{className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-[7px] px-[10px] rounded-md",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{children:"Auto-plan settings"}),c.jsx(GM,{highlight:"assignments_auto_schedule",className:"absolute -top-1 -right-1 size-2.5"})]}),c.jsx(Um,{className:"h-[16px] w-[16px]"})]})})]})},u$e=()=>{const{settings:t,updateSettings:e,portal:n}=zt(),{restrictedActionCheck:r,openRestrictedDialog:s,loadSharedComponent:a}=ut(),[i,o]=y.useState(!1);return c.jsxs("div",{className:"flex flex-col gap-[2px] p-[5px]",children:[c.jsxs(xk,{value:t.assignments_minical_days.toString(),onValueChange:l=>e({assignments_minical_days:parseInt(l)}),className:"gap-0",children:[c.jsxs("div",{className:"flex items-center gap-[10px] py-[7px] px-[10px] cursor-pointer text-sm",children:[c.jsx(oc,{value:"1",id:"minical-days-1"}),c.jsx("label",{htmlFor:"minical-days-1",className:"cursor-pointer",children:"1 day"})]}),c.jsxs("div",{className:"flex items-center gap-[10px] py-[7px] px-[10px] cursor-pointer text-sm",children:[c.jsx(oc,{value:"2",id:"minical-days-2"}),c.jsx("label",{htmlFor:"minical-days-2",className:"cursor-pointer",children:"2 days"})]}),c.jsxs("div",{className:"flex items-center gap-[10px] py-[7px] px-[10px] cursor-pointer text-sm",children:[c.jsx(oc,{value:"3",id:"minical-days-3"}),c.jsx("label",{htmlFor:"minical-days-3",className:"cursor-pointer",children:"3 days"})]})]}),c.jsxs("button",{onClick:()=>a("CalendarSyncGate"),className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-3 px-[10px] rounded-md cursor-pointer",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-theme-0 rounded-full p-0.5",children:c.jsx(FM,{className:"size-[15px]"})}),c.jsx("div",{className:"-ml-1.5 bg-theme-0 rounded-full p-0.5",children:c.jsx(zv,{className:"size-[15px]"})})]}),c.jsx("p",{className:"text-base-0",children:"Calendar Sync"})]}),c.jsx(Um,{className:"h-[16px] w-[16px]"})]}),c.jsxs("div",{onClick:()=>a("ScheduleEditor"),className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-3 px-[10px] rounded-md cursor-pointer",children:[c.jsx("span",{children:"Class schedules"}),c.jsx(Um,{className:"size-4"})]}),c.jsxs("div",{onClick:()=>a("AutoPlanSettings"),className:"text-sm flex items-center justify-between hover:bg-theme-1 gap-[60px] py-3 px-[10px] rounded-md cursor-pointer",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{children:"Auto-plan settings"}),c.jsx(GM,{highlight:"assignments_auto_schedule",className:"absolute -top-1 -right-2.5 size-2.5"})]}),c.jsx(Um,{className:"size-4"})]})]})},sie=()=>{const{loadSharedComponent:t,useRerenderListener:e,checkGateBoolean:n}=ut(),{options:r,trigger:s}=e(["google_cal_sync_token","microsoft_cal_sync_token"]),[a,i]=y.useState(!1);y.useEffect(()=>{n("calendarSync").then(({restricted:g})=>{i(g)})},[s]);const o=r.google_cal_sync_token,l=r.microsoft_cal_sync_token,u=o||l,d=!u||o,f=!u||l,m=u&&a;return c.jsxs("button",{onClick:()=>t("CalendarSyncGate",{showCloseButton:!0}),className:"flex items-center gap-1.5 text-sm font-medium text-theme-1 hover:bg-theme-1 hover:text-theme-0 transition-colors px-[10px] rounded-lg py-1 border border-theme",children:[c.jsxs("div",{className:"flex items-center",children:[f&&c.jsx("div",{className:"bg-theme-0 rounded-full p-0.5",children:c.jsx(FM,{className:"size-[13px]"})}),d&&c.jsx("div",{className:`${f?"-ml-1.5":""} bg-theme-0 rounded-full p-0.5`,children:c.jsx(zv,{className:"size-[13px]"})})]}),!u&&c.jsx("p",{className:"text-sm text-theme-0",children:"Sync"}),m&&c.jsx("p",{className:"text-sm text-theme-0",children:"3d"})]})},bx=(t,e)=>t.getMonth()===e.getMonth()&&t.getDate()===e.getDate(),d$e=({item:t})=>{var a;const e=(a=t==null?void 0:t.current)==null?void 0:a.status,{modifyOverrides:n}=zt(),r=i=>{i.stopPropagation(),e==="complete"||e==="graded"?n(t.current.id,{status:"incomplete"}):e==="incomplete"?n(t.current.id,{status:"in-progress"}):e==="in-progress"&&n(t.current.id,{status:"complete"})},s=e==="in-progress"?mE:e==="complete"||e==="graded"?fE:pE;return c.jsx("button",{className:"min-w-max cursor-pointer opacity-75 hover:scale-105 hover:opacity-100 transition-all duration-200 flex items-center gap-[5px] rounded-md py-[1px]",onClick:r,children:c.jsx(s,{className:"size-5 text-theme-link"})})},h$e=({priority:t})=>{if(!t)return null;const e=t===1?Cze:t===2?wze:bze,n=t===1?"Low":t===2?"Medium":t===3?"High":"";return c.jsxs("button",{className:"rounded-md px-[5px] py-[2px] bg-theme-1 flex items-center gap-1",children:[c.jsx(e,{className:"size-3.5 fill-text-theme-0"}),c.jsx("p",{className:"text-xs text-theme-1",children:n})]})},WM=({item:t,onAutoSchedule:e,onEdit:n})=>{var S,w,E,T,_,A,j,D,z,F,R,L,O,H,P,I,U,W,Y,B,Z,le,G,K,te,ie,de,fe,se,ce,ue,oe,Ne,ve,He,nt,Me,$e,Le,ae;const{settings:r}=zt(),s=((S=t==null?void 0:t.current)==null?void 0:S.url)||((w=t==null?void 0:t.original)==null?void 0:w.url);r!=null&&r.assignments_display_off;const{courseData:a}=zr(),{typeLabels:i}=PM(),o={default:"No course",code:"",color:"gray"},l=(a==null?void 0:a[((E=t==null?void 0:t.current)==null?void 0:E.course)||""])||o,u=((T=t==null?void 0:t.current)==null?void 0:T.plannedAt)!==null,d=!((_=r==null?void 0:r.assignments_display_off)!=null&&_.includes("estimated")),f=!((A=r==null?void 0:r.assignments_display_off)!=null&&A.includes("planned")),m=!((j=r==null?void 0:r.assignments_display_off)!=null&&j.includes("linked")),g=!((D=r==null?void 0:r.assignments_display_off)!=null&&D.includes("priority")),x=!((z=r==null?void 0:r.assignments_display_off)!=null&&z.includes("type")),b=!((F=r==null?void 0:r.assignments_display_off)!=null&&F.includes("points")),C=((R=t==null?void 0:t.current)==null?void 0:R.title)||"Untitled";return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"relative z-[1] bg-theme-0 rounded-xl",children:c.jsxs("div",{className:"border-l-[6px] rounded-xl p-[15px]",style:{borderColor:l.color},children:[c.jsxs("div",{className:"flex items-center justify-between gap-[5px]",children:[c.jsxs("div",{className:"flex items-center gap-[5px] min-w-0",children:[c.jsx("div",{className:"h-[10px] w-[10px] rounded-full",style:{background:l.color}}),c.jsx("p",{className:`text-sm truncate ${((L=t==null?void 0:t.current)==null?void 0:L.course)!=((O=t==null?void 0:t.original)==null?void 0:O.course)?"text-theme-link":"text-theme-1"}`,children:l.code||l.default})]}),c.jsx(d$e,{item:t})]}),c.jsx("div",{className:"mt-[5px] max-w-full",children:c.jsxs("div",{className:"flex items-center gap-0 max-w-full min-w-0",children:[c.jsx("a",{className:`group text-base font-medium text-left inline-flex items-center gap-0 max-w-full min-w-0 overflow-hidden hover:underline ${((H=t==null?void 0:t.current)==null?void 0:H.status)==="complete"||((P=t==null?void 0:t.current)==null?void 0:P.status)==="graded"?"line-through":((I=t==null?void 0:t.current)==null?void 0:I.title)!==((U=t==null?void 0:t.original)==null?void 0:U.title)?"text-theme-link":"text-theme-0"}`,href:s||void 0,target:s?"_blank":void 0,rel:s?"noreferrer":void 0,onClick:pe=>{s&&pe.stopPropagation()},children:c.jsx("span",{className:"truncate min-w-0",children:C})}),c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx("button",{type:"button",className:"flex-shrink-0 h-7 w-7 rounded-md text-theme-1 hover:bg-theme-1 hover:text-theme-0 transition-colors flex items-center justify-center",onClick:pe=>{pe.stopPropagation(),n()},"aria-label":"Edit assignment",children:c.jsx(Yb,{className:"h-[14px] w-[14px]"})})}),c.jsx(va,{className:"text-xs",children:c.jsx("span",{children:"Edit assignment"})})]})]})}),c.jsxs("div",{className:"flex items-center gap-[5px] text-xs mt-[5px]",children:[g&&c.jsx(h$e,{priority:(W=t==null?void 0:t.current)==null?void 0:W.priority}),x&&c.jsx("p",{className:`rounded-md px-[5px] py-[2px] bg-theme-1 ${((Y=t==null?void 0:t.current)==null?void 0:Y.type)!==((B=t==null?void 0:t.original)==null?void 0:B.type)?"text-theme-link":"text-theme-1"}`,children:i[(Z=t==null?void 0:t.current)==null?void 0:Z.type]||"Other"}),b&&(((le=t==null?void 0:t.current)==null?void 0:le.points)||((G=t==null?void 0:t.current)==null?void 0:G.points)===0)&&c.jsxs("p",{className:`rounded-md px-[5px] py-[2px] bg-theme-1 ${((K=t==null?void 0:t.current)==null?void 0:K.points)!==((te=t==null?void 0:t.original)==null?void 0:te.points)?"text-theme-link":"text-theme-1"}`,children:[(((ie=t==null?void 0:t.current)==null?void 0:ie.score)!==null?((de=t==null?void 0:t.current)==null?void 0:de.score)+"/":"")+((fe=t==null?void 0:t.current)==null?void 0:fe.points),"pts"]})]})]})}),c.jsxs("div",{className:"relative z-[1] px-[10px] py-[5px] flex justify-between",children:[c.jsxs("div",{className:"flex items-center gap-[15px] text-theme-1",children:[!u&&c.jsxs("button",{onClick:pe=>{pe.stopPropagation(),e(pe)},className:"flex items-center gap-[5px] hover:bg-theme-1 rounded-md px-[5px] py-[2px] cursor-pointer text-theme-link",children:[c.jsx(Nke,{className:"h-[16px] w-[16px]"}),c.jsx("p",{className:"text-sm font-semibold",children:"Auto Plan"})]}),u&&d&&c.jsxs("div",{className:`flex items-center gap-[5px] hover:bg-theme-1 rounded-md ${((se=t==null?void 0:t.current)==null?void 0:se.duration)!==((ce=t==null?void 0:t.original)==null?void 0:ce.duration)?"text-theme-link":"text-theme-1"}`,children:[c.jsx(k1,{className:"h-[16px] w-[16px] text-inherit"}),c.jsx("p",{className:"text-sm",children:S$e(((ue=t==null?void 0:t.current)==null?void 0:ue.duration)||Qa.duration)})]}),u&&f&&c.jsxs("p",{className:`text-sm ${((oe=t==null?void 0:t.current)==null?void 0:oe.plannedAt)!==((Ne=t==null?void 0:t.original)==null?void 0:Ne.plannedAt)?"text-theme-link":"text-theme-1"}`,children:["@ ",l2e((ve=t==null?void 0:t.current)==null?void 0:ve.plannedAt)]}),m&&(((He=t==null?void 0:t.current)==null?void 0:He.numLinks)||0)>0&&c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx(c_e,{className:"h-[16px] w-[16px]"}),c.jsx("p",{className:"text-sm",children:((nt=t==null?void 0:t.current)==null?void 0:nt.numLinks)||0})]})]}),c.jsxs("p",{className:`text-sm rounded-md px-[5px] py-[2px] font-semibold ${((Me=t==null?void 0:t.current)==null?void 0:Me.due)!==(($e=t==null?void 0:t.original)==null?void 0:$e.due)?"text-theme-link":"text-theme-1"}`,children:["Due ",(Le=t==null?void 0:t.current)!=null&&Le.due?k$e((ae=t==null?void 0:t.current)==null?void 0:ae.due):"No due date"]})]})]})},f$e=({item:t})=>{var d,f,m,g,x,b,C,S;const{autoScheduleTasks:e,setCreatorAssignment:n}=zt(),{checkGate:r,loadSharedComponent:s}=ut(),a=y.useCallback(async w=>{w.stopPropagation(),!(await r("assignments_auto_schedule")).restricted&&e([t])},[t,e]),{attributes:i,listeners:o,setNodeRef:l,isDragging:u}=Kx({id:"due_item_"+((d=t==null?void 0:t.current)==null?void 0:d.id),data:{type:"due-item",planner:{id:(f=t==null?void 0:t.current)==null?void 0:f.id,title:(m=t==null?void 0:t.current)==null?void 0:m.title,course:(g=t==null?void 0:t.current)==null?void 0:g.course,duration:((x=t==null?void 0:t.current)==null?void 0:x.duration)||Qa.duration,plannedAt:((b=t==null?void 0:t.current)==null?void 0:b.plannedAt)??null}}});return c.jsxs("div",{ref:l,...o,...i,className:`flex flex-col w-full rounded-[15px] p-[1px] pl-[0px] relative overflow-hidden cursor-grab hover:brightness-95 transition-all duration-200 ${((C=t==null?void 0:t.current)==null?void 0:C.status)==="complete"||((S=t==null?void 0:t.current)==null?void 0:S.status)==="graded"?"opacity-50":""} ${u?"cursor-move opacity-50":""}`,onClick:()=>{var E,T;const w=((E=t==null?void 0:t.current)==null?void 0:E.url)||((T=t==null?void 0:t.original)==null?void 0:T.url);w?window.open(w,"_blank","noopener,noreferrer"):s("AssignmentCreator",{assignment:t})},children:[c.jsx(WM,{item:t,onAutoSchedule:a,onEdit:()=>s("AssignmentCreator",{assignment:t})}),c.jsx("div",{className:"absolute top-0 right-0 h-full w-full z-0 bg-theme-link opacity-[.22]"})]})},m$e=({date:t,items:e,isBlurred:n})=>{const r=y.useMemo(()=>e.map(a=>c.jsx(f$e,{item:a},a.current.id)),[e]),s=new Date;return s.setHours(0,0,0,0),c.jsxs("div",{className:`w-[var(--due-block-width)] flex flex-col gap-[10px] relative ${n?"pointer-events-none":""}`,children:[c.jsx(E$e,{date:t,diff:rwe(t,s)}),c.jsx(p$e,{date:t}),c.jsx("div",{className:`flex flex-col gap-[10px] relative ${n?"blur-xs pointer-events-none":""}`,children:r})]})},p$e=({date:t})=>{const{loadSharedComponent:e}=ut();return c.jsxs("button",{className:"hover:bg-theme-1 transition-background duration-200 w-full border-theme font-medium border flex items-center justify-center gap-[10px] rounded-xl px-[10px] py-[5px] cursor-pointer",onClick:()=>{const n=new Date(t);n.setHours(23,59,0,0),e("AssignmentCreator",{initialDate:n})},children:[c.jsx(Yd,{className:"h-[16px] w-[16px]"}),c.jsx("p",{children:"Add Task"})]})},g$e=({offset:t,isRestrictedUser:e})=>{const{startDate:n,dueItems:r}=zt();console.log("[DueColumns] dueItems",r);const s=y.useMemo(()=>{const i=new Date;return i.setHours(0,0,0,0),i},[]),a=y.useMemo(()=>ir(s,14),[s]);return y.useMemo(()=>Array.from({length:7},(i,o)=>{const l=ir(n,o+t);l.setHours(0,0,0,0);const u=r.filter(f=>{const m=f.current,g=new Date(m.due);return g.getMonth()===l.getMonth()&&g.getDate()===l.getDate()}),d=e&&l>=a;return c.jsx(m$e,{date:l,items:u,isBlurred:d},l.toISOString())}),[n,r,t,e,a])},v$e=y.memo(({label:t,onClick:e,checked:n})=>c.jsx("button",{onClick:e,className:`text-sm rounded-full px-[10px] py-[2px] transition-all duration-200 hover:bg-theme-1 ${n?"bg-theme-1":"text-theme-1"}`,children:c.jsx("p",{children:t})})),cq={type:"Assignment type",points:"Points",estimated:"Estimated time",planned:"Planned at",linked:"Linked items"},y$e=()=>{const{settings:t,updateSettings:e}=zt(),n=s=>{var a,i;(a=t==null?void 0:t.assignments_display_off)!=null&&a.includes(s)?e({assignments_display_off:(i=t==null?void 0:t.assignments_display_off)==null?void 0:i.filter(o=>o!==s)}):e({assignments_display_off:[...(t==null?void 0:t.assignments_display_off)||[],s]})},r=()=>Object.keys(cq).map(s=>{var a;return c.jsx(v$e,{label:cq[s],checked:!((a=t==null?void 0:t.assignments_display_off)!=null&&a.includes(s)),onClick:()=>n(s)},s)});return c.jsx("div",{className:"flex items-center gap-[5px] flex-wrap",children:r()})},x$e=()=>{const{portal:t}=zt(),[e,n]=y.useState(!1),r=y.useRef(0),s=a=>{const i=Date.now();i-r.current<100||(r.current=i,n(a))};return c.jsxs(zo,{open:e,onOpenChange:s,children:[c.jsx($o,{asChild:!0,children:c.jsxs("button",{className:"text-sm flex items-center gap-[5px] px-[10px] rounded-lg py-1 text-theme-0 border border-theme cursor-pointer hover:bg-theme-1 transition-all duration-200",children:[c.jsx(T_e,{className:"h-[16px] w-[16px]"}),c.jsx("span",{className:"font-medium",children:"Display"})]})}),c.jsxs(Uo,{className:"w-[240px] p-[10px]",children:[c.jsx("p",{className:"text-sm font-semibold mb-[5px]",children:"Display properties"}),c.jsx(y$e,{})]})]})},b$e=()=>{const{loadSharedComponent:t,useRerenderListener:e}=ut(),{options:n}=e(["google_calendars"]);return Object.keys((n==null?void 0:n.google_calendars)||{}).length>0,c.jsxs("div",{className:"flex flex-col border-b border-theme",children:[c.jsxs("div",{className:"h-[50px] px-4 flex items-center gap-4",children:[c.jsx(Z$e,{}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(xze,{}),c.jsx(x$e,{}),c.jsx(sie,{})]})]}),c.jsx(fze,{})]})},w$e=()=>{const t=OM({id:"due-columns",data:{type:"due-calendar-column"}}),{updateCoverage:e}=zt(),{setNodeRef:n}=t,[r,s]=y.useState(0),[a,i]=y.useState(1/0),{dueBlockWidth:o,startDate:l,loading:u}=zt(),{planType:d}=wa(),{loadAuthModal:f}=ut(),m=20,g=o+m,x=Math.floor(Math.abs(r)/g),b=x+7,C=d==="free"||d==="style",S=w=>{const E=w.target,T=E.scrollLeft;s(_=>u&&T>a?(E.scrollLeft=a,a):T)};return y.useEffect(()=>{b%7===0&&(e(l,ir(l,b)),i(b*g-m))},[b]),y.useEffect(()=>{u||i(1/0)},[u]),c.jsxs("div",{className:"flex flex-col flex-1 min-h-0 min-w-0 relative overflow-hidden",children:[c.jsx(b$e,{}),c.jsx("div",{ref:n,className:"min-w-0 flex-1 ml-[20px] overflow-auto relative",onScroll:S,children:c.jsxs("div",{className:"px-[10px] relative",style:{width:`${b*g-m}px`},children:[c.jsx("div",{className:"absolute flex gap-[20px]",style:{left:`${x*g}px`},children:c.jsx(g$e,{offset:x,isRestrictedUser:C})}),c.jsx(Iae,{})]})}),c.jsx(Wo,{children:C&&r>=11*g&&c.jsx(pa.div,{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:c.jsx("div",{className:"pointer-events-auto w-[600px] max-h-[460px] overflow-y-auto bg-white rounded-xl p-[15px] shadow-2xl"})})})]})},C$e=()=>{const{view:t}=zt();return t!=="due"?null:c.jsxs("div",{className:"flex flex-1 min-h-0",children:[c.jsx(w$e,{}),c.jsx(N$e,{})]})},S$e=t=>{const e=Math.floor(t/60),n=t%60;return`${e>0?`${e}h`:""}${n>0?` ${n}m`:""}`},k$e=t=>{const e=new Date(t),n=iwe(e,new Date),r=n<0,s=Math.abs(n),a=Math.floor(s/1440);if(a>0)return`${a}d${r?" ago":""}`;const i=Math.floor(s%1440/60);return i>0?`${i}h${r?" ago":""}`:`${s%60}m${r?" ago":""}`},E$e=y.memo(({date:t,diff:e})=>c.jsxs("div",{className:"flex gap-[5px] items-center py-[10px] text-lg sticky top-0 left-0 bg-theme-0 z-5",style:{background:"linear-gradient(var(--bcbackground-0, #fff) 66%, transparent)"},children:[c.jsx("p",{className:`font-semibold ${e===0?"text-theme-link":"text-theme-0"}`,children:e===0?"Due Today":e===1?"Tomorrow":Sr(t,"eee")}),c.jsx("p",{className:"text-theme-1",children:Sr(t,"MMM d")})]})),_$e=()=>{const{miniCalDate:t,settings:e,blockWidth:n,overrides:r,setScrollToHour:s,dueItems:a,planned:i,blockHeight:o}=zt(),{schedule:l}=zr();console.log("planned due calendar",i);const u=y.useMemo(()=>{const C=new Map;return a.forEach(S=>{var E,T,_;const w=(_=((E=S==null?void 0:S.current)==null?void 0:E.id)??((T=S==null?void 0:S.original)==null?void 0:T.id))==null?void 0:_.toString();w&&C.set(w,S)}),C},[a]),d=y.useMemo(()=>ou(t),[t]),f=y.useMemo(()=>ir(d,7),[d]),{events:m}=mw(d,f),g=new Date;g.setHours(0,0,0,0);const{columns:x,minHour:b}=y.useMemo(()=>{let C=1/0;return{columns:Array.from({length:e.assignments_minical_days},(w,E)=>{const T=ir(t,E),_=Object.keys(i).reduce((z,F)=>{var P,I,U,W,Y,B,Z,le,G,K;const R=i[F];if(console.log("item",R),!R.plannedAt)return z;const L=new Date(R.plannedAt);if(console.log("itemDate",L),!bx(L,T))return z;L.getHours()<C&&(C=L.getHours());const O=u.get(F),H=(O==null?void 0:O.current)||(O==null?void 0:O.original)||{};return z.push({id:F,...i[F],course:((P=i[F])==null?void 0:P.course)??H.course,title:((I=i[F])==null?void 0:I.title)??H.title,status:((U=i[F])==null?void 0:U.status)??H.status,duration:((W=i[F])==null?void 0:W.duration)??H.duration??Qa.duration,...(Y=r[F])!=null&&Y.title?{title:(B=r[F])==null?void 0:B.title}:{},...(Z=r[F])!=null&&Z.course?{course:(le=r[F])==null?void 0:le.course}:{},...(G=r[F])!=null&&G.status?{status:(K=r[F])==null?void 0:K.status}:{}}),z},[]),A=a.filter(z=>{const F=new Date(z.current.due);return bx(F,T)}),j=(l==null?void 0:l[T.getDay()])||[],D=m.filter(z=>bx(z.startDate,T)&&!z.isAllDay);return D.forEach(z=>{const F=new Date(z.plannedAt).getHours();F<C&&(C=F)}),c.jsx(zM,{start:T,today:bx(g,T),items:_||[],dueItems:A||[],calendarEvents:D||[],scheduleItems:j||[],compactDuePopover:!0,showTimeIndicator:!0},T.toISOString())}),minHour:C}},[t,e.assignments_minical_days,i,l,m,r,u]);return y.useEffect(()=>{s(b)},[b,s]),c.jsx("div",{className:"flex h-full",style:{width:`${e.assignments_minical_days*n}px`},children:c.jsxs("div",{className:"absolute flex h-full overflow-hidden",style:{maxHeight:`${24*o+52}px`},children:[c.jsx(LM,{}),c.jsx(T$e,{}),x]})})},T$e=()=>{const{settings:t,blockWidth:e}=zt(),n=Array.from({length:t.assignments_minical_days},(r,s)=>c.jsx("div",{className:"absolute w-[1px] h-full bg-theme-border",style:{left:(s+1)*e+"px"}},"row-line-"+s));return c.jsx("div",{className:"absolute top-0 left-0 w-full h-full z-[1]",children:n})},A$e=y.memo(()=>{const{miniCalDate:t}=zt();return c.jsx("div",{className:"flex items-center gap-[5px]",children:c.jsx("p",{className:"text-sm font-medium",children:ic(t,"MMM d")})})}),N$e=()=>{const{scrollPos:t,setMiniCalDate:e,setScrollToHour:n,scrollToHour:r,scrollArea:s,miniCalDate:a,blockHeight:i,portal:o,settings:l}=zt(),[u,d]=y.useState(!1),[f,m]=y.useState(!1),[g,x]=y.useState(!1),b=y.useRef(0),C=y.useRef(null),S=y.useRef(null),[w,E]=y.useState(null),{updateOptions:T,settings:_}=ut(),A=y.useMemo(()=>{const P=new Date;return a.getFullYear()===P.getFullYear()&&a.getMonth()===P.getMonth()&&a.getDate()===P.getDate()},[a]),j=y.useCallback(()=>{const P=new Date;P.setHours(0,0,0,0),e(P)},[e]);y.useEffect(()=>{_.assignments_sidebar_collapsed!==void 0&&d(_.assignments_sidebar_collapsed),m(!0)},[]);const D=y.useCallback(()=>{d(P=>{const I=!P;return T({assignments_sidebar_collapsed:I}),I})},[]),z=P=>{const I=Date.now();I-b.current<100||(b.current=I,x(P))},F=y.useCallback(P=>{const I=P.target;t.current={top:I.scrollTop,left:I.scrollLeft}},[t]),R=y.useCallback(()=>{const P=S.current;if(!P||!Number.isFinite(i)||i<=0)return;const I=new Date,U=I.getHours()+I.getMinutes()/60-2,W=Math.max(0,U*i),Y=Math.max(0,P.scrollHeight-P.clientHeight),B=Math.min(Y,W);P.scrollTop=B,t.current={top:B,left:P.scrollLeft}},[i,t]);y.useEffect(()=>{if(!f||!S.current||!Number.isFinite(i)||i<=0)return;const P=`day-${a.toDateString()}`;if(C.current===P)return;C.current=P;const I=new ResizeObserver(()=>{R()});return S.current&&I.observe(S.current),()=>{I.disconnect()}},[i,a,R,f]);const[L,O]=y.useState(0),H=P=>{const I=P.currentTarget.getBoundingClientRect();O(P.clientY-I.top)};return f?c.jsxs("div",{className:"flex flex-col min-h-0 border-l border-theme relative group/sidebar",style:{width:u?"50px":"auto",transition:"width 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[c.jsxs("div",{className:"absolute left-0 top-0 h-full w-[12px] cursor-pointer flex items-center justify-center z-[70] group/trigger",onClick:D,onMouseMove:H,children:[c.jsx("div",{className:"h-full w-[2px] bg-theme-border group-hover/trigger:bg-theme-link group-hover/trigger:w-[3px] transition-all duration-200 absolute left-0 top-0"}),c.jsx("div",{className:"absolute right-[100%] mr-2 bg-[#1F1F1F] text-white border border-white text-xs font-medium px-3 py-1.5 rounded-md shadow-xl opacity-0 group-hover/trigger:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-[100]",style:{top:`${L}px`,transform:"translateY(-50%)"},children:u?"Expand Plan My Day":"Collapse Plan My Day"})]}),c.jsxs("div",{className:`flex-1 flex flex-col min-w-0 overflow-hidden ${u?"opacity-0 pointer-events-none":"opacity-100"} transition-opacity duration-200`,children:[c.jsx("div",{className:"flex items-center justify-between border-b border-theme p-[10px] h-[50px] overflow-hidden shrink-0 pl-[20px]",children:c.jsxs("div",{className:"flex items-center justify-between w-full",children:[c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsxs(zo,{open:g,onOpenChange:z,children:[c.jsx($o,{asChild:!0,children:c.jsxs("div",{className:"flex items-center gap-[5px] cursor-pointer",children:[c.jsx("p",{className:"text-sm font-semibold whitespace-nowrap",children:"Plan My Day"}),c.jsx(E1,{className:"h-[16px] w-[16px]"})]})}),c.jsx(Uo,{children:c.jsx(u$e,{})})]}),!A&&c.jsx("button",{onClick:j,className:"px-[8px] rounded-full py-[2px] text-xs text-theme-0 border border-theme cursor-pointer hover:bg-theme-1 transition-all duration-200",children:"Now"})]}),c.jsx("div",{className:"flex items-center gap-[5px]",children:c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx("button",{className:"cursor-pointer hover:bg-theme-1 rounded-md p-[2px] transition-all duration-200",onClick:()=>{const P=gS(a,l.assignments_minical_days||1);e(P)},children:c.jsx(Kd,{className:"h-[18px] w-[18px]"})}),c.jsx(A$e,{}),c.jsx("button",{className:"cursor-pointer hover:bg-theme-1 rounded-md p-[2px] transition-all duration-200",onClick:()=>{const P=ir(a,l.assignments_minical_days||1);e(P)},children:c.jsx(pc,{className:"h-[18px] w-[18px]"})})]})})]})}),c.jsx(Wo,{initial:!1,children:!u&&c.jsx("div",{ref:S,className:"flex-1 min-h-0 relative overflow-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},onScroll:F,children:c.jsxs("div",{className:"grid grid-cols-[auto_1fr] relative w-full",children:[c.jsx("div",{className:"bg-theme-0 border-b border-theme sticky top-0 left-0 z-[11]"}),c.jsx(D$e,{}),c.jsx("div",{className:"col-span-2 sticky top-[40px] z-30",children:c.jsx(j$e,{})}),c.jsx("div",{className:"sticky top-0 left-0 bg-theme-0 z-10 border-r border-theme",children:c.jsx(BM,{})}),c.jsx(_$e,{})]})})})]})]}):null},j$e=()=>{const{miniCalDate:t,dueItems:e}=zt(),{courseData:n}=zr(),{loadSharedComponent:r}=ut(),s=y.useMemo(()=>(e||[]).filter(i=>{var l;const o=(l=i==null?void 0:i.current)!=null&&l.due?new Date(i.current.due):null;return o?xd(o,t):!1}).sort((i,o)=>{const l=new Date(i.current.due).getTime(),u=new Date(o.current.due).getTime();return l-u}),[e,t]),a=(i,o)=>{var f,m,g,x,b;const l=((m=n==null?void 0:n[((f=i.current)==null?void 0:f.course)||""])==null?void 0:m.color)||"gray",u=(g=i==null?void 0:i.current)!=null&&g.due?new Date(i.current.due):null;let d="rgba(0,0,0,0.04)";try{d=Wr(l).alpha(.14).string()}catch{}return c.jsxs("button",{className:"flex items-center gap-[5px] rounded-md px-[7px] py-[5px] border border-theme bg-theme-0 text-theme-0 text-left w-full min-w-0 cursor-pointer hover:brightness-95 transition-all duration-150",style:{borderColor:l,background:d},onClick:()=>r("AssignmentCreator",{assignment:i}),children:[c.jsx("span",{className:"h-[9px] w-[9px] rounded-full flex-shrink-0",style:{background:l}}),c.jsx("span",{className:"flex-1 min-w-0 font-semibold truncate text-[12.5px] leading-[14.5px]",children:((x=i.current)==null?void 0:x.title)||"Due item"}),u&&c.jsx("span",{className:"text-[10.5px] leading-[12.5px] text-theme-1 whitespace-nowrap",children:ic(u,"h:mmaaa")})]},`mini-due-${((b=i.current)==null?void 0:b.id)||o}`)};return c.jsxs("div",{className:"border-b border-theme bg-theme-0 px-[10px] py-[8px]",children:[c.jsxs("div",{className:"flex items-center gap-[8px] mb-[6px]",children:[c.jsx("p",{className:"text-sm font-semibold",children:"Due"}),c.jsxs("p",{className:"text-xs text-theme-1",children:[s.length," ",s.length===1?"item":"items"]})]}),c.jsx("div",{className:"flex flex-col gap-[6px]",children:s.length?s.map(a):c.jsx("div",{className:"rounded-md border border-dashed border-theme px-[8px] py-[6px] text-xs text-theme-1",children:"Nothing due today"})})]})},D$e=()=>{const{miniCalDate:t,settings:e}=zt(),n=new Date,r=y.useMemo(()=>{const s=[];return Array.from({length:e.assignments_minical_days},(i,o)=>{const l=ir(t,o);return s.push(l.getDate()),c.jsx(Mae,{date:l,today:bx(l,n)},o)})},[t,n]);return c.jsx("div",{className:"sticky top-0 left-0 bg-theme-0 border-b border-theme h-[40px] bg-theme-0 z-20",children:c.jsx("div",{className:"flex absolute top-0 min-w-0 max-w-full h-full",children:r})})},R$e=()=>{const{settings:t,updateSettings:e,portal:n}=zt(),r=i=>i||"week",s=async i=>{e({assignments_calendar_view_type:i})},a=(t==null?void 0:t.assignments_calendar_view_type)||"week";return c.jsxs(jo,{value:r(a),onValueChange:i=>s(i),children:[c.jsx(Do,{size:"sm",variant:"theme",className:"w-fit px-[10px] h-[30px] text-xs",children:c.jsx(Td,{})}),c.jsxs(Ro,{variant:"theme",container:n,children:[c.jsx(Xt,{variant:"theme",value:"day",children:"Day"}),c.jsx(Xt,{variant:"theme",value:"5day",children:"5 Days"}),c.jsx(Xt,{variant:"theme",value:"week",children:"Week"}),c.jsx(Xt,{variant:"theme",value:"month",children:"Month"})]})]})},M$e=({label:t,className:e})=>{const{settings:n}=zt(),[r,s]=y.useState(!1),[a,i]=y.useState(!1),o=y.useRef(0),l=(n==null?void 0:n.assignments_calendar_view_type)||"week",u=()=>l==="day"?"Plan My Day":l==="month"?"Plan My Month":l==="5day"?"Plan My 5 Days":"Plan My Week",d=m=>{const g=Date.now();g-o.current<100||(o.current=g,s(m))},f=t||u();return c.jsxs(zo,{open:r,onOpenChange:d,children:[c.jsx($o,{asChild:!0,children:c.jsxs("button",{className:`flex items-center gap-1.5 cursor-pointer hover:bg-theme-1 rounded-md px-2 py-1 transition-colors ${e||""}`,children:[c.jsx("p",{className:"text-sm font-semibold",children:f}),c.jsx(E1,{className:"size-4 text-theme-1"})]})}),c.jsx(Uo,{className:`p-1 transition-all duration-200 ${a?"opacity-0 pointer-events-none":""}`,style:a?{visibility:"hidden"}:void 0,children:c.jsx(c$e,{onDialogOpen:()=>i(!0),onDialogClose:()=>i(!1)})})]})},MS=300,aie=y.memo(({selectedDate:t,onSelectDate:e})=>{const{settings:n}=zt(),[r,s]=y.useState(o4(t)),a=y.useMemo(()=>{const b=new Date;return b.setHours(0,0,0,0),b},[]);y.useEffect(()=>{const b=o4(t);Lz(b,r)||s(b)},[t]);const i=y.useMemo(()=>gf(r,{weekStartsOn:0}),[r]),o=y.useMemo(()=>Array.from({length:42},(b,C)=>ir(i,C)),[i]),l=y.useCallback(b=>{const C=new Date(b);C.setHours(0,0,0,0),e(C)},[e]),u=Sr(r,"MMMM yyyy"),d=["S","M","T","W","T","F","S"],f=(n==null?void 0:n.assignments_calendar_view_type)||"week",m=(n==null?void 0:n.assignments_week_days)||7,g=f==="5day"?5:m,x=y.useMemo(()=>{if(f!=="week"&&f!=="5day")return null;const b=new Date(t);return b.setHours(0,0,0,0),{start:b,end:ir(b,Math.max(0,g-1))}},[f,g,t]);return c.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",style:{width:MS},children:[c.jsx(R$e,{}),c.jsx(sie,{}),c.jsx(M$e,{label:"Planner Settings",className:"whitespace-nowrap"})]}),c.jsxs("div",{className:"flex items-center justify-between pt-1",style:{width:MS},children:[c.jsxs("div",{className:"flex items-center gap-2 pl-3",children:[c.jsx("p",{className:"text-sm font-semibold text-theme-0",children:u}),c.jsx("button",{className:"text-xs font-medium text-theme-0 border border-theme rounded-full px-3 py-1 bg-theme-0 hover:bg-theme-1 transition-colors",onClick:()=>l(a),children:"Today"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{className:"h-7 w-7 rounded-md text-theme-0 hover:bg-theme-1 cursor-pointer grid place-items-center",onClick:()=>s(s4(r,-1)),"aria-label":"Previous month",children:c.jsx(xv,{className:"h-4 w-4"})}),c.jsx("button",{className:"h-7 w-7 rounded-md text-theme-0 hover:bg-theme-1 cursor-pointer grid place-items-center",onClick:()=>s(s4(r,1)),"aria-label":"Next month",children:c.jsx(dk,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"grid grid-cols-7 gap-[8px] text-[12px]",style:{width:MS},children:[d.map(b=>c.jsx("span",{className:"text-center font-medium text-theme-1",children:b},b)),o.map(b=>{const C=Lz(b,r),S=xd(b,t),w=xd(b,a),E=!!x&&i2e(b,x),T="h-7 w-7 rounded-full grid place-items-center cursor-pointer transition-colors justify-self-center",_=S?"bg-theme-link text-white font-semibold":[C?"text-theme-0 hover:bg-theme-1":"text-theme-1 hover:bg-theme-1/50",E?"bg-blue-300/40":"",w?"border border-theme":""].join(" ").trim();return c.jsx("button",{className:`${T} ${_}`,onClick:()=>l(b),children:Sr(b,"d")},b.toISOString())})]})]})});aie.displayName="MiniMonthPicker";const I$e=({tasks:t})=>{const{autoScheduleTasks:e,undoAutoPlannedAssignments:n}=zt(),{restrictedActionCheck:r,openRestrictedDialog:s,withEventCooldown:a,trackEvent:i,checkGate:o}=ut(),[l,u]=y.useState(null),[d,f]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=null)},[]);const g=y.useCallback(()=>{m.current&&(window.clearTimeout(m.current),m.current=null),u(null)},[]),x=async C=>{if(d)return;const{restricted:S}=await o("assignments_auto_schedule");if(!S){u({}),m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{u(null),m.current=null},5e3),f(!0);try{const w=t.filter(_=>{var A;return((A=_==null?void 0:_.current)==null?void 0:A.plannedAt)===null}),E=await e(w);Object.keys(E||{}).length>0?m.current&&u(E):g()}finally{f(!1)}a("assignments_auto_plan_clicked",async()=>{await i("assignments_auto_plan_clicked")},30)}},b=async()=>{if(!(!l||d)){f(!0);try{await n(l)}finally{f(!1),g()}}};return c.jsxs("div",{className:"flex items-center gap-[10px] w-full",children:[c.jsx("button",{onClick:l?b:x,disabled:d,className:"text-sm cursor-pointer py-[10px] bg-theme-1 rounded-full border border-theme flex items-center justify-center flex-1 hover:bg-theme-2 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:c.jsx(Wo,{mode:"wait",initial:!1,children:c.jsx(pa.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.14,ease:"easeInOut"},children:l?"Undo":"Auto Plan All"},l?"undo":"auto")})}),c.jsx(rie,{trigger:c.jsx("button",{className:"cursor-pointer hover:bg-theme-1 transition-colors rounded-full p-[10px] bg-theme-1 border border-theme",children:c.jsx(E1,{className:"h-[16px] w-[16px]"})})})]})},O$e=y.memo(({item:t})=>{var d,f,m,g,x,b,C,S;const{loadSharedComponent:e,checkGate:n}=ut(),{autoScheduleTasks:r}=zt(),s=y.useCallback(async w=>{w.stopPropagation(),!(await n("assignments_auto_schedule")).restricted&&r([t])},[t,r,n]),{attributes:a,listeners:i,setNodeRef:o,isDragging:l}=Kx({id:"unassigned_task_"+t.current.id,data:{type:"unassigned-task",planner:{id:(d=t==null?void 0:t.current)==null?void 0:d.id,title:(f=t==null?void 0:t.current)==null?void 0:f.title,course:(m=t==null?void 0:t.current)==null?void 0:m.course,duration:((g=t==null?void 0:t.current)==null?void 0:g.duration)||60,plannedAt:((x=t==null?void 0:t.current)==null?void 0:x.plannedAt)??null,status:((b=t==null?void 0:t.current)==null?void 0:b.status)??"incomplete"}}}),u=((C=t==null?void 0:t.current)==null?void 0:C.url)||((S=t==null?void 0:t.original)==null?void 0:S.url);return c.jsxs("div",{onClick:()=>{u?window.open(u,"_blank","noopener,noreferrer"):e("AssignmentCreator",{assignment:t})},ref:o,...i,...a,className:`p-[1px] pl-0 rounded-xl bg-theme-1 flex flex-col relative overflow-hidden ${l?"opacity-50":""}`,children:[c.jsx(WM,{item:t,onAutoSchedule:s,onEdit:()=>e("AssignmentCreator",{assignment:t})}),c.jsx("div",{className:"absolute top-0 right-0 h-full w-full z-0 bg-theme-link opacity-[.22]"})]})}),wx=(t,e)=>t.getMonth()===e.getMonth()&&t.getDate()===e.getDate(),P$e=({scrollLeft:t})=>{const{startDate:e,blockWidth:n,settings:r}=zt(),s=new Date,a=(r==null?void 0:r.assignments_calendar_view_type)||"week",i=(r==null?void 0:r.assignments_week_days)||7,o=a==="5day"?5:i,l=Math.floor(Math.abs(t)/n),u=y.useMemo(()=>{const d=[];return Array.from({length:o},(m,g)=>{const x=ir(e,g+l);return d.push(x.getDate()),c.jsx(Mae,{date:x,today:wx(x,s)},g)})},[e,s,l,o]);return c.jsx("div",{className:"flex h-full absolute top-0 z-20 min-w-0 max-w-full",style:{left:`${l*n}px`},children:u})},iie=({dates:t,takeHomeMap:e,blockWidth:n,offsetLeft:r=0})=>{const{courseData:s}=zr(),{loadSharedComponent:a}=ut(),i=(o,l)=>{var m,g,x,b,C,S,w,E;const u=((g=s==null?void 0:s[(m=o==null?void 0:o.current)==null?void 0:m.course])==null?void 0:g.color)||"gray",d=(x=o==null?void 0:o.current)!=null&&x.due?Sr(new Date(o.current.due),"h:mmaaa"):"",f=((b=o==null?void 0:o.current)==null?void 0:b.status)==="complete"||((C=o==null?void 0:o.current)==null?void 0:C.status)==="graded";return c.jsxs("button",{className:"flex items-center justify-between gap-[6px] rounded-[8px] px-[8px] py-[3px] border text-theme-0 text-left w-full min-w-0 cursor-pointer hover:brightness-95 transition-all duration-150 text-[12px] leading-[16px] bg-theme-1",style:{borderColor:u},onClick:()=>a("AssignmentCreator",{assignment:o}),children:[c.jsx("span",{className:"h-[10px] w-[10px] rounded-full flex-shrink-0",style:{background:u}}),c.jsx("span",{className:`flex-1 min-w-0 font-semibold truncate ${f?"line-through":""}`,children:((S=o==null?void 0:o.current)==null?void 0:S.title)||"Due item"}),d&&c.jsx("span",{className:"text-[11px] text-theme-1 whitespace-nowrap",children:d})]},(((w=o==null?void 0:o.current)==null?void 0:w.id)||((E=o==null?void 0:o.current)==null?void 0:E.title)||"due-item")+l)};return c.jsx("div",{className:"absolute top-0 bottom-0 bg-theme-0 z-25",style:{left:`${r}px`,width:`${t.length*n}px`},children:c.jsx("div",{className:"flex h-full",children:t.map(o=>{const l=o.toISOString(),u=e.get(l)||[];return c.jsx("div",{className:"px-2 py-2 flex flex-col gap-[4px]",style:{width:`${n}px`},children:u.map((d,f)=>i(d,`${l}-${f}`))},l)})})})},vd=40,t5=32,oie=26,lie=4,cie=6,F$e=40,B$e=16+F$e,L$e=()=>{const[t,e]=y.useState(()=>typeof window<"u"?window.innerWidth:1400);y.useEffect(()=>{const s=()=>e(window.innerWidth);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const n=MS+B$e,r=y.useMemo(()=>{const s=n,a=Math.max(s,360),i=t*.2;return Math.max(s,Math.min(i,a))},[n,t]);return{viewportWidth:t,rightPanelWidth:r,sidebarMinWidth:n}},z$e=()=>{const{startDate:t,planned:e,overrides:n,dueItems:r,scrollArea:s,scrollPos:a,portal:i}=zt(),{schedule:o}=zr(),l=y.useMemo(()=>{const w=new Map;return r.forEach(E=>{var _,A,j;const T=(j=((_=E==null?void 0:E.current)==null?void 0:_.id)??((A=E==null?void 0:E.original)==null?void 0:A.id))==null?void 0:j.toString();T&&w.set(T,E)}),w},[r]),u=(w,E)=>{const T=l.get(w),_=(T==null?void 0:T.current)||(T==null?void 0:T.original)||{};return{id:w,...E,course:E.course??_.course,title:E.title??_.title,status:E.status??_.status,duration:E.duration??_.duration??Qa.duration}},d=y.useMemo(()=>o4(t),[t]),f=y.useMemo(()=>{const w=new Date(d);return w.setDate(w.getDate()-w.getDay()),w},[d]),m=y.useMemo(()=>ir(f,42),[f]),{events:g}=mw(f,m),x=new Date;x.setHours(0,0,0,0);const b=(w,E)=>w.getFullYear()===E.getFullYear()&&w.getMonth()===E.getMonth()&&w.getDate()===E.getDate(),C=y.useMemo(()=>{const w=[];let E=new Date(f);for(let T=0;T<6;T++){const _=[];for(let A=0;A<7;A++){const j=ir(E,A),D=j.getMonth()===d.getMonth(),z=b(j,x),F=b(j,t),R=Object.keys(e).filter(P=>{const I=e[P];if(!I.plannedAt)return!1;const U=new Date(I.plannedAt);return b(U,j)}).map(P=>{var I,U,W,Y,B,Z;return{...u(P,e[P]),...(I=n[P])!=null&&I.title?{title:(U=n[P])==null?void 0:U.title}:{},...(W=n[P])!=null&&W.course?{course:(Y=n[P])==null?void 0:Y.course}:{},...(B=n[P])!=null&&B.status?{status:(Z=n[P])==null?void 0:Z.status}:{}}}),L=r.filter(P=>{var U;const I=(U=P==null?void 0:P.current)!=null&&U.due?new Date(P.current.due):null;return I&&b(I,j)}),O=((o==null?void 0:o[j.getDay()])||[]).map(P=>{const I=new Date(j);I.setHours(Math.floor(P.start/60),P.start%60,0,0);const U=new Date(j);return U.setHours(Math.floor(P.end/60),P.end%60,0,0),{...P,startDate:I,endDate:U}}),H=g.filter(P=>b(P.startDate,j)&&!P.isAllDay).map(P=>({id:P.id,title:P.title,plannedAt:P.startDate.toISOString(),duration:P.duration,course:P.source==="google"?"google_calendar":"microsoft_calendar",isGoogleEvent:P.isGoogleEvent,isMicrosoftEvent:P.isMicrosoftEvent,calendarColor:P.calendarColor,htmlLink:P.htmlLink,location:P.location}));_.push({date:j,isCurrentMonth:D,isToday:z,isSelected:F,items:R,due:L,externalCalendarItems:H,scheduleItems:O})}if(w.push(_),E=ir(E,7),T===4&&_.every(A=>!A.isCurrentMonth))break}return w},[f,d,e,n,r,g,o]),S=y.useCallback(w=>{const E=w.target;a.current={top:E.scrollTop,left:E.scrollLeft}},[]);return c.jsx("div",{className:"flex-1 min-h-0 relative",children:c.jsx("div",{ref:s,className:"h-full w-full overflow-auto",onScroll:S,children:c.jsxs("div",{className:"p-4",children:[c.jsx("div",{className:"grid grid-cols-7 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(w=>c.jsx("div",{className:"text-center font-semibold text-theme-1 text-sm py-2",children:w},w))}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"grid grid-cols-7",children:C.map((w,E)=>w.map((T,_)=>c.jsx($$e,{date:T.date,isCurrentMonth:T.isCurrentMonth,isToday:T.isToday,items:T.items,dueItems:T.due,externalCalendarItems:T.externalCalendarItems,scheduleItems:T.scheduleItems,isSelected:T.isSelected,portal:i},`${E}-${_}`)))}),c.jsx(U$e,{weeksCount:C.length})]})]})})})},$$e=({date:t,isCurrentMonth:e,isToday:n,isSelected:r,items:s,dueItems:a,externalCalendarItems:i,scheduleItems:o})=>{const{courseData:l}=zr(),{updateSettings:u,setStartDate:d,modifyOverrides:f,modifyPlanned:m,dueItems:g}=zt(),{loadSharedComponent:x}=ut(),{activeCalendarDragItem:b,currentDragDelta:C,dropZone:S}=Fv(),{setNodeRef:w}=OM({id:`month-day-${t.toISOString()}`,data:{type:"month-day",date:t.toISOString()}}),E=K=>{var te;return((te=l==null?void 0:l[K])==null?void 0:te.color)||"gray"},T=K=>{var te,ie;return((te=l==null?void 0:l[K])==null?void 0:te.code)||((ie=l==null?void 0:l[K])==null?void 0:ie.default)||K||"Class"},_=K=>{const te=(g||[]).find(ie=>{var fe,se;const de=((fe=ie==null?void 0:ie.current)==null?void 0:fe.id)??((se=ie==null?void 0:ie.original)==null?void 0:se.id);return de!=null&&String(de)===String(K.id)});return te||{current:{id:K.id,title:K.title,course:K.course,plannedAt:K.plannedAt,duration:K.duration,status:K.status||"incomplete"},original:{id:K.id,title:K.title,course:K.course,plannedAt:K.plannedAt,duration:K.duration,status:K.status||"incomplete"}}},A=K=>{K.isGoogleEvent||K.isMicrosoftEvent||K.course==="google_calendar"||K.course==="microsoft_calendar"||x("AssignmentCreator",{assignment:_(K)})},j=K=>{K.htmlLink&&window.open(K.htmlLink,"_blank")},D=[...s.map(K=>({...K,isExternal:!1})),...i.map(K=>({...K,isExternal:!0}))],z=y.useMemo(()=>{var te;if(!b)return D;const K=(te=b.id)==null?void 0:te.toString();return D.filter(ie=>{var de;return((de=ie.id)==null?void 0:de.toString())!==K})},[b,D]),F=(o||[]).map(K=>({type:"class",item:{...K,startDate:K.startDate,endDate:K.endDate}})),R=[...a.map(K=>({type:"due",item:K})),...z.map(K=>({type:"planned",item:K})),...F],L=K=>{var te,ie,de,fe;return K.type==="due"?(ie=(te=K.item)==null?void 0:te.current)!=null&&ie.due?new Date(K.item.current.due):null:K.type==="class"?((de=K.item)==null?void 0:de.startDate)||null:(fe=K.item)!=null&&fe.plannedAt?new Date(K.item.plannedAt):null},O=K=>K.type==="due"?0:1,P=[...R].sort((K,te)=>{const ie=O(K)-O(te);if(ie!==0)return ie;const de=L(K),fe=L(te);return de&&fe?de.getTime()-fe.getTime():de?-1:fe?1:0}).slice(0,2),I=Math.max(0,R.length-P.length),U=()=>{d(t),u==null||u({assignments_calendar_view_type:"day"})},W=(K,te)=>{var fe,se,ce,ue,oe,Ne;const ie=E((fe=K.current)==null?void 0:fe.course),de=((se=K.current)==null?void 0:se.status)==="complete"||((ce=K.current)==null?void 0:ce.status)==="graded";return c.jsxs("button",{className:"flex items-center gap-2 rounded-[8px] px-[10px] py-[2px] text-xs font-semibold text-left cursor-pointer transition-all duration-150 border w-full min-w-0 hover:brightness-95 bg-theme-1 text-theme-0",style:{borderColor:ie},onClick:()=>x("AssignmentCreator",{assignment:K}),children:[c.jsx("span",{className:"h-[10px] w-[10px] rounded-full flex-shrink-0",style:{background:ie}}),c.jsx("span",{className:`flex-1 min-w-0 truncate ${de?"line-through":""}`,children:((ue=K.current)==null?void 0:ue.title)||"Due item"}),((oe=K.current)==null?void 0:oe.due)&&c.jsx("span",{className:"text-[11px] text-theme-1 whitespace-nowrap",children:Sr(new Date(K.current.due),"h:mmaaa")})]},`due-${(Ne=K.current)==null?void 0:Ne.id}-${te}`)},Y=(K,te)=>{const ie=K.plannedAt?new Date(K.plannedAt):null,de=E(K.course),fe=(K==null?void 0:K.status)==="in-progress"?c.jsx(mE,{className:"w-[14px] h-[14px]"}):(K==null?void 0:K.status)==="complete"||(K==null?void 0:K.status)==="graded"?c.jsx(fE,{className:"w-[14px] h-[14px]"}):c.jsx(pE,{className:"w-[14px] h-[14px]"}),se=ce=>{ce.stopPropagation();const ue=K==null?void 0:K.status,oe=ue==="complete"||ue==="graded"?"incomplete":ue==="incomplete"?"in-progress":"complete",Ne=K==null?void 0:K.id;Ne!=null&&(f==null||f(Ne,{status:oe}),m==null||m({...K,status:oe}))};return c.jsxs("button",{className:"flex items-center gap-2 rounded-[8px] px-[10px] py-[2px] text-xs font-semibold text-left cursor-pointer transition-all duration-150 border w-full min-w-0 hover:brightness-95",style:{background:de,borderColor:de,color:"#fff"},onClick:()=>K.isExternal?j(K):A(K),children:[c.jsx("span",{onClick:se,className:"ml-[-2px] h-[16px] w-[16px] rounded-full flex-shrink-0 border border-white/80 bg-white/90 text-white/90 flex items-center justify-center hover:scale-105 transition-all duration-150",style:{color:de},role:"button",children:fe}),c.jsx("span",{className:`flex-1 min-w-0 truncate translate-x-[-2px] ${(K==null?void 0:K.status)==="complete"||(K==null?void 0:K.status)==="graded"?"line-through":""}`,children:K.title||"Planned"}),ie&&c.jsx("span",{className:"text-[11px] text-white/80 whitespace-nowrap",children:Sr(ie,"h:mmaaa")})]},`plan-${K.id}-${te}`)},B=(K,te)=>{const ie=E(K.course),de=T(K.course),fe=K.startDate?Sr(new Date(K.startDate),"h:mmaaa"):"";return c.jsxs("div",{className:"flex items-center gap-2 rounded-[8px] px-[10px] py-[2px] text-[12px] font-semibold text-left border border-theme w-full min-w-0 bg-theme-1 text-theme-0",children:[c.jsx("span",{className:"h-[10px] w-[10px] rounded-full flex-shrink-0",style:{background:ie}}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2 justify-between",children:[c.jsx("span",{className:"truncate",children:de}),fe&&c.jsx("span",{className:"text-[11px] text-theme-1 whitespace-nowrap",children:fe})]})]},`class-${K.course}-${te}`)},Z=y.useMemo(()=>t.toDateString(),[t]),le=y.useMemo(()=>!b||(S==null?void 0:S.type)!=="month-day"?!1:S.date===Z,[b,S,Z]),G=y.useMemo(()=>{if(!le||!b)return null;const K=E(b.course),te=C||(b.plannedAt?new Date(b.plannedAt):null);return c.jsxs("div",{className:"flex items-center gap-2 rounded-[8px] px-[10px] py-[2px] text-xs font-semibold text-left border border-dashed opacity-70",style:{background:K,borderColor:K,color:"#fff"},children:[c.jsx("span",{className:"flex-1 min-w-0 truncate",children:b.title||"Planned"}),te&&c.jsx("span",{className:"text-[11px] text-white/80 whitespace-nowrap",children:Sr(te,"h:mmaaa")})]})},[b,C,le]);return c.jsxs("div",{ref:w,className:`p-2 min-h-[120px] bg-theme-0 ${e?"":"opacity-40"}`,children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("span",{className:`text-sm font-semibold ${r?"bg-theme-link rounded-full w-6 h-6 flex items-center justify-center shadow-sm":n?"rounded-full w-6 h-6 flex items-center justify-center border border-theme text-theme-0":"text-theme-0"}`,style:r?{color:"var(--bcbackground-0, #ffffff)"}:void 0,children:Sr(t,"d")})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[G,P.map(({type:K,item:te},ie)=>K==="due"?W(te,ie):K==="class"?B(te,ie):Y(te,ie)),I>0&&c.jsxs("button",{className:"text-xs text-theme-link font-semibold pl-1 hover:underline text-left",onClick:U,children:["+",I," more"]})]})]})},U$e=({weeksCount:t})=>{const e=14.285714285714286,n=120,r=Array.from({length:6},(a,i)=>c.jsx("div",{className:"absolute h-full w-[1px] bg-theme-border",style:{left:`${(i+1)*e}%`}},`v-line-${i}`)),s=Array.from({length:t-1},(a,i)=>c.jsx("div",{className:"absolute w-full h-[1px] bg-theme-border",style:{top:`${(i+1)*n}px`}},`h-line-${i}`));return c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[r,s]})},r6=({title:t,emptyLabel:e,items:n,headerRight:r,contentTop:s})=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 w-[calc(100%+24px)] -mr-6",children:[c.jsx("p",{className:"text-xs font-semibold text-theme-1 uppercase tracking-[0.04em]",children:t}),r]}),s,n.length===0?c.jsx("p",{className:"text-sm text-theme-1",children:e}):c.jsx("div",{className:"space-y-2 w-[calc(100%+24px)] -mr-6",children:n.map(a=>c.jsxs("div",{className:"flex items-center gap-3 rounded-md border border-theme px-3 py-2 w-full",children:[c.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{background:a.color||"#9CA3AF"}}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-sm font-semibold truncate",children:a.title}),a.detail&&c.jsx("p",{className:"text-xs text-theme-1",children:a.detail})]}),a.onEdit&&c.jsx("button",{className:"p-1 rounded-md hover:bg-theme-1 text-theme-1 hover:text-theme-0 transition-colors cursor-pointer",onClick:i=>{var o;i.stopPropagation(),(o=a.onEdit)==null||o.call(a)},"aria-label":"Edit",children:c.jsx(Yb,{className:"h-4 w-4"})})]},a.id))})]}),H$e=({showDue:t,showPlanned:e,showClasses:n,onToggle:r})=>{const s=(a,i,o)=>c.jsxs("button",{className:`flex items-center gap-2 px-3 py-1 rounded-full border text-sm transition-colors ${i?"bg-theme-1 text-theme-0 border-theme":"bg-theme-0 text-theme-0 border-theme hover:bg-theme-1"}`,onClick:o,children:[c.jsx("span",{children:a}),i&&c.jsx(or,{className:"h-4 w-4"})]});return c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s("Planned",e,()=>r("planned")),s("Tasks",t,()=>r("due")),s("Class",n,()=>r("classes"))]})},VD=({selectedDate:t})=>{const{setStartDate:e,planned:n,overrides:r,dueItems:s,settings:a}=zt(),{schedule:i,courseData:o}=zr(),{loadSharedComponent:l,openScheduleEditor:u}=ut(),[d,f]=y.useState(!1),[m,g]=y.useState(!1),[x,b]=y.useState(!1),[C,S]=y.useState(!0),w=y.useMemo(()=>{const I=new Date(t);return I.setHours(0,0,0,0),I},[t]),E=y.useCallback((I,U)=>I.getMonth()===U.getMonth()&&I.getDate()===U.getDate(),[]),T=y.useMemo(()=>{const I=new Map;return s.forEach(U=>{var Y,B,Z;const W=(Z=((Y=U==null?void 0:U.current)==null?void 0:Y.id)??((B=U==null?void 0:U.original)==null?void 0:B.id))==null?void 0:Z.toString();W&&I.set(W,U)}),I},[s]),_=y.useCallback((I,U)=>{const W=T.get(I),Y=(W==null?void 0:W.current)||(W==null?void 0:W.original)||{};return{id:I,...U,course:U.course??Y.course,title:U.title??Y.title,status:U.status??Y.status,duration:U.duration??Y.duration??Qa.duration}},[T]),A=y.useMemo(()=>Object.keys(n).reduce((I,U)=>{var B,Z,le,G,K,te;const W=n[U];if(!W.plannedAt)return I;const Y=new Date(W.plannedAt);return E(Y,w)&&I.push({..._(U,n[U]),...(B=r[U])!=null&&B.title?{title:(Z=r[U])==null?void 0:Z.title}:{},...(le=r[U])!=null&&le.course?{course:(G=r[U])==null?void 0:G.course}:{},...(K=r[U])!=null&&K.status?{status:(te=r[U])==null?void 0:te.status}:{}}),I},[]),[E,w,_,r,n]),j=y.useMemo(()=>s.filter(I=>{var W;const U=(W=I==null?void 0:I.current)!=null&&W.due?new Date(I.current.due):null;return U&&E(U,w)}),[E,w,s]),D=y.useMemo(()=>(i==null?void 0:i[w.getDay()])||[],[w,i]),z=(a==null?void 0:a.assignments_calendar_view_type)||"week",F=(a==null?void 0:a.assignments_week_days)||7,R=z==="5day"?5:F,L=y.useMemo(()=>{const I=new Date(w);I.setHours(0,0,0,0);let U=I,W=ir(I,1);return z==="month"?(U=o4(I),W=new Date(U.getFullYear(),U.getMonth()+1,1)):(z==="week"||z==="5day")&&(W=ir(I,R)),{rangeStart:U,rangeEnd:W}},[z,w,R]),O=y.useMemo(()=>{const{rangeStart:I,rangeEnd:U}=L;return s.filter(W=>{var B,Z;if(((B=W==null?void 0:W.current)==null?void 0:B.plannedAt)!==null||!((Z=W==null?void 0:W.current)!=null&&Z.due))return!1;const Y=new Date(W.current.due);return Y.setHours(0,0,0,0),Y>=I&&Y<U})},[s,L]),H=y.useMemo(()=>O.length,[O.length]),P=y.useCallback(I=>{const U=s.find(W=>{var Y;return String((Y=W==null?void 0:W.current)==null?void 0:Y.id)===String(I.id)});return U||{current:{id:I.id,title:I.title,course:I.course,plannedAt:I.plannedAt,duration:I.duration,status:I.status},original:{id:I.id,title:I.title,course:I.course,plannedAt:I.plannedAt,duration:I.duration,status:I.status}}},[s]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx(aie,{selectedDate:w,onSelectDate:I=>{e(I)}}),c.jsx(H$e,{showDue:d,showPlanned:m,showClasses:x,onToggle:I=>{const U={due:d,planned:m,classes:x},W={...U,[I]:!U[I]};if(!W.due&&!W.planned&&!W.classes){f(!1),g(!1),b(!1);return}f(W.due),g(W.planned),b(W.classes)}}),(m||!d&&!m&&!x)&&c.jsx(r6,{title:"Planned Time",emptyLabel:"No planned items",headerRight:c.jsxs("button",{className:"ml-auto flex items-center gap-1 rounded-full border border-theme px-2 py-0.5 text-xs text-theme-1 hover:bg-theme-1 hover:text-theme-0 transition-colors",onClick:()=>S(I=>!I),"aria-expanded":C,type:"button",children:[c.jsxs("span",{children:[H," Unplanned"]}),c.jsx(oi,{className:`h-3.5 w-3.5 transition-transform ${C?"rotate-180":""}`})]}),contentTop:c.jsx(Wo,{initial:!1,children:C?c.jsx(pa.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-visible",children:c.jsx("div",{className:"overflow-hidden rounded-lg border border-theme bg-theme-0 p-3 shadow-sm w-[calc(100%+24px)] -mr-6",children:c.jsxs("div",{className:`flex flex-col max-h-[440px] ${O.length>0?"min-h-[300px]":""}`,children:[c.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto scrollbar-thin pr-1 space-y-2 pb-2",children:O.length===0?c.jsx("p",{className:"text-sm text-theme-1",children:"No unplanned items"}):O.map(I=>c.jsx(O$e,{item:I},I.current.id))}),c.jsx("div",{className:"bg-theme-0 pt-2 shrink-0",children:c.jsx(I$e,{tasks:O})})]})})},"unplanned-dropdown"):null}),items:A.map(I=>{const U=I.plannedAt?new Date(I.plannedAt):null,W=U?If(U,I.duration||Qa.duration):null,Y=o==null?void 0:o[I.course||""];return{id:`plan-${I.id}`,title:I.title||"Planned item",detail:U&&W?`${Sr(U,"h:mmaaa")} - ${Sr(W,"h:mmaaa")}`:"",color:Y==null?void 0:Y.color,onEdit:()=>l("AssignmentCreator",{assignment:P(I)})}})}),(d||!d&&!m&&!x)&&c.jsx(r6,{title:"Tasks Due",emptyLabel:"Nothing due",items:j.map(I=>{var Y,B,Z,le;const U=(Y=I==null?void 0:I.current)!=null&&Y.due?new Date(I.current.due):null,W=o==null?void 0:o[((B=I.current)==null?void 0:B.course)||""];return{id:`due-${(Z=I.current)==null?void 0:Z.id}`,title:((le=I.current)==null?void 0:le.title)||"Due item",detail:U?Sr(U,"h:mmaaa"):"",color:W==null?void 0:W.color,onEdit:()=>l("AssignmentCreator",{assignment:I})}})}),(x||!d&&!m&&!x)&&c.jsx(r6,{title:"Class Time",emptyLabel:"No classes",items:D.map(I=>{const U=new Date(w);U.setHours(Math.floor(I.start/60),I.start%60,0,0);const W=new Date(w);W.setHours(Math.floor(I.end/60),I.end%60,0,0);const Y=o==null?void 0:o[I.course];return{id:`${I.course}-${I.start}`,title:(Y==null?void 0:Y.code)||(Y==null?void 0:Y.default)||I.course||"Class",detail:`${Sr(U,"h:mmaaa")} - ${Sr(W,"h:mmaaa")}`,color:Y==null?void 0:Y.color,onEdit:()=>u(I.course,(Y==null?void 0:Y.code)||(Y==null?void 0:Y.default))}})})]})},V$e=({rightPanelWidth:t,sidebarMinWidth:e,viewportWidth:n})=>{const{startDate:r,blockWidth:s,timeWidth:a,planned:i,overrides:o,dueItems:l,blockHeight:u,scrollArea:d,scrollPos:f}=zt(),{schedule:m}=zr(),g=y.useRef(null),x=y.useMemo(()=>r,[r]),b=y.useMemo(()=>ir(r,1),[r]),{events:C}=mw(x,b),S=new Date;S.setHours(0,0,0,0);const w=y.useMemo(()=>{const L=new Map;return l.forEach(O=>{var P,I,U;const H=(U=((P=O==null?void 0:O.current)==null?void 0:P.id)??((I=O==null?void 0:O.original)==null?void 0:I.id))==null?void 0:U.toString();H&&L.set(H,O)}),L},[l]),E=(L,O)=>{const H=w.get(L),P=(H==null?void 0:H.current)||(H==null?void 0:H.original)||{};return{id:L,...O,course:O.course??P.course,title:O.title??P.title,status:O.status??P.status,duration:O.duration??P.duration??Qa.duration}},T=(L,O)=>L.getMonth()===O.getMonth()&&L.getDate()===O.getDate(),_=y.useMemo(()=>{const L=new Date(r);L.setHours(0,0,0,0);const O=(m==null?void 0:m[L.getDay()])||[],H=Object.keys(i).reduce((U,W)=>{var Z,le,G,K,te,ie;const Y=i[W];if(!Y.plannedAt)return U;const B=new Date(Y.plannedAt);return T(B,L)&&U.push({...E(W,i[W]),...(Z=o[W])!=null&&Z.title?{title:(le=o[W])==null?void 0:le.title}:{},...(G=o[W])!=null&&G.course?{course:(K=o[W])==null?void 0:K.course}:{},...(te=o[W])!=null&&te.status?{status:(ie=o[W])==null?void 0:ie.status}:{}}),U},[]),P=l.filter(U=>{var Y;const W=(Y=U==null?void 0:U.current)!=null&&Y.due?new Date(U.current.due):null;return W&&T(W,L)}),I=C.filter(U=>T(U.startDate,L)&&!U.isAllDay).map(U=>({id:U.id,title:U.title,plannedAt:U.startDate.toISOString(),duration:U.duration,course:U.source==="google"?"google_calendar":"microsoft_calendar",isGoogleEvent:U.isGoogleEvent,isMicrosoftEvent:U.isMicrosoftEvent,calendarColor:U.calendarColor,htmlLink:U.htmlLink,location:U.location}));return{date:L,items:H,due:P,externalCalendarItems:I,scheduleItems:O}},[r,i,m,C,l]),A=y.useMemo(()=>{const L=_.date,O=new Map,H=L.toISOString(),P=(l||[]).filter(U=>{var Y;if(!tb(U))return!1;const W=(Y=U==null?void 0:U.current)!=null&&Y.due?new Date(U.current.due):null;return W?T(W,L):!1});O.set(H,P);const I=P.length;return{map:O,maxCount:I}},[_.date,l]),j=y.useMemo(()=>{if(!A.maxCount)return t5;const L=A.maxCount*oie+Math.max(0,A.maxCount-1)*lie;return Math.max(t5,cie*2+L)},[A]),D=y.useCallback(L=>{const O=L.target;f.current={top:O.scrollTop,left:O.scrollLeft}},[]),[z,F]=y.useState(0);y.useEffect(()=>{if(!d.current||!Number.isFinite(u)||u<=0)return;const L=`day-${r.toDateString()}`;g.current!==L&&(g.current=L,requestAnimationFrame(()=>{const O=new Date,H=O.getHours()+O.getMinutes()/60-2,P=Math.max(0,H*u),I=d.current;if(!I)return;const U=Math.max(0,I.scrollHeight-I.clientHeight),W=Math.min(U,P);I.scrollTop=W,f.current={top:W,left:I.scrollLeft}}))},[u,d,r,f]),y.useEffect(()=>{const L=d.current;if(!L||typeof ResizeObserver>"u")return;const O=new ResizeObserver(H=>{var I,U;const P=((U=(I=H[0])==null?void 0:I.contentRect)==null?void 0:U.width)||0;F(P)});return O.observe(L),()=>O.disconnect()},[d]);const R=y.useMemo(()=>{const L=n-t,P=(z||L)-a-16;return Math.max(s,P)},[s,t,z,a,n]);return c.jsx("div",{className:"flex-1 min-h-0 relative",children:c.jsxs("div",{className:"flex h-full gap-0",children:[c.jsx("div",{className:"hidden md:flex flex-col rounded-l-lg border border-theme bg-theme-0 p-4 pr-10 overflow-y-auto",style:{flex:"0 0 auto",width:`${t}px`,minWidth:`${e}px`,paddingBottom:"90px"},children:c.jsx(VD,{selectedDate:_.date})}),c.jsx("div",{className:"min-w-0",style:{flex:"1 1 auto"},children:c.jsx("div",{ref:d,className:"h-full w-full overflow-auto rounded-r-lg border border-theme border-l-0 bg-theme-0",onScroll:D,children:c.jsxs("div",{className:"grid grid-cols-[auto_1fr] flex-1 h-[calc(var(--block-height) * 24)] relative pr-4",children:[c.jsx("div",{className:"bg-theme-0 border-b border-theme sticky top-0 left-0 z-40",style:{width:`${a}px`,height:`${vd}px`}}),c.jsx("div",{className:"sticky top-0 left-0 bg-theme-0 border-b border-theme z-40 h-[40px] relative bg-theme-0 flex items-center justify-center",style:{width:`${R}px`,minWidth:`${R}px`,"--block-width":`${R}px`},children:c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx("p",{className:"font-medium",children:Sr(_.date,"eee")}),c.jsx("p",{className:"text-theme-1",children:Sr(_.date,"MMM d")}),T(S,_.date)&&c.jsx("p",{className:"text-sm text-theme-link font-medium",children:"Today"})]})}),c.jsx("div",{className:"sticky left-0 bg-theme-0 border-b border-theme z-30 flex items-center justify-center px-3 border-r border-theme",style:{top:`${vd}px`,height:`${j}px`,width:`${a}px`},children:c.jsx("p",{className:"text-sm font-semibold",children:"Due"})}),c.jsx("div",{className:"sticky left-0 bg-theme-0 border-b border-theme z-30",style:{top:`${vd}px`,height:`${j}px`,width:`${R}px`,minWidth:`${R}px`},children:c.jsx(iie,{dates:[_.date],takeHomeMap:A.map,blockWidth:R})}),c.jsx("div",{className:"sticky top-0 left-0 bg-theme-0 z-25 border-r border-theme",style:{top:`${vd+j}px`,width:`${a}px`},children:c.jsx(BM,{})}),c.jsxs("div",{className:"flex-1 relative flex min-w-[400px] overflow-hidden",style:{width:`${R}px`,minWidth:`${R}px`,"--block-width":`${R}px`},children:[c.jsx(LM,{}),c.jsx("div",{className:"absolute flex h-full w-full [&>*]:!min-w-full [&>*]:!max-w-full",children:c.jsx(zM,{start:_.date,today:T(S,_.date),showTimeIndicator:!0,items:_.items,dueItems:_.due,calendarEvents:_.externalCalendarItems,scheduleItems:_.scheduleItems},_.date.toISOString())})]})]})})})]})})},q$e=()=>{const{scrollPos:t,scrollArea:e,dueItems:n,setNumCols:r,numCols:s,blockHeight:a,blockWidth:i,settings:o,timeWidth:l,startDate:u}=zt(),d=(o==null?void 0:o.assignments_calendar_view_type)||"week",f=(o==null?void 0:o.assignments_week_days)||7,m=d==="5day"?5:f,g=y.useRef(null),{trackEvent:x,withEventCooldown:b}=ut(),{viewportWidth:C,rightPanelWidth:S,sidebarMinWidth:w}=L$e();y.useCallback(P=>{var W;const I=Math.max(0,(P-1)*a),U=(W=e.current)==null?void 0:W.querySelector("[data-radix-scroll-area-viewport]");U&&U.scrollTo({top:I,behavior:"instant"})},[e]),y.useEffect(()=>{b("planner_view_opened",async()=>{await x("planner_view_opened")},30)},[]),y.useEffect(()=>{if(d!=="week"&&d!=="5day"||!e.current||!Number.isFinite(a)||a<=0)return;const P=`${d}-${u.toDateString()}`;g.current!==P&&(g.current=P,requestAnimationFrame(()=>{const I=new Date,U=I.getHours()+I.getMinutes()/60-2,W=Math.max(0,U*a),Y=e.current;if(!Y)return;const B=Math.max(0,Y.scrollHeight-Y.clientHeight),Z=Math.min(B,W);Y.scrollTop=Z,t.current={top:Z,left:Y.scrollLeft}}))},[d,a,e,u,t]);const E=y.useCallback(P=>{const I=P.target;if(t.current={top:I.scrollTop,left:I.scrollLeft},_(I.scrollLeft),I.scrollWidth-I.clientWidth-I.scrollLeft<300){const U=d==="5day"?1:m;r(W=>W+U)}},[r,m]),[T,_]=y.useState(0),A=y.useMemo(()=>Math.floor(Math.abs(T)/i),[T,i]),D=Math.max(s,m)*i,{takeHomeMap:z,maxTakeHomeCount:F,visibleDates:R}=y.useMemo(()=>{const P=new Map,I=Array.from({length:m},(W,Y)=>{const B=ir(u,Y+A);return B.setHours(0,0,0,0),B});n.forEach(W=>{var Z;if(tb(W)===!1||!((Z=W==null?void 0:W.current)!=null&&Z.due))return;const Y=new Date(W.current.due);Y.setHours(0,0,0,0);const B=Y.toISOString();P.has(B)||P.set(B,[]),P.get(B).push(W)});let U=0;return I.forEach(W=>{var Z;const Y=W.toISOString(),B=((Z=P.get(Y))==null?void 0:Z.length)||0;B>U&&(U=B)}),{takeHomeMap:P,maxTakeHomeCount:U,visibleDates:I}},[n,m,u,A]),L=y.useMemo(()=>{if(!F)return t5;const P=F*oie+Math.max(0,F-1)*lie;return Math.max(t5,cie*2+P)},[F]),O=(P,I)=>c.jsx("div",{className:"flex-1 min-h-0 relative",children:c.jsxs("div",{className:"flex h-full gap-0",children:[c.jsx("div",{className:"hidden md:flex flex-col rounded-l-lg border border-theme bg-theme-0 p-4 pr-10 overflow-y-auto",style:{flex:"0 0 auto",width:`${S}px`,minWidth:`${w}px`,paddingBottom:"90px"},children:I}),c.jsx("div",{className:"min-w-0 flex-1",children:P})]})}),H=()=>d==="day"?c.jsx(V$e,{rightPanelWidth:S,sidebarMinWidth:w,viewportWidth:C}):d==="month"?O(c.jsx(z$e,{}),c.jsx(VD,{selectedDate:u})):O(c.jsx("div",{ref:e,className:"h-full w-full overflow-auto",onScroll:E,children:c.jsxs("div",{className:"grid grid-cols-[auto_1fr] flex-1 h-[calc(var(--block-height) * 24)] relative",children:[c.jsx("div",{className:"bg-theme-0 border-b border-theme sticky top-0 left-0 z-40",style:{width:`${l}px`,height:`${vd}px`}}),c.jsx("div",{className:"sticky top-0 left-0 bg-theme-0 border-b border-theme z-40 relative bg-theme-0",style:{width:`${D}px`,minWidth:`${D}px`,height:`${vd}px`},children:c.jsx(P$e,{scrollLeft:T})}),c.jsx("div",{className:"sticky left-0 bg-theme-0 border-b border-theme z-40 flex items-center justify-center px-3 border-r border-theme",style:{top:`${vd}px`,height:`${L}px`,width:`${l}px`},children:c.jsx("p",{className:"text-sm font-semibold",children:"Due"})}),c.jsx("div",{className:"sticky left-0 bg-theme-0 border-b border-theme z-30",style:{top:`${vd}px`,height:`${L}px`,width:`${D}px`,minWidth:`${D}px`},children:c.jsx(iie,{dates:R,takeHomeMap:z,blockWidth:i,offsetLeft:A*i})}),c.jsx("div",{className:"sticky left-0 bg-theme-0 border-r border-theme",style:{top:`${vd+L}px`,width:`${l}px`,zIndex:5},children:c.jsx(BM,{})}),c.jsx("div",{className:"flex-1 relative flex",style:{width:`${D}px`,minWidth:`${D}px`},children:c.jsx(G$e,{scrollLeft:T})})]})}),c.jsx(VD,{selectedDate:u}));return c.jsxs(c.Fragment,{children:[c.jsx(Iae,{}),H()]})},G$e=({scrollLeft:t})=>{const{startDate:e,blockWidth:n,planned:r,overrides:s,dueItems:a,settings:i}=zt(),{schedule:o}=zr(),l=(i==null?void 0:i.assignments_calendar_view_type)||"week",u=(i==null?void 0:i.assignments_week_days)||7,d=l==="5day"?5:u,f=y.useMemo(()=>ir(e,-7),[e]),m=y.useMemo(()=>ir(e,30),[e]),{events:g}=mw(f,m);console.log("calendarEvents for planner view",g);const x=new Date;x.setHours(0,0,0,0);const b=y.useMemo(()=>{const E=new Map;return a.forEach(T=>{var A,j,D;const _=(D=((A=T==null?void 0:T.current)==null?void 0:A.id)??((j=T==null?void 0:T.original)==null?void 0:j.id))==null?void 0:D.toString();_&&E.set(_,T)}),E},[a]),C=(E,T)=>{const _=b.get(E),A=(_==null?void 0:_.current)||(_==null?void 0:_.original)||{};return{id:E,...T,course:T.course??A.course,title:T.title??A.title,status:T.status??A.status,duration:T.duration??A.duration??Qa.duration}};y.useRef(1/0);const S=Math.floor(Math.abs(t)/n),w=y.useMemo(()=>Array.from({length:d},(E,T)=>{const _=ir(e,T+S);_.setHours(0,0,0,0);const A=(o==null?void 0:o[_.getDay()])||[],j=Object.keys(r).reduce((F,R)=>{var H,P,I,U,W,Y;const L=r[R];if(!L.plannedAt)return F;const O=new Date(L.plannedAt);return wx(O,_)&&F.push({...C(R,r[R]),...(H=s[R])!=null&&H.title?{title:(P=s[R])==null?void 0:P.title}:{},...(I=s[R])!=null&&I.course?{course:(U=s[R])==null?void 0:U.course}:{},...(W=s[R])!=null&&W.status?{status:(Y=s[R])==null?void 0:Y.status}:{}}),F},[]),D=a.filter(F=>{var L;if(tb(F))return!1;const R=(L=F==null?void 0:F.current)!=null&&L.due?new Date(F.current.due):null;return R&&wx(R,_)}),z=g.filter(F=>wx(F.startDate,_)&&!F.isAllDay);return c.jsx(zM,{start:_,today:wx(x,_),items:j,dueItems:D,calendarEvents:z,scheduleItems:A},_.toISOString())}),[e,S,r,o,g,a,d]);return c.jsxs("div",{className:"absolute flex h-full",style:{left:`${S*n}px`},children:[c.jsx(LM,{}),c.jsx(W$e,{}),w]})},W$e=()=>{const{blockWidth:t,settings:e}=zt(),n=(e==null?void 0:e.assignments_calendar_view_type)||"week",r=(e==null?void 0:e.assignments_week_days)||7,a=Array.from({length:n==="5day"?5:r},(i,o)=>c.jsx("div",{className:"absolute w-[1px] h-full bg-theme-border",style:{left:(o+1)*t+"px"}},"row-line-"+o));return c.jsx("div",{className:"absolute top-0 left-0 w-full h-full z-1",children:a})};function K$e(t,e,n){const{blockHeight:r,subBlocks:s}=e,a=Math.floor(t/r),i=t%r,l=Math.floor(i/(r/s))*(60/s);return new Date(n.year,n.month,n.day,a,l)}function Y$e(t,e){const n=t.getHours(),r=t.getMinutes(),s=If(t,e),a=s.getHours();if(s.getMinutes(),s.getDate()!==t.getDate()||a===0){const i=1439-e,o=Math.floor(i/60),l=i%60,u=new Date(t);return u.setHours(Math.min(n,o)),n===o&&u.setMinutes(Math.min(r,l)),u}if(n<0){const i=new Date(t);return i.setHours(0,0,0,0),i}return t}function X$e(t,e,n){var f,m,g;const{planner:r,scrollOffset:s=0}=n;if(!t.over)return{date:null,cursorType:"default"};if(e==="calendar-item-resize-bottom"){const x=t.delta.y,b=Math.round(x/n.subBlockHeight),C=((r==null?void 0:r.duration)||30)+b*n.subBlockMinutes,w=Math.max(n.subBlockMinutes,Math.min(1440,C))/60*n.blockHeight;return{date:r!=null&&r.plannedAt?new Date(r.plannedAt):null,resizeHeight:w,cursorType:"ns-resize"}}if(e==="calendar-item-resize-top"){const x=-t.delta.y,b=Math.round(x/n.subBlockHeight),C=((r==null?void 0:r.duration)||30)+b*n.subBlockMinutes,S=Math.max(n.subBlockMinutes,Math.min(1440,C)),w=-b*n.subBlockMinutes;return{date:r!=null&&r.plannedAt?If(new Date(r.plannedAt),w):null,resizeHeight:S/60*n.blockHeight,cursorType:"ns-resize"}}const a=t.activatorEvent,i=t.over.rect,o={year:((f=t.over.data.current)==null?void 0:f.year)||new Date().getFullYear(),month:((m=t.over.data.current)==null?void 0:m.month)||new Date().getMonth(),day:((g=t.over.data.current)==null?void 0:g.day)||new Date().getDate()};e==="due-item"&&(console.log("=== DUE ITEM DRAG DEBUG ==="),console.log("Initial click Y (evt.clientY):",a.clientY),console.log("Drag delta Y:",t.delta.y),console.log("Current mouse Y (calculated):",a.clientY+t.delta.y),console.log("DropZone top:",i.top),console.log("DropZone height:",i.height),console.log("scrollOffset passed in:",s),console.log("Expected dropZone.top if scrolled:",-s+170));let l=a.clientY+t.delta.y-i.top;if((e==="due-item"||e==="unassigned-task")&&(console.log("Before scroll adjustment:",l),l=l-s,console.log("After subtracting scroll offset:",l)),e==="due-item"){const x=l/n.blockHeight;console.log("Final relativeY:",l),console.log("Estimated hour from position:",x)}if(e==="calendar-item"&&(r!=null&&r.plannedAt)){const x=new Date(r.plannedAt),b=x.getHours()*n.blockHeight+x.getMinutes()/60*n.blockHeight,S=a.clientY-i.top-b;l-=S}let u=K$e(l,n,o);e==="due-item"&&(console.log("Final calculated date/time:",u),console.log("=== END DUE ITEM DEBUG ==="));const d=(r==null?void 0:r.duration)||30;return u=Y$e(u,d),{date:u,cursorType:"grabbing"}}function s6(t){return(t==null?void 0:t.type)||"unknown"}const J$e=()=>{const{planType:t}=wa(),{weeklyUsage:e,usageLoading:n}=zt(),r=()=>e?e.current_usage===0?c.jsxs("p",{children:["Nothing planned this week. ",c.jsx("strong",{children:"Drag"})," an assignment to plan it!"]}):e.current_usage>=e.max_limit?c.jsxs("p",{children:["All ",e.max_limit," planning spots used this week. Upgrade to plan unlimited spots!"]}):c.jsxs("p",{children:[c.jsxs("strong",{children:[e.current_usage," of ",e.max_limit]})," planning spots used this week."]}):"",s=e&&!n&&!(t==="pro"&&((e==null?void 0:e.current_usage)??0)>0);return c.jsx(Wo,{children:s&&c.jsx(pa.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},className:"fixed z-30 bottom-2 left-0 w-full pointer-events-none flex items-center justify-center",children:c.jsx("div",{className:"border border-theme backdrop-blur-sm rounded-xl px-4 py-2.5 text-xs bg-theme-0 pointer-events-auto",children:c.jsxs("div",{className:"text-theme-0 font-medium flex items-center gap-1.5",children:[c.jsx(Mg,{className:"size-3.5 text-theme-0/60"}),r()]})})},"limit-tracker")})},Q$e=()=>{const{settings:t,modifyPlanned:e,scrollPos:n,findClosestAvailableTime:r,blockHeight:s,blockWidth:a,timeWidth:i,blockMargin:o,subBlocks:l,subBlockMinutes:u,subBlockHeight:d,cursorType:f,setCursorType:m,planned:g}=zt(),{currentDragDelta:x,setCurrentDragDelta:b,activeDragItem:C,setActiveDragItem:S,resizeHeight:w,setResizeHeight:E,activeCalendarDragItem:T,setActiveCalendarDragItem:_,setShouldAnimateDrop:A,dropZone:j,setDropZone:D}=Fv(),[z,F]=y.useState(null),{showError:R,trackEvent:L,restrictedActionCheck:O,openRestrictedDialog:H,checkGate:P}=ut(),I=()=>{L("assignments_closed")};y.useEffect(()=>(document.body.setAttribute("data-dragging","true"),window.addEventListener("beforeunload",I),()=>{document.body.removeAttribute("data-dragging"),window.removeEventListener("beforeunload",I)}),[]);const U=QBe(YV(kae,{activationConstraint:{distance:1}}),YV(Eae)),W=G=>{var fe;const K=(fe=G.active.data.current)==null?void 0:fe.planner,te=s6(G.active.data.current),ie=((t==null?void 0:t.assignments_view)||"planner")==="due",de=te.includes("resize")?"ns-resize":"grabbing";m(de),A(ie),te==="due-item"||te==="unassigned-task"?S(K):(te==="calendar-item"||te==="calendar-item-resize-top"||te==="calendar-item-resize-bottom")&&(K!=null&&K.plannedAt)&&(_(K),b(new Date(K.plannedAt)))},Y=()=>{E(null),S(null),_(null),b(null),D(null),m(null),F(null)},B=async G=>{var ie,de,fe,se,ce,ue,oe;const K=((t==null?void 0:t.assignments_view)||"planner")==="due";let te=K;try{const Ne=((ie=G.active.data.current)==null?void 0:ie.planner)||{},ve=s6(G.active.data.current),He=(se=(fe=(de=G.over)==null?void 0:de.data)==null?void 0:fe.current)==null?void 0:se.type,nt=(oe=(ue=(ce=G.over)==null?void 0:ce.data)==null?void 0:ue.current)!=null&&oe.date?new Date(G.over.data.current.date):null;let Me=x;if(!Me&&He==="month-day"&&nt&&(Me=nt),!G.over||!Me)return;let $e=null;if(w){const Le=Math.round(w/d)*u;$e=r(Ne,Le,Me)}else{let Le=Me;if(ve==="unassigned-task"&&He==="month-day"){const{assignments_auto_plan:ae={time:"morning"}}=t||{},_e={morning:10,afternoon:14,evening:18,night:22}[ae.time]??10,Ue=new Date(Me);Ue.setHours(_e,0,0,0),Le=Ue}$e=r(Ne,null,Le)}if(console.log("[handleDragEnd] updates",$e),!$e)R("Couldn't find a spot for this assignment on that day.","error");else{const Le=(Ne==null?void 0:Ne.plannedAt)??null,ae=($e==null?void 0:$e.plannedAt)??Le??null,pe=Le?new Date(Le).getTime():null,_e=ae?new Date(ae).getTime():null;if(K?te=!(pe===null&&_e!==null||pe!==null&&_e!==null&&pe!==_e):te=!1,A(te),!await e({...Ne,...$e})){te=!1,A(!1);return}await L("assignment_planned")}}catch(Ne){console.error("Error during drag end:",Ne),R("An unexpected error occurred. Please try again.","error")}finally{A(K?te:!1),Y()}},Z=()=>{A(!1),Y()},le=G=>{var se,ce,ue,oe,Ne,ve;if(!G.over)return;const K=s6((ce=(se=G.active)==null?void 0:se.data)==null?void 0:ce.current),te=((ue=G.active.data.current)==null?void 0:ue.planner)||{},ie=(oe=G.over.data.current)==null?void 0:oe.type,de=(Ne=G.over.data.current)!=null&&Ne.date?new Date(G.over.data.current.date):null;(K==="due-item"||K==="unassigned-task")&&((C==null?void 0:C.id)!==(te==null?void 0:te.id)&&S(te),f!=="grabbing"&&m("grabbing"));const fe=(K==="due-item"||K==="unassigned-task")&&((ve=n.current)==null?void 0:ve.top)||0;if(K==="due-item"&&console.log("Passing scroll offset to calculateDragPosition:",fe),ie==="calendar-column"){const He=X$e(G,K,{blockHeight:s,subBlockHeight:d,subBlockMinutes:u,subBlocks:l,planner:te,scrollOffset:fe});f!==He.cursorType&&m(He.cursorType),He.date&&(!x||x.getTime()!==He.date.getTime())&&b(He.date),He.resizeHeight!==void 0&&w!==He.resizeHeight&&E(He.resizeHeight),(T==null?void 0:T.id)!==(te==null?void 0:te.id)&&_(te)}else ie==="month-day"?(de&&(!x||x.getTime()!==de.getTime())&&b(de),(T==null?void 0:T.id)!==(te==null?void 0:te.id)&&_(te),D({type:"month-day",date:de==null?void 0:de.toDateString()}),f!=="grabbing"&&m("grabbing")):(T!==null&&_(null),x!==null&&b(null),j!==null&&D(null))};return c.jsx(GLe,{sensors:U,onDragStart:W,onDragEnd:B,onDragCancel:Z,onDragMove:le,collisionDetection:dae,autoScroll:{enabled:!1,threshold:{x:0,y:0}},children:c.jsxs("div",{className:"h-screen flex flex-col overflow-hidden bg-theme-0 text-theme-0 font-theme",children:[c.jsx(nUe,{}),t.assignments_view==="due"?c.jsx(C$e,{}):c.jsx(q$e,{}),c.jsx(J$e,{})]})})},Z$e=()=>{const{startDate:t,setStartDate:e,settings:n}=zt(),{checkGate:r}=ut(),s=new Date,a=(n==null?void 0:n.assignments_calendar_view_type)||"week",i=(n==null?void 0:n.assignments_week_days)||7,o=a==="5day"?5:i;y.useMemo(()=>a==="month"?t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth():t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate(),[t,s,a]);const l=y.useCallback(async()=>{let m;a==="day"?m=gS(t,1):a==="week"||a==="5day"?m=gS(t,o):a==="month"&&(m=o2e(t));const g=new Date(s);if(g.setHours(0,0,0,0),a==="month"){if(m.getMonth()!==g.getMonth()||m.getFullYear()!==g.getFullYear()){const{restricted:b}=await r("assignments_calendar_date_change");if(b)return}}else{const x=gS(g,14);if(m<x){const{restricted:b}=await r("assignments_calendar_date_change");if(b)return}}e(m)},[a,o,t,s,r,e]),u=y.useCallback(async()=>{let m;a==="day"?m=ir(t,1):a==="week"||a==="5day"?m=ir(t,o):a==="month"&&(m=s4(t,1));const g=new Date(s);if(g.setHours(0,0,0,0),a==="month"){if(m.getMonth()!==g.getMonth()||m.getFullYear()!==g.getFullYear()){const{restricted:b}=await r("assignments_calendar_date_change");if(b)return}}else{const x=ir(g,14);if(m>x){const{restricted:b}=await r("assignments_calendar_date_change");if(b)return}}e(m)},[a,o,t,s,r,e]),d=()=>a==="month"||a==="week"||a==="5day"?Sr(t,"MMMM yyyy"):Sr(t,"MMM d, yyyy"),f=y.useCallback(()=>{const m=new Date;m.setHours(0,0,0,0),e(m)},[e]);return c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:f,className:"px-3 py-1 rounded-full text-sm font-medium text-theme-0 border border-theme hover:bg-theme-1 transition-colors",children:"Today"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:l,className:"p-1.5 rounded-md hover:bg-theme-1 text-theme-1 transition-colors",children:c.jsx(xv,{className:"size-5"})}),c.jsx("button",{onClick:u,className:"p-1.5 rounded-md hover:bg-theme-1 text-theme-1 transition-colors",children:c.jsx(dk,{className:"size-5"})})]}),c.jsx("span",{className:"text-sm font-semibold text-theme-0 min-w-[100px]",children:d()})]})},eUe=()=>{const{settings:t,updateSettings:e}=zt(),n=async r=>{e({assignments_view:r})};return c.jsxs("div",{className:"relative grid grid-cols-2 bg-theme-2 rounded-lg p-1 font-medium",children:[c.jsx(pa.div,{className:"absolute top-1 bottom-1 bg-theme-0 rounded-md",initial:!1,animate:{left:(t==null?void 0:t.assignments_view)==="due"?"4px":"calc(50% + 2px)",width:"calc(50% - 6px)"},transition:{type:"spring",stiffness:400,damping:40}}),c.jsxs("button",{className:`flex items-center justify-center gap-1.5 cursor-pointer relative z-10 text-sm rounded-md px-3 py-1.5 transition-all duration-200 ${(t==null?void 0:t.assignments_view)==="due"?"text-theme-0":"text-theme-1 hover:bg-theme-1"}`,onClick:()=>n("due"),children:[c.jsx(zEe,{className:"size-4"}),"To-Do"]}),c.jsxs("button",{className:`flex items-center justify-center gap-1.5 cursor-pointer relative z-10 text-sm rounded-md px-3 py-1.5 transition-all duration-200 ${(t==null?void 0:t.assignments_view)==="planner"?"text-theme-0":"text-theme-1 hover:bg-theme-1"}`,onClick:()=>n("planner"),children:[c.jsx(Mg,{className:"size-4"}),"Calendar"]})]})},tUe=()=>{const{portal:t}=zt(),{openRestrictedDialog:e,useRerenderListener:n,updateOptions:r,loadSharedComponent:s}=ut(),{options:a}=n(["assignments_setup_complete","google_calendars"]),i=a.assignments_setup_complete,{courseData:o}=zr(),[l,u]=y.useState(!1),[d,f]=y.useState(!1),[m,g]=y.useState(!1),[x,b]=y.useState(!1),C=A=>{!A&&(l||d)||g(A)},S=Object.keys((a==null?void 0:a.google_calendars)||{}).length>0,w=Object.values(o||{}).some(A=>Array.isArray(A==null?void 0:A.schedule)&&A.schedule.length>0);y.useEffect(()=>{!x&&w&&!d&&b(!0)},[w,d,x]);const E=2,T=[S,x].filter(Boolean).length;y.useEffect(()=>{T===E&&!l&&!d&&setTimeout(()=>{g(!1),r({assignments_setup_complete:!0})},800)},[T,E,l,d]);const _=c.jsxs("div",{className:"relative size-4.5",children:[c.jsx("div",{className:"size-4.5 rounded-full bg-theme-link shrink-0"}),c.jsx(or,{className:"size-3.5 shrink-0 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",style:{color:"var(--bcbackground-0, #fff)"}})]});return i?null:c.jsx("div",{className:"h-full flex items-center ",children:c.jsxs(_c,{open:m,onOpenChange:C,children:[c.jsx(nw,{children:c.jsxs("div",{className:"cursor-pointer flex items-center gap-1.5 text-xs text-theme-0 border border-theme rounded-lg px-2 py-1",children:[c.jsx(o3e,{className:"size-4 text-theme-1"}),c.jsxs("span",{className:"whitespace-nowrap",children:["Finish setup ",T," / ",E]})]})}),c.jsxs(Tc,{container:t,variant:"theme",className:"w-[300px] p-0 relative",showCloseButton:!1,children:[c.jsxs(OR,{className:"ring-offset-background focus-visible:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs transition-opacity hover:opacity-70 focus-visible:ring-2 focus-visible:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(ys,{className:"text-base-1"}),c.jsx("span",{className:"sr-only",children:"Close"})]}),c.jsxs("div",{className:"bg-theme-2 rounded-t-lg",children:[c.jsxs("div",{className:"px-6 pt-5 pb-4",children:[c.jsx("h3",{className:"text-lg text-theme-0",children:"Finish your setup"}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-theme-0 mt-3",children:[c.jsxs("span",{children:[T," of ",E]}),c.jsx("div",{className:"ml-1 w-49 h-2.5 bg-theme-0 rounded-full border border-theme flex overflow-hidden",children:Array.from({length:E}).map((A,j)=>c.jsx("div",{className:`flex-1 h-full ${j<T?"bg-theme-link":"bg-theme-0"} ${j<E-1?"border-r-2 border-theme":""}`},j))})]})]}),c.jsx("div",{className:"w-full h-px bg-theme-2"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{onClick:()=>s("CalendarSyncGate",{showCloseButton:!0}),className:"flex items-center justify-between py-4 px-6 -mt-4 cursor-pointer transition-all duration-200 hover:bg-theme-1",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[S?_:c.jsx(Pj,{className:"size-4.5 text-theme-1 shrink-0"}),c.jsx("p",{className:`text-base font-medium text-theme-0 ${S&&"line-through"}`,children:"Sync your calendar"})]}),c.jsx(pc,{className:"size-6.5 text-theme-1 shrink-0"})]}),c.jsx("div",{className:"w-full h-px bg-theme-2"}),c.jsxs("div",{onClick:()=>s("ScheduleEditor"),className:"flex items-center justify-between py-4 px-6 cursor-pointer transition-all duration-200 hover:bg-theme-1 rounded-b-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[x?_:c.jsx(Pj,{className:"size-4.5 text-theme-1 shrink-0"}),c.jsx("p",{className:`text-base font-medium text-theme-0 ${x&&"line-through"}`,children:"Add your class times"})]}),c.jsx(pc,{className:"size-6.5 text-theme-1 shrink-0 cursor-pointer"})]})]})]})]})})},nUe=()=>c.jsxs("div",{className:"border-b border-theme h-[60px] px-4 flex justify-between items-center relative z-20 bg-theme-0",children:[c.jsx(eUe,{}),c.jsx(tUe,{})]}),rUe=()=>{const{getOptions:t,updateOptions:e}=ut(),[n,r]=y.useState(!1),[s,a]=y.useState(null),i=y.useRef(!1);y.useEffect(()=>{if(i.current)return;i.current=!0,t().assignments_onboarding_viewed||r(!0)},[t]);const o=()=>{e({assignments_onboarding_viewed:!0}),r(!1)},l=()=>{e({assignments_onboarding_viewed:!0}),r(!1)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed top-0 left-0 z-[100000000000000]",ref:a}),c.jsx(BBe,{children:c.jsx(FBe,{children:c.jsxs(dze,{children:[c.jsx(_ze,{}),c.jsx(Q$e,{}),c.jsx(Qse,{isOpen:n,onComplete:o,onSkip:l,steps:iBe,container:s})]})})})]})},sUe=()=>c.jsxs(Wd,{requiresLocalStorage:!0,children:[c.jsx(iE,{}),c.jsx(rUe,{})]});var aUe=(t,e,n,r,s,a,i,o)=>{let l=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(t)?t:[t]).forEach(x=>{let b=x==="class",C=b&&a?s.map(S=>a[S]||S):s;b?(l.classList.remove(...C),l.classList.add(a&&a[g]?a[g]:g)):l.setAttribute(x,g)}),f(g)}function f(g){o&&u.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(e)||n,x=i&&g==="system"?m():g;d(x)}catch{}},iUe=y.createContext(void 0),oUe={setTheme:t=>{},themes:[]},lUe=()=>{var t;return(t=y.useContext(iUe))!=null?t:oUe};y.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:i,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,e,a,t,o,i,r,s]).slice(1,-1);return y.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${aUe.toString()})(${d})`}})});function cUe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const uUe=t=>{switch(t){case"success":return fUe;case"info":return pUe;case"warning":return mUe;case"error":return gUe;default:return null}},dUe=Array(12).fill(0),hUe=({visible:t,className:e})=>Ce.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Ce.createElement("div",{className:"sonner-spinner"},dUe.map((n,r)=>Ce.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),fUe=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mUe=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),pUe=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),gUe=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),vUe=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ce.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ce.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),yUe=()=>{const[t,e]=Ce.useState(document.hidden);return Ce.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let qD=1;class xUe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:qD++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...s,dismissible:o,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,i;const o=s.then(async u=>{if(i=["resolve",u],Ce.isValidElement(u))a=!1,this.create({id:r,type:"default",message:u});else if(wUe(u)&&!u.ok){a=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,x=typeof f=="object"&&!Ce.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...x})}else if(u instanceof Error){a=!1;const f=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,x=typeof f=="object"&&!Ce.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...x})}else if(n.success!==void 0){a=!1;const f=typeof n.success=="function"?await n.success(u):n.success,m=typeof n.description=="function"?await n.description(u):n.description,x=typeof f=="object"&&!Ce.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:m,...x})}}).catch(async u=>{if(i=["reject",u],n.error!==void 0){a=!1;const d=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!Ce.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...g})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>i[0]==="reject"?d(i[1]):u(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||qD++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ji=new xUe,bUe=(t,e)=>{const n=(e==null?void 0:e.id)||qD++;return Ji.addToast({title:t,...e,id:n}),n},wUe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",CUe=bUe,SUe=()=>Ji.toasts,kUe=()=>Ji.getActiveToasts(),Ts=Object.assign(CUe,{success:Ji.success,info:Ji.info,warning:Ji.warning,error:Ji.error,custom:Ji.custom,message:Ji.message,promise:Ji.promise,dismiss:Ji.dismiss,loading:Ji.loading},{getHistory:SUe,getToasts:kUe});cUe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function DC(t){return t.label!==void 0}const EUe=3,_Ue="24px",TUe="16px",uq=4e3,AUe=356,NUe=14,jUe=45,DUe=200;function Uc(...t){return t.filter(Boolean).join(" ")}function RUe(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const MUe=t=>{var e,n,r,s,a,i,o,l,u;const{invert:d,toast:f,unstyled:m,interacting:g,setHeights:x,visibleToasts:b,heights:C,index:S,toasts:w,expanded:E,removeToast:T,defaultRichColors:_,closeButton:A,style:j,cancelButtonStyle:D,actionButtonStyle:z,className:F="",descriptionClassName:R="",duration:L,position:O,gap:H,expandByDefault:P,classNames:I,icons:U,closeButtonAriaLabel:W="Close toast"}=t,[Y,B]=Ce.useState(null),[Z,le]=Ce.useState(null),[G,K]=Ce.useState(!1),[te,ie]=Ce.useState(!1),[de,fe]=Ce.useState(!1),[se,ce]=Ce.useState(!1),[ue,oe]=Ce.useState(!1),[Ne,ve]=Ce.useState(0),[He,nt]=Ce.useState(0),Me=Ce.useRef(f.duration||L||uq),$e=Ce.useRef(null),Le=Ce.useRef(null),ae=S===0,pe=S+1<=b,_e=f.type,Ue=f.dismissible!==!1,Je=f.className||"",qe=f.descriptionClassName||"",xe=Ce.useMemo(()=>C.findIndex(Et=>Et.toastId===f.id)||0,[C,f.id]),Ae=Ce.useMemo(()=>{var Et;return(Et=f.closeButton)!=null?Et:A},[f.closeButton,A]),Fe=Ce.useMemo(()=>f.duration||L||uq,[f.duration,L]),Qe=Ce.useRef(0),vt=Ce.useRef(0),at=Ce.useRef(0),Tt=Ce.useRef(null),[wt,cn]=O.split("-"),$t=Ce.useMemo(()=>C.reduce((Et,fn,mn)=>mn>=xe?Et:Et+fn.height,0),[C,xe]),hn=yUe(),Kn=f.invert||d,jn=_e==="loading";vt.current=Ce.useMemo(()=>xe*H+$t,[xe,$t]),Ce.useEffect(()=>{Me.current=Fe},[Fe]),Ce.useEffect(()=>{K(!0)},[]),Ce.useEffect(()=>{const Et=Le.current;if(Et){const fn=Et.getBoundingClientRect().height;return nt(fn),x(mn=>[{toastId:f.id,height:fn,position:f.position},...mn]),()=>x(mn=>mn.filter(Sn=>Sn.toastId!==f.id))}},[x,f.id]),Ce.useLayoutEffect(()=>{if(!G)return;const Et=Le.current,fn=Et.style.height;Et.style.height="auto";const mn=Et.getBoundingClientRect().height;Et.style.height=fn,nt(mn),x(Sn=>Sn.find(er=>er.toastId===f.id)?Sn.map(er=>er.toastId===f.id?{...er,height:mn}:er):[{toastId:f.id,height:mn,position:f.position},...Sn])},[G,f.title,f.description,x,f.id,f.jsx,f.action,f.cancel]);const Hn=Ce.useCallback(()=>{ie(!0),ve(vt.current),x(Et=>Et.filter(fn=>fn.toastId!==f.id)),setTimeout(()=>{T(f)},DUe)},[f,T,x,vt]);Ce.useEffect(()=>{if(f.promise&&_e==="loading"||f.duration===1/0||f.type==="loading")return;let Et;return E||g||hn?(()=>{if(at.current<Qe.current){const Sn=new Date().getTime()-Qe.current;Me.current=Me.current-Sn}at.current=new Date().getTime()})():(()=>{Me.current!==1/0&&(Qe.current=new Date().getTime(),Et=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Hn()},Me.current))})(),()=>clearTimeout(Et)},[E,g,f,_e,hn,Hn]),Ce.useEffect(()=>{f.delete&&(Hn(),f.onDismiss==null||f.onDismiss.call(f,f))},[Hn,f.delete]);function za(){var Et;if(U!=null&&U.loading){var fn;return Ce.createElement("div",{className:Uc(I==null?void 0:I.loader,f==null||(fn=f.classNames)==null?void 0:fn.loader,"sonner-loader"),"data-visible":_e==="loading"},U.loading)}return Ce.createElement(hUe,{className:Uc(I==null?void 0:I.loader,f==null||(Et=f.classNames)==null?void 0:Et.loader),visible:_e==="loading"})}const $a=f.icon||(U==null?void 0:U[_e])||uUe(_e);var Dn,mr;return Ce.createElement("li",{tabIndex:0,ref:Le,className:Uc(F,Je,I==null?void 0:I.toast,f==null||(e=f.classNames)==null?void 0:e.toast,I==null?void 0:I.default,I==null?void 0:I[_e],f==null||(n=f.classNames)==null?void 0:n[_e]),"data-sonner-toast":"","data-rich-colors":(Dn=f.richColors)!=null?Dn:_,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":G,"data-promise":!!f.promise,"data-swiped":ue,"data-removed":te,"data-visible":pe,"data-y-position":wt,"data-x-position":cn,"data-index":S,"data-front":ae,"data-swiping":de,"data-dismissible":Ue,"data-type":_e,"data-invert":Kn,"data-swipe-out":se,"data-swipe-direction":Z,"data-expanded":!!(E||P&&G),"data-testid":f.testId,style:{"--index":S,"--toasts-before":S,"--z-index":w.length-S,"--offset":`${te?Ne:vt.current}px`,"--initial-height":P?"auto":`${He}px`,...j,...f.style},onDragEnd:()=>{fe(!1),B(null),Tt.current=null},onPointerDown:Et=>{Et.button!==2&&(jn||!Ue||($e.current=new Date,ve(vt.current),Et.target.setPointerCapture(Et.pointerId),Et.target.tagName!=="BUTTON"&&(fe(!0),Tt.current={x:Et.clientX,y:Et.clientY})))},onPointerUp:()=>{var Et,fn,mn;if(se||!Ue)return;Tt.current=null;const Sn=Number(((Et=Le.current)==null?void 0:Et.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vr=Number(((fn=Le.current)==null?void 0:fn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),er=new Date().getTime()-((mn=$e.current)==null?void 0:mn.getTime()),qt=Y==="x"?Sn:vr,Vn=Math.abs(qt)/er;if(Math.abs(qt)>=jUe||Vn>.11){ve(vt.current),f.onDismiss==null||f.onDismiss.call(f,f),le(Y==="x"?Sn>0?"right":"left":vr>0?"down":"up"),Hn(),ce(!0);return}else{var xn,Xn;(xn=Le.current)==null||xn.style.setProperty("--swipe-amount-x","0px"),(Xn=Le.current)==null||Xn.style.setProperty("--swipe-amount-y","0px")}oe(!1),fe(!1),B(null)},onPointerMove:Et=>{var fn,mn,Sn;if(!Tt.current||!Ue||((fn=window.getSelection())==null?void 0:fn.toString().length)>0)return;const er=Et.clientY-Tt.current.y,qt=Et.clientX-Tt.current.x;var Vn;const xn=(Vn=t.swipeDirections)!=null?Vn:RUe(O);!Y&&(Math.abs(qt)>1||Math.abs(er)>1)&&B(Math.abs(qt)>Math.abs(er)?"x":"y");let Xn={x:0,y:0};const ta=us=>1/(1.5+Math.abs(us)/20);if(Y==="y"){if(xn.includes("top")||xn.includes("bottom"))if(xn.includes("top")&&er<0||xn.includes("bottom")&&er>0)Xn.y=er;else{const us=er*ta(er);Xn.y=Math.abs(us)<Math.abs(er)?us:er}}else if(Y==="x"&&(xn.includes("left")||xn.includes("right")))if(xn.includes("left")&&qt<0||xn.includes("right")&&qt>0)Xn.x=qt;else{const us=qt*ta(qt);Xn.x=Math.abs(us)<Math.abs(qt)?us:qt}(Math.abs(Xn.x)>0||Math.abs(Xn.y)>0)&&oe(!0),(mn=Le.current)==null||mn.style.setProperty("--swipe-amount-x",`${Xn.x}px`),(Sn=Le.current)==null||Sn.style.setProperty("--swipe-amount-y",`${Xn.y}px`)}},Ae&&!f.jsx&&_e!=="loading"?Ce.createElement("button",{"aria-label":W,"data-disabled":jn,"data-close-button":!0,onClick:jn||!Ue?()=>{}:()=>{Hn(),f.onDismiss==null||f.onDismiss.call(f,f)},className:Uc(I==null?void 0:I.closeButton,f==null||(r=f.classNames)==null?void 0:r.closeButton)},(mr=U==null?void 0:U.close)!=null?mr:vUe):null,(_e||f.icon||f.promise)&&f.icon!==null&&((U==null?void 0:U[_e])!==null||f.icon)?Ce.createElement("div",{"data-icon":"",className:Uc(I==null?void 0:I.icon,f==null||(s=f.classNames)==null?void 0:s.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||za():null,f.type!=="loading"?$a:null):null,Ce.createElement("div",{"data-content":"",className:Uc(I==null?void 0:I.content,f==null||(a=f.classNames)==null?void 0:a.content)},Ce.createElement("div",{"data-title":"",className:Uc(I==null?void 0:I.title,f==null||(i=f.classNames)==null?void 0:i.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?Ce.createElement("div",{"data-description":"",className:Uc(R,qe,I==null?void 0:I.description,f==null||(o=f.classNames)==null?void 0:o.description)},typeof f.description=="function"?f.description():f.description):null),Ce.isValidElement(f.cancel)?f.cancel:f.cancel&&DC(f.cancel)?Ce.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||D,onClick:Et=>{DC(f.cancel)&&Ue&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Et),Hn())},className:Uc(I==null?void 0:I.cancelButton,f==null||(l=f.classNames)==null?void 0:l.cancelButton)},f.cancel.label):null,Ce.isValidElement(f.action)?f.action:f.action&&DC(f.action)?Ce.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||z,onClick:Et=>{DC(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Et),!Et.defaultPrevented&&Hn())},className:Uc(I==null?void 0:I.actionButton,f==null||(u=f.classNames)==null?void 0:u.actionButton)},f.action.label):null)};function dq(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function IUe(t,e){const n={};return[t,e].forEach((r,s)=>{const a=s===1,i=a?"--mobile-offset":"--offset",o=a?TUe:_Ue;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=o:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const OUe=Ce.forwardRef(function(e,n){const{id:r,invert:s,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:d,mobileOffset:f,theme:m="light",richColors:g,duration:x,style:b,visibleToasts:C=EUe,toastOptions:S,dir:w=dq(),gap:E=NUe,icons:T,containerAriaLabel:_="Notifications"}=e,[A,j]=Ce.useState([]),D=Ce.useMemo(()=>r?A.filter(G=>G.toasterId===r):A.filter(G=>!G.toasterId),[A,r]),z=Ce.useMemo(()=>Array.from(new Set([a].concat(D.filter(G=>G.position).map(G=>G.position)))),[D,a]),[F,R]=Ce.useState([]),[L,O]=Ce.useState(!1),[H,P]=Ce.useState(!1),[I,U]=Ce.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=Ce.useRef(null),Y=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=Ce.useRef(null),Z=Ce.useRef(!1),le=Ce.useCallback(G=>{j(K=>{var te;return(te=K.find(ie=>ie.id===G.id))!=null&&te.delete||Ji.dismiss(G.id),K.filter(({id:ie})=>ie!==G.id)})},[]);return Ce.useEffect(()=>Ji.subscribe(G=>{if(G.dismiss){requestAnimationFrame(()=>{j(K=>K.map(te=>te.id===G.id?{...te,delete:!0}:te))});return}setTimeout(()=>{nk.flushSync(()=>{j(K=>{const te=K.findIndex(ie=>ie.id===G.id);return te!==-1?[...K.slice(0,te),{...K[te],...G},...K.slice(te+1)]:[G,...K]})})})}),[A]),Ce.useEffect(()=>{if(m!=="system"){U(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;const G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:K})=>{U(K?"dark":"light")})}catch{G.addListener(({matches:te})=>{try{U(te?"dark":"light")}catch(ie){console.error(ie)}})}},[m]),Ce.useEffect(()=>{A.length<=1&&O(!1)},[A]),Ce.useEffect(()=>{const G=K=>{var te;if(i.every(fe=>K[fe]||K.code===fe)){var de;O(!0),(de=W.current)==null||de.focus()}K.code==="Escape"&&(document.activeElement===W.current||(te=W.current)!=null&&te.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[i]),Ce.useEffect(()=>{if(W.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,Z.current=!1)}},[W.current]),Ce.createElement("section",{ref:n,"aria-label":`${_} ${Y}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},z.map((G,K)=>{var te;const[ie,de]=G.split("-");return D.length?Ce.createElement("ol",{key:G,dir:w==="auto"?dq():w,tabIndex:-1,ref:W,className:u,"data-sonner-toaster":!0,"data-sonner-theme":I,"data-y-position":ie,"data-x-position":de,style:{"--front-toast-height":`${((te=F[0])==null?void 0:te.height)||0}px`,"--width":`${AUe}px`,"--gap":`${E}px`,...b,...IUe(d,f)},onBlur:fe=>{Z.current&&!fe.currentTarget.contains(fe.relatedTarget)&&(Z.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,B.current=fe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{H||O(!1)},onDragEnd:()=>O(!1),onPointerDown:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},D.filter(fe=>!fe.position&&K===0||fe.position===G).map((fe,se)=>{var ce,ue;return Ce.createElement(MUe,{key:fe.id,icons:T,index:se,toast:fe,defaultRichColors:g,duration:(ce=S==null?void 0:S.duration)!=null?ce:x,className:S==null?void 0:S.className,descriptionClassName:S==null?void 0:S.descriptionClassName,invert:s,visibleToasts:C,closeButton:(ue=S==null?void 0:S.closeButton)!=null?ue:l,interacting:H,position:G,style:S==null?void 0:S.style,unstyled:S==null?void 0:S.unstyled,classNames:S==null?void 0:S.classNames,cancelButtonStyle:S==null?void 0:S.cancelButtonStyle,actionButtonStyle:S==null?void 0:S.actionButtonStyle,closeButtonAriaLabel:S==null?void 0:S.closeButtonAriaLabel,removeToast:le,toasts:D.filter(oe=>oe.position==fe.position),heights:F.filter(oe=>oe.position==fe.position),setHeights:R,expandByDefault:o,gap:E,expanded:L,swipeDirections:e.swipeDirections})})):null}))}),PUe=({...t})=>{const{theme:e="system"}=lUe();return c.jsx(OUe,{className:"toaster group text-theme-0",icons:{success:c.jsx(_l,{className:"size-4"}),info:c.jsx(S0,{className:"size-4"}),warning:c.jsx(vZ,{className:"size-4"}),error:c.jsx(r_e,{className:"size-4"}),loading:c.jsx(js,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--bcbackground-0, #fff)","--normal-text":"var(--bctext-0, #273540)","--success-text":"oklch(72.3% 0.219 149.579)","--error-text":"oklch(63.7% 0.237 25.331)","--normal-border":"var(--bcborders, #e8eaec)","--border-radius":"var(--radius)"},...t})},hq=(t,e,n)=>{typeof n=="string"||n instanceof Blob?t.append(e,n):n instanceof Date?t.append(e,n.toISOString()):t.append(e,JSON.stringify(n))},FUe={bodySerializer:t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{r!=null&&(Array.isArray(r)?r.forEach(s=>hq(e,n,s)):hq(e,n,r))}),e}},BUe={bodySerializer:t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString():n)},LUe=({onRequest:t,onSseError:e,onSseEvent:n,responseTransformer:r,responseValidator:s,sseDefaultRetryDelay:a,sseMaxRetryAttempts:i,sseMaxRetryDelay:o,sseSleepFn:l,url:u,...d})=>{let f;const m=l??(b=>new Promise(C=>setTimeout(C,b)));return{stream:async function*(){let b=a??3e3,C=0;const S=d.signal??new AbortController().signal;for(;!S.aborted;){C++;const w=d.headers instanceof Headers?d.headers:new Headers(d.headers);f!==void 0&&w.set("Last-Event-ID",f);try{const E={redirect:"follow",...d,body:d.serializedBody,headers:w,signal:S};let T=new Request(u,E);t&&(T=await t(u,E));const A=await(d.fetch??globalThis.fetch)(T);if(!A.ok)throw new Error(`SSE failed: ${A.status} ${A.statusText}`);if(!A.body)throw new Error("No body in SSE response");const j=A.body.pipeThrough(new TextDecoderStream).getReader();let D="";const z=()=>{try{j.cancel()}catch{}};S.addEventListener("abort",z);try{for(;;){const{done:F,value:R}=await j.read();if(F)break;D+=R,D=D.replace(/\r\n/g,`
`).replace(/\r/g,`
`);const L=D.split(`

`);D=L.pop()??"";for(const O of L){const H=O.split(`
`),P=[];let I;for(const Y of H)if(Y.startsWith("data:"))P.push(Y.replace(/^data:\s*/,""));else if(Y.startsWith("event:"))I=Y.replace(/^event:\s*/,"");else if(Y.startsWith("id:"))f=Y.replace(/^id:\s*/,"");else if(Y.startsWith("retry:")){const B=Number.parseInt(Y.replace(/^retry:\s*/,""),10);Number.isNaN(B)||(b=B)}let U,W=!1;if(P.length){const Y=P.join(`
`);try{U=JSON.parse(Y),W=!0}catch{U=Y}}W&&(s&&await s(U),r&&(U=await r(U))),n==null||n({data:U,event:I,id:f,retry:b}),P.length&&(yield U)}}}finally{S.removeEventListener("abort",z),j.releaseLock()}break}catch(E){if(e==null||e(E),i!==void 0&&C>=i)break;const T=Math.min(b*2**(C-1),o??3e4);await m(T)}}}()}},zUe=t=>{switch(t){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},$Ue=t=>{switch(t){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},UUe=t=>{switch(t){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},uie=({allowReserved:t,explode:e,name:n,style:r,value:s})=>{if(!e){const o=(t?s:s.map(l=>encodeURIComponent(l))).join($Ue(r));switch(r){case"label":return`.${o}`;case"matrix":return`;${n}=${o}`;case"simple":return o;default:return`${n}=${o}`}}const a=zUe(r),i=s.map(o=>r==="label"||r==="simple"?t?o:encodeURIComponent(o):bE({allowReserved:t,name:n,value:o})).join(a);return r==="label"||r==="matrix"?a+i:i},bE=({allowReserved:t,name:e,value:n})=>{if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${t?n:encodeURIComponent(n)}`},die=({allowReserved:t,explode:e,name:n,style:r,value:s,valueOnly:a})=>{if(s instanceof Date)return a?s.toISOString():`${n}=${s.toISOString()}`;if(r!=="deepObject"&&!e){let l=[];Object.entries(s).forEach(([d,f])=>{l=[...l,d,t?f:encodeURIComponent(f)]});const u=l.join(",");switch(r){case"form":return`${n}=${u}`;case"label":return`.${u}`;case"matrix":return`;${n}=${u}`;default:return u}}const i=UUe(r),o=Object.entries(s).map(([l,u])=>bE({allowReserved:t,name:r==="deepObject"?`${n}[${l}]`:l,value:u})).join(i);return r==="label"||r==="matrix"?i+o:o},HUe=/\{[^{}]+\}/g,VUe=({path:t,url:e})=>{let n=e;const r=e.match(HUe);if(r)for(const s of r){let a=!1,i=s.substring(1,s.length-1),o="simple";i.endsWith("*")&&(a=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(i=i.substring(1),o="label"):i.startsWith(";")&&(i=i.substring(1),o="matrix");const l=t[i];if(l==null)continue;if(Array.isArray(l)){n=n.replace(s,uie({explode:a,name:i,style:o,value:l}));continue}if(typeof l=="object"){n=n.replace(s,die({explode:a,name:i,style:o,value:l,valueOnly:!0}));continue}if(o==="matrix"){n=n.replace(s,`;${bE({name:i,value:l})}`);continue}const u=encodeURIComponent(o==="label"?`.${l}`:l);n=n.replace(s,u)}return n},qUe=({baseUrl:t,path:e,query:n,querySerializer:r,url:s})=>{const a=s.startsWith("/")?s:`/${s}`;let i=(t??"")+a;e&&(i=VUe({path:e,url:i}));let o=n?r(n):"";return o.startsWith("?")&&(o=o.substring(1)),o&&(i+=`?${o}`),i};function fq(t){const e=t.body!==void 0;if(e&&t.bodySerializer)return"serializedBody"in t?t.serializedBody!==void 0&&t.serializedBody!==""?t.serializedBody:null:t.body!==""?t.body:null;if(e)return t.body}const GUe=async(t,e)=>{const n=typeof e=="function"?await e(t):e;if(n)return t.scheme==="bearer"?`Bearer ${n}`:t.scheme==="basic"?`Basic ${btoa(n)}`:n},hie=({parameters:t={},...e}={})=>r=>{const s=[];if(r&&typeof r=="object")for(const a in r){const i=r[a];if(i==null)continue;const o=t[a]||e;if(Array.isArray(i)){const l=uie({allowReserved:o.allowReserved,explode:!0,name:a,style:"form",value:i,...o.array});l&&s.push(l)}else if(typeof i=="object"){const l=die({allowReserved:o.allowReserved,explode:!0,name:a,style:"deepObject",value:i,...o.object});l&&s.push(l)}else{const l=bE({allowReserved:o.allowReserved,name:a,value:i});l&&s.push(l)}}return s.join("&")},WUe=t=>{var n;if(!t)return"stream";const e=(n=t.split(";")[0])==null?void 0:n.trim();if(e){if(e.startsWith("application/json")||e.endsWith("+json"))return"json";if(e==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(r=>e.startsWith(r)))return"blob";if(e.startsWith("text/"))return"text"}},KUe=(t,e)=>{var n,r;return e?!!(t.headers.has(e)||(n=t.query)!=null&&n[e]||(r=t.headers.get("Cookie"))!=null&&r.includes(`${e}=`)):!1},YUe=async({security:t,...e})=>{for(const n of t){if(KUe(e,n.name))continue;const r=await GUe(n,e.auth);if(!r)continue;const s=n.name??"Authorization";switch(n.in){case"query":e.query||(e.query={}),e.query[s]=r;break;case"cookie":e.headers.append("Cookie",`${s}=${r}`);break;case"header":default:e.headers.set(s,r);break}}},mq=t=>qUe({baseUrl:t.baseUrl,path:t.path,query:t.query,querySerializer:typeof t.querySerializer=="function"?t.querySerializer:hie(t.querySerializer),url:t.url}),pq=(t,e)=>{var r;const n={...t,...e};return(r=n.baseUrl)!=null&&r.endsWith("/")&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=fie(t.headers,e.headers),n},XUe=t=>{const e=[];return t.forEach((n,r)=>{e.push([r,n])}),e},fie=(...t)=>{const e=new Headers;for(const n of t){if(!n)continue;const r=n instanceof Headers?XUe(n):Object.entries(n);for(const[s,a]of r)if(a===null)e.delete(s);else if(Array.isArray(a))for(const i of a)e.append(s,i);else a!==void 0&&e.set(s,typeof a=="object"?JSON.stringify(a):a)}return e};class a6{constructor(){Ie(this,"fns",[])}clear(){this.fns=[]}eject(e){const n=this.getInterceptorIndex(e);this.fns[n]&&(this.fns[n]=null)}exists(e){const n=this.getInterceptorIndex(e);return!!this.fns[n]}getInterceptorIndex(e){return typeof e=="number"?this.fns[e]?e:-1:this.fns.indexOf(e)}update(e,n){const r=this.getInterceptorIndex(e);return this.fns[r]?(this.fns[r]=n,e):!1}use(e){return this.fns.push(e),this.fns.length-1}}const JUe=()=>({error:new a6,request:new a6,response:new a6}),QUe=hie({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),ZUe={"Content-Type":"application/json"},mie=(t={})=>({...BUe,headers:ZUe,parseAs:"auto",querySerializer:QUe,...t}),eHe=(t={})=>{let e=pq(mie(),t);const n=()=>({...e}),r=u=>(e=pq(e,u),n()),s=JUe(),a=async u=>{const d={...e,...u,fetch:u.fetch??e.fetch??globalThis.fetch,headers:fie(e.headers,u.headers),serializedBody:void 0};d.security&&await YUe({...d,security:d.security}),d.requestValidator&&await d.requestValidator(d),d.body!==void 0&&d.bodySerializer&&(d.serializedBody=d.bodySerializer(d.body)),(d.body===void 0||d.serializedBody==="")&&d.headers.delete("Content-Type");const f=mq(d);return{opts:d,url:f}},i=async u=>{const{opts:d,url:f}=await a(u),m={redirect:"follow",...d,body:fq(d)};let g=new Request(f,m);for(const _ of s.request.fns)_&&(g=await _(g,d));const x=d.fetch;let b;try{b=await x(g)}catch(_){let A=_;for(const j of s.error.fns)j&&(A=await j(_,void 0,g,d));if(A=A||{},d.throwOnError)throw A;return d.responseStyle==="data"?void 0:{error:A,request:g,response:void 0}}for(const _ of s.response.fns)_&&(b=await _(b,g,d));const C={request:g,response:b};if(b.ok){const _=(d.parseAs==="auto"?WUe(b.headers.get("Content-Type")):d.parseAs)??"json";if(b.status===204||b.headers.get("Content-Length")==="0"){let j;switch(_){case"arrayBuffer":case"blob":case"text":j=await b[_]();break;case"formData":j=new FormData;break;case"stream":j=b.body;break;case"json":default:j={};break}return d.responseStyle==="data"?j:{data:j,...C}}let A;switch(_){case"arrayBuffer":case"blob":case"formData":case"text":A=await b[_]();break;case"json":{const j=await b.text();A=j?JSON.parse(j):{};break}case"stream":return d.responseStyle==="data"?b.body:{data:b.body,...C}}return _==="json"&&(d.responseValidator&&await d.responseValidator(A),d.responseTransformer&&(A=await d.responseTransformer(A))),d.responseStyle==="data"?A:{data:A,...C}}const S=await b.text();let w;try{w=JSON.parse(S)}catch{}const E=w??S;let T=E;for(const _ of s.error.fns)_&&(T=await _(E,b,g,d));if(T=T||{},d.throwOnError)throw T;return d.responseStyle==="data"?void 0:{error:T,...C}},o=u=>d=>i({...d,method:u}),l=u=>async d=>{const{opts:f,url:m}=await a(d);return LUe({...f,body:f.body,headers:f.headers,method:u,onRequest:async(g,x)=>{let b=new Request(g,x);for(const C of s.request.fns)C&&(b=await C(b,f));return b},serializedBody:fq(f),url:m})};return{buildUrl:mq,connect:o("CONNECT"),delete:o("DELETE"),get:o("GET"),getConfig:n,head:o("HEAD"),interceptors:s,options:o("OPTIONS"),patch:o("PATCH"),post:o("POST"),put:o("PUT"),request:i,setConfig:r,sse:{connect:l("CONNECT"),delete:l("DELETE"),get:l("GET"),head:l("HEAD"),options:l("OPTIONS"),patch:l("PATCH"),post:l("POST"),put:l("PUT"),trace:l("TRACE")},trace:o("TRACE")}},pi=eHe(mie()),pie=t=>(t.client??pi).sse.post({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{notebook_id}/chat/{chat_id}/message",...t,headers:{"Content-Type":"application/json",...t.headers}}),tHe=t=>pi.get({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks",...t}),nHe=t=>((t==null?void 0:t.client)??pi).post({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks",...t,headers:{"Content-Type":"application/json",...t==null?void 0:t.headers}}),rHe=t=>(t.client??pi).delete({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}",...t}),sHe=t=>(t.client??pi).put({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}",...t,headers:{"Content-Type":"application/json",...t.headers}}),aHe=t=>((t==null?void 0:t.client)??pi).post({security:[{scheme:"bearer",type:"http"}],url:"/study/file_notebooks",...t,headers:{"Content-Type":"application/json",...t==null?void 0:t.headers}}),gq=t=>(t.client??pi).post({...FUe,security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}/documents",...t,headers:{"Content-Type":null,...t.headers}}),iHe=t=>(t.client??pi).delete({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}/documents/{doc_id}",...t}),oHe=t=>(t.client??pi).put({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}/documents/{doc_id}",...t,headers:{"Content-Type":"application/json",...t.headers}}),lHe=t=>(t.client??pi).get({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{notebook_id}/documents/{document_id}/chunks/{chunk_id}",...t}),cHe=t=>((t==null?void 0:t.client)??pi).get({security:[{scheme:"bearer",type:"http"}],url:"/study/documents/limits",...t}),uHe=t=>(t.client??pi).get({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{notebook_id}/documents/{notebook_document_id}/file",...t}),dHe=t=>(t.client??pi).post({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}/highlights",...t,headers:{"Content-Type":"application/json",...t.headers}}),hHe=t=>(t.client??pi).delete({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}/highlights/{highlight_id}",...t}),fHe=t=>(t.client??pi).get({security:[{scheme:"bearer",type:"http"}],url:"/study/notebooks/{id}/highlights/{highlight_id}",...t});function mHe(t,e){switch(e.type){case"SET_NOTEBOOKS":{const n=Object.fromEntries(e.notebooks.map(r=>[r.id,r]));return{...t,notebooks:n}}case"SET_SELECTED_NOTEBOOK":{if(e.id===null)return{...t,selectedNotebookId:null,selectedSourceIds:new Set,currentPage:{type:"chat"}};const n=t.notebooks[e.id];return n?{...t,selectedNotebookId:e.id,selectedSourceIds:new Set(n.notebook_documents.map(r=>r.id)),currentPage:{type:"chat"}}:t}case"ADD_NOTEBOOK":return{...t,notebooks:{...t.notebooks,[e.notebook.id]:e.notebook},selectedNotebookId:e.notebook.id,selectedSourceIds:new Set(e.notebook.notebook_documents.map(n=>n.id)),createFlowStep:"files_init",currentPage:{type:"chat"}};case"UPDATE_NOTEBOOK":{const n=t.notebooks[e.id];return n?{...t,notebooks:{...t.notebooks,[e.id]:{...n,...e.notebook}}}:t}case"DELETE_NOTEBOOK":{const{[e.id]:n,...r}=t.notebooks,s=Object.keys(r).map(Number);let a=t.selectedNotebookId,i=t.createFlowStep;return t.selectedNotebookId===e.id&&(s.length===0?(a=null,i="landing"):a=s[0]),{...t,notebooks:r,selectedNotebookId:a,createFlowStep:i,...a===null?{selectedSourceIds:new Set}:{}}}case"ADD_SOURCE":{const n=t.notebooks[e.notebookId];if(!n)return t;const r=n.notebook_documents.find(s=>s.document_id===e.source.document_id)?[...n.notebook_documents]:[e.source,...n.notebook_documents];return{...t,notebooks:{...t.notebooks,[e.notebookId]:{...n,notebook_documents:r}},selectedSourceIds:new Set([...t.selectedSourceIds,e.source.id])}}case"UPDATE_SOURCE":{const n=t.notebooks[e.notebookId];if(!n)return t;const r=n.notebook_documents.map(a=>a.id===e.source.id?e.source:a);let s=t.currentPage;return t.currentPage.type==="source"&&t.currentPage.value.id===e.source.id&&(s={type:"source",value:e.source}),{...t,notebooks:{...t.notebooks,[e.notebookId]:{...n,notebook_documents:r}},currentPage:s}}case"REMOVE_SOURCE":{const n=t.notebooks[e.notebookId];if(!n)return t;const r=n.notebook_documents.filter(i=>i.id!==e.sourceId),s=new Set(t.selectedSourceIds);s.delete(e.sourceId);let a=t.currentPage;return t.currentPage.type==="source"&&t.currentPage.value.id===e.sourceId&&(a={type:"chat"}),{...t,notebooks:{...t.notebooks,[e.notebookId]:{...n,notebook_documents:r}},selectedSourceIds:s,currentPage:a}}case"ADD_HIGHLIGHT":{const n=t.notebooks[e.notebookId];return!n||n.highlights.find(s=>s.id===e.highlight.id)?t:{...t,notebooks:{...t.notebooks,[e.notebookId]:{...n,highlights:[...n.highlights,e.highlight]}}}}case"UPDATE_HIGHLIGHT":{const n=t.notebooks[e.notebookId];if(!n)return t;const r=n.highlights.map(a=>a.id===e.highlight.id?e.highlight:a);let s=t.currentPage;return t.currentPage.type==="highlight"&&t.currentPage.value.id===e.highlight.id&&(s={type:"highlight",value:e.highlight}),{...t,notebooks:{...t.notebooks,[e.notebookId]:{...n,highlights:r}},currentPage:s}}case"REMOVE_HIGHLIGHT":{const n=t.notebooks[e.notebookId];return n?{...t,notebooks:{...t.notebooks,[e.notebookId]:{...n,highlights:n.highlights.filter(r=>r.id!==e.highlightId)}}}:t}case"SET_SELECTED_SOURCES":return{...t,selectedSourceIds:new Set(e.sourceIds)};case"ADD_SELECTED_SOURCE":return t.selectedSourceIds.has(e.sourceId)?t:{...t,selectedSourceIds:new Set([...t.selectedSourceIds,e.sourceId])};case"REMOVE_SELECTED_SOURCE":return{...t,selectedSourceIds:new Set([...t.selectedSourceIds].filter(n=>n!==e.sourceId))};case"CLEAR_SELECTED_SOURCES":return{...t,selectedSourceIds:new Set};case"SET_COURSE_FILES":return{...t,courseFiles:e.files};case"SET_LOADING_SOURCES":return{...t,loadingSources:e.loading};case"SET_CREATE_FLOW_STEP":return{...t,createFlowStep:e.step};case"SET_CURRENT_PAGE":{if(t.currentPage.type==="source"){if(e.page.type==="highlight")return{...t,currentPage:{type:"source_highlight",source:t.currentPage.value,highlight:e.page.value}};if(e.page.type==="highlight_category")return{...t,currentPage:{type:"source_highlight_category",source:t.currentPage.value,highlight_category:e.page.value}}}else if(t.currentPage.type==="source_highlight"){if(e.page.type==="highlight")return{...t,currentPage:{type:"source_highlight",source:t.currentPage.source,highlight:e.page.value}};if(e.page.type==="highlight_category")return{...t,currentPage:{type:"source_highlight_category",source:t.currentPage.source,highlight_category:e.page.value}}}else if(t.currentPage.type==="source_highlight_category"){if(e.page.type==="highlight")return{...t,currentPage:{type:"source_highlight",source:t.currentPage.source,highlight:e.page.value}};if(e.page.type==="highlight_category")return{...t,currentPage:{type:"source_highlight_category",source:t.currentPage.source,highlight_category:e.page.value}}}return{...t,currentPage:e.page}}case"CACHE_SOURCE_URL":return{...t,sourceUrlCache:{...t.sourceUrlCache,[e.sourceId]:e.url}};default:return t}}const gie=y.createContext(null);function pHe({defaultNotebook:t,allNotebooks:e,children:n}){const r={notebooks:Object.fromEntries(e.map(P=>[P.id,P])),selectedNotebookId:(t==null?void 0:t.id)??null,selectedSourceIds:new Set((t==null?void 0:t.notebook_documents.map(P=>P.id))??[]),courseFiles:[],loadingSources:!1,createFlowStep:"landing",currentPage:{type:"chat"},sourceUrlCache:{}};console.log("INTIIAL",r);const[s,a]=y.useReducer(mHe,r),{sendMessageAndListen:i}=ut(),{authUser:o}=wa(),l=s.selectedNotebookId?s.notebooks[s.selectedNotebookId]??null:null,u=y.useMemo(()=>Object.values(s.notebooks).sort((P,I)=>I.id-P.id),[s.notebooks]),d=(l==null?void 0:l.notebook_documents)??[],f=y.useMemo(()=>d.filter(P=>s.selectedSourceIds.has(P.id)),[d,s.selectedSourceIds]),m=(l==null?void 0:l.highlights)??[];y.useEffect(()=>{l&&(async()=>{a({type:"SET_LOADING_SOURCES",loading:!0});const P=await i({type:"CALL_EXTENSION_FUNC",payload:{func:"fetchCourseFiles",args:{course_id:l.course_id.toString()}}});P.success&&P.data&&a({type:"SET_COURSE_FILES",files:P.data}),a({type:"SET_LOADING_SOURCES",loading:!1})})()},[l==null?void 0:l.id]);const g=y.useCallback(async P=>{a({type:"SET_SELECTED_NOTEBOOK",id:P.id});const I=s.notebooks[P.id];if(I){const U=I.notebook_documents.length===0?"files_init":"done";a({type:"SET_CREATE_FLOW_STEP",step:U})}},[s.notebooks]),x=y.useCallback(P=>{a({type:"SET_SELECTED_SOURCES",sourceIds:P.map(I=>I.id)})},[]),b=y.useCallback(P=>{a({type:"ADD_SELECTED_SOURCE",sourceId:P.id})},[]),C=y.useCallback(P=>{a({type:"REMOVE_SELECTED_SOURCE",sourceId:P.id})},[]),S=y.useCallback(()=>{a({type:"CLEAR_SELECTED_SOURCES"})},[]),w=y.useCallback(async P=>{l&&a({type:"ADD_SOURCE",notebookId:P.notebook_id||l.id,source:P})},[l]),E=y.useCallback(async P=>{if(l)try{a({type:"REMOVE_SOURCE",notebookId:l.id,sourceId:P.id}),await iHe({path:{id:P.notebook_id.toString(),doc_id:P.id.toString()}})}catch(I){console.error(I),Ts.error("Failed to remove source from study set.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(I)})})}},[l]),T=y.useCallback(async P=>{if(l)try{await oHe({path:{id:P.notebook_id.toString(),doc_id:P.id.toString()},body:{name:P.name}}),a({type:"UPDATE_SOURCE",notebookId:l.id,source:P})}catch(I){console.error(I),Ts.error("Failed to edit source.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(I)})})}},[l]),_=y.useCallback(async P=>{if(P.id)try{const{data:I,error:U}=await sHe({path:{id:P.id.toString()},body:{name:P.name,assignment_id:P.assignment_id,...P.metadata?{metadata:P.metadata}:{}}});if(U)throw U;a({type:"UPDATE_NOTEBOOK",id:P.id,notebook:I})}catch(I){console.error(I),Ts.error("Failed to rename notebook.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(I)})})}},[]),A=y.useCallback(async P=>{if(P.id)try{const{error:I}=await rHe({path:{id:P.id.toString()}});if(I)throw I;a({type:"DELETE_NOTEBOOK",id:P.id})}catch(I){console.error(I),Ts.error("Failed to delete notebook.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(I)})})}},[]),j=y.useCallback(async P=>{const{data:I}=await i({type:"CALL_EXTENSION_FUNC",payload:{func:"getDomain"}}),{data:U,error:W}=P.fileId?await aHe({body:{user_id:o.id,course_id:P.course.id.toString(),...P.exam?{assignment_id:P.exam.id}:{},name:P.name,school_url:I,metadata:{school_url:I,assignment:P.exam||{},course:P.course||{}},type:P.fileId}}):await nHe({body:{user_id:o.id,course_id:P.course.id.toString(),...P.exam?{assignment_id:P.exam.id}:{},name:P.name,school_url:I,metadata:{school_url:I,assignment:P.exam||{},course:P.course||{}}}});if(W)throw Ts.error("Error creating notebook",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(W)})}),W;const Y={...U,notebook_documents:"notebook_documents"in U?U.notebook_documents:[],highlights:"highlights"in U?U.highlights:[]};return a({type:"ADD_NOTEBOOK",notebook:Y}),Y},[o,i]),D=y.useCallback(P=>{l&&a({type:"ADD_HIGHLIGHT",notebookId:l.id,highlight:P})},[l]),z=y.useCallback(async P=>{if(l)try{await hHe({path:{id:l.id.toString(),highlight_id:P.id.toString()}}),a({type:"REMOVE_HIGHLIGHT",notebookId:l.id,highlightId:P.id})}catch(I){console.error(I),Ts.error("Failed to delete material.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(I)})})}},[l]),F=y.useCallback(async P=>{if(l){if(P.contents)return P.contents;try{const{data:I,error:U}=await fHe({path:{id:P.notebook_id.toString(),highlight_id:P.id.toString()}});if(U)throw U;return a({type:"UPDATE_HIGHLIGHT",notebookId:l.id,highlight:I}),I.contents}catch(I){console.error(I),Ts.error(`Failed to retrieve ${P.type} contents.`,{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(I)})});return}}},[l]),R=y.useCallback(async P=>{if(s.sourceUrlCache[P.id])return s.sourceUrlCache[P.id];const I=await uHe({path:{notebook_id:P.notebook_id.toString(),notebook_document_id:P.id.toString()}});return a({type:"CACHE_SOURCE_URL",sourceId:P.id,url:I.data.url}),I.data.url},[s.sourceUrlCache]),L=y.useCallback(P=>{a({type:"SET_CREATE_FLOW_STEP",step:P})},[]),O=y.useCallback(P=>{a({type:"SET_CURRENT_PAGE",page:P})},[]),H=y.useMemo(()=>({notebook:l,notebooks:u,sources:d,selectedSources:f,courseFiles:s.courseFiles,loadingSources:s.loadingSources||l&&l.course_id&&!!s.courseFiles.find(P=>P.metadata.canvas_course_id!==l.course_id),createFlowStep:s.createFlowStep,highlights:m,currentPage:s.currentPage,setNotebook:g,setSelectedSources:x,addSelectedSource:b,removeSelectedSource:C,clearSelectedSources:S,addSource:w,removeSource:E,editSource:T,editNotebook:_,deleteNotebook:A,createNotebook:j,addHighlight:D,removeHighlight:z,getHighlightContents:F,getSourceUrl:R,setCreateFlowStep:L,navigatePage:O}),[l,u,d,f,s.courseFiles,s.loadingSources,s.createFlowStep,m,s.currentPage,g,x,b,C,S,w,E,T,_,A,j,D,z,F,R,L,O]);return c.jsx(gie.Provider,{value:H,children:n})}function os(){const t=y.useContext(gie);if(!t)throw new Error("useNotebookContext must be used within a NotebookProvider");return t}const i6=768;function gHe(){const[t,e]=y.useState(void 0);return y.useEffect(()=>{const n=window.matchMedia(`(max-width: ${i6-1}px)`),r=()=>{e(window.innerWidth<i6)};return n.addEventListener("change",r),e(window.innerWidth<i6),()=>n.removeEventListener("change",r)},[]),!!t}const vHe=Oi("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"border-input bg-transparent",theme:"border-theme bg-theme-0 text-theme-0 font-theme",search:"border-theme bg-theme-0 text-theme-0 font-theme pl-9"}},defaultVariants:{variant:"theme"}});function wE({className:t,type:e,variant:n="theme",...r}){return c.jsxs("div",{className:"relative",children:[n==="search"&&c.jsx(hR,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-theme-2"}),c.jsx("input",{type:e,"data-slot":"input",className:ge(vHe({variant:n}),t),...r})]})}function yHe({...t}){return c.jsx(Jee,{"data-slot":"sheet",...t})}function xHe({...t}){return c.jsx(Qee,{"data-slot":"sheet-portal",...t})}function bHe({className:t,...e}){return c.jsx(Zee,{"data-slot":"sheet-overlay",className:ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function wHe({className:t,children:e,side:n="right",...r}){return c.jsxs(xHe,{children:[c.jsx(bHe,{}),c.jsxs(ete,{"data-slot":"sheet-content",className:ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,c.jsxs(IR,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[c.jsx(ys,{className:"size-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function CHe({className:t,...e}){return c.jsx("div",{"data-slot":"sheet-header",className:ge("flex flex-col gap-1.5 p-4",t),...e})}function SHe({className:t,...e}){return c.jsx(tte,{"data-slot":"sheet-title",className:ge("text-foreground font-semibold",t),...e})}function kHe({className:t,...e}){return c.jsx(nte,{"data-slot":"sheet-description",className:ge("text-muted-foreground text-sm",t),...e})}function EHe({className:t,...e}){return c.jsx("div",{"data-slot":"skeleton",className:ge("bg-accent animate-pulse rounded-md",t),...e})}const _He="sidebar_state",THe=3600*24*7,AHe="16rem",NHe="18rem",jHe="3.5rem",DHe="b",vie=y.createContext(null);function ww(){const t=y.useContext(vie);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function n5({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:a,...i}){const o=gHe(),[l,u]=y.useState(!1),[d,f]=y.useState(t),m=e??d,g=y.useCallback(S=>{const w=typeof S=="function"?S(m):S;n?n(w):f(w),document.cookie=`${_He}=${w}; path=/; max-age=${THe}`},[n,m]),x=y.useCallback(()=>o?u(S=>!S):g(S=>!S),[o,g,u]);y.useEffect(()=>{const S=w=>{w.key===DHe&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),x())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[x]);const b=m?"expanded":"collapsed",C=y.useMemo(()=>({state:b,open:m,setOpen:g,isMobile:o,openMobile:l,setOpenMobile:u,toggleSidebar:x}),[b,m,g,o,l,u,x]);return c.jsx(vie.Provider,{value:C,children:c.jsx(yc,{delayDuration:0,children:c.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":AHe,"--sidebar-width-icon":jHe,...s},className:ge("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...i,children:a})})})}function yie({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...a}){const{isMobile:i,state:o,openMobile:l,setOpenMobile:u}=ww();return n==="none"?c.jsx("div",{"data-slot":"sidebar",className:ge("bg-theme-0 text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",r),...a,children:s}):i?c.jsx(yHe,{open:l,onOpenChange:u,...a,children:c.jsxs(wHe,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-theme-1 text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":NHe},side:t,children:[c.jsxs(CHe,{className:"sr-only",children:[c.jsx(SHe,{children:"Sidebar"}),c.jsx(kHe,{children:"Displays the mobile sidebar."})]}),c.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):c.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":o,"data-collapsible":o==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[c.jsx("div",{"data-slot":"sidebar-gap",className:ge("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),c.jsx("div",{"data-slot":"sidebar-container",className:ge("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r-1 border-theme group-data-[side=right]:border-l",r),...a,children:c.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-theme-0 group-data-[variant=floating]:border- flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:s})})]})}function RHe({className:t,onClick:e,...n}){const{toggleSidebar:r}=ww();return c.jsxs(vn,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:ge("size-7",t),onClick:s=>{e==null||e(s),r()},...n,children:[c.jsx(o_e,{}),c.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function xie({className:t,...e}){const{toggleSidebar:n}=ww();return c.jsx("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:ge("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})}function MHe({className:t,...e}){return c.jsx("main",{"data-slot":"sidebar-inset",className:ge("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...e})}function vq({className:t,...e}){return c.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:ge("flex flex-col gap-2 p-2",t),...e})}function bie({className:t,...e}){return c.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ge("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function IS({className:t,...e}){return c.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ge("relative flex w-full min-w-0 flex-col p-2",t),...e})}function OS({className:t,asChild:e=!1,...n}){const r=e?sk:"div";return c.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ge("text-theme-0 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function wie({className:t,...e}){return c.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:ge("w-full text-sm",t),...e})}function KM({className:t,...e}){return c.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ge("flex w-full min-w-0 flex-col gap-1",t),...e})}function YM({className:t,...e}){return c.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ge("group/menu-item relative",t),...e})}const IHe=Oi("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function OHe({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:a,...i}){const o=t?sk:"button",{isMobile:l,state:u}=ww(),d=c.jsx(o,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:ge(IHe({variant:n,size:r}),a),...i});return s?(typeof s=="string"&&(s={children:s}),c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:d}),c.jsx(va,{side:"right",align:"center",hidden:u!=="collapsed"||l,...s})]})):d}function PHe(){return c.jsxs(n5,{className:"h-full",children:[c.jsxs("aside",{className:"flex h-full w-64 flex-col bg-theme-1",children:[c.jsx("div",{className:"p-4 h-[60px] flex items-center",children:c.jsx("div",{className:"h-8 w-full bg-theme-0 rounded-lg animate-pulse"})}),c.jsx("div",{className:"flex-1 space-y-3 overflow-auto p-4",children:[...Array(5)].map((t,e)=>c.jsxs("div",{className:"space-y-2 rounded-xl bg-theme-0/30 p-3",children:[c.jsx("div",{className:"h-5 w-3/4 bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-3 w-1/2 bg-theme-0 rounded-lg animate-pulse"})]},e))})]}),c.jsxs("main",{className:"flex flex-1 flex-col bg-theme-2",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 h-[60px]",children:[c.jsx("div",{className:"space-y-2 flex-1",children:c.jsx("div",{className:"h-7 w-56 bg-theme-0 rounded-lg animate-pulse"})}),c.jsx("div",{className:"h-9 w-28 bg-theme-0 rounded-lg animate-pulse"})]}),c.jsx("div",{className:"p-4 h-[50px] flex items-center",children:c.jsx("div",{className:"h-4 w-36 bg-theme-0 rounded-lg animate-pulse"})}),c.jsxs("div",{className:"flex-1 space-y-6 overflow-auto p-6",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"h-10 w-10 shrink-0 rounded-full bg-theme-0 animate-pulse"}),c.jsxs("div",{className:"flex-1 space-y-2.5",children:[c.jsx("div",{className:"h-4 w-full max-w-2xl bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-4 w-5/6 max-w-xl bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-4 w-4/6 max-w-lg bg-theme-0 rounded-lg animate-pulse"})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"h-10 w-10 shrink-0 rounded-full bg-theme-0 animate-pulse"}),c.jsxs("div",{className:"flex-1 space-y-2.5",children:[c.jsx("div",{className:"h-4 w-full max-w-2xl bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-4 w-3/4 max-w-xl bg-theme-0 rounded-lg animate-pulse"})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"h-10 w-10 shrink-0 rounded-full bg-theme-0 animate-pulse"}),c.jsxs("div",{className:"flex-1 space-y-2.5",children:[c.jsx("div",{className:"h-4 w-full max-w-2xl bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-4 w-4/5 max-w-xl bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-4 w-2/3 max-w-lg bg-theme-0 rounded-lg animate-pulse"})]})]})]}),c.jsx("div",{className:"bg-theme-2 p-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-24 w-full bg-theme-0 rounded-xl animate-pulse"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-9 w-9 bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-9 w-9 bg-theme-0 rounded-lg animate-pulse"})]}),c.jsx("div",{className:"h-9 w-24 bg-theme-0 rounded-lg animate-pulse"})]})]})})]}),c.jsxs("aside",{className:"flex h-full w-80 flex-col bg-theme-1",children:[c.jsx("div",{className:"p-4 h-[60px] flex items-center",children:c.jsx("div",{className:"h-6 w-40 bg-theme-0 rounded-lg animate-pulse"})}),c.jsx("div",{className:"flex-1 space-y-4 overflow-auto p-4",children:[...Array(5)].map((t,e)=>c.jsx("div",{className:"space-y-3 rounded-xl bg-theme-0/20 p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("div",{className:"h-5 w-2/3 bg-theme-0 rounded-lg animate-pulse"}),c.jsx("div",{className:"h-5 w-5 rounded-full bg-theme-0 animate-pulse"})]})},e))})]})]})}function Cie({course:t,assignmentName:e,className:n,color:r=!0,colorSize:s="small"}){if(!t&&!e)return null;const a=t.code||t.default,i={small:"h-2 w-2",medium:"h-3 w-3"};return c.jsxs("div",{className:ge("flex items-center gap-2 min-w-0 pr-4",n),children:[r&&c.jsx("div",{className:ge("rounded-full shrink-0 group-data-[collapsible=icon]:hidden",i[s]),style:{backgroundColor:(t==null?void 0:t.color)||"#ffffff80"}}),c.jsxs("div",{className:ge("flex items-center gap-1 min-w-0 flex-1"),children:[a&&c.jsx("p",{className:"text-xs text-theme-1 truncate",title:a,children:a}),a&&e&&c.jsx(Bke,{className:"h-4 w-4 shrink-0 text-theme-2"}),e&&c.jsx("p",{className:"text-xs text-theme-1 truncate",title:e,children:e})]})]})}function FHe({notebooks:t,selectedNotebook:e,onNotebookChange:n,courses:r,openLanding:s,enterCreateFlow:a}){const i=u=>u?r.find(d=>d.id.toString()===u.course_id):null,o=i(e),l=e!=null&&e.assignment_id?e.metadata.assignment.name:null;return c.jsx(c.Fragment,{children:c.jsx(KM,{children:c.jsx(YM,{children:c.jsxs(Tv,{children:[c.jsx(Av,{asChild:!0,children:c.jsxs(OHe,{className:`
    relative overflow-hidden
    w-full h-auto px-2 py-2.5
    rounded-md
    transition cursor-pointer
  `,style:{"--accent":(o==null?void 0:o.color)||"oklch(70.5% 0.213 47.604)"},children:[c.jsx("div",{className:`
      absolute inset-0
      bg-[var(--accent)]
      opacity-15
      pointer-events-none
      hover:opacity-20
      transition-opacity
    `,style:{backgroundImage:o!=null&&o.img?`url(${o==null?void 0:o.img})`:"none"}}),c.jsxs("div",{className:"flex-1 min-w-0 pl-2 group-data-[collapsible=icon]:hidden",children:[c.jsx("div",{className:"truncate font-bold leading-tight text-theme-0",children:(e==null?void 0:e.name)||"Untitled Study Set"}),o?c.jsx(Cie,{className:"mt-1",color:!0,course:o,assignmentName:l}):c.jsxs("div",{className:"mt-0.5 flex items-center gap-1.5 text-xs text-theme-1 truncate",children:[c.jsx("span",{className:"h-1.5 w-1.5 rounded-full shrink-0 bg-[var(--accent)]"}),c.jsx("span",{className:"truncate",children:"No course selected"})]})]}),c.jsx(oi,{className:"size-4 text-theme-2 shrink-0"})]})}),c.jsxs(Nv,{className:"w-64 rounded-lg bg-theme-0",align:"start",side:"bottom",sideOffset:4,children:[c.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[c.jsx(Hte,{className:"text-theme-1 text-xs p-0",children:"Study Sets"}),c.jsx("button",{type:"button",className:"text-xs text-theme-1 hover:text-theme-0 transition",onClick:s,children:"View all"})]}),c.jsx(Zj,{className:"border-t-1 border-theme"}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.map((u,d)=>{const f=e?u.id===e.id:!1;return c.jsxs(_d,{onClick:()=>n(u),className:ge("gap-2 p-3 cursor-pointer","hover:bg-theme-1",f&&"bg-theme-1 font-medium"),children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"truncate leading-tight",children:u.name}),(()=>{const m=i(u);return m?c.jsxs("div",{className:"mt-0.5 flex items-center gap-1.5 text-xs text-theme-1 truncate",children:[c.jsx("span",{className:"h-1.5 w-1.5 rounded-full shrink-0",style:{backgroundColor:m.color||"#6366f1"}}),c.jsx("span",{className:"truncate",children:m.default})]}):c.jsxs("div",{className:"mt-0.5 flex items-center gap-1.5 text-xs text-theme-1 truncate",children:[c.jsx("span",{className:"h-1.5 w-1.5 rounded-full shrink-0 bg-theme-2"}),c.jsx("span",{className:"truncate",children:"No course selected"})]})})()]}),f?c.jsx(or,{className:"h-4 w-4 text-primary shrink-0"}):c.jsxs(kje,{children:["",d+1]})]},u.id)})}),c.jsx(Zj,{className:"border-t-1 border-theme mt-0"}),c.jsxs(_d,{className:"gap-2 p-2 hover:scale-90 transition cursor-pointer",onClick:a,children:[c.jsx("div",{className:"bg-background flex size-6 items-center justify-center rounded-md border border-theme",children:c.jsx(Yd,{className:"size-4"})}),c.jsx("div",{className:"text-theme-1 font-medium",children:"Create study set"})]})]})]})})})})}function Cw(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${Math.round(t/Math.pow(e,r))} ${n[r]}`}function BHe(t){const e=new Set(t.supportedTypes.map(r=>r.mime)),n=new Set(t.supportedTypes.flatMap(r=>r.extensions.map(s=>`.${s.toLowerCase()}`)));return{fileSize(r){return r>t.maxFileSize?{valid:!1,error:`File exceeds ${Cw(t.maxFileSize)} limit`}:{valid:!0}},fileType(r,s){const a=e.has(r),i=!s||Array.from(n).some(o=>s.toLowerCase().endsWith(o));return!a||!i?{valid:!1,error:"File type not supported"}:{valid:!0}},file(r){const s=this.fileSize(r.size);if(!s.valid)return s;const a=this.fileType(r.type,r.name);return a.valid?{valid:!0}:a}}}const Sie=y.createContext(null);function LHe({initialLimits:t,children:e}){const[n,r]=y.useState(t),s=y.useMemo(()=>BHe(n),[n]),a=y.useMemo(()=>({limits:n,validators:s,formatFileSize:Cw,setLimits:r}),[n,s]);return c.jsx(Sie.Provider,{value:a,children:e})}function XM(){const t=y.useContext(Sie);if(!t)throw new Error("useUserLimits must be used within a UserLimitsProvider");return t}function kie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nb(t,e){if(t==null)return{};var n,r,s=kie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function JM(t){return(...e)=>n=>{if(typeof t=="function"){const r=n.displayName||n.name,s=t(n,...e);return s.displayName=r,s}else return n}}function Eie(t,e,n,r,...s){}const QM=(t,e,...n)=>Eie("error",!0,t,e,...n),GD=(t,e,...n)=>Eie("warn",!0,t,e,...n);var o6,yq;function zHe(){return yq||(yq=1,o6=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var i=a[s];if(!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}),o6}var $He=zHe();const UHe=Pa($He),HHe=(t,e)=>(e.has(t)?e.set(t,e.get(t)+1):e.set(t,0),`${t}___${e.get(t)}`),VHe=Object.prototype.hasOwnProperty;function qHe(t){if(typeof t!="object")return!0;for(const e in t)if(VHe.call(t,e))return!1;return!0}function GHe(...t){let e={};return t.forEach(n=>{e=_ie(e,n)}),e}function _ie(t,e){if(l6(e)){const n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],r={...t};return n.forEach(s=>{l6(t[s])&&l6(e[s])?r[s]=_ie(t[s],e[s]):c6(e[s])&&c6(t[s])?r[s]=[...new Set([...t[s],...e[s]])]:c6(t[s])?r[s]=[...new Set([...t[s],e[s]])]:r[s]=e[s]}),r}else return{...t}}function l6(t){return t&&(typeof t=="object"||typeof t=="function")&&!Array.isArray(t)}function c6(t){return Array.isArray(t)}function WHe(t){if(Array.isArray(t))return t}function KHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function xq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function YHe(t,e){if(t){if(typeof t=="string")return xq(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xq(t,e):void 0}}function XHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JHe(t,e){return WHe(t)||KHe(t,e)||YHe(t,e)||XHe()}const QHe=t=>!!t&&t.ref!==void 0,ZHe=t=>!!t&&t.current!==void 0;function Tie(t){const e=typeof t=="function"?t():t;if(e&&e===document)return document.documentElement;if(e instanceof Element||e===window||e&&typeof e.nodeType<"u")return e;if(e){const n=e;if(QHe(n)){const r=ZHe(n.ref)?n.ref.current:n.ref;return r instanceof HTMLElement?r:Tie(r)}else return n.constructor.componentId?n.constructor.componentId:n.constructor.name,nk.findDOMNode(e)}}const eVe=["borders","breakpoints","colors","forms","media","shadows","spacing","stacking","transitions","typography"],tVe=t=>{if(Array.isArray(t)||typeof t=="function")throw new Error;try{return"key"in t&&eVe.every(e=>e in t)}catch{throw new Error}};function nVe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rVe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var sVe=(function(){function t(n){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rVe(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=nVe(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},t})(),ri="-ms-",r5="-moz-",hr="-webkit-",Aie="comm",ZM="rule",eI="decl",aVe="@import",Nie="@keyframes",iVe="@layer",oVe=Math.abs,CE=String.fromCharCode,lVe=Object.assign;function cVe(t,e){return Xa(t,0)^45?(((e<<2^Xa(t,0))<<2^Xa(t,1))<<2^Xa(t,2))<<2^Xa(t,3):0}function jie(t){return t.trim()}function uVe(t,e){return(t=e.exec(t))?t[0]:t}function fr(t,e,n){return t.replace(e,n)}function WD(t,e){return t.indexOf(e)}function Xa(t,e){return t.charCodeAt(e)|0}function rb(t,e,n){return t.slice(e,n)}function Yc(t){return t.length}function tI(t){return t.length}function RC(t,e){return e.push(t),t}function dVe(t,e){return t.map(e).join("")}var SE=1,Wg=1,Die=0,oo=0,Js=0,$v="";function kE(t,e,n,r,s,a,i){return{value:t,root:e,parent:n,type:r,props:s,children:a,line:SE,column:Wg,length:i,return:""}}function rx(t,e){return lVe(kE("",null,null,"",null,null,0),t,{length:-t.length},e)}function hVe(){return Js}function fVe(){return Js=oo>0?Xa($v,--oo):0,Wg--,Js===10&&(Wg=1,SE--),Js}function Po(){return Js=oo<Die?Xa($v,oo++):0,Wg++,Js===10&&(Wg=1,SE++),Js}function fu(){return Xa($v,oo)}function PS(){return oo}function Sw(t,e){return rb($v,t,e)}function sb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rie(t){return SE=Wg=1,Die=Yc($v=t),oo=0,[]}function Mie(t){return $v="",t}function FS(t){return jie(Sw(oo-1,KD(t===91?t+2:t===40?t+1:t)))}function mVe(t){for(;(Js=fu())&&Js<33;)Po();return sb(t)>2||sb(Js)>3?"":" "}function pVe(t,e){for(;--e&&Po()&&!(Js<48||Js>102||Js>57&&Js<65||Js>70&&Js<97););return Sw(t,PS()+(e<6&&fu()==32&&Po()==32))}function KD(t){for(;Po();)switch(Js){case t:return oo;case 34:case 39:t!==34&&t!==39&&KD(Js);break;case 40:t===41&&KD(t);break;case 92:Po();break}return oo}function gVe(t,e){for(;Po()&&t+Js!==57;)if(t+Js===84&&fu()===47)break;return"/*"+Sw(e,oo-1)+"*"+CE(t===47?t:Po())}function vVe(t){for(;!sb(fu());)Po();return Sw(t,oo)}function yVe(t){return Mie(BS("",null,null,null,[""],t=Rie(t),0,[0],t))}function BS(t,e,n,r,s,a,i,o,l){for(var u=0,d=0,f=i,m=0,g=0,x=0,b=1,C=1,S=1,w=0,E="",T=s,_=a,A=r,j=E;C;)switch(x=w,w=Po()){case 40:if(x!=108&&Xa(j,f-1)==58){WD(j+=fr(FS(w),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:j+=FS(w);break;case 9:case 10:case 13:case 32:j+=mVe(x);break;case 92:j+=pVe(PS()-1,7);continue;case 47:switch(fu()){case 42:case 47:RC(xVe(gVe(Po(),PS()),e,n),l);break;default:j+="/"}break;case 123*b:o[u++]=Yc(j)*S;case 125*b:case 59:case 0:switch(w){case 0:case 125:C=0;case 59+d:S==-1&&(j=fr(j,/\f/g,"")),g>0&&Yc(j)-f&&RC(g>32?wq(j+";",r,n,f-1):wq(fr(j," ","")+";",r,n,f-2),l);break;case 59:j+=";";default:if(RC(A=bq(j,e,n,u,d,s,o,E,T=[],_=[],f),a),w===123)if(d===0)BS(j,e,A,A,T,a,f,o,_);else switch(m===99&&Xa(j,3)===110?100:m){case 100:case 108:case 109:case 115:BS(t,A,A,r&&RC(bq(t,A,A,0,0,s,o,E,s,T=[],f),_),s,_,f,o,r?T:_);break;default:BS(j,A,A,A,[""],_,0,o,_)}}u=d=g=0,b=S=1,E=j="",f=i;break;case 58:f=1+Yc(j),g=x;default:if(b<1){if(w==123)--b;else if(w==125&&b++==0&&fVe()==125)continue}switch(j+=CE(w),w*b){case 38:S=d>0?1:(j+="\f",-1);break;case 44:o[u++]=(Yc(j)-1)*S,S=1;break;case 64:fu()===45&&(j+=FS(Po())),m=fu(),d=f=Yc(E=j+=vVe(PS())),w++;break;case 45:x===45&&Yc(j)==2&&(b=0)}}return a}function bq(t,e,n,r,s,a,i,o,l,u,d){for(var f=s-1,m=s===0?a:[""],g=tI(m),x=0,b=0,C=0;x<r;++x)for(var S=0,w=rb(t,f+1,f=oVe(b=i[x])),E=t;S<g;++S)(E=jie(b>0?m[S]+" "+w:fr(w,/&\f/g,m[S])))&&(l[C++]=E);return kE(t,e,n,s===0?ZM:o,l,u,d)}function xVe(t,e,n){return kE(t,e,n,Aie,CE(hVe()),rb(t,2,-2),0)}function wq(t,e,n,r){return kE(t,e,n,eI,rb(t,0,r),rb(t,r+1,-1),r)}function Sg(t,e){for(var n="",r=tI(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function bVe(t,e,n,r){switch(t.type){case iVe:if(t.children.length)break;case aVe:case eI:return t.return=t.return||t.value;case Aie:return"";case Nie:return t.return=t.value+"{"+Sg(t.children,r)+"}";case ZM:t.value=t.props.join(",")}return Yc(n=Sg(t.children,r))?t.return=t.value+"{"+n+"}":""}function wVe(t){var e=tI(t);return function(n,r,s,a){for(var i="",o=0;o<e;o++)i+=t[o](n,r,s,a)||"";return i}}function CVe(t){return function(e){e.root||(e=e.return)&&t(e)}}function SVe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var kVe=function(e,n,r){for(var s=0,a=0;s=a,a=fu(),s===38&&a===12&&(n[r]=1),!sb(a);)Po();return Sw(e,oo)},EVe=function(e,n){var r=-1,s=44;do switch(sb(s)){case 0:s===38&&fu()===12&&(n[r]=1),e[r]+=kVe(oo-1,n,r);break;case 2:e[r]+=FS(s);break;case 4:if(s===44){e[++r]=fu()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=CE(s)}while(s=Po());return e},_Ve=function(e,n){return Mie(EVe(Rie(e),n))},Cq=new WeakMap,TVe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Cq.get(r))&&!s){Cq.set(e,!0);for(var a=[],i=_Ve(n,a),o=r.props,l=0,u=0;l<i.length;l++)for(var d=0;d<o.length;d++,u++)e.props[u]=a[l]?i[l].replace(/&\f/g,o[d]):o[d]+" "+i[l]}}},AVe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Iie(t,e){switch(cVe(t,e)){case 5103:return hr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return hr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return hr+t+r5+t+ri+t+t;case 6828:case 4268:return hr+t+ri+t+t;case 6165:return hr+t+ri+"flex-"+t+t;case 5187:return hr+t+fr(t,/(\w+).+(:[^]+)/,hr+"box-$1$2"+ri+"flex-$1$2")+t;case 5443:return hr+t+ri+"flex-item-"+fr(t,/flex-|-self/,"")+t;case 4675:return hr+t+ri+"flex-line-pack"+fr(t,/align-content|flex-|-self/,"")+t;case 5548:return hr+t+ri+fr(t,"shrink","negative")+t;case 5292:return hr+t+ri+fr(t,"basis","preferred-size")+t;case 6060:return hr+"box-"+fr(t,"-grow","")+hr+t+ri+fr(t,"grow","positive")+t;case 4554:return hr+fr(t,/([^-])(transform)/g,"$1"+hr+"$2")+t;case 6187:return fr(fr(fr(t,/(zoom-|grab)/,hr+"$1"),/(image-set)/,hr+"$1"),t,"")+t;case 5495:case 3959:return fr(t,/(image-set\([^]*)/,hr+"$1$`$1");case 4968:return fr(fr(t,/(.+:)(flex-)?(.*)/,hr+"box-pack:$3"+ri+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+hr+t+t;case 4095:case 3583:case 4068:case 2532:return fr(t,/(.+)-inline(.+)/,hr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yc(t)-1-e>6)switch(Xa(t,e+1)){case 109:if(Xa(t,e+4)!==45)break;case 102:return fr(t,/(.+:)(.+)-([^]+)/,"$1"+hr+"$2-$3$1"+r5+(Xa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~WD(t,"stretch")?Iie(fr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Xa(t,e+1)!==115)break;case 6444:switch(Xa(t,Yc(t)-3-(~WD(t,"!important")&&10))){case 107:return fr(t,":",":"+hr)+t;case 101:return fr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+hr+(Xa(t,14)===45?"inline-":"")+"box$3$1"+hr+"$2$3$1"+ri+"$2box$3")+t}break;case 5936:switch(Xa(t,e+11)){case 114:return hr+t+ri+fr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return hr+t+ri+fr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return hr+t+ri+fr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return hr+t+ri+t+t}return t}var NVe=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case eI:e.return=Iie(e.value,e.length);break;case Nie:return Sg([rx(e,{value:fr(e.value,"@","@"+hr)})],s);case ZM:if(e.length)return dVe(e.props,function(a){switch(uVe(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sg([rx(e,{props:[fr(a,/:(read-\w+)/,":"+r5+"$1")]})],s);case"::placeholder":return Sg([rx(e,{props:[fr(a,/:(plac\w+)/,":"+hr+"input-$1")]}),rx(e,{props:[fr(a,/:(plac\w+)/,":"+r5+"$1")]}),rx(e,{props:[fr(a,/:(plac\w+)/,ri+"input-$1")]})],s)}return""})}},jVe=[NVe],DVe=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var C=b.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var s=e.stylisPlugins||jVe,a={},i,o=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var C=b.getAttribute("data-emotion").split(" "),S=1;S<C.length;S++)a[C[S]]=!0;o.push(b)});var l,u=[TVe,AVe];{var d,f=[bVe,CVe(function(b){d.insert(b)})],m=wVe(u.concat(s,f)),g=function(C){return Sg(yVe(C),m)};l=function(C,S,w,E){d=w,g(C?C+"{"+S.styles+"}":S.styles),E&&(x.inserted[S.name]=!0)}}var x={key:n,sheet:new sVe({key:n,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:l};return x.sheet.hydrate(o),x};function YD(){return YD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YD.apply(null,arguments)}var u6={exports:{}},pr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sq;function RVe(){if(Sq)return pr;Sq=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,i=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,C=t?Symbol.for("react.fundamental"):60117,S=t?Symbol.for("react.responder"):60118,w=t?Symbol.for("react.scope"):60119;function E(_){if(typeof _=="object"&&_!==null){var A=_.$$typeof;switch(A){case e:switch(_=_.type,_){case l:case u:case r:case a:case s:case f:return _;default:switch(_=_&&_.$$typeof,_){case o:case d:case x:case g:case i:return _;default:return A}}case n:return A}}}function T(_){return E(_)===u}return pr.AsyncMode=l,pr.ConcurrentMode=u,pr.ContextConsumer=o,pr.ContextProvider=i,pr.Element=e,pr.ForwardRef=d,pr.Fragment=r,pr.Lazy=x,pr.Memo=g,pr.Portal=n,pr.Profiler=a,pr.StrictMode=s,pr.Suspense=f,pr.isAsyncMode=function(_){return T(_)||E(_)===l},pr.isConcurrentMode=T,pr.isContextConsumer=function(_){return E(_)===o},pr.isContextProvider=function(_){return E(_)===i},pr.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},pr.isForwardRef=function(_){return E(_)===d},pr.isFragment=function(_){return E(_)===r},pr.isLazy=function(_){return E(_)===x},pr.isMemo=function(_){return E(_)===g},pr.isPortal=function(_){return E(_)===n},pr.isProfiler=function(_){return E(_)===a},pr.isStrictMode=function(_){return E(_)===s},pr.isSuspense=function(_){return E(_)===f},pr.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===r||_===u||_===a||_===s||_===f||_===m||typeof _=="object"&&_!==null&&(_.$$typeof===x||_.$$typeof===g||_.$$typeof===i||_.$$typeof===o||_.$$typeof===d||_.$$typeof===C||_.$$typeof===S||_.$$typeof===w||_.$$typeof===b)},pr.typeOf=E,pr}var kq;function MVe(){return kq||(kq=1,u6.exports=RVe()),u6.exports}var d6,Eq;function IVe(){if(Eq)return d6;Eq=1;var t=MVe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=r,a[t.Memo]=s;function i(x){return t.isMemo(x)?s:a[x.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;function g(x,b,C){if(typeof b!="string"){if(m){var S=f(b);S&&S!==m&&g(x,S,C)}var w=l(b);u&&(w=w.concat(u(b)));for(var E=i(x),T=i(b),_=0;_<w.length;++_){var A=w[_];if(!n[A]&&!(C&&C[A])&&!(T&&T[A])&&!(E&&E[A])){var j=d(b,A);try{o(x,A,j)}catch{}}}}return x}return d6=g,d6}var OVe=IVe();const Oie=Pa(OVe);var PVe=!0;function FVe(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(r+=s+" ")}),r}var Pie=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||PVe===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},BVe=function(e,n,r){Pie(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function LVe(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var zVe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$Ve=/[A-Z]|^ms/g,UVe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Fie=function(e){return e.charCodeAt(1)===45},_q=function(e){return e!=null&&typeof e!="boolean"},h6=SVe(function(t){return Fie(t)?t:t.replace($Ve,"-$&").toLowerCase()}),Tq=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(UVe,function(r,s,a){return Xc={name:s,styles:a,next:Xc},s})}return zVe[e]!==1&&!Fie(e)&&typeof n=="number"&&n!==0?n+"px":n};function ab(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Xc={name:s.name,styles:s.styles,next:Xc},s.name;var a=n;if(a.styles!==void 0){var i=a.next;if(i!==void 0)for(;i!==void 0;)Xc={name:i.name,styles:i.styles,next:Xc},i=i.next;var o=a.styles+";";return o}return HVe(t,e,n)}case"function":{if(t!==void 0){var l=Xc,u=n(t);return Xc=l,ab(t,e,u)}break}}var d=n;return d}function HVe(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=ab(t,e,n[s])+";";else for(var a in n){var i=n[a];if(typeof i!="object"){var o=i;_q(o)&&(r+=h6(a)+":"+Tq(a,o)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&e==null)for(var l=0;l<i.length;l++)_q(i[l])&&(r+=h6(a)+":"+Tq(a,i[l])+";");else{var u=ab(t,e,i);switch(a){case"animation":case"animationName":{r+=h6(a)+":"+u+";";break}default:r+=a+"{"+u+"}"}}}return r}var Aq=/label:\s*([^\s;{]+)\s*(;|$)/g,Xc;function VVe(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";Xc=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,s+=ab(n,e,a);else{var i=a;s+=i[0]}for(var o=1;o<t.length;o++)if(s+=ab(n,e,t[o]),r){var l=a;s+=l[o]}Aq.lastIndex=0;for(var u="",d;(d=Aq.exec(s))!==null;)u+="-"+d[1];var f=LVe(s)+u;return{name:f,styles:s,next:Xc}}var qVe=function(e){return e()},GVe=p1.useInsertionEffect?p1.useInsertionEffect:!1,WVe=GVe||qVe,Bie=y.createContext(typeof HTMLElement<"u"?DVe({key:"css"}):null);Bie.Provider;var KVe=function(e){return y.forwardRef(function(n,r){var s=y.useContext(Bie);return e(n,s,r)})},Lie=y.createContext({}),YVe=function(){return y.useContext(Lie)},EE={}.hasOwnProperty,XD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zie=function(e,n){var r={};for(var s in n)EE.call(n,s)&&(r[s]=n[s]);return r[XD]=e,r},XVe=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return Pie(n,r,s),WVe(function(){return BVe(n,r,s)}),null},JVe=KVe(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[XD],a=[r],i="";typeof t.className=="string"?i=FVe(e.registered,a,t.className):t.className!=null&&(i=t.className+" ");var o=VVe(a,void 0,y.useContext(Lie));i+=e.key+"-"+o.name;var l={};for(var u in t)EE.call(t,u)&&u!=="css"&&u!==XD&&(l[u]=t[u]);return l.className=i,n&&(l.ref=n),y.createElement(y.Fragment,null,y.createElement(XVe,{cache:e,serialized:o,isStringTag:typeof s=="string"}),y.createElement(s,l))}),$ie=JVe,Cd=function(e,n,r){return EE.call(n,"css")?c.jsx($ie,zie(e,n),r):c.jsx(e,n,r)},QVe=function(e,n,r){return EE.call(n,"css")?c.jsxs($ie,zie(e,n),r):c.jsxs(e,n,r)};function ZVe(t,e,n){const r=Array.isArray(e)?e:Object.keys(e||{}),s=n?r.concat(n):r;return tqe(t,s)}const eqe=Object.prototype.hasOwnProperty,tqe=(t,e)=>{const n={};for(const r in t)r==="theme"||r==="children"||r==="className"||r==="style"||r==="styles"||r==="makeStyles"||r==="themeOverride"||r==="deterministicId"||e.includes(r)||!eqe.call(t,r)||(n[r]=t[r]);return n},f6="__INSTUI_GLOBAL_INSTANCE_COUNTER__";function nqe(){if(globalThis[f6])return globalThis[f6];const t=new Map;return globalThis[f6]=t,t}const rqe=nqe(),sqe=Ce.createContext(rqe),aqe=JM(t=>{const e=y.forwardRef((n,r)=>{const s=t.componentId||t.displayName||t.name,a=y.useContext(sqe),i=(o=s)=>HHe(o,a);return n.deterministicId&&GD(!1,`Manually passing the "deterministicId" property is not allowed on the ${s} component.
`,n.deterministicId),Cd(t,{ref:r,deterministicId:i,...n})});return Oie(e,t),e.propTypes=t.propTypes,e.defaultProps=t.defaultProps,e.allowedProps=t.allowedProps,e.originalType=t.originalType||t,e});let JD=!0;try{var m6,p6;JD=!((m6=process)!==null&&m6!==void 0&&(p6=m6.env)!==null&&p6!==void 0&&p6.ALWAYS_APPEND_UI_TESTABLE_LOCATORS)}catch(t){if(t instanceof ReferenceError)JD=!1;else throw t}const Uie=JD?()=>t=>t:JM(t=>{const n={attribute:"data-cid",value:t.displayName||t.name},r=`[${n.attribute}~="${n.value}"]`;class s extends t{constructor(...i){super(...i),this._testableUnmounted=void 0,this._locatorTimeout=void 0}componentDidMount(){this._testableUnmounted=!1,super.componentDidMount&&super.componentDidMount(),this.appendLocatorAttribute()}componentDidUpdate(i,o,l){super.componentDidUpdate&&super.componentDidUpdate(i,o,l),this.appendLocatorAttribute()}componentWillUnmount(){this._testableUnmounted=!0,super.componentWillUnmount&&super.componentWillUnmount(),this._locatorTimeout&&clearTimeout(this._locatorTimeout)}appendLocatorAttribute(){this._locatorTimeout=setTimeout(()=>{let i;if(!this._testableUnmounted){try{i=this.DOMNode||Tie(this)}catch{}if(i){const o=i.getAttribute(n.attribute),l=typeof o=="string"?o.split(/\s+/):[];l.includes(n.value)||l.push(n.value),i.setAttribute(n.attribute,l.join(" "))}}})}}return s.selector=r,s});var g6={exports:{}},v6,Nq;function iqe(){if(Nq)return v6;Nq=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return v6=t,v6}var y6,jq;function oqe(){if(jq)return y6;jq=1;var t=iqe();function e(){}function n(){}return n.resetWarningCache=e,y6=function(){function r(i,o,l,u,d,f){if(f!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},y6}var Dq;function lqe(){return Dq||(Dq=1,g6.exports=oqe()()),g6.exports}var cqe=lqe();const Wa=Pa(cqe),uqe=Object.freeze({radiusSmall:"0.125rem",radiusMedium:"0.25rem",radiusLarge:"0.5rem",widthSmall:"0.0625rem",widthMedium:"0.125rem",widthLarge:"0.25rem",style:"solid"}),dqe=Object.freeze({duration:"300ms",timing:"ease-in-out"}),hqe=Object.freeze({fontFamily:'LatoWeb, Lato, "Helvetica Neue", Helvetica, Arial, sans-serif',fontFamilyMonospace:'Menlo, Consolas, Monaco, "Andale Mono", monospace',letterSpacingNormal:0,letterSpacingCondensed:"-0.0625rem",letterSpacingExpanded:"0.0625rem",fontSizeXSmall:"0.75rem",fontSizeSmall:"0.875rem",fontSizeMedium:"1rem",fontSizeLarge:"1.375rem",fontSizeXLarge:"1.75rem",fontSizeXXLarge:"2.375rem",fontWeightLight:300,fontWeightNormal:400,fontWeightBold:700,lineHeight:1.5,lineHeightFit:1.125,lineHeightCondensed:1.25,lineHeightDouble:2,titlePageDesktop:"2.25rem",titlePageMobile:"2rem",titleSection:"1.75rem",titleModule:"1.5rem",titleCardLarge:"1.5rem",titleCardRegular:"1.25rem",titleCardMini:"1rem",descriptionPage:"1.25rem",descriptionSection:"1rem",label:"1rem",content:"1rem",contentSmall:"0.875rem",legend:"0.75rem",lineHeight100:1,lineHeight125:1.25,lineHeight150:1.5,weightRegular:400,weightImportant:700}),fqe=Object.freeze({xxxSmall:"0.125rem",xxSmall:"0.375rem",xSmall:"0.5rem",small:"0.75rem",mediumSmall:"1rem",medium:"1.5rem",large:"2.25rem",xLarge:"3rem",xxLarge:"3.75rem",space0:"0rem",space2:"0.125rem",space4:"0.25rem",space8:"0.5rem",space12:"0.75rem",space16:"1rem",space24:"1.5rem",space36:"2.25rem",space48:"3rem",space60:"3.75rem",sections:"2.25rem",sectionElements:"1.5em",trayElements:"1.5em",modalElements:"1.5em",moduleElements:"1em",paddingCardLarge:"1.5rem",paddingCardMedium:"1rem",paddingCardSmall:"0.75rem",selects:"1rem",textareas:"1rem",inputFields:"1rem",checkboxes:"1rem",radios:"1rem",toggles:"1rem",buttons:"0.75rem",tags:"0.75rem",statusIndicators:"0.75rem",dataPoints:"0.75rem"}),mqe=Object.freeze({inputHeightSmall:"1.75rem",inputHeightMedium:"2.375rem",inputHeightLarge:"3rem"}),pqe=.0625,sd={xxSmall:8,xSmall:16,small:30,medium:48,tablet:48,large:62,desktop:64,xLarge:75},LS=Object.freeze({xxSmall:`${sd.xxSmall}em`,xSmall:`${sd.xSmall}em`,small:`${sd.small}em`,medium:`${sd.medium}em`,tablet:`${sd.tablet}em`,large:`${sd.large}em`,desktop:`${sd.desktop}em`,xLarge:`${sd.xLarge}em`,maxWidth:`${sd.large-pqe}em`}),gqe=Object.freeze({mediumMin:`min-width: ${LS.medium}`,largeMin:`min-width: ${LS.large}`,xLargeMin:`min-width: ${LS.xLarge}`}),Mh=["0 0.0625rem 0.125rem rgba(0, 0, 0, 0.2), 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.1)","0 0.1875rem 0.375rem rgba(0, 0, 0, 0.1), 0 0.1875rem 0.375rem rgba(0, 0, 0, 0.15)","0 0.375rem 0.4375rem rgba(0, 0, 0, 0.1), 0 0.625rem 1.75rem rgba(0, 0, 0, 0.25)"],vqe=Object.freeze({depth1:Mh[0],depth2:Mh[1],depth3:Mh[2],resting:Mh[0],above:Mh[1],topmost:Mh[2],card:Mh[0],cardHover:Mh[2]}),yqe=Object.freeze({topmost:9999,above:1,below:-1,deepest:-9999}),xqe={borders:uqe,transitions:dqe,typography:hqe,spacing:fqe,forms:mqe,media:gqe,breakpoints:LS,shadows:vqe,stacking:yqe},bqe=["key","description"],wqe=["key","description","use"],Cqe="@@themeRegistryDefaultTheme",s5="__GLOBAL_THEME_REGISTRY__";globalThis[s5]?nI(Sqe(globalThis[s5])):Vie();function Hie(){return{currentThemeKey:null,themes:{},registered:[]}}function Sqe(t){const e=Hie();if(typeof t>"u")return e;let n=!0;return Object.keys(e).forEach(r=>{typeof t[r]>"u"&&(n=!1)}),QM(n,"[theme-registry] Invalid global theme registry!"),t}function _E(){return globalThis[s5]}function nI(t){globalThis[s5]=t}function Vie(){nI(Hie())}function kqe(){const t=_E(),e=t.currentThemeKey;if(e)return t.themes[e]}function Eqe(t,e){const n=_E(),r=n.themes[t];r||t!==Cqe&&QM(r,`[theme-registry] Could not find theme: '${t}' in the registry.`),n.currentThemeKey=t;const s=GHe(r,e);return n.themes[t]=s,s}function _qe(t){const e=t.key,n=t.description,r=nb(t,bqe),s={key:e,description:n,...r,use(a){Eqe(e,(a==null?void 0:a.overrides)||{})}};return new Proxy(s,{get(a,i){a.key,a.description,a.use;const o=nb(a,wqe);return i==="variables"?o:Reflect.get(a,i)}})}function Tqe(t){const e=_E();if(t.key&&e.themes[t.key])return e.themes[t.key];{if(!tVe(t))throw QM(!1,`[theme-registry] The theme provided to 'registerTheme' is not a valid theme object!
For it to be valid some properties have to be present, check out https://instructure.design/#canvas as a reference.`),new Error;const n=_qe(t);return e.themes[n.key]=n,e.registered.push(n.key),n}}const qie={getRegistry:_E,clearRegistry:Vie,setRegistry:nI,registerTheme:Tqe,getCurrentTheme:kqe},dr={white:"#FFFFFF",white10op75:"#FFFFFFBF",grey11:"#F2F4F4",grey12:"#E8EAEC",grey14:"#D7DADE",grey24:"#9EA6AD",grey30:"#8D959F",grey45:"#6A7883",grey57:"#586874",grey70:"#4A5B68",grey82:"#3F515E",grey100:"#334451",grey100op75:"#334451BF",grey125:"#273540",blue12:"#E0EBF5",blue45:"#2B7ABC",blue57:"#0E68B3",blue70:"#0A5A9E",blue82:"#09508C",green12:"#DCEEE4",green45:"#03893D",green57:"#027634",green70:"#02672D",green82:"#015B28",orange12:"#FCE5D9",orange30:"#F06E26",orange45:"#CF4A00",orange57:"#B34000",orange70:"#9C3800",orange82:"#8B3200",red12:"#FCE4E5",red45:"#E62429",red57:"#C71F23",red70:"#AE1B1F",red82:"#9B181C",sea12:"#DAEEEF",sea30:"#37A1AA",sea35:"#1E95A0",sea40:"#0A8C97",sea45:"#00828E",sea50:"#007B86",sea57:"#00717B",sea70:"#00626B",sea90:"#005158",sea110:"#004349",violet12:"#F1E6F5",violet30:"#B57FCC",violet35:"#AC6FC6",violet40:"#A564C2",violet45:"#9E58BD",violet50:"#994FB9",violet57:"#9242B4",violet70:"#7F399E",violet90:"#682F82",violet110:"#56276B"},tt={rose12:"#FEE4E4",rose30:"#FB5D5D",rose35:"#FA3F3F",rose40:"#FA1A1A",rose45:"#ED0000",rose50:"#E00000",rose57:"#CE0000",rose70:"#B50000",rose90:"#970000",rose110:"#7F0000",copper12:"#FFE5D3",copper30:"#EE6D15",copper35:"#DB6414",copper40:"#CD5E12",copper45:"#BF5811",copper50:"#B45310",copper57:"#A54C0F",copper70:"#90420D",copper90:"#77360B",copper110:"#622D09",honey12:"#F5E9CA",honey30:"#C08A00",honey35:"#A57600",honey40:"#B07E00",honey45:"#996E00",honey50:"#916800",honey57:"#856000",honey70:"#745300",honey90:"#5F4400",honey110:"#4E3800",forest12:"#DFEEE0",forest30:"#55A459",forest35:"#409945",forest40:"#319135",forest45:"#27872B",forest50:"#248029",forest57:"#217526",forest70:"#1D6621",forest90:"#18541B",forest110:"#144516",aurora12:"#DAEEE8",aurora30:"#38A585",aurora35:"#1E9975",aurora40:"#0B9069",aurora45:"#048660",aurora50:"#047F5B",aurora57:"#037453",aurora70:"#036549",aurora90:"#02533C",aurora110:"#024531",sea12:"#DAEEEF",sea30:"#37A1AA",sea35:"#1E95A0",sea40:"#0A8C97",sea45:"#00828E",sea50:"#007B86",sea57:"#00717B",sea70:"#00626B",sea90:"#005158",sea110:"#004349",sky12:"#DDECF3",sky30:"#4E9CC0",sky35:"#3890B8",sky40:"#2887B2",sky45:"#197EAB",sky50:"#1777A2",sky57:"#156D94",sky70:"#135F81",sky90:"#0F4E6A",sky110:"#0D4058",ocean12:"#DFEBFB",ocean30:"#5694EB",ocean35:"#4187E8",ocean40:"#317DE6",ocean45:"#2573DF",ocean50:"#236DD3",ocean57:"#2063C1",ocean70:"#1C57A8",ocean90:"#17478B",ocean110:"#133B72",violet12:"#F1E6F5",violet30:"#B57FCC",violet35:"#AC6FC6",violet40:"#A564C2",violet45:"#9E58BD",violet50:"#994FB9",violet57:"#9242B4",violet70:"#7F399E",violet90:"#682F82",violet110:"#56276B",plum12:"#F7E5F0",plum30:"#D473B1",plum35:"#CE60A7",plum40:"#CA529F",plum45:"#C54396",plum50:"#C1368F",plum57:"#BA2083",plum70:"#A31C73",plum90:"#87175F",plum110:"#70134F",stone12:"#EAEAEA",stone30:"#939393",stone35:"#878787",stone40:"#7F7F7F",stone45:"#767676",stone50:"#6F6F6F",stone57:"#666666",stone70:"#585858",stone90:"#494949",stone110:"#3C3C3C"},Aqe={rose12Primary:tt.rose12,rose30Primary:tt.rose30,rose45Primary:tt.rose45,rose70Primary:tt.rose70,rose110Primary:tt.rose110,rose35Secondary:tt.rose35,rose40Secondary:tt.rose40,rose50Secondary:tt.rose50,rose57Secondary:tt.rose57,rose90Secondary:tt.rose90,copper12Primary:tt.copper12,copper30Primary:tt.copper30,copper45Primary:tt.copper45,copper70Primary:tt.copper70,copper110Primary:tt.copper110,copper35Secondary:tt.copper35,copper40Secondary:tt.copper40,copper50Secondary:tt.copper50,copper57Secondary:tt.copper57,copper90Secondary:tt.copper90,honey12Primary:tt.honey12,honey30Primary:tt.honey30,honey45Primary:tt.honey45,honey70Primary:tt.honey70,honey110Primary:tt.honey110,honey35Secondary:tt.honey35,honey40Secondary:tt.honey40,honey50Secondary:tt.honey50,honey57Secondary:tt.honey57,honey90Secondary:tt.honey90,forest12Primary:tt.forest12,forest30Primary:tt.forest30,forest45Primary:tt.forest45,forest70Primary:tt.forest70,forest110Primary:tt.forest110,forest35Secondary:tt.forest35,forest40Secondary:tt.forest40,forest50Secondary:tt.forest50,forest57Secondary:tt.forest57,forest90Secondary:tt.forest90,aurora12Primary:tt.aurora12,aurora30Primary:tt.aurora30,aurora45Primary:tt.aurora45,aurora70Primary:tt.aurora70,aurora110Primary:tt.aurora110,aurora35Secondary:tt.aurora35,aurora40Secondary:tt.aurora40,aurora50Secondary:tt.aurora50,aurora57Secondary:tt.aurora57,aurora90Secondary:tt.aurora90,sea12Primary:tt.sea12,sea30Primary:tt.sea30,sea45Primary:tt.sea45,sea70Primary:tt.sea70,sea110Primary:tt.sea110,sea35Secondary:tt.sea35,sea40Secondary:tt.sea40,sea50Secondary:tt.sea50,sea57Secondary:tt.sea57,sea90Secondary:tt.sea90,sky12Primary:tt.sky12,sky30Primary:tt.sky30,sky45Primary:tt.sky45,sky70Primary:tt.sky70,sky110Primary:tt.sky110,sky35Secondary:tt.sky35,sky40Secondary:tt.sky40,sky50Secondary:tt.sky50,sky57Secondary:tt.sky57,sky90Secondary:tt.sky90,ocean12Primary:tt.ocean12,ocean30Primary:tt.ocean30,ocean45Primary:tt.ocean45,ocean70Primary:tt.ocean70,ocean110Primary:tt.ocean110,ocean35Secondary:tt.ocean35,ocean40Secondary:tt.ocean40,ocean50Secondary:tt.ocean50,ocean57Secondary:tt.ocean57,ocean90Secondary:tt.ocean90,violet12Primary:tt.violet12,violet30Primary:tt.violet30,violet45Primary:tt.violet45,violet70Primary:tt.violet70,violet110Primary:tt.violet110,violet35Secondary:tt.violet35,violet40Secondary:tt.violet40,violet50Secondary:tt.violet50,violet57Secondary:tt.violet57,violet90Secondary:tt.violet90,plum12Primary:tt.plum12,plum30Primary:tt.plum30,plum45Primary:tt.plum45,plum70Primary:tt.plum70,plum110Primary:tt.plum110,plum35Secondary:tt.plum35,plum40Secondary:tt.plum40,plum50Secondary:tt.plum50,plum57Secondary:tt.plum57,plum90Secondary:tt.plum90,stone12Primary:tt.stone12,stone30Primary:tt.stone30,stone45Primary:tt.stone45,stone70Primary:tt.stone70,stone110Primary:tt.stone110,stone35Secondary:tt.stone35,stone40Secondary:tt.stone40,stone50Secondary:tt.stone50,stone57Secondary:tt.stone57,stone90Secondary:tt.stone90},Nqe=t=>({surfacePagePrimary:t==null?void 0:t.white1010,surfacePageSecondary:t==null?void 0:t.grey1111,surfaceCardPrimary:t==null?void 0:t.white1010,surfaceCardSecondary:t==null?void 0:t.grey1111,surfaceDark:t==null?void 0:t.grey100100,textTitle:t==null?void 0:t.grey125125,textDescription:t==null?void 0:t.grey125125,textBody:t==null?void 0:t.grey125125,textTimestamp:t==null?void 0:t.grey5782,textAuthor:t==null?void 0:t.grey5782,textDatapoint:t==null?void 0:t.grey5782,textLink:t==null?void 0:t.blue5782,textPlaceholder:t==null?void 0:t.grey2424,textSuccess:t==null?void 0:t.green5782,textWarning:t==null?void 0:t.orange5782,textError:t==null?void 0:t.red5782,lineStroke:t==null?void 0:t.grey1424,lineDivider:t==null?void 0:t.grey1214,surfaceOverlayGrey:t==null?void 0:t.grey100100op75,surfaceOverlayWhite:t==null?void 0:t.white1010op75,surfaceAttention:t==null?void 0:t.blue4570,surfaceSuccess:t==null?void 0:t.green4570,surfaceWarning:t==null?void 0:t.orange4570,surfaceError:t==null?void 0:t.red4570,surfaceDivider:t==null?void 0:t.grey1214,textSurfaceColored:t==null?void 0:t.white1010,iconDefault:t==null?void 0:t.grey125125,iconSuccess:t==null?void 0:t.green4570,iconWarning:t==null?void 0:t.orange4570,iconError:t==null?void 0:t.red4570,iconSurfaceColored:t==null?void 0:t.white1010,lineConnector:t==null?void 0:t.grey1424}),Gie={white1010:dr.white,white1010op75:dr.white10op75,grey1111:dr.grey11,grey1214:dr.grey12,grey1424:dr.grey14,grey2424:dr.grey24,grey3045:dr.grey30,grey4570:dr.grey45,grey5782:dr.grey57,grey100100:dr.grey100,grey100100op75:dr.grey100op75,grey125125:dr.grey125,blue1212:dr.blue12,blue4570:dr.blue45,blue5782:dr.blue57,green1212:dr.green12,green4570:dr.green45,green5782:dr.green57,orange1212:dr.orange12,orange3045:dr.orange30,orange4570:dr.orange45,orange5782:dr.orange57,red1212:dr.red12,red4570:dr.red45,red5782:dr.red57,violet1212:dr.violet12,violet4570:dr.violet45,violet5790:dr.violet57,sea4570:dr.sea45,sea5790:dr.sea57},jqe=Nqe(Gie),An={primitives:dr,additionalPrimitives:tt,contrasts:Gie,ui:jqe,dataVisualization:Aqe};var x6,b6,w6,C6,S6,k6,E6,_6,T6,A6,N6,j6,D6;const Dqe="canvas",Rqe={"ic-brand-primary":An==null||(x6=An.contrasts)===null||x6===void 0?void 0:x6.blue4570,"ic-brand-font-color-dark":An==null||(b6=An.contrasts)===null||b6===void 0?void 0:b6.grey125125,"ic-link-color":An==null||(w6=An.contrasts)===null||w6===void 0?void 0:w6.blue5782,"ic-link-decoration":"none","ic-brand-button--primary-bgd":An==null||(C6=An.contrasts)===null||C6===void 0?void 0:C6.blue4570,"ic-brand-button--primary-text":An==null||(S6=An.contrasts)===null||S6===void 0?void 0:S6.white1010,"ic-brand-button--secondary-bgd":An==null||(k6=An.contrasts)===null||k6===void 0?void 0:k6.grey125125,"ic-brand-button--secondary-text":An==null||(E6=An.contrasts)===null||E6===void 0?void 0:E6.white1010,"ic-brand-global-nav-bgd":An==null||(_6=An.contrasts)===null||_6===void 0?void 0:_6.grey100100,"ic-global-nav-link-hover":An==null||(T6=An.contrasts)===null||T6===void 0?void 0:T6.grey125125,"ic-brand-global-nav-ic-icon-svg-fill":An==null||(A6=An.contrasts)===null||A6===void 0?void 0:A6.white1010,"ic-brand-global-nav-ic-icon-svg-fill--active":An==null||(N6=An.contrasts)===null||N6===void 0?void 0:N6.blue4570,"ic-brand-global-nav-menu-item__text-color":An==null||(j6=An.contrasts)===null||j6===void 0?void 0:j6.white1010,"ic-brand-global-nav-menu-item__text-color--active":An==null||(D6=An.contrasts)===null||D6===void 0?void 0:D6.blue4570},Mqe={key:Dqe,description:"This theme meets WCAG 2.1 AA rules for color contrast.",...xqe,colors:An,...Rqe},Iqe=qie.registerTheme(Mqe),Oqe=(t,e,n,r,s)=>{const a=e,i=n,o=r?r.themeOverride:void 0,l=t,u=l.componentOverrides;let d={},f={};return u&&(d=a&&u[a]||i&&u[i]||{}),o&&(typeof o=="function"?f=o(s||{},t):f=o),{...d,...f}},Pqe=()=>{let t=YVe();if(qHe(t)){const e=qie.getCurrentTheme();if(e)return e;t=Iqe}return t},R6={styles:{},makeStyles:()=>{}},Wie=JM((t,e,n)=>{const r=t.displayName||t.name,s=y.forwardRef((a,i)=>{const o=Pqe();a.styles&&GD(!1,`Manually passing the "styles" property is not allowed on the ${r} component. Using the default styles calculated by the @withStyle decorator instead.
`,a.styles),a.makeStyles&&GD(!1,`Manually passing the "makeStyles" property is not allowed on the ${r} component. Styles are calculated by the @withStyle decorator.`);const l={...t.defaultProps,...a,...R6};let u=typeof n=="function"?n(o):{};const d=Oqe(o,r,t.componentId,l,u);u={...u,...d};const f=y.useState(e?e(u,l,{}):{}),m=JHe(f,2),g=m[0],x=m[1];return Cd(t,{ref:i,...a,makeStyles:C=>{const S=e(u,l,C);UHe(S,g)||x(S)},styles:g,themeOverride:d})});return Oie(s,t),s.originalType=t.originalType||t,s.propTypes=t.propTypes,s.defaultProps=t.defaultProps,s.allowedProps=t.allowedProps,s.generateComponentTheme=n,t.defaultProps={...t.defaultProps,makeStyles:R6.makeStyles,styles:R6.styles},s}),Fqe=(t,e)=>{const n=e.inline,r=e.color,s={inherit:{color:"inherit"},primary:{color:t.primaryColor},secondary:{color:t.secondaryColor},"primary-inverse":{color:t.primaryInverseColor},"secondary-inverse":{color:t.secondaryInverseColor},success:{color:t.successColor},brand:{color:t.brandColor},warning:{color:t.warningColor},error:{color:t.errorColor},alert:{color:t.alertColor},auto:{}};return{inlineSVG:{label:"inlineSVG",fill:"currentColor",display:n?"inline-block":"block",overflow:"visible",...s[r]}}},Bqe=t=>{var e,n,r,s,a,i,o,l,u;const d=t.colors,f=t.key,m={canvas:{primaryColor:t["ic-brand-font-color-dark"],brandColor:t["ic-brand-primary"]}};return{...{primaryInverseColor:d==null||(e=d.contrasts)===null||e===void 0?void 0:e.white1010,primaryColor:d==null||(n=d.contrasts)===null||n===void 0?void 0:n.grey125125,secondaryColor:d==null||(r=d.contrasts)===null||r===void 0?void 0:r.grey4570,secondaryInverseColor:d==null||(s=d.contrasts)===null||s===void 0?void 0:s.grey1111,warningColor:d==null||(a=d.contrasts)===null||a===void 0?void 0:a.orange4570,brandColor:d==null||(i=d.contrasts)===null||i===void 0?void 0:i.blue4570,errorColor:d==null||(o=d.contrasts)===null||o===void 0?void 0:o.red4570,alertColor:d==null||(l=d.contrasts)===null||l===void 0?void 0:l.blue4570,successColor:d==null||(u=d.contrasts)===null||u===void 0?void 0:u.green4570},...m[f]}},Lqe={children:Wa.node,src:Wa.string,title:Wa.string,description:Wa.string,focusable:Wa.bool,width:Wa.oneOfType([Wa.string,Wa.number]),height:Wa.oneOfType([Wa.string,Wa.number]),inline:Wa.bool,color:Wa.oneOf(["inherit","primary","secondary","primary-inverse","secondary-inverse","success","error","alert","warning","brand","auto"]),elementRef:Wa.func},zqe=["children","src","title","description","focusable","width","height","inline","color","elementRef"],$qe=["style","title","description","focusable","src","styles"];var Rq,Mq,Iq,Ip,Ih;let Kie=(Rq=aqe(),Mq=Wie(Fqe,Bqe),Iq=Uie(),Rq(Ip=Mq(Ip=Iq(Ip=(Ih=class QD extends y.Component{constructor(e){super(e),this.titleId=void 0,this.descId=void 0,this.ref=null,this.handleRef=n=>{const r=this.props.elementRef;this.ref=n,typeof r=="function"&&r(n)},this.titleId=e.deterministicId("InlineSVG-title"),this.descId=e.deterministicId("InlineSVG-desc")}componentDidMount(){var e,n;(e=(n=this.props).makeStyles)===null||e===void 0||e.call(n)}componentDidUpdate(){var e,n;(e=(n=this.props).makeStyles)===null||e===void 0||e.call(n)}get role(){return this.props.title?"img":"presentation"}renderTitle(){const e=this.props.title;return e?Cd("title",{id:this.titleId,children:e}):null}renderDesc(e){return e?Cd("desc",{id:this.descId,children:e}):null}get labelledBy(){const e=[];return this.props.title&&e.push(this.titleId),this.props.description&&e.push(this.descId),e.length>0?e.join(" "):void 0}renderContent(){if(this.props.src){const e=QD.prepareSrc(this.props.src);return Cd("g",{role:"presentation",dangerouslySetInnerHTML:{__html:e}})}else return Cd("g",{role:"presentation",children:this.props.children})}numberToNumberType(e){if(typeof e=="string"){const n=parseFloat(e);if(!isNaN(n)&&isFinite(e))return n}return e}render(){const e=this.props,n=e.style,r=e.title,s=e.description,a=e.focusable,i=e.src,o=e.styles,l=nb(e,$qe),u=this.props.width==="auto"?void 0:this.numberToNumberType(this.props.width),d=this.props.height==="auto"?void 0:this.numberToNumberType(this.props.height);return QVe("svg",{...Uqe(i),...ZVe(this.props,QD.allowedProps,["inline"]),style:{...n,width:u,height:d},width:u,height:d,"aria-hidden":r?void 0:"true","aria-labelledby":this.labelledBy,role:this.role,focusable:a?"true":"false",css:o==null?void 0:o.inlineSVG,className:l.className,ref:this.handleRef,children:[this.renderTitle(),this.renderDesc(s),this.renderContent()]})}},Ih.displayName="InlineSVG",Ih.componentId="InlineSVG",Ih.allowedProps=zqe,Ih.propTypes=Lqe,Ih.defaultProps={focusable:!1,src:"",title:"",description:"",inline:!0,width:"1em",height:"1em",color:"inherit"},Ih.prepareSrc=t=>{const n=/<svg[^>]*>((.|[\n\r])*)<\/svg>/.exec(t);return n?n[1]:t},Ih))||Ip)||Ip)||Ip);function Uqe(t){const e={},n=/<svg\s+([^>]*)\s*>/,r=/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g;if(typeof t=="string"){const s=n.exec(t),a=s?s[1]:"",i=["xmlns","xmlns:xlink","version"];let o=r.exec(a);for(;o!=null;)i.indexOf(o[1])===-1&&(e[o[1]]=o[2]||(o[3]?o[3]:o[4]?o[4]:o[5])||o[1]),o=r.exec(a)}return e}const Hqe=(t,e)=>{const n=e.rotate,r=e.size,s=e.bidirectional,a={0:{},90:{transform:"rotate(90deg)"},180:{transform:"rotate(180deg)"},270:{transform:"rotate(270deg)"}},i={0:{transform:"scale3d(-1, 1, 1)"},90:{transform:"scale3d(-1, 1, 1) rotate(90deg)"},180:{transform:"scale3d(-1, 1, 1) rotate(180deg)"},270:{transform:"scale3d(-1, 1, 1) rotate(270deg)"}},o={"x-small":{fontSize:t.sizeXSmall},small:{fontSize:t.sizeSmall},medium:{fontSize:t.sizeMedium},large:{fontSize:t.sizeLarge},"x-large":{fontSize:t.sizeXLarge}};return{svgIcon:{label:"svgIcon",verticalAlign:"middle",lineHeight:1,width:"1em",height:"1em",...a[n],...r&&o[r],...s&&{'[dir="rtl"] &':i[n]}}}},Vqe=()=>({...{sizeXSmall:"1.125rem",sizeSmall:"2rem",sizeMedium:"3rem",sizeLarge:"5rem",sizeXLarge:"10rem"}}),qqe={...Kie.propTypes,rotate:Wa.oneOf(["0","90","180","270"]),size:Wa.oneOf(["x-small","small","medium","large","x-large"]),bidirectional:Wa.bool},Gqe=["children","src","title","description","focusable","width","height","inline","color","elementRef","rotate","size","bidirectional"],Wqe=["rotate","className","themeOverride","size","bidirectional","makeStyles","styles"],Kqe=["sizeXSmall","sizeSmall","sizeMedium","sizeLarge","sizeXLarge"];var Oq,Pq,MC,gm;let rI=(Oq=Wie(Hqe,Vqe),Pq=Uie(),Oq(MC=Pq(MC=(gm=class extends y.Component{constructor(...e){super(...e),this.ref=null,this.handleRef=n=>{const r=this.props.elementRef;this.ref=n,typeof r=="function"&&r(n)}}componentDidMount(){var e,n;(e=(n=this.props).makeStyles)===null||e===void 0||e.call(n)}componentDidUpdate(){var e,n;(e=(n=this.props).makeStyles)===null||e===void 0||e.call(n)}render(){const e=this.props,n=e.rotate,r=e.className,s=e.themeOverride;e.size,e.bidirectional,e.makeStyles;const a=e.styles,i=nb(e,Wqe),o=s;o.sizeXSmall,o.sizeSmall,o.sizeMedium,o.sizeLarge,o.sizeXLarge;const l=nb(o,Kqe);return Cd(Kie,{...i,themeOverride:l,rotate:n,css:a==null?void 0:a.svgIcon,className:r,elementRef:this.handleRef})}},gm.displayName="SVGIcon",gm.componentId="SVGIcon",gm.allowedProps=Gqe,gm.propTypes=qqe,gm.defaultProps={rotate:"0",bidirectional:!1},gm))||MC)||MC);var Fq;class wu extends y.Component{constructor(...e){super(...e),this.ref=null,this.handleRef=n=>{const r=this.props.elementRef;this.ref=n,typeof r=="function"&&r(n)}}render(){return Cd(rI,{...this.props,name:"IconCanvasLogo",viewBox:"0 0 1920 1920",elementRef:this.handleRef,children:Fq||(Fq=Cd("path",{d:"M958.568 277.97C1100.42 277.97 1216.48 171.94 1233.67 34.3881 1146.27 12.8955 1054.57 0 958.568 0 864.001 0 770.867 12.8955 683.464 34.3881 700.658 171.94 816.718 277.97 958.568 277.97ZM35.8207 682.031C173.373 699.225 279.403 815.285 279.403 957.136 279.403 1098.99 173.373 1215.05 35.8207 1232.24 12.8953 1144.84 1.43262 1051.7 1.43262 957.136 1.43262 862.569 12.8953 769.434 35.8207 682.031ZM528.713 957.142C528.713 1005.41 489.581 1044.55 441.31 1044.55 393.038 1044.55 353.907 1005.41 353.907 957.142 353.907 908.871 393.038 869.74 441.31 869.74 489.581 869.74 528.713 908.871 528.713 957.142ZM1642.03 957.136C1642.03 1098.99 1748.06 1215.05 1885.61 1232.24 1908.54 1144.84 1920 1051.7 1920 957.136 1920 862.569 1908.54 769.434 1885.61 682.031 1748.06 699.225 1642.03 815.285 1642.03 957.136ZM1567.51 957.142C1567.51 1005.41 1528.38 1044.55 1480.11 1044.55 1431.84 1044.55 1392.71 1005.41 1392.71 957.142 1392.71 908.871 1431.84 869.74 1480.11 869.74 1528.38 869.74 1567.51 908.871 1567.51 957.142ZM958.568 1640.6C816.718 1640.6 700.658 1746.63 683.464 1884.18 770.867 1907.11 864.001 1918.57 958.568 1918.57 1053.14 1918.57 1146.27 1907.11 1233.67 1884.18 1216.48 1746.63 1100.42 1640.6 958.568 1640.6ZM1045.98 1480.11C1045.98 1528.38 1006.85 1567.51 958.575 1567.51 910.304 1567.51 871.172 1528.38 871.172 1480.11 871.172 1431.84 910.304 1392.71 958.575 1392.71 1006.85 1392.71 1045.98 1431.84 1045.98 1480.11ZM1045.98 439.877C1045.98 488.148 1006.85 527.28 958.575 527.28 910.304 527.28 871.172 488.148 871.172 439.877 871.172 391.606 910.304 352.474 958.575 352.474 1006.85 352.474 1045.98 391.606 1045.98 439.877ZM1441.44 1439.99C1341.15 1540.29 1333.98 1697.91 1418.52 1806.8 1579 1712.23 1713.68 1577.55 1806.82 1418.5 1699.35 1332.53 1541.74 1339.7 1441.44 1439.99ZM1414.21 1325.37C1414.21 1373.64 1375.08 1412.77 1326.8 1412.77 1278.53 1412.77 1239.4 1373.64 1239.4 1325.37 1239.4 1277.1 1278.53 1237.97 1326.8 1237.97 1375.08 1237.97 1414.21 1277.1 1414.21 1325.37ZM478.577 477.145C578.875 376.846 586.039 219.234 501.502 110.339 341.024 204.906 206.338 339.592 113.203 498.637 220.666 584.607 378.278 576.01 478.577 477.145ZM679.155 590.32C679.155 638.591 640.024 677.723 591.752 677.723 543.481 677.723 504.349 638.591 504.349 590.32 504.349 542.048 543.481 502.917 591.752 502.917 640.024 502.917 679.155 542.048 679.155 590.32ZM1440 475.712C1540.3 576.01 1697.91 583.174 1806.8 498.637 1712.24 338.159 1577.55 203.473 1418.51 110.339 1332.54 217.801 1341.13 375.413 1440 475.712ZM1414.21 590.32C1414.21 638.591 1375.08 677.723 1326.8 677.723 1278.53 677.723 1239.4 638.591 1239.4 590.32 1239.4 542.048 1278.53 502.917 1326.8 502.917 1375.08 502.917 1414.21 542.048 1414.21 590.32ZM477.145 1438.58C376.846 1338.28 219.234 1331.12 110.339 1415.65 204.906 1576.13 339.593 1710.82 498.637 1805.39 584.607 1696.49 577.443 1538.88 477.145 1438.58ZM679.155 1325.37C679.155 1373.64 640.024 1412.77 591.752 1412.77 543.481 1412.77 504.349 1373.64 504.349 1325.37 504.349 1277.1 543.481 1237.97 591.752 1237.97 640.024 1237.97 679.155 1277.1 679.155 1325.37Z"}))})}}wu.glyphName="canvas-logo";wu.variant="Solid";wu.displayName="IconCanvasLogoSolid";wu.propTypes={...rI.propTypes};wu.allowedProps=[...rI.allowedProps];/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Zh(t,e){return typeof t=="function"?t(e):t}function qo(t,e){return n=>{e.setState(r=>({...r,[t]:Zh(n,r[t])}))}}function TE(t){return t instanceof Function}function Yqe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function Xqe(t,e){const n=[],r=s=>{s.forEach(a=>{n.push(a);const i=e(a);i!=null&&i.length&&r(i)})};return r(t),n}function en(t,e,n){let r=[],s;return a=>{let i;n.key&&n.debug&&(i=Date.now());const o=t(a);if(!(o.length!==r.length||o.some((d,f)=>r[f]!==d)))return s;r=o;let u;if(n.key&&n.debug&&(u=Date.now()),s=e(...o),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-i)*100)/100,f=Math.round((Date.now()-u)*100)/100,m=f/16,g=(x,b)=>{for(x=String(x);x.length<b;)x=" "+x;return x};console.info(`%c ${g(f,5)} /${g(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function tn(t,e,n,r){return{debug:()=>{var s;return(s=t==null?void 0:t.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function Jqe(t,e,n,r){const s=()=>{var i;return(i=a.getValue())!=null?i:t.options.renderFallbackValue},a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:en(()=>[t,n,e,a],(i,o,l,u)=>({table:i,column:o,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),tn(t.options,"debugCells"))};return t._features.forEach(i=>{i.createCell==null||i.createCell(a,n,e,t)},{}),a}function Qqe(t,e,n,r){var s,a;const o={...t._getDefaultColumnDef(),...e},l=o.accessorKey;let u=(s=(a=o.id)!=null?a:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof o.header=="string"?o.header:void 0,d;if(o.accessorFn?d=o.accessorFn:l&&(l.includes(".")?d=m=>{let g=m;for(const b of l.split(".")){var x;g=(x=g)==null?void 0:x[b]}return g}:d=m=>m[o.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:d,parent:r,depth:n,columnDef:o,columns:[],getFlatColumns:en(()=>[!0],()=>{var m;return[f,...(m=f.columns)==null?void 0:m.flatMap(g=>g.getFlatColumns())]},tn(t.options,"debugColumns")),getLeafColumns:en(()=>[t._getOrderColumnsFn()],m=>{var g;if((g=f.columns)!=null&&g.length){let x=f.columns.flatMap(b=>b.getLeafColumns());return m(x)}return[f]},tn(t.options,"debugColumns"))};for(const m of t._features)m.createColumn==null||m.createColumn(f,t);return f}const ni="debugHeaders";function Bq(t,e,n){var r;let a={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const i=[],o=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(o),i.push(l)};return o(a),i},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(i=>{i.createHeader==null||i.createHeader(a,t)}),a}const Zqe={createTable:t=>{t.getHeaderGroups=en(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var a,i;const o=(a=r==null?void 0:r.map(f=>n.find(m=>m.id===f)).filter(Boolean))!=null?a:[],l=(i=s==null?void 0:s.map(f=>n.find(m=>m.id===f)).filter(Boolean))!=null?i:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(s!=null&&s.includes(f.id)));return IC(e,[...o,...u,...l],t)},tn(t.options,ni)),t.getCenterHeaderGroups=en(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(s!=null&&s.includes(a.id))),IC(e,n,t,"center")),tn(t.options,ni)),t.getLeftHeaderGroups=en(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const a=(s=r==null?void 0:r.map(i=>n.find(o=>o.id===i)).filter(Boolean))!=null?s:[];return IC(e,a,t,"left")},tn(t.options,ni)),t.getRightHeaderGroups=en(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const a=(s=r==null?void 0:r.map(i=>n.find(o=>o.id===i)).filter(Boolean))!=null?s:[];return IC(e,a,t,"right")},tn(t.options,ni)),t.getFooterGroups=en(()=>[t.getHeaderGroups()],e=>[...e].reverse(),tn(t.options,ni)),t.getLeftFooterGroups=en(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),tn(t.options,ni)),t.getCenterFooterGroups=en(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),tn(t.options,ni)),t.getRightFooterGroups=en(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),tn(t.options,ni)),t.getFlatHeaders=en(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),tn(t.options,ni)),t.getLeftFlatHeaders=en(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),tn(t.options,ni)),t.getCenterFlatHeaders=en(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),tn(t.options,ni)),t.getRightFlatHeaders=en(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),tn(t.options,ni)),t.getCenterLeafHeaders=en(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),tn(t.options,ni)),t.getLeftLeafHeaders=en(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),tn(t.options,ni)),t.getRightLeafHeaders=en(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),tn(t.options,ni)),t.getLeafHeaders=en(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,a,i,o,l,u;return[...(s=(a=e[0])==null?void 0:a.headers)!=null?s:[],...(i=(o=n[0])==null?void 0:o.headers)!=null?i:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(d=>d.getLeafHeaders()).flat()},tn(t.options,ni))}};function IC(t,e,n,r){var s,a;let i=0;const o=function(m,g){g===void 0&&(g=1),i=Math.max(i,g),m.filter(x=>x.getIsVisible()).forEach(x=>{var b;(b=x.columns)!=null&&b.length&&o(x.columns,g+1)},0)};o(t);let l=[];const u=(m,g)=>{const x={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},b=[];m.forEach(C=>{const S=[...b].reverse()[0],w=C.column.depth===x.depth;let E,T=!1;if(w&&C.column.parent?E=C.column.parent:(E=C.column,T=!0),S&&(S==null?void 0:S.column)===E)S.subHeaders.push(C);else{const _=Bq(n,E,{id:[r,g,E.id,C==null?void 0:C.id].filter(Boolean).join("_"),isPlaceholder:T,placeholderId:T?`${b.filter(A=>A.column===E).length}`:void 0,depth:g,index:b.length});_.subHeaders.push(C),b.push(_)}x.headers.push(C),C.headerGroup=x}),l.push(x),g>0&&u(b,g-1)},d=e.map((m,g)=>Bq(n,m,{depth:i,index:g}));u(d,i-1),l.reverse();const f=m=>m.filter(x=>x.column.getIsVisible()).map(x=>{let b=0,C=0,S=[0];x.subHeaders&&x.subHeaders.length?(S=[],f(x.subHeaders).forEach(E=>{let{colSpan:T,rowSpan:_}=E;b+=T,S.push(_)})):b=1;const w=Math.min(...S);return C=C+w,x.colSpan=b,x.rowSpan=C,{colSpan:b,rowSpan:C}});return f((s=(a=l[0])==null?void 0:a.headers)!=null?s:[]),l}const sI=(t,e,n,r,s,a,i)=>{let o={id:e,index:r,original:n,depth:s,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(o._valuesCache.hasOwnProperty(l))return o._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return o._valuesCache[l]=u.accessorFn(o.original,r),o._valuesCache[l]},getUniqueValues:l=>{if(o._uniqueValuesCache.hasOwnProperty(l))return o._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(o._uniqueValuesCache[l]=u.columnDef.getUniqueValues(o.original,r),o._uniqueValuesCache[l]):(o._uniqueValuesCache[l]=[o.getValue(l)],o._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=o.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>Xqe(o.subRows,l=>l.subRows),getParentRow:()=>o.parentId?t.getRow(o.parentId,!0):void 0,getParentRows:()=>{let l=[],u=o;for(;;){const d=u.getParentRow();if(!d)break;l.push(d),u=d}return l.reverse()},getAllCells:en(()=>[t.getAllLeafColumns()],l=>l.map(u=>Jqe(t,o,u,u.id)),tn(t.options,"debugRows")),_getAllCellsByColumnId:en(()=>[o.getAllCells()],l=>l.reduce((u,d)=>(u[d.column.id]=d,u),{}),tn(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(o,t)}return o},eGe={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Yie=(t,e,n)=>{var r,s;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(a))};Yie.autoRemove=t=>uc(t);const Xie=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};Xie.autoRemove=t=>uc(t);const Jie=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};Jie.autoRemove=t=>uc(t);const Qie=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};Qie.autoRemove=t=>uc(t);const Zie=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});Zie.autoRemove=t=>uc(t)||!(t!=null&&t.length);const eoe=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});eoe.autoRemove=t=>uc(t)||!(t!=null&&t.length);const toe=(t,e,n)=>t.getValue(e)===n;toe.autoRemove=t=>uc(t);const noe=(t,e,n)=>t.getValue(e)==n;noe.autoRemove=t=>uc(t);const aI=(t,e,n)=>{let[r,s]=n;const a=t.getValue(e);return a>=r&&a<=s};aI.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,a=e===null||Number.isNaN(r)?-1/0:r,i=n===null||Number.isNaN(s)?1/0:s;if(a>i){const o=a;a=i,i=o}return[a,i]};aI.autoRemove=t=>uc(t)||uc(t[0])&&uc(t[1]);const dd={includesString:Yie,includesStringSensitive:Xie,equalsString:Jie,arrIncludes:Qie,arrIncludesAll:Zie,arrIncludesSome:eoe,equals:toe,weakEquals:noe,inNumberRange:aI};function uc(t){return t==null||t===""}const tGe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:qo("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?dd.includesString:typeof r=="number"?dd.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?dd.equals:Array.isArray(r)?dd.arrIncludes:dd.weakEquals},t.getFilterFn=()=>{var n,r;return TE(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:dd[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),a=r==null?void 0:r.find(d=>d.id===t.id),i=Zh(n,a?a.value:void 0);if(Lq(s,i,t)){var o;return(o=r==null?void 0:r.filter(d=>d.id!==t.id))!=null?o:[]}const l={id:t.id,value:i};if(a){var u;return(u=r==null?void 0:r.map(d=>d.id===t.id?l:d))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var a;return(a=Zh(e,s))==null?void 0:a.filter(i=>{const o=n.find(l=>l.id===i.id);if(o){const l=o.getFilterFn();if(Lq(l,i.value,o))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Lq(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const nGe=(t,e,n)=>n.reduce((r,s)=>{const a=s.getValue(t);return r+(typeof a=="number"?a:0)},0),rGe=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},sGe=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},aGe=(t,e,n)=>{let r,s;return n.forEach(a=>{const i=a.getValue(t);i!=null&&(r===void 0?i>=i&&(r=s=i):(r>i&&(r=i),s<i&&(s=i)))}),[r,s]},iGe=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let a=s.getValue(t);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},oGe=(t,e)=>{if(!e.length)return;const n=e.map(a=>a.getValue(t));if(!Yqe(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((a,i)=>a-i);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},lGe=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),cGe=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,uGe=(t,e)=>e.length,M6={sum:nGe,min:rGe,max:sGe,extent:aGe,mean:iGe,median:oGe,unique:lGe,uniqueCount:cGe,count:uGe},dGe={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:qo("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return M6.sum;if(Object.prototype.toString.call(r)==="[object Date]")return M6.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return TE(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:M6[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function hGe(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(a=>!e.includes(a.id));return n==="remove"?r:[...e.map(a=>t.find(i=>i.id===a)).filter(Boolean),...r]}const fGe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:qo("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=en(n=>[Xx(e,n)],n=>n.findIndex(r=>r.id===t.id),tn(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Xx(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=Xx(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=en(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let a=[];if(!(e!=null&&e.length))a=s;else{const i=[...e],o=[...s];for(;o.length&&i.length;){const l=i.shift(),u=o.findIndex(d=>d.id===l);u>-1&&a.push(o.splice(u,1)[0])}a=[...a,...o]}return hGe(a,n,r)},tn(t.options,"debugTable"))}},I6=()=>({left:[],right:[]}),mGe={getInitialState:t=>({columnPinning:I6(),...t}),getDefaultOptions:t=>({onColumnPinningChange:qo("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var a,i;if(n==="right"){var o,l;return{left:((o=s==null?void 0:s.left)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,d;return{left:[...((u=s==null?void 0:s.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((d=s==null?void 0:s.right)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((a=s==null?void 0:s.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:((i=s==null?void 0:s.right)!=null?i:[]).filter(f=>!(r!=null&&r.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,a,i;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((a=(i=e.options.enableColumnPinning)!=null?i:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(o=>o.id),{left:r,right:s}=e.getState().columnPinning,a=n.some(o=>r==null?void 0:r.includes(o)),i=n.some(o=>s==null?void 0:s.includes(o));return a?"left":i?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=en(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const a=[...r??[],...s??[]];return n.filter(i=>!a.includes(i.column.id))},tn(e.options,"debugRows")),t.getLeftVisibleCells=en(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(i=>i.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),tn(e.options,"debugRows")),t.getRightVisibleCells=en(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(i=>i.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),tn(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?I6():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:I6())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,a;return!!((s=r.left)!=null&&s.length||(a=r.right)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=en(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),tn(t.options,"debugColumns")),t.getRightLeafColumns=en(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),tn(t.options,"debugColumns")),t.getCenterLeafColumns=en(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(a=>!s.includes(a.id))},tn(t.options,"debugColumns"))}};function pGe(t){return t||(typeof document<"u"?document:null)}const OC={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},O6=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),gGe={getDefaultColumnDef:()=>OC,getInitialState:t=>({columnSizing:{},columnSizingInfo:O6(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:qo("columnSizing",t),onColumnSizingInfoChange:qo("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:OC.minSize,(r=a??t.columnDef.size)!=null?r:OC.size),(s=t.columnDef.maxSize)!=null?s:OC.maxSize)},t.getStart=en(n=>[n,Xx(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,a)=>s+a.getSize(),0),tn(e.options,"debugColumns")),t.getAfter=en(n=>[n,Xx(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,a)=>s+a.getSize(),0),tn(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var a;n+=(a=s.column.getSize())!=null?a:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r==null?void 0:r.getCanResize();return a=>{if(!r||!s||(a.persist==null||a.persist(),P6(a)&&a.touches&&a.touches.length>1))return;const i=t.getSize(),o=t?t.getLeafHeaders().map(S=>[S.column.id,S.column.getSize()]):[[r.id,r.getSize()]],l=P6(a)?Math.round(a.touches[0].clientX):a.clientX,u={},d=(S,w)=>{typeof w=="number"&&(e.setColumnSizingInfo(E=>{var T,_;const A=e.options.columnResizeDirection==="rtl"?-1:1,j=(w-((T=E==null?void 0:E.startOffset)!=null?T:0))*A,D=Math.max(j/((_=E==null?void 0:E.startSize)!=null?_:0),-.999999);return E.columnSizingStart.forEach(z=>{let[F,R]=z;u[F]=Math.round(Math.max(R+R*D,0)*100)/100}),{...E,deltaOffset:j,deltaPercentage:D}}),(e.options.columnResizeMode==="onChange"||S==="end")&&e.setColumnSizing(E=>({...E,...u})))},f=S=>d("move",S),m=S=>{d("end",S),e.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=pGe(n),x={moveHandler:S=>f(S.clientX),upHandler:S=>{g==null||g.removeEventListener("mousemove",x.moveHandler),g==null||g.removeEventListener("mouseup",x.upHandler),m(S.clientX)}},b={moveHandler:S=>(S.cancelable&&(S.preventDefault(),S.stopPropagation()),f(S.touches[0].clientX),!1),upHandler:S=>{var w;g==null||g.removeEventListener("touchmove",b.moveHandler),g==null||g.removeEventListener("touchend",b.upHandler),S.cancelable&&(S.preventDefault(),S.stopPropagation()),m((w=S.touches[0])==null?void 0:w.clientX)}},C=vGe()?{passive:!1}:!1;P6(a)?(g==null||g.addEventListener("touchmove",b.moveHandler,C),g==null||g.addEventListener("touchend",b.upHandler,C)):(g==null||g.addEventListener("mousemove",x.moveHandler,C),g==null||g.addEventListener("mouseup",x.upHandler,C)),e.setColumnSizingInfo(S=>({...S,startOffset:l,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?O6():(n=t.initialState.columnSizingInfo)!=null?n:O6())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let PC=null;function vGe(){if(typeof PC=="boolean")return PC;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return PC=t,PC}function P6(t){return t.type==="touchstart"}const yGe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:qo("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=en(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),tn(e.options,"debugRows")),t.getVisibleCells=en(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],tn(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>en(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),tn(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,a)=>({...s,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Xx(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const xGe={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},bGe={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:qo("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,a;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>dd.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return TE(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:dd[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},wGe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:qo("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,a;t.setExpanded(r?{}:(s=(a=t.initialState)==null?void 0:a.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const i=a.split(".");r=Math.max(r,i.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const a=r===!0?!0:!!(r!=null&&r[t.id]);let i={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(o=>{i[o]=!0}):i=r,n=(s=n)!=null?s:!a,!a&&n)return{...i,[t.id]:!0};if(a&&!n){const{[t.id]:o,...l}=i;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},ZD=0,e7=10,F6=()=>({pageIndex:ZD,pageSize:e7}),CGe={getInitialState:t=>({...t,pagination:{...F6(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:qo("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=a=>Zh(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?F6():(s=t.initialState.pagination)!=null?s:F6())},t.setPageIndex=r=>{t.setPagination(s=>{let a=Zh(r,s.pageIndex);const i=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,i)),{...s,pageIndex:a}})},t.resetPageIndex=r=>{var s,a;t.setPageIndex(r?ZD:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?s:ZD)},t.resetPageSize=r=>{var s,a;t.setPageSize(r?e7:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?s:e7)},t.setPageSize=r=>{t.setPagination(s=>{const a=Math.max(1,Zh(r,s.pageSize)),i=s.pageSize*s.pageIndex,o=Math.floor(i/a);return{...s,pageIndex:o,pageSize:a}})},t.setPageCount=r=>t.setPagination(s=>{var a;let i=Zh(r,(a=t.options.pageCount)!=null?a:-1);return typeof i=="number"&&(i=Math.max(-1,i)),{...s,pageCount:i}}),t.getPageOptions=en(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((a,i)=>i)),s},tn(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},B6=()=>({top:[],bottom:[]}),SGe={getInitialState:t=>({rowPinning:B6(),...t}),getDefaultOptions:t=>({onRowPinningChange:qo("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const a=r?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],i=s?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],o=new Set([...i,t.id,...a]);e.setRowPinning(l=>{var u,d;if(n==="bottom"){var f,m;return{top:((f=l==null?void 0:l.top)!=null?f:[]).filter(b=>!(o!=null&&o.has(b))),bottom:[...((m=l==null?void 0:l.bottom)!=null?m:[]).filter(b=>!(o!=null&&o.has(b))),...Array.from(o)]}}if(n==="top"){var g,x;return{top:[...((g=l==null?void 0:l.top)!=null?g:[]).filter(b=>!(o!=null&&o.has(b))),...Array.from(o)],bottom:((x=l==null?void 0:l.bottom)!=null?x:[]).filter(b=>!(o!=null&&o.has(b)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(b=>!(o!=null&&o.has(b))),bottom:((d=l==null?void 0:l.bottom)!=null?d:[]).filter(b=>!(o!=null&&o.has(b)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,a=n.some(o=>r==null?void 0:r.includes(o)),i=n.some(o=>s==null?void 0:s.includes(o));return a?"top":i?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const a=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(i=>{let{id:o}=i;return o});return(r=a==null?void 0:a.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?B6():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:B6())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,a;return!!((s=r.top)!=null&&s.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(i=>{const o=t.getRow(i,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(i=>e.find(o=>o.id===i))).filter(Boolean).map(i=>({...i,position:r}))},t.getTopRows=en(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),tn(t.options,"debugRows")),t.getBottomRows=en(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),tn(t.options,"debugRows")),t.getCenterRows=en(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(a=>!s.has(a.id))},tn(t.options,"debugRows"))}},kGe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:qo("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):s.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(a=>{t7(s,a.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=en(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?L6(t,n):{rows:[],flatRows:[],rowsById:{}},tn(t.options,"debugTable")),t.getFilteredSelectedRowModel=en(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?L6(t,n):{rows:[],flatRows:[],rowsById:{}},tn(t.options,"debugTable")),t.getGroupedSelectedRowModel=en(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?L6(t,n):{rows:[],flatRows:[],rowsById:{}},tn(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(a=>{var i;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return a;const o={...a};return t7(o,t.id,n,(i=r==null?void 0:r.selectChildren)!=null?i:!0,e),o})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return iI(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return n7(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return n7(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},t7=(t,e,n,r,s)=>{var a;const i=s.getRow(e,!0);n?(i.getCanMultiSelect()||Object.keys(t).forEach(o=>delete t[o]),i.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=i.subRows)!=null&&a.length&&i.getCanSelectSubRows()&&i.subRows.forEach(o=>t7(t,o.id,n,r,s))};function L6(t,e){const n=t.getState().rowSelection,r=[],s={},a=function(i,o){return i.map(l=>{var u;const d=iI(l,n);if(d&&(r.push(l),s[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:a(l.subRows)}),d)return l}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:s}}function iI(t,e){var n;return(n=e[t.id])!=null?n:!1}function n7(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,a=!1;return t.subRows.forEach(i=>{if(!(a&&!s)&&(i.getCanSelect()&&(iI(i,e)?a=!0:s=!1),i.subRows&&i.subRows.length)){const o=n7(i,e);o==="all"?a=!0:(o==="some"&&(a=!0),s=!1)}}),s?"all":a?"some":!1}const r7=/([0-9]+)/gm,EGe=(t,e,n)=>roe(Sf(t.getValue(n)).toLowerCase(),Sf(e.getValue(n)).toLowerCase()),_Ge=(t,e,n)=>roe(Sf(t.getValue(n)),Sf(e.getValue(n))),TGe=(t,e,n)=>oI(Sf(t.getValue(n)).toLowerCase(),Sf(e.getValue(n)).toLowerCase()),AGe=(t,e,n)=>oI(Sf(t.getValue(n)),Sf(e.getValue(n))),NGe=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},jGe=(t,e,n)=>oI(t.getValue(n),e.getValue(n));function oI(t,e){return t===e?0:t>e?1:-1}function Sf(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function roe(t,e){const n=t.split(r7).filter(Boolean),r=e.split(r7).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),a=r.shift(),i=parseInt(s,10),o=parseInt(a,10),l=[i,o].sort();if(isNaN(l[0])){if(s>a)return 1;if(a>s)return-1;continue}if(isNaN(l[1]))return isNaN(i)?-1:1;if(i>o)return 1;if(o>i)return-1}return n.length-r.length}const sx={alphanumeric:EGe,alphanumericCaseSensitive:_Ge,text:TGe,textCaseSensitive:AGe,datetime:NGe,basic:jGe},DGe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:qo("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const a=s==null?void 0:s.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return sx.datetime;if(typeof a=="string"&&(r=!0,a.split(r7).length>1))return sx.alphanumeric}return r?sx.text:sx.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return TE(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:sx[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),a=typeof n<"u"&&n!==null;e.setSorting(i=>{const o=i==null?void 0:i.find(g=>g.id===t.id),l=i==null?void 0:i.findIndex(g=>g.id===t.id);let u=[],d,f=a?n:s==="desc";if(i!=null&&i.length&&t.getCanMultiSort()&&r?o?d="toggle":d="add":i!=null&&i.length&&l!==i.length-1?d="replace":o?d="toggle":d="replace",d==="toggle"&&(a||s||(d="remove")),d==="add"){var m;u=[...i,{id:t.id,desc:f}],u.splice(0,u.length-((m=e.options.maxMultiSortColCount)!=null?m:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=i.map(g=>g.id===t.id?{...g,desc:f}:g):d==="remove"?u=i.filter(g=>g.id!==t.id):u=[{id:t.id,desc:f}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const a=t.getFirstSortDir(),i=t.getIsSorted();return i?i!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:i==="desc"?"asc":"desc":a},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},RGe=[Zqe,yGe,fGe,mGe,eGe,tGe,xGe,bGe,DGe,dGe,wGe,CGe,SGe,kGe,gGe];function MGe(t){var e,n;const r=[...RGe,...(e=t._features)!=null?e:[]];let s={_features:r};const a=s._features.reduce((m,g)=>Object.assign(m,g.getDefaultOptions==null?void 0:g.getDefaultOptions(s)),{}),i=m=>s.options.mergeOptions?s.options.mergeOptions(a,m):{...a,...m};let l={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(m=>{var g;l=(g=m.getInitialState==null?void 0:m.getInitialState(l))!=null?g:l});const u=[];let d=!1;const f={_features:r,options:{...a,...t},initialState:l,_queue:m=>{u.push(m),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{s.setState(s.initialState)},setOptions:m=>{const g=Zh(m,s.options);s.options=i(g)},getState:()=>s.options.state,setState:m=>{s.options.onStateChange==null||s.options.onStateChange(m)},_getRowId:(m,g,x)=>{var b;return(b=s.options.getRowId==null?void 0:s.options.getRowId(m,g,x))!=null?b:`${x?[x.id,g].join("."):g}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(m,g)=>{let x=(g?s.getPrePaginationRowModel():s.getRowModel()).rowsById[m];if(!x&&(x=s.getCoreRowModel().rowsById[m],!x))throw new Error;return x},_getDefaultColumnDef:en(()=>[s.options.defaultColumn],m=>{var g;return m=(g=m)!=null?g:{},{header:x=>{const b=x.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:x=>{var b,C;return(b=(C=x.renderValue())==null||C.toString==null?void 0:C.toString())!=null?b:null},...s._features.reduce((x,b)=>Object.assign(x,b.getDefaultColumnDef==null?void 0:b.getDefaultColumnDef()),{}),...m}},tn(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:en(()=>[s._getColumnDefs()],m=>{const g=function(x,b,C){return C===void 0&&(C=0),x.map(S=>{const w=Qqe(s,S,C,b),E=S;return w.columns=E.columns?g(E.columns,w,C+1):[],w})};return g(m)},tn(t,"debugColumns")),getAllFlatColumns:en(()=>[s.getAllColumns()],m=>m.flatMap(g=>g.getFlatColumns()),tn(t,"debugColumns")),_getAllFlatColumnsById:en(()=>[s.getAllFlatColumns()],m=>m.reduce((g,x)=>(g[x.id]=x,g),{}),tn(t,"debugColumns")),getAllLeafColumns:en(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(m,g)=>{let x=m.flatMap(b=>b.getLeafColumns());return g(x)},tn(t,"debugColumns")),getColumn:m=>s._getAllFlatColumnsById()[m]};Object.assign(s,f);for(let m=0;m<s._features.length;m++){const g=s._features[m];g==null||g.createTable==null||g.createTable(s)}return s}function soe(){return t=>en(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,a,i){a===void 0&&(a=0);const o=[];for(let u=0;u<s.length;u++){const d=sI(t,t._getRowId(s[u],u,i),s[u],u,a,void 0,i==null?void 0:i.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,o.push(d),t.options.getSubRows){var l;d.originalSubRows=t.options.getSubRows(s[u],u),(l=d.originalSubRows)!=null&&l.length&&(d.subRows=r(d.originalSubRows,a+1,d))}}return o};return n.rows=r(e),n},tn(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function IGe(t,e,n){return n.options.filterFromLeafRows?OGe(t,e,n):PGe(t,e,n)}function OGe(t,e,n){var r;const s=[],a={},i=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,o=function(l,u){u===void 0&&(u=0);const d=[];for(let m=0;m<l.length;m++){var f;let g=l[m];const x=sI(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(x.columnFilters=g.columnFilters,(f=g.subRows)!=null&&f.length&&u<i){if(x.subRows=o(g.subRows,u+1),g=x,e(g)&&!x.subRows.length){d.push(g),a[g.id]=g,s.push(g);continue}if(e(g)||x.subRows.length){d.push(g),a[g.id]=g,s.push(g);continue}}else g=x,e(g)&&(d.push(g),a[g.id]=g,s.push(g))}return d};return{rows:o(t),flatRows:s,rowsById:a}}function PGe(t,e,n){var r;const s=[],a={},i=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,o=function(l,u){u===void 0&&(u=0);const d=[];for(let m=0;m<l.length;m++){let g=l[m];if(e(g)){var f;if((f=g.subRows)!=null&&f.length&&u<i){const b=sI(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);b.subRows=o(g.subRows,u+1),g=b}d.push(g),s.push(g),a[g.id]=g}}return d};return{rows:o(t),flatRows:s,rowsById:a}}function aoe(){return t=>en(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,r)=>{if(!e.rows.length||!(n!=null&&n.length)&&!r){for(let m=0;m<e.flatRows.length;m++)e.flatRows[m].columnFilters={},e.flatRows[m].columnFiltersMeta={};return e}const s=[],a=[];(n??[]).forEach(m=>{var g;const x=t.getColumn(m.id);if(!x)return;const b=x.getFilterFn();b&&s.push({id:m.id,filterFn:b,resolvedValue:(g=b.resolveFilterValue==null?void 0:b.resolveFilterValue(m.value))!=null?g:m.value})});const i=(n??[]).map(m=>m.id),o=t.getGlobalFilterFn(),l=t.getAllLeafColumns().filter(m=>m.getCanGlobalFilter());r&&o&&l.length&&(i.push("__global__"),l.forEach(m=>{var g;a.push({id:m.id,filterFn:o,resolvedValue:(g=o.resolveFilterValue==null?void 0:o.resolveFilterValue(r))!=null?g:r})}));let u,d;for(let m=0;m<e.flatRows.length;m++){const g=e.flatRows[m];if(g.columnFilters={},s.length)for(let x=0;x<s.length;x++){u=s[x];const b=u.id;g.columnFilters[b]=u.filterFn(g,b,u.resolvedValue,C=>{g.columnFiltersMeta[b]=C})}if(a.length){for(let x=0;x<a.length;x++){d=a[x];const b=d.id;if(d.filterFn(g,b,d.resolvedValue,C=>{g.columnFiltersMeta[b]=C})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const f=m=>{for(let g=0;g<i.length;g++)if(m.columnFilters[i[g]]===!1)return!1;return!0};return IGe(e.rows,f,t)},tn(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function ioe(){return t=>en(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],a=r.filter(l=>{var u;return(u=t.getColumn(l.id))==null?void 0:u.getCanSort()}),i={};a.forEach(l=>{const u=t.getColumn(l.id);u&&(i[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const o=l=>{const u=l.map(d=>({...d}));return u.sort((d,f)=>{for(let g=0;g<a.length;g+=1){var m;const x=a[g],b=i[x.id],C=b.sortUndefined,S=(m=x==null?void 0:x.desc)!=null?m:!1;let w=0;if(C){const E=d.getValue(x.id),T=f.getValue(x.id),_=E===void 0,A=T===void 0;if(_||A){if(C==="first")return _?-1:1;if(C==="last")return _?1:-1;w=_&&A?0:_?C:-C}}if(w===0&&(w=b.sortingFn(d,f,x.id)),w!==0)return S&&(w*=-1),b.invertSorting&&(w*=-1),w}return d.index-f.index}),u.forEach(d=>{var f;s.push(d),(f=d.subRows)!=null&&f.length&&(d.subRows=o(d.subRows))}),u};return{rows:o(n.rows),flatRows:s,rowsById:n.rowsById}},tn(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function a5(t,e){return t?FGe(t)?y.createElement(t,e):t:null}function FGe(t){return BGe(t)||typeof t=="function"||LGe(t)}function BGe(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function LGe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function ooe(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=y.useState(()=>({current:MGe(e)})),[r,s]=y.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:i=>{s(i),t.onStateChange==null||t.onStateChange(i)}})),n.current}function zGe(t){return["url","application/pdf","image/jpeg","image/png","image/gif","image/webp","image/bmp","image/svg+xml","text/plain","text/csv","application/json","application/xml","text/html","video/mp4","video/webm","video/ogg","audio/mpeg","audio/ogg","audio/wav","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/msword","application/vnd.ms-powerpoint","application/vnd.ms-excel"].includes(t||"")}function $Ge(t){return["video/mp4","video/webm","video/ogg"].includes(t||"")}function UGe(t){return["audio/mpeg","audio/ogg","audio/wav"].includes(t||"")}function HGe(t){return["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"].includes(t||"")}function VGe(t){return["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(t||"")}function qGe({url:t,fileType:e,error:n}){if(n)return c.jsx(zq,{message:n});if(e&&!zGe(e))return c.jsx(zq,{message:`Unsupported file type${e?` (${e})`:""}`});if(!t)return c.jsx(GGe,{});if($Ge(e))return c.jsx("video",{src:t,controls:!0,className:"h-full w-full",title:"Video Player"});if(UGe(e))return c.jsx("audio",{src:t,controls:!0,className:"w-full",title:"Audio Player"});if(HGe(e)){const r=`https://docs.google.com/gview?url=${encodeURIComponent(t)}&embedded=true`;return c.jsx("div",{className:"relative h-[80vh] w-full overflow-hidden rounded-xl border border-theme bg-theme-0",children:c.jsx("iframe",{src:r,className:"h-full w-full",title:"Office Viewer"})})}else return VGe(e)?c.jsx("div",{className:"relative h-[80vh] w-full overflow-y-auto rounded-xl border bg-white",children:c.jsx("img",{src:t,className:"max-w-full h-auto"})}):c.jsx("div",{className:"relative h-[80vh] w-full overflow-hidden rounded-xl border bg-white",children:c.jsx("iframe",{src:t,className:"h-full w-full",loading:"lazy",title:"File Viewer"})})}function zq({message:t}){return c.jsx("div",{className:"flex h-[40vh] w-full items-center justify-center rounded-xl border border-theme bg-theme-0",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-2 text-sm font-medium text-theme-0",children:"Unable to preview file"}),c.jsx("div",{className:"text-xs text-theme-1",children:t})]})})}function GGe(){return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-4 w-3/4 rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-full rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-5/6 rounded bg-theme-1 animate-pulse"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-4 w-full rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-4/5 rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-3/4 rounded bg-theme-1 animate-pulse"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-4 w-5/6 rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-full rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-2/3 rounded bg-theme-1 animate-pulse"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-4 w-4/5 rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-full rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-3/4 rounded bg-theme-1 animate-pulse"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-4 w-full rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-5/6 rounded bg-theme-1 animate-pulse"}),c.jsx("div",{className:"h-4 w-4/5 rounded bg-theme-1 animate-pulse"})]})]})}function loe(t){if("file"in t&&t.file)return t.file.type;if(t.metadata){if("url"in t.metadata&&typeof t.metadata.url=="string")return"url";if("content_type"in t.metadata&&typeof t.metadata.content_type=="string")return t.metadata.content_type}return""}function coe(t){return"size"in t.metadata?Cw(t.metadata.size):"size_text"in t.metadata?t.metadata.size_text:"-"}function WGe(t){const e=t.trim();if(!e)throw new Error("Invalid file size");const n=e.match(/^([\d.]+)\s*(b|bytes|kb|mb|gb)$/i);if(!n)throw new Error(`Invalid file size format: "${t}"`);const r=parseFloat(n[1]),s=n[2].toLowerCase();if(Number.isNaN(r))throw new Error(`Invalid numeric value in file size: "${t}"`);const a={b:1,bytes:1,kb:1024,mb:1024**2,gb:1024**3};return Math.round(r*a[s])}function uoe(t){return"size"in t.metadata&&typeof t.metadata.size=="number"?t.metadata.size:"size_text"in t.metadata&&typeof t.metadata.size_text=="string"?WGe(t.metadata.size_text):0}function KGe({document:t,onBack:e}){const n=loe(t),r=hoe(n),s=coe(t),{getSourceUrl:a}=os(),[i,o]=y.useState(null),[l,u]=y.useState(null);return y.useEffect(()=>{(async()=>{try{o(await a(t))}catch{u("Failed to retrieve source. Try reloading the page!")}})()},[t]),c.jsxs("div",{className:"flex h-full w-full flex-col bg-theme-0",children:[c.jsxs("div",{className:"relative bg-theme-0 backdrop-blur-sm z-10",children:[c.jsx("div",{className:"absolute inset-0"}),c.jsx("div",{className:"relative flex items-center justify-between h-16 pr-6",children:c.jsxs("div",{className:"flex items-center gap-1 h-16",children:[c.jsxs(vn,{variant:"ghost",size:"sm",onClick:e,className:"gap-1 text-sm hover:underline text-theme-0",children:[c.jsx(Kd,{className:"h-4 w-4"}),"Close source"]}),c.jsx(Ns,{orientation:"vertical",className:"mr-3 data-[orientation=vertical]:h-5"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-theme-1 border border-theme",children:c.jsx(r,{className:"h-5 w-5 text-theme-1"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-bold text-theme-0",children:t.name}),c.jsx("div",{className:"text-xs text-theme-1 font-medium",children:s})]})]})]})})]}),c.jsx(Ns,{}),c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-8",children:[c.jsx("div",{className:"mb-10",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsx("div",{children:c.jsx("h2",{className:"text-2xl font-bold text-theme-0 mb-2",children:t.name})})})}),c.jsx(qGe,{url:i,fileType:n,error:l})]})})]})}const YGe=t=>{const e=t.toLowerCase();return e.includes("pdf")?{extension:"PDF",bgColor:"bg-red-500",textColor:"text-white"}:e.includes("powerpoint")||e.includes("presentation")||e.includes("ppt")?{extension:"PPT",bgColor:"bg-amber-400",textColor:"text-white",icon:pZ}:e.includes("word")||e.includes("doc")?{extension:"DOC",bgColor:"bg-blue-500",textColor:"text-white",icon:fi}:e.includes("excel")||e.includes("spreadsheet")||e.includes("xls")||e.includes("csv")?{extension:"XLS",bgColor:"bg-green-600",textColor:"text-white",icon:V_e}:e.includes("url")?{extension:"URL",bgColor:"bg-indigo-500",textColor:"text-white",icon:Kb}:e.includes("text/html")||e.includes("website")||e.includes("http")?{extension:"WEB",bgColor:"bg-indigo-500",textColor:"text-white",icon:lZ}:e.startsWith("video/")||e.includes("mp4")||e.includes("webm")?{extension:"MP4",bgColor:"bg-pink-500",textColor:"text-white",icon:p_e}:e.startsWith("audio/")||e.includes("mp3")||e.includes("wav")?{extension:"MP3",bgColor:"bg-emerald-500",textColor:"text-white",icon:s3e}:e.includes("text")||e.includes("markdown")||e.includes("md")?{extension:"TXT",bgColor:"bg-gray-500",textColor:"text-white"}:e.startsWith("image/")||e.includes("png")||e.includes("jpg")||e.includes("jpeg")?{extension:"IMG",bgColor:"bg-cyan-500",textColor:"text-white",icon:cZ}:{extension:"FILE",bgColor:"bg-slate-500",textColor:"text-white",icon:oZ}},doe=(t,e=!0)=>({className:n,iconClassName:r})=>{const s=YGe(t);return c.jsx("div",{className:ge("flex items-center justify-center rounded font-bold text-[9px] leading-none","w-6 h-6",e?s.bgColor:"bg-slate-400/50",s.textColor,n),children:s.icon?c.jsx(s.icon,{className:ge("w-4 h-4",r)}):s.extension})};function XGe(t){const e=new Date(t),r=Date.now()-e.getTime(),s=Math.floor(r/1e3),a=Math.floor(s/60),i=Math.floor(a/60),o=Math.floor(i/24),l=Math.floor(o/7),u=Math.floor(o/30);let d,f=!1;return s<60?(d="Just now",f=!0):a<60?(d=`${a}min ago`,f=!0):i<24?(d=`${i} hour${i===1?"":"s"}  ago`,f=!0):o===1?(d="Yesterday",f=!0):o<7?(d=`${o} days ago`,f=!0):l<4?d=`${l} week${l===1?"":"s"} ago`:u<12?d=`${u} month${u===1?"":"s"}  ago`:d=e.toLocaleDateString(),{text:d,isRecent:f}}function JGe(t,e){var s;const n=(s=t.metadata)==null?void 0:s.content_type;if(n&&e.allowedMimeTypes.length>0&&!e.allowedMimeTypes.includes(n))return{valid:!1,reason:"type"};const r=uoe(t);return r!=null&&r>e.maxFileSizeBytes?{valid:!1,reason:"size"}:{valid:!0}}const ef={"application/vnd.openxmlformats-officedocument.presentationml.presentation":0,"application/vnd.ms-powerpoint":0,"application/pdf":1,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":2,"application/msword":2};function QGe({sources:t,files:e,selected:n,setSelected:r,allowedMimeTypes:s,maxFileSizeBytes:a}){const i=w=>!!t.find(E=>"canvas_file_id"in E.metadata&&E.metadata.canvas_file_id==w.metadata.canvas_file_id),[o,l]=y.useState([]),[u,d]=y.useState(""),f=w=>JGe(w,{allowedMimeTypes:s,maxFileSizeBytes:a}),m=w=>!f(w).valid,g=w=>!m(w)&&n.some(E=>E==w),x=w=>{m(w)||i(w)||r(E=>g(w)?E.filter(T=>T!=w):[...E,w])},b=w=>{r(w?e.filter(E=>!m(E)&&!i(E)):[])},C=y.useMemo(()=>[{id:"select",header:({table:w})=>{const T=w.getRowModel().rows.map(A=>A.original).filter(A=>!m(A)&&!i(A)),_=T.length>0&&T.every(A=>g(A));return c.jsx(Gg,{checked:_,onCheckedChange:A=>b(!!A),"aria-label":"Select all",className:"border-2 ml-4"})},cell:({row:w})=>{const E=w.original,T=m(E),_=i(E);return c.jsx(Gg,{checked:g(E)||_,disabled:T||_,"aria-label":`Select ${E.name}`,className:"border-2"})},enableSorting:!1},{id:"name",accessorKey:"name",enableSorting:!0,header:({column:w})=>c.jsxs(vn,{variant:"ghost",className:"px-0 hover:bg-transparent font-semibold ml-1",onClick:()=>w.toggleSorting(w.getIsSorted()==="asc"),children:["File",c.jsx(m4,{className:"ml-2 h-3.5 w-3.5 opacity-50"})]}),cell:({row:w,getValue:E})=>{const T=f(w.original),_=E(),A=doe("url"in w.original.metadata?"url":w.original.metadata.content_type||"");return c.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[c.jsx(A,{className:"flex-shrink-0"}),c.jsxs("div",{className:"min-w-0 flex-1",children:[T.valid&&c.jsx("div",{className:ge("truncate text-xs",(T.reason==="type"||T.reason==="size")&&"text-red-600 font-medium"),children:_}),T.reason==="type"&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[c.jsx(aU,{className:"h-3 w-3"}),"Unsupported file type: ",_]}),T.reason==="size"&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[c.jsx(aU,{className:"h-3 w-3"}),"File too large: ",_]})]})]})}},{id:"created",accessorKey:"metadata.created_at",enableSorting:!0,header:({column:w})=>c.jsxs(vn,{variant:"ghost",className:"px-0 hover:bg-transparent font-semibold ml-1",onClick:()=>w.toggleSorting(w.getIsSorted()==="asc"),children:["Created",c.jsx(m4,{className:"ml-2 h-3.5 w-3.5 opacity-50"})]}),cell:({row:w})=>{const E=w.original.metadata.created_at;if(!E)return c.jsx("span",{className:"text-theme-2 text-xs",children:""});const{text:T,isRecent:_}=XGe(E);return c.jsxs("div",{className:"text-xs flex items-center gap-2",children:[c.jsx("div",{className:"text-theme-1",children:T}),_&&c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 border border-emerald-200 animate-pulse",children:"New"})]})}}],[n,s,a,t]),S=ooe({data:e.sort((w,E)=>{var L,O;const T=m(w)||i(w),_=m(E)||i(E);if(T&&!_)return 1;if(!T&&_)return-1;const A=(L=w.metadata)==null?void 0:L.content_type,j=(O=E.metadata)==null?void 0:O.content_type,D=A&&A in ef?ef[A]:Number.MAX_SAFE_INTEGER,z=j&&j in ef?ef[j]:Number.MAX_SAFE_INTEGER;if(D!==z)return D-z;const F=new Date(w.metadata.created_at).valueOf(),R=new Date(E.metadata.created_at).valueOf();return F!==R?R-F:0}),columns:C,state:{sorting:o,globalFilter:u},onSortingChange:l,onGlobalFilterChange:d,getCoreRowModel:soe(),getSortedRowModel:ioe(),getFilteredRowModel:aoe()});return e.filter(w=>!m(w)&&!i(w)).length,n.length,c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"w-full",children:c.jsx(wE,{placeholder:"Search files...",value:u,onChange:w=>d(w.target.value),variant:"search",className:"w-full"})}),c.jsx("div",{className:"rounded-lg border-2 border-theme bg-theme-0 max-h-[350px] overflow-hidden",children:c.jsx("div",{className:"overflow-y-auto max-h-[350px]",children:c.jsxs("table",{className:"w-full table-fixed",children:[c.jsx("thead",{className:"sticky top-0 z-10",children:S.getHeaderGroups().map(w=>c.jsx("tr",{className:"border-b-2 border-theme",children:w.headers.map(E=>c.jsx("th",{className:ge(E.column.id==="name"&&"w-[60%]",E.column.id==="select"&&"w-12",E.column.id==="created"&&"w-40","bg-theme-1 text-theme-0 font-semibold h-11 text-left"),children:a5(E.column.columnDef.header,E.getContext())},E.id))},w.id))}),c.jsx("tbody",{children:S.getRowModel().rows.length?S.getRowModel().rows.map(w=>c.jsx("tr",{"data-state":g(w.original)?"selected":void 0,onClick:()=>x(w.original),className:ge("cursor-pointer transition-colors border-b border-theme","hover:bg-theme-1",g(w.original)&&"bg-orange-400/30 hover:bg-orange-400/40 border-orange-400/40",(m(w.original)||i(w.original))&&"opacity-40 pointer-events-none bg-theme-1"),children:w.getVisibleCells().map(E=>c.jsx("td",{className:ge(E.column.id==="name"&&"w-[60%]",E.column.id==="select"&&"w-12",E.column.id==="created"&&"w-40","py-2 px-4"),children:a5(E.column.columnDef.cell,E.getContext())},E.id))},w.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:C.length,className:"h-32 text-center px-4",children:c.jsxs("div",{className:"flex flex-col items-center gap-2 text-theme-2",children:[c.jsx(fi,{className:"h-8 w-8 opacity-30"}),c.jsx("p",{className:"text-sm",children:"No files found"})]})})})})]})})})]})}const hoe=t=>{const e=t.toLowerCase();return e.includes("pdf")?fi:e.includes("powerpoint")||e.includes("presentation")||e.includes("ppt")?pZ:e.includes("word")||e.includes("doc")?fi:e.includes("excel")||e.includes("spreadsheet")||e.includes("xls")?cEe:e.includes("url")?Kb:e.includes("text/html")||e.includes("website")||e.includes("http")?lZ:e.startsWith("video/")||e.includes("mp4")||e.includes("webm")?n3e:e.startsWith("audio/")||e.includes("mp3")||e.includes("wav")?hk:e.includes("text")||e.includes("markdown")||e.includes("md")?oZ:e.startsWith("image/")||e.includes("png")||e.includes("jpg")||e.includes("jpeg")?cZ:rZ};function $q({title:t,sources:e,selectedSources:n,openedSource:r,onSourceToggle:s,onSourceOpen:a,onSourceRemove:i,onSourceRename:o,isCourse:l=!1}){const{validators:u,limits:d}=XM(),[f,m]=y.useState(null),[g,x]=y.useState(null),[b,C]=y.useState(""),S=_=>!1,w=e.filter(_=>!0),E=w.length>0&&w.every(_=>n.includes(_)),T=()=>{E?w.forEach(_=>{n.includes(_)&&s(_)}):w.forEach(_=>{n.includes(_)||s(_)})};return c.jsxs(IS,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(OS,{className:"flex items-center gap-1 font-bold",children:[l&&c.jsx(wu,{}),t]}),e.length>0&&c.jsx("button",{onClick:T,className:"text-xs text-theme-1 hover:text-theme-0 transition",children:E?"Deselect all":"Select all"})]}),c.jsx(wie,{children:c.jsx(KM,{children:e.length===0?c.jsx("div",{className:"text-theme-1 px-2 py-4 text-sm group-data-[collapsible=icon]:hidden",children:"None"}):e.sort((_,A)=>_.name.localeCompare(A.name)).map(_=>{const A="id"in _?_.id:_.name,j="file"in _?_.file.type:typeof _.metadata.content_type=="string"?_.metadata.content_type:"",D=n.includes(_),z=doe("url"in _.metadata?"url":j,D),F=S(),R=f===A;return c.jsxs(YM,{children:[c.jsx(yc,{delayDuration:200,children:c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx("div",{className:"hidden group-data-[collapsible=icon]:block",onClick:L=>{L.stopPropagation(),a==null||a(_)},children:c.jsx("div",{className:ge("relative flex p-1 shrink-0 items-center justify-center rounded-lg cursor-pointer transition-colors","bg-theme-0 border-theme hover:bg-theme-2",(r==null?void 0:r.id)==_.id&&"bg-theme-2"),children:c.jsx(z,{className:ge("size-6","text-[7px]"),iconClassName:"size-4"})})})}),c.jsx(va,{side:"right",align:"center",children:c.jsx("span",{className:"text-xs",children:_.name})})]})}),c.jsxs("div",{className:ge("group flex items-center gap-3 rounded-md mx-1 px-2 py-0.5 group-data-[collapsible=icon]:hidden","hover:bg-theme-1 transition-colors cursor-pointer",D&&"",(r==null?void 0:r.id)==_.id&&"bg-theme-2",r&&(r==null?void 0:r.id)!=_.id&&"opacity-50"),onMouseEnter:()=>m(A),onMouseLeave:()=>m(null),onClick:()=>a==null?void 0:a(_),children:[c.jsx("div",{className:"size-4 shrink-0 flex items-center justify-center",children:c.jsxs(Tv,{children:[c.jsx(Av,{onClick:L=>L.stopPropagation(),className:"text-theme-1 hover:bg-theme-2 rounded-full p-2 transition-colors",children:R?c.jsx(Wb,{className:"size-4"}):c.jsx(z,{className:"size-5 text-[7px]",iconClassName:"size-3"})}),c.jsxs(Nv,{align:"start",className:"w-40",children:[c.jsxs(_d,{onClick:L=>{L.stopPropagation(),a==null||a(_)},className:"gap-2 cursor-pointer",children:[c.jsx(Um,{className:"size-4"}),"Open"]}),c.jsxs(_d,{onClick:L=>{L.stopPropagation(),x(A),C(_.name)},className:"gap-2 cursor-pointer",children:[c.jsx(f_e,{className:"size-4"}),"Rename"]}),c.jsxs(_d,{onClick:L=>{L.stopPropagation(),i==null||i(_)},className:"gap-2 cursor-pointer text-red-600 focus:text-red-600",children:[c.jsx(fR,{className:"size-4"}),"Remove"]})]})]})}),g===A?c.jsx("input",{autoFocus:!0,value:b,onChange:L=>C(L.target.value),onClick:L=>L.stopPropagation(),onBlur:()=>{const L=b.trim();L&&L!==_.name&&(o==null||o({..._,name:L})),x(null)},onKeyDown:L=>{L.key==="Enter"&&L.currentTarget.blur(),L.key==="Escape"&&(x(null),C(_.name))},className:"flex-1 bg-theme-0 border border-theme rounded px-2 py-0.5 text-sm text-theme-0 focus:outline-none"}):c.jsx("span",{className:ge("flex-1 min-w-0 truncate text-left text-theme-0 text-sm",!D&&"text-theme-2"),children:_.name}),c.jsx("div",{className:"hover:bg-blue-300 transition rounded-full p-1",onClick:L=>{L.stopPropagation(),s(_)},children:c.jsx("div",{className:ge("relative flex size-5 shrink-0 items-center justify-center rounded transition-colors cursor-pointer transition",D?"bg-slate-600/50":"bg-theme-0 border-theme border-2 hover:border-theme-1",F),children:D&&c.jsx(or,{className:"size-3.5 text-white stroke-[3]"})})})]})]},A)})})})]})}function foe({shouldCollapse:t}){const{setOpen:e}=ww();return y.useEffect(()=>{e(!t)},[t]),null}function ZGe({courses:t,notebooks:e,selectedNotebook:n,onNotebookChange:r,sources:s,selectedSources:a,openedSource:i,onSourceToggle:o,openUploadModal:l,openLanding:u,enterCreateFlow:d,onSourceOpen:f,onSourceRemove:m,onSourceRename:g,...x}){const{currentPage:b}=os(),C=s.filter(w=>w.source==="course"),S=s.filter(w=>w.source!=="course");return c.jsxs(yie,{side:"left",collapsible:"icon",className:"border-theme",...x,children:[c.jsx(foe,{shouldCollapse:b.type!=="chat"}),c.jsx(vq,{className:"border-theme bg-transparent px-3 py-3 space-y-2",children:c.jsx(FHe,{courses:t,notebooks:e,selectedNotebook:n,onNotebookChange:r,openLanding:u,enterCreateFlow:d})}),c.jsx(vq,{className:"bg-transparent gap-2 border-theme px-3 py-3",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-1.5 group-data-[collapsible=icon]:flex-col group-data-[collapsible=icon]:w-full text-sm font-medium text-theme-0",children:[c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Sources"}),c.jsx(yc,{children:c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx(S0,{className:"h-3.5 w-3.5 text-theme-1"})}),c.jsx(va,{side:"right",children:c.jsx("p",{className:"max-w-xs text-xs",children:"Answers are generated using only your selected sources and include citations."})})]})})]})})}),c.jsx("div",{className:"px-3",children:c.jsx(Ns,{className:"mb-4 h-px rounded-full"})}),c.jsxs(bie,{className:"px-1 bg-transparent",children:[c.jsxs(vn,{onClick:l,className:`
    h-10 group-data-[collapsible=icon]:mx-1 mx-3 gap-1 px-3
    border border-theme text-theme-0
    rounded-full
    hover:bg-theme-2
    transition
  `,children:[c.jsx(Yd,{className:"size-4"}),c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Add sources"})]}),c.jsx($q,{title:"Course Sources",sources:C,openedSource:i,selectedSources:a,onSourceToggle:o,isCourse:!0,onSourceOpen:f,onSourceRemove:m,onSourceRename:g}),c.jsx($q,{title:"External Sources",sources:S,openedSource:i,selectedSources:a,onSourceToggle:o,onSourceOpen:f,onSourceRemove:m,onSourceRename:g})]}),c.jsx(xie,{})]})}const eWe=({result:t,isExpanded:e=!1,onToggleExpand:n})=>{const{contents:r}=t,s=(r==null?void 0:r.flashcards)??[],a=3,i=e?s:s.slice(0,a);return c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"space-y-2",children:i.map((o,l)=>c.jsxs("div",{className:"rounded-lg border border-theme bg-theme-1 px-3 py-2.5 hover:border-theme hover:bg-theme-1 transition-colors",children:[c.jsxs("div",{className:"flex items-start gap-2.5",children:[c.jsx("div",{className:"mt-0.5 flex h-5 w-5 items-center justify-center rounded-full bg-slate-700 text-[11px] font-bold text-white flex-shrink-0",children:l+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-[13px] font-semibold leading-snug text-theme-0 mb-1",children:o.term}),c.jsx("div",{className:"text-[11px] leading-snug text-theme-1 line-clamp-2",children:o.definition})]})]}),c.jsxs("div",{className:"mt-2 pt-2 border-t border-theme flex items-center gap-1.5 text-[10px] text-theme-1 font-medium",children:[c.jsx(kke,{className:"h-3 w-3 text-indigo-500"}),"Term & definition included"]})]},l))}),!e&&s.length>a&&c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-1.5 py-2 text-[11px] font-semibold text-theme-2 hover:text-theme-0 transition-colors rounded-lg hover:bg-theme-1",children:[c.jsxs("span",{children:["View all ",s.length," flashcards"]}),c.jsx(oi,{className:"h-3.5 w-3.5"})]})]})},moe=({toolName:t,argsText:e,result:n,status:r})=>{const[s,a]=y.useState(!0),i=(r==null?void 0:r.type)==="incomplete"&&r.reason==="cancelled",o=i&&r.error?typeof r.error=="string"?r.error:JSON.stringify(r.error):null;return c.jsxs("div",{className:ge("aui-tool-fallback-root mb-4 flex w-full flex-col gap-3 rounded-lg border py-3",i&&"border-muted-foreground/30 bg-muted/30"),children:[c.jsxs("div",{className:"aui-tool-fallback-header flex items-center gap-2 px-4",children:[i?c.jsx(sZ,{className:"aui-tool-fallback-icon size-4 text-muted-foreground"}):c.jsx(or,{className:"aui-tool-fallback-icon size-4"}),c.jsxs("p",{className:ge("aui-tool-fallback-title grow",i&&"text-muted-foreground line-through"),children:[i?"Cancelled tool: ":"Used tool: ",c.jsx("b",{children:t})]}),c.jsx(vn,{onClick:()=>a(!s),children:s?c.jsx(Im,{}):c.jsx(oi,{})})]}),!s&&c.jsxs("div",{className:"aui-tool-fallback-content flex flex-col gap-2 border-t pt-2",children:[o&&c.jsxs("div",{className:"aui-tool-fallback-cancelled-root px-4",children:[c.jsx("p",{className:"aui-tool-fallback-cancelled-header font-semibold text-muted-foreground",children:"Cancelled reason:"}),c.jsx("p",{className:"aui-tool-fallback-cancelled-reason text-muted-foreground",children:o})]}),c.jsx("div",{className:ge("aui-tool-fallback-args-root px-4",i&&"opacity-60"),children:c.jsx("pre",{className:"aui-tool-fallback-args-value whitespace-pre-wrap",children:e})}),!i&&n!==void 0&&c.jsxs("div",{className:"aui-tool-fallback-result-root border-t border-dashed px-4 pt-2",children:[c.jsx("p",{className:"aui-tool-fallback-result-header font-semibold",children:"Result:"}),c.jsx("pre",{className:"aui-tool-fallback-result-content whitespace-pre-wrap",children:typeof n=="string"?n:JSON.stringify(n,null,2)})]})]})]})},tWe=({result:t,isExpanded:e=!1,onToggleExpand:n})=>{const{contents:r}=t,s=r,a=(s==null?void 0:s.questions)??[],i=2,o=e?a:a.slice(0,i);return c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"space-y-2",children:o.map((l,u)=>c.jsxs("div",{className:"rounded-lg border border-theme bg-theme-1 px-3 py-2.5 hover:border-theme hover:bg-theme-1 transition-colors",children:[c.jsxs("div",{className:"flex items-start gap-2.5",children:[c.jsx("div",{className:"mt-0.5 flex h-5 w-5 items-center justify-center rounded-full bg-slate-700 text-[11px] font-bold text-white flex-shrink-0",children:u+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-[13px] font-semibold leading-snug text-theme-0 mb-1.5",children:l.question}),c.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-0.5 text-[11px] text-theme-1",children:l.options.slice(0,4).map((d,f)=>c.jsxs("div",{className:"flex items-start gap-1.5 truncate",children:[c.jsxs("span",{className:"font-semibold text-theme-1 flex-shrink-0",children:[String.fromCharCode(65+f),"."]}),c.jsx("span",{className:"truncate",children:d})]},f))})]})]}),c.jsxs("div",{className:"mt-2 pt-2 border-t border-theme flex items-center gap-1.5 text-[10px] text-theme-1 font-medium",children:[c.jsx(_l,{className:"h-3 w-3 text-emerald-600"}),"Answer & explanation included"]})]},u))}),!e&&a.length>i&&c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-1.5 py-2 text-[11px] font-semibold text-theme-2 hover:text-theme-0 transition-colors rounded-lg hover:bg-theme-1",children:[c.jsxs("span",{children:["View all ",a.length," questions"]}),c.jsx(oi,{className:"h-3.5 w-3.5"})]})]})};function Uq(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,a=!1;for(;!a;){r===-1&&(r=n.length,a=!0);const i=n.slice(s,r).trim();(i||!a)&&e.push(i),s=r+1,r=n.indexOf(",",s)}return e}function nWe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const rWe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sWe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aWe={};function Hq(t,e){return(aWe.jsx?sWe:rWe).test(t)}const iWe=/[ \t\n\f\r]/g;function oWe(t){return typeof t=="object"?t.type==="text"?Vq(t.value):!1:Vq(t)}function Vq(t){return t.replace(iWe,"")===""}class kw{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}kw.prototype.normal={};kw.prototype.property={};kw.prototype.space=void 0;function poe(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new kw(n,r,e)}function ib(t){return t.toLowerCase()}class co{constructor(e,n){this.attribute=n,this.property=e}}co.prototype.attribute="";co.prototype.booleanish=!1;co.prototype.boolean=!1;co.prototype.commaOrSpaceSeparated=!1;co.prototype.commaSeparated=!1;co.prototype.defined=!1;co.prototype.mustUseProperty=!1;co.prototype.number=!1;co.prototype.overloadedBoolean=!1;co.prototype.property="";co.prototype.spaceSeparated=!1;co.prototype.space=void 0;let lWe=0;const En=N0(),Ws=N0(),s7=N0(),ct=N0(),qr=N0(),kg=N0(),wo=N0();function N0(){return 2**++lWe}const a7=Object.freeze(Object.defineProperty({__proto__:null,boolean:En,booleanish:Ws,commaOrSpaceSeparated:wo,commaSeparated:kg,number:ct,overloadedBoolean:s7,spaceSeparated:qr},Symbol.toStringTag,{value:"Module"})),z6=Object.keys(a7);class lI extends co{constructor(e,n,r,s){let a=-1;if(super(e,n),qq(this,"space",s),typeof r=="number")for(;++a<z6.length;){const i=z6[a];qq(this,z6[a],(r&a7[i])===a7[i])}}}lI.prototype.defined=!0;function qq(t,e,n){n&&(t[e]=n)}function Uv(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new lI(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[ib(r)]=r,n[ib(a.attribute)]=r}return new kw(e,n,t.space)}const goe=Uv({properties:{ariaActiveDescendant:null,ariaAtomic:Ws,ariaAutoComplete:null,ariaBusy:Ws,ariaChecked:Ws,ariaColCount:ct,ariaColIndex:ct,ariaColSpan:ct,ariaControls:qr,ariaCurrent:null,ariaDescribedBy:qr,ariaDetails:null,ariaDisabled:Ws,ariaDropEffect:qr,ariaErrorMessage:null,ariaExpanded:Ws,ariaFlowTo:qr,ariaGrabbed:Ws,ariaHasPopup:null,ariaHidden:Ws,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:qr,ariaLevel:ct,ariaLive:null,ariaModal:Ws,ariaMultiLine:Ws,ariaMultiSelectable:Ws,ariaOrientation:null,ariaOwns:qr,ariaPlaceholder:null,ariaPosInSet:ct,ariaPressed:Ws,ariaReadOnly:Ws,ariaRelevant:null,ariaRequired:Ws,ariaRoleDescription:qr,ariaRowCount:ct,ariaRowIndex:ct,ariaRowSpan:ct,ariaSelected:Ws,ariaSetSize:ct,ariaSort:null,ariaValueMax:ct,ariaValueMin:ct,ariaValueNow:ct,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function voe(t,e){return e in t?t[e]:e}function yoe(t,e){return voe(t,e.toLowerCase())}const cWe=Uv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:kg,acceptCharset:qr,accessKey:qr,action:null,allow:null,allowFullScreen:En,allowPaymentRequest:En,allowUserMedia:En,alt:null,as:null,async:En,autoCapitalize:null,autoComplete:qr,autoFocus:En,autoPlay:En,blocking:qr,capture:null,charSet:null,checked:En,cite:null,className:qr,cols:ct,colSpan:null,content:null,contentEditable:Ws,controls:En,controlsList:qr,coords:ct|kg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:En,defer:En,dir:null,dirName:null,disabled:En,download:s7,draggable:Ws,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:En,formTarget:null,headers:qr,height:ct,hidden:s7,high:ct,href:null,hrefLang:null,htmlFor:qr,httpEquiv:qr,id:null,imageSizes:null,imageSrcSet:null,inert:En,inputMode:null,integrity:null,is:null,isMap:En,itemId:null,itemProp:qr,itemRef:qr,itemScope:En,itemType:qr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:En,low:ct,manifest:null,max:null,maxLength:ct,media:null,method:null,min:null,minLength:ct,multiple:En,muted:En,name:null,nonce:null,noModule:En,noValidate:En,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:En,optimum:ct,pattern:null,ping:qr,placeholder:null,playsInline:En,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:En,referrerPolicy:null,rel:qr,required:En,reversed:En,rows:ct,rowSpan:ct,sandbox:qr,scope:null,scoped:En,seamless:En,selected:En,shadowRootClonable:En,shadowRootDelegatesFocus:En,shadowRootMode:null,shape:null,size:ct,sizes:null,slot:null,span:ct,spellCheck:Ws,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ct,step:null,style:null,tabIndex:ct,target:null,title:null,translate:null,type:null,typeMustMatch:En,useMap:null,value:Ws,width:ct,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:qr,axis:null,background:null,bgColor:null,border:ct,borderColor:null,bottomMargin:ct,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:En,declare:En,event:null,face:null,frame:null,frameBorder:null,hSpace:ct,leftMargin:ct,link:null,longDesc:null,lowSrc:null,marginHeight:ct,marginWidth:ct,noResize:En,noHref:En,noShade:En,noWrap:En,object:null,profile:null,prompt:null,rev:null,rightMargin:ct,rules:null,scheme:null,scrolling:Ws,standby:null,summary:null,text:null,topMargin:ct,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ct,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:En,disableRemotePlayback:En,prefix:null,property:null,results:ct,security:null,unselectable:null},space:"html",transform:yoe}),uWe=Uv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:wo,accentHeight:ct,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ct,amplitude:ct,arabicForm:null,ascent:ct,attributeName:null,attributeType:null,azimuth:ct,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ct,by:null,calcMode:null,capHeight:ct,className:qr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ct,diffuseConstant:ct,direction:null,display:null,dur:null,divisor:ct,dominantBaseline:null,download:En,dx:null,dy:null,edgeMode:null,editable:null,elevation:ct,enableBackground:null,end:null,event:null,exponent:ct,externalResourcesRequired:null,fill:null,fillOpacity:ct,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:kg,g2:kg,glyphName:kg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ct,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ct,horizOriginX:ct,horizOriginY:ct,id:null,ideographic:ct,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ct,k:ct,k1:ct,k2:ct,k3:ct,k4:ct,kernelMatrix:wo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ct,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ct,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ct,overlineThickness:ct,paintOrder:null,panose1:null,path:null,pathLength:ct,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:qr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ct,pointsAtY:ct,pointsAtZ:ct,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:wo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:wo,rev:wo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:wo,requiredFeatures:wo,requiredFonts:wo,requiredFormats:wo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ct,specularExponent:ct,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ct,strikethroughThickness:ct,string:null,stroke:null,strokeDashArray:wo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ct,strokeOpacity:ct,strokeWidth:null,style:null,surfaceScale:ct,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:wo,tabIndex:ct,tableValues:null,target:null,targetX:ct,targetY:ct,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:wo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ct,underlineThickness:ct,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ct,values:null,vAlphabetic:ct,vMathematical:ct,vectorEffect:null,vHanging:ct,vIdeographic:ct,version:null,vertAdvY:ct,vertOriginX:ct,vertOriginY:ct,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ct,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:voe}),xoe=Uv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),boe=Uv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yoe}),woe=Uv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),dWe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hWe=/[A-Z]/g,Gq=/-[a-z]/g,fWe=/^data[-\w.:]+$/i;function Coe(t,e){const n=ib(e);let r=e,s=co;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fWe.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(Gq,pWe);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!Gq.test(a)){let i=a.replace(hWe,mWe);i.charAt(0)!=="-"&&(i="-"+i),e="data"+i}}s=lI}return new s(r,e)}function mWe(t){return"-"+t.toLowerCase()}function pWe(t){return t.charAt(1).toUpperCase()}const Soe=poe([goe,cWe,xoe,boe,woe],"html"),AE=poe([goe,uWe,xoe,boe,woe],"svg");function Wq(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function gWe(t){return t.join(" ").trim()}var Op={},$6,Kq;function vWe(){if(Kq)return $6;Kq=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,o=/^\s+|\s+$/g,l=`
`,u="/",d="*",f="",m="comment",g="declaration";function x(C,S){if(typeof C!="string")throw new TypeError("First argument must be a string");if(!C)return[];S=S||{};var w=1,E=1;function T(H){var P=H.match(e);P&&(w+=P.length);var I=H.lastIndexOf(l);E=~I?H.length-I:E+H.length}function _(){var H={line:w,column:E};return function(P){return P.position=new A(H),z(),P}}function A(H){this.start=H,this.end={line:w,column:E},this.source=S.source}A.prototype.content=C;function j(H){var P=new Error(S.source+":"+w+":"+E+": "+H);if(P.reason=H,P.filename=S.source,P.line=w,P.column=E,P.source=C,!S.silent)throw P}function D(H){var P=H.exec(C);if(P){var I=P[0];return T(I),C=C.slice(I.length),P}}function z(){D(n)}function F(H){var P;for(H=H||[];P=R();)P!==!1&&H.push(P);return H}function R(){var H=_();if(!(u!=C.charAt(0)||d!=C.charAt(1))){for(var P=2;f!=C.charAt(P)&&(d!=C.charAt(P)||u!=C.charAt(P+1));)++P;if(P+=2,f===C.charAt(P-1))return j("End of comment missing");var I=C.slice(2,P-2);return E+=2,T(I),C=C.slice(P),E+=2,H({type:m,comment:I})}}function L(){var H=_(),P=D(r);if(P){if(R(),!D(s))return j("property missing ':'");var I=D(a),U=H({type:g,property:b(P[0].replace(t,f)),value:I?b(I[0].replace(t,f)):f});return D(i),U}}function O(){var H=[];F(H);for(var P;P=L();)P!==!1&&(H.push(P),F(H));return H}return z(),O()}function b(C){return C?C.replace(o,f):f}return $6=x,$6}var Yq;function yWe(){if(Yq)return Op;Yq=1;var t=Op&&Op.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Op,"__esModule",{value:!0}),Op.default=n;const e=t(vWe());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const i=(0,e.default)(r),o=typeof s=="function";return i.forEach(l=>{if(l.type!=="declaration")return;const{property:u,value:d}=l;o?s(u,d,l):d&&(a=a||{},a[u]=d)}),a}return Op}var ax={},Xq;function xWe(){if(Xq)return ax;Xq=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(u){return!u||n.test(u)||t.test(u)},i=function(u,d){return d.toUpperCase()},o=function(u,d){return"".concat(d,"-")},l=function(u,d){return d===void 0&&(d={}),a(u)?u:(u=u.toLowerCase(),d.reactCompat?u=u.replace(s,o):u=u.replace(r,o),u.replace(e,i))};return ax.camelCase=l,ax}var ix,Jq;function bWe(){if(Jq)return ix;Jq=1;var t=ix&&ix.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(yWe()),n=xWe();function r(s,a){var i={};return!s||typeof s!="string"||(0,e.default)(s,function(o,l){o&&l&&(i[(0,n.camelCase)(o,a)]=l)}),i}return r.default=r,ix=r,ix}var wWe=bWe();const CWe=Pa(wWe),koe=Eoe("end"),cI=Eoe("start");function Eoe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function SWe(t){const e=cI(t),n=koe(t);if(e&&n)return{start:e,end:n}}function Jx(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Qq(t.position):"start"in t||"end"in t?Qq(t):"line"in t||"column"in t?i7(t):""}function i7(t){return Zq(t&&t.line)+":"+Zq(t&&t.column)}function Qq(t){return i7(t&&t.start)+"-"+i7(t&&t.end)}function Zq(t){return t&&typeof t=="number"?t:1}class gi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},i=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(i=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=o?o.line:void 0,this.name=Jx(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=i&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gi.prototype.file="";gi.prototype.name="";gi.prototype.reason="";gi.prototype.message="";gi.prototype.stack="";gi.prototype.column=void 0;gi.prototype.line=void 0;gi.prototype.ancestors=void 0;gi.prototype.cause=void 0;gi.prototype.fatal=void 0;gi.prototype.place=void 0;gi.prototype.ruleId=void 0;gi.prototype.source=void 0;const uI={}.hasOwnProperty,kWe=new Map,EWe=/[A-Z]/g,_We=new Set(["table","tbody","thead","tfoot","tr"]),TWe=new Set(["td","th"]),_oe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function AWe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=PWe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=OWe(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?AE:Soe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=Toe(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function Toe(t,e,n){if(e.type==="element")return NWe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return jWe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return RWe(t,e,n);if(e.type==="mdxjsEsm")return DWe(t,e);if(e.type==="root")return MWe(t,e,n);if(e.type==="text")return IWe(t,e)}function NWe(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=AE,t.schema=s),t.ancestors.push(e);const a=Noe(t,e.tagName,!1),i=FWe(t,e);let o=hI(t,e);return _We.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!oWe(l):!0})),Aoe(t,i,a,e),dI(i,o),t.ancestors.pop(),t.schema=r,t.create(e,a,i,n)}function jWe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ob(t,e.position)}function DWe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ob(t,e.position)}function RWe(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=AE,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:Noe(t,e.name,!0),i=BWe(t,e),o=hI(t,e);return Aoe(t,i,a,e),dI(i,o),t.ancestors.pop(),t.schema=r,t.create(e,a,i,n)}function MWe(t,e,n){const r={};return dI(r,hI(t,e)),t.create(e,t.Fragment,r,n)}function IWe(t,e){return e.value}function Aoe(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function dI(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function OWe(t,e,n){return r;function r(s,a,i,o){const u=Array.isArray(i.children)?n:e;return o?u(a,i,o):u(a,i)}}function PWe(t,e){return n;function n(r,s,a,i){const o=Array.isArray(a.children),l=cI(r);return e(s,a,i,o,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function FWe(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&uI.call(e.properties,s)){const a=LWe(t,s,e.properties[s]);if(a){const[i,o]=a;t.tableCellAlignToStyle&&i==="align"&&typeof o=="string"&&TWe.has(e.tagName)?r=o:n[i]=o}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function BWe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const i=a.expression;i.type;const o=i.properties[0];o.type,Object.assign(n,t.evaluater.evaluateExpression(o.argument))}else ob(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const o=r.value.data.estree.body[0];o.type,a=t.evaluater.evaluateExpression(o.expression)}else ob(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function hI(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:kWe;for(;++r<e.children.length;){const a=e.children[r];let i;if(t.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const u=s.get(l)||0;i=l+"-"+u,s.set(l,u+1)}}const o=Toe(t,a,i);o!==void 0&&n.push(o)}return n}function LWe(t,e,n){const r=Coe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?nWe(n):gWe(n)),r.property==="style"){let s=typeof n=="object"?n:zWe(t,String(n));return t.stylePropertyNameCase==="css"&&(s=$We(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?dWe[r.property]||r.property:r.attribute,n]}}function zWe(t,e){try{return CWe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new gi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=_oe+"#cannot-parse-style-attribute",s}}function Noe(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,i;for(;++a<s.length;){const o=Hq(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};i=i?{type:"MemberExpression",object:i,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}r=i}else r=Hq(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return uI.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);ob(t)}function ob(t,e){const n=new gi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=_oe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $We(t){const e={};let n;for(n in t)uI.call(t,n)&&(e[UWe(n)]=t[n]);return e}function UWe(t){let e=t.replace(EWe,HWe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function HWe(t){return"-"+t.toLowerCase()}const U6={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},VWe={};function fI(t,e){const n=VWe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return joe(t,r,s)}function joe(t,e,n){if(qWe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return eG(t.children,e,n)}return Array.isArray(t)?eG(t,e,n):""}function eG(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=joe(t[s],e,n);return r.join("")}function qWe(t){return!!(t&&typeof t=="object")}const tG=document.createElement("i");function mI(t){const e="&"+t+";";tG.innerHTML=e;const n=tG.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Fo(t,e,n,r){const s=t.length;let a=0,i;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(e,n),t.splice(...i);else for(n&&t.splice(e,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(e,0),t.splice(...i),a+=1e4,e+=1e4}function gl(t,e){return t.length>0?(Fo(t,t.length,0,e),t):e}const nG={}.hasOwnProperty;function Doe(t){const e={};let n=-1;for(;++n<t.length;)GWe(e,t[n]);return e}function GWe(t,e){let n;for(n in e){const s=(nG.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let i;if(a)for(i in a){nG.call(s,i)||(s[i]=[]);const o=a[i];WWe(s[i],Array.isArray(o)?o:o?[o]:[])}}}function WWe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Fo(t,0,0,r)}function Roe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function dc(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ai=Uf(/[A-Za-z]/),ui=Uf(/[\dA-Za-z]/),KWe=Uf(/[#-'*+\--9=?A-Z^-~]/);function i5(t){return t!==null&&(t<32||t===127)}const o7=Uf(/\d/),YWe=Uf(/[\dA-Fa-f]/),XWe=Uf(/[!-/:-@[-`{-~]/);function Dt(t){return t!==null&&t<-2}function Br(t){return t!==null&&(t<0||t===32)}function Un(t){return t===-2||t===-1||t===32}const NE=Uf(new RegExp("\\p{P}|\\p{S}","u")),u0=Uf(/\s/);function Uf(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Hv(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let i="";if(a===37&&ui(t.charCodeAt(n+1))&&ui(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const o=t.charCodeAt(n+1);a<56320&&o>56319&&o<57344?(i=String.fromCharCode(a,o),s=1):i=""}else i=String.fromCharCode(a);i&&(e.push(t.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function Cn(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return i;function i(l){return Un(l)?(t.enter(n),o(l)):e(l)}function o(l){return Un(l)&&a++<s?(t.consume(l),o):(t.exit(n),e(l))}}const JWe={tokenize:QWe};function QWe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Cn(t,e,"linePrefix")}function s(o){return t.enter("paragraph"),a(o)}function a(o){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,i(o)}function i(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return Dt(o)?(t.consume(o),t.exit("chunkText"),a):(t.consume(o),i)}}const ZWe={tokenize:eKe},rG={tokenize:tKe};function eKe(t){const e=this,n=[];let r=0,s,a,i;return o;function o(E){if(r<n.length){const T=n[r];return e.containerState=T[1],t.attempt(T[0].continuation,l,u)(E)}return u(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&w();const T=e.events.length;let _=T,A;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){A=e.events[_][1].end;break}S(r);let j=T;for(;j<e.events.length;)e.events[j][1].end={...A},j++;return Fo(e.events,_+1,0,e.events.slice(T)),e.events.length=j,u(E)}return o(E)}function u(E){if(r===n.length){if(!s)return m(E);if(s.currentConstruct&&s.currentConstruct.concrete)return x(E);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(rG,d,f)(E)}function d(E){return s&&w(),S(r),m(E)}function f(E){return e.parser.lazy[e.now().line]=r!==n.length,i=e.now().offset,x(E)}function m(E){return e.containerState={},t.attempt(rG,g,x)(E)}function g(E){return r++,n.push([e.currentConstruct,e.containerState]),m(E)}function x(E){if(E===null){s&&w(),S(0),t.consume(E);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),b(E)}function b(E){if(E===null){C(t.exit("chunkFlow"),!0),S(0),t.consume(E);return}return Dt(E)?(t.consume(E),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,o):(t.consume(E),b)}function C(E,T){const _=e.sliceStream(E);if(T&&_.push(null),E.previous=a,a&&(a.next=E),a=E,s.defineSkip(E.start),s.write(_),e.parser.lazy[E.start.line]){let A=s.events.length;for(;A--;)if(s.events[A][1].start.offset<i&&(!s.events[A][1].end||s.events[A][1].end.offset>i))return;const j=e.events.length;let D=j,z,F;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(z){F=e.events[D][1].end;break}z=!0}for(S(r),A=j;A<e.events.length;)e.events[A][1].end={...F},A++;Fo(e.events,D+1,0,e.events.slice(j)),e.events.length=A}}function S(E){let T=n.length;for(;T-- >E;){const _=n[T];e.containerState=_[1],_[0].exit.call(e,t)}n.length=E}function w(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function tKe(t,e,n){return Cn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Kg(t){if(t===null||Br(t)||u0(t))return 1;if(NE(t))return 2}function jE(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const l7={name:"attention",resolveAll:nKe,tokenize:rKe};function nKe(t,e){let n=-1,r,s,a,i,o,l,u,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},m={...t[n][1].start};sG(f,-l),sG(m,l),i={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},a={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...i.start},end:{...o.end}},t[r][1].end={...i.start},t[n][1].start={...o.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=gl(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=gl(u,[["enter",s,e],["enter",i,e],["exit",i,e],["enter",a,e]]),u=gl(u,jE(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=gl(u,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,u=gl(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,Fo(t,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function rKe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Kg(r);let a;return i;function i(l){return a=l,t.enter("attentionSequence"),o(l)}function o(l){if(l===a)return t.consume(l),o;const u=t.exit("attentionSequence"),d=Kg(l),f=!d||d===2&&s||n.includes(l),m=!s||s===2&&d||n.includes(r);return u._open=!!(a===42?f:f&&(s||!m)),u._close=!!(a===42?m:m&&(d||!f)),e(l)}}function sG(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const sKe={name:"autolink",tokenize:aKe};function aKe(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(g){return Ai(g)?(t.consume(g),i):g===64?n(g):u(g)}function i(g){return g===43||g===45||g===46||ui(g)?(r=1,o(g)):u(g)}function o(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||ui(g))&&r++<32?(t.consume(g),o):(r=0,u(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||i5(g)?n(g):(t.consume(g),l)}function u(g){return g===64?(t.consume(g),d):KWe(g)?(t.consume(g),u):n(g)}function d(g){return ui(g)?f(g):n(g)}function f(g){return g===46?(t.consume(g),r=0,d):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||ui(g))&&r++<63){const x=g===45?m:f;return t.consume(g),x}return n(g)}}const Ew={partial:!0,tokenize:iKe};function iKe(t,e,n){return r;function r(a){return Un(a)?Cn(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Dt(a)?e(a):n(a)}}const Moe={continuation:{tokenize:lKe},exit:cKe,name:"blockQuote",tokenize:oKe};function oKe(t,e,n){const r=this;return s;function s(i){if(i===62){const o=r.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(i),t.exit("blockQuoteMarker"),a}return n(i)}function a(i){return Un(i)?(t.enter("blockQuotePrefixWhitespace"),t.consume(i),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(i))}}function lKe(t,e,n){const r=this;return s;function s(i){return Un(i)?Cn(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):a(i)}function a(i){return t.attempt(Moe,e,n)(i)}}function cKe(t){t.exit("blockQuote")}const Ioe={name:"characterEscape",tokenize:uKe};function uKe(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return XWe(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const Ooe={name:"characterReference",tokenize:dKe};function dKe(t,e,n){const r=this;let s=0,a,i;return o;function o(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),a=31,i=ui,d(f))}function u(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,i=YWe,d):(t.enter("characterReferenceValue"),a=7,i=o7,d(f))}function d(f){if(f===59&&s){const m=t.exit("characterReferenceValue");return i===ui&&!mI(r.sliceSerialize(m))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return i(f)&&s++<a?(t.consume(f),d):n(f)}}const aG={partial:!0,tokenize:fKe},iG={concrete:!0,name:"codeFenced",tokenize:hKe};function hKe(t,e,n){const r=this,s={partial:!0,tokenize:_};let a=0,i=0,o;return l;function l(A){return u(A)}function u(A){const j=r.events[r.events.length-1];return a=j&&j[1].type==="linePrefix"?j[2].sliceSerialize(j[1],!0).length:0,o=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(A)}function d(A){return A===o?(i++,t.consume(A),d):i<3?n(A):(t.exit("codeFencedFenceSequence"),Un(A)?Cn(t,f,"whitespace")(A):f(A))}function f(A){return A===null||Dt(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(aG,b,T)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(A))}function m(A){return A===null||Dt(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(A)):Un(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Cn(t,g,"whitespace")(A)):A===96&&A===o?n(A):(t.consume(A),m)}function g(A){return A===null||Dt(A)?f(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===null||Dt(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(A)):A===96&&A===o?n(A):(t.consume(A),x)}function b(A){return t.attempt(s,T,C)(A)}function C(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),S}function S(A){return a>0&&Un(A)?Cn(t,w,"linePrefix",a+1)(A):w(A)}function w(A){return A===null||Dt(A)?t.check(aG,b,T)(A):(t.enter("codeFlowValue"),E(A))}function E(A){return A===null||Dt(A)?(t.exit("codeFlowValue"),w(A)):(t.consume(A),E)}function T(A){return t.exit("codeFenced"),e(A)}function _(A,j,D){let z=0;return F;function F(P){return A.enter("lineEnding"),A.consume(P),A.exit("lineEnding"),R}function R(P){return A.enter("codeFencedFence"),Un(P)?Cn(A,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):L(P)}function L(P){return P===o?(A.enter("codeFencedFenceSequence"),O(P)):D(P)}function O(P){return P===o?(z++,A.consume(P),O):z>=i?(A.exit("codeFencedFenceSequence"),Un(P)?Cn(A,H,"whitespace")(P):H(P)):D(P)}function H(P){return P===null||Dt(P)?(A.exit("codeFencedFence"),j(P)):D(P)}}}function fKe(t,e,n){const r=this;return s;function s(i){return i===null?n(i):(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),a)}function a(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}const H6={name:"codeIndented",tokenize:pKe},mKe={partial:!0,tokenize:gKe};function pKe(t,e,n){const r=this;return s;function s(u){return t.enter("codeIndented"),Cn(t,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?i(u):n(u)}function i(u){return u===null?l(u):Dt(u)?t.attempt(mKe,i,l)(u):(t.enter("codeFlowValue"),o(u))}function o(u){return u===null||Dt(u)?(t.exit("codeFlowValue"),i(u)):(t.consume(u),o)}function l(u){return t.exit("codeIndented"),e(u)}}function gKe(t,e,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):Dt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),s):Cn(t,a,"linePrefix",5)(i)}function a(i){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(i):Dt(i)?s(i):n(i)}}const vKe={name:"codeText",previous:xKe,resolve:yKe,tokenize:bKe};function yKe(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function xKe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bKe(t,e,n){let r=0,s,a;return i;function i(f){return t.enter("codeText"),t.enter("codeTextSequence"),o(f)}function o(f){return f===96?(t.consume(f),r++,o):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(a=t.enter("codeTextSequence"),s=0,d(f)):Dt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||Dt(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),u)}function d(f){return f===96?(t.consume(f),s++,d):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(a.type="codeTextData",u(f))}}class wKe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&ox(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ox(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ox(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ox(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ox(this.left,n.reverse())}}}function ox(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Poe(t){const e={};let n=-1,r,s,a,i,o,l,u;const d=new wKe(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,CKe(d,n)),n=e[n],u=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(i=d.get(a),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),i[1].type="lineEnding",s=a);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},o=d.slice(s,n),o.unshift(r),d.splice(s,n-s+1,o))}}return Fo(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function CKe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const o=i.events,l=[],u={};let d,f,m=-1,g=n,x=0,b=0;const C=[b];for(;g;){for(;t.get(++s)[1]!==g;);a.push(s),g._tokenizer||(d=r.sliceStream(g),g.next||d.push(null),f&&i.defineSkip(g.start),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<o.length;)o[m][0]==="exit"&&o[m-1][0]==="enter"&&o[m][1].type===o[m-1][1].type&&o[m][1].start.line!==o[m][1].end.line&&(b=m+1,C.push(b),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(i.events=[],g?(g._tokenizer=void 0,g.previous=void 0):C.pop(),m=C.length;m--;){const S=o.slice(C[m],C[m+1]),w=a.pop();l.push([w,w+S.length-1]),t.splice(w,2,S)}for(l.reverse(),m=-1;++m<l.length;)u[x+l[m][0]]=x+l[m][1],x+=l[m][1]-l[m][0]-1;return u}const SKe={resolve:EKe,tokenize:_Ke},kKe={partial:!0,tokenize:TKe};function EKe(t){return Poe(t),t}function _Ke(t,e){let n;return r;function r(o){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?a(o):Dt(o)?t.check(kKe,i,a)(o):(t.consume(o),s)}function a(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function i(o){return t.consume(o),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function TKe(t,e,n){const r=this;return s;function s(i){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),Cn(t,a,"linePrefix")}function a(i){if(i===null||Dt(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(i):t.interrupt(r.parser.constructs.flow,n,e)(i)}}function Foe(t,e,n,r,s,a,i,o,l){const u=l||Number.POSITIVE_INFINITY;let d=0;return f;function f(S){return S===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(S),t.exit(a),m):S===null||S===32||S===41||i5(S)?n(S):(t.enter(r),t.enter(i),t.enter(o),t.enter("chunkString",{contentType:"string"}),b(S))}function m(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(t.exit("chunkString"),t.exit(o),m(S)):S===null||S===60||Dt(S)?n(S):(t.consume(S),S===92?x:g)}function x(S){return S===60||S===62||S===92?(t.consume(S),g):g(S)}function b(S){return!d&&(S===null||S===41||Br(S))?(t.exit("chunkString"),t.exit(o),t.exit(i),t.exit(r),e(S)):d<u&&S===40?(t.consume(S),d++,b):S===41?(t.consume(S),d--,b):S===null||S===32||S===40||i5(S)?n(S):(t.consume(S),S===92?C:b)}function C(S){return S===40||S===41||S===92?(t.consume(S),b):b(S)}}function Boe(t,e,n,r,s,a){const i=this;let o=0,l;return u;function u(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(a),d}function d(g){return o>999||g===null||g===91||g===93&&!l||g===94&&!o&&"_hiddenFootnoteSupport"in i.parser.constructs?n(g):g===93?(t.exit(a),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Dt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||Dt(g)||o++>999?(t.exit("chunkString"),d(g)):(t.consume(g),l||(l=!Un(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(t.consume(g),o++,f):f(g)}}function Loe(t,e,n,r,s,a){let i;return o;function o(m){return m===34||m===39||m===40?(t.enter(r),t.enter(s),t.consume(m),t.exit(s),i=m===40?41:m,l):n(m)}function l(m){return m===i?(t.enter(s),t.consume(m),t.exit(s),t.exit(r),e):(t.enter(a),u(m))}function u(m){return m===i?(t.exit(a),l(i)):m===null?n(m):Dt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),Cn(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===i||m===null||Dt(m)?(t.exit("chunkString"),u(m)):(t.consume(m),m===92?f:d)}function f(m){return m===i||m===92?(t.consume(m),d):d(m)}}function Qx(t,e){let n;return r;function r(s){return Dt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Un(s)?Cn(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const AKe={name:"definition",tokenize:jKe},NKe={partial:!0,tokenize:DKe};function jKe(t,e,n){const r=this;let s;return a;function a(g){return t.enter("definition"),i(g)}function i(g){return Boe.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function o(g){return s=dc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return Br(g)?Qx(t,u)(g):u(g)}function u(g){return Foe(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return t.attempt(NKe,f,f)(g)}function f(g){return Un(g)?Cn(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Dt(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function DKe(t,e,n){return r;function r(o){return Br(o)?Qx(t,s)(o):n(o)}function s(o){return Loe(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return Un(o)?Cn(t,i,"whitespace")(o):i(o)}function i(o){return o===null||Dt(o)?e(o):n(o)}}const RKe={name:"hardBreakEscape",tokenize:MKe};function MKe(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Dt(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const IKe={name:"headingAtx",resolve:OKe,tokenize:PKe};function OKe(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Fo(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function PKe(t,e,n){let r=0;return s;function s(d){return t.enter("atxHeading"),a(d)}function a(d){return t.enter("atxHeadingSequence"),i(d)}function i(d){return d===35&&r++<6?(t.consume(d),i):d===null||Br(d)?(t.exit("atxHeadingSequence"),o(d)):n(d)}function o(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Dt(d)?(t.exit("atxHeading"),e(d)):Un(d)?Cn(t,o,"whitespace")(d):(t.enter("atxHeadingText"),u(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),o(d))}function u(d){return d===null||d===35||Br(d)?(t.exit("atxHeadingText"),o(d)):(t.consume(d),u)}}const FKe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],oG=["pre","script","style","textarea"],BKe={concrete:!0,name:"htmlFlow",resolveTo:$Ke,tokenize:UKe},LKe={partial:!0,tokenize:VKe},zKe={partial:!0,tokenize:HKe};function $Ke(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function UKe(t,e,n){const r=this;let s,a,i,o,l;return u;function u(G){return d(G)}function d(G){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(G),f}function f(G){return G===33?(t.consume(G),m):G===47?(t.consume(G),a=!0,b):G===63?(t.consume(G),s=3,r.interrupt?e:B):Ai(G)?(t.consume(G),i=String.fromCharCode(G),C):n(G)}function m(G){return G===45?(t.consume(G),s=2,g):G===91?(t.consume(G),s=5,o=0,x):Ai(G)?(t.consume(G),s=4,r.interrupt?e:B):n(G)}function g(G){return G===45?(t.consume(G),r.interrupt?e:B):n(G)}function x(G){const K="CDATA[";return G===K.charCodeAt(o++)?(t.consume(G),o===K.length?r.interrupt?e:L:x):n(G)}function b(G){return Ai(G)?(t.consume(G),i=String.fromCharCode(G),C):n(G)}function C(G){if(G===null||G===47||G===62||Br(G)){const K=G===47,te=i.toLowerCase();return!K&&!a&&oG.includes(te)?(s=1,r.interrupt?e(G):L(G)):FKe.includes(i.toLowerCase())?(s=6,K?(t.consume(G),S):r.interrupt?e(G):L(G)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(G):a?w(G):E(G))}return G===45||ui(G)?(t.consume(G),i+=String.fromCharCode(G),C):n(G)}function S(G){return G===62?(t.consume(G),r.interrupt?e:L):n(G)}function w(G){return Un(G)?(t.consume(G),w):F(G)}function E(G){return G===47?(t.consume(G),F):G===58||G===95||Ai(G)?(t.consume(G),T):Un(G)?(t.consume(G),E):F(G)}function T(G){return G===45||G===46||G===58||G===95||ui(G)?(t.consume(G),T):_(G)}function _(G){return G===61?(t.consume(G),A):Un(G)?(t.consume(G),_):E(G)}function A(G){return G===null||G===60||G===61||G===62||G===96?n(G):G===34||G===39?(t.consume(G),l=G,j):Un(G)?(t.consume(G),A):D(G)}function j(G){return G===l?(t.consume(G),l=null,z):G===null||Dt(G)?n(G):(t.consume(G),j)}function D(G){return G===null||G===34||G===39||G===47||G===60||G===61||G===62||G===96||Br(G)?_(G):(t.consume(G),D)}function z(G){return G===47||G===62||Un(G)?E(G):n(G)}function F(G){return G===62?(t.consume(G),R):n(G)}function R(G){return G===null||Dt(G)?L(G):Un(G)?(t.consume(G),R):n(G)}function L(G){return G===45&&s===2?(t.consume(G),I):G===60&&s===1?(t.consume(G),U):G===62&&s===4?(t.consume(G),Z):G===63&&s===3?(t.consume(G),B):G===93&&s===5?(t.consume(G),Y):Dt(G)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(LKe,le,O)(G)):G===null||Dt(G)?(t.exit("htmlFlowData"),O(G)):(t.consume(G),L)}function O(G){return t.check(zKe,H,le)(G)}function H(G){return t.enter("lineEnding"),t.consume(G),t.exit("lineEnding"),P}function P(G){return G===null||Dt(G)?O(G):(t.enter("htmlFlowData"),L(G))}function I(G){return G===45?(t.consume(G),B):L(G)}function U(G){return G===47?(t.consume(G),i="",W):L(G)}function W(G){if(G===62){const K=i.toLowerCase();return oG.includes(K)?(t.consume(G),Z):L(G)}return Ai(G)&&i.length<8?(t.consume(G),i+=String.fromCharCode(G),W):L(G)}function Y(G){return G===93?(t.consume(G),B):L(G)}function B(G){return G===62?(t.consume(G),Z):G===45&&s===2?(t.consume(G),B):L(G)}function Z(G){return G===null||Dt(G)?(t.exit("htmlFlowData"),le(G)):(t.consume(G),Z)}function le(G){return t.exit("htmlFlow"),e(G)}}function HKe(t,e,n){const r=this;return s;function s(i){return Dt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),a):n(i)}function a(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}function VKe(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Ew,e,n)}}const qKe={name:"htmlText",tokenize:GKe};function GKe(t,e,n){const r=this;let s,a,i;return o;function o(B){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(B),l}function l(B){return B===33?(t.consume(B),u):B===47?(t.consume(B),_):B===63?(t.consume(B),E):Ai(B)?(t.consume(B),D):n(B)}function u(B){return B===45?(t.consume(B),d):B===91?(t.consume(B),a=0,x):Ai(B)?(t.consume(B),w):n(B)}function d(B){return B===45?(t.consume(B),g):n(B)}function f(B){return B===null?n(B):B===45?(t.consume(B),m):Dt(B)?(i=f,U(B)):(t.consume(B),f)}function m(B){return B===45?(t.consume(B),g):f(B)}function g(B){return B===62?I(B):B===45?m(B):f(B)}function x(B){const Z="CDATA[";return B===Z.charCodeAt(a++)?(t.consume(B),a===Z.length?b:x):n(B)}function b(B){return B===null?n(B):B===93?(t.consume(B),C):Dt(B)?(i=b,U(B)):(t.consume(B),b)}function C(B){return B===93?(t.consume(B),S):b(B)}function S(B){return B===62?I(B):B===93?(t.consume(B),S):b(B)}function w(B){return B===null||B===62?I(B):Dt(B)?(i=w,U(B)):(t.consume(B),w)}function E(B){return B===null?n(B):B===63?(t.consume(B),T):Dt(B)?(i=E,U(B)):(t.consume(B),E)}function T(B){return B===62?I(B):E(B)}function _(B){return Ai(B)?(t.consume(B),A):n(B)}function A(B){return B===45||ui(B)?(t.consume(B),A):j(B)}function j(B){return Dt(B)?(i=j,U(B)):Un(B)?(t.consume(B),j):I(B)}function D(B){return B===45||ui(B)?(t.consume(B),D):B===47||B===62||Br(B)?z(B):n(B)}function z(B){return B===47?(t.consume(B),I):B===58||B===95||Ai(B)?(t.consume(B),F):Dt(B)?(i=z,U(B)):Un(B)?(t.consume(B),z):I(B)}function F(B){return B===45||B===46||B===58||B===95||ui(B)?(t.consume(B),F):R(B)}function R(B){return B===61?(t.consume(B),L):Dt(B)?(i=R,U(B)):Un(B)?(t.consume(B),R):z(B)}function L(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),s=B,O):Dt(B)?(i=L,U(B)):Un(B)?(t.consume(B),L):(t.consume(B),H)}function O(B){return B===s?(t.consume(B),s=void 0,P):B===null?n(B):Dt(B)?(i=O,U(B)):(t.consume(B),O)}function H(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||Br(B)?z(B):(t.consume(B),H)}function P(B){return B===47||B===62||Br(B)?z(B):n(B)}function I(B){return B===62?(t.consume(B),t.exit("htmlTextData"),t.exit("htmlText"),e):n(B)}function U(B){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),W}function W(B){return Un(B)?Cn(t,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):Y(B)}function Y(B){return t.enter("htmlTextData"),i(B)}}const pI={name:"labelEnd",resolveAll:XKe,resolveTo:JKe,tokenize:QKe},WKe={tokenize:ZKe},KKe={tokenize:eYe},YKe={tokenize:tYe};function XKe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&Fo(t,0,t.length,n),t}function JKe(t,e){let n=t.length,r=0,s,a,i,o;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const l={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[a][1].start},end:{...t[i][1].end}},d={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[i-2][1].start}};return o=[["enter",l,e],["enter",u,e]],o=gl(o,t.slice(a+1,a+r+3)),o=gl(o,[["enter",d,e]]),o=gl(o,jE(e.parser.constructs.insideSpan.null,t.slice(a+r+4,i-3),e)),o=gl(o,[["exit",d,e],t[i-2],t[i-1],["exit",u,e]]),o=gl(o,t.slice(i+1)),o=gl(o,[["exit",l,e]]),Fo(t,a,t.length,o),t}function QKe(t,e,n){const r=this;let s=r.events.length,a,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return o;function o(m){return a?a._inactive?f(m):(i=r.parser.defined.includes(dc(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(WKe,d,i?d:f)(m):m===91?t.attempt(KKe,d,i?u:f)(m):i?d(m):f(m)}function u(m){return t.attempt(YKe,d,f)(m)}function d(m){return e(m)}function f(m){return a._balanced=!0,n(m)}}function ZKe(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),s}function s(f){return Br(f)?Qx(t,a)(f):a(f)}function a(f){return f===41?d(f):Foe(t,i,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function i(f){return Br(f)?Qx(t,l)(f):d(f)}function o(f){return n(f)}function l(f){return f===34||f===39||f===40?Loe(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return Br(f)?Qx(t,d)(f):d(f)}function d(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function eYe(t,e,n){const r=this;return s;function s(o){return Boe.call(r,t,a,i,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(dc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):n(o)}function i(o){return n(o)}}function tYe(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const nYe={name:"labelStartImage",resolveAll:pI.resolveAll,tokenize:rYe};function rYe(t,e,n){const r=this;return s;function s(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),a}function a(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),i):n(o)}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const sYe={name:"labelStartLink",resolveAll:pI.resolveAll,tokenize:aYe};function aYe(t,e,n){const r=this;return s;function s(i){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(i),t.exit("labelMarker"),t.exit("labelLink"),a}function a(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):e(i)}}const V6={name:"lineEnding",tokenize:iYe};function iYe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Cn(t,e,"linePrefix")}}const zS={name:"thematicBreak",tokenize:oYe};function oYe(t,e,n){let r=0,s;return a;function a(u){return t.enter("thematicBreak"),i(u)}function i(u){return s=u,o(u)}function o(u){return u===s?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Dt(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===s?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),Un(u)?Cn(t,o,"whitespace")(u):o(u))}}const Ki={continuation:{tokenize:dYe},exit:fYe,name:"list",tokenize:uYe},lYe={partial:!0,tokenize:mYe},cYe={partial:!0,tokenize:hYe};function uYe(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return o;function o(g){const x=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:o7(g)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(zS,n,u)(g):u(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return o7(g)&&++i<10?(t.consume(g),l):(!r.interrupt||i<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),u(g)):n(g)}function u(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(Ew,r.interrupt?n:d,t.attempt(lYe,m,f))}function d(g){return r.containerState.initialBlankLine=!0,a++,m(g)}function f(g){return Un(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function dYe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Ew,s,a);function s(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Cn(t,e,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!Un(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(cYe,e,i)(o))}function i(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Cn(t,t.attempt(Ki,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function hYe(t,e,n){const r=this;return Cn(t,s,"listItemIndent",r.containerState.size+1);function s(a){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?e(a):n(a)}}function fYe(t){t.exit(this.containerState.type)}function mYe(t,e,n){const r=this;return Cn(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const i=r.events[r.events.length-1];return!Un(a)&&i&&i[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const lG={name:"setextUnderline",resolveTo:pYe,tokenize:gYe};function pYe(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const i={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",i,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=i,t.push(["exit",i,e]),t}function gYe(t,e,n){const r=this;let s;return a;function a(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),s=u,i(u)):n(u)}function i(u){return t.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===s?(t.consume(u),o):(t.exit("setextHeadingLineSequence"),Un(u)?Cn(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Dt(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const vYe={tokenize:yYe};function yYe(t){const e=this,n=t.attempt(Ew,r,t.attempt(this.parser.constructs.flowInitial,s,Cn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(SKe,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const xYe={resolveAll:$oe()},bYe=zoe("string"),wYe=zoe("text");function zoe(t){return{resolveAll:$oe(t==="text"?CYe:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,i,o);return i;function i(d){return u(d)?a(d):o(d)}function o(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),l)}function u(d){if(d===null)return!0;const f=s[d];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function $oe(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function CYe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,i=-1,o=0,l;for(;a--;){const u=s[a];if(typeof u=="string"){for(i=u.length;u.charCodeAt(i-1)===32;)o++,i--;if(i)break;i=-1}else if(u===-2)l=!0,o++;else if(u!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(o=0),o){const u={type:n===t.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?i:r.start._bufferIndex+i,_index:r.start._index+a,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const SYe={42:Ki,43:Ki,45:Ki,48:Ki,49:Ki,50:Ki,51:Ki,52:Ki,53:Ki,54:Ki,55:Ki,56:Ki,57:Ki,62:Moe},kYe={91:AKe},EYe={[-2]:H6,[-1]:H6,32:H6},_Ye={35:IKe,42:zS,45:[lG,zS],60:BKe,61:lG,95:zS,96:iG,126:iG},TYe={38:Ooe,92:Ioe},AYe={[-5]:V6,[-4]:V6,[-3]:V6,33:nYe,38:Ooe,42:l7,60:[sKe,qKe],91:sYe,92:[RKe,Ioe],93:pI,95:l7,96:vKe},NYe={null:[l7,xYe]},jYe={null:[42,95]},DYe={null:[]},RYe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jYe,contentInitial:kYe,disable:DYe,document:SYe,flow:_Ye,flowInitial:EYe,insideSpan:NYe,string:TYe,text:AYe},Symbol.toStringTag,{value:"Module"}));function MYe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let i=[],o=[];const l={attempt:j(_),check:j(A),consume:w,enter:E,exit:T,interrupt:j(A,{interrupt:!0})},u={code:null,containerState:{},defineSkip:b,events:[],now:x,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:f};let d=e.tokenize.call(u,l);return e.resolveAll&&a.push(e),u;function f(R){return i=gl(i,R),C(),i[i.length-1]!==null?[]:(D(e,0),u.events=jE(a,u.events,u),u.events)}function m(R,L){return OYe(g(R),L)}function g(R){return IYe(i,R)}function x(){const{_bufferIndex:R,_index:L,line:O,column:H,offset:P}=r;return{_bufferIndex:R,_index:L,line:O,column:H,offset:P}}function b(R){s[R.line]=R.column,F()}function C(){let R;for(;r._index<i.length;){const L=i[r._index];if(typeof L=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<L.length;)S(L.charCodeAt(r._bufferIndex));else S(L)}}function S(R){d=d(R)}function w(R){Dt(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,F()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=R}function E(R,L){const O=L||{};return O.type=R,O.start=x(),u.events.push(["enter",O,u]),o.push(O),O}function T(R){const L=o.pop();return L.end=x(),u.events.push(["exit",L,u]),L}function _(R,L){D(R,L.from)}function A(R,L){L.restore()}function j(R,L){return O;function O(H,P,I){let U,W,Y,B;return Array.isArray(H)?le(H):"tokenize"in H?le([H]):Z(H);function Z(ie){return de;function de(fe){const se=fe!==null&&ie[fe],ce=fe!==null&&ie.null,ue=[...Array.isArray(se)?se:se?[se]:[],...Array.isArray(ce)?ce:ce?[ce]:[]];return le(ue)(fe)}}function le(ie){return U=ie,W=0,ie.length===0?I:G(ie[W])}function G(ie){return de;function de(fe){return B=z(),Y=ie,ie.partial||(u.currentConstruct=ie),ie.name&&u.parser.constructs.disable.null.includes(ie.name)?te():ie.tokenize.call(L?Object.assign(Object.create(u),L):u,l,K,te)(fe)}}function K(ie){return R(Y,B),P}function te(ie){return B.restore(),++W<U.length?G(U[W]):I}}}function D(R,L){R.resolveAll&&!a.includes(R)&&a.push(R),R.resolve&&Fo(u.events,L,u.events.length-L,R.resolve(u.events.slice(L),u)),R.resolveTo&&(u.events=R.resolveTo(u.events,u))}function z(){const R=x(),L=u.previous,O=u.currentConstruct,H=u.events.length,P=Array.from(o);return{from:H,restore:I};function I(){r=R,u.previous=L,u.currentConstruct=O,u.events.length=H,o=P,F()}}function F(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function IYe(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let i;if(n===s)i=[t[n].slice(r,a)];else{if(i=t.slice(n,s),r>-1){const o=i[0];typeof o=="string"?i[0]=o.slice(r):i.shift()}a>0&&i.push(t[s].slice(0,a))}return i}function OYe(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let i;if(typeof a=="string")i=a;else switch(a){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=e?" ":"	";break}case-1:{if(!e&&s)continue;i=" ";break}default:i=String.fromCharCode(a)}s=a===-2,r.push(i)}return r.join("")}function PYe(t){const r={constructs:Doe([RYe,...(t||{}).extensions||[]]),content:s(JWe),defined:[],document:s(ZWe),flow:s(vYe),lazy:{},string:s(bYe),text:s(wYe)};return r;function s(a){return i;function i(o){return MYe(r,a,o)}}}function FYe(t){for(;!Poe(t););return t}const cG=/[\0\t\n\r]/g;function BYe(){let t=1,e="",n=!0,r;return s;function s(a,i,o){const l=[];let u,d,f,m,g;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(i||void 0).decode(a)),f=0,e="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(cG.lastIndex=f,u=cG.exec(a),m=u&&u.index!==void 0?u.index:a.length,g=a.charCodeAt(m),!u){e=a.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(a.slice(f,m)),t+=m-f),g){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=m+1}return o&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const LYe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function zYe(t){return t.replace(LYe,$Ye)}function $Ye(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return Roe(n.slice(a?2:1),a?16:10)}return mI(n)||t}const Uoe={}.hasOwnProperty;function UYe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),HYe(n)(FYe(PYe(n).document().write(BYe()(t,e,!0))))}function HYe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Le),autolinkProtocol:z,autolinkEmail:z,atxHeading:a(He),blockQuote:a(ce),characterEscape:z,characterReference:z,codeFenced:a(ue),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:a(ue,i),codeText:a(oe,i),codeTextData:z,data:z,codeFlowValue:z,definition:a(Ne),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:a(ve),hardBreakEscape:a(nt),hardBreakTrailing:a(nt),htmlFlow:a(Me,i),htmlFlowData:z,htmlText:a(Me,i),htmlTextData:z,image:a($e),label:i,link:a(Le),listItem:a(pe),listItemValue:m,listOrdered:a(ae,f),listUnordered:a(ae),paragraph:a(_e),reference:G,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:a(He),strong:a(Ue),thematicBreak:a(qe)},exit:{atxHeading:l(),atxHeadingSequence:_,autolink:l(),autolinkEmail:se,autolinkProtocol:fe,blockQuote:l(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:te,characterReferenceMarkerNumeric:te,characterReferenceValue:ie,characterReference:de,codeFenced:l(C),codeFencedFence:b,codeFencedFenceInfo:g,codeFencedFenceMeta:x,codeFlowValue:F,codeIndented:l(S),codeText:l(P),codeTextData:F,data:F,definition:l(),definitionDestinationString:T,definitionLabelString:w,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(L),hardBreakTrailing:l(L),htmlFlow:l(O),htmlFlowData:F,htmlText:l(H),htmlTextData:F,image:l(U),label:Y,labelText:W,lineEnding:R,link:l(I),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:K,resourceDestinationString:B,resourceTitleString:Z,resource:le,setextHeading:l(D),setextHeadingLineSequence:j,setextHeadingText:A,strong:l(),thematicBreak:l()}};Hoe(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(xe){let Ae={type:"root",children:[]};const Fe={stack:[Ae],tokenStack:[],config:e,enter:o,exit:u,buffer:i,resume:d,data:n},Qe=[];let vt=-1;for(;++vt<xe.length;)if(xe[vt][1].type==="listOrdered"||xe[vt][1].type==="listUnordered")if(xe[vt][0]==="enter")Qe.push(vt);else{const at=Qe.pop();vt=s(xe,at,vt)}for(vt=-1;++vt<xe.length;){const at=e[xe[vt][0]];Uoe.call(at,xe[vt][1].type)&&at[xe[vt][1].type].call(Object.assign({sliceSerialize:xe[vt][2].sliceSerialize},Fe),xe[vt][1])}if(Fe.tokenStack.length>0){const at=Fe.tokenStack[Fe.tokenStack.length-1];(at[1]||uG).call(Fe,void 0,at[0])}for(Ae.position={start:Oh(xe.length>0?xe[0][1].start:{line:1,column:1,offset:0}),end:Oh(xe.length>0?xe[xe.length-2][1].end:{line:1,column:1,offset:0})},vt=-1;++vt<e.transforms.length;)Ae=e.transforms[vt](Ae)||Ae;return Ae}function s(xe,Ae,Fe){let Qe=Ae-1,vt=-1,at=!1,Tt,wt,cn,$t;for(;++Qe<=Fe;){const hn=xe[Qe];switch(hn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{hn[0]==="enter"?vt++:vt--,$t=void 0;break}case"lineEndingBlank":{hn[0]==="enter"&&(Tt&&!$t&&!vt&&!cn&&(cn=Qe),$t=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:$t=void 0}if(!vt&&hn[0]==="enter"&&hn[1].type==="listItemPrefix"||vt===-1&&hn[0]==="exit"&&(hn[1].type==="listUnordered"||hn[1].type==="listOrdered")){if(Tt){let Kn=Qe;for(wt=void 0;Kn--;){const jn=xe[Kn];if(jn[1].type==="lineEnding"||jn[1].type==="lineEndingBlank"){if(jn[0]==="exit")continue;wt&&(xe[wt][1].type="lineEndingBlank",at=!0),jn[1].type="lineEnding",wt=Kn}else if(!(jn[1].type==="linePrefix"||jn[1].type==="blockQuotePrefix"||jn[1].type==="blockQuotePrefixWhitespace"||jn[1].type==="blockQuoteMarker"||jn[1].type==="listItemIndent"))break}cn&&(!wt||cn<wt)&&(Tt._spread=!0),Tt.end=Object.assign({},wt?xe[wt][1].start:hn[1].end),xe.splice(wt||Qe,0,["exit",Tt,hn[2]]),Qe++,Fe++}if(hn[1].type==="listItemPrefix"){const Kn={type:"listItem",_spread:!1,start:Object.assign({},hn[1].start),end:void 0};Tt=Kn,xe.splice(Qe,0,["enter",Kn,hn[2]]),Qe++,Fe++,cn=void 0,$t=!0}}}return xe[Ae][1]._spread=at,Fe}function a(xe,Ae){return Fe;function Fe(Qe){o.call(this,xe(Qe),Qe),Ae&&Ae.call(this,Qe)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(xe,Ae,Fe){this.stack[this.stack.length-1].children.push(xe),this.stack.push(xe),this.tokenStack.push([Ae,Fe||void 0]),xe.position={start:Oh(Ae.start),end:void 0}}function l(xe){return Ae;function Ae(Fe){xe&&xe.call(this,Fe),u.call(this,Fe)}}function u(xe,Ae){const Fe=this.stack.pop(),Qe=this.tokenStack.pop();if(Qe)Qe[0].type!==xe.type&&(Ae?Ae.call(this,xe,Qe[0]):(Qe[1]||uG).call(this,xe,Qe[0]));else throw new Error("Cannot close `"+xe.type+"` ("+Jx({start:xe.start,end:xe.end})+"): its not open");Fe.position.end=Oh(xe.end)}function d(){return fI(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(xe){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(xe),10),this.data.expectingFirstListItemValue=void 0}}function g(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=xe}function x(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=xe}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=xe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=xe.replace(/(\r?\n|\r)$/g,"")}function w(xe){const Ae=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=Ae,Fe.identifier=dc(this.sliceSerialize(xe)).toLowerCase()}function E(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=xe}function T(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=xe}function _(xe){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const Fe=this.sliceSerialize(xe).length;Ae.depth=Fe}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function j(xe){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(xe).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function z(xe){const Fe=this.stack[this.stack.length-1].children;let Qe=Fe[Fe.length-1];(!Qe||Qe.type!=="text")&&(Qe=Je(),Qe.position={start:Oh(xe.start),end:void 0},Fe.push(Qe)),this.stack.push(Qe)}function F(xe){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(xe),Ae.position.end=Oh(xe.end)}function R(xe){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Fe=Ae.children[Ae.children.length-1];Fe.position.end=Oh(xe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ae.type)&&(z.call(this,xe),F.call(this,xe))}function L(){this.data.atHardBreak=!0}function O(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=xe}function H(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=xe}function P(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=xe}function I(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=Ae,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function U(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=Ae,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function W(xe){const Ae=this.sliceSerialize(xe),Fe=this.stack[this.stack.length-2];Fe.label=zYe(Ae),Fe.identifier=dc(Ae).toLowerCase()}function Y(){const xe=this.stack[this.stack.length-1],Ae=this.resume(),Fe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Fe.type==="link"){const Qe=xe.children;Fe.children=Qe}else Fe.alt=Ae}function B(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=xe}function Z(){const xe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=xe}function le(){this.data.inReference=void 0}function G(){this.data.referenceType="collapsed"}function K(xe){const Ae=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=Ae,Fe.identifier=dc(this.sliceSerialize(xe)).toLowerCase(),this.data.referenceType="full"}function te(xe){this.data.characterReferenceType=xe.type}function ie(xe){const Ae=this.sliceSerialize(xe),Fe=this.data.characterReferenceType;let Qe;Fe?(Qe=Roe(Ae,Fe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Qe=mI(Ae);const vt=this.stack[this.stack.length-1];vt.value+=Qe}function de(xe){const Ae=this.stack.pop();Ae.position.end=Oh(xe.end)}function fe(xe){F.call(this,xe);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(xe)}function se(xe){F.call(this,xe);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(xe)}function ce(){return{type:"blockquote",children:[]}}function ue(){return{type:"code",lang:null,meta:null,value:""}}function oe(){return{type:"inlineCode",value:""}}function Ne(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ve(){return{type:"emphasis",children:[]}}function He(){return{type:"heading",depth:0,children:[]}}function nt(){return{type:"break"}}function Me(){return{type:"html",value:""}}function $e(){return{type:"image",title:null,url:"",alt:null}}function Le(){return{type:"link",title:null,url:"",children:[]}}function ae(xe){return{type:"list",ordered:xe.type==="listOrdered",start:null,spread:xe._spread,children:[]}}function pe(xe){return{type:"listItem",spread:xe._spread,checked:null,children:[]}}function _e(){return{type:"paragraph",children:[]}}function Ue(){return{type:"strong",children:[]}}function Je(){return{type:"text",value:""}}function qe(){return{type:"thematicBreak"}}}function Oh(t){return{line:t.line,column:t.column,offset:t.offset}}function Hoe(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Hoe(t,r):VYe(t,r)}}function VYe(t,e){let n;for(n in e)if(Uoe.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function uG(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Jx({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Jx({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Jx({start:e.start,end:e.end})+") is still open")}function qYe(t){const e=this;e.parser=n;function n(r){return UYe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function GYe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function WYe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function KYe(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function YYe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XYe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function JYe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Hv(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let i,o=t.footnoteCounts.get(r);o===void 0?(o=0,t.footnoteOrder.push(r),i=t.footnoteOrder.length):i=a+1,o+=1,t.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function QYe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ZYe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Voe(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function eXe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Voe(t,e);const s={src:Hv(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function tXe(t,e){const n={src:Hv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function nXe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function rXe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Voe(t,e);const s={href:Hv(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function sXe(t,e){const n={href:Hv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function aXe(t,e,n){const r=t.all(e),s=n?iXe(n):qoe(e),a={},i=[];if(typeof e.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const d=r[o];(s||o!==0||d.type!=="element"||d.tagName!=="p")&&i.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?i.push(...d.children):i.push(d)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&i.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:i};return t.patch(e,u),t.applyData(e,u)}function iXe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=qoe(n[r])}return e}function qoe(t){const e=t.spread;return e??t.children.length>1}function oXe(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function lXe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cXe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function uXe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dXe(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},o=cI(e.children[1]),l=koe(e.children[e.children.length-1]);o&&l&&(i.position={start:o,end:l}),s.push(i)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function hXe(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,o=i?i.length:e.children.length;let l=-1;const u=[];for(;++l<o;){const f=e.children[l],m={},g=i?i[l]:void 0;g&&(m.align=g);let x={type:"element",tagName:a,properties:m,children:[]};f&&(x.children=t.all(f),t.patch(f,x),x=t.applyData(f,x)),u.push(x)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,d),t.applyData(e,d)}function fXe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const dG=9,hG=32;function mXe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(fG(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(fG(e.slice(s),s>0,!1)),a.join("")}function fG(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===dG||a===hG;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===dG||a===hG;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function pXe(t,e){const n={type:"text",value:mXe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function gXe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const vXe={blockquote:GYe,break:WYe,code:KYe,delete:YYe,emphasis:XYe,footnoteReference:JYe,heading:QYe,html:ZYe,imageReference:eXe,image:tXe,inlineCode:nXe,linkReference:rXe,link:sXe,listItem:aXe,list:oXe,paragraph:lXe,root:cXe,strong:uXe,table:dXe,tableCell:fXe,tableRow:hXe,text:pXe,thematicBreak:gXe,toml:FC,yaml:FC,definition:FC,footnoteDefinition:FC};function FC(){}const Goe=-1,DE=0,Zx=1,o5=2,gI=3,vI=4,yI=5,xI=6,Woe=7,Koe=8,mG=typeof self=="object"?self:globalThis,yXe=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,i]=e[s];switch(a){case DE:case Goe:return n(i,s);case Zx:{const o=n([],s);for(const l of i)o.push(r(l));return o}case o5:{const o=n({},s);for(const[l,u]of i)o[r(l)]=r(u);return o}case gI:return n(new Date(i),s);case vI:{const{source:o,flags:l}=i;return n(new RegExp(o,l),s)}case yI:{const o=n(new Map,s);for(const[l,u]of i)o.set(r(l),r(u));return o}case xI:{const o=n(new Set,s);for(const l of i)o.add(r(l));return o}case Woe:{const{name:o,message:l}=i;return n(new mG[o](l),s)}case Koe:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:o}=new Uint8Array(i);return n(new DataView(o),i)}}return n(new mG[a](i),s)};return r},pG=t=>yXe(new Map,t)(0),Pp="",{toString:xXe}={},{keys:bXe}=Object,lx=t=>{const e=typeof t;if(e!=="object"||!t)return[DE,e];const n=xXe.call(t).slice(8,-1);switch(n){case"Array":return[Zx,Pp];case"Object":return[o5,Pp];case"Date":return[gI,Pp];case"RegExp":return[vI,Pp];case"Map":return[yI,Pp];case"Set":return[xI,Pp];case"DataView":return[Zx,n]}return n.includes("Array")?[Zx,n]:n.includes("Error")?[Woe,n]:[o5,n]},BC=([t,e])=>t===DE&&(e==="function"||e==="symbol"),wXe=(t,e,n,r)=>{const s=(i,o)=>{const l=r.push(i)-1;return n.set(o,l),l},a=i=>{if(n.has(i))return n.get(i);let[o,l]=lx(i);switch(o){case DE:{let d=i;switch(l){case"bigint":o=Koe,d=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return s([Goe],i)}return s([o,d],i)}case Zx:{if(l){let m=i;return l==="DataView"?m=new Uint8Array(i.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(i)),s([l,[...m]],i)}const d=[],f=s([o,d],i);for(const m of i)d.push(a(m));return f}case o5:{if(l)switch(l){case"BigInt":return s([l,i.toString()],i);case"Boolean":case"Number":case"String":return s([l,i.valueOf()],i)}if(e&&"toJSON"in i)return a(i.toJSON());const d=[],f=s([o,d],i);for(const m of bXe(i))(t||!BC(lx(i[m])))&&d.push([a(m),a(i[m])]);return f}case gI:return s([o,i.toISOString()],i);case vI:{const{source:d,flags:f}=i;return s([o,{source:d,flags:f}],i)}case yI:{const d=[],f=s([o,d],i);for(const[m,g]of i)(t||!(BC(lx(m))||BC(lx(g))))&&d.push([a(m),a(g)]);return f}case xI:{const d=[],f=s([o,d],i);for(const m of i)(t||!BC(lx(m)))&&d.push(a(m));return f}}const{message:u}=i;return s([o,{name:l,message:u}],i)};return a},gG=(t,{json:e,lossy:n}={})=>{const r=[];return wXe(!(e||n),!!e,new Map,r)(t),r},l5=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?pG(gG(t,e)):structuredClone(t):(t,e)=>pG(gG(t,e));function CXe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function SXe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function kXe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||CXe,r=t.options.footnoteBackLabel||SXe,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",i=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const d=t.all(u),f=String(u.identifier).toUpperCase(),m=Hv(f.toLowerCase());let g=0;const x=[],b=t.footnoteCounts.get(f);for(;b!==void 0&&++g<=b;){x.length>0&&x.push({type:"text",value:" "});let w=typeof n=="string"?n:n(l,g);typeof w=="string"&&(w={type:"text",value:w}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const C=d[d.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const w=C.children[C.children.length-1];w&&w.type==="text"?w.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...x)}else d.push(...x);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(d,!0)};t.patch(u,S),o.push(S)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...l5(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const _w=(function(t){if(t==null)return AXe;if(typeof t=="function")return RE(t);if(typeof t=="object")return Array.isArray(t)?EXe(t):_Xe(t);if(typeof t=="string")return TXe(t);throw new Error("Expected function, string, or object as test")});function EXe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=_w(t[n]);return RE(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function _Xe(t){const e=t;return RE(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function TXe(t){return RE(e);function e(n){return n&&n.type===t}}function RE(t){return e;function e(n,r,s){return!!(NXe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function AXe(){return!0}function NXe(t){return t!==null&&typeof t=="object"&&"type"in t}const Yoe=[],jXe=!0,c7=!1,Xoe="skip";function bI(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=_w(s),i=r?-1:1;o(t,void 0,[])();function o(l,u,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Yoe,x,b,C;if((!e||a(l,u,d[d.length-1]||void 0))&&(g=DXe(n(l,d)),g[0]===c7))return g;if("children"in l&&l.children){const S=l;if(S.children&&g[0]!==Xoe)for(b=(r?S.children.length:-1)+i,C=d.concat(S);b>-1&&b<S.children.length;){const w=S.children[b];if(x=o(w,b,C)(),x[0]===c7)return x;b=typeof x[1]=="number"?x[1]:b+i}}return g}}}function DXe(t){return Array.isArray(t)?t:typeof t=="number"?[jXe,t]:t==null?Yoe:[t]}function ME(t,e,n,r){let s,a,i;typeof e=="function"&&typeof n!="function"?(a=void 0,i=e,s=n):(a=e,i=n,s=r),bI(t,a,o,s);function o(l,u){const d=u[u.length-1],f=d?d.children.indexOf(l):void 0;return i(l,f,d)}}const u7={}.hasOwnProperty,RXe={};function MXe(t,e){const n=e||RXe,r=new Map,s=new Map,a=new Map,i={...vXe,...n.handlers},o={all:u,applyData:OXe,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:i,one:l,options:n,patch:IXe,wrap:FXe};return ME(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:s,m=String(d.identifier).toUpperCase();f.has(m)||f.set(m,d)}}),o;function l(d,f){const m=d.type,g=o.handlers[m];if(u7.call(o.handlers,m)&&g)return g(o,d,f);if(o.options.passThrough&&o.options.passThrough.includes(m)){if("children"in d){const{children:b,...C}=d,S=l5(C);return S.children=o.all(d),S}return l5(d)}return(o.options.unknownHandler||PXe)(o,d,f)}function u(d){const f=[];if("children"in d){const m=d.children;let g=-1;for(;++g<m.length;){const x=o.one(m[g],d);if(x){if(g&&m[g-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=vG(x.value)),!Array.isArray(x)&&x.type==="element")){const b=x.children[0];b&&b.type==="text"&&(b.value=vG(b.value))}Array.isArray(x)?f.push(...x):f.push(x)}}}return f}}function IXe(t,e){t.position&&(e.position=SWe(t))}function OXe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&a&&Object.assign(n.properties,l5(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function PXe(t,e){const n=e.data||{},r="value"in e&&!(u7.call(n,"hProperties")||u7.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function FXe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function vG(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function yG(t,e){const n=MXe(t,e),r=n.one(t,void 0),s=kXe(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function BXe(t,e){return t&&"run"in t?async function(n,r){const s=yG(n,{file:r,...e});await t.run(s,r)}:function(n,r){return yG(n,{file:r,...t||e})}}function xG(t){if(t)throw t}var q6,bG;function LXe(){if(bG)return q6;bG=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},a=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var d=t.call(u,"constructor"),f=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!f)return!1;var m;for(m in u);return typeof m>"u"||t.call(u,m)},i=function(u,d){n&&d.name==="__proto__"?n(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},o=function(u,d){if(d==="__proto__")if(t.call(u,d)){if(r)return r(u,d).value}else return;return u[d]};return q6=function l(){var u,d,f,m,g,x,b=arguments[0],C=1,S=arguments.length,w=!1;for(typeof b=="boolean"&&(w=b,b=arguments[1]||{},C=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});C<S;++C)if(u=arguments[C],u!=null)for(d in u)f=o(b,d),m=o(u,d),b!==m&&(w&&m&&(a(m)||(g=s(m)))?(g?(g=!1,x=f&&s(f)?f:[]):x=f&&a(f)?f:{},i(b,{name:d,newValue:l(w,x,m)})):typeof m<"u"&&i(b,{name:d,newValue:m}));return b},q6}var zXe=LXe();const G6=Pa(zXe);function d7(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $Xe(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);o(null,...s);function o(l,...u){const d=t[++a];let f=-1;if(l){i(l);return}for(;++f<s.length;)(u[f]===null||u[f]===void 0)&&(u[f]=s[f]);s=u,d?UXe(d,o)(...u):i(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function UXe(t,e){let n;return r;function r(...i){const o=t.length>i.length;let l;o&&i.push(s);try{l=t.apply(this,i)}catch(u){const d=u;if(o&&n)throw d;return s(d)}o||(l&&l.then&&typeof l.then=="function"?l.then(a,s):l instanceof Error?s(l):a(l))}function s(i,...o){n||(n=!0,e(i,...o))}function a(i){s(null,i)}}const Gc={basename:HXe,dirname:VXe,extname:qXe,join:GXe,sep:"/"};function HXe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Tw(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let i=-1,o=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else i<0&&(a=!0,i=s+1),o>-1&&(t.codePointAt(s)===e.codePointAt(o--)?o<0&&(r=s):(o=-1,r=i));return n===r?r=i:r<0&&(r=t.length),t.slice(n,r)}function VXe(t){if(Tw(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qXe(t){Tw(t);let e=t.length,n=-1,r=0,s=-1,a=0,i;for(;e--;){const o=t.codePointAt(e);if(o===47){if(i){r=e+1;break}continue}n<0&&(i=!0,n=e+1),o===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function GXe(...t){let e=-1,n;for(;++e<t.length;)Tw(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":WXe(n)}function WXe(t){Tw(t);const e=t.codePointAt(0)===47;let n=KXe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function KXe(t,e){let n="",r=0,s=-1,a=0,i=-1,o,l;for(;++i<=t.length;){if(i<t.length)o=t.codePointAt(i);else{if(o===47)break;o=47}if(o===47){if(!(s===i-1||a===1))if(s!==i-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=i,a=0;continue}}else if(n.length>0){n="",r=0,s=i,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,i):n=t.slice(s+1,i),r=i-s-1;s=i,a=0}else o===46&&a>-1?a++:a=-1}return n}function Tw(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const YXe={cwd:XXe};function XXe(){return"/"}function h7(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function JXe(t){if(typeof t=="string")t=new URL(t);else if(!h7(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return QXe(t)}function QXe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const W6=["history","path","basename","stem","extname","dirname"];class Joe{constructor(e){let n;e?h7(e)?n={path:e}:typeof e=="string"||ZXe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":YXe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<W6.length;){const a=W6[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)W6.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Gc.basename(this.path):void 0}set basename(e){Y6(e,"basename"),K6(e,"basename"),this.path=Gc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Gc.dirname(this.path):void 0}set dirname(e){wG(this.basename,"dirname"),this.path=Gc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Gc.extname(this.path):void 0}set extname(e){if(K6(e,"extname"),wG(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){h7(e)&&(e=JXe(e)),Y6(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Gc.basename(this.path,this.extname):void 0}set stem(e){Y6(e,"stem"),K6(e,"stem"),this.path=Gc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new gi(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function K6(t,e){if(t&&t.includes(Gc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Gc.sep+"`")}function Y6(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function wG(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ZXe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const eJe=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),tJe={}.hasOwnProperty;class wI extends eJe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$Xe()}copy(){const e=new wI;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(G6(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Q6("data",this.frozen),this.namespace[e]=n,this):tJe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Q6("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=LC(e),r=this.parser||this.Parser;return X6("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),X6("process",this.parser||this.Parser),J6("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,i){const o=LC(e),l=r.parse(o);r.run(l,o,function(d,f,m){if(d||!f||!m)return u(d);const g=f,x=r.stringify(g,m);sJe(x)?m.value=x:m.result=x,u(d,m)});function u(d,f){d||!f?i(d):a?a(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),X6("processSync",this.parser||this.Parser),J6("processSync",this.compiler||this.Compiler),this.process(e,s),SG("processSync","process",n),r;function s(a,i){n=!0,xG(a),r=i}}run(e,n,r){CG(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(i,o){const l=LC(n);s.run(e,l,u);function u(d,f,m){const g=f||e;d?o(d):i?i(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),SG("runSync","run",r),s;function a(i,o){xG(i),s=o,r=!0}}stringify(e,n){this.freeze();const r=LC(n),s=this.compiler||this.Compiler;return J6("stringify",s),CG(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Q6("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?o(e):i(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;l(d,f)}else i(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function i(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(s.settings=G6(!0,s.settings,u.settings))}function o(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];a(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,d){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===u){m=f;break}if(m===-1)r.push([u,...d]);else if(d.length>0){let[g,...x]=d;const b=r[m][1];d7(b)&&d7(g)&&(g=G6(!0,b,g)),r[m]=[u,g,...x]}}}}const nJe=new wI().freeze();function X6(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function J6(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Q6(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function CG(t){if(!d7(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function SG(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function LC(t){return rJe(t)?t:new Joe(t)}function rJe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function sJe(t){return typeof t=="string"||aJe(t)}function aJe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const iJe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",kG=[],EG={allowDangerousHtml:!0},oJe=/^(https?|ircs?|mailto|xmpp)$/i,lJe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function CI(t){const e=cJe(t),n=uJe(t);return dJe(e.runSync(e.parse(n),n),t)}function cJe(t){const e=t.rehypePlugins||kG,n=t.remarkPlugins||kG,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...EG}:EG;return nJe().use(qYe).use(n).use(BXe,r).use(e)}function uJe(t){const e=t.children||"",n=new Joe;return typeof e=="string"&&(n.value=e),n}function dJe(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,i=e.skipHtml,o=e.unwrapDisallowed,l=e.urlTransform||hJe;for(const d of lJe)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+iJe+d.id,void 0);return ME(t,u),AWe(t,{Fragment:c.Fragment,components:s,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function u(d,f,m){if(d.type==="raw"&&m&&typeof f=="number")return i?m.children.splice(f,1):m.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let g;for(g in U6)if(Object.hasOwn(U6,g)&&Object.hasOwn(d.properties,g)){const x=d.properties[g],b=U6[g];(b===null||b.includes(d.tagName))&&(d.properties[g]=l(String(x||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!g&&r&&typeof f=="number"&&(g=!r(d,f,m)),g&&m&&typeof f=="number")return o&&d.children?m.children.splice(f,1,...d.children):m.children.splice(f,1),f}}}function hJe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||oJe.test(t.slice(0,e))?t:""}function _G(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function fJe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function mJe(t,e,n){const s=_w((n||{}).ignore||[]),a=pJe(e);let i=-1;for(;++i<a.length;)bI(t,"text",o);function o(u,d){let f=-1,m;for(;++f<d.length;){const g=d[f],x=m?m.children:void 0;if(s(g,x?x.indexOf(g):void 0,m))return;m=g}if(m)return l(u,d)}function l(u,d){const f=d[d.length-1],m=a[i][0],g=a[i][1];let x=0;const C=f.children.indexOf(u);let S=!1,w=[];m.lastIndex=0;let E=m.exec(u.value);for(;E;){const T=E.index,_={index:E.index,input:E.input,stack:[...d,u]};let A=g(...E,_);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?m.lastIndex=T+1:(x!==T&&w.push({type:"text",value:u.value.slice(x,T)}),Array.isArray(A)?w.push(...A):A&&w.push(A),x=T+E[0].length,S=!0),!m.global)break;E=m.exec(u.value)}return S?(x<u.value.length&&w.push({type:"text",value:u.value.slice(x)}),f.children.splice(C,1,...w)):w=[u],C+w.length}}function pJe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([gJe(s[0]),vJe(s[1])])}return e}function gJe(t){return typeof t=="string"?new RegExp(fJe(t),"g"):t}function vJe(t){return typeof t=="function"?t:function(){return t}}const Z6="phrasing",eN=["autolink","link","image","label"];function yJe(){return{transforms:[EJe],enter:{literalAutolink:bJe,literalAutolinkEmail:tN,literalAutolinkHttp:tN,literalAutolinkWww:tN},exit:{literalAutolink:kJe,literalAutolinkEmail:SJe,literalAutolinkHttp:wJe,literalAutolinkWww:CJe}}}function xJe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Z6,notInConstruct:eN},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Z6,notInConstruct:eN},{character:":",before:"[ps]",after:"\\/",inConstruct:Z6,notInConstruct:eN}]}}function bJe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function tN(t){this.config.enter.autolinkProtocol.call(this,t)}function wJe(t){this.config.exit.autolinkProtocol.call(this,t)}function CJe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function SJe(t){this.config.exit.autolinkEmail.call(this,t)}function kJe(t){this.exit(t)}function EJe(t){mJe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,_Je],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),TJe]],{ignore:["link","linkReference"]})}function _Je(t,e,n,r,s){let a="";if(!Qoe(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!AJe(n)))return!1;const i=NJe(n+r);if(!i[0])return!1;const o={type:"link",title:null,url:a+e+i[0],children:[{type:"text",value:e+i[0]}]};return i[1]?[o,{type:"text",value:i[1]}]:o}function TJe(t,e,n,r){return!Qoe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function AJe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function NJe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=_G(t,"(");let a=_G(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function Qoe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||u0(n)||NE(n))&&(!e||n!==47)}Zoe.peek=BJe;function jJe(){this.buffer()}function DJe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function RJe(){this.buffer()}function MJe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function IJe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=dc(this.sliceSerialize(t)).toLowerCase(),n.label=e}function OJe(t){this.exit(t)}function PJe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=dc(this.sliceSerialize(t)).toLowerCase(),n.label=e}function FJe(t){this.exit(t)}function BJe(){return"["}function Zoe(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const i=n.enter("footnoteReference"),o=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),o(),i(),a+=s.move("]"),a}function LJe(){return{enter:{gfmFootnoteCallString:jJe,gfmFootnoteCall:DJe,gfmFootnoteDefinitionLabelString:RJe,gfmFootnoteDefinition:MJe},exit:{gfmFootnoteCallString:IJe,gfmFootnoteCall:OJe,gfmFootnoteDefinitionLabelString:PJe,gfmFootnoteDefinition:FJe}}}function zJe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Zoe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,i){const o=a.createTracker(i);let l=o.move("[^");const u=a.enter("footnoteDefinition"),d=a.enter("label");return l+=o.move(a.safe(a.associationId(r),{before:l,after:"]"})),d(),l+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),l+=o.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,o.current()),e?ele:$Je))),u(),l}}function $Je(t,e,n){return e===0?t:ele(t,e,n)}function ele(t,e,n){return(n?"":"    ")+t}const UJe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];tle.peek=WJe;function HJe(){return{canContainEols:["delete"],enter:{strikethrough:qJe},exit:{strikethrough:GJe}}}function VJe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:UJe}],handlers:{delete:tle}}}function qJe(t){this.enter({type:"delete",children:[]},t)}function GJe(t){this.exit(t)}function tle(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let i=s.move("~~");return i+=n.containerPhrasing(t,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),a(),i}function WJe(){return"~"}function KJe(t){return t.length}function YJe(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||KJe,a=[],i=[],o=[],l=[];let u=0,d=-1;for(;++d<t.length;){const b=[],C=[];let S=-1;for(t[d].length>u&&(u=t[d].length);++S<t[d].length;){const w=XJe(t[d][S]);if(n.alignDelimiters!==!1){const E=s(w);C[S]=E,(l[S]===void 0||E>l[S])&&(l[S]=E)}b.push(w)}i[d]=b,o[d]=C}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)a[f]=TG(r[f]);else{const b=TG(r);for(;++f<u;)a[f]=b}f=-1;const m=[],g=[];for(;++f<u;){const b=a[f];let C="",S="";b===99?(C=":",S=":"):b===108?C=":":b===114&&(S=":");let w=n.alignDelimiters===!1?1:Math.max(1,l[f]-C.length-S.length);const E=C+"-".repeat(w)+S;n.alignDelimiters!==!1&&(w=C.length+w+S.length,w>l[f]&&(l[f]=w),g[f]=w),m[f]=E}i.splice(1,0,m),o.splice(1,0,g),d=-1;const x=[];for(;++d<i.length;){const b=i[d],C=o[d];f=-1;const S=[];for(;++f<u;){const w=b[f]||"";let E="",T="";if(n.alignDelimiters!==!1){const _=l[f]-(C[f]||0),A=a[f];A===114?E=" ".repeat(_):A===99?_%2?(E=" ".repeat(_/2+.5),T=" ".repeat(_/2-.5)):(E=" ".repeat(_/2),T=E):T=" ".repeat(_)}n.delimiterStart!==!1&&!f&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&w==="")&&(n.delimiterStart!==!1||f)&&S.push(" "),n.alignDelimiters!==!1&&S.push(E),S.push(w),n.alignDelimiters!==!1&&S.push(T),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&S.push("|")}x.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return x.join(`
`)}function XJe(t){return t==null?"":String(t)}function TG(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function JJe(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const i=n.indentLines(n.containerFlow(t,a.current()),QJe);return s(),i}function QJe(t,e,n){return">"+(n?"":" ")+t}function ZJe(t,e){return AG(t,e.inConstruct,!0)&&!AG(t,e.notInConstruct,!1)}function AG(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function NG(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&ZJe(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function nle(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,i=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>i&&(i=a):a=1,s=r+e.length,r=n.indexOf(e,s);return i}function eQe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function tQe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function nQe(t,e,n,r){const s=tQe(n),a=t.value||"",i=s==="`"?"GraveAccent":"Tilde";if(eQe(t,n)){const f=n.enter("codeIndented"),m=n.indentLines(a,rQe);return f(),m}const o=n.createTracker(r),l=s.repeat(Math.max(nle(a,s)+1,3)),u=n.enter("codeFenced");let d=o.move(l);if(t.lang){const f=n.enter(`codeFencedLang${i}`);d+=o.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...o.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${i}`);d+=o.move(" "),d+=o.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...o.current()})),f()}return d+=o.move(`
`),a&&(d+=o.move(a+`
`)),d+=o.move(l),u(),d}function rQe(t,e,n){return(n?"":"    ")+t}function SI(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function sQe(t,e,n,r){const s=SI(n),a=s==='"'?"Quote":"Apostrophe",i=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),o(),!t.url||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),o(),t.title&&(o=n.enter(`title${a}`),u+=l.move(" "+s),u+=l.move(n.safe(t.title,{before:u,after:s,...l.current()})),u+=l.move(s),o()),i(),u}function aQe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function lb(t){return"&#x"+t.toString(16).toUpperCase()+";"}function c5(t,e,n){const r=Kg(t),s=Kg(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}rle.peek=iQe;function rle(t,e,n,r){const s=aQe(n),a=n.enter("emphasis"),i=n.createTracker(r),o=i.move(s);let l=i.move(n.containerPhrasing(t,{after:s,before:o,...i.current()}));const u=l.charCodeAt(0),d=c5(r.before.charCodeAt(r.before.length-1),u,s);d.inside&&(l=lb(u)+l.slice(1));const f=l.charCodeAt(l.length-1),m=c5(r.after.charCodeAt(0),f,s);m.inside&&(l=l.slice(0,-1)+lb(f));const g=i.move(s);return a(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},o+l+g}function iQe(t,e,n){return n.options.emphasis||"*"}function oQe(t,e){let n=!1;return ME(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,c7}),!!((!t.depth||t.depth<3)&&fI(t)&&(e.options.setext||n))}function lQe(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(oQe(t,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),m=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return f(),d(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const i="#".repeat(s),o=n.enter("headingAtx"),l=n.enter("phrasing");a.move(i+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(u)&&(u=lb(u.charCodeAt(0))+u.slice(1)),u=u?i+" "+u:i,n.options.closeAtx&&(u+=" "+i),l(),o(),u}sle.peek=cQe;function sle(t){return t.value||""}function cQe(){return"<"}ale.peek=uQe;function ale(t,e,n,r){const s=SI(n),a=s==='"'?"Quote":"Apostrophe",i=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),o(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),o(),t.title&&(o=n.enter(`title${a}`),u+=l.move(" "+s),u+=l.move(n.safe(t.title,{before:u,after:s,...l.current()})),u+=l.move(s),o()),u+=l.move(")"),i(),u}function uQe(){return"!"}ile.peek=dQe;function ile(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let i=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const u=n.safe(t.alt,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),i();const d=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...o.current()});return i(),n.stack=d,a(),s==="full"||!u||u!==f?l+=o.move(f+"]"):s==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function dQe(){return"!"}ole.peek=hQe;function ole(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const i=n.unsafe[a],o=n.compilePattern(i);let l;if(i.atBreak)for(;l=o.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return s+r+s}function hQe(){return"`"}function lle(t,e){const n=fI(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}cle.peek=fQe;function cle(t,e,n,r){const s=SI(n),a=s==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let o,l;if(lle(t,n)){const d=n.stack;n.stack=[],o=n.enter("autolink");let f=i.move("<");return f+=i.move(n.containerPhrasing(t,{before:f,after:">",...i.current()})),f+=i.move(">"),o(),n.stack=d,f}o=n.enter("link"),l=n.enter("label");let u=i.move("[");return u+=i.move(n.containerPhrasing(t,{before:u,after:"](",...i.current()})),u+=i.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=i.move("<"),u+=i.move(n.safe(t.url,{before:u,after:">",...i.current()})),u+=i.move(">")):(l=n.enter("destinationRaw"),u+=i.move(n.safe(t.url,{before:u,after:t.title?" ":")",...i.current()}))),l(),t.title&&(l=n.enter(`title${a}`),u+=i.move(" "+s),u+=i.move(n.safe(t.title,{before:u,after:s,...i.current()})),u+=i.move(s),l()),u+=i.move(")"),o(),u}function fQe(t,e,n){return lle(t,n)?"<":"["}ule.peek=mQe;function ule(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let i=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),i();const d=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...o.current()});return i(),n.stack=d,a(),s==="full"||!u||u!==f?l+=o.move(f+"]"):s==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function mQe(){return"["}function kI(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function pQe(t){const e=kI(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function gQe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function dle(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function vQe(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let i=t.ordered?gQe(n):kI(n);const o=t.ordered?i==="."?")":".":pQe(n);let l=e&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((i==="*"||i==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),dle(n)===i&&d){let f=-1;for(;++f<t.children.length;){const m=t.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(i=o),n.bulletCurrent=i;const u=n.containerFlow(t,r);return n.bulletLastUsed=i,n.bulletCurrent=a,s(),u}function yQe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function xQe(t,e,n,r){const s=yQe(n);let a=n.bulletCurrent||kI(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let i=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(i=Math.ceil(i/4)*4);const o=n.createTracker(r);o.move(a+" ".repeat(i-a.length)),o.shift(i);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,o.current()),d);return l(),u;function d(f,m,g){return m?(g?"":" ".repeat(i))+f:(g?a:a+" ".repeat(i-a.length))+f}}function bQe(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),i=n.containerPhrasing(t,r);return a(),s(),i}const wQe=_w(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function CQe(t,e,n,r){return(t.children.some(function(i){return wQe(i)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function SQe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}hle.peek=kQe;function hle(t,e,n,r){const s=SQe(n),a=n.enter("strong"),i=n.createTracker(r),o=i.move(s+s);let l=i.move(n.containerPhrasing(t,{after:s,before:o,...i.current()}));const u=l.charCodeAt(0),d=c5(r.before.charCodeAt(r.before.length-1),u,s);d.inside&&(l=lb(u)+l.slice(1));const f=l.charCodeAt(l.length-1),m=c5(r.after.charCodeAt(0),f,s);m.inside&&(l=l.slice(0,-1)+lb(f));const g=i.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},o+l+g}function kQe(t,e,n){return n.options.strong||"*"}function EQe(t,e,n,r){return n.safe(t.value,r)}function _Qe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function TQe(t,e,n){const r=(dle(n)+(n.options.ruleSpaces?" ":"")).repeat(_Qe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const fle={blockquote:JJe,break:NG,code:nQe,definition:sQe,emphasis:rle,hardBreak:NG,heading:lQe,html:sle,image:ale,imageReference:ile,inlineCode:ole,link:cle,linkReference:ule,list:vQe,listItem:xQe,paragraph:bQe,root:CQe,strong:hle,text:EQe,thematicBreak:TQe};function AQe(){return{enter:{table:NQe,tableData:jG,tableHeader:jG,tableRow:DQe},exit:{codeText:RQe,table:jQe,tableData:nN,tableHeader:nN,tableRow:nN}}}function NQe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function jQe(t){this.exit(t),this.data.inTable=void 0}function DQe(t){this.enter({type:"tableRow",children:[]},t)}function nN(t){this.exit(t)}function jG(t){this.enter({type:"tableCell",children:[]},t)}function RQe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,MQe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function MQe(t,e){return e==="|"?e:t}function IQe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:i,tableCell:l,tableRow:o}};function i(g,x,b,C){return u(d(g,b,C),g.align)}function o(g,x,b,C){const S=f(g,b,C),w=u([S]);return w.slice(0,w.indexOf(`
`))}function l(g,x,b,C){const S=b.enter("tableCell"),w=b.enter("phrasing"),E=b.containerPhrasing(g,{...C,before:a,after:a});return w(),S(),E}function u(g,x){return YJe(g,{align:x,alignDelimiters:r,padding:n,stringLength:s})}function d(g,x,b){const C=g.children;let S=-1;const w=[],E=x.enter("table");for(;++S<C.length;)w[S]=f(C[S],x,b);return E(),w}function f(g,x,b){const C=g.children;let S=-1;const w=[],E=x.enter("tableRow");for(;++S<C.length;)w[S]=l(C[S],g,x,b);return E(),w}function m(g,x,b){let C=fle.inlineCode(g,x,b);return b.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function OQe(){return{exit:{taskListCheckValueChecked:DG,taskListCheckValueUnchecked:DG,paragraph:FQe}}}function PQe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:BQe}}}function DG(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function FQe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,i;for(;++a<s.length;){const o=s[a];if(o.type==="paragraph"){i=o;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function BQe(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",i="["+(t.checked?"x":" ")+"] ",o=n.createTracker(r);a&&o.move(i);let l=fle.listItem(t,e,n,{...r,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(d){return d+i}}function LQe(){return[yJe(),LJe(),HJe(),AQe(),OQe()]}function zQe(t){return{extensions:[xJe(),zJe(t),VJe(),IQe(t),PQe()]}}const $Qe={tokenize:WQe,partial:!0},mle={tokenize:KQe,partial:!0},ple={tokenize:YQe,partial:!0},gle={tokenize:XQe,partial:!0},UQe={tokenize:JQe,partial:!0},vle={name:"wwwAutolink",tokenize:qQe,previous:xle},yle={name:"protocolAutolink",tokenize:GQe,previous:ble},Qd={name:"emailAutolink",tokenize:VQe,previous:wle},ju={};function HQe(){return{text:ju}}let vm=48;for(;vm<123;)ju[vm]=Qd,vm++,vm===58?vm=65:vm===91&&(vm=97);ju[43]=Qd;ju[45]=Qd;ju[46]=Qd;ju[95]=Qd;ju[72]=[Qd,yle];ju[104]=[Qd,yle];ju[87]=[Qd,vle];ju[119]=[Qd,vle];function VQe(t,e,n){const r=this;let s,a;return i;function i(f){return!f7(f)||!wle.call(r,r.previous)||EI(r.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),o(f))}function o(f){return f7(f)?(t.consume(f),o):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(UQe,d,u)(f):f===45||f===95||ui(f)?(a=!0,t.consume(f),l):d(f)}function u(f){return t.consume(f),s=!0,l}function d(f){return a&&s&&Ai(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function qQe(t,e,n){const r=this;return s;function s(i){return i!==87&&i!==119||!xle.call(r,r.previous)||EI(r.events)?n(i):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check($Qe,t.attempt(mle,t.attempt(ple,a),n),n)(i))}function a(i){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(i)}}function GQe(t,e,n){const r=this;let s="",a=!1;return i;function i(f){return(f===72||f===104)&&ble.call(r,r.previous)&&!EI(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(f),t.consume(f),o):n(f)}function o(f){if(Ai(f)&&s.length<5)return s+=String.fromCodePoint(f),t.consume(f),o;if(f===58){const m=s.toLowerCase();if(m==="http"||m==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),a?u:(a=!0,l)):n(f)}function u(f){return f===null||i5(f)||Br(f)||u0(f)||NE(f)?n(f):t.attempt(mle,t.attempt(ple,d),n)(f)}function d(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function WQe(t,e,n){let r=0;return s;function s(i){return(i===87||i===119)&&r<3?(r++,t.consume(i),s):i===46&&r===3?(t.consume(i),a):n(i)}function a(i){return i===null?n(i):e(i)}}function KQe(t,e,n){let r,s,a;return i;function i(u){return u===46||u===95?t.check(gle,l,o)(u):u===null||Br(u)||u0(u)||u!==45&&NE(u)?l(u):(a=!0,t.consume(u),i)}function o(u){return u===95?r=!0:(s=r,r=void 0),t.consume(u),i}function l(u){return s||r||!a?n(u):e(u)}}function YQe(t,e){let n=0,r=0;return s;function s(i){return i===40?(n++,t.consume(i),s):i===41&&r<n?a(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?t.check(gle,e,a)(i):i===null||Br(i)||u0(i)?e(i):(t.consume(i),s)}function a(i){return i===41&&r++,t.consume(i),s}}function XQe(t,e,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(t.consume(o),r):o===38?(t.consume(o),a):o===93?(t.consume(o),s):o===60||o===null||Br(o)||u0(o)?e(o):n(o)}function s(o){return o===null||o===40||o===91||Br(o)||u0(o)?e(o):r(o)}function a(o){return Ai(o)?i(o):n(o)}function i(o){return o===59?(t.consume(o),r):Ai(o)?(t.consume(o),i):n(o)}}function JQe(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return ui(a)?n(a):e(a)}}function xle(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Br(t)}function ble(t){return!Ai(t)}function wle(t){return!(t===47||f7(t))}function f7(t){return t===43||t===45||t===46||t===95||ui(t)}function EI(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const QQe={tokenize:iZe,partial:!0};function ZQe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:rZe,continuation:{tokenize:sZe},exit:aZe}},text:{91:{name:"gfmFootnoteCall",tokenize:nZe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:eZe,resolveTo:tZe}}}}function eZe(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){i=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!i||!i._balanced)return n(l);const u=dc(r.sliceSerialize({start:i.end,end:r.now()}));return u.codePointAt(0)!==94||!a.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function tZe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",i,e],["exit",i,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...o),t}function nZe(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,i;return o;function o(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(f){if(a>999||f===93&&!i||f===null||f===91||Br(f))return n(f);if(f===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return s.includes(dc(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return Br(f)||(i=!0),a++,t.consume(f),f===92?d:u}function d(f){return f===91||f===92||f===93?(t.consume(f),a++,u):u(f)}}function rZe(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i=0,o;return l;function l(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(x)}function d(x){if(i>999||x===93&&!o||x===null||x===91||Br(x))return n(x);if(x===93){t.exit("chunkString");const b=t.exit("gfmFootnoteDefinitionLabelString");return a=dc(r.sliceSerialize(b)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return Br(x)||(o=!0),i++,t.consume(x),x===92?f:d}function f(x){return x===91||x===92||x===93?(t.consume(x),i++,d):d(x)}function m(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),s.includes(a)||s.push(a),Cn(t,g,"gfmFootnoteDefinitionWhitespace")):n(x)}function g(x){return e(x)}}function sZe(t,e,n){return t.check(Ew,e,t.attempt(QQe,e,n))}function aZe(t){t.exit("gfmFootnoteDefinition")}function iZe(t,e,n){const r=this;return Cn(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?e(a):n(a)}}function oZe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(i,o){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let u=l;for(;u--;)if(i[u][0]==="exit"&&i[u][1].type==="strikethroughSequenceTemporary"&&i[u][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[u][1].end.offset-i[u][1].start.offset){i[l][1].type="strikethroughSequence",i[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},i[u][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[u][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",d,o],["enter",i[u][1],o],["exit",i[u][1],o],["enter",f,o]],g=o.parser.constructs.insideSpan.null;g&&Fo(m,m.length,0,jE(g,i.slice(u+1,l),o)),Fo(m,m.length,0,[["exit",f,o],["enter",i[l][1],o],["exit",i[l][1],o],["exit",d,o]]),Fo(i,u-1,l-u+3,m),l=u+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type="data");return i}function a(i,o,l){const u=this.previous,d=this.events;let f=0;return m;function m(x){return u===126&&d[d.length-1][1].type!=="characterEscape"?l(x):(i.enter("strikethroughSequenceTemporary"),g(x))}function g(x){const b=Kg(u);if(x===126)return f>1?l(x):(i.consume(x),f++,g);if(f<2&&!n)return l(x);const C=i.exit("strikethroughSequenceTemporary"),S=Kg(x);return C._open=!S||S===2&&!!b,C._close=!b||b===2&&!!S,o(x)}}}class lZe{constructor(){this.map=[]}add(e,n,r){cZe(this,e,n,r)}consume(e){if(this.map.sort(function(a,i){return a[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function cZe(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function uZe(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function dZe(){return{flow:{null:{name:"table",tokenize:hZe,resolveAll:fZe}}}}function hZe(t,e,n){const r=this;let s=0,a=0,i;return o;function o(F){let R=r.events.length-1;for(;R>-1;){const H=r.events[R][1].type;if(H==="lineEnding"||H==="linePrefix")R--;else break}const L=R>-1?r.events[R][1].type:null,O=L==="tableHead"||L==="tableRow"?A:l;return O===A&&r.parser.lazy[r.now().line]?n(F):O(F)}function l(F){return t.enter("tableHead"),t.enter("tableRow"),u(F)}function u(F){return F===124||(i=!0,a+=1),d(F)}function d(F){return F===null?n(F):Dt(F)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),g):n(F):Un(F)?Cn(t,d,"whitespace")(F):(a+=1,i&&(i=!1,s+=1),F===124?(t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),i=!0,d):(t.enter("data"),f(F)))}function f(F){return F===null||F===124||Br(F)?(t.exit("data"),d(F)):(t.consume(F),F===92?m:f)}function m(F){return F===92||F===124?(t.consume(F),f):f(F)}function g(F){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(F):(t.enter("tableDelimiterRow"),i=!1,Un(F)?Cn(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):x(F))}function x(F){return F===45||F===58?C(F):F===124?(i=!0,t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),b):_(F)}function b(F){return Un(F)?Cn(t,C,"whitespace")(F):C(F)}function C(F){return F===58?(a+=1,i=!0,t.enter("tableDelimiterMarker"),t.consume(F),t.exit("tableDelimiterMarker"),S):F===45?(a+=1,S(F)):F===null||Dt(F)?T(F):_(F)}function S(F){return F===45?(t.enter("tableDelimiterFiller"),w(F)):_(F)}function w(F){return F===45?(t.consume(F),w):F===58?(i=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(F),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(F))}function E(F){return Un(F)?Cn(t,T,"whitespace")(F):T(F)}function T(F){return F===124?x(F):F===null||Dt(F)?!i||s!==a?_(F):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(F)):_(F)}function _(F){return n(F)}function A(F){return t.enter("tableRow"),j(F)}function j(F){return F===124?(t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),j):F===null||Dt(F)?(t.exit("tableRow"),e(F)):Un(F)?Cn(t,j,"whitespace")(F):(t.enter("data"),D(F))}function D(F){return F===null||F===124||Br(F)?(t.exit("data"),j(F)):(t.consume(F),F===92?z:D)}function z(F){return F===92||F===124?(t.consume(F),D):D(F)}}function fZe(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],i=[0,0,0,0],o=!1,l=0,u,d,f;const m=new lZe;for(;++n<t.length;){const g=t[n],x=g[1];g[0]==="enter"?x.type==="tableHead"?(o=!1,l!==0&&(RG(m,e,l,u,d),d=void 0,l=0),u={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(n,0,[["enter",u,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,f=void 0,a=[0,0,0,0],i=[0,n+1,0,0],o&&(o=!1,d={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(n,0,[["enter",d,e]])),s=x.type==="tableDelimiterRow"?2:d?3:1):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(a[1]!==0&&(i[0]=i[1],f=zC(m,e,a,s,void 0,f),a=[0,0,0,0]),i[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(i[0]=i[1],f=zC(m,e,a,s,void 0,f)),a=i,i=[a[1],n,0,0])):x.type==="tableHead"?(o=!0,l=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(l=n,a[1]!==0?(i[0]=i[1],f=zC(m,e,a,s,n,f)):i[1]!==0&&(f=zC(m,e,i,s,n,f)),s=0):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(i[3]=n)}for(l!==0&&RG(m,e,l,u,d),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=uZe(e.events,n))}return t}function zC(t,e,n,r,s,a){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(a.end=Object.assign({},Wp(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const l=Wp(e.events,n[1]);if(a={type:i,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const u=Wp(e.events,n[2]),d=Wp(e.events,n[3]),f={type:o,start:Object.assign({},u),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",f,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,b=n[3]-n[2]-1;t.add(x,b,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return s!==void 0&&(a.end=Object.assign({},Wp(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function RG(t,e,n,r,s){const a=[],i=Wp(e.events,n);s&&(s.end=Object.assign({},i),a.push(["exit",s,e])),r.end=Object.assign({},i),a.push(["exit",r,e]),t.add(n+1,0,a)}function Wp(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const mZe={name:"tasklistCheck",tokenize:gZe};function pZe(){return{text:{91:mZe}}}function gZe(t,e,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),a)}function a(l){return Br(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),i):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),i):n(l)}function i(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),o):n(l)}function o(l){return Dt(l)?e(l):Un(l)?t.check({tokenize:vZe},e,n)(l):n(l)}}function vZe(t,e,n){return Cn(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function yZe(t){return Doe([HQe(),ZQe(),oZe(t),dZe(),pZe()])}const xZe={};function _I(t){const e=this,n=t||xZe,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(yZe(n)),a.push(LQe()),i.push(zQe(n))}const bZe=({data:t,onOpenDocument:e})=>{var n;return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 min-w-0 overflow-x-hidden",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-xs font-semibold text-theme-0 leading-tight line-clamp-2",children:t.document_name}),c.jsx("div",{className:"text-[10px] text-gray-500",children:typeof((n=t.metadata)==null?void 0:n.page)=="number"?`Page ${t.metadata.page}`:""})]}),c.jsxs("button",{type:"button",onClick:()=>e==null?void 0:e(t.document_id),className:"flex items-center gap-1 rounded-md border border-gray-200 px-2 py-1 text-[10px] text-gray-600 transition hover:bg-gray-50 hover:text-gray-900",children:[c.jsx(fi,{className:"h-3 w-3"}),"View"]})]}),c.jsx("div",{className:"h-px bg-gray-100"}),c.jsx("div",{className:"max-h-40 overflow-y-auto pr-1 text-xs leading-relaxed text-gray-700",children:t.content}),(t.created_at||t.updated_at)&&c.jsx("div",{className:"text-[10px] text-gray-400",children:t.created_at&&c.jsxs("span",{children:["Added ",new Date(t.created_at).toLocaleDateString()]})})]})},wZe=/\[\^(\d+)(?:[,-](\d+))?\]/g,TI=()=>t=>{ME(t,"text",(e,n,r)=>{if(!r||typeof e.value!="string")return;const s=[...e.value.matchAll(wZe)];if(!s.length)return;const a=[];let i=0;for(const o of s){const[l,u,d]=o,f=o.index,m=f+l.length;f>i&&a.push({type:"text",value:e.value.slice(i,f)}),a.push({type:"footnoteReference",identifier:d?`${u}-${d}`:`${u}-1`,label:d?`${u}-${d}`:`${u}-1`}),i=m}i<e.value.length&&a.push({type:"text",value:e.value.slice(i)}),r.children.splice(n,1,...a)})};function CZe(t){var r;const e=Array.isArray(t)?t[0]:t;if(!((r=e==null?void 0:e.props)!=null&&r.href))return null;const n=e.props.href.match(/fn-(\d+)-(\d+)/);return n?{documentId:Number(n[1]),chunkIndex:Number(n[2])}:null}const SZe=({children:t,className:e,...n})=>{const{notebook:r,selectedSources:s,navigatePage:a}=os(),i=CZe(t),[o,l]=y.useState(!1),[u,d]=y.useState(null),f=y.useRef(null),m=()=>{f.current&&(clearTimeout(f.current),f.current=null),l(!0)},g=()=>{f.current=setTimeout(()=>{l(!1)},120)},x=()=>{if(!i)return;const b=s.filter(C=>"document_id"in C&&C.document_id===i.documentId);b.length&&a({type:"source",value:b[0]})};return y.useEffect(()=>{if(!i||!o||u)return;const b=s.filter(C=>"document_id"in C&&C.document_id===i.documentId);(!b.length||!("id"in b[0]))&&d("Source was deleted."),lHe({path:{notebook_id:r.id.toString(),document_id:i.documentId.toString(),chunk_id:i.chunkIndex.toString()}}).then(({data:C,error:S})=>{console.log(C),d(S?"Failed to retrieve citation. The source may have been deleted.":C)}).catch(C=>d("Failed to retrieve citation. The source may have been deleted."))},[o,i,u]),i?c.jsxs(_ne,{open:o,onOpenChange:l,children:[c.jsx(Tne,{asChild:!0,onMouseEnter:m,onMouseLeave:g,children:c.jsxs("sup",{className:ge("inline-flex items-center gap-0.5","rounded-full border border-blue-500","bg-theme-0 px-1.5 py-1","text-[10px] font-medium","hover:bg-theme-1 hover:text-theme-0","transition","[&>a]:no-underline [&>a]:text-inherit cursor-pointer","text-blue-500",e),...n,children:[c.jsx(fi,{className:"h-3 w-3"}),t]})}),c.jsx(Ane,{children:c.jsx(Nne,{side:"top",align:"center",sideOffset:8,className:ge("z-[1000] w-80 rounded-lg border border-theme","bg-theme-0 p-3 shadow-theme","data-[state=open]:animate-in","data-[state=closed]:animate-out"),onMouseEnter:m,onMouseLeave:g,children:u?typeof u=="string"?c.jsx("span",{className:"text-xs text-theme-2",children:u}):c.jsx(bZe,{data:u,onOpenDocument:x}):c.jsx("span",{className:"text-xs text-theme-2",children:"Loading source"})})})]}):c.jsx("sup",{...n,children:t})};var kZe=t=>Array.from(t).map(n=>n.getModelContext()).sort((n,r)=>(r.priority??0)-(n.priority??0)).reduce((n,r)=>{var s;if(r.system&&(n.system?n.system+=`

${r.system}`:n.system=r.system),r.tools)for(const[a,i]of Object.entries(r.tools)){const o=(s=n.tools)==null?void 0:s[a];if(o&&o!==i)throw new Error(`You tried to define a tool with the name ${a}, but it already exists.`);n.tools||(n.tools={}),n.tools[a]=i}return r.config&&(n.config={...n.config,...r.config}),r.callSettings&&(n.callSettings={...n.callSettings,...r.callSettings}),n},{}),AI=class{constructor(){Ie(this,"_providers",new Set);Ie(this,"_subscribers",new Set)}getModelContext(){return kZe(this._providers)}registerModelContextProvider(t){var n;this._providers.add(t);const e=(n=t.subscribe)==null?void 0:n.call(t,()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(t),e==null||e(),this.notifySubscribers()}}notifySubscribers(){for(const t of this._subscribers)t()}subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}},NI=class{constructor(){Ie(this,"_contextProvider",new AI)}registerModelContextProvider(t){return this._contextProvider.registerModelContextProvider(t)}getModelContextProvider(){return this._contextProvider}},Aw=class{constructor(){Ie(this,"_subscribers",new Set)}subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}waitForUpdate(){return new Promise(t=>{const e=this.subscribe(()=>{e(),t()})})}_notifySubscribers(){const t=[];for(const e of this._subscribers)try{e()}catch(n){t.push(n)}if(t.length>0)throw t.length===1?t[0]:new AggregateError(t)}},EZe=t=>t.status.type==="complete",Cle=class extends Aw{constructor(){super(...arguments);Ie(this,"isEditing",!0);Ie(this,"_attachments",[]);Ie(this,"_text","");Ie(this,"_role","user");Ie(this,"_runConfig",{});Ie(this,"_eventSubscribers",new Map)}get attachmentAccept(){var e;return((e=this.getAttachmentAdapter())==null?void 0:e.accept)??"*"}get attachments(){return this._attachments}setAttachments(e){this._attachments=e,this._notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}get text(){return this._text}get role(){return this._role}get runConfig(){return this._runConfig}setText(e){this._text!==e&&(this._text=e,this._notifySubscribers())}setRole(e){this._role!==e&&(this._role=e,this._notifySubscribers())}setRunConfig(e){this._runConfig!==e&&(this._runConfig=e,this._notifySubscribers())}_emptyTextAndAttachments(){this._attachments=[],this._text="",this._notifySubscribers()}async _onClearAttachments(){const e=this.getAttachmentAdapter();e&&await Promise.all(this._attachments.map(n=>e.remove(n)))}async reset(){if(this._attachments.length===0&&this._text===""&&this._role==="user"&&Object.keys(this._runConfig).length===0)return;this._role="user",this._runConfig={};const e=this._onClearAttachments();this._emptyTextAndAttachments(),await e}async clearAttachments(){const e=this._onClearAttachments();this.setAttachments([]),await e}async send(){const e=this.getAttachmentAdapter(),n=e&&this.attachments.length>0?Promise.all(this.attachments.map(async a=>EZe(a)?a:await e.send(a))):[],r=this.text;this._emptyTextAndAttachments();const s={createdAt:new Date,role:this.role,content:r?[{type:"text",text:r}]:[],attachments:await n,runConfig:this.runConfig,metadata:{custom:{}}};this.handleSend(s),this._notifyEventSubscribers("send")}cancel(){this.handleCancel()}async addAttachment(e){const n=this.getAttachmentAdapter();if(!n)throw new Error("Attachments are not supported");const r=a=>{const i=this._attachments.findIndex(o=>o.id===a.id);i!==-1?this._attachments=[...this._attachments.slice(0,i),a,...this._attachments.slice(i+1)]:this._attachments=[...this._attachments,a],this._notifySubscribers()},s=n.add({file:e});if(Symbol.asyncIterator in s)for await(const a of s)r(a);else r(await s);this._notifyEventSubscribers("attachment-add"),this._notifySubscribers()}async removeAttachment(e){const n=this.getAttachmentAdapter();if(!n)throw new Error("Attachments are not supported");const r=this._attachments.findIndex(a=>a.id===e);if(r===-1)throw new Error("Attachment not found");const s=this._attachments[r];await n.remove(s),this._attachments=[...this._attachments.slice(0,r),...this._attachments.slice(r+1)],this._notifySubscribers()}_notifyEventSubscribers(e){const n=this._eventSubscribers.get(e);if(n)for(const r of n)r()}unstable_on(e,n){const r=this._eventSubscribers.get(e);return r?r.add(n):this._eventSubscribers.set(e,new Set([n])),()=>{const s=this._eventSubscribers.get(e);s&&s.delete(n)}}},Sle=class extends Cle{constructor(e){super();Ie(this,"_canCancel",!1);this.runtime=e,this.connect()}get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){var e;return(e=this.runtime.adapters)==null?void 0:e.attachments}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this._notifySubscribers())})}async handleSend(e){var n;this.runtime.append({...e,parentId:((n=this.runtime.messages.at(-1))==null?void 0:n.id)??null,sourceId:null})}async handleCancel(){this.runtime.cancelRun()}};let kle=(t,e=21)=>(n=e)=>{let r="",s=n|0;for(;s--;)r+=t[Math.random()*t.length|0];return r};var d0=kle("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),_Ze="__optimistic__",TZe=()=>`${_Ze}${d0()}`,Nw=Symbol("autoStatus"),AZe=Object.freeze(Object.assign({type:"running"},{[Nw]:!0})),NZe=Object.freeze(Object.assign({type:"complete",reason:"unknown"},{[Nw]:!0})),jZe=Object.freeze(Object.assign({type:"requires-action",reason:"tool-calls"},{[Nw]:!0})),DZe=Object.freeze(Object.assign({type:"requires-action",reason:"interrupt"},{[Nw]:!0})),Ele=(t,e,n,r,s)=>t&&s?Object.assign({type:"incomplete",reason:"error",error:s},{[Nw]:!0}):t&&e?AZe:n?DZe:r?jZe:NZe,ym={exports:{}},MG;function RZe(){if(MG)return ym.exports;MG=1;const t=typeof Buffer<"u",e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),t&&Buffer.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const f=u&&u.protoAction||"error",m=u&&u.constructorAction||"error";if(f==="ignore"&&m==="ignore")return d;if(f!=="ignore"&&m!=="ignore"){if(e.test(o)===!1&&n.test(o)===!1)return d}else if(f!=="ignore"&&m==="ignore"){if(e.test(o)===!1)return d}else if(n.test(o)===!1)return d;return s(d,{protoAction:f,constructorAction:m,safe:u&&u.safe})}function s(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let f=[o];for(;f.length;){const m=f;f=[];for(const g of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&g.constructor!==null&&typeof g.constructor=="object"&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const x in g){const b=g[x];b&&typeof b=="object"&&f.push(b)}}}return o}function a(o,l,u){const{stackTraceLimit:d}=Error;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function i(o,l){const{stackTraceLimit:u}=Error;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return}finally{Error.stackTraceLimit=u}}return ym.exports=a,ym.exports.default=a,ym.exports.parse=a,ym.exports.safeParse=i,ym.exports.scan=s,ym.exports}var MZe=RZe();const m7=Pa(MZe);function IZe(t){const e=["ROOT"];let n=-1,r=null;const s=[];let a;function i(){a!==void 0&&(s.push(JSON.parse(`"${a}"`)),a=void 0)}function o(f,m,g){switch(f){case'"':{n=m,e.pop(),e.push(g),e.push("INSIDE_STRING"),i();break}case"f":case"t":case"n":{n=m,r=m,e.pop(),e.push(g),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(g),e.push("INSIDE_NUMBER"),i();break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=m,e.pop(),e.push(g),e.push("INSIDE_NUMBER"),i();break}case"{":{n=m,e.pop(),e.push(g),e.push("INSIDE_OBJECT_START"),i();break}case"[":{n=m,e.pop(),e.push(g),e.push("INSIDE_ARRAY_START"),i();break}}}function l(f,m){switch(f){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=m,e.pop(),a=s.pop();break}}}function u(f,m){switch(f){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA"),a=(Number(a)+1).toString();break}case"]":{n=m,e.pop(),a=s.pop();break}}}for(let f=0;f<t.length;f++){const m=t[f];switch(e[e.length-1]){case"ROOT":o(m,f,"FINISH");break;case"INSIDE_OBJECT_START":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY"),a="";break}case"}":{n=f,e.pop(),a=s.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY"),a="";break}}break}case"INSIDE_OBJECT_KEY":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}case"\\":{e.push("INSIDE_STRING_ESCAPE"),a+=m;break}default:{a+=m;break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(m){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(m,f,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{l(m,f);break}case"INSIDE_STRING":{switch(m){case'"':{e.pop(),n=f,a=s.pop();break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=f}break}case"INSIDE_ARRAY_START":{switch(m){case"]":{n=f,e.pop(),a=s.pop();break}default:{n=f,a="0",o(m,f,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(m){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA"),a=(Number(a)+1).toString();break}case"]":{n=f,e.pop(),a=s.pop();break}default:{n=f;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(m,f,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),e[e.length-1]==="INSIDE_STRING"?n=f:e[e.length-1]==="INSIDE_OBJECT_KEY"&&(a+=m);break}case"INSIDE_NUMBER":{switch(m){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=f;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),a=s.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(m,f),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&l(m,f);break}case"}":{e.pop(),a=s.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&l(m,f);break}case"]":{e.pop(),a=s.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(m,f);break}default:{e.pop(),a=s.pop();break}}break}case"INSIDE_LITERAL":{const x=t.substring(r,f+1);!"false".startsWith(x)&&!"true".startsWith(x)&&!"null".startsWith(x)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?l(m,f):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(m,f)):n=f;break}}}let d=t.slice(0,n+1);for(let f=e.length-1;f>=0;f--)switch(e[f]){case"INSIDE_STRING":{d+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{d+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{d+="]";break}case"INSIDE_LITERAL":{const g=t.substring(r,t.length);"true".startsWith(g)?d+="true".slice(g.length):"false".startsWith(g)?d+="false".slice(g.length):"null".startsWith(g)&&(d+="null".slice(g.length))}}return[d,s]}var $S=Symbol("aui.parse-partial-json-object.meta"),OZe=t=>t==null?void 0:t[$S],u5=t=>{if(t.length===0)return{[$S]:{state:"partial",partialPath:[]}};try{const e=m7.parse(t);if(typeof e!="object"||e===null)throw new Error("argsText is expected to be an object");return e[$S]={state:"complete",partialPath:[]},e}catch{try{const[e,n]=IZe(t),r=m7.parse(e);if(typeof r!="object"||r===null)throw new Error("argsText is expected to be an object");return r[$S]={state:"partial",partialPath:n},r}catch{return}}},_le=(t,e,n)=>{if(typeof t!="object"||t===null)return e.state;if(e.state==="complete")return"complete";if(n.length===0)return e.state;const[r,...s]=n;if(!Object.prototype.hasOwnProperty.call(t,r))return"partial";const[a,...i]=e.partialPath;if(r!==a)return"complete";const o=t[r];return _le(o,{state:"partial",partialPath:i},s)},Yg=(t,e)=>{const n=OZe(t);if(!n)throw new Error("unable to determine object state");return _le(t,n,e.map(String))};async function*PZe(){const t=this.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{t.releaseLock()}}function rN(t){var e;return t[e=Symbol.asyncIterator]??(t[e]=PZe),t}var p7={toResponse(t,e){return new Response(p7.toByteStream(t,e),{headers:e.headers??{}})},fromResponse(t,e){return p7.fromByteStream(t.body,e)},toByteStream(t,e){return t.pipeThrough(e)},fromByteStream(t,e){return t.pipeThrough(e)}},jI=function(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});if(!t||!e)throw new Error("Failed to create promise");return{promise:n,resolve:t,reject:e}},FZe=()=>{const t=[];let e=!1,n,r;const s=i=>{i.promise||(i.promise=i.reader.read().then(({done:o,value:l})=>{i.promise=void 0,o?(t.splice(t.indexOf(i),1),e&&t.length===0&&n.close()):n.enqueue(l),r==null||r.resolve(),r=void 0}).catch(o=>{console.error(o),t.forEach(l=>{l.reader.cancel()}),t.length=0,n.error(o),r==null||r.reject(o),r=void 0}))};return{readable:new ReadableStream({start(i){n=i},pull(){return r=jI(),t.forEach(i=>{s(i)}),r.promise},cancel(){t.forEach(i=>{i.reader.cancel()}),t.length=0}}),isSealed(){return e},seal(){e=!0,t.length===0&&n.close()},addStream(i){if(e)throw new Error("Cannot add streams after the run callback has settled.");const o={reader:i.getReader()};t.push(o),s(o)},enqueue(i){this.addStream(new ReadableStream({start(o){o.enqueue(i),o.close()}}))}}},IG=class{constructor(t){Ie(this,"_controller");Ie(this,"_isClosed",!1);this._controller=t}append(t){return this._controller.enqueue({type:"text-delta",path:[],textDelta:t}),this}close(){this._isClosed||(this._isClosed=!0,this._controller.enqueue({type:"part-finish",path:[]}),this._controller.close())}},Tle=t=>new ReadableStream({start(e){var n;return(n=t.start)==null?void 0:n.call(t,new IG(e))},pull(e){var n;return(n=t.pull)==null?void 0:n.call(t,new IG(e))},cancel(e){var n;return(n=t.cancel)==null?void 0:n.call(t,e)}}),OG=()=>{let t;return[Tle({start(n){t=n}}),t]},PG=class{constructor(t){Ie(this,"_isClosed",!1);Ie(this,"_mergeTask");Ie(this,"_argsTextController");this._controller=t;const e=Tle({start:r=>{this._argsTextController=r}});let n=!1;this._mergeTask=e.pipeTo(new WritableStream({write:r=>{switch(r.type){case"text-delta":n=!0,this._controller.enqueue(r);break;case"part-finish":n||this._controller.enqueue({type:"text-delta",textDelta:"{}",path:[]}),this._controller.enqueue({type:"tool-call-args-text-finish",path:[]});break;default:throw new Error(`Unexpected chunk type: ${r.type}`)}}}))}get argsText(){return this._argsTextController}async setResponse(t){this._argsTextController.close(),await Promise.resolve(),this._controller.enqueue({type:"result",path:[],...t.artifact!==void 0?{artifact:t.artifact}:{},result:t.result,isError:t.isError??!1})}async close(){this._isClosed||(this._isClosed=!0,this._argsTextController.close(),await this._mergeTask,this._controller.enqueue({type:"part-finish",path:[]}),this._controller.close())}},BZe=t=>new ReadableStream({start(e){var n;return(n=t.start)==null?void 0:n.call(t,new PG(e))},pull(e){var n;return(n=t.pull)==null?void 0:n.call(t,new PG(e))},cancel(e){var n;return(n=t.cancel)==null?void 0:n.call(t,e)}}),LZe=()=>{let t;return[BZe({start(n){t=n}}),t]},Ale=class{constructor(){Ie(this,"value",-1)}up(){return++this.value}},zZe=class extends TransformStream{constructor(t){super({transform(e,n){n.enqueue({...e,path:[t,...e.path]})}})}};(class extends TransformStream{constructor(t){super({transform(e,n){const{path:[r,...s]}=e;if(t!==r)throw new Error(`Path mismatch: expected ${t}, got ${r}`);n.enqueue({...e,path:s})}})}});var $Ze=class extends TransformStream{constructor(t){const e=new Ale,n=new Map;super({transform(r,s){r.type==="part-start"&&r.path.length===0&&n.set(e.up(),t.up());const[a,...i]=r.path;if(a===void 0){s.enqueue(r);return}const o=n.get(a);if(o===void 0)throw new Error("Path not found");s.enqueue({...r,path:[o,...i]})}})}},Nle=class extends TransformStream{constructor(t){super();const e=t(super.readable);Object.defineProperty(this,"readable",{value:e,writable:!1})}},jle=class extends TransformStream{constructor(){const t=[];super({transform(e,n){if(e.type==="part-start"){if(e.path.length!==0){n.error(new Error("Nested parts are not supported"));return}t.push(e.part),n.enqueue(e);return}if(e.type==="text-delta"||e.type==="result"||e.type==="part-finish"||e.type==="tool-call-args-text-finish"){if(e.path.length!==1){n.error(new Error(`${e.type} chunks must have a path of length 1`));return}const r=e.path[0];if(r<0||r>=t.length){n.error(new Error(`Invalid path index: ${r}`));return}const s=t[r];n.enqueue({...e,meta:s});return}n.enqueue(e)}})}},Dle=kle("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),UZe=class Rle{constructor(e){Ie(this,"_state");Ie(this,"_parentId");this._state=e||{merger:FZe(),contentCounter:new Ale}}get __internal_isClosed(){return this._state.merger.isSealed()}__internal_getReadable(){return this._state.merger.readable}__internal_subscribeToClose(e){this._state.closeSubscriber=e}_addPart(e,n){this._state.append&&(this._state.append.controller.close(),this._state.append=void 0),this.enqueue({type:"part-start",part:e,path:[]}),this._state.merger.addStream(n.pipeThrough(new zZe(this._state.contentCounter.value)))}merge(e){this._state.merger.addStream(e.pipeThrough(new $Ze(this._state.contentCounter)))}appendText(e){var n;((n=this._state.append)==null?void 0:n.kind)!=="text"&&(this._state.append={kind:"text",controller:this.addTextPart()}),this._state.append.controller.append(e)}appendReasoning(e){var n;((n=this._state.append)==null?void 0:n.kind)!=="reasoning"&&(this._state.append={kind:"reasoning",controller:this.addReasoningPart()}),this._state.append.controller.append(e)}addTextPart(){const[e,n]=OG();return this._addPart({type:"text"},e),n}addReasoningPart(){const[e,n]=OG();return this._addPart({type:"reasoning"},e),n}addToolCallPart(e){const n=typeof e=="string"?{toolName:e}:e,r=n.toolName,s=n.toolCallId??Dle(),[a,i]=LZe();return this._addPart({type:"tool-call",toolName:r,toolCallId:s,...this._parentId&&{parentId:this._parentId}},a),n.argsText!==void 0&&(i.argsText.append(n.argsText),i.argsText.close()),n.args!==void 0&&(i.argsText.append(JSON.stringify(n.args)),i.argsText.close()),n.response!==void 0&&i.setResponse(n.response),i}appendSource(e){this._addPart({...e,...this._parentId&&{parentId:this._parentId}},new ReadableStream({start(n){n.enqueue({type:"part-finish",path:[]}),n.close()}}))}appendFile(e){this._addPart(e,new ReadableStream({start(n){n.enqueue({type:"part-finish",path:[]}),n.close()}}))}enqueue(e){this._state.merger.enqueue(e),e.type==="part-start"&&e.path.length===0&&this._state.contentCounter.up()}withParentId(e){const n=new Rle(this._state);return n._parentId=e,n}close(){var e,n,r,s;(n=(e=this._state.append)==null?void 0:e.controller)==null||n.close(),this._state.merger.seal(),(s=(r=this._state).closeSubscriber)==null||s.call(r)}};function HZe(t){const e=new UZe;return(async()=>{try{await t(e)}catch(r){throw e.__internal_isClosed||e.enqueue({type:"error",path:[],error:String(r)}),r}finally{e.__internal_isClosed||e.close()}})(),e.__internal_getReadable()}function Mle(){const{resolve:t,promise:e}=jI();let n;return[HZe(s=>(n=s,n.__internal_subscribeToClose(t),e)),n]}var VZe=class extends TransformStream{constructor(t,e,n){const[r,s]=Mle();let a;super({start(i){var o;return a=r.pipeTo(new WritableStream({write(l){i.enqueue(l)},abort(l){i.error(l)},close(){i.terminate()}})).catch(l=>{i.error(l)}),(o=t.start)==null?void 0:o.call(t,s)},transform(i){var o;return(o=t.transform)==null?void 0:o.call(t,i,s)},async flush(){var i;await((i=t.flush)==null?void 0:i.call(t,s)),s.close(),await a}},e,n)}},jw=(t,e,n)=>{const{role:r,id:s,createdAt:a,attachments:i,status:o,metadata:l}=t,u={id:s??e,createdAt:a??new Date},d=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content,f=({image:m,...g})=>m.match(/^data:image\/(png|jpeg|jpg|gif|webp);base64,(.*)$/)?{...g,image:m}:(console.warn("Invalid image data format detected"),null);if(r!=="user"&&(i!=null&&i.length))throw new Error("attachments are only supported for user messages");if(r!=="assistant"&&o)throw new Error("status is only supported for assistant messages");if(r!=="assistant"&&(l!=null&&l.steps))throw new Error("metadata.steps is only supported for assistant messages");switch(r){case"assistant":return{...u,role:r,content:d.map(m=>{const g=m.type;switch(g){case"text":case"reasoning":return m.text.trim().length===0?null:m;case"file":case"source":return m;case"image":return f(m);case"data":return m;case"tool-call":{const{parentId:x,messages:b,...C}=m,S={...C,toolCallId:m.toolCallId??`tool-${d0()}`,...x!==void 0&&{parentId:x},...b!==void 0&&{messages:b}};return m.args?{...S,args:m.args,argsText:m.argsText??JSON.stringify(m.args)}:{...S,args:u5(m.argsText??"")??{},argsText:m.argsText??""}}default:{const x=g;throw new Error(`Unsupported assistant message part type: ${x}`)}}}).filter(m=>!!m),status:o??n,metadata:{unstable_state:(l==null?void 0:l.unstable_state)??null,unstable_annotations:(l==null?void 0:l.unstable_annotations)??[],unstable_data:(l==null?void 0:l.unstable_data)??[],custom:(l==null?void 0:l.custom)??{},steps:(l==null?void 0:l.steps)??[],...(l==null?void 0:l.submittedFeedback)&&{submittedFeedback:l.submittedFeedback}}};case"user":return{...u,role:r,content:d.map(m=>{const g=m.type;switch(g){case"text":case"image":case"audio":case"file":return m;default:{const x=g;throw new Error(`Unsupported user message part type: ${x}`)}}}),attachments:i??[],metadata:{custom:(l==null?void 0:l.custom)??{}}};case"system":if(d.length!==1||d[0].type!=="text")throw new Error("System messages must have exactly one text message part.");return{...u,role:r,content:d,metadata:{custom:(l==null?void 0:l.custom)??{}}};default:{const m=r;throw new Error(`Unknown message role: ${m}`)}}},DI={fromArray:t=>{const e=t.map(n=>jw(n,d0(),Ele(!1,!1,!1,!1,void 0)));return{messages:e.map((n,r)=>({parentId:r>0?e[r-1].id:null,message:n}))}}},US=t=>t.next?US(t.next):"current"in t?t:null,qZe=class{constructor(t){Ie(this,"_value",null);this.func=t}get value(){return this._value===null&&(this._value=this.func()),this._value}dirty(){this._value=null}},Ile=class{constructor(){Ie(this,"messages",new Map);Ie(this,"head",null);Ie(this,"root",{children:[],next:null});Ie(this,"_messages",new qZe(()=>{var e;const t=new Array((((e=this.head)==null?void 0:e.level)??-1)+1);for(let n=this.head;n;n=n.prev)t[n.level]=n.current;return t}))}updateLevels(t,e){t.level=e;for(const n of t.children){const r=this.messages.get(n);r&&this.updateLevels(r,e+1)}}performOp(t,e,n){const r=e.prev??this.root,s=t??this.root;if(!(n==="relink"&&r===s)){if(n!=="link"&&(r.children=r.children.filter(a=>a!==e.current.id),r.next===e)){const a=r.children.at(-1),i=a?this.messages.get(a):null;if(i===void 0)throw new Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");r.next=i}if(n!=="cut"){for(let i=t;i;i=i.prev)if(i.current.id===e.current.id)throw new Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");s.children=[...s.children,e.current.id],(US(e)===this.head||s.next===null)&&(s.next=e),e.prev=t;const a=t?t.level+1:0;this.updateLevels(e,a)}}}get headId(){var t;return((t=this.head)==null?void 0:t.current.id)??null}getMessages(t){var r;if(t===void 0||t===((r=this.head)==null?void 0:r.current.id))return this._messages.value;const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(getMessages): Head message not found. This is likely an internal bug in assistant-ui.");const n=new Array(e.level+1);for(let s=e;s;s=s.prev)n[s.level]=s.current;return n}addOrUpdateMessage(t,e){const n=this.messages.get(e.id),r=t?this.messages.get(t):null;if(r===void 0)throw new Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(n){n.current=e,this.performOp(r,n,"relink"),this._messages.dirty();return}const s={prev:r,current:e,next:null,children:[],level:r?r.level+1:0};this.messages.set(e.id,s),this.performOp(r,s,"link"),this.head===r&&(this.head=s),this._messages.dirty()}getMessage(t){var n;const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:((n=e.prev)==null?void 0:n.current.id)??null,message:e.current,index:e.level}}appendOptimisticMessage(t,e){let n;do n=TZe();while(this.messages.has(n));return this.addOrUpdateMessage(t,jw(e,n,{type:"running"})),n}deleteMessage(t,e){const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.");const r=e===void 0?n.prev:e===null?null:this.messages.get(e);if(r===void 0)throw new Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(const s of n.children){const a=this.messages.get(s);if(!a)throw new Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(r,a,"relink")}this.performOp(null,n,"cut"),this.messages.delete(t),this.head===n&&(this.head=US(r??this.root)),this._messages.dirty()}getBranches(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");const{children:n}=e.prev??this.root;return n}switchToBranch(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");const n=e.prev??this.root;n.next=e,this.head=US(e),this._messages.dirty()}resetHead(t){if(t===null){this.clear();return}const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");if(e.children.length>0){const n=r=>{for(const s of r.children){const a=this.messages.get(s);a&&(n(a),this.messages.delete(s))}};n(e),e.children=[],e.next=null}this.head=e;for(let n=e;n;n=n.prev)n.prev&&(n.prev.next=n);this._messages.dirty()}clear(){this.messages.clear(),this.head=null,this.root={children:[],next:null},this._messages.dirty()}export(){var e,n;const t=[];for(const[,r]of this.messages)t.push({message:r.current,parentId:((e=r.prev)==null?void 0:e.current.id)??null});return{headId:((n=this.head)==null?void 0:n.current.id)??null,messages:t}}import({headId:t,messages:e}){var n;for(const{message:r,parentId:s}of e)this.addOrUpdateMessage(s,r);this.resetHead(t??((n=e.at(-1))==null?void 0:n.message.id)??null)}},IE=class{constructor(){Ie(this,"_subscriptions",new Set);Ie(this,"_connection")}get isConnected(){return!!this._connection}notifySubscribers(){for(const t of this._subscriptions)t()}_updateConnection(){var t;if(this._subscriptions.size>0){if(this._connection)return;this._connection=this._connect()}else(t=this._connection)==null||t.call(this),this._connection=void 0}subscribe(t){return this._subscriptions.add(t),this._updateConnection(),()=>{this._subscriptions.delete(t),this._updateConnection()}}},bc=Symbol("skip-update"),RI=class extends IE{constructor(e){super();Ie(this,"_previousStateDirty",!0);Ie(this,"_previousState");Ie(this,"getState",()=>{if(!this.isConnected||this._previousStateDirty){const e=this.binding.getState();e!==bc&&(this._previousState=e),this._previousStateDirty=!1}if(this._previousState===void 0)throw new Error("Entry not available in the store");return this._previousState});this.binding=e}get path(){return this.binding.path}_connect(){const e=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(e)}},$C=class{constructor(t,e){this._core=t,this._threadListBinding=e,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this),this.detach=this.detach.bind(this)}getState(){return this._core.getState()}switchTo(){const t=this._core.getState();return this._threadListBinding.switchToThread(t.id)}rename(t){const e=this._core.getState();return this._threadListBinding.rename(e.id,t)}archive(){const t=this._core.getState();return this._threadListBinding.archive(t.id)}unarchive(){const t=this._core.getState();return this._threadListBinding.unarchive(t.id)}delete(){const t=this._core.getState();return this._threadListBinding.delete(t.id)}initialize(){const t=this._core.getState();return this._threadListBinding.initialize(t.id)}generateTitle(){const t=this._core.getState();return this._threadListBinding.generateTitle(t.id)}unstable_on(t,e){let n=this._core.getState().isMain,r=this._core.getState().id;return this.subscribe(()=>{const s=this._core.getState(),a=s.isMain,i=s.id;n===a&&r===i||(n=a,r=i,!(t==="switched-to"&&!a)&&(t==="switched-away"&&a||e()))})}subscribe(t){return this._core.subscribe(t)}detach(){const t=this._core.getState();this._threadListBinding.detach(t.id)}__internal_getRuntime(){return this}};function GZe(t,e){if(t===void 0&&e===void 0)return!0;if(t===void 0||e===void 0)return!1;for(const n of Object.keys(t)){const r=t[n],s=e[n];if(!Object.is(r,s))return!1}return!0}var rc=class extends IE{constructor(e){super();Ie(this,"_previousState");Ie(this,"getState",()=>(this.isConnected||this._syncState(),this._previousState));this.binding=e;const n=e.getState();if(n===bc)throw new Error("Entry not available in the store");this._previousState=n}get path(){return this.binding.path}_syncState(){const e=this.binding.getState();return e===bc||GZe(e,this._previousState)?!1:(this._previousState=e,!0)}_connect(){const e=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(e)}},d5=Symbol("innerMessage"),h5=t=>t.content.filter(n=>n.type==="text").map(n=>n.text).join(`

`),Ole=class{constructor(t){this._core=t,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(t){return this._core.subscribe(t)}},Ple=class extends Ole{constructor(t,e){super(t),this._composerApi=e}remove(){const t=this._composerApi.getState();if(!t)throw new Error("Composer is not available");return t.removeAttachment(this.getState().id)}},WZe=class extends Ple{get source(){return"thread-composer"}},KZe=class extends Ple{get source(){return"edit-composer"}},YZe=class extends Ole{get source(){return"message"}constructor(t){super(t)}remove(){throw new Error("Message attachments cannot be removed")}},Fle=class extends IE{constructor(t){super(),this.config=t}getState(){return this.config.binding.getState()}outerSubscribe(t){return this.config.binding.subscribe(t)}_connect(){const t=()=>{this.notifySubscribers()};let e=this.config.binding.getState(),n=e==null?void 0:e.unstable_on(this.config.event,t);const r=()=>{var i;const a=this.config.binding.getState();a!==e&&(e=a,n==null||n(),n=(i=this.config.binding.getState())==null?void 0:i.unstable_on(this.config.event,t))},s=this.outerSubscribe(r);return()=>{s==null||s(),n==null||n()}}},Ble=Object.freeze([]),Lle=Object.freeze({}),XZe=t=>Object.freeze({type:"thread",isEditing:(t==null?void 0:t.isEditing)??!1,canCancel:(t==null?void 0:t.canCancel)??!1,isEmpty:(t==null?void 0:t.isEmpty)??!0,attachments:(t==null?void 0:t.attachments)??Ble,text:(t==null?void 0:t.text)??"",role:(t==null?void 0:t.role)??"user",runConfig:(t==null?void 0:t.runConfig)??Lle,attachmentAccept:(t==null?void 0:t.attachmentAccept)??"",value:(t==null?void 0:t.text)??""}),JZe=t=>Object.freeze({type:"edit",isEditing:(t==null?void 0:t.isEditing)??!1,canCancel:(t==null?void 0:t.canCancel)??!1,isEmpty:(t==null?void 0:t.isEmpty)??!0,text:(t==null?void 0:t.text)??"",role:(t==null?void 0:t.role)??"user",attachments:(t==null?void 0:t.attachments)??Ble,runConfig:(t==null?void 0:t.runConfig)??Lle,attachmentAccept:(t==null?void 0:t.attachmentAccept)??"",value:(t==null?void 0:t.text)??""}),zle=class{constructor(t){Ie(this,"_eventSubscriptionSubjects",new Map);this._core=t}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setText(t)}setRunConfig(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setRunConfig(t)}addAttachment(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.addAttachment(t)}reset(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.reset()}clearAttachments(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.clearAttachments()}send(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.send()}cancel(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.cancel()}setRole(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setRole(t)}subscribe(t){return this._core.subscribe(t)}unstable_on(t,e){let n=this._eventSubscriptionSubjects.get(t);return n||(n=new Fle({event:t,binding:this._core}),this._eventSubscriptionSubjects.set(t,n)),n.subscribe(e)}},QZe=class extends zle{constructor(e){const n=new RI({path:e.path,getState:()=>XZe(e.getState()),subscribe:r=>e.subscribe(r)});super({path:e.path,getState:()=>e.getState(),subscribe:r=>n.subscribe(r)});Ie(this,"_getState");this._getState=n.getState.bind(n),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"thread"}getState(){return this._getState()}getAttachmentByIndex(e){return new WZe(new rc({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:e},ref:`${this.path.ref}${this.path.ref}.attachments[${e}]`},getState:()=>{const r=this.getState().attachments[e];return r?{...r,source:"thread-composer"}:bc},subscribe:n=>this._core.subscribe(n)}),this._core)}},ZZe=class extends zle{constructor(e,n){const r=new RI({path:e.path,getState:()=>JZe(e.getState()),subscribe:s=>e.subscribe(s)});super({path:e.path,getState:()=>e.getState(),subscribe:s=>r.subscribe(s)});Ie(this,"_getState");this._beginEdit=n,this._getState=r.getState.bind(r),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"edit"}__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(e){return new KZe(new rc({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:e},ref:`${this.path.ref}${this.path.ref}.attachments[${e}]`},getState:()=>{const r=this.getState().attachments[e];return r?{...r,source:"edit-composer"}:bc},subscribe:n=>this._core.subscribe(n)}),this._core)}},eet=class HS{constructor(e=null){Ie(this,"_state");this._state=e}get state(){return this._state}append(e){this._state=e.reduce((n,r)=>HS.apply(n,r),this._state)}static apply(e,n){const r=n.type;switch(r){case"set":return HS.updatePath(e,n.path,()=>n.value);case"append-text":return HS.updatePath(e,n.path,s=>{if(typeof s!="string")throw new Error(`Expected string at path [${n.path.join(", ")}]`);return s+n.value});default:{const s=r;throw new Error(`Invalid operation type: ${s}`)}}}static updatePath(e,n,r){if(n.length===0)return r(e);if(e??(e={}),typeof e!="object")throw new Error(`Invalid path: [${n.join(", ")}]`);const[s,...a]=n;if(Array.isArray(e)){const o=Number(s);if(Number.isNaN(o))throw new Error(`Expected array index at [${n.join(", ")}]`);if(o>e.length||o<0)throw new Error("Insert array index out of bounds");const l=[...e];return l[o]=this.updatePath(l[o],a,r),l}const i={...e};return i[s]=this.updatePath(i[s],a,r),i}},tet=({unstable_state:t=null}={})=>({role:"assistant",status:{type:"running"},parts:[],get content(){return this.parts},metadata:{unstable_state:t,unstable_data:[],unstable_annotations:[],steps:[],custom:{}}}),OE=(t,e,n)=>{if(t.parts.length===0)throw new Error("No parts available to update.");if(e.path.length!==1)throw new Error("Nested paths are not supported yet.");const r=e.path[0],s=n(t.parts[r]);return{...t,parts:[...t.parts.slice(0,r),s,...t.parts.slice(r+1)],get content(){return this.parts}}},net=(t,e)=>{const n=e.part;if(n.type==="text"||n.type==="reasoning"){const r={type:n.type,text:"",status:{type:"running"},...n.parentId&&{parentId:n.parentId}};return{...t,parts:[...t.parts,r],get content(){return this.parts}}}else if(n.type==="tool-call"){const r={type:"tool-call",state:"partial-call",status:{type:"running",isArgsComplete:!1},toolCallId:n.toolCallId,toolName:n.toolName,argsText:"",args:{},...n.parentId&&{parentId:n.parentId}};return{...t,parts:[...t.parts,r],get content(){return this.parts}}}else if(n.type==="source"){const r={type:"source",sourceType:n.sourceType,id:n.id,url:n.url,...n.title?{title:n.title}:void 0,...n.parentId&&{parentId:n.parentId}};return{...t,parts:[...t.parts,r],get content(){return this.parts}}}else if(n.type==="file"){const r={type:"file",mimeType:n.mimeType,data:n.data};return{...t,parts:[...t.parts,r],get content(){return this.parts}}}else throw new Error(`Unsupported part type: ${n.type}`)},ret=(t,e)=>OE(t,e,n=>{if(n.type!=="tool-call")throw new Error("Last is not a tool call");return n.state!=="partial-call"?n:{...n,state:"call"}}),set=(t,e)=>OE(t,e,n=>({...n,status:{type:"complete",reason:"unknown"}})),aet=(t,e)=>OE(t,e,n=>{if(n.type==="text"||n.type==="reasoning")return{...n,text:n.text+e.textDelta};if(n.type==="tool-call"){const r=n.argsText+e.textDelta,s=u5(r)??n.args;return{...n,argsText:r,args:s}}else throw new Error("text-delta received but part is neither text nor tool-call")}),iet=(t,e)=>OE(t,e,n=>{if(n.type==="tool-call")return{...n,state:"result",...e.artifact!==void 0?{artifact:e.artifact}:{},result:e.result,isError:e.isError??!1,status:{type:"complete",reason:"stop"}};throw new Error("Result chunk received but part is not a tool-call")}),FG=(t,e)=>{var r,s;if(((r=t.status)==null?void 0:r.type)==="incomplete"&&((s=t.status)==null?void 0:s.reason)==="error")return t;const n=oet(e);return{...t,status:n}},oet=t=>t.finishReason==="tool-calls"?{type:"requires-action",reason:"tool-calls"}:t.finishReason==="stop"||t.finishReason==="unknown"?{type:"complete",reason:t.finishReason}:{type:"incomplete",reason:t.finishReason},cet=(t,e)=>({...t,metadata:{...t.metadata,unstable_annotations:[...t.metadata.unstable_annotations,...e.annotations]}}),uet=(t,e)=>({...t,metadata:{...t.metadata,unstable_data:[...t.metadata.unstable_data,...e.data]}}),det=(t,e)=>({...t,metadata:{...t.metadata,steps:[...t.metadata.steps,{state:"started",messageId:e.messageId}]}}),het=(t,e)=>{var s;const n=t.metadata.steps.slice(),r=n.length-1;return n.length>0&&((s=n[r])==null?void 0:s.state)==="started"?n[r]={...n[r],state:"finished",finishReason:e.finishReason,usage:e.usage,isContinued:e.isContinued}:n.push({state:"finished",messageId:Dle(),finishReason:e.finishReason,usage:e.usage,isContinued:e.isContinued}),{...t,metadata:{...t.metadata,steps:n}}},fet=(t,e)=>({...t,status:{type:"incomplete",reason:"error",error:e.error}}),met=(t,e)=>{const n=new eet(t.metadata.unstable_state);return n.append(e.operations),{...t,metadata:{...t.metadata,unstable_state:n.state}}},pet=t=>{let e=!1;return()=>{e||(e=!0,queueMicrotask(()=>{e=!1,t()}))}},get=class extends TransformStream{constructor({initialMessage:t,throttle:e,onError:n}={}){let r=t??tet(),s;const a=e?pet(()=>{s==null||s.enqueue(r)}):()=>{s==null||s.enqueue(r)};super({start(i){s=i},transform(i){const o=i.type;switch(o){case"part-start":r=net(r,i);break;case"tool-call-args-text-finish":r=ret(r,i);break;case"part-finish":r=set(r,i);break;case"text-delta":r=aet(r,i);break;case"result":r=iet(r,i);break;case"message-finish":r=FG(r,i);break;case"annotations":r=cet(r,i);break;case"data":r=uet(r,i);break;case"step-start":r=det(r,i);break;case"step-finish":r=het(r,i);break;case"error":r=fet(r,i),n==null||n(i.error);break;case"update-state":r=met(r,i);break;default:{const l=o;throw new Error(`Unsupported chunk type: ${l}`)}}a()},flush(i){var o,l;if(((o=r.status)==null?void 0:o.type)==="running"){const u=((l=r.parts)==null?void 0:l.some(d=>d.type==="tool-call"&&(d.state==="call"||d.state==="partial-call")&&d.result===void 0))??!1;r=FG(r,{finishReason:u?"tool-calls":"unknown"}),i.enqueue(r)}}})}},vet=class extends Nle{constructor(){super(t=>{const e=new VZe({transform(n,r){r.appendText(n)}});return t.pipeThrough(new TextDecoderStream).pipeThrough(e)})}},yet=class VS{constructor(e){this.readable=e,this.readable=e}static fromAssistantStream(e){return new VS(e.pipeThrough(new get))}async unstable_result(){let e;for await(const n of this)e=n;return e||{role:"assistant",status:{type:"complete",reason:"unknown"},parts:[],content:[],metadata:{unstable_state:null,unstable_data:[],unstable_annotations:[],steps:[],custom:{}}}}[Symbol.asyncIterator](){const e=this.readable.getReader();return{async next(){const{done:n,value:r}=await e.read();return n?{done:!0,value:void 0}:{done:!1,value:r}}}}tee(){const[e,n]=this.readable.tee();return[new VS(e),new VS(n)]}},BG=Symbol.for("aui.tool-response"),cf=class g7{constructor(e){Ie(this,"artifact");Ie(this,"result");Ie(this,"isError");e.artifact!==void 0&&(this.artifact=e.artifact),this.result=e.result,this.isError=e.isError??!1}get[BG](){return!0}static[Symbol.hasInstance](e){return typeof e=="object"&&e!==null&&BG in e}static toResponse(e){return e instanceof g7?e:new g7({result:e===void 0?"<no result>":e})}};function xet(t,e,n){try{const r=t();if(typeof r=="object"&&r!==null&&"then"in r)return r.then(e,n);e(r)}catch(r){n(r)}}function Dw(t,e){let n=t;for(const r of e){if(n==null)return;n=n[r]}return n}var bet=class{constructor(t,e,n){Ie(this,"resolve");Ie(this,"reject");Ie(this,"disposed",!1);Ie(this,"fieldPath");this.resolve=t,this.reject=e,this.fieldPath=n}update(t){if(!this.disposed)try{if(Yg(t,this.fieldPath)==="complete"){const e=Dw(t,this.fieldPath);e!==void 0&&(this.resolve(e),this.dispose())}}catch(e){this.reject(e),this.dispose()}}dispose(){this.disposed=!0}},LG=class{constructor(t,e){Ie(this,"controller");Ie(this,"disposed",!1);Ie(this,"fieldPath");this.controller=t,this.fieldPath=e}update(t){if(!this.disposed)try{const e=Dw(t,this.fieldPath);e!==void 0&&this.controller.enqueue(e),Yg(t,this.fieldPath)==="complete"&&(this.controller.close(),this.dispose())}catch(e){this.controller.error(e),this.dispose()}}dispose(){this.disposed=!0}},zG=class{constructor(t,e){Ie(this,"controller");Ie(this,"disposed",!1);Ie(this,"fieldPath");Ie(this,"lastValue");this.controller=t,this.fieldPath=e}update(t){var e;if(!this.disposed)try{const n=Dw(t,this.fieldPath);if(n!==void 0&&typeof n=="string"){const r=n.substring(((e=this.lastValue)==null?void 0:e.length)||0);this.lastValue=n,this.controller.enqueue(r)}Yg(t,this.fieldPath)==="complete"&&(this.controller.close(),this.dispose())}catch(n){this.controller.error(n),this.dispose()}}dispose(){this.disposed=!0}},$G=class{constructor(t,e){Ie(this,"controller");Ie(this,"disposed",!1);Ie(this,"fieldPath");Ie(this,"processedIndexes",new Set);this.controller=t,this.fieldPath=e}update(t){if(!this.disposed)try{const e=Dw(t,this.fieldPath);if(!Array.isArray(e))return;for(let n=0;n<e.length;n++)if(!this.processedIndexes.has(n)){const r=[...this.fieldPath,n];Yg(t,r)==="complete"&&(this.controller.enqueue(e[n]),this.processedIndexes.add(n))}Yg(t,this.fieldPath)==="complete"&&(this.controller.close(),this.dispose())}catch(e){this.controller.error(e),this.dispose()}}dispose(){this.disposed=!0}},wet=class{constructor(t){Ie(this,"argTextDeltas");Ie(this,"handles",new Set);Ie(this,"args",u5(""));this.argTextDeltas=t,this.processStream()}async processStream(){try{let t="";const e=this.argTextDeltas.getReader();for(;;){const{value:n,done:r}=await e.read();if(r)break;t+=n;const s=u5(t);if(s!==void 0){this.args=s;for(const a of this.handles)a.update(s)}}}catch(t){console.error("Error processing argument stream:",t);for(const e of this.handles)e.dispose()}}get(...t){return new Promise((e,n)=>{const r=new bet(e,n,t);if(this.args&&Yg(this.args,t)==="complete"){const s=Dw(this.args,t);if(s!==void 0){e(s);return}}this.handles.add(r),r.update(this.args)})}streamValues(...t){const e=t,n=new ReadableStream({start:r=>{const s=new LG(r,e);this.handles.add(s),s.update(this.args)},cancel:()=>{for(const r of this.handles)if(r instanceof LG){r.dispose(),this.handles.delete(r);break}}});return rN(n)}streamText(...t){const e=t,n=new ReadableStream({start:r=>{const s=new zG(r,e);this.handles.add(s),s.update(this.args)},cancel:()=>{for(const r of this.handles)if(r instanceof zG){r.dispose(),this.handles.delete(r);break}}});return rN(n)}forEach(...t){const e=t,n=new ReadableStream({start:r=>{const s=new $G(r,e);this.handles.add(s),s.update(this.args)},cancel:()=>{for(const r of this.handles)if(r instanceof $G){r.dispose(),this.handles.delete(r);break}}});return rN(n)}},Cet=class{constructor(t){this.promise=t}get(){return this.promise}},ket=class{constructor(){Ie(this,"args");Ie(this,"response");Ie(this,"writable");Ie(this,"resolve");Ie(this,"argsText","");Ie(this,"result",{get:async()=>(await this.response.get()).result});const t=new TransformStream;this.writable=t.writable,this.args=new wet(t.readable);const{promise:e,resolve:n}=jI();this.resolve=n,this.response=new Cet(e)}async appendArgsTextDelta(t){const e=this.writable.getWriter();try{await e.write(t)}catch(n){console.warn(n)}finally{e.releaseLock()}this.argsText+=t}setResponse(t){this.resolve(t)}},Eet=class extends Nle{constructor(t){const e=new Map,n=new Map;super(r=>{const s=new TransformStream({transform(a,i){switch((a.type!=="part-finish"||a.meta.type!=="tool-call")&&i.enqueue(a),a.type){case"part-start":if(a.part.type==="tool-call"){const l=new ket;n.set(a.part.toolCallId,l),t.streamCall({reader:l,toolCallId:a.part.toolCallId,toolName:a.part.toolName})}break;case"text-delta":{if(a.meta.type==="tool-call"){const l=a.meta.toolCallId,u=n.get(l);if(!u)throw new Error("No controller found for tool call");u.appendArgsTextDelta(a.textDelta)}break}case"result":{if(a.meta.type!=="tool-call")break;const{toolCallId:l}=a.meta,u=n.get(l);if(!u)throw new Error("No controller found for tool call");u.setResponse(new cf({result:a.result,artifact:a.artifact,isError:a.isError}));break}case"tool-call-args-text-finish":{if(a.meta.type!=="tool-call")break;const{toolCallId:l,toolName:u}=a.meta,d=n.get(l);if(!d)throw new Error("No controller found for tool call");let f=!1;const m=xet(()=>{var b;let g;try{g=m7.parse(d.argsText)}catch(C){throw new Error(`Function parameter parsing failed. ${JSON.stringify(C.message)}`)}const x=t.execute({toolCallId:l,toolName:u,args:g});return x!==void 0&&(f=!0,(b=t.onExecutionStart)==null||b.call(t,l,u)),x},g=>{var b;if(f&&((b=t.onExecutionEnd)==null||b.call(t,l,u)),g===void 0)return;const x=new cf({artifact:g.artifact,result:g.result,isError:g.isError});d.setResponse(x),i.enqueue({type:"result",path:a.path,...x})},g=>{var b;f&&((b=t.onExecutionEnd)==null||b.call(t,l,u));const x=new cf({result:String(g),isError:!0});d.setResponse(x),i.enqueue({type:"result",path:a.path,...x})});m&&e.set(l,m);break}case"part-finish":{if(a.meta.type!=="tool-call")break;const{toolCallId:l}=a.meta,u=e.get(l);u?u.then(()=>{e.delete(l),n.delete(l),i.enqueue(a)}):i.enqueue(a)}}},async flush(){await Promise.all(e.values())}});return r.pipeThrough(new jle).pipeThrough(s)})}},_et=t=>typeof t=="object"&&t!==null&&"~standard"in t&&t["~standard"].version===1;function Tet(t,e,n,r){const s=t==null?void 0:t[n.toolName];return!s||!s.execute?void 0:(async i=>{if(e.aborted)return new cf({result:"Tool execution was cancelled.",isError:!0});let o=i;if(_et(s.parameters)){let d=s.parameters["~standard"].validate(n.args);d instanceof Promise&&(d=await d),d.issues&&(o=s.experimental_onSchemaValidationError??(()=>{throw new Error(`Function parameter validation failed. ${JSON.stringify(d.issues)}`)}))}const l=new Promise(d=>{const f=()=>{queueMicrotask(()=>{queueMicrotask(()=>{d(new cf({result:"Tool execution was cancelled.",isError:!0}))})})};e.aborted?f():e.addEventListener("abort",f,{once:!0})}),u=(async()=>{const d=await o(n.args,{toolCallId:n.toolCallId,abortSignal:e,human:f=>r(n.toolCallId,f)});return cf.toResponse(d)})();return Promise.race([u,l])})(s.execute)}function Aet(t,e,n,r,s){var a,i;(i=(a=t==null?void 0:t[r.toolName])==null?void 0:a.streamCall)==null||i.call(a,n,{toolCallId:r.toolCallId,abortSignal:e,human:o=>s(r.toolCallId,o)})}function Net(t,e,n,r){const s=typeof t=="function"?t:()=>t,a=typeof e=="function"?e:()=>e;return new Eet({execute:i=>Tet(s(),a(),i,n),streamCall:({reader:i,...o})=>Aet(s(),a(),i,o,n),onExecutionStart:r==null?void 0:r.onExecutionStart,onExecutionEnd:r==null?void 0:r.onExecutionEnd})}var UG=class{constructor(t,e,n){this.contentBinding=t,this.messageApi=e,this.threadApi=n,this.__internal_bindMethods()}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.resumeToolCall=this.resumeToolCall.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(t){const e=this.contentBinding.getState();if(!e)throw new Error("Message part is not available");if(e.type!=="tool-call")throw new Error("Tried to add tool result to non-tool message part");if(!this.messageApi)throw new Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw new Error("Thread API is not available");const n=this.messageApi.getState();if(!n)throw new Error("Message is not available");const r=e.toolName,s=e.toolCallId,a=cf.toResponse(t);this.threadApi.getState().addToolResult({messageId:n.id,toolName:r,toolCallId:s,result:a.result,artifact:a.artifact,isError:a.isError})}resumeToolCall(t){const e=this.contentBinding.getState();if(!e)throw new Error("Message part is not available");if(e.type!=="tool-call")throw new Error("Tried to resume tool call on non-tool message part");if(!this.threadApi)throw new Error("Thread API is not available");const n=e.toolCallId;this.threadApi.getState().resumeToolCall({toolCallId:n,payload:t})}subscribe(t){return this.contentBinding.subscribe(t)}},f5=class extends IE{constructor(t){super(),this.binding=t}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(t){return this.binding.subscribe(t)}_connect(){const t=()=>{this.notifySubscribers()};let e=this.binding.getState(),n=e==null?void 0:e.subscribe(t);const r=()=>{var i;const a=this.binding.getState();a!==e&&(e=a,n==null||n(),n=(i=this.binding.getState())==null?void 0:i.subscribe(t),t())},s=this.outerSubscribe(r);return()=>{s==null||s(),n==null||n()}}},UC=Object.freeze({type:"complete"}),jet=(t,e,n)=>{if(t.role!=="assistant")return UC;if(n.type==="tool-call")return n.result?UC:t.status;const r=e===Math.max(0,t.content.length-1);return t.status.type==="requires-action"?UC:r?t.status:UC},HG=(t,e)=>{const n=t.content[e];if(!n)return bc;const r=jet(t,e,n);return Object.freeze({...n,[d5]:n[d5],status:r})},Det=class{constructor(t,e){Ie(this,"composer");Ie(this,"_getEditComposerRuntimeCore",()=>this._threadBinding.getState().getEditComposer(this._core.getState().id));this._core=t,this._threadBinding=e,this.composer=new ZZe(new f5({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:n=>this._threadBinding.subscribe(n)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id)),this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getMessagePartByIndex=this.getMessagePartByIndex.bind(this),this.getMessagePartByToolCallId=this.getMessagePartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}getState(){return this._core.getState()}reload(t={}){const e=this._getEditComposerRuntimeCore(),n=e??this._threadBinding.getState().composer,r=e??n,{runConfig:s=r.runConfig}=t,a=this._core.getState();if(a.role!=="assistant")throw new Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:a.parentId,sourceId:a.id,runConfig:s})}speak(){const t=this._core.getState();return this._threadBinding.getState().speak(t.id)}stopSpeaking(){var n;const t=this._core.getState();if(((n=this._threadBinding.getState().speech)==null?void 0:n.messageId)===t.id)this._threadBinding.getState().stopSpeaking();else throw new Error("Message is not being spoken")}submitFeedback({type:t}){const e=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:e.id,type:t})}switchToBranch({position:t,branchId:e}){const n=this._core.getState();if(e&&t)throw new Error("May not specify both branchId and position");if(!e&&!t)throw new Error("Must specify either branchId or position");const s=this._threadBinding.getState().getBranches(n.id);let a=e;if(t==="previous"?a=s[n.branchNumber-2]:t==="next"&&(a=s[n.branchNumber]),!a)throw new Error("Branch not found");this._threadBinding.getState().switchToBranch(a)}unstable_getCopyText(){return h5(this.getState())}subscribe(t){return this._core.subscribe(t)}getMessagePartByIndex(t){if(t<0)throw new Error("Message part index must be >= 0");return new UG(new rc({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.content[${t}]`,messagePartSelector:{type:"index",index:t}},getState:()=>HG(this.getState(),t),subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getMessagePartByToolCallId(t){return new UG(new rc({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(t)}]`,messagePartSelector:{type:"toolCallId",toolCallId:t}},getState:()=>{const e=this._core.getState(),n=e.content.findIndex(r=>r.type==="tool-call"&&r.toolCallId===t);return n===-1?bc:HG(e,n)},subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getAttachmentByIndex(t){return new YZe(new rc({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.attachments[${t}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:t}},getState:()=>{const e=this.getState().attachments,n=e==null?void 0:e[t];return n?{...n,source:"message"}:bc},subscribe:e=>this._core.subscribe(e)}))}},Ret=t=>({parentId:t.parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{},...t.stream?{stream:t.stream}:{}}),Met=t=>({parentId:t.parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{}}),Iet=(t,e)=>{var n,r;return typeof e=="string"?{createdAt:new Date,parentId:((n=t.at(-1))==null?void 0:n.id)??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:e}],attachments:[],metadata:{custom:{}}}:{createdAt:e.createdAt??new Date,parentId:e.parentId??((r=t.at(-1))==null?void 0:r.id)??null,sourceId:e.sourceId??null,role:e.role??"user",content:e.content,attachments:e.attachments??[],metadata:e.metadata??{custom:{}},runConfig:e.runConfig??{},startRun:e.startRun}},Oet=(t,e)=>{const n=t.messages.at(-1);return Object.freeze({threadId:e.id,metadata:e,capabilities:t.capabilities,isDisabled:t.isDisabled,isLoading:t.isLoading,isRunning:(n==null?void 0:n.role)!=="assistant"?!1:n.status.type==="running",messages:t.messages,state:t.state,suggestions:t.suggestions,extras:t.extras,speech:t.speech})},$le=class{constructor(t,e){Ie(this,"_threadBinding");Ie(this,"composer");Ie(this,"_eventSubscriptionSubjects",new Map);const n=new rc({path:t.path,getState:()=>Oet(t.getState(),e.getState()),subscribe:r=>{const s=t.subscribe(r),a=e.subscribe(r);return()=>{s(),a()}}});this._threadBinding={path:t.path,getState:()=>t.getState(),getStateState:()=>n.getState(),outerSubscribe:r=>t.outerSubscribe(r),subscribe:r=>t.subscribe(r)},this.composer=new QZe(new f5({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:r=>this._threadBinding.subscribe(r)})),this.__internal_bindMethods()}get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.unstable_loadExternalState=this.unstable_loadExternalState.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.reset=this.reset.bind(this),this.getMessageByIndex=this.getMessageByIndex.bind(this),this.getMessageById=this.getMessageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}getState(){return this._threadBinding.getStateState()}append(t){this._threadBinding.getState().append(Iet(this._threadBinding.getState().messages,t))}subscribe(t){return this._threadBinding.subscribe(t)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(t){const e=t===null||typeof t=="string"?{parentId:t}:t;return this._threadBinding.getState().startRun(Met(e))}unstable_resumeRun(t){return this._threadBinding.getState().resumeRun(Ret(t))}unstable_loadExternalState(t){this._threadBinding.getState().unstable_loadExternalState(t)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(t){this._threadBinding.getState().import(t)}reset(t){this._threadBinding.getState().reset(t)}getMessageByIndex(t){if(t<0)throw new Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:`${this.path.ref}${this.path.ref}.messages[${t}]`,messageSelector:{type:"index",index:t}},()=>{var r;const e=this._threadBinding.getState().messages,n=e[t];if(n)return{message:n,parentId:((r=e[t-1])==null?void 0:r.id)??null,index:t}})}getMessageById(t){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(t)}]`,messageSelector:{type:"messageId",messageId:t}},()=>this._threadBinding.getState().getMessageById(t))}_getMessageRuntime(t,e){return new Det(new rc({path:t,getState:()=>{var d;const{message:n,parentId:r,index:s}=e()??{},{messages:a,speech:i}=this._threadBinding.getState();if(!n||r===void 0||s===void 0)return bc;const l=this._threadBinding.getState().getBranches(n.id),u=n.metadata.submittedFeedback;return{...n,[d5]:n[d5],index:s,isLast:((d=a.at(-1))==null?void 0:d.id)===n.id,parentId:r,branchNumber:l.indexOf(n.id)+1,branchCount:l.length,speech:(i==null?void 0:i.messageId)===n.id?i:void 0,submittedFeedback:u}},subscribe:n=>this._threadBinding.subscribe(n)}),this._threadBinding)}unstable_on(t,e){let n=this._eventSubscriptionSubjects.get(t);return n||(n=new Fle({event:t,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(t,n)),n.subscribe(e)}},Pet=t=>({mainThreadId:t.mainThreadId,newThread:t.newThreadId,threads:t.threadIds,archivedThreads:t.archivedThreadIds,isLoading:t.isLoading,threadItems:t.threadData}),HC=(t,e)=>{if(e===void 0)return bc;const n=t.getItemById(e);return n?{id:n.id,threadId:n.id,remoteId:n.remoteId,externalId:n.externalId,title:n.title,status:n.status,isMain:n.id===t.mainThreadId}:bc},Fet=class{constructor(t,e=$le){Ie(this,"_getState");Ie(this,"_mainThreadListItemRuntime");Ie(this,"main");this._core=t,this._runtimeFactory=e;const n=new RI({path:{},getState:()=>Pet(t),subscribe:r=>t.subscribe(r)});this._getState=n.getState.bind(n),this._mainThreadListItemRuntime=new $C(new rc({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>HC(this._core,this._core.mainThreadId),subscribe:r=>this._core.subscribe(r)}),this._core),this.main=new e(new f5({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>t.getMainThreadRuntimeCore(),subscribe:r=>t.subscribe(r)}),this._mainThreadListItemRuntime),this.__internal_bindMethods()}__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(t){return this._core.switchToThread(t)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(t){return this._core.subscribe(t)}get mainItem(){return this._mainThreadListItemRuntime}getById(t){return new this._runtimeFactory(new f5({path:{ref:`threads[threadId=${JSON.stringify(t)}]`,threadSelector:{type:"threadId",threadId:t}},getState:()=>this._core.getThreadRuntimeCore(t),subscribe:e=>this._core.subscribe(e)}),this.mainItem)}getItemByIndex(t){return new $C(new rc({path:{ref:`threadItems[${t}]`,threadSelector:{type:"index",index:t}},getState:()=>HC(this._core,this._core.threadIds[t]),subscribe:e=>this._core.subscribe(e)}),this._core)}getArchivedItemByIndex(t){return new $C(new rc({path:{ref:`archivedThreadItems[${t}]`,threadSelector:{type:"archiveIndex",index:t}},getState:()=>HC(this._core,this._core.archivedThreadIds[t]),subscribe:e=>this._core.subscribe(e)}),this._core)}getItemById(t){return new $C(new rc({path:{ref:`threadItems[threadId=${t}]`,threadSelector:{type:"threadId",threadId:t}},getState:()=>HC(this._core,t),subscribe:e=>this._core.subscribe(e)}),this._core)}},Bet=t=>t.startsWith("image/")?"image":t.startsWith("text/")?"document":"file",Let=class{constructor(t){Ie(this,"accept","*");Ie(this,"uploadedUrls",new Map);this.cloud=t}async*add({file:t}){const e=crypto.randomUUID(),n=Bet(t.type);let r={id:e,type:n,name:t.name,contentType:t.type,file:t,status:{type:"running",reason:"uploading",progress:0}};yield r;try{const{signedUrl:s,publicUrl:a}=await this.cloud.files.generatePresignedUploadUrl({filename:t.name});await fetch(s,{method:"PUT",body:t,headers:{"Content-Type":t.type},mode:"cors"}),this.uploadedUrls.set(e,a),r={...r,status:{type:"requires-action",reason:"composer-send"}},yield r}catch{r={...r,status:{type:"incomplete",reason:"error"}},yield r}}async remove(t){this.uploadedUrls.delete(t.id)}async send(t){const e=this.uploadedUrls.get(t.id);if(!e)throw new Error("Attachment not uploaded");this.uploadedUrls.delete(t.id);let n;return t.type==="image"?n=[{type:"image",image:e,filename:t.name}]:n=[{type:"file",data:e,mimeType:t.contentType,filename:t.name}],{...t,status:{type:"complete"},content:n}}},v7=y.createContext(null),Ule=({adapters:t,children:e})=>{const n=y.useContext(v7);return c.jsx(v7.Provider,{value:{...n,...t},children:e})},zet=()=>y.useContext(v7),$et=class extends Cle{constructor(e,n,{parentId:r,message:s}){super();Ie(this,"_nonTextParts");Ie(this,"_previousText");Ie(this,"_parentId");Ie(this,"_sourceId");this.runtime=e,this.endEditCallback=n,this._parentId=r,this._sourceId=s.id,this._previousText=h5(s),this.setText(this._previousText),this.setRole(s.role),this.setAttachments(s.attachments??[]),this._nonTextParts=s.content.filter(a=>a.type!=="text"),this.setRunConfig({...e.composer.runConfig})}get canCancel(){return!0}getAttachmentAdapter(){var e;return(e=this.runtime.adapters)==null?void 0:e.attachments}async handleSend(e){h5(e)!==this._previousText&&this.runtime.append({...e,content:[...e.content,...this._nonTextParts],parentId:this._parentId,sourceId:this._sourceId}),this.handleCancel()}handleCancel(){this.endEditCallback(),this._notifySubscribers()}},Uet=class{constructor(t){Ie(this,"_subscriptions",new Set);Ie(this,"_isInitialized",!1);Ie(this,"repository",new Ile);Ie(this,"composer",new Sle(this));Ie(this,"_editComposers",new Map);Ie(this,"_stopSpeaking");Ie(this,"speech");Ie(this,"_eventSubscribers",new Map);this._contextProvider=t}get messages(){return this.repository.getMessages()}get state(){let t;for(const e of this.messages)if(e.role==="assistant"){t=e;break}return(t==null?void 0:t.metadata.unstable_state)??null}getModelContext(){return this._contextProvider.getModelContext()}getEditComposer(t){return this._editComposers.get(t)}beginEdit(t){if(this._editComposers.has(t))throw new Error("Edit already in progress");this._editComposers.set(t,new $et(this,()=>this._editComposers.delete(t),this.repository.getMessage(t))),this._notifySubscribers()}getMessageById(t){try{return this.repository.getMessage(t)}catch{return}}getBranches(t){return this.repository.getBranches(t)}switchToBranch(t){this.repository.switchToBranch(t),this._notifySubscribers()}_notifySubscribers(){for(const t of this._subscriptions)t()}_notifyEventSubscribers(t){const e=this._eventSubscribers.get(t);if(e)for(const n of e)n()}subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}submitFeedback({messageId:t,type:e}){var a;const n=(a=this.adapters)==null?void 0:a.feedback;if(!n)throw new Error("Feedback adapter not configured");const{message:r,parentId:s}=this.repository.getMessage(t);if(n.submit({message:r,type:e}),r.role==="assistant"){const i={...r,metadata:{...r.metadata,submittedFeedback:{type:e}}};this.repository.addOrUpdateMessage(s,i)}this._notifySubscribers()}speak(t){var a,i;const e=(a=this.adapters)==null?void 0:a.speech;if(!e)throw new Error("Speech adapter not configured");const{message:n}=this.repository.getMessage(t);(i=this._stopSpeaking)==null||i.call(this);const r=e.speak(h5(n)),s=r.subscribe(()=>{r.status.type==="ended"?(this._stopSpeaking=void 0,this.speech=void 0):this.speech={messageId:t,status:r.status},this._notifySubscribers()});this.speech={messageId:t,status:r.status},this._notifySubscribers(),this._stopSpeaking=()=>{r.cancel(),s(),this.speech=void 0,this._stopSpeaking=void 0}}stopSpeaking(){if(!this._stopSpeaking)throw new Error("No message is being spoken");this._stopSpeaking(),this._notifySubscribers()}ensureInitialized(){this._isInitialized||(this._isInitialized=!0,this._notifyEventSubscribers("initialize"))}export(){return this.repository.export()}import(t){this.ensureInitialized(),this.repository.clear(),this.repository.import(t),this._notifySubscribers()}reset(t){this.import(DI.fromArray(t??[]))}unstable_on(t,e){var r,s;if(t==="model-context-update")return((s=(r=this._contextProvider).subscribe)==null?void 0:s.call(r,e))??(()=>{});const n=this._eventSubscribers.get(t);return n?n.add(e):this._eventSubscribers.set(t,new Set([e])),()=>{this._eventSubscribers.get(t).delete(e)}}},Het=t=>{try{return JSON.parse(t),!0}catch{return!1}};function Vet({state:t,getTools:e,onResult:n,setToolStatuses:r}){const s=y.useRef({}),a=y.useRef(new Map),i=y.useRef(new AbortController),o=y.useRef(0),l=y.useRef([]),[u]=y.useState(()=>{const[g,x]=Mle(),b=Net(e,()=>{var C;return((C=i.current)==null?void 0:C.signal)??new AbortController().signal},(C,S)=>new Promise((w,E)=>{const T=a.current.get(C);T&&T.reject(new Error("Human input request was superseded by a new request")),a.current.set(C,{resolve:w,reject:E}),r(_=>({..._,[C]:{type:"interrupt",payload:{type:"human",payload:S}}}))}),{onExecutionStart:C=>{o.current++,r(S=>({...S,[C]:{type:"executing"}}))},onExecutionEnd:C=>{o.current--,r(S=>{const w={...S};return delete w[C],w}),o.current===0&&(l.current.forEach(S=>S()),l.current=[])}});return g.pipeThrough(b).pipeThrough(new jle).pipeTo(new WritableStream({write(C){var S;if(C.type==="result"){if((S=s.current[C.meta.toolCallId])!=null&&S.hasResult)return;n({type:"add-tool-result",toolCallId:C.meta.toolCallId,toolName:C.meta.toolName,result:C.result,isError:C.isError,...C.artifact&&{artifact:C.artifact}})}}})),x}),d=y.useRef(new Set),f=y.useRef(!0);y.useEffect(()=>{const g=x=>{x.forEach(b=>{b.content.forEach(C=>{if(C.type==="tool-call"){if(f.current)d.current.add(C.toolCallId);else{if(d.current.has(C.toolCallId))return;let S=s.current[C.toolCallId];if(S||(S={argsText:"",hasResult:!1,argsComplete:!1,controller:u.addToolCallPart({toolName:C.toolName,toolCallId:C.toolCallId})},s.current[C.toolCallId]=S),C.argsText!==S.argsText&&!S.argsComplete){if(!C.argsText.startsWith(S.argsText))throw new Error(`Tool call argsText can only be appended, not updated: ${C.argsText} does not start with ${S.argsText}`);const w=C.argsText.slice(S.argsText.length);S.controller.argsText.append(w);const E=Het(C.argsText);E&&S.controller.argsText.close(),s.current[C.toolCallId]={argsText:C.argsText,hasResult:S.hasResult,argsComplete:E,controller:S.controller}}C.result!==void 0&&!S.hasResult&&(S.controller.setResponse(new cf({result:C.result,artifact:C.artifact,isError:C.isError})),S.controller.close(),s.current[C.toolCallId]={hasResult:!0,argsComplete:!0,argsText:S.argsText,controller:S.controller})}C.messages&&g(C.messages)}})})};g(t.messages),f.current&&(f.current=!1)},[t,u,n]);const m=()=>(a.current.forEach(({reject:g})=>{g(new Error("Tool execution aborted"))}),a.current.clear(),i.current.abort(),i.current=new AbortController,o.current===0?Promise.resolve():new Promise(g=>{l.current.push(g)}));return{reset:()=>{m(),f.current=!0},abort:m,resume:(g,x)=>{const b=a.current.get(g);if(b)a.current.delete(g),r(C=>({...C,[g]:{type:"executing"}})),b.resolve(x);else throw new Error(`Tool call ${g} is not waiting for human input`)}}}var qet=class{list(){return Promise.resolve({threads:[]})}rename(){return Promise.resolve()}archive(){return Promise.resolve()}unarchive(){return Promise.resolve()}delete(){return Promise.resolve()}initialize(t){return Promise.resolve({remoteId:t,externalId:void 0})}generateTitle(){return Promise.resolve(new ReadableStream)}fetch(t){return Promise.reject(new Error("Thread not found"))}};function Get(t,e){t.commitTasks.forEach(n=>{const r=n.cellIndex,s=e.cells[r];if(s.type!=="effect")throw new Error("Cannot find effect cell");let a=!0;if(s.deps!==void 0&&n.deps!==void 0&&(a=s.deps.length!==n.deps.length||s.deps.some((i,o)=>!Object.is(i,n.deps[o]))),a){if(s.mounted){if(typeof s.deps!=typeof n.deps)throw new Error("tapEffect called with and without dependencies across re-renders");try{s.mounted&&s.cleanup&&s.cleanup()}finally{s.mounted=!1}}const i=n.effect();if(i!==void 0&&typeof i!="function")throw new Error(`An effect function must either return a cleanup function or nothing. Received: ${typeof i}`);s.mounted=!0,s.cleanup=typeof i=="function"?i:void 0,s.deps=n.deps}})}function Wet(t){let e=null;for(let n=t.cells.length-1;n>=0;n--){const r=t.cells[n];if((r==null?void 0:r.type)==="effect"&&r.mounted&&r.cleanup)try{r.cleanup()}catch(s){e==null&&(e=s)}finally{r.mounted=!1}}if(e!=null)throw e}var e1=null;function Ket(t,e){t.currentIndex=0;const n=e1;e1=t;try{if(e(),t.isFirstRender=!1,t.cells.length!==t.currentIndex)throw new Error(`Rendered ${t.currentIndex} hooks but expected ${t.cells.length}. Hooks must be called in the exact same order in every render.`)}finally{e1=n}}function MI(){if(!e1)throw new Error("No resource fiber available");return e1}function Hle(t,e){const n=t[Vle];if(!n)throw new Error("ResourceElement.type is not a valid Resource");return n(e)}var Vle=Symbol("fnSymbol");function PE(t,e){return{resource:t,scheduleRerender:e,cells:[],currentIndex:0,renderContext:void 0,isFirstRender:!0,isMounted:!1,isNeverMounted:!0}}function cb(t){t.isMounted=!1,Wet(t)}function ub(t,e){const n={commitTasks:[],props:e,state:void 0};return Ket(t,()=>{t.renderContext=n;try{n.state=Hle(t.resource,e)}finally{t.renderContext=void 0}}),n}function db(t,e){t.isMounted=!0,t.isNeverMounted=!1,Get(e,t)}var Yet=globalThis.__ASSISTANT_UI_DISABLE_LAYOUT_EFFECT__===!0,VG=Yet?y.useEffect:y.useLayoutEffect;function II(t){const[,e]=y.useState({}),n=y.useMemo(()=>PE(t.type,()=>e({})),[t.type]),r=ub(n,t.props);return VG(()=>()=>cb(n),[n]),VG(()=>{db(n,r)}),r.state}var Vv=t=>typeof t=="string"?{scope:t.split(".")[0],event:t}:{scope:t.scope,event:t.event},Xm=(t,e,n)=>e===t,Fp,sN=()=>{if(Fp)return Fp;const t=()=>({apis:new Map,nextId:0,listeners:new Set});if(typeof window>"u")return Fp=t(),Fp;const e=window.__ASSISTANT_UI_DEVTOOLS_HOOK__;if(e)return Fp=e,e;const n=t();return window.__ASSISTANT_UI_DEVTOOLS_HOOK__=n,Fp=n,n},Zl,Xet=(Zl=class{static register(e){var o,l;const n=sN();for(const u of n.apis.values())if(u.api===e)return()=>{};const r=n.nextId++,s={api:e,logs:[]},a=(o=e.on)==null?void 0:o.call(e,"*",u=>{const d=n.apis.get(r);d&&(d.logs.push({time:new Date,event:u.event,data:u.payload}),d.logs.length>Zl.MAX_EVENT_LOGS_PER_API&&(d.logs=d.logs.slice(-200)),Zl.notifyListeners(r))}),i=(l=e.subscribe)==null?void 0:l.call(e,()=>{Zl.notifyListeners(r)});return n.apis.set(r,s),Zl.notifyListeners(r),()=>{const u=sN();u.apis.get(r)&&(a==null||a(),i==null||i(),u.apis.delete(r),Zl.notifyListeners(r))}}static notifyListeners(e){sN().listeners.forEach(r=>r(e))}},Ie(Zl,"MAX_EVENT_LOGS_PER_API",200),Zl);function xs(t){const e=n=>({type:e,props:n});return e[Vle]=t,e}var Jet=t=>{if(t.renderContext)throw new Error("Resource updated during render");if(t.isMounted)t.scheduleRerender();else if(t.isNeverMounted)throw new Error("Resource updated before mount")};function Qet(t){const e=MI(),n=e.currentIndex++;if(!e.isFirstRender&&n>=e.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!e.cells[n]){const a={type:"state",value:typeof t=="function"?t():t,set:i=>{const o=a.value,l=typeof i=="function"?i(o):i;Object.is(o,l)||(a.value=l,Jet(e))}};e.cells[n]=a}const r=e.cells[n];if(r.type!=="state")throw new Error("Hook order changed between renders");return r}function Cu(t){const e=Qet(t);return[e.value,e.set]}function Zet(){const t=MI(),e=t.currentIndex++;if(!t.isFirstRender&&e>=t.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!t.cells[e]){const r={type:"effect",mounted:!1};t.cells[e]=r}if(t.cells[e].type!=="effect")throw new Error("Hook order changed between renders");return e}function Ii(t,e){const n=MI(),r=Zet();n.renderContext.commitTasks.push({effect:t,deps:e,cellIndex:r})}function Xg(t){const[e]=Cu(()=>({current:t}));return e}var ett=(t,e)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0},gr=(t,e)=>{const n=Xg();return n.current||(n.current={value:t(),deps:e}),ett(n.current.deps,e)||(n.current.value=t(),n.current.deps=e),n.current.value},ttt=(t,e)=>gr(()=>t,e);function t1(t,e){const[n,r]=Cu({}),s=gr(()=>PE(t.type,()=>r({})),[t.type]),a=e?gr(()=>t.props,e):t.props,i=gr(()=>ub(s,a),[s,a,n]);return Ii(()=>()=>cb(s),[s]),Ii(()=>{db(s,i)},[s,i]),i.state}function Du(t){return Hle(t.type,t.props)}function qle(t,e,n){const[r,s]=Cu(0),a=ttt(()=>s(u=>u+1),[]),[i]=Cu(()=>new Map),o=gr(()=>e,n),l=gr(()=>{const u={remove:[],add:[],commit:[],return:{}};for(const d in t){const f=t[d],m=o(f,d);let g=i.get(d);(!g||g.resource!==m.type)&&(g&&u.remove.push(d),g=PE(m.type,a),u.add.push([d,g]));const x=ub(g,m.props);u.commit.push([d,x]),u.return[d]=x.state}if(i.size>u.commit.length-u.add.length+u.remove.length)for(const d of i.keys())d in t||u.remove.push(d);return u},[t,o,r]);return Ii(()=>()=>{for(const u of i.keys())cb(i.get(u)),i.delete(u)},[]),Ii(()=>{for(const u of l.remove)cb(i.get(u)),i.delete(u);for(const[u,d]of l.add)i.set(u,d);for(const[u,d]of l.commit)db(i.get(u),d)},[l]),l.return}var ntt=50,ru={schedulers:new Set([]),isScheduled:!1},rtt=class{constructor(t){Ie(this,"_isDirty",!1);this._task=t}get isDirty(){return this._isDirty}markDirty(){this._isDirty=!0,ru.schedulers.add(this),stt()}runTask(){this._isDirty=!1,this._task()}},stt=()=>{ru.isScheduled||(ru.isScheduled=!0,queueMicrotask(Gle))},Gle=()=>{try{const t=[];let e=0;for(const n of ru.schedulers)if(ru.schedulers.delete(n),!!n.isDirty){if(e++,e>ntt)throw new Error("Maximum update depth exceeded. This can happen when a resource repeatedly calls setState inside tapEffect.");try{n.runTask()}catch(r){t.push(r)}}if(t.length>0)throw t.length===1?t[0]:new AggregateError(t,"Errors occurred during flushSync")}finally{ru.schedulers.clear(),ru.isScheduled=!1}},y7=t=>{const e=ru;ru={schedulers:new Set([]),isScheduled:!0};try{const n=t();return Gle(),n}finally{ru=e}},att=xs(t=>{const[,e]=Cu(t.element),n=t1(t.element),r=Xg(new Set).current,s=Xg(n);return Ii(()=>{n!==s.current&&(s.current=n,r.forEach(i=>i()))}),gr(()=>({getState:()=>s.current,subscribe:i=>(r.add(i),()=>r.delete(i)),render:i=>{const o=t.element!==i;t.element=i,t.onRender(o)&&e(i)},unmount:t.onUnmount}),[])}),itt=(t,{mount:e=!0}={})=>{let n=e,r;const s={element:t,onRender:o=>n?o:(n=!0,y7(()=>{o&&(r=ub(i,s)),!a.isDirty&&db(i,r)}),!1),onUnmount:()=>{if(!n)throw new Error("Resource not mounted");n=!1,cb(i)}},a=new rtt(()=>{r=ub(i,s),!(a.isDirty||!n)&&db(i,r)}),i=PE(att,()=>a.markDirty());return y7(()=>{a.markDirty()}),r.state},n1=Symbol("tap.Context"),Wle=t=>({[n1]:t}),Kle=(t,e,n)=>{const r=t[n1];t[n1]=e;try{return n()}finally{t[n1]=r}},Yle=t=>t[n1];const qG=t=>{let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const m=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,m))}},s=()=>e,o={setState:r,getState:s,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(r,s,o);return o},ott=(t=>t?qG(t):qG),ltt=t=>t;function ctt(t,e=ltt){const n=Ce.useSyncExternalStore(t.subscribe,Ce.useCallback(()=>e(t.getState()),[t,e]),Ce.useCallback(()=>e(t.getInitialState()),[t,e]));return Ce.useDebugValue(n),n}const GG=t=>{const e=ott(t),n=r=>ctt(e,r);return Object.assign(n,e),n},Jg=(t=>t?GG(t):GG);var Xle=xs(t=>{const e=gr(()=>itt(t,{mount:!1}),[t.type]);return Ii(()=>{e.render(t)}),e}),utt=class{constructor(t){this.ref=t}get(t,e){return this.ref.current[e]}ownKeys(){return Object.keys(this.ref.current)}has(t,e){return e in this.ref.current}getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(this.ref.current,e)}set(){return!1}setPrototypeOf(){return!1}defineProperty(){return!1}deleteProperty(){return!1}preventExtensions(){return!1}},Ac=(t,e)=>{const n=Xg(t);Ii(()=>{n.current=t});const r=gr(()=>new Proxy({},new utt(n)),[]),s=e==null?void 0:e.key,a=t.getState();return gr(()=>({key:s,state:a,api:r}),[a,s])},Qg=xs(t=>{const e=Xg(t.get);return Ii(()=>{e.current=t.get}),gr(()=>si({source:t.source,query:t.query,get:()=>e.current()}),[t.source,JSON.stringify(t.query)])}),dtt=xs(t=>{const e=t1(t.scopeElement);return gr(()=>[t.fieldName,e],[t.fieldName,e])}),htt=xs(t=>{const{on:e,subscribe:n,...r}=t,s=Xg({on:e,subscribe:n});Ii(()=>{s.current={on:e,subscribe:n}});const a=qle(r,(i,o)=>dtt({fieldName:o,scopeElement:i}),[]);return gr(()=>{const i=Object.fromEntries(Object.values(a)),{on:o,subscribe:l}=s.current;return o&&(i.on=(u,d)=>o(u,d)),l&&(i.subscribe=u=>l(u)),i},[a])}),Jle=Wle(null),ftt=(t,e)=>Kle(Jle,t,e),Qle=()=>{const t=Yle(Jle);if(!t)throw new Error("Model context is not available in this context");return t},mtt=xs(({toolkit:t})=>{const[e,n]=Cu(()=>({tools:{}})),r=Qle();Ii(()=>{if(!t)return;const a=[];for(const[l,u]of Object.entries(t))u.render&&a.push(s(l,u.render));const i=Object.entries(t).reduce((l,[u,d])=>{const{render:f,...m}=d;return l[u]=m,l},{}),o={getModelContext:()=>({tools:i})};return a.push(r.register(o)),()=>{a.forEach(l=>l())}},[t,r]);const s=(a,i)=>(n(o=>({...o,tools:{...o.tools,[a]:[...o.tools[a]??[],i]}})),()=>{n(o=>{var l;return{...o,tools:{...o.tools,[a]:((l=o.tools[a])==null?void 0:l.filter(u=>u!==i))??[]}}})});return Ac({getState:()=>e,setToolUI:s})}),ptt=xs(()=>gr(()=>{const e=new Map;return{on:(n,r)=>{e.has(n)||e.set(n,new Set);const s=e.get(n);return s.add(r),()=>{s.delete(r),s.size===0&&e.delete(n)}},emit:(n,r)=>{const s=e.get(n),a=e.get("*");!s&&!a||queueMicrotask(()=>{if(s)for(const i of s)i(r);if(a)for(const i of a)i({event:n,payload:r})})}}},[])),Zle=Wle(null),gtt=(t,e)=>Kle(Zle,t,e),OI=()=>{const t=Yle(Zle);if(!t)throw new Error("Events context is not available");return t},vtt=xs(()=>{const[t]=Cu(()=>({})),e=new AI;return Ac({getState:()=>t,getModelContext:()=>e.getModelContext(),subscribe:n=>e.subscribe(n),register:n=>e.registerModelContextProvider(n)})}),ytt=xs(({threads:t,modelContext:e,tools:n})=>{const r=Du(ptt()),{threads:s,tools:a,modelContext:i}=gtt(r,()=>{const l=t1(e??vtt(),[e]);return ftt(l.api,()=>({modelContext:l,tools:t1(n??mtt({}),[n]),threads:t1(t,[t])}))}),o=gr(()=>({threads:s.state,tools:a.state,modelContext:i.state}),[s.state,a.state,i.state]);return Ac({getState:()=>o,threads:s.api,tools:a.api,modelContext:i.api,on:r.on})}),xtt=t=>{const e=()=>t.getState().api.threads.item("main");return{threads:si({source:"root",query:{},get:()=>t.getState().api.threads}),tools:si({source:"root",query:{},get:()=>t.getState().api.tools}),modelContext:si({source:"root",query:{},get:()=>t.getState().api.modelContext}),thread:si({source:"threads",query:{type:"main"},get:()=>t.getState().api.threads.thread("main")}),threadListItem:si({source:"threads",query:{type:"main"},get:()=>e()}),composer:si({source:"thread",query:{},get:()=>t.getState().api.threads.thread("main").composer}),on(n,r){const{event:s,scope:a}=Vv(n);if(a==="*")return t.getState().api.on(s,r);if(Xm("thread",a)||Xm("thread-list-item",a)||Xm("composer",a))return t.getState().api.on(s,i=>{i.threadId===e().getState().id&&r(i)});throw new Error(`Event scope is not available in this component: ${a}`)},subscribe:t.subscribe}},btt=t=>{const e=FE(),n=II(Xle(ytt(t))),r=y.useMemo(()=>xtt(n),[n]);return y.useMemo(()=>tce(e,r),[e,r])},si=t=>{const e=t.get;return e.source=t.source,e.query=t.query,e},m5=()=>()=>{},ece=y.createContext({threads:si({source:null,query:{},get:()=>{throw new Error("Threads is only available inside <AssistantProvider />")}}),tools:si({source:null,query:{},get:()=>{throw new Error("Tools is only available inside <AssistantProvider />")}}),modelContext:si({source:null,query:{},get:()=>{throw new Error("ModelContext is only available inside <AssistantProvider />")}}),threadListItem:si({source:null,query:{},get:()=>{throw new Error("ThreadListItem is only available inside <AssistantProvider />")}}),thread:si({source:null,query:{},get:()=>{throw new Error("Thread is only available inside <AssistantProvider />")}}),composer:si({source:null,query:{},get:()=>{throw new Error("Composer is only available inside <AssistantProvider />")}}),message:si({source:null,query:{},get:()=>{throw new Error("Message is only available inside <ThreadPrimitive.Messages />")}}),part:si({source:null,query:{},get:()=>{throw new Error("Part is only available inside <MessagePrimitive.Parts />")}}),attachment:si({source:null,query:{},get:()=>{throw new Error("Attachment is only available inside <MessagePrimitive.Attachments /> or <ComposerPrimitive.Attachments />")}}),subscribe:m5,on:t=>{const{scope:e}=Vv(t);throw new Error(`Event scope is not available in this component: ${e}`)}}),FE=()=>y.useContext(ece),Rw=t=>{const e=FE(),n=II(htt(t));return y.useMemo(()=>tce(e,n),[e,n])},wtt=t=>btt(t);function ls(t){return t?wtt(t):FE()}var Ctt=(t,e)=>t===m5?e:e===m5?t:(...n)=>{const r=t(...n),s=e(...n);return()=>{r(),s()}},tce=(t,e)=>{const n=e.subscribe;return{...t,...e,subscribe:Ctt(t.subscribe,n??m5)}},qv=({api:t,children:e,devToolsVisible:n=!0})=>(y.useEffect(()=>{if(!(!n||!t.subscribe))return Xet.register(t)},[t,n]),c.jsx(ece.Provider,{value:t,children:e})),ml,eX,WG=(eX=class{constructor(t){lm(this,ml);cm(this,ml,t)}get threads(){return qa(this,ml).threads().getState()}get tools(){return qa(this,ml).tools().getState()}get threadListItem(){return qa(this,ml).threadListItem().getState()}get thread(){return qa(this,ml).thread().getState()}get composer(){return qa(this,ml).composer().getState()}get message(){return qa(this,ml).message().getState()}get part(){return qa(this,ml).part().getState()}get attachment(){return qa(this,ml).attachment().getState()}},ml=new WeakMap,eX),Wn=t=>{const e=ls(),n=y.useMemo(()=>new WG(e),[e]),r=y.useSyncExternalStore(e.subscribe,()=>t(n),()=>t(n));if(y.useDebugValue(r),r instanceof WG)throw new Error("You tried to return the entire AssistantState. This is not supported due to technical limitations.");return r},aN=(t,e)=>{const n=ls(),r=y.useRef(e);y.useEffect(()=>{r.current=e});const{scope:s,event:a}=Vv(t);y.useEffect(()=>n.on({scope:s,event:a},i=>r.current(i)),[n,s,a])};function Stt(t,e){function n(r){const s=y.useContext(t);if(!(r!=null&&r.optional)&&!s)throw new Error(`This component must be used within ${e}.`);return s}return n}function nce(t,e){function n(s){const a=t(s);return a?a[e]:null}function r(s){let a=!1,i;typeof s=="function"?i=s:s&&typeof s=="object"&&(a=!!s.optional,i=s.selector);const o=n({optional:a});return o?i?o(i):o():null}return{[e]:r,[`${e}Store`]:n}}var rce=y.createContext(null),ktt=Stt(rce,"ThreadPrimitive.Viewport"),{useThreadViewport:Zg,useThreadViewportStore:BE}=nce(ktt,"useThreadViewport"),j0=t=>{const[,e]=Cu(t.getState);return Ii(()=>(e(t.getState()),t.subscribe(()=>{e(t.getState())})),[t]),t.getState()},Ett=xs(({runtime:t})=>{const e=j0(t),n=OI();return Ii(()=>{const r=[],s=["switched-to","switched-away"];for(const a of s){const i=t.unstable_on(a,()=>{n.emit(`thread-list-item.${a}`,{threadId:t.getState().id})});r.push(i)}return()=>{for(const a of r)a()}},[t,n]),Ac({getState:()=>e,switchTo:t.switchTo,rename:t.rename,archive:t.archive,unarchive:t.unarchive,delete:t.delete,generateTitle:t.generateTitle,initialize:t.initialize,detach:t.detach,__internal_getRuntime:()=>t},{key:e.id})}),hb=t=>{const e=gr(()=>Object.fromEntries(t),[t]),n=qle(e,a=>a,[]),r=gr(()=>Object.keys(n),[n]);return{state:gr(()=>{const a=new Array(r.length);for(let i=0;i<r.length;i++)a[i]=n[r[i]].state;return a},[r,n]),api:a=>{var o,l;const i="index"in a?(o=n[r[a.index]])==null?void 0:o.api:(l=n[a.key])==null?void 0:l.api;if(!i)throw new Error(`tapLookupResources: Resource not found for lookup: ${JSON.stringify(a)}`);return i}}},sce=xs(({runtime:t})=>{const e=j0(t);return Ac({getState:()=>e,remove:t.remove,__internal_getRuntime:()=>t},{key:e.id})}),_tt=xs(({runtime:t,index:e})=>{const n=gr(()=>t.getAttachmentByIndex(e),[t,e]);return Du(sce({runtime:n}))}),ace=xs(({threadIdRef:t,messageIdRef:e,runtime:n})=>{const r=j0(n),s=OI();Ii(()=>{const o=[],l=["send","attachment-add"];for(const u of l){const d=n.unstable_on(u,()=>{s.emit(`composer.${u}`,{threadId:t.current,...e&&{messageId:e.current}})});o.push(d)}return()=>{for(const u of o)u()}},[n,s,t,e]);const a=hb(r.attachments.map((o,l)=>[o.id,_tt({runtime:n,index:l})])),i=gr(()=>({text:r.text,role:r.role,attachments:a.state,runConfig:r.runConfig,isEditing:r.isEditing,canCancel:r.canCancel,attachmentAccept:r.attachmentAccept,isEmpty:r.isEmpty,type:r.type??"thread"}),[r,a.state]);return Ac({getState:()=>i,setText:n.setText,setRole:n.setRole,setRunConfig:n.setRunConfig,addAttachment:n.addAttachment,reset:n.reset,clearAttachments:n.clearAttachments,send:n.send,cancel:n.cancel,beginEdit:n.beginEdit??(()=>{throw new Error("beginEdit is not supported in this runtime")}),attachment:o=>"id"in o?a.api({key:o.id}):a.api(o),__internal_getRuntime:()=>n})}),Ttt=xs(({runtime:t})=>{const e=j0(t);return Ac({getState:()=>e,addToolResult:r=>t.addToolResult(r),resumeToolCall:r=>t.resumeToolCall(r),__internal_getRuntime:()=>t},{key:e.type==="tool-call"?`toolCallId-${e.toolCallId}`:void 0})}),Att=xs(({runtime:t,index:e})=>{const n=gr(()=>t.getAttachmentByIndex(e),[t,e]);return Du(sce({runtime:n}))}),Ntt=xs(({runtime:t,index:e})=>{const n=gr(()=>t.getMessagePartByIndex(e),[t,e]);return Du(Ttt({runtime:n}))}),jtt=xs(({runtime:t,threadIdRef:e})=>{var m;const n=j0(t),[r,s]=Cu(!1),[a,i]=Cu(!1),o=gr(()=>({get current(){return t.getState().id}}),[t]),l=Du(ace({runtime:t.composer,threadIdRef:e,messageIdRef:o})),u=hb(n.content.map((g,x)=>["toolCallId"in g&&g.toolCallId!=null?`toolCallId-${g.toolCallId}`:`index-${x}`,Ntt({runtime:t,index:x})])),d=hb(((m=n.attachments)==null?void 0:m.map((g,x)=>[g.id,Att({runtime:t,index:x})]))??[]),f=gr(()=>({...n,parts:u.state,composer:l.state,isCopied:r,isHovering:a}),[n,u.state,l.state,r,a]);return Ac({getState:()=>f,composer:l.api,reload:g=>t.reload(g),speak:()=>t.speak(),stopSpeaking:()=>t.stopSpeaking(),submitFeedback:g=>t.submitFeedback(g),switchToBranch:g=>t.switchToBranch(g),getCopyText:()=>t.unstable_getCopyText(),part:g=>"index"in g?u.api({index:g.index}):u.api({key:`toolCallId-${g.toolCallId}`}),attachment:g=>"id"in g?d.api({key:g.id}):d.api(g),setIsCopied:s,setIsHovering:i,__internal_getRuntime:()=>t},{key:n.id})}),Dtt=xs(({runtime:t,id:e,threadIdRef:n})=>{const r=gr(()=>t.getMessageById(e),[t,e]);return Du(jtt({runtime:r,threadIdRef:n}))}),Rtt=xs(({runtime:t})=>{const e=j0(t),n=OI();Ii(()=>{const o=[],l=["run-start","run-end","initialize","model-context-update"];for(const u of l){const d=t.unstable_on(u,()=>{var m;const f=((m=t.getState())==null?void 0:m.threadId)||"unknown";n.emit(`thread.${u}`,{threadId:f})});o.push(d)}return()=>{for(const u of o)u()}},[t]);const r=gr(()=>({get current(){return t.getState().threadId}}),[t]),s=Du(ace({runtime:t.composer,threadIdRef:r})),a=hb(e.messages.map(o=>[o.id,Dtt({runtime:t,id:o.id,threadIdRef:r})])),i=gr(()=>({isEmpty:a.state.length===0&&!e.isLoading,isDisabled:e.isDisabled,isLoading:e.isLoading,isRunning:e.isRunning,capabilities:e.capabilities,state:e.state,suggestions:e.suggestions,extras:e.extras,speech:e.speech,composer:s.state,messages:a.state}),[e,a,s.state]);return Ac({getState:()=>i,composer:s.api,append:t.append,startRun:t.startRun,unstable_resumeRun:t.unstable_resumeRun,cancelRun:t.cancelRun,getModelContext:t.getModelContext,export:t.export,import:t.import,reset:t.reset,stopSpeaking:t.stopSpeaking,startVoice:async()=>{throw new Error("startVoice is not supported in this runtime")},stopVoice:async()=>{throw new Error("stopVoice is not supported in this runtime")},message:o=>"id"in o?a.api({key:o.id}):a.api(o),__internal_getRuntime:()=>t})}),Mtt=xs(({runtime:t,id:e})=>{const n=gr(()=>t.getItemById(e),[t,e]);return Du(Ett({runtime:n}))}),Itt=xs(({runtime:t,__internal_assistantRuntime:e})=>{const n=j0(t),r=Du(Rtt({runtime:t.main})),s=hb(Object.keys(n.threadItems).map(i=>[i,Mtt({runtime:t,id:i})])),a=gr(()=>({mainThreadId:n.mainThreadId,newThreadId:n.newThread??null,isLoading:n.isLoading,threadIds:n.threads,archivedThreadIds:n.archivedThreads,threadItems:s.state,main:r.state}),[n,s.state,r.state]);return Ac({getState:()=>a,thread:()=>r.api,item:i=>{if(i==="main")return s.api({key:a.mainThreadId});if("id"in i)return s.api({key:i.id});const{index:o,archived:l=!1}=i,u=l?a.archivedThreadIds[o]:a.threadIds[o];return s.api({key:u})},switchToThread:i=>{t.switchToThread(i)},switchToNewThread:()=>{t.switchToNewThread()},__internal_getAssistantRuntime:()=>e})}),Ott=xs(t=>{const e=Qle();return Ii(()=>t.registerModelContextProvider(e),[t,e]),Du(Itt({runtime:t.threads,__internal_assistantRuntime:t}))}),iN=t=>{const e=new Map,n=()=>{let r=0;for(const s of e.values())r+=s;t(r)};return{register:()=>{const r=Symbol();return e.set(r,0),{setHeight:s=>{e.get(r)!==s&&(e.set(r,s),n())},unregister:()=>{e.delete(r),n()}}}}},Ptt=(t={})=>{const e=new Set,n=iN(i=>{a.setState({height:{...a.getState().height,viewport:i}})}),r=iN(i=>{a.setState({height:{...a.getState().height,inset:i}})}),s=iN(i=>{a.setState({height:{...a.getState().height,userMessage:i}})}),a=Jg(()=>({isAtBottom:!0,scrollToBottom:({behavior:i="auto"}={})=>{for(const o of e)o({behavior:i})},onScrollToBottom:i=>(e.add(i),()=>{e.delete(i)}),turnAnchor:t.turnAnchor??"bottom",height:{viewport:0,inset:0,userMessage:0},registerViewport:n.register,registerContentInset:r.register,registerUserMessageHeight:s.register}));return a},fb=t=>t,Ftt=t=>{const e=BE({optional:!0}),[n]=y.useState(()=>Ptt(t));return y.useEffect(()=>e==null?void 0:e.getState().onScrollToBottom(()=>{n.getState().scrollToBottom()}),[e,n]),y.useEffect(()=>{if(e)return n.subscribe(r=>{e.getState().isAtBottom!==r.isAtBottom&&fb(e).setState({isAtBottom:r.isAtBottom})})},[n,e]),y.useEffect(()=>{const r={turnAnchor:t.turnAnchor??"bottom"};n.getState().turnAnchor!==r.turnAnchor&&fb(n).setState(r)},[n,t.turnAnchor]),n},ice=({children:t,options:e={}})=>{const n=Ftt(e),[r]=y.useState(()=>({useThreadViewport:n}));return c.jsx(rce.Provider,{value:r,children:t})},Btt=t=>{var e;return(e=t._core)==null?void 0:e.RenderComponent},Ltt=({children:t,runtime:e})=>{const n=ls({threads:Ott(e)}),r=Btt(e);return c.jsxs(qv,{api:n,children:[r&&c.jsx(r,{}),c.jsx(ice,{children:t})]})},oce=y.memo(Ltt),ztt=({index:t,archived:e,children:n})=>{const r=ls(),s=Rw({threadListItem:Qg({source:"threads",query:{type:"index",index:t,archived:e},get:()=>r.threads().item({index:t,archived:e})}),on(a,i){const o=()=>r.threads().item({index:t,archived:e}),{event:l,scope:u}=Vv(a);return Xm("thread-list-item",u)?r.on({scope:"*",event:l},d=>{d.threadId===o().getState().id&&i(d)}):r.on(a,i)}});return c.jsx(qv,{api:s,children:n})},$tt=({id:t,children:e})=>{const n=ls(),r=Rw({threadListItem:Qg({source:"threads",query:{type:"id",id:t},get:()=>n.threads().item({id:t})}),on(s,a){const i=()=>n.threads().item({id:t}),{event:o,scope:l}=Vv(s);return Xm("thread-list-item",l)?n.on({scope:"*",event:o},u=>{u.threadId===i().getState().id&&a(u)}):n.on(s,a)}});return c.jsx(qv,{api:r,children:e})},Utt=({index:t,children:e})=>{const n=ls(),r=Rw({message:Qg({source:"thread",query:{type:"index",index:t},get:()=>n.thread().message({index:t})}),composer:Qg({source:"message",query:{},get:()=>n.thread().message({index:t}).composer}),on(s,a){const i=()=>n.thread().message({index:t}),{event:o,scope:l}=Vv(s);return!Xm("composer",l)&&!Xm("message",l)?n.on(s,a):n.on({scope:"thread",event:o},u=>{u.messageId===i().getState().id&&a(u)})}});return c.jsx(qv,{api:r,children:e})},Htt=({index:t,children:e})=>{const n=ls(),r=Rw({part:Qg({source:"message",query:{type:"index",index:t},get:()=>n.message().part({index:t})})});return c.jsx(qv,{api:r,children:e})},Vtt=xs(({text:t,isRunning:e})=>{const n=gr(()=>({type:"text",text:t,status:e?{type:"running"}:{type:"complete"}}),[t,e]);return Ac({getState:()=>n,addToolResult:()=>{throw new Error("Not supported")},resumeToolCall:()=>{throw new Error("Not supported")}})}),qtt=({text:t,isRunning:e=!1,children:n})=>{const r=II(Xle(Vtt({text:t,isRunning:e}))),s=Rw({part:Qg({source:"root",query:{},get:()=>r.getState().api}),subscribe:r.subscribe});return c.jsx(qv,{api:s,children:n})},KG=(t,e)=>{var n,r;return e===void 0?((n=t.status)==null?void 0:n.type)==="requires-action"&&t.status.reason==="tool-calls"&&t.content.every(s=>s.type!=="tool-call"||!!s.result):((r=t.status)==null?void 0:r.type)==="requires-action"&&t.status.reason==="tool-calls"&&t.content.every(s=>s.type!=="tool-call"||!!s.result||!e.includes(s.toolName))},oN=class extends Error{constructor(e,n){super(n);Ie(this,"name","AbortError");Ie(this,"detach");this.detach=e}},Gtt=class extends Uet{constructor(e,n){super(e);Ie(this,"capabilities",{switchToBranch:!0,switchBranchDuringRun:!0,edit:!0,reload:!0,cancel:!0,unstable_copy:!0,speech:!1,attachments:!1,feedback:!1});Ie(this,"abortController",null);Ie(this,"isDisabled",!1);Ie(this,"_isLoading",!1);Ie(this,"_suggestions",[]);Ie(this,"_suggestionsController",null);Ie(this,"_options");Ie(this,"_lastRunConfig",{});Ie(this,"_loadPromise");this.__internal_setOptions(n)}get isLoading(){return this._isLoading}get suggestions(){return this._suggestions}get adapters(){return this._options.adapters}get extras(){}__internal_setOptions(e){var i,o,l;if(this._options===e)return;this._options=e;let n=!1;const r=((i=e.adapters)==null?void 0:i.speech)!==void 0;this.capabilities.speech!==r&&(this.capabilities.speech=r,n=!0);const s=((o=e.adapters)==null?void 0:o.attachments)!==void 0;this.capabilities.attachments!==s&&(this.capabilities.attachments=s,n=!0);const a=((l=e.adapters)==null?void 0:l.feedback)!==void 0;this.capabilities.feedback!==a&&(this.capabilities.feedback=a,n=!0),n&&this._notifySubscribers()}__internal_load(){var n;if(this._loadPromise)return this._loadPromise;const e=((n=this.adapters.history)==null?void 0:n.load())??Promise.resolve(null);return this._isLoading=!0,this._notifySubscribers(),this._loadPromise=e.then(r=>{var a,i;if(!r)return;this.repository.import(r),this._notifySubscribers();const s=(i=(a=this.adapters.history)==null?void 0:a.resume)==null?void 0:i.bind(this.adapters.history);r.unstable_resume&&s&&this.startRun({parentId:this.repository.headId,sourceId:this.repository.headId,runConfig:this._lastRunConfig},s)}).finally(()=>{this._isLoading=!1,this._notifySubscribers()}),this._loadPromise}async append(e){var s;this.ensureInitialized();const n=jw(e,d0(),{type:"complete",reason:"unknown"});this.repository.addOrUpdateMessage(e.parentId,n),(s=this._options.adapters.history)==null||s.append({parentId:e.parentId,message:n,...e.runConfig!==void 0&&{runConfig:e.runConfig}}),e.startRun??e.role==="user"?await this.startRun({parentId:n.id,sourceId:e.sourceId,runConfig:e.runConfig??{}}):(this.repository.resetHead(n.id),this._notifySubscribers())}resumeRun({stream:e,...n}){if(!e)throw new Error("You must pass a stream parameter to resume runs.");return this.startRun(n,e)}unstable_loadExternalState(){throw new Error("Runtime does not support importing external states.")}async startRun({parentId:e,runConfig:n},r){var o,l,u;this.ensureInitialized();let a={id:d0(),role:"assistant",status:{type:"running"},content:[],metadata:{unstable_state:this.state,unstable_annotations:[],unstable_data:[],steps:[],custom:{}},createdAt:new Date};this._notifyEventSubscribers("run-start");try{this._suggestions=[],(o=this._suggestionsController)==null||o.abort(),this._suggestionsController=null,this._notifySubscribers();do a=await this.performRoundtrip(e,a,n,r),r=void 0;while(KG(a,this._options.unstable_humanToolNames))}finally{this._notifyEventSubscribers("run-end")}this._suggestionsController=new AbortController;const i=this._suggestionsController.signal;if(this.adapters.suggestion&&((l=a.status)==null?void 0:l.type)!=="requires-action"){const d=(u=this.adapters.suggestion)==null?void 0:u.generate({messages:this.messages});if(Symbol.asyncIterator in d)for await(const f of d){if(i.aborted)break;this._suggestions=f,this._notifySubscribers()}else{const f=await d;if(i.aborted)return;this._suggestions=f,this._notifySubscribers()}}}async performRoundtrip(e,n,r,s){var x,b,C,S,w,E,T,_;const a=e?this.repository.getMessages(e):[];(x=this.abortController)==null||x.abort(),this.abortController=new AbortController;const i=n.content,o=(b=n.metadata)==null?void 0:b.unstable_annotations,l=(C=n.metadata)==null?void 0:C.unstable_data,u=(S=n.metadata)==null?void 0:S.steps,d=(w=n.metadata)==null?void 0:w.custom,f=A=>{var O,H,P,I;const j=(O=A.metadata)==null?void 0:O.steps,D=j?[...u??[],...j]:void 0,z=(H=A.metadata)==null?void 0:H.unstable_annotations,F=(P=A.metadata)==null?void 0:P.unstable_data,R=z?[...o??[],...z]:void 0,L=F?[...l??[],...F]:void 0;n={...n,...A.content?{content:[...i,...A.content??[]]}:void 0,status:A.status??n.status,...A.metadata?{metadata:{...n.metadata,...A.metadata.unstable_state?{unstable_state:A.metadata.unstable_state}:void 0,...R?{unstable_annotations:R}:void 0,...L?{unstable_data:L}:void 0,...D?{steps:D}:void 0,...(I=A.metadata)!=null&&I.custom?{custom:{...d??{},...A.metadata.custom}}:void 0}}:void 0},this.repository.addOrUpdateMessage(e,n),this._notifySubscribers()},m=this._options.maxSteps??2;if((((T=(E=n.metadata)==null?void 0:E.steps)==null?void 0:T.length)??0)>=m)return f({status:{type:"incomplete",reason:"tool-calls"}}),n;f({status:{type:"running"}}),this.repository.resetHead(n.id),this._notifySubscribers();try{this._lastRunConfig=r??{};const A=this.getModelContext();s=s??this.adapters.chatModel.run.bind(this.adapters.chatModel);const j=this.abortController.signal,D=s({messages:a,runConfig:this._lastRunConfig,abortSignal:j,context:A,config:A,unstable_assistantMessageId:n.id,unstable_getMessage(){return n}});if(Symbol.asyncIterator in D)for await(const z of D){if(j.aborted){f({status:{type:"incomplete",reason:"cancelled"}});break}f(z)}else f(await D);n.status.type==="running"&&f({status:{type:"complete",reason:"unknown"}})}catch(A){if(A instanceof oN)f({status:{type:"incomplete",reason:"cancelled"}});else throw f({status:{type:"incomplete",reason:"error",error:A instanceof Error?A.message:`[${typeof A}] ${new String(A).toString()}`}}),A}finally{this.abortController=null,(n.status.type==="complete"||n.status.type==="incomplete")&&await((_=this._options.adapters.history)==null?void 0:_.append({parentId:e,message:n,runConfig:this._lastRunConfig}))}return n}detach(){var n;const e=new oN(!0);(n=this.abortController)==null||n.abort(e),this.abortController=null}cancelRun(){var n;const e=new oN(!1);(n=this.abortController)==null||n.abort(e),this.abortController=null}addToolResult({messageId:e,toolCallId:n,result:r,isError:s,artifact:a}){const i=this.repository.getMessage(e),{parentId:o}=i;let{message:l}=i;if(l.role!=="assistant")throw new Error("Tried to add tool result to non-assistant message");let u=!1,d=!1;const f=l.content.map(m=>m.type!=="tool-call"||m.toolCallId!==n?m:(d=!0,m.result||(u=!0),{...m,result:r,artifact:a,isError:s}));if(!d)throw new Error("Tried to add tool result to non-existing tool call");l={...l,content:f},this.repository.addOrUpdateMessage(o,l),u&&KG(l,this._options.unstable_humanToolNames)&&this.performRoundtrip(o,l,this._lastRunConfig)}resumeToolCall(e){throw new Error("Local runtime does not support resuming tool calls.")}},YG=Object.freeze([]),x7="__DEFAULT_ID__",Wtt=Object.freeze({[x7]:{id:x7,remoteId:void 0,externalId:void 0,status:"regular",title:void 0}}),Ktt=class extends Aw{constructor(e){super();Ie(this,"_mainThread");this._mainThread=e()}get isLoading(){return!1}getMainThreadRuntimeCore(){return this._mainThread}get newThreadId(){throw new Error("Method not implemented.")}get threadIds(){throw YG}get archivedThreadIds(){throw YG}get mainThreadId(){return x7}get threadData(){return Wtt}getThreadRuntimeCore(){throw new Error("Method not implemented.")}getLoadThreadsPromise(){throw new Error("Method not implemented.")}getItemById(e){if(e===this.mainThreadId)return{status:"regular",id:this.mainThreadId,remoteId:this.mainThreadId,externalId:void 0,title:void 0,isMain:!0};throw new Error("Method not implemented")}async switchToThread(){throw new Error("Method not implemented.")}switchToNewThread(){throw new Error("Method not implemented.")}rename(){throw new Error("Method not implemented.")}archive(){throw new Error("Method not implemented.")}detach(){throw new Error("Method not implemented.")}unarchive(){throw new Error("Method not implemented.")}delete(){throw new Error("Method not implemented.")}initialize(e){return Promise.resolve({remoteId:e,externalId:void 0})}generateTitle(){throw new Error("Method not implemented.")}},Ytt=class extends NI{constructor(e,n){super();Ie(this,"threads");Ie(this,"Provider");Ie(this,"_options");this._options=e,this.threads=new Ktt(()=>new Gtt(this._contextProvider,this._options)),n&&this.threads.getMainThreadRuntimeCore().import(DI.fromArray(n))}},XG=t=>{try{const n=t.split(".")[1];if(!n)throw new Error("Invalid JWT format");let r=n.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4!==0;)r+="=";const s=atob(r),i=JSON.parse(s).exp;if(!i||typeof i!="number")throw new Error('JWT does not contain a valid "exp" field');return i*1e3}catch(e){throw new Error(`Unable to determine the token expiry: ${e}`)}},Ib,tX,lce=(tX=class{constructor(t){Ie(this,"strategy","jwt");Ie(this,"cachedToken",null);Ie(this,"tokenExpiry",null);lm(this,Ib);cm(this,Ib,t)}async getAuthHeaders(){const t=Date.now();if(this.cachedToken&&this.tokenExpiry&&this.tokenExpiry-t>30*1e3)return{Authorization:`Bearer ${this.cachedToken}`};const e=await qa(this,Ib).call(this);return e?(this.cachedToken=e,this.tokenExpiry=XG(e),{Authorization:`Bearer ${e}`}):!1}readAuthHeaders(t){const e=t.get("Authorization");if(!e)return;const[n,r]=e.split(" ");if(n!=="Bearer"||!r)throw new Error("Invalid auth header received");this.cachedToken=r,this.tokenExpiry=XG(r)}},Ib=new WeakMap,tX),Ob,Pb,Fb,nX,Xtt=(nX=class{constructor(t,e,n){Ie(this,"strategy","api-key");lm(this,Ob);lm(this,Pb);lm(this,Fb);cm(this,Ob,t),cm(this,Pb,e),cm(this,Fb,n)}async getAuthHeaders(){return{Authorization:`Bearer ${qa(this,Ob)}`,"Aui-User-Id":qa(this,Pb),"Aui-Workspace-Id":qa(this,Fb)}}readAuthHeaders(){}},Ob=new WeakMap,Pb=new WeakMap,Fb=new WeakMap,nX),VC="aui:refresh_token",Jtt=class{constructor(t){Ie(this,"strategy","anon");Ie(this,"baseUrl");Ie(this,"jwtStrategy");this.baseUrl=t,this.jwtStrategy=new lce(async()=>{const e=Date.now(),n=localStorage.getItem(VC),r=n?JSON.parse(n):void 0;if(r)if(new Date(r.expires_at).getTime()-e>30*1e3){const u=await fetch(`${this.baseUrl}/v1/auth/tokens/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:r.token})});if(u.ok){const d=await u.json(),{access_token:f,refresh_token:m}=d;return m&&localStorage.setItem(VC,JSON.stringify(m)),f}}else localStorage.removeItem(VC);const s=await fetch(`${this.baseUrl}/v1/auth/tokens/anonymous`,{method:"POST"});if(!s.ok)return null;const a=await s.json(),{access_token:i,refresh_token:o}=a;return!i||!o?null:(localStorage.setItem(VC,JSON.stringify(o)),i)})}async getAuthHeaders(){return this.jwtStrategy.getAuthHeaders()}readAuthHeaders(t){this.jwtStrategy.readAuthHeaders(t)}},Qtt=class extends Error{constructor(t){super(t),this.name="APIError"}},Ztt=class{constructor(t){Ie(this,"_auth");Ie(this,"_baseUrl");if("authToken"in t)this._baseUrl=t.baseUrl,this._auth=new lce(t.authToken);else if("apiKey"in t)this._baseUrl="https://backend.assistant-api.com",this._auth=new Xtt(t.apiKey,t.userId,t.workspaceId);else if("anonymous"in t)this._baseUrl=t.baseUrl,this._auth=new Jtt(t.baseUrl);else throw new Error("Invalid configuration: Must provide authToken, apiKey, or anonymous configuration")}async initializeAuth(){return!!this._auth.getAuthHeaders()}async makeRawRequest(t,e={}){const n=await this._auth.getAuthHeaders();if(!n)throw new Error("Authorization failed");const r={...n,...e.headers,"Content-Type":"application/json"},s=new URLSearchParams;if(e.query)for(const[o,l]of Object.entries(e.query))l!==!1&&(l===!0?s.set(o,"true"):s.set(o,l.toString()));const a=new URL(`${this._baseUrl}/v1${t}`);a.search=s.toString();const i=await fetch(a,{method:e.method??"GET",headers:r,body:e.body?JSON.stringify(e.body):null});if(this._auth.readAuthHeaders(i.headers),!i.ok){const o=await i.text();try{const l=JSON.parse(o);throw new Qtt(l.message)}catch{throw new Error(`Request failed with status ${i.status}, ${o}`)}}return i}async makeRequest(t,e={}){return(await this.makeRawRequest(t,e)).json()}},ent=class{constructor(t){this.cloud=t}async create(){return this.cloud.makeRequest("/auth/tokens",{method:"POST"})}},tnt=class{constructor(t){this.cloud=t}__internal_getAssistantOptions(t){return{api:`${this.cloud._baseUrl}/v1/runs/stream`,headers:async()=>{const e=await this.cloud._auth.getAuthHeaders();if(!e)throw new Error("Authorization failed");return{...e,Accept:"text/plain"}},body:{assistant_id:t,response_format:"vercel-ai-data-stream/v1",thread_id:"unstable_todo"}}}async stream(t){const e=await this.cloud.makeRawRequest("/runs/stream",{method:"POST",headers:{Accept:"text/plain"},body:t});return p7.fromResponse(e,new vet)}},nnt=class{constructor(t){this.cloud=t}async list(t,e){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}/messages`,{query:e})}async create(t,e){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}/messages`,{method:"POST",body:e})}},rnt=class{constructor(t){Ie(this,"messages");this.cloud=t,this.messages=new nnt(t)}async list(t){return this.cloud.makeRequest("/threads",{query:t})}async get(t){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}`)}async create(t){return this.cloud.makeRequest("/threads",{method:"POST",body:t})}async update(t,e){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}`,{method:"PUT",body:e})}async delete(t){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}`,{method:"DELETE"})}},snt=class{constructor(t){this.cloud=t}async pdfToImages(t){return this.cloud.makeRequest("/files/pdf-to-images",{method:"POST",body:t})}async generatePresignedUploadUrl(t){return this.cloud.makeRequest("/files/attachments/generate-presigned-upload-url",{method:"POST",body:t})}},ant=class{constructor(t){Ie(this,"threads");Ie(this,"auth");Ie(this,"runs");Ie(this,"files");const e=new Ztt(t);this.threads=new rnt(e),this.auth={tokens:new ent(e)},this.runs=new tnt(e),this.files=new snt(e)}};function b7(t,e=0){return e>100?!1:t===null||typeof t=="string"||typeof t=="boolean"?!0:typeof t=="number"?!Number.isNaN(t)&&Number.isFinite(t):Array.isArray(t)?t.every(n=>b7(n,e+1)):typeof t=="object"?Object.entries(t).every(([n,r])=>typeof n=="string"&&b7(r,e+1)):!1}var int=t=>{var e;return{role:t.role,content:t.content.map(n=>{const r=n.type;switch(r){case"text":return{type:"text",text:n.text};case"reasoning":return{type:"reasoning",text:n.text};case"source":return{type:"source",sourceType:n.sourceType,id:n.id,url:n.url,...n.title?{title:n.title}:void 0};case"tool-call":return b7(n.result)||console.warn(`tool-call result is not JSON! ${JSON.stringify(n)}`),{type:"tool-call",toolCallId:n.toolCallId,toolName:n.toolName,...JSON.stringify(n.args)===n.argsText?{args:n.args}:{argsText:n.argsText},...n.result?{result:n.result}:{},...n.isError?{isError:!0}:{}};default:{const s=r;throw new Error(`Message part type not supported by aui/v0: ${s}`)}}}),metadata:t.metadata,...t.status?{status:((e=t.status)==null?void 0:e.type)==="running"?{type:"incomplete",reason:"cancelled"}:t.status}:void 0}},ont=t=>{const e=t.content,n=jw({id:t.id,createdAt:t.created_at,...e},t.id,{type:"complete",reason:"unknown"});return{parentId:t.parent_id,message:n}},lN=new WeakMap,lnt=class{constructor(t,e){this.parent=t,this.formatAdapter=e}async append(t){const e=this.formatAdapter.encode(t),n=this.formatAdapter.getId(t.message);return this.parent._appendWithFormat(t.parentId,n,this.formatAdapter.format,e)}async load(){return this.parent._loadWithFormat(this.formatAdapter.format,t=>this.formatAdapter.decode(t))}},cnt=class{constructor(t,e){this.cloudRef=t,this.store=e}get _getIdForLocalId(){return lN.has(this.store.threadListItem())||lN.set(this.store.threadListItem(),{}),lN.get(this.store.threadListItem())}withFormat(t){return new lnt(this,t)}async append({parentId:t,message:e}){const{remoteId:n}=await this.store.threadListItem().initialize(),r=this.cloudRef.current.threads.messages.create(n,{parent_id:t?await this._getIdForLocalId[t]??t:null,format:"aui/v0",content:int(e)}).then(({message_id:s})=>(this._getIdForLocalId[e.id]=s,s));return this._getIdForLocalId[e.id]=r,r.then(()=>{})}async load(){const t=this.store.threadListItem().getState().remoteId;if(!t)return{messages:[]};const{messages:e}=await this.cloudRef.current.threads.messages.list(t,{format:"aui/v0"});return{messages:e.filter(r=>r.format==="aui/v0").map(ont).reverse()}}async _appendWithFormat(t,e,n,r){const{remoteId:s}=await this.store.threadListItem().initialize(),a=this.cloudRef.current.threads.messages.create(s,{parent_id:t?await this._getIdForLocalId[t]??t:null,format:n,content:r}).then(({message_id:i})=>(this._getIdForLocalId[e]=i,i));return this._getIdForLocalId[e]=a,a.then(()=>{})}async _loadWithFormat(t,e){const n=this.store.threadListItem().getState().remoteId;if(!n)return{messages:[]};const{messages:r}=await this.cloudRef.current.threads.messages.list(n,{format:t});return{messages:r.filter(s=>s.format===t).map(s=>e({id:s.id,parent_id:s.parent_id,format:s.format,content:s.content})).reverse()}}},unt=t=>{const e=ls(),[n]=y.useState(()=>new cnt(t,e));return n},rX,JG=typeof process<"u"&&((rX=process==null?void 0:process.env)==null?void 0:rX.NEXT_PUBLIC_ASSISTANT_BASE_URL),cN=JG?new ant({baseUrl:JG,anonymous:!0}):void 0,dnt=t=>{const e=y.useRef(t);y.useEffect(()=>{e.current=t},[t]);const n=y.useCallback(function({children:a}){const i=unt({get current(){return e.current.cloud??cN}}),o=e.current.cloud??cN,l=y.useMemo(()=>new Let(o),[o]),u=y.useMemo(()=>({history:i,attachments:l}),[i,l]);return c.jsx(Ule,{adapters:u,children:a})},[]),r=t.cloud??cN;return r?{list:async()=>{const{threads:s}=await r.threads.list();return{threads:s.map(a=>({status:a.is_archived?"archived":"regular",remoteId:a.id,title:a.title,externalId:a.external_id??void 0}))}},initialize:async()=>{var l;const a=await(((l=t.create)==null?void 0:l.call(t))??Promise.resolve()),i=a?a.externalId:void 0,{thread_id:o}=await r.threads.create({last_message_at:new Date,external_id:i});return{externalId:i,remoteId:o}},rename:async(s,a)=>r.threads.update(s,{title:a}),archive:async s=>r.threads.update(s,{is_archived:!0}),unarchive:async s=>r.threads.update(s,{is_archived:!1}),delete:async s=>{var a;return await((a=t.delete)==null?void 0:a.call(t,s)),r.threads.delete(s)},generateTitle:async(s,a)=>r.runs.stream({thread_id:s,assistant_id:"system/thread_title",messages:a}),fetch:async s=>{const a=await r.threads.get(s);return{status:a.is_archived?"archived":"regular",remoteId:a.id,title:a.title,externalId:a.external_id??void 0}},unstable_Provider:n}:new qet},hnt=(t,{initialMessages:e,...n})=>{const{modelContext:r,...s}=zet()??{},a=y.useMemo(()=>({...n,adapters:{...s,...n.adapters,chatModel:t}}),[t,n,s]),[i]=y.useState(()=>new Ytt(a,e));return y.useEffect(()=>()=>{i.threads.getMainThreadRuntimeCore().detach()},[i]),y.useEffect(()=>{i.threads.getMainThreadRuntimeCore().__internal_setOptions(a),i.threads.getMainThreadRuntimeCore().__internal_load()},[i,a]),y.useEffect(()=>{if(r)return i.registerModelContextProvider(r)},[r,i]),y.useMemo(()=>new PI(i),[i])},cce=(t,{cloud:e,...n}={})=>{const r=dnt({cloud:e});return Tnt({runtimeHook:function(){return hnt(t,n)},adapter:r,allowNesting:!0})},PI=class{constructor(t){Ie(this,"threads");Ie(this,"_thread");this._core=t,this.threads=new Fet(t.threads),this._thread=this.threads.main,this.__internal_bindMethods()}get threadList(){return this.threads}__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(t){return this._core.threads.switchToThread(t)}registerModelContextProvider(t){return this._core.registerModelContextProvider(t)}registerModelConfigProvider(t){return this.registerModelContextProvider(t)}reset({initialMessages:t}={}){return this._core.threads.getMainThreadRuntimeCore().import(DI.fromArray(t??[]))}},fnt=t=>{const{cloud:e,initialMessages:n,maxSteps:r,adapters:s,unstable_humanToolNames:a,...i}=t;return{localRuntimeOptions:{cloud:e,initialMessages:n,maxSteps:r,adapters:s,unstable_humanToolNames:a},otherOptions:i}},uce=y.createContext(null),mnt=t=>({useSmoothStatus:Jg(()=>t)}),pnt=({children:t})=>{const e=dce({optional:!0}),n=ls(),[r]=y.useState(()=>mnt(n.part().getState().status));return e?t:c.jsx(uce.Provider,{value:r,children:t})},gnt=t=>{const e=y.forwardRef((n,r)=>c.jsx(pnt,{children:c.jsx(t,{...n,ref:r})}));return e.displayName=t.displayName,e};function dce(t){const e=y.useContext(uce);if(!(t!=null&&t.optional)&&!e)throw new Error("This component must be used within a SmoothContextProvider.");return e}var{useSmoothStatus:vnt,useSmoothStatusStore:ynt}=nce(dce,"useSmoothStatus"),xnt=class{constructor(t,e){Ie(this,"animationFrameId",null);Ie(this,"lastUpdateTime",Date.now());Ie(this,"targetText","");Ie(this,"animate",()=>{const t=Date.now();let n=t-this.lastUpdateTime;const r=this.targetText.length-this.currentText.length,s=Math.min(5,250/r);let a=0;for(;n>=s&&a<r;)a++,n-=s;a!==r?this.animationFrameId=requestAnimationFrame(this.animate):this.animationFrameId=null,a!==0&&(this.currentText=this.targetText.slice(0,this.currentText.length+a),this.lastUpdateTime=t-n,this.setText(this.currentText))});this.currentText=t,this.setText=e}start(){this.animationFrameId===null&&(this.lastUpdateTime=Date.now(),this.animate())}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}},uN=Object.freeze({type:"running"}),hce=(t,e=!1)=>{const{text:n}=t,r=Wn(({message:d})=>d.id),s=y.useRef(r),[a,i]=y.useState(n),o=ynt({optional:!0}),l=Pr(d=>{if(i(d),o){const f=a!==d||t.status.type==="running"?uN:t.status;fb(o).setState(f,!0)}});y.useEffect(()=>{if(o){const d=e&&(a!==n||t.status.type==="running")?uN:t.status;fb(o).setState(d,!0)}},[o,e,n,a,t.status]);const[u]=y.useState(new xnt(n,l));return y.useEffect(()=>{if(!e){u.stop();return}if(s.current!==r||!n.startsWith(u.targetText)){s.current=r,l(n),u.currentText=n,u.targetText=n,u.stop();return}u.targetText=n,u.start()},[l,u,r,e,n]),y.useEffect(()=>()=>{u.stop()},[u]),y.useMemo(()=>e?{type:"text",text:a,status:n===a?t.status:uN}:t,[e,a,t,n])};const bnt=Object.freeze(Object.defineProperty({__proto__:null,AssistantRuntimeImpl:PI,BaseAssistantRuntimeCore:NI,CompositeContextProvider:AI,DefaultThreadComposerRuntimeCore:Sle,MessageRepository:Ile,ThreadRuntimeImpl:$le,fromThreadMessageLike:jw,generateId:d0,getAutoStatus:Ele,splitLocalRuntimeOptions:fnt,useSmooth:hce,useSmoothStatus:vnt,useToolInvocations:Vet,withSmoothContextProvider:gnt},Symbol.toStringTag,{value:"Module"}));var wnt=class extends Aw{constructor(e){super();Ie(this,"useRuntimeHook");Ie(this,"instances",new Map);Ie(this,"useAliveThreadsKeysChanged",Jg(()=>({})));Ie(this,"_InnerActiveThreadProvider",({threadId:e})=>{const{useRuntime:n}=this.useRuntimeHook(),r=n(),s=r.thread.__internal_threadBinding,a=y.useCallback(()=>{const l=this.instances.get(e);if(!l)throw new Error("Thread not found. This is a bug in assistant-ui.");l.runtime=s.getState(),this._notifySubscribers()},[e,s]),i=y.useRef(!1);i.current||a(),y.useEffect(()=>(i.current=!0,a(),s.outerSubscribe(a)),[s,a]);const o=ls();return y.useEffect(()=>r.threads.main.unstable_on("initialize",()=>{if(o.threadListItem().getState().status==="new"){o.threadListItem().initialize();const u=r.thread.unstable_on("run-end",()=>{u(),o.threadListItem().generateTitle()})}}),[r,o]),null});Ie(this,"_OuterActiveThreadProvider",y.memo(({threadId:e,provider:n})=>c.jsx($tt,{id:e,children:c.jsx(n,{children:c.jsx(this._InnerActiveThreadProvider,{threadId:e})})})));Ie(this,"__internal_RenderThreadRuntimes",({provider:e})=>(this.useAliveThreadsKeysChanged(),Array.from(this.instances.keys()).map(n=>c.jsx(this._OuterActiveThreadProvider,{threadId:n,provider:e},n))));this.useRuntimeHook=Jg(()=>({useRuntime:e}))}startThreadRuntime(e){return this.instances.has(e)||(this.instances.set(e,{}),this.useAliveThreadsKeysChanged.setState({},!0)),new Promise((n,r)=>{const s=()=>{const i=this.instances.get(e);if(!i)a(),r(new Error("Thread was deleted before runtime was started"));else if(i.runtime)a(),n(i.runtime);else return},a=this.subscribe(s);s()})}getThreadRuntimeCore(e){const n=this.instances.get(e);if(n)return n.runtime}stopThreadRuntime(e){this.instances.delete(e),this.useAliveThreadsKeysChanged.setState({},!0)}setRuntimeHook(e){this.useRuntimeHook.getState().useRuntime!==e&&this.useRuntimeHook.setState({useRuntime:e},!0)}},Vs=new Error("This is the empty thread, a placeholder for the main thread. You cannot perform any actions on this thread instance. This error is probably because you tried to call a thread method in your render function. Call the method inside a `useEffect` hook instead."),Cnt={getMessageById(){},getBranches(){return[]},switchToBranch(){throw Vs},append(){throw Vs},startRun(){throw Vs},resumeRun(){throw Vs},cancelRun(){throw Vs},addToolResult(){throw Vs},resumeToolCall(){throw Vs},speak(){throw Vs},stopSpeaking(){throw Vs},submitFeedback(){throw Vs},getModelContext(){return{}},unstable_loadExternalState(){throw Vs},composer:{attachments:[],attachmentAccept:"*",async addAttachment(){throw Vs},async removeAttachment(){throw Vs},isEditing:!0,canCancel:!1,isEmpty:!0,text:"",setText(){throw Vs},role:"user",setRole(){throw Vs},runConfig:{},setRunConfig(){throw Vs},async reset(){},async clearAttachments(){},send(){throw Vs},cancel(){},subscribe(){return()=>{}},unstable_on(){return()=>{}}},getEditComposer(){},beginEdit(){throw Vs},speech:void 0,capabilities:{switchToBranch:!1,switchBranchDuringRun:!1,edit:!1,reload:!1,cancel:!1,unstable_copy:!1,speech:!1,attachments:!1,feedback:!1},isDisabled:!1,isLoading:!1,messages:[],state:null,suggestions:[],extras:void 0,subscribe(){return()=>{}},import(){throw Vs},export(){return{messages:[]}},reset(){throw Vs},unstable_on(){return()=>{}}},QG=(t,e,n)=>n.reduce((r,s)=>(s==null?void 0:s(r,e))??r,t),Snt=class extends Aw{constructor(e){super();Ie(this,"_pendingTransforms",[]);Ie(this,"_baseValue");Ie(this,"_cachedValue");this._baseValue=e,this._cachedValue=e}_updateState(){this._cachedValue=this._pendingTransforms.reduce((e,n)=>QG(e,n.task,[n.loading,n.optimistic]),this._baseValue),this._notifySubscribers()}get baseValue(){return this._baseValue}get value(){return this._cachedValue}update(e){this._baseValue=e,this._updateState()}async optimisticUpdate(e){const n=e.execute(),r={...e,task:n};try{this._pendingTransforms.push(r),this._updateState();const s=await n;return this._baseValue=QG(this._baseValue,s,[e.optimistic,e.then]),s}finally{const s=this._pendingTransforms.indexOf(r);s>-1&&this._pendingTransforms.splice(s,1),this._updateState()}}};var qS=(t,e)=>{const n=t.threadIdMap[e];if(n!==void 0)return t.threadData[n]},qC=(t,e,n)=>{const r=qS(t,e);if(!r)return t;const{id:s,remoteId:a,status:i}=r;if(i===n)return t;const o={...t};switch(i){case"new":o.newThreadId=void 0;break;case"regular":o.threadIds=o.threadIds.filter(l=>l!==s);break;case"archived":o.archivedThreadIds=o.archivedThreadIds.filter(l=>l!==s);break;default:{const l=i;throw new Error(`Unsupported state: ${l}`)}}switch(n){case"regular":o.threadIds=[s,...o.threadIds];break;case"archived":o.archivedThreadIds=[s,...o.archivedThreadIds];break;case"deleted":o.threadData=Object.fromEntries(Object.entries(o.threadData).filter(([l])=>l!==s)),o.threadIdMap=Object.fromEntries(Object.entries(o.threadIdMap).filter(([l])=>l!==s&&l!==a));break;default:{const l=n;throw new Error(`Unsupported state: ${l}`)}}return n!=="deleted"&&(o.threadData={...o.threadData,[s]:{...r,status:n}}),o},knt=class extends Aw{constructor(e,n){super();Ie(this,"_options");Ie(this,"_hookManager");Ie(this,"_loadThreadsPromise");Ie(this,"_mainThreadId");Ie(this,"_state",new Snt({isLoading:!1,newThreadId:void 0,threadIds:[],archivedThreadIds:[],threadIdMap:{},threadData:{}}));Ie(this,"useProvider");Ie(this,"initialize",async e=>{if(this._state.value.newThreadId!==e){const n=this.getItemById(e);if(!n)throw new Error("Thread not found");if(n.status==="new")throw new Error("Unexpected new state");return n.initializeTask}return this._state.optimisticUpdate({execute:()=>this._options.adapter.initialize(e),optimistic:n=>qC(n,e,"regular"),loading:(n,r)=>{const s=e;return{...n,threadData:{...n.threadData,[s]:{...n.threadData[s],initializeTask:r}}}},then:(n,{remoteId:r,externalId:s})=>{const a=qS(n,e);if(!a)return n;const i=e;return{...n,threadIdMap:{...n.threadIdMap,[r]:i},threadData:{...n.threadData,[i]:{...a,initializeTask:Promise.resolve({remoteId:r,externalId:s}),remoteId:r,externalId:s}}}}})});Ie(this,"generateTitle",async e=>{var l;const n=this.getItemById(e);if(!n)throw new Error("Thread not found");if(n.status==="new")throw new Error("Thread is not yet initialized");const{remoteId:r}=await n.initializeTask,s=this._hookManager.getThreadRuntimeCore(n.id);if(!s)return;const a=s.messages,i=await this._options.adapter.generateTitle(r,a),o=yet.fromAssistantStream(i);for await(const u of o){const d=(l=u.parts.filter(m=>m.type==="text")[0])==null?void 0:l.text,f=this._state.baseValue;this._state.update({...f,threadData:{...f.threadData,[n.id]:{...n,title:d}}})}});Ie(this,"useBoundIds",Jg(()=>[]));Ie(this,"__internal_RenderComponent",()=>{const e=y.useId();y.useEffect(()=>(this.useBoundIds.setState(a=>[...a,e],!0),()=>{this.useBoundIds.setState(a=>a.filter(i=>i!==e),!0)}),[e]);const n=this.useBoundIds(),{Provider:r}=this.useProvider(),s={modelContext:this.contextProvider};return(n.length===0||n[0]===e)&&c.jsx(Ule,{adapters:s,children:c.jsx(this._hookManager.__internal_RenderThreadRuntimes,{provider:r})})});this.contextProvider=n,this._state.subscribe(()=>this._notifySubscribers()),this._hookManager=new wnt(e.runtimeHook),this.useProvider=Jg(()=>({Provider:e.adapter.unstable_Provider??y.Fragment})),this.__internal_setOptions(e),this.switchToNewThread()}get threadData(){return this._state.value.threadData}getLoadThreadsPromise(){return this._loadThreadsPromise||(this._loadThreadsPromise=this._state.optimisticUpdate({execute:()=>this._options.adapter.list(),loading:e=>({...e,isLoading:!0}),then:(e,n)=>{const r=[],s=[],a={},i={};for(const o of n.threads){switch(o.status){case"regular":r.push(o.remoteId);break;case"archived":s.push(o.remoteId);break;default:{const u=o.status;throw new Error(`Unsupported state: ${u}`)}}const l=o.remoteId;a[o.remoteId]=l,i[l]={id:o.remoteId,remoteId:o.remoteId,externalId:o.externalId,status:o.status,title:o.title,initializeTask:Promise.resolve({remoteId:o.remoteId,externalId:o.externalId})}}return{...e,threadIds:r,archivedThreadIds:s,threadIdMap:{...e.threadIdMap,...a},threadData:{...e.threadData,...i}}}}).then(()=>{})),this._loadThreadsPromise}__internal_setOptions(e){if(this._options===e)return;this._options=e;const n=e.adapter.unstable_Provider??y.Fragment;n!==this.useProvider.getState().Provider&&this.useProvider.setState({Provider:n},!0),this._hookManager.setRuntimeHook(e.runtimeHook)}__internal_load(){this.getLoadThreadsPromise()}get isLoading(){return this._state.value.isLoading}get threadIds(){return this._state.value.threadIds}get archivedThreadIds(){return this._state.value.archivedThreadIds}get newThreadId(){return this._state.value.newThreadId}get mainThreadId(){return this._mainThreadId}getMainThreadRuntimeCore(){const e=this._hookManager.getThreadRuntimeCore(this._mainThreadId);return e||Cnt}getThreadRuntimeCore(e){const n=this.getItemById(e);if(!n)throw new Error("Thread not found");const r=this._hookManager.getThreadRuntimeCore(n.id);if(!r)throw new Error("Thread not found");return r}getItemById(e){return qS(this._state.value,e)}async switchToThread(e){let n=this.getItemById(e);if(!n){const s=await this._options.adapter.fetch(e),a=this._state.value,i=s.remoteId,o={...a.threadData,[i]:{id:i,initializeTask:Promise.resolve({remoteId:s.remoteId,externalId:s.externalId}),remoteId:s.remoteId,externalId:s.externalId,status:s.status,title:s.title}},l={...a.threadIdMap,[s.remoteId]:i},u=s.status==="regular"?[...a.threadIds,s.remoteId]:a.threadIds,d=s.status==="archived"?[...a.archivedThreadIds,s.remoteId]:a.archivedThreadIds;this._state.update({...a,threadIds:u,archivedThreadIds:d,threadIdMap:l,threadData:o}),n=this.getItemById(e)}if(!n)throw new Error("Thread not found");if(this._mainThreadId===n.id)return;const r=this._hookManager.startThreadRuntime(n.id);this.mainThreadId!==void 0?await r:r.then(()=>this._notifySubscribers()),n.status==="archived"&&await this.unarchive(n.id),this._mainThreadId=n.id,this._notifySubscribers()}async switchToNewThread(){for(;this._state.baseValue.newThreadId!==void 0&&this._state.value.newThreadId===void 0;)await this._state.waitForUpdate();const e=this._state.value;let n=this._state.value.newThreadId;if(n===void 0){do n=`__LOCALID_${d0()}`;while(e.threadIdMap[n]);const r=n;this._state.update({...e,newThreadId:n,threadIdMap:{...e.threadIdMap,[n]:r},threadData:{...e.threadData,[r]:{status:"new",id:n,remoteId:void 0,externalId:void 0,title:void 0}}})}return this.switchToThread(n)}rename(e,n){const r=this.getItemById(e);if(!r)throw new Error("Thread not found");if(r.status==="new")throw new Error("Thread is not yet initialized");return this._state.optimisticUpdate({execute:async()=>{const{remoteId:s}=await r.initializeTask;return this._options.adapter.rename(s,n)},optimistic:s=>{const a=qS(s,e);return a?{...s,threadData:{...s.threadData,[a.id]:{...a,title:n}}}:s}})}async _ensureThreadIsNotMain(e){if(e===this.newThreadId)throw new Error("Cannot ensure new thread is not main");e===this._mainThreadId&&await this.switchToNewThread()}async archive(e){const n=this.getItemById(e);if(!n)throw new Error("Thread not found");if(n.status!=="regular")throw new Error("Thread is not yet initialized or already archived");return this._state.optimisticUpdate({execute:async()=>{await this._ensureThreadIsNotMain(n.id);const{remoteId:r}=await n.initializeTask;return this._options.adapter.archive(r)},optimistic:r=>qC(r,n.id,"archived")})}unarchive(e){const n=this.getItemById(e);if(!n)throw new Error("Thread not found");if(n.status!=="archived")throw new Error("Thread is not archived");return this._state.optimisticUpdate({execute:async()=>{try{const{remoteId:r}=await n.initializeTask;return await this._options.adapter.unarchive(r)}catch(r){throw await this._ensureThreadIsNotMain(n.id),r}},optimistic:r=>qC(r,n.id,"regular")})}async delete(e){const n=this.getItemById(e);if(!n)throw new Error("Thread not found");if(n.status!=="regular"&&n.status!=="archived")throw new Error("Thread is not yet initialized");return this._state.optimisticUpdate({execute:async()=>{await this._ensureThreadIsNotMain(n.id);const{remoteId:r}=await n.initializeTask;return await this._options.adapter.delete(r)},optimistic:r=>qC(r,n.id,"deleted")})}async detach(e){const n=this.getItemById(e);if(!n)throw new Error("Thread not found");if(n.status!=="regular"&&n.status!=="archived")throw new Error("Thread is not yet initialized");await this._ensureThreadIsNotMain(n.id),this._hookManager.stopThreadRuntime(n.id)}},Ent=class extends NI{constructor(e){super();Ie(this,"threads");this.threads=new knt(e,this._contextProvider)}get RenderComponent(){return this.threads.__internal_RenderComponent}},_nt=t=>{const[e]=y.useState(()=>new Ent(t));return y.useEffect(()=>{e.threads.__internal_setOptions(t),e.threads.__internal_load()},[e,t]),y.useMemo(()=>new PI(e),[e])},Tnt=t=>{if(FE().threadListItem.source!==null){if(!t.allowNesting)throw new Error("useRemoteThreadListRuntime cannot be nested inside another RemoteThreadListRuntime. Set allowNesting: true to allow nesting (the inner runtime will become a no-op).");return t.runtimeHook()}return _nt(t)},Ant=Symbol.for("react.lazy"),p5=p1[" use ".trim().toString()];function Nnt(t){return typeof t=="object"&&t!==null&&"then"in t}function fce(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Ant&&"_payload"in t&&Nnt(t._payload)}function mce(t){const e=jnt(t),n=y.forwardRef((r,s)=>{let{children:a,...i}=r;fce(a)&&typeof p5=="function"&&(a=p5(a._payload));const o=y.Children.toArray(a),l=o.find(Rnt);if(l){const u=l.props.children,d=o.map(f=>f===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...i,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return c.jsx(e,{...i,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var pce=mce("Slot");function jnt(t){const e=y.forwardRef((n,r)=>{let{children:s,...a}=n;if(fce(s)&&typeof p5=="function"&&(s=p5(s._payload)),y.isValidElement(s)){const i=Int(s),o=Mnt(a,s.props);return s.type!==y.Fragment&&(o.ref=r?Ub(r,i):i),y.cloneElement(s,o)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Dnt=Symbol("radix.slottable");function Rnt(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Dnt}function Mnt(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...o)=>{const l=a(...o);return s(...o),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function Int(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ont=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Li=Ont.reduce((t,e)=>{const n=mce(`Primitive.${e}`),r=y.forwardRef((s,a)=>{const{asChild:i,...o}=s,l=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),w7=(t=>(t.Hidden="hidden",t.Floating="floating",t.Normal="normal",t))(w7||{}),Pnt=({hideWhenRunning:t,autohide:e,autohideFloat:n})=>Wn(({thread:r,message:s})=>t&&r.isRunning?"hidden":e==="always"||e==="not-last"&&!s.isLast?s.isHovering?n==="always"||n==="single-branch"&&s.branchCount<=1?"floating":"normal":"hidden":"normal"),FI=y.forwardRef(({hideWhenRunning:t,autohide:e,autohideFloat:n,...r},s)=>{const a=Pnt({hideWhenRunning:t,autohide:e,autohideFloat:n});return a===w7.Hidden?null:c.jsx(Li.div,{...a===w7.Floating?{"data-floating":"true"}:null,...r,ref:s})});FI.displayName="ActionBarPrimitive.Root";function Zr(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var Fnt=({copiedDuration:t=3e3}={})=>{const e=ls(),n=Wn(({message:i})=>{var o;return(i.role!=="assistant"||((o=i.status)==null?void 0:o.type)!=="running")&&i.parts.some(l=>l.type==="text"&&l.text.length>0)}),r=Wn(({composer:i})=>i.isEditing),s=Wn(({composer:i})=>i.text),a=y.useCallback(()=>{const i=r?s:e.message().getCopyText();i&&navigator.clipboard.writeText(i).then(()=>{e.message().setIsCopied(!0),setTimeout(()=>e.message().setIsCopied(!1),t)})},[e,r,s,t]);return n?a:null},gce=y.forwardRef(({copiedDuration:t,onClick:e,disabled:n,...r},s)=>{const a=Wn(({message:o})=>o.isCopied),i=Fnt({copiedDuration:t});return c.jsx(Li.button,{type:"button",...a?{"data-copied":"true"}:{},...r,ref:s,disabled:n||!i,onClick:Zr(e,()=>{i==null||i()})})});gce.displayName="ActionBarPrimitive.Copy";var D0=(t,e,n=[])=>{const r=y.forwardRef((s,a)=>{const i={},o={};Object.keys(s).forEach(u=>{n.includes(u)?i[u]=s[u]:o[u]=s[u]});const l=e(i)??void 0;return c.jsx(Li.button,{type:"button",...o,ref:a,disabled:o.disabled||!l,onClick:Zr(o.onClick,l)})});return r.displayName=t,r},Bnt="DismissableLayer",C7="dismissableLayer.update",Lnt="dismissableLayer.pointerDownOutside",znt="dismissableLayer.focusOutside",ZG,vce=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yce=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...l}=t,u=y.useContext(vce),[d,f]=y.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),x=Bt(e,j=>f(j)),b=Array.from(u.layers),[C]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=b.indexOf(C),w=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,T=w>=S,_=Hnt(j=>{const D=j.target,z=[...u.branches].some(F=>F.contains(D));!T||z||(s==null||s(j),i==null||i(j),j.defaultPrevented||o==null||o())},m),A=Vnt(j=>{const D=j.target;[...u.branches].some(F=>F.contains(D))||(a==null||a(j),i==null||i(j),j.defaultPrevented||o==null||o())},m);return gR(j=>{w===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},m),y.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ZG=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),eW(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ZG)}},[d,m,n,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),eW())},[d,u]),y.useEffect(()=>{const j=()=>g({});return document.addEventListener(C7,j),()=>document.removeEventListener(C7,j)},[]),c.jsx(Nt.div,{...l,ref:x,style:{pointerEvents:E?T?"auto":"none":void 0,...t.style},onFocusCapture:Zr(t.onFocusCapture,A.onFocusCapture),onBlurCapture:Zr(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Zr(t.onPointerDownCapture,_.onPointerDownCapture)})});yce.displayName=Bnt;var $nt="DismissableLayerBranch",Unt=y.forwardRef((t,e)=>{const n=y.useContext(vce),r=y.useRef(null),s=Bt(e,r);return y.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),c.jsx(Nt.div,{...t,ref:s})});Unt.displayName=$nt;function Hnt(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let l=function(){xce(Lnt,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Vnt(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t),r=y.useRef(!1);return y.useEffect(()=>{const s=a=>{a.target&&!r.current&&xce(znt,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eW(){const t=new CustomEvent(C7);document.dispatchEvent(t)}function xce(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?k8(s,a):s.dispatchEvent(a)}var dN=0;function qnt(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??tW()),document.body.insertAdjacentElement("beforeend",t[1]??tW()),dN++,()=>{dN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),dN--}},[])}function tW(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function Gnt(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Mw=t=>{const{present:e,children:n}=t,r=Wnt(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),a=Bt(r.ref,Knt(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:a}):null};Mw.displayName="Presence";function Wnt(t){const[e,n]=y.useState(),r=y.useRef(null),s=y.useRef(t),a=y.useRef("none"),i=t?"mounted":"unmounted",[o,l]=Gnt(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=GC(r.current);a.current=o==="mounted"?u:"none"},[o]),ya(()=>{const u=r.current,d=s.current;if(d!==t){const m=a.current,g=GC(u);t?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),ya(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=g=>{const b=GC(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&b&&(l("ANIMATION_END"),!s.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},m=g=>{g.target===e&&(a.current=GC(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:y.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function GC(t){return(t==null?void 0:t.animationName)||"none"}function Knt(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ynt=()=>{const t=ls(),e=Wn(({thread:r,message:s})=>!!(s.branchNumber>=s.branchCount||r.isRunning&&!r.capabilities.switchBranchDuringRun)),n=y.useCallback(()=>{t.message().switchToBranch({position:"next"})},[t]);return e?null:n},Xnt=D0("BranchPickerPrimitive.Next",Ynt),Jnt=()=>{const t=ls(),e=Wn(({thread:r,message:s})=>!!(s.branchNumber<=1||r.isRunning&&!r.capabilities.switchBranchDuringRun)),n=y.useCallback(()=>{t.message().switchToBranch({position:"previous"})},[t]);return e?null:n},Qnt=D0("BranchPickerPrimitive.Previous",Jnt),Znt=()=>Wn(({message:e})=>e.branchCount),bce=()=>{const t=Znt();return c.jsx(c.Fragment,{children:t})};bce.displayName="BranchPickerPrimitive.Count";var ert=()=>Wn(({message:e})=>e.branchNumber),wce=()=>{const t=ert();return c.jsx(c.Fragment,{children:t})};wce.displayName="BranchPickerPrimitive.Number";var Iw=t=>{const e=y.useRef(void 0);return y.useCallback(r=>{e.current&&e.current(),r&&(e.current=t(r))},[t])},BI=(t,e)=>{const n=y.useCallback(r=>{if(!t)return;const s=t(),a=()=>{const o=e?e(r):r.offsetHeight;s.setHeight(o)},i=new ResizeObserver(a);return i.observe(r),a(),()=>{i.disconnect(),s.unregister()}},[t,e]);return Iw(n)},nW=y.createContext(!1),rW=(t,e)=>{const n=t.match(/^([\d.]+)(em|px|rem)$/);if(!n)return 0;const r=parseFloat(n[1]),s=n[2];if(s==="px")return r;if(s==="em"){const a=parseFloat(getComputedStyle(e).fontSize)||16;return r*a}if(s==="rem"){const a=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;return r*a}return 0},Cce=({children:t,fillClampThreshold:e="10em",fillClampOffset:n="6em"})=>{const r=Wn(({message:l})=>l.isLast&&l.index>=2),s=BE({optional:!0}),a=y.useContext(nW),i=y.useCallback(l=>{if(!s||a)return;const u=()=>{const d=s.getState();if(d.turnAnchor==="top"&&r){const{viewport:f,inset:m,userMessage:g}=d.height,x=rW(e,l),b=rW(n,l),C=g<=x?g:b,S=Math.max(0,f-m-C);l.style.minHeight=`${S}px`,l.style.flexShrink="0",l.style.transition="min-height 0s"}else l.style.minHeight="",l.style.flexShrink="",l.style.transition=""};return u(),s.subscribe(u)},[s,r,a,e,n]),o=Iw(i);return c.jsx(nW.Provider,{value:!0,children:c.jsx(pce,{ref:o,children:t})})};Cce.displayName="ThreadPrimitive.ViewportSlack";var trt=()=>{const t=ls(),e=Wn(()=>t.message()),n=y.useCallback(r=>{const s=()=>{e.setIsHovering(!0)},a=()=>{e.setIsHovering(!1)};return r.addEventListener("mouseenter",s),r.addEventListener("mouseleave",a),r.matches(":hover")&&e.setIsHovering(!0),()=>{r.removeEventListener("mouseenter",s),r.removeEventListener("mouseleave",a),e.setIsHovering(!1)}},[e]);return Iw(n)},nrt=()=>{const t=Zg(s=>s.turnAnchor),e=Zg(s=>s.registerUserMessageHeight),n=Wn(({thread:s,message:a})=>{var i;return t==="top"&&a.role==="user"&&a.index===s.messages.length-2&&((i=s.messages.at(-1))==null?void 0:i.role)==="assistant"}),r=y.useCallback(s=>s.offsetHeight,[]);return BI(n?e:null,r)},LE=y.forwardRef((t,e)=>{const n=trt(),r=nrt(),s=Bt(e,n,r);return c.jsx(Cce,{children:c.jsx(Li.div,{...t,ref:s})})});LE.displayName="MessagePrimitive.Root";var Sce=()=>Wn(({part:e})=>{if(e.type!=="text"&&e.type!=="reasoning")throw new Error("MessagePartText can only be used inside text or reasoning message parts.");return e}),kce=y.forwardRef(({smooth:t=!0,component:e="span",...n},r)=>{const{text:s,status:a}=hce(Sce(),t);return c.jsx(e,{"data-status":a.type,...n,ref:r,children:s})});kce.displayName="MessagePartPrimitive.Text";var rrt=()=>Wn(({part:e})=>{if(e.type!=="image")throw new Error("MessagePartImage can only be used inside image message parts.");return e}),Ece=y.forwardRef((t,e)=>{const{image:n}=rrt();return c.jsx(Li.img,{src:n,...t,ref:e})});Ece.displayName="MessagePartPrimitive.Image";var _ce=({children:t})=>Wn(({part:n})=>n.status.type==="running")?t:null;_ce.displayName="MessagePartPrimitive.InProgress";const sW=t=>Symbol.iterator in t,aW=t=>"entries"in t,iW=(t,e)=>{const n=t instanceof Map?t:new Map(t.entries()),r=e instanceof Map?e:new Map(e.entries());if(n.size!==r.size)return!1;for(const[s,a]of n)if(!r.has(s)||!Object.is(a,r.get(s)))return!1;return!0},srt=(t,e)=>{const n=t[Symbol.iterator](),r=e[Symbol.iterator]();let s=n.next(),a=r.next();for(;!s.done&&!a.done;){if(!Object.is(s.value,a.value))return!1;s=n.next(),a=r.next()}return!!s.done&&!!a.done};function art(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:sW(t)&&sW(e)?aW(t)&&aW(e)?iW(t,e):srt(t,e):iW({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function irt(t){const e=Ce.useRef(void 0);return n=>{const r=t(n);return art(e.current,r)?e.current:e.current=r}}var oW=t=>{let e=-1;return{startGroup:n=>{e===-1&&(e=n)},endGroup:(n,r)=>{e!==-1&&(r.push({type:t,startIndex:e,endIndex:n}),e=-1)},finalize:(n,r)=>{e!==-1&&r.push({type:t,startIndex:e,endIndex:n})}}},ort=t=>{const e=[],n=oW("toolGroup"),r=oW("reasoningGroup");for(let s=0;s<t.length;s++){const a=t[s];a==="tool-call"?(r.endGroup(s-1,e),n.startGroup(s)):a==="reasoning"?(n.endGroup(s-1,e),r.startGroup(s)):(n.endGroup(s-1,e),r.endGroup(s-1,e),e.push({type:"single",index:s}))}return n.finalize(t.length-1,e),r.finalize(t.length-1,e),e},lrt=()=>{const t=Wn(irt(e=>e.message.parts.map(n=>n.type)));return y.useMemo(()=>t.length===0?[]:ort(t),[t])},crt=({Fallback:t,...e})=>{const n=Wn(({tools:r})=>{const s=r.tools[e.toolName]??t;return Array.isArray(s)?s[0]??t:s});return n?c.jsx(n,{...e}):null},pd={Text:()=>c.jsxs("p",{style:{whiteSpace:"pre-line"},children:[c.jsx(kce,{}),c.jsx(_ce,{children:c.jsx("span",{style:{fontFamily:"revert"},children:" "})})]}),Reasoning:()=>null,Source:()=>null,Image:()=>c.jsx(Ece,{}),File:()=>null,Unstable_Audio:()=>null,ToolGroup:({children:t})=>t,ReasoningGroup:({children:t})=>t},urt=({components:{Text:t=pd.Text,Reasoning:e=pd.Reasoning,Image:n=pd.Image,Source:r=pd.Source,File:s=pd.File,Unstable_Audio:a=pd.Unstable_Audio,tools:i={}}={}})=>{var d,f;const o=ls(),l=Wn(({part:m})=>m),u=l.type;if(u==="tool-call"){const m=o.part().addToolResult,g=o.part().resumeToolCall;if("Override"in i)return c.jsx(i.Override,{...l,addResult:m,resume:g});const x=((d=i.by_name)==null?void 0:d[l.toolName])??i.Fallback;return c.jsx(crt,{...l,Fallback:x,addResult:m,resume:g})}if(((f=l.status)==null?void 0:f.type)==="requires-action")throw new Error("Encountered unexpected requires-action status");switch(u){case"text":return c.jsx(t,{...l});case"reasoning":return c.jsx(e,{...l});case"source":return c.jsx(r,{...l});case"image":return c.jsx(n,{...l});case"file":return c.jsx(s,{...l});case"audio":return c.jsx(a,{...l});case"data":return null;default:const m=u;throw new Error(`Unknown message part type: ${m}`)}},GS=y.memo(({index:t,components:e})=>c.jsx(Htt,{index:t,children:c.jsx(urt,{components:e})}),(t,e)=>{var n,r,s,a,i,o,l,u,d,f,m,g,x,b,C,S,w,E;return t.index===e.index&&((n=t.components)==null?void 0:n.Text)===((r=e.components)==null?void 0:r.Text)&&((s=t.components)==null?void 0:s.Reasoning)===((a=e.components)==null?void 0:a.Reasoning)&&((i=t.components)==null?void 0:i.Source)===((o=e.components)==null?void 0:o.Source)&&((l=t.components)==null?void 0:l.Image)===((u=e.components)==null?void 0:u.Image)&&((d=t.components)==null?void 0:d.File)===((f=e.components)==null?void 0:f.File)&&((m=t.components)==null?void 0:m.Unstable_Audio)===((g=e.components)==null?void 0:g.Unstable_Audio)&&((x=t.components)==null?void 0:x.tools)===((b=e.components)==null?void 0:b.tools)&&((C=t.components)==null?void 0:C.ToolGroup)===((S=e.components)==null?void 0:S.ToolGroup)&&((w=t.components)==null?void 0:w.ReasoningGroup)===((E=e.components)==null?void 0:E.ReasoningGroup)});GS.displayName="MessagePrimitive.PartByIndex";var drt=({status:t,component:e})=>c.jsx(qtt,{text:"",isRunning:t.type==="running",children:c.jsx(e,{type:"text",text:"",status:t})}),hrt=Object.freeze({type:"complete"}),frt=({components:t})=>{const e=Wn(n=>n.message.status??hrt);return t!=null&&t.Empty?c.jsx(t.Empty,{status:e}):c.jsx(drt,{status:e,component:(t==null?void 0:t.Text)??pd.Text})},mrt=y.memo(frt,(t,e)=>{var n,r,s,a;return((n=t.components)==null?void 0:n.Empty)===((r=e.components)==null?void 0:r.Empty)&&((s=t.components)==null?void 0:s.Text)===((a=e.components)==null?void 0:a.Text)}),zE=({components:t})=>{const e=Wn(({message:s})=>s.parts.length),n=lrt(),r=y.useMemo(()=>e===0?c.jsx(mrt,{components:t}):n.map(s=>{if(s.type==="single")return c.jsx(GS,{index:s.index,components:t},s.index);if(s.type==="toolGroup"){const a=(t==null?void 0:t.ToolGroup)??pd.ToolGroup;return c.jsx(a,{startIndex:s.startIndex,endIndex:s.endIndex,children:Array.from({length:s.endIndex-s.startIndex+1},(i,o)=>c.jsx(GS,{index:s.startIndex+o,components:t},o))},`tool-${s.startIndex}`)}else{const a=(t==null?void 0:t.ReasoningGroup)??pd.ReasoningGroup;return c.jsx(a,{startIndex:s.startIndex,endIndex:s.endIndex,children:Array.from({length:s.endIndex-s.startIndex+1},(i,o)=>c.jsx(GS,{index:s.startIndex+o,components:t},o))},`reasoning-${s.startIndex}`)}}),[n,t,e]);return c.jsx(c.Fragment,{children:r})};zE.displayName="MessagePrimitive.Parts";var prt=t=>Wn(({message:e})=>{var d;const{role:n,attachments:r,parts:s,branchCount:a,isLast:i,speech:o,isCopied:l,isHovering:u}=e;return!(t.hasBranches===!0&&a<2||t.user&&n!=="user"||t.assistant&&n!=="assistant"||t.system&&n!=="system"||t.lastOrHover===!0&&!u&&!i||t.last!==void 0&&t.last!==i||t.copied===!0&&!l||t.copied===!1&&l||t.speaking===!0&&o==null||t.speaking===!1&&o!=null||t.hasAttachments===!0&&(n!=="user"||!(r!=null&&r.length))||t.hasAttachments===!1&&n==="user"&&(r!=null&&r.length)||t.hasContent===!0&&s.length===0||t.hasContent===!1&&s.length>0||t.submittedFeedback!==void 0&&(((d=e.metadata.submittedFeedback)==null?void 0:d.type)??null)!==t.submittedFeedback)}),Tce=({children:t,...e})=>prt(e)?t:null;Tce.displayName="MessagePrimitive.If";var Ace=({children:t})=>Wn(({message:n})=>{var r;return((r=n.status)==null?void 0:r.type)==="incomplete"&&n.status.reason==="error"})?t:null;Ace.displayName="MessagePrimitive.Error";var Nce=y.forwardRef(({hideWhenSingleBranch:t,...e},n)=>c.jsx(Tce,{hasBranches:t?!0:void 0,children:c.jsx(Li.div,{...e,ref:n})}));Nce.displayName="BranchPickerPrimitive.Root";var jce=()=>{const t=ls(),e=Wn(r=>r.thread.isRunning||!r.composer.isEditing||r.composer.isEmpty),n=y.useCallback(()=>{t.composer().send()},[t]);return e?null:n},Dce=D0("ComposerPrimitive.Send",jce),LI=y.forwardRef(({onSubmit:t,...e},n)=>{const r=jce(),s=a=>{a.preventDefault(),r&&r()};return c.jsx(Li.form,{...e,ref:n,onSubmit:Zr(t,s)})});LI.displayName="ComposerPrimitive.Root";var grt=y.useLayoutEffect,vrt=function(e){var n=Ce.useRef(e);return grt(function(){n.current=e}),n},lW=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},yrt=function(e,n){var r=Ce.useRef();return Ce.useCallback(function(s){e.current=s,r.current&&lW(r.current,null),r.current=n,n&&lW(n,s)},[n])},cW={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},xrt=function(e){Object.keys(cW).forEach(function(n){e.style.setProperty(n,cW[n],"important")})},uW=xrt,Ci=null,dW=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function brt(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ci||(Ci=document.createElement("textarea"),Ci.setAttribute("tabindex","-1"),Ci.setAttribute("aria-hidden","true"),uW(Ci)),Ci.parentNode===null&&document.body.appendChild(Ci);var s=t.paddingSize,a=t.borderSize,i=t.sizingStyle,o=i.boxSizing;Object.keys(i).forEach(function(m){var g=m;Ci.style[g]=i[g]}),uW(Ci),Ci.value=e;var l=dW(Ci,t);Ci.value=e,l=dW(Ci,t),Ci.value="x";var u=Ci.scrollHeight-s,d=u*n;o==="border-box"&&(d=d+s+a),l=Math.max(d,l);var f=u*r;return o==="border-box"&&(f=f+s+a),l=Math.min(f,l),[l,u]}var hW=function(){},wrt=function(e,n){return e.reduce(function(r,s){return r[s]=n[s],r},{})},Crt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Srt=!!document.documentElement.currentStyle,krt=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=wrt(Crt,n),s=r.boxSizing;if(s==="")return null;Srt&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:i}},Ert=krt;function zI(t,e,n){var r=vrt(n);y.useLayoutEffect(function(){var s=function(i){return r.current(i)};if(t)return t.addEventListener(e,s),function(){return t.removeEventListener(e,s)}},[])}var _rt=function(e,n){zI(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},Trt=function(e){zI(window,"resize",e)},Art=function(e){zI(document.fonts,"loadingdone",e)},Nrt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],jrt=function(e,n){var r=e.cacheMeasurements,s=e.maxRows,a=e.minRows,i=e.onChange,o=i===void 0?hW:i,l=e.onHeightChange,u=l===void 0?hW:l,d=kie(e,Nrt),f=d.value!==void 0,m=y.useRef(null),g=yrt(m,n),x=y.useRef(0),b=y.useRef(),C=function(){var E=m.current,T=r&&b.current?b.current:Ert(E);if(T){b.current=T;var _=brt(T,E.value||E.placeholder||"x",a,s),A=_[0],j=_[1];x.current!==A&&(x.current=A,E.style.setProperty("height",A+"px","important"),u(A,{rowHeight:j}))}},S=function(E){f||C(),o(E)};return y.useLayoutEffect(C),_rt(m,function(){if(!f){var w=m.current.value;requestAnimationFrame(function(){var E=m.current;E&&w!==E.value&&C()})}}),Trt(C),Art(C),y.createElement("textarea",YD({},d,{onChange:S,ref:g}))},Drt=y.forwardRef(jrt),Rce=t=>{const e=Pr(t),n=Zg(r=>r.onScrollToBottom);y.useEffect(()=>n(e),[n,e])},$I=y.forwardRef(({autoFocus:t=!1,asChild:e,disabled:n,onChange:r,onKeyDown:s,onPaste:a,submitOnEnter:i=!0,cancelOnEscape:o=!0,unstable_focusOnRunStart:l=!0,unstable_focusOnScrollToBottom:u=!0,unstable_focusOnThreadSwitched:d=!0,addAttachmentOnPaste:f=!0,...m},g)=>{const x=ls(),b=Wn(({composer:D})=>D.isEditing?D.text:""),C=e?pce:Drt,S=Wn(({thread:D})=>D.isDisabled)||n,w=y.useRef(null),E=Bt(g,w);gR(D=>{var F;if(!o||!((F=w.current)!=null&&F.contains(D.target)))return;const z=x.composer();z.getState().canCancel&&(z.cancel(),D.preventDefault())});const T=D=>{var z,F;S||!i||D.nativeEvent.isComposing||D.key==="Enter"&&D.shiftKey===!1&&(x.thread().getState().isRunning||(D.preventDefault(),(F=(z=w.current)==null?void 0:z.closest("form"))==null||F.requestSubmit()))},_=async D=>{var R;if(!f)return;const z=x.thread().getState().capabilities,F=Array.from(((R=D.clipboardData)==null?void 0:R.files)||[]);if(z.attachments&&F.length>0)try{D.preventDefault(),await Promise.all(F.map(L=>x.composer().addAttachment(L)))}catch(L){console.error("Error adding attachment:",L)}},A=t&&!S,j=y.useCallback(()=>{const D=w.current;!D||!A||(D.focus({preventScroll:!0}),D.setSelectionRange(D.value.length,D.value.length))},[A]);return y.useEffect(()=>j(),[j]),Rce(()=>{x.composer().getState().type==="thread"&&u&&j()}),y.useEffect(()=>{if(!(x.composer().getState().type!=="thread"||!l))return x.on("thread.run-start",j)},[l,j,x]),y.useEffect(()=>{if(!(x.composer().getState().type!=="thread"||!d))return x.on("thread-list-item.switched-to",j)},[d,j,x]),c.jsx(C,{name:"input",value:b,...m,ref:E,disabled:S,onChange:Zr(r,D=>{x.composer().getState().isEditing&&y7(()=>{x.composer().setText(D.target.value)})}),onKeyDown:Zr(s,T),onPaste:Zr(a,_)})});$I.displayName="ComposerPrimitive.Input";var Rrt=()=>{const t=ls(),e=Wn(({composer:r})=>!r.canCancel),n=y.useCallback(()=>{t.composer().cancel()},[t]);return e?null:n},Mce=D0("ComposerPrimitive.Cancel",Rrt),Ice=y.forwardRef((t,e)=>c.jsx(Li.div,{role:"alert",...t,ref:e}));Ice.displayName="ErrorPrimitive.Root";var Oce=y.forwardRef(({children:t,...e},n)=>{const r=Wn(({message:s})=>{var a;return((a=s.status)==null?void 0:a.type)==="incomplete"&&s.status.reason==="error"?s.status.error:void 0});return r===void 0?null:c.jsx(Li.span,{...e,ref:n,children:t??String(r)})});Oce.displayName="ErrorPrimitive.Message";var Pce=y.forwardRef((t,e)=>c.jsx(Li.div,{...t,ref:e}));Pce.displayName="ThreadPrimitive.Root";var Mrt=t=>{const e=Pr(t),n=y.useCallback(r=>{const s=new ResizeObserver(()=>{e()}),a=new MutationObserver(()=>{e()});return s.observe(r),a.observe(r,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{s.disconnect(),a.disconnect()}},[e]);return Iw(n)},Irt=({autoScroll:t,scrollToBottomOnRunStart:e=!0,scrollToBottomOnInitialize:n=!0,scrollToBottomOnThreadSwitch:r=!0})=>{const s=y.useRef(null),a=BE();t===void 0&&(t=a.getState().turnAnchor!=="top");const i=y.useRef(0),o=y.useRef(null),l=y.useCallback(g=>{const x=s.current;x&&(o.current=g,x.scrollTo({top:x.scrollHeight,behavior:g}))},[]),u=()=>{const g=s.current;if(!g)return;const x=a.getState().isAtBottom,b=Math.abs(g.scrollHeight-g.scrollTop-g.clientHeight)<1||g.scrollHeight<=g.clientHeight;!b&&i.current<g.scrollTop||(b&&(o.current=null),(b||o.current===null)&&b!==x&&fb(a).setState({isAtBottom:b})),i.current=g.scrollTop},d=Mrt(()=>{const g=o.current;g?l(g):t&&a.getState().isAtBottom&&l("instant"),u()}),f=Iw(g=>(g.addEventListener("scroll",u),()=>{g.removeEventListener("scroll",u)}));return Rce(({behavior:g})=>{l(g)}),aN("thread.run-start",()=>{e&&(o.current="auto",requestAnimationFrame(()=>{l("auto")}))}),aN("thread.initialize",()=>{n&&(o.current="instant",requestAnimationFrame(()=>{l("instant")}))}),aN("thread-list-item.switched-to",()=>{r&&(o.current="instant",requestAnimationFrame(()=>{l("instant")}))}),Bt(d,f,s)},Ort=()=>{const t=Zg(n=>n.registerViewport),e=y.useCallback(n=>n.clientHeight,[]);return BI(t,e)},Fce=y.forwardRef(({autoScroll:t,scrollToBottomOnRunStart:e,scrollToBottomOnInitialize:n,scrollToBottomOnThreadSwitch:r,children:s,...a},i)=>{const o=Irt({autoScroll:t,scrollToBottomOnRunStart:e,scrollToBottomOnInitialize:n,scrollToBottomOnThreadSwitch:r}),l=Ort(),u=Bt(i,o,l);return c.jsx(Li.div,{...a,ref:u,children:s})});Fce.displayName="ThreadPrimitive.ViewportScrollable";var Bce=y.forwardRef(({turnAnchor:t,...e},n)=>c.jsx(ice,{options:{turnAnchor:t},children:c.jsx(Fce,{...e,ref:n})}));Bce.displayName="ThreadPrimitive.Viewport";var Lce=y.forwardRef((t,e)=>{const n=Zg(i=>i.registerContentInset),r=y.useCallback(i=>{const o=parseFloat(getComputedStyle(i).marginTop)||0;return i.offsetHeight+o},[]),s=BI(n,r),a=Bt(e,s);return c.jsx(Li.div,{...t,ref:a})});Lce.displayName="ThreadPrimitive.ViewportFooter";var zce=(t,e)=>t.Message===e.Message&&t.EditComposer===e.EditComposer&&t.UserEditComposer===e.UserEditComposer&&t.AssistantEditComposer===e.AssistantEditComposer&&t.SystemEditComposer===e.SystemEditComposer&&t.UserMessage===e.UserMessage&&t.AssistantMessage===e.AssistantMessage&&t.SystemMessage===e.SystemMessage,Prt=()=>null,Frt=(t,e,n)=>{switch(e){case"user":return n?t.UserEditComposer??t.EditComposer??t.UserMessage??t.Message:t.UserMessage??t.Message;case"assistant":return n?t.AssistantEditComposer??t.EditComposer??t.AssistantMessage??t.Message:t.AssistantMessage??t.Message;case"system":return n?t.SystemEditComposer??t.EditComposer??t.SystemMessage??t.Message:t.SystemMessage??Prt;default:const r=e;throw new Error(`Unknown message role: ${r}`)}},Brt=({components:t})=>{const e=Wn(({message:s})=>s.role),n=Wn(({message:s})=>s.composer.isEditing),r=Frt(t,e,n);return c.jsx(r,{})},$ce=y.memo(({index:t,components:e})=>c.jsx(Utt,{index:t,children:c.jsx(Brt,{components:e})}),(t,e)=>t.index===e.index&&zce(t.components,e.components));$ce.displayName="ThreadPrimitive.MessageByIndex";var Uce=({components:t})=>{const e=Wn(({thread:r})=>r.messages.length);return y.useMemo(()=>e===0?null:Array.from({length:e},(r,s)=>c.jsx($ce,{index:s,components:t},s)),[e,t])};Uce.displayName="ThreadPrimitive.Messages";var Lrt=y.memo(Uce,(t,e)=>zce(t.components,e.components)),zrt=({behavior:t}={})=>{const e=Zg(s=>s.isAtBottom),n=BE(),r=y.useCallback(()=>{n.getState().scrollToBottom({behavior:t})},[n,t]);return e?null:r},$rt=D0("ThreadPrimitive.ScrollToBottom",zrt,["behavior"]),Hce=y.forwardRef(({onClick:t,disabled:e,...n},r)=>{const s=Wn(({threads:i})=>i.newThreadId===i.mainThreadId),a=ls();return c.jsx(Li.button,{type:"button",...s?{"data-active":"true","aria-current":"true"}:null,...n,ref:r,disabled:e,onClick:Zr(t,()=>{a.threads().switchToNewThread()})})});Hce.displayName="ThreadListPrimitive.New";var Vce=y.memo(({index:t,archived:e=!1,components:n})=>{const r=n.ThreadListItem;return c.jsx(ztt,{index:t,archived:e,children:c.jsx(r,{})})},(t,e)=>t.index===e.index&&t.archived===e.archived&&t.components.ThreadListItem===e.components.ThreadListItem);Vce.displayName="ThreadListPrimitive.ItemByIndex";var qce=({archived:t=!1,components:e})=>{const n=Wn(({threads:s})=>t?s.archivedThreadIds.length:s.threadIds.length);return y.useMemo(()=>Array.from({length:n},(s,a)=>c.jsx(Vce,{index:a,archived:t,components:e},a)),[n,t,e])};qce.displayName="ThreadListPrimitive.Items";var Gce=y.forwardRef((t,e)=>c.jsx(Li.div,{...t,ref:e}));Gce.displayName="ThreadListPrimitive.Root";var Wce=y.forwardRef((t,e)=>{const n=Wn(({threads:r,threadListItem:s})=>r.mainThreadId===s.id);return c.jsx(Li.div,{...n?{"data-active":"true","aria-current":"true"}:null,...t,ref:e})});Wce.displayName="ThreadListItemPrimitive.Root";var Urt=()=>{const t=ls();return y.useCallback(()=>{t.threadListItem().archive()},[t])},Hrt=D0("ThreadListItemPrimitive.Archive",Urt),Vrt=()=>{const t=ls();return y.useCallback(()=>{t.threadListItem().switchTo()},[t])},qrt=D0("ThreadListItemPrimitive.Trigger",Vrt),Kce=({fallback:t})=>{const e=Wn(({threadListItem:n})=>n.title);return c.jsx(c.Fragment,{children:e||t})};Kce.displayName="ThreadListItemPrimitive.Title";var Grt=t=>Wn(t.condition),ro=({children:t,condition:e})=>Grt({condition:e})?t:null;ro.displayName="AssistantIf";var Wrt=(t,e)=>typeof t=="string"?t===e:JSON.stringify(t)===JSON.stringify(e),Krt=(t,e)=>{if(!t||!e)return!1;const n=r=>{const{position:s,data:a,...i}=r||{};return i};return JSON.stringify(n(t.properties))===JSON.stringify(n(e.properties))&&Wrt(t.children,e.children)},UI=(t,e)=>Krt(t.node,e.node),Yrt=(t={})=>Object.fromEntries(Object.entries(t??{}).map(([e,n])=>{if(!n)return[e,n];const r=n,s=({node:a,...i})=>c.jsx(r,{...i});return[e,y.memo(s,UI)]})),HI=y.createContext(null),Yce=()=>y.useContext(HI)!==null,Xrt=({children:t,...e})=>c.jsx(HI.Provider,{value:e,children:t}),Jrt=y.memo(Xrt,UI),Qrt=({node:t,...e})=>c.jsx("pre",{...e}),Zrt=({node:t,...e})=>c.jsx("code",{...e}),VI=({node:t,components:{Pre:e,Code:n},code:r})=>c.jsx(e,{children:c.jsx(n,{node:t,children:r})}),est=()=>null,tst=({node:t,components:{Pre:e,Code:n,SyntaxHighlighter:r,CodeHeader:s},language:a,code:i})=>{const o=y.useMemo(()=>({Pre:e,Code:n}),[e,n]),l=a?r:VI;return c.jsxs(c.Fragment,{children:[c.jsx(s,{node:t,language:a,code:i}),c.jsx(l,{node:t,components:o,language:a??"unknown",code:i})]})},hN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var fW;function nst(){return fW||(fW=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",i=0;i<arguments.length;i++){var o=arguments[i];o&&(a=s(a,r(o)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var i="";for(var o in a)e.call(a,o)&&a[o]&&(i=s(i,o));return i}function s(a,i){return i?a?a+" "+i:a+i:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(hN)),hN.exports}var rst=nst();const Xce=Pa(rst);var mW=({className:t,...e})=>({className:n,...r})=>({className:Xce(t,n),...e,...r}),sst=({node:t,components:{Pre:e,Code:n,SyntaxHighlighter:r,CodeHeader:s},componentsByLanguage:a={},children:i,...o})=>{var C,S,w;const l=y.useContext(HI),u=mW(l),d=Pr(E=>c.jsx(e,{...u(E)})),f=mW(o),m=Pr(E=>c.jsx(n,{...f(E)})),g=((C=/language-(\w+)/.exec(o.className||""))==null?void 0:C[1])??"";if(typeof i!="string")return c.jsx(VI,{node:t,components:{Pre:d,Code:m},code:i});const x=((S=a[g])==null?void 0:S.SyntaxHighlighter)??r,b=((w=a[g])==null?void 0:w.CodeHeader)??s;return c.jsx(tst,{node:t,components:{Pre:d,Code:m,SyntaxHighlighter:x,CodeHeader:b},language:g||"unknown",code:i})},ast=({node:t,components:e,componentsByLanguage:n,...r})=>Yce()?c.jsx(sst,{node:t,components:e,componentsByLanguage:n,...r}):c.jsx(e.Code,{...r}),ist=y.memo(ast,(t,e)=>t.components===e.components&&t.componentsByLanguage===e.componentsByLanguage&&UI(t,e)),{useSmooth:ost,useSmoothStatus:lst,withSmoothContextProvider:cst}=bnt,ust=({components:t,componentsByLanguage:e,smooth:n=!0,preprocess:r,...s})=>{const a=Sce(),i=y.useMemo(()=>r?{...a,text:r(a.text)}:a,[a,r]),{text:o}=ost(i,n),{pre:l=Qrt,code:u=Zrt,SyntaxHighlighter:d=VI,CodeHeader:f=est}=t??{},m=y.useMemo(()=>({Pre:l,Code:u,SyntaxHighlighter:d,CodeHeader:f}),[l,u,d,f]),g=Pr(b=>c.jsx(ist,{components:m,componentsByLanguage:e,...b})),x=y.useMemo(()=>{const{pre:b,code:C,SyntaxHighlighter:S,CodeHeader:w,...E}=t??{};return{...E,pre:Jrt,code:g}},[g,t]);return c.jsx(CI,{components:x,...s,children:o})},Jce=y.forwardRef(({className:t,containerProps:e,containerComponent:n="div",...r},s)=>{const a=lst();return c.jsx(n,{"data-status":a.type,...e,className:Xce(t,e==null?void 0:e.className),ref:s,children:c.jsx(ust,{...r})})});Jce.displayName="MarkdownTextPrimitive";var dst=cst(Jce);const Su=y.forwardRef(({children:t,tooltip:e,side:n="bottom",className:r,...s},a)=>c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsxs(vn,{variant:"ghost",size:"icon",...s,className:ge("aui-button-icon size-6 p-1",r),ref:a,children:[c.jsx(cbe,{children:t}),c.jsx("span",{className:"aui-sr-only sr-only",children:e})]})}),c.jsx(va,{side:n,children:e})]}));Su.displayName="TooltipIconButton";function hst(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:a},exit:{mathFlow:s,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:o,mathText:i,mathTextData:o}};function t(l){const u={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[u]}},l)}function e(){this.buffer()}function n(){const l=this.resume(),u=this.stack[this.stack.length-1];u.type,u.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function s(l){const u=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),d=this.stack[this.stack.length-1];d.type,this.exit(l),d.value=u;const f=d.data.hChildren[0];f.type,f.tagName,f.children.push({type:"text",value:u}),this.data.mathFlowInside=void 0}function a(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function i(l){const u=this.resume(),d=this.stack[this.stack.length-1];d.type,this.exit(l),d.value=u,d.data.hChildren.push({type:"text",value:u})}function o(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function fst(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=s,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(a,i,o,l){const u=a.value||"",d=o.createTracker(l),f="$".repeat(Math.max(nle(u,"$")+1,2)),m=o.enter("mathFlow");let g=d.move(f);if(a.meta){const x=o.enter("mathFlowMeta");g+=d.move(o.safe(a.meta,{after:`
`,before:g,encode:["$"],...d.current()})),x()}return g+=d.move(`
`),u&&(g+=d.move(u+`
`)),g+=d.move(f),m(),g}function r(a,i,o){let l=a.value||"",u=1;for(e||u++;new RegExp("(^|[^$])"+"\\$".repeat(u)+"([^$]|$)").test(l);)u++;const d="$".repeat(u);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let f=-1;for(;++f<o.unsafe.length;){const m=o.unsafe[f];if(!m.atBreak)continue;const g=o.compilePattern(m);let x;for(;x=g.exec(l);){let b=x.index;l.codePointAt(b)===10&&l.codePointAt(b-1)===13&&b--,l=l.slice(0,b)+" "+l.slice(x.index+1)}}return d+l+d}function s(){return"$"}}const mst={tokenize:pst,concrete:!0,name:"mathFlow"},pW={tokenize:gst,partial:!0};function pst(t,e,n){const r=this,s=r.events[r.events.length-1],a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0;let i=0;return o;function o(w){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),l(w)}function l(w){return w===36?(t.consume(w),i++,l):i<2?n(w):(t.exit("mathFlowFenceSequence"),Cn(t,u,"whitespace")(w))}function u(w){return w===null||Dt(w)?f(w):(t.enter("mathFlowFenceMeta"),t.enter("chunkString",{contentType:"string"}),d(w))}function d(w){return w===null||Dt(w)?(t.exit("chunkString"),t.exit("mathFlowFenceMeta"),f(w)):w===36?n(w):(t.consume(w),d)}function f(w){return t.exit("mathFlowFence"),r.interrupt?e(w):t.attempt(pW,m,C)(w)}function m(w){return t.attempt({tokenize:S,partial:!0},C,g)(w)}function g(w){return(a?Cn(t,x,"linePrefix",a+1):x)(w)}function x(w){return w===null?C(w):Dt(w)?t.attempt(pW,m,C)(w):(t.enter("mathFlowValue"),b(w))}function b(w){return w===null||Dt(w)?(t.exit("mathFlowValue"),x(w)):(t.consume(w),b)}function C(w){return t.exit("mathFlow"),e(w)}function S(w,E,T){let _=0;return Cn(w,A,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function A(z){return w.enter("mathFlowFence"),w.enter("mathFlowFenceSequence"),j(z)}function j(z){return z===36?(_++,w.consume(z),j):_<i?T(z):(w.exit("mathFlowFenceSequence"),Cn(w,D,"whitespace")(z))}function D(z){return z===null||Dt(z)?(w.exit("mathFlowFence"),E(z)):T(z)}}}function gst(t,e,n){const r=this;return s;function s(i){return i===null?e(i):(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),a)}function a(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}function Qce(t){let n=(t||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:vst,previous:yst,name:"mathText"};function r(s,a,i){let o=0,l,u;return d;function d(b){return s.enter("mathText"),s.enter("mathTextSequence"),f(b)}function f(b){return b===36?(s.consume(b),o++,f):o<2&&!n?i(b):(s.exit("mathTextSequence"),m(b))}function m(b){return b===null?i(b):b===36?(u=s.enter("mathTextSequence"),l=0,x(b)):b===32?(s.enter("space"),s.consume(b),s.exit("space"),m):Dt(b)?(s.enter("lineEnding"),s.consume(b),s.exit("lineEnding"),m):(s.enter("mathTextData"),g(b))}function g(b){return b===null||b===32||b===36||Dt(b)?(s.exit("mathTextData"),m(b)):(s.consume(b),g)}function x(b){return b===36?(s.consume(b),l++,x):l===o?(s.exit("mathTextSequence"),s.exit("mathText"),a(b)):(u.type="mathTextData",g(b))}}}function vst(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[n][1].type="mathTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="mathTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function yst(t){return t!==36||this.events[this.events.length-1][1].type==="characterEscape"}const xst={tokenize:bst,concrete:!0,name:"mathTexFlow"},gW={tokenize:wst,partial:!0};function bst(t,e,n){const r=this,s=r.events[r.events.length-1],a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0;return i;function i(S){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),t.consume(S),o}function o(S){return S!==91?n(S):(t.consume(S),t.exit("mathFlowFenceSequence"),Cn(t,l,"whitespace"))}function l(S){return t.exit("mathFlowFence"),r.interrupt?e(S):t.attempt(gW,u,b)(S)}function u(S){return S===null?b(S):t.attempt({tokenize:C,partial:!0},b,d)(S)}function d(S){return(a?Cn(t,f,"linePrefix",a+1):f)(S)}function f(S){return S===null?b(S):S===92?t.attempt({tokenize:Cst,partial:!0},x,m)(S):Dt(S)?t.attempt(gW,u,b)(S):(t.enter("mathFlowValue"),x(S))}function m(S){return t.attempt({tokenize:C,partial:!0},b,g)(S)}function g(S){return t.enter("mathFlowValue"),t.consume(S),x}function x(S){return S===null||S===92||Dt(S)?(t.exit("mathFlowValue"),f(S)):(t.consume(S),x)}function b(S){return t.exit("mathFlow"),e(S)}function C(S,w,E){return Cn(S,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function T(j){return j===null?E(j):(S.enter("mathFlowFence"),S.enter("mathFlowFenceSequence"),S.consume(j),_)}function _(j){return j!==93?E(j):(S.consume(j),S.exit("mathFlowFenceSequence"),Cn(S,A,"whitespace"))}function A(j){return j===null||Dt(j)?(S.exit("mathFlowFence"),w(j)):E(j)}}}function wst(t,e,n){const r=this;return s;function s(i){return i===null?e(i):Dt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),a):a(i)}function a(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}function Cst(t,e,n){return r;function r(a){return t.enter("mathFlowValue"),t.consume(a),s}function s(a){return a===93?n(a):e(a)}}const Sst={tokenize:kst,resolve:Qce().resolve,previous:Est,name:"mathTexText"};function kst(t,e,n){let r,s;return a;function a(d){return t.enter("mathText"),t.enter("mathTextSequence"),t.consume(d),i}function i(d){return d!==40&&d!==91?n(d):(s=d,t.consume(d),t.exit("mathTextSequence"),o)}function o(d){return d===null?n(d):d===92?(r=t.enter("mathTextSequence"),t.consume(d),u):d===32?(t.enter("space"),t.consume(d),t.exit("space"),o):Dt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),o):(t.enter("mathTextData"),l(d))}function l(d){return d===null||d===32||d===92||Dt(d)?(t.exit("mathTextData"),o(d)):(t.consume(d),l)}function u(d){return d===(s===40?41:93)?(t.consume(d),t.exit("mathTextSequence"),t.exit("mathText"),e(d)):d===92?(t.consume(d),r.type="mathTextData",l):(r.type="mathTextData",l(d))}}function Est(t){return t!==92}function _st(t){return{flow:{36:mst,92:xst},text:{36:Qce(t),92:Sst}}}class Zi{constructor(e,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=r}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new Zi(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class Bo{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new Bo(n,Zi.range(this,e))}}class lt{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,s,a,i=n&&n.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?r+=" at end of input: ":r+=" at position "+(s+1)+": ";var l=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),r+=u+l+d}var f=new Error(r);return f.name="ParseError",f.__proto__=lt.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=e,f}}lt.prototype.__proto__=Error.prototype;var Tst=function(e,n){return e===void 0?n:e},Ast=/([A-Z])/g,Nst=function(e){return e.replace(Ast,"-$1").toLowerCase()},jst={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Dst=/[&><"']/g;function Rst(t){return String(t).replace(Dst,e=>jst[e])}var Zce=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Mst=function(e){var n=Zce(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},Ist=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Ost=function(e){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},lr={deflt:Tst,escape:Rst,hyphenate:Nst,getBaseElem:Zce,isCharacterBox:Mst,protocolFromUrl:Ost},WS={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Pst(t){if(t.default)return t.default;var e=t.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class qI{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in WS)if(WS.hasOwnProperty(n)){var r=WS[n];this[n]=e[n]!==void 0?r.processor?r.processor(e[n]):e[n]:Pst(r)}}reportNonstrict(e,n,r){var s=this.strict;if(typeof s=="function"&&(s=s(e,n,r)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new lt("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),r);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,r){var s=this.strict;if(typeof s=="function")try{s=s(e,n,r)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var n=lr.protocolFromUrl(e.url);if(n==null)return!1;e.protocol=n}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class Ph{constructor(e,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=r}sup(){return Jc[Fst[this.id]]}sub(){return Jc[Bst[this.id]]}fracNum(){return Jc[Lst[this.id]]}fracDen(){return Jc[zst[this.id]]}cramp(){return Jc[$st[this.id]]}text(){return Jc[Ust[this.id]]}isTight(){return this.size>=2}}var GI=0,g5=1,Eg=2,jd=3,mb=4,wl=5,ev=6,Di=7,Jc=[new Ph(GI,0,!1),new Ph(g5,0,!0),new Ph(Eg,1,!1),new Ph(jd,1,!0),new Ph(mb,2,!1),new Ph(wl,2,!0),new Ph(ev,3,!1),new Ph(Di,3,!0)],Fst=[mb,wl,mb,wl,ev,Di,ev,Di],Bst=[wl,wl,wl,wl,Di,Di,Di,Di],Lst=[Eg,jd,mb,wl,ev,Di,ev,Di],zst=[jd,jd,wl,wl,Di,Di,Di,Di],$st=[g5,g5,jd,jd,wl,wl,Di,Di],Ust=[GI,g5,Eg,jd,Eg,jd,Eg,jd],Vt={DISPLAY:Jc[GI],TEXT:Jc[Eg],SCRIPT:Jc[mb],SCRIPTSCRIPT:Jc[ev]},S7=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Hst(t){for(var e=0;e<S7.length;e++)for(var n=S7[e],r=0;r<n.blocks.length;r++){var s=n.blocks[r];if(t>=s[0]&&t<=s[1])return n.name}return null}var KS=[];S7.forEach(t=>t.blocks.forEach(e=>KS.push(...e)));function eue(t){for(var e=0;e<KS.length;e+=2)if(t>=KS[e]&&t<=KS[e+1])return!0;return!1}var Bp=80,Vst=function(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},qst=function(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},Gst=function(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},Wst=function(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},Kst=function(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},Yst=function(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},Xst=function(e,n,r){var s=r-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},Jst=function(e,n,r){n=1e3*n;var s="";switch(e){case"sqrtMain":s=Vst(n,Bp);break;case"sqrtSize1":s=qst(n,Bp);break;case"sqrtSize2":s=Gst(n,Bp);break;case"sqrtSize3":s=Wst(n,Bp);break;case"sqrtSize4":s=Kst(n,Bp);break;case"sqrtTall":s=Xst(n,Bp,r)}return s},Qst=function(e,n){switch(e){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},vW={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Zst=function(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let Ow=class{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){for(var e="",n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e}toText(){var e=n=>n.toText();return this.children.map(e).join("")}};var su={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},WC={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},yW={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function eat(t,e){su[t]=e}function WI(t,e,n){if(!su[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),s=su[e][r];if(!s&&t[0]in yW&&(r=yW[t[0]].charCodeAt(0),s=su[e][r]),!s&&n==="text"&&eue(r)&&(s=su[e][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var fN={};function tat(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!fN[e]){var n=fN[e]={cssEmPerMu:WC.quad[e]/18};for(var r in WC)WC.hasOwnProperty(r)&&(n[r]=WC[r][e])}return fN[e]}var nat=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],xW=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],bW=function(e,n){return n.size<2?e:nat[e-1][n.size-1]};class gd{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||gd.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=xW[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new gd(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:bW(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:xW[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=bW(gd.BASESIZE,e);return this.size===n&&this.textSize===gd.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==gd.BASESIZE?["sizing","reset-size"+this.size,"size"+gd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=tat(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}gd.BASESIZE=6;var k7={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},rat={ex:!0,em:!0,mu:!0},tue=function(e){return typeof e!="string"&&(e=e.unit),e in k7||e in rat||e==="ex"},ms=function(e,n){var r;if(e.unit in k7)r=k7[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var s;if(n.style.isTight()?s=n.havingStyle(n.style.text()):s=n,e.unit==="ex")r=s.fontMetrics().xHeight;else if(e.unit==="em")r=s.fontMetrics().quad;else throw new lt("Invalid unit: '"+e.unit+"'");s!==n&&(r*=s.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*r,n.maxSize)},gt=function(e){return+e.toFixed(4)+"em"},kf=function(e){return e.filter(n=>n).join(" ")},nue=function(e,n,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var s=n.getColor();s&&(this.style.color=s)}},rue=function(e){var n=document.createElement(e);n.className=kf(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&n.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)n.appendChild(this.children[a].toNode());return n},sat=/[\s"'>/=\x00-\x1f]/,sue=function(e){var n="<"+e;this.classes.length&&(n+=' class="'+lr.escape(kf(this.classes))+'"');var r="";for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=lr.hyphenate(s)+":"+this.style[s]+";");r&&(n+=' style="'+lr.escape(r)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(sat.test(a))throw new lt("Invalid attribute name '"+a+"'");n+=" "+a+'="'+lr.escape(this.attributes[a])+'"'}n+=">";for(var i=0;i<this.children.length;i++)n+=this.children[i].toMarkup();return n+="</"+e+">",n};class Pw{constructor(e,n,r,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,nue.call(this,e,r,s),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return this.classes.includes(e)}toNode(){return rue.call(this,"span")}toMarkup(){return sue.call(this,"span")}}class KI{constructor(e,n,r,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,nue.call(this,n,s),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return this.classes.includes(e)}toNode(){return rue.call(this,"a")}toMarkup(){return sue.call(this,"a")}}class aat{constructor(e,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e='<img src="'+lr.escape(this.src)+'"'+(' alt="'+lr.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=lr.hyphenate(r)+":"+this.style[r]+";");return n&&(e+=' style="'+lr.escape(n)+'"'),e+="'/>",e}}var iat={:"",:"",:"",:""};class Tl{constructor(e,n,r,s,a,i,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=r||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var u=Hst(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=iat[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=gt(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=kf(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=lr.escape(kf(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=lr.hyphenate(s)+":"+this.style[s]+";");r&&(e=!0,n+=' style="'+lr.escape(r)+'"');var a=lr.escape(this.text);return e?(n+=">",n+=a,n+="</span>",n):a}}class $d{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+lr.escape(this.attributes[n])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class Ef{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",vW[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+lr.escape(this.alternate)+'"/>':'<path d="'+lr.escape(vW[this.pathName])+'"/>'}}class E7{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+lr.escape(this.attributes[n])+'"');return e+="/>",e}}function wW(t){if(t instanceof Tl)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function oat(t){if(t instanceof Pw)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var lat={bin:1,close:1,inner:1,open:1,punct:1,rel:1},cat={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Kr={math:{},text:{}};function $(t,e,n,r,s,a){Kr[t][s]={font:e,group:n,replace:r},a&&r&&(Kr[t][r]=Kr[t][s])}var q="math",st="text",J="main",he="ams",cs="accent-token",At="bin",zi="close",Gv="inner",Ht="mathord",ea="op-token",Ko="open",$E="punct",me="rel",Zd="spacing",Ee="textord";$(q,J,me,"","\\equiv",!0);$(q,J,me,"","\\prec",!0);$(q,J,me,"","\\succ",!0);$(q,J,me,"","\\sim",!0);$(q,J,me,"","\\perp");$(q,J,me,"","\\preceq",!0);$(q,J,me,"","\\succeq",!0);$(q,J,me,"","\\simeq",!0);$(q,J,me,"","\\mid",!0);$(q,J,me,"","\\ll",!0);$(q,J,me,"","\\gg",!0);$(q,J,me,"","\\asymp",!0);$(q,J,me,"","\\parallel");$(q,J,me,"","\\bowtie",!0);$(q,J,me,"","\\smile",!0);$(q,J,me,"","\\sqsubseteq",!0);$(q,J,me,"","\\sqsupseteq",!0);$(q,J,me,"","\\doteq",!0);$(q,J,me,"","\\frown",!0);$(q,J,me,"","\\ni",!0);$(q,J,me,"","\\propto",!0);$(q,J,me,"","\\vdash",!0);$(q,J,me,"","\\dashv",!0);$(q,J,me,"","\\owns");$(q,J,$E,".","\\ldotp");$(q,J,$E,"","\\cdotp");$(q,J,Ee,"#","\\#");$(st,J,Ee,"#","\\#");$(q,J,Ee,"&","\\&");$(st,J,Ee,"&","\\&");$(q,J,Ee,"","\\aleph",!0);$(q,J,Ee,"","\\forall",!0);$(q,J,Ee,"","\\hbar",!0);$(q,J,Ee,"","\\exists",!0);$(q,J,Ee,"","\\nabla",!0);$(q,J,Ee,"","\\flat",!0);$(q,J,Ee,"","\\ell",!0);$(q,J,Ee,"","\\natural",!0);$(q,J,Ee,"","\\clubsuit",!0);$(q,J,Ee,"","\\wp",!0);$(q,J,Ee,"","\\sharp",!0);$(q,J,Ee,"","\\diamondsuit",!0);$(q,J,Ee,"","\\Re",!0);$(q,J,Ee,"","\\heartsuit",!0);$(q,J,Ee,"","\\Im",!0);$(q,J,Ee,"","\\spadesuit",!0);$(q,J,Ee,"","\\S",!0);$(st,J,Ee,"","\\S");$(q,J,Ee,"","\\P",!0);$(st,J,Ee,"","\\P");$(q,J,Ee,"","\\dag");$(st,J,Ee,"","\\dag");$(st,J,Ee,"","\\textdagger");$(q,J,Ee,"","\\ddag");$(st,J,Ee,"","\\ddag");$(st,J,Ee,"","\\textdaggerdbl");$(q,J,zi,"","\\rmoustache",!0);$(q,J,Ko,"","\\lmoustache",!0);$(q,J,zi,"","\\rgroup",!0);$(q,J,Ko,"","\\lgroup",!0);$(q,J,At,"","\\mp",!0);$(q,J,At,"","\\ominus",!0);$(q,J,At,"","\\uplus",!0);$(q,J,At,"","\\sqcap",!0);$(q,J,At,"","\\ast");$(q,J,At,"","\\sqcup",!0);$(q,J,At,"","\\bigcirc",!0);$(q,J,At,"","\\bullet",!0);$(q,J,At,"","\\ddagger");$(q,J,At,"","\\wr",!0);$(q,J,At,"","\\amalg");$(q,J,At,"&","\\And");$(q,J,me,"","\\longleftarrow",!0);$(q,J,me,"","\\Leftarrow",!0);$(q,J,me,"","\\Longleftarrow",!0);$(q,J,me,"","\\longrightarrow",!0);$(q,J,me,"","\\Rightarrow",!0);$(q,J,me,"","\\Longrightarrow",!0);$(q,J,me,"","\\leftrightarrow",!0);$(q,J,me,"","\\longleftrightarrow",!0);$(q,J,me,"","\\Leftrightarrow",!0);$(q,J,me,"","\\Longleftrightarrow",!0);$(q,J,me,"","\\mapsto",!0);$(q,J,me,"","\\longmapsto",!0);$(q,J,me,"","\\nearrow",!0);$(q,J,me,"","\\hookleftarrow",!0);$(q,J,me,"","\\hookrightarrow",!0);$(q,J,me,"","\\searrow",!0);$(q,J,me,"","\\leftharpoonup",!0);$(q,J,me,"","\\rightharpoonup",!0);$(q,J,me,"","\\swarrow",!0);$(q,J,me,"","\\leftharpoondown",!0);$(q,J,me,"","\\rightharpoondown",!0);$(q,J,me,"","\\nwarrow",!0);$(q,J,me,"","\\rightleftharpoons",!0);$(q,he,me,"","\\nless",!0);$(q,he,me,"","\\@nleqslant");$(q,he,me,"","\\@nleqq");$(q,he,me,"","\\lneq",!0);$(q,he,me,"","\\lneqq",!0);$(q,he,me,"","\\@lvertneqq");$(q,he,me,"","\\lnsim",!0);$(q,he,me,"","\\lnapprox",!0);$(q,he,me,"","\\nprec",!0);$(q,he,me,"","\\npreceq",!0);$(q,he,me,"","\\precnsim",!0);$(q,he,me,"","\\precnapprox",!0);$(q,he,me,"","\\nsim",!0);$(q,he,me,"","\\@nshortmid");$(q,he,me,"","\\nmid",!0);$(q,he,me,"","\\nvdash",!0);$(q,he,me,"","\\nvDash",!0);$(q,he,me,"","\\ntriangleleft");$(q,he,me,"","\\ntrianglelefteq",!0);$(q,he,me,"","\\subsetneq",!0);$(q,he,me,"","\\@varsubsetneq");$(q,he,me,"","\\subsetneqq",!0);$(q,he,me,"","\\@varsubsetneqq");$(q,he,me,"","\\ngtr",!0);$(q,he,me,"","\\@ngeqslant");$(q,he,me,"","\\@ngeqq");$(q,he,me,"","\\gneq",!0);$(q,he,me,"","\\gneqq",!0);$(q,he,me,"","\\@gvertneqq");$(q,he,me,"","\\gnsim",!0);$(q,he,me,"","\\gnapprox",!0);$(q,he,me,"","\\nsucc",!0);$(q,he,me,"","\\nsucceq",!0);$(q,he,me,"","\\succnsim",!0);$(q,he,me,"","\\succnapprox",!0);$(q,he,me,"","\\ncong",!0);$(q,he,me,"","\\@nshortparallel");$(q,he,me,"","\\nparallel",!0);$(q,he,me,"","\\nVDash",!0);$(q,he,me,"","\\ntriangleright");$(q,he,me,"","\\ntrianglerighteq",!0);$(q,he,me,"","\\@nsupseteqq");$(q,he,me,"","\\supsetneq",!0);$(q,he,me,"","\\@varsupsetneq");$(q,he,me,"","\\supsetneqq",!0);$(q,he,me,"","\\@varsupsetneqq");$(q,he,me,"","\\nVdash",!0);$(q,he,me,"","\\precneqq",!0);$(q,he,me,"","\\succneqq",!0);$(q,he,me,"","\\@nsubseteqq");$(q,he,At,"","\\unlhd");$(q,he,At,"","\\unrhd");$(q,he,me,"","\\nleftarrow",!0);$(q,he,me,"","\\nrightarrow",!0);$(q,he,me,"","\\nLeftarrow",!0);$(q,he,me,"","\\nRightarrow",!0);$(q,he,me,"","\\nleftrightarrow",!0);$(q,he,me,"","\\nLeftrightarrow",!0);$(q,he,me,"","\\vartriangle");$(q,he,Ee,"","\\hslash");$(q,he,Ee,"","\\triangledown");$(q,he,Ee,"","\\lozenge");$(q,he,Ee,"","\\circledS");$(q,he,Ee,"","\\circledR");$(st,he,Ee,"","\\circledR");$(q,he,Ee,"","\\measuredangle",!0);$(q,he,Ee,"","\\nexists");$(q,he,Ee,"","\\mho");$(q,he,Ee,"","\\Finv",!0);$(q,he,Ee,"","\\Game",!0);$(q,he,Ee,"","\\backprime");$(q,he,Ee,"","\\blacktriangle");$(q,he,Ee,"","\\blacktriangledown");$(q,he,Ee,"","\\blacksquare");$(q,he,Ee,"","\\blacklozenge");$(q,he,Ee,"","\\bigstar");$(q,he,Ee,"","\\sphericalangle",!0);$(q,he,Ee,"","\\complement",!0);$(q,he,Ee,"","\\eth",!0);$(st,J,Ee,"","");$(q,he,Ee,"","\\diagup");$(q,he,Ee,"","\\diagdown");$(q,he,Ee,"","\\square");$(q,he,Ee,"","\\Box");$(q,he,Ee,"","\\Diamond");$(q,he,Ee,"","\\yen",!0);$(st,he,Ee,"","\\yen",!0);$(q,he,Ee,"","\\checkmark",!0);$(st,he,Ee,"","\\checkmark");$(q,he,Ee,"","\\beth",!0);$(q,he,Ee,"","\\daleth",!0);$(q,he,Ee,"","\\gimel",!0);$(q,he,Ee,"","\\digamma",!0);$(q,he,Ee,"","\\varkappa");$(q,he,Ko,"","\\@ulcorner",!0);$(q,he,zi,"","\\@urcorner",!0);$(q,he,Ko,"","\\@llcorner",!0);$(q,he,zi,"","\\@lrcorner",!0);$(q,he,me,"","\\leqq",!0);$(q,he,me,"","\\leqslant",!0);$(q,he,me,"","\\eqslantless",!0);$(q,he,me,"","\\lesssim",!0);$(q,he,me,"","\\lessapprox",!0);$(q,he,me,"","\\approxeq",!0);$(q,he,At,"","\\lessdot");$(q,he,me,"","\\lll",!0);$(q,he,me,"","\\lessgtr",!0);$(q,he,me,"","\\lesseqgtr",!0);$(q,he,me,"","\\lesseqqgtr",!0);$(q,he,me,"","\\doteqdot");$(q,he,me,"","\\risingdotseq",!0);$(q,he,me,"","\\fallingdotseq",!0);$(q,he,me,"","\\backsim",!0);$(q,he,me,"","\\backsimeq",!0);$(q,he,me,"","\\subseteqq",!0);$(q,he,me,"","\\Subset",!0);$(q,he,me,"","\\sqsubset",!0);$(q,he,me,"","\\preccurlyeq",!0);$(q,he,me,"","\\curlyeqprec",!0);$(q,he,me,"","\\precsim",!0);$(q,he,me,"","\\precapprox",!0);$(q,he,me,"","\\vartriangleleft");$(q,he,me,"","\\trianglelefteq");$(q,he,me,"","\\vDash",!0);$(q,he,me,"","\\Vvdash",!0);$(q,he,me,"","\\smallsmile");$(q,he,me,"","\\smallfrown");$(q,he,me,"","\\bumpeq",!0);$(q,he,me,"","\\Bumpeq",!0);$(q,he,me,"","\\geqq",!0);$(q,he,me,"","\\geqslant",!0);$(q,he,me,"","\\eqslantgtr",!0);$(q,he,me,"","\\gtrsim",!0);$(q,he,me,"","\\gtrapprox",!0);$(q,he,At,"","\\gtrdot");$(q,he,me,"","\\ggg",!0);$(q,he,me,"","\\gtrless",!0);$(q,he,me,"","\\gtreqless",!0);$(q,he,me,"","\\gtreqqless",!0);$(q,he,me,"","\\eqcirc",!0);$(q,he,me,"","\\circeq",!0);$(q,he,me,"","\\triangleq",!0);$(q,he,me,"","\\thicksim");$(q,he,me,"","\\thickapprox");$(q,he,me,"","\\supseteqq",!0);$(q,he,me,"","\\Supset",!0);$(q,he,me,"","\\sqsupset",!0);$(q,he,me,"","\\succcurlyeq",!0);$(q,he,me,"","\\curlyeqsucc",!0);$(q,he,me,"","\\succsim",!0);$(q,he,me,"","\\succapprox",!0);$(q,he,me,"","\\vartriangleright");$(q,he,me,"","\\trianglerighteq");$(q,he,me,"","\\Vdash",!0);$(q,he,me,"","\\shortmid");$(q,he,me,"","\\shortparallel");$(q,he,me,"","\\between",!0);$(q,he,me,"","\\pitchfork",!0);$(q,he,me,"","\\varpropto");$(q,he,me,"","\\blacktriangleleft");$(q,he,me,"","\\therefore",!0);$(q,he,me,"","\\backepsilon");$(q,he,me,"","\\blacktriangleright");$(q,he,me,"","\\because",!0);$(q,he,me,"","\\llless");$(q,he,me,"","\\gggtr");$(q,he,At,"","\\lhd");$(q,he,At,"","\\rhd");$(q,he,me,"","\\eqsim",!0);$(q,J,me,"","\\Join");$(q,he,me,"","\\Doteq",!0);$(q,he,At,"","\\dotplus",!0);$(q,he,At,"","\\smallsetminus");$(q,he,At,"","\\Cap",!0);$(q,he,At,"","\\Cup",!0);$(q,he,At,"","\\doublebarwedge",!0);$(q,he,At,"","\\boxminus",!0);$(q,he,At,"","\\boxplus",!0);$(q,he,At,"","\\divideontimes",!0);$(q,he,At,"","\\ltimes",!0);$(q,he,At,"","\\rtimes",!0);$(q,he,At,"","\\leftthreetimes",!0);$(q,he,At,"","\\rightthreetimes",!0);$(q,he,At,"","\\curlywedge",!0);$(q,he,At,"","\\curlyvee",!0);$(q,he,At,"","\\circleddash",!0);$(q,he,At,"","\\circledast",!0);$(q,he,At,"","\\centerdot");$(q,he,At,"","\\intercal",!0);$(q,he,At,"","\\doublecap");$(q,he,At,"","\\doublecup");$(q,he,At,"","\\boxtimes",!0);$(q,he,me,"","\\dashrightarrow",!0);$(q,he,me,"","\\dashleftarrow",!0);$(q,he,me,"","\\leftleftarrows",!0);$(q,he,me,"","\\leftrightarrows",!0);$(q,he,me,"","\\Lleftarrow",!0);$(q,he,me,"","\\twoheadleftarrow",!0);$(q,he,me,"","\\leftarrowtail",!0);$(q,he,me,"","\\looparrowleft",!0);$(q,he,me,"","\\leftrightharpoons",!0);$(q,he,me,"","\\curvearrowleft",!0);$(q,he,me,"","\\circlearrowleft",!0);$(q,he,me,"","\\Lsh",!0);$(q,he,me,"","\\upuparrows",!0);$(q,he,me,"","\\upharpoonleft",!0);$(q,he,me,"","\\downharpoonleft",!0);$(q,J,me,"","\\origof",!0);$(q,J,me,"","\\imageof",!0);$(q,he,me,"","\\multimap",!0);$(q,he,me,"","\\leftrightsquigarrow",!0);$(q,he,me,"","\\rightrightarrows",!0);$(q,he,me,"","\\rightleftarrows",!0);$(q,he,me,"","\\twoheadrightarrow",!0);$(q,he,me,"","\\rightarrowtail",!0);$(q,he,me,"","\\looparrowright",!0);$(q,he,me,"","\\curvearrowright",!0);$(q,he,me,"","\\circlearrowright",!0);$(q,he,me,"","\\Rsh",!0);$(q,he,me,"","\\downdownarrows",!0);$(q,he,me,"","\\upharpoonright",!0);$(q,he,me,"","\\downharpoonright",!0);$(q,he,me,"","\\rightsquigarrow",!0);$(q,he,me,"","\\leadsto");$(q,he,me,"","\\Rrightarrow",!0);$(q,he,me,"","\\restriction");$(q,J,Ee,"","`");$(q,J,Ee,"$","\\$");$(st,J,Ee,"$","\\$");$(st,J,Ee,"$","\\textdollar");$(q,J,Ee,"%","\\%");$(st,J,Ee,"%","\\%");$(q,J,Ee,"_","\\_");$(st,J,Ee,"_","\\_");$(st,J,Ee,"_","\\textunderscore");$(q,J,Ee,"","\\angle",!0);$(q,J,Ee,"","\\infty",!0);$(q,J,Ee,"","\\prime");$(q,J,Ee,"","\\triangle");$(q,J,Ee,"","\\Gamma",!0);$(q,J,Ee,"","\\Delta",!0);$(q,J,Ee,"","\\Theta",!0);$(q,J,Ee,"","\\Lambda",!0);$(q,J,Ee,"","\\Xi",!0);$(q,J,Ee,"","\\Pi",!0);$(q,J,Ee,"","\\Sigma",!0);$(q,J,Ee,"","\\Upsilon",!0);$(q,J,Ee,"","\\Phi",!0);$(q,J,Ee,"","\\Psi",!0);$(q,J,Ee,"","\\Omega",!0);$(q,J,Ee,"A","");$(q,J,Ee,"B","");$(q,J,Ee,"E","");$(q,J,Ee,"Z","");$(q,J,Ee,"H","");$(q,J,Ee,"I","");$(q,J,Ee,"K","");$(q,J,Ee,"M","");$(q,J,Ee,"N","");$(q,J,Ee,"O","");$(q,J,Ee,"P","");$(q,J,Ee,"T","");$(q,J,Ee,"X","");$(q,J,Ee,"","\\neg",!0);$(q,J,Ee,"","\\lnot");$(q,J,Ee,"","\\top");$(q,J,Ee,"","\\bot");$(q,J,Ee,"","\\emptyset");$(q,he,Ee,"","\\varnothing");$(q,J,Ht,"","\\alpha",!0);$(q,J,Ht,"","\\beta",!0);$(q,J,Ht,"","\\gamma",!0);$(q,J,Ht,"","\\delta",!0);$(q,J,Ht,"","\\epsilon",!0);$(q,J,Ht,"","\\zeta",!0);$(q,J,Ht,"","\\eta",!0);$(q,J,Ht,"","\\theta",!0);$(q,J,Ht,"","\\iota",!0);$(q,J,Ht,"","\\kappa",!0);$(q,J,Ht,"","\\lambda",!0);$(q,J,Ht,"","\\mu",!0);$(q,J,Ht,"","\\nu",!0);$(q,J,Ht,"","\\xi",!0);$(q,J,Ht,"","\\omicron",!0);$(q,J,Ht,"","\\pi",!0);$(q,J,Ht,"","\\rho",!0);$(q,J,Ht,"","\\sigma",!0);$(q,J,Ht,"","\\tau",!0);$(q,J,Ht,"","\\upsilon",!0);$(q,J,Ht,"","\\phi",!0);$(q,J,Ht,"","\\chi",!0);$(q,J,Ht,"","\\psi",!0);$(q,J,Ht,"","\\omega",!0);$(q,J,Ht,"","\\varepsilon",!0);$(q,J,Ht,"","\\vartheta",!0);$(q,J,Ht,"","\\varpi",!0);$(q,J,Ht,"","\\varrho",!0);$(q,J,Ht,"","\\varsigma",!0);$(q,J,Ht,"","\\varphi",!0);$(q,J,At,"","*",!0);$(q,J,At,"+","+");$(q,J,At,"","-",!0);$(q,J,At,"","\\cdot",!0);$(q,J,At,"","\\circ",!0);$(q,J,At,"","\\div",!0);$(q,J,At,"","\\pm",!0);$(q,J,At,"","\\times",!0);$(q,J,At,"","\\cap",!0);$(q,J,At,"","\\cup",!0);$(q,J,At,"","\\setminus",!0);$(q,J,At,"","\\land");$(q,J,At,"","\\lor");$(q,J,At,"","\\wedge",!0);$(q,J,At,"","\\vee",!0);$(q,J,Ee,"","\\surd");$(q,J,Ko,"","\\langle",!0);$(q,J,Ko,"","\\lvert");$(q,J,Ko,"","\\lVert");$(q,J,zi,"?","?");$(q,J,zi,"!","!");$(q,J,zi,"","\\rangle",!0);$(q,J,zi,"","\\rvert");$(q,J,zi,"","\\rVert");$(q,J,me,"=","=");$(q,J,me,":",":");$(q,J,me,"","\\approx",!0);$(q,J,me,"","\\cong",!0);$(q,J,me,"","\\ge");$(q,J,me,"","\\geq",!0);$(q,J,me,"","\\gets");$(q,J,me,">","\\gt",!0);$(q,J,me,"","\\in",!0);$(q,J,me,"","\\@not");$(q,J,me,"","\\subset",!0);$(q,J,me,"","\\supset",!0);$(q,J,me,"","\\subseteq",!0);$(q,J,me,"","\\supseteq",!0);$(q,he,me,"","\\nsubseteq",!0);$(q,he,me,"","\\nsupseteq",!0);$(q,J,me,"","\\models");$(q,J,me,"","\\leftarrow",!0);$(q,J,me,"","\\le");$(q,J,me,"","\\leq",!0);$(q,J,me,"<","\\lt",!0);$(q,J,me,"","\\rightarrow",!0);$(q,J,me,"","\\to");$(q,he,me,"","\\ngeq",!0);$(q,he,me,"","\\nleq",!0);$(q,J,Zd,"","\\ ");$(q,J,Zd,"","\\space");$(q,J,Zd,"","\\nobreakspace");$(st,J,Zd,"","\\ ");$(st,J,Zd,""," ");$(st,J,Zd,"","\\space");$(st,J,Zd,"","\\nobreakspace");$(q,J,Zd,null,"\\nobreak");$(q,J,Zd,null,"\\allowbreak");$(q,J,$E,",",",");$(q,J,$E,";",";");$(q,he,At,"","\\barwedge",!0);$(q,he,At,"","\\veebar",!0);$(q,J,At,"","\\odot",!0);$(q,J,At,"","\\oplus",!0);$(q,J,At,"","\\otimes",!0);$(q,J,Ee,"","\\partial",!0);$(q,J,At,"","\\oslash",!0);$(q,he,At,"","\\circledcirc",!0);$(q,he,At,"","\\boxdot",!0);$(q,J,At,"","\\bigtriangleup");$(q,J,At,"","\\bigtriangledown");$(q,J,At,"","\\dagger");$(q,J,At,"","\\diamond");$(q,J,At,"","\\star");$(q,J,At,"","\\triangleleft");$(q,J,At,"","\\triangleright");$(q,J,Ko,"{","\\{");$(st,J,Ee,"{","\\{");$(st,J,Ee,"{","\\textbraceleft");$(q,J,zi,"}","\\}");$(st,J,Ee,"}","\\}");$(st,J,Ee,"}","\\textbraceright");$(q,J,Ko,"{","\\lbrace");$(q,J,zi,"}","\\rbrace");$(q,J,Ko,"[","\\lbrack",!0);$(st,J,Ee,"[","\\lbrack",!0);$(q,J,zi,"]","\\rbrack",!0);$(st,J,Ee,"]","\\rbrack",!0);$(q,J,Ko,"(","\\lparen",!0);$(q,J,zi,")","\\rparen",!0);$(st,J,Ee,"<","\\textless",!0);$(st,J,Ee,">","\\textgreater",!0);$(q,J,Ko,"","\\lfloor",!0);$(q,J,zi,"","\\rfloor",!0);$(q,J,Ko,"","\\lceil",!0);$(q,J,zi,"","\\rceil",!0);$(q,J,Ee,"\\","\\backslash");$(q,J,Ee,"","|");$(q,J,Ee,"","\\vert");$(st,J,Ee,"|","\\textbar",!0);$(q,J,Ee,"","\\|");$(q,J,Ee,"","\\Vert");$(st,J,Ee,"","\\textbardbl");$(st,J,Ee,"~","\\textasciitilde");$(st,J,Ee,"\\","\\textbackslash");$(st,J,Ee,"^","\\textasciicircum");$(q,J,me,"","\\uparrow",!0);$(q,J,me,"","\\Uparrow",!0);$(q,J,me,"","\\downarrow",!0);$(q,J,me,"","\\Downarrow",!0);$(q,J,me,"","\\updownarrow",!0);$(q,J,me,"","\\Updownarrow",!0);$(q,J,ea,"","\\coprod");$(q,J,ea,"","\\bigvee");$(q,J,ea,"","\\bigwedge");$(q,J,ea,"","\\biguplus");$(q,J,ea,"","\\bigcap");$(q,J,ea,"","\\bigcup");$(q,J,ea,"","\\int");$(q,J,ea,"","\\intop");$(q,J,ea,"","\\iint");$(q,J,ea,"","\\iiint");$(q,J,ea,"","\\prod");$(q,J,ea,"","\\sum");$(q,J,ea,"","\\bigotimes");$(q,J,ea,"","\\bigoplus");$(q,J,ea,"","\\bigodot");$(q,J,ea,"","\\oint");$(q,J,ea,"","\\oiint");$(q,J,ea,"","\\oiiint");$(q,J,ea,"","\\bigsqcup");$(q,J,ea,"","\\smallint");$(st,J,Gv,"","\\textellipsis");$(q,J,Gv,"","\\mathellipsis");$(st,J,Gv,"","\\ldots",!0);$(q,J,Gv,"","\\ldots",!0);$(q,J,Gv,"","\\@cdots",!0);$(q,J,Gv,"","\\ddots",!0);$(q,J,Ee,"","\\varvdots");$(st,J,Ee,"","\\varvdots");$(q,J,cs,"","\\acute");$(q,J,cs,"","\\grave");$(q,J,cs,"","\\ddot");$(q,J,cs,"~","\\tilde");$(q,J,cs,"","\\bar");$(q,J,cs,"","\\breve");$(q,J,cs,"","\\check");$(q,J,cs,"^","\\hat");$(q,J,cs,"","\\vec");$(q,J,cs,"","\\dot");$(q,J,cs,"","\\mathring");$(q,J,Ht,"","\\@imath");$(q,J,Ht,"","\\@jmath");$(q,J,Ee,"","");$(q,J,Ee,"","");$(st,J,Ee,"","\\i",!0);$(st,J,Ee,"","\\j",!0);$(st,J,Ee,"","\\ss",!0);$(st,J,Ee,"","\\ae",!0);$(st,J,Ee,"","\\oe",!0);$(st,J,Ee,"","\\o",!0);$(st,J,Ee,"","\\AE",!0);$(st,J,Ee,"","\\OE",!0);$(st,J,Ee,"","\\O",!0);$(st,J,cs,"","\\'");$(st,J,cs,"","\\`");$(st,J,cs,"","\\^");$(st,J,cs,"","\\~");$(st,J,cs,"","\\=");$(st,J,cs,"","\\u");$(st,J,cs,"","\\.");$(st,J,cs,"","\\c");$(st,J,cs,"","\\r");$(st,J,cs,"","\\v");$(st,J,cs,"",'\\"');$(st,J,cs,"","\\H");$(st,J,cs,"","\\textcircled");var aue={"--":!0,"---":!0,"``":!0,"''":!0};$(st,J,Ee,"","--",!0);$(st,J,Ee,"","\\textendash");$(st,J,Ee,"","---",!0);$(st,J,Ee,"","\\textemdash");$(st,J,Ee,"","`",!0);$(st,J,Ee,"","\\textquoteleft");$(st,J,Ee,"","'",!0);$(st,J,Ee,"","\\textquoteright");$(st,J,Ee,"","``",!0);$(st,J,Ee,"","\\textquotedblleft");$(st,J,Ee,"","''",!0);$(st,J,Ee,"","\\textquotedblright");$(q,J,Ee,"","\\degree",!0);$(st,J,Ee,"","\\degree");$(st,J,Ee,"","\\textdegree",!0);$(q,J,Ee,"","\\pounds");$(q,J,Ee,"","\\mathsterling",!0);$(st,J,Ee,"","\\pounds");$(st,J,Ee,"","\\textsterling",!0);$(q,he,Ee,"","\\maltese");$(st,he,Ee,"","\\maltese");var CW='0123456789/@."';for(var mN=0;mN<CW.length;mN++){var SW=CW.charAt(mN);$(q,J,Ee,SW,SW)}var kW='0123456789!@*()-=+";:?/.,';for(var pN=0;pN<kW.length;pN++){var EW=kW.charAt(pN);$(st,J,Ee,EW,EW)}var v5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var gN=0;gN<v5.length;gN++){var KC=v5.charAt(gN);$(q,J,Ht,KC,KC),$(st,J,Ee,KC,KC)}$(q,he,Ee,"C","");$(st,he,Ee,"C","");$(q,he,Ee,"H","");$(st,he,Ee,"H","");$(q,he,Ee,"N","");$(st,he,Ee,"N","");$(q,he,Ee,"P","");$(st,he,Ee,"P","");$(q,he,Ee,"Q","");$(st,he,Ee,"Q","");$(q,he,Ee,"R","");$(st,he,Ee,"R","");$(q,he,Ee,"Z","");$(st,he,Ee,"Z","");$(q,J,Ht,"h","");$(st,J,Ht,"h","");var an="";for(var Si=0;Si<v5.length;Si++){var _s=v5.charAt(Si);an=String.fromCharCode(55349,56320+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56372+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56424+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56580+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56684+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56736+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56788+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56840+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56944+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),Si<26&&(an=String.fromCharCode(55349,56632+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an),an=String.fromCharCode(55349,56476+Si),$(q,J,Ht,_s,an),$(st,J,Ee,_s,an))}an="";$(q,J,Ht,"k",an);$(st,J,Ee,"k",an);for(var xm=0;xm<10;xm++){var Fh=xm.toString();an=String.fromCharCode(55349,57294+xm),$(q,J,Ht,Fh,an),$(st,J,Ee,Fh,an),an=String.fromCharCode(55349,57314+xm),$(q,J,Ht,Fh,an),$(st,J,Ee,Fh,an),an=String.fromCharCode(55349,57324+xm),$(q,J,Ht,Fh,an),$(st,J,Ee,Fh,an),an=String.fromCharCode(55349,57334+xm),$(q,J,Ht,Fh,an),$(st,J,Ee,Fh,an)}var _7="";for(var vN=0;vN<_7.length;vN++){var YC=_7.charAt(vN);$(q,J,Ht,YC,YC),$(st,J,Ee,YC,YC)}var XC=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],_W=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],uat=function(e,n){var r=e.charCodeAt(0),s=e.charCodeAt(1),a=(r-55296)*1024+(s-56320)+65536,i=n==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[XC[o][2],XC[o][i]]}else if(120782<=a&&a<=120831){var l=Math.floor((a-120782)/10);return[_W[l][2],_W[l][i]]}else{if(a===120485||a===120486)return[XC[0][2],XC[0][i]];if(120486<a&&a<120782)return["",""];throw new lt("Unsupported character: "+e)}},UE=function(e,n,r){return Kr[r][e]&&Kr[r][e].replace&&(e=Kr[r][e].replace),{value:e,metrics:WI(e,n,r)}},ql=function(e,n,r,s,a){var i=UE(e,n,r),o=i.metrics;e=i.value;var l;if(o){var u=o.italic;(r==="text"||s&&s.font==="mathit")&&(u=0),l=new Tl(e,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+r+"'")),l=new Tl(e,0,0,0,0,0,a);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var d=s.getColor();d&&(l.style.color=d)}return l},dat=function(e,n,r,s){return s===void 0&&(s=[]),r.font==="boldsymbol"&&UE(e,"Main-Bold",n).metrics?ql(e,"Main-Bold",n,r,s.concat(["mathbf"])):e==="\\"||Kr[n][e].font==="main"?ql(e,"Main-Regular",n,r,s):ql(e,"AMS-Regular",n,r,s.concat(["amsrm"]))},hat=function(e,n,r,s,a){return a!=="textord"&&UE(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},fat=function(e,n,r){var s=e.mode,a=e.text,i=["mord"],o=s==="math"||s==="text"&&n.font,l=o?n.font:n.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=uat(a,s)),u.length>0)return ql(a,u,s,n,i.concat(d));if(l){var f,m;if(l==="boldsymbol"){var g=hat(a,s,n,i,r);f=g.fontName,m=[g.fontClass]}else o?(f=lue[l].fontName,m=[l]):(f=JC(l,n.fontWeight,n.fontShape),m=[l,n.fontWeight,n.fontShape]);if(UE(a,f,s).metrics)return ql(a,f,s,n,i.concat(m));if(aue.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var x=[],b=0;b<a.length;b++)x.push(ql(a[b],f,s,n,i.concat(m)));return oue(x)}}if(r==="mathord")return ql(a,"Math-Italic",s,n,i.concat(["mathnormal"]));if(r==="textord"){var C=Kr[s][a]&&Kr[s][a].font;if(C==="ams"){var S=JC("amsrm",n.fontWeight,n.fontShape);return ql(a,S,s,n,i.concat("amsrm",n.fontWeight,n.fontShape))}else if(C==="main"||!C){var w=JC("textrm",n.fontWeight,n.fontShape);return ql(a,w,s,n,i.concat(n.fontWeight,n.fontShape))}else{var E=JC(C,n.fontWeight,n.fontShape);return ql(a,E,s,n,i.concat(E,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},mat=(t,e)=>{if(kf(t.classes)!==kf(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var n=t.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var s in e.style)if(e.style.hasOwnProperty(s)&&t.style[s]!==e.style[s])return!1;return!0},pat=t=>{for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n instanceof Tl&&r instanceof Tl&&mat(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,t.splice(e+1,1),e--)}return t},YI=function(e){for(var n=0,r=0,s=0,a=0;a<e.children.length;a++){var i=e.children[a];i.height>n&&(n=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}e.height=n,e.depth=r,e.maxFontSize=s},Yi=function(e,n,r,s){var a=new Pw(e,n,r,s);return YI(a),a},iue=(t,e,n,r)=>new Pw(t,e,n,r),gat=function(e,n,r){var s=Yi([e],[],n);return s.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),s.style.borderBottomWidth=gt(s.height),s.maxFontSize=1,s},vat=function(e,n,r,s){var a=new KI(e,n,r,s);return YI(a),a},oue=function(e){var n=new Ow(e);return YI(n),n},yat=function(e,n){return e instanceof Ow?Yi([],[e],n):e},xat=function(e){if(e.positionType==="individualShift"){for(var n=e.children,r=[n[0]],s=-n[0].shift-n[0].elem.depth,a=s,i=1;i<n.length;i++){var o=-n[i].shift-a-n[i].elem.depth,l=o-(n[i-1].elem.height+n[i-1].elem.depth);a=a+o,r.push({type:"kern",size:l}),r.push(n[i])}return{children:r,depth:s}}var u;if(e.positionType==="top"){for(var d=e.positionData,f=0;f<e.children.length;f++){var m=e.children[f];d-=m.type==="kern"?m.size:m.elem.height+m.elem.depth}u=d}else if(e.positionType==="bottom")u=-e.positionData;else{var g=e.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")u=-g.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:u}},bat=function(e,n){for(var{children:r,depth:s}=xat(e),a=0,i=0;i<r.length;i++){var o=r[i];if(o.type==="elem"){var l=o.elem;a=Math.max(a,l.maxFontSize,l.height)}}a+=2;var u=Yi(["pstrut"],[]);u.style.height=gt(a);for(var d=[],f=s,m=s,g=s,x=0;x<r.length;x++){var b=r[x];if(b.type==="kern")g+=b.size;else{var C=b.elem,S=b.wrapperClasses||[],w=b.wrapperStyle||{},E=Yi(S,[u,C],void 0,w);E.style.top=gt(-a-g-C.depth),b.marginLeft&&(E.style.marginLeft=b.marginLeft),b.marginRight&&(E.style.marginRight=b.marginRight),d.push(E),g+=C.height+C.depth}f=Math.min(f,g),m=Math.max(m,g)}var T=Yi(["vlist"],d);T.style.height=gt(m);var _;if(f<0){var A=Yi([],[]),j=Yi(["vlist"],[A]);j.style.height=gt(-f);var D=Yi(["vlist-s"],[new Tl("")]);_=[Yi(["vlist-r"],[T,D]),Yi(["vlist-r"],[j])]}else _=[Yi(["vlist-r"],[T])];var z=Yi(["vlist-t"],_);return _.length===2&&z.classes.push("vlist-t2"),z.height=m,z.depth=-f,z},wat=(t,e)=>{var n=Yi(["mspace"],[],e),r=ms(t,e);return n.style.marginRight=gt(r),n},JC=function(e,n,r){var s="";switch(e){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=e}var a;return n==="textbf"&&r==="textit"?a="BoldItalic":n==="textbf"?a="Bold":n==="textit"?a="Italic":a="Regular",s+"-"+a},lue={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},cue={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Cat=function(e,n){var[r,s,a]=cue[e],i=new Ef(r),o=new $d([i],{width:gt(s),height:gt(a),style:"width:"+gt(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),l=iue(["overlay"],[o],n);return l.height=a,l.style.height=gt(a),l.style.width=gt(s),l},Re={fontMap:lue,makeSymbol:ql,mathsym:dat,makeSpan:Yi,makeSvgSpan:iue,makeLineSpan:gat,makeAnchor:vat,makeFragment:oue,wrapFragment:yat,makeVList:bat,makeOrd:fat,makeGlue:wat,staticSvg:Cat,svgData:cue,tryCombineChars:pat},fs={number:3,unit:"mu"},bm={number:4,unit:"mu"},ad={number:5,unit:"mu"},Sat={mord:{mop:fs,mbin:bm,mrel:ad,minner:fs},mop:{mord:fs,mop:fs,mrel:ad,minner:fs},mbin:{mord:bm,mop:bm,mopen:bm,minner:bm},mrel:{mord:ad,mop:ad,mopen:ad,minner:ad},mopen:{},mclose:{mop:fs,mbin:bm,mrel:ad,minner:fs},mpunct:{mord:fs,mop:fs,mrel:ad,mopen:fs,mclose:fs,mpunct:fs,minner:fs},minner:{mord:fs,mop:fs,mbin:bm,mrel:ad,mopen:fs,mpunct:fs,minner:fs}},kat={mord:{mop:fs},mop:{mord:fs,mop:fs},mbin:{},mrel:{},mopen:{},mclose:{mop:fs},mpunct:{},minner:{mop:fs}},uue={},y5={},x5={};function St(t){for(var{type:e,names:n,props:r,handler:s,htmlBuilder:a,mathmlBuilder:i}=t,o={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:s},l=0;l<n.length;++l)uue[n[l]]=o;e&&(a&&(y5[e]=a),i&&(x5[e]=i))}function R0(t){var{type:e,htmlBuilder:n,mathmlBuilder:r}=t;St({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var b5=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Fs=function(e){return e.type==="ordgroup"?e.body:[e]},Ud=Re.makeSpan,Eat=["leftmost","mbin","mopen","mrel","mop","mpunct"],_at=["rightmost","mrel","mclose","mpunct"],Tat={display:Vt.DISPLAY,text:Vt.TEXT,script:Vt.SCRIPT,scriptscript:Vt.SCRIPTSCRIPT},Aat={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ba=function(e,n,r,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<e.length;i++){var o=tr(e[i],n);if(o instanceof Ow){var l=o.children;a.push(...l)}else a.push(o)}if(Re.tryCombineChars(a),!r)return a;var u=n;if(e.length===1){var d=e[0];d.type==="sizing"?u=n.havingSize(d.size):d.type==="styling"&&(u=n.havingStyle(Tat[d.style]))}var f=Ud([s[0]||"leftmost"],[],n),m=Ud([s[1]||"rightmost"],[],n),g=r==="root";return TW(a,(x,b)=>{var C=b.classes[0],S=x.classes[0];C==="mbin"&&_at.includes(S)?b.classes[0]="mord":S==="mbin"&&Eat.includes(C)&&(x.classes[0]="mord")},{node:f},m,g),TW(a,(x,b)=>{var C=T7(b),S=T7(x),w=C&&S?x.hasClass("mtight")?kat[C][S]:Sat[C][S]:null;if(w)return Re.makeGlue(w,u)},{node:f},m,g),a},TW=function t(e,n,r,s,a){s&&e.push(s);for(var i=0;i<e.length;i++){var o=e[i],l=due(o);if(l){t(l.children,n,r,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=n(o,r.node);d&&(r.insertAfter?r.insertAfter(d):(e.unshift(d),i++))}u?r.node=o:a&&o.hasClass("newline")&&(r.node=Ud(["leftmost"])),r.insertAfter=(f=>m=>{e.splice(f+1,0,m),i++})(i)}s&&e.pop()},due=function(e){return e instanceof Ow||e instanceof KI||e instanceof Pw&&e.hasClass("enclosing")?e:null},Nat=function t(e,n){var r=due(e);if(r){var s=r.children;if(s.length){if(n==="right")return t(s[s.length-1],"right");if(n==="left")return t(s[0],"left")}}return e},T7=function(e,n){return e?(n&&(e=Nat(e,n)),Aat[e.classes[0]]||null):null},pb=function(e,n){var r=["nulldelimiter"].concat(e.baseSizingClasses());return Ud(n.concat(r))},tr=function(e,n,r){if(!e)return Ud();if(y5[e.type]){var s=y5[e.type](e,n);if(r&&n.size!==r.size){s=Ud(n.sizingClasses(r),[s],n);var a=n.sizeMultiplier/r.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new lt("Got group of unknown type: '"+e.type+"'")};function QC(t,e){var n=Ud(["base"],t,e),r=Ud(["strut"]);return r.style.height=gt(n.height+n.depth),n.depth&&(r.style.verticalAlign=gt(-n.depth)),n.children.unshift(r),n}function A7(t,e){var n=null;t.length===1&&t[0].type==="tag"&&(n=t[0].tag,t=t[0].body);var r=ba(t,e,"root"),s;r.length===2&&r[1].hasClass("tag")&&(s=r.pop());for(var a=[],i=[],o=0;o<r.length;o++)if(i.push(r[o]),r[o].hasClass("mbin")||r[o].hasClass("mrel")||r[o].hasClass("allowbreak")){for(var l=!1;o<r.length-1&&r[o+1].hasClass("mspace")&&!r[o+1].hasClass("newline");)o++,i.push(r[o]),r[o].hasClass("nobreak")&&(l=!0);l||(a.push(QC(i,e)),i=[])}else r[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(QC(i,e)),i=[]),a.push(r[o]));i.length>0&&a.push(QC(i,e));var u;n?(u=QC(ba(n,e,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=Ud(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=gt(d.height+d.depth),d.depth&&(f.style.verticalAlign=gt(-d.depth))}return d}function hue(t){return new Ow(t)}class Ao{constructor(e,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=kf(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof au&&this.children[r+1]instanceof au){for(var s=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof au;)s+=this.children[++r].toText();e.appendChild(new au(s).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=lr.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+lr.escape(kf(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class au{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return lr.escape(this.toText())}toText(){return this.text}}class jat{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",gt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+gt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var it={MathNode:Ao,TextNode:au,SpaceNode:jat,newDocumentFragment:hue},Al=function(e,n,r){return Kr[n][e]&&Kr[n][e].replace&&e.charCodeAt(0)!==55349&&!(aue.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=Kr[n][e].replace),new it.TextNode(e)},XI=function(e){return e.length===1?e[0]:new it.MathNode("mrow",e)},JI=function(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var s=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var a=e.text;if(["\\imath","\\jmath"].includes(a))return null;Kr[s][a]&&Kr[s][a].replace&&(a=Kr[s][a].replace);var i=Re.fontMap[r].fontName;return WI(a,i,s)?Re.fontMap[r].variant:null};function yN(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof au&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var n=t.children[0];return n instanceof au&&n.text===","}else return!1}var uo=function(e,n,r){if(e.length===1){var s=Lr(e[0],n);return r&&s instanceof Ao&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<e.length;o++){var l=Lr(e[o],n);if(l instanceof Ao&&i instanceof Ao){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(yN(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&yN(i))l.children=[...i.children,...l.children],a.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||yN(i))){var u=l.children[0];u instanceof Ao&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof au&&d.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof au&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(l),i=l}return a},_f=function(e,n,r){return XI(uo(e,n,r))},Lr=function(e,n){if(!e)return new it.MathNode("mrow");if(x5[e.type]){var r=x5[e.type](e,n);return r}else throw new lt("Got group of unknown type: '"+e.type+"'")};function AW(t,e,n,r,s){var a=uo(t,n),i;a.length===1&&a[0]instanceof Ao&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new it.MathNode("mrow",a);var o=new it.MathNode("annotation",[new it.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var l=new it.MathNode("semantics",[i,o]),u=new it.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return Re.makeSpan([d],[u])}var fue=function(e){return new gd({style:e.displayMode?Vt.DISPLAY:Vt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},mue=function(e,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),e=Re.makeSpan(r,[e])}return e},Dat=function(e,n,r){var s=fue(r),a;if(r.output==="mathml")return AW(e,n,s,r.displayMode,!0);if(r.output==="html"){var i=A7(e,s);a=Re.makeSpan(["katex"],[i])}else{var o=AW(e,n,s,r.displayMode,!1),l=A7(e,s);a=Re.makeSpan(["katex"],[o,l])}return mue(a,r)},Rat=function(e,n,r){var s=fue(r),a=A7(e,s),i=Re.makeSpan(["katex"],[a]);return mue(i,r)},Mat={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Iat=function(e){var n=new it.MathNode("mo",[new it.TextNode(Mat[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},Oat={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Pat=function(e){return e.type==="ordgroup"?e.body.length:1},Fat=function(e,n){function r(){var o=4e5,l=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var u=e,d=Pat(u.base),f,m,g;if(d>5)l==="widehat"||l==="widecheck"?(f=420,o=2364,g=.42,m=l+"4"):(f=312,o=2340,g=.34,m="tilde4");else{var x=[1,1,2,2,3,3][d];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][x],f=[0,239,300,360,420][x],g=[0,.24,.3,.3,.36,.42][x],m=l+x):(o=[0,600,1033,2339,2340][x],f=[0,260,286,306,312][x],g=[0,.26,.286,.3,.306,.34][x],m="tilde"+x)}var b=new Ef(m),C=new $d([b],{width:"100%",height:gt(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:Re.makeSvgSpan([],[C],n),minWidth:0,height:g}}else{var S=[],w=Oat[l],[E,T,_]=w,A=_/1e3,j=E.length,D,z;if(j===1){var F=w[3];D=["hide-tail"],z=[F]}else if(j===2)D=["halfarrow-left","halfarrow-right"],z=["xMinYMin","xMaxYMin"];else if(j===3)D=["brace-left","brace-center","brace-right"],z=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+j+" children.");for(var R=0;R<j;R++){var L=new Ef(E[R]),O=new $d([L],{width:"400em",height:gt(A),viewBox:"0 0 "+o+" "+_,preserveAspectRatio:z[R]+" slice"}),H=Re.makeSvgSpan([D[R]],[O],n);if(j===1)return{span:H,minWidth:T,height:A};H.style.height=gt(A),S.push(H)}return{span:Re.makeSpan(["stretchy"],S,n),minWidth:T,height:A}}}var{span:s,minWidth:a,height:i}=r();return s.height=i,s.style.height=gt(i),a>0&&(s.style.minWidth=gt(a)),s},Bat=function(e,n,r,s,a){var i,o=e.height+e.depth+r+s;if(/fbox|color|angl/.test(n)){if(i=Re.makeSpan(["stretchy",n],[],a),n==="fbox"){var l=a.color&&a.getColor();l&&(i.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(n)&&u.push(new E7({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&u.push(new E7({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new $d(u,{width:"100%",height:gt(o)});i=Re.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=gt(o),i},Hd={encloseSpan:Bat,mathMLnode:Iat,svgSpan:Fat};function Tn(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function QI(t){var e=HE(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function HE(t){return t&&(t.type==="atom"||cat.hasOwnProperty(t.type))?t:null}var ZI=(t,e)=>{var n,r,s;t&&t.type==="supsub"?(r=Tn(t.base,"accent"),n=r.base,t.base=n,s=oat(tr(t,e)),t.base=r):(r=Tn(t,"accent"),n=r.base);var a=tr(n,e.havingCrampedStyle()),i=r.isShifty&&lr.isCharacterBox(n),o=0;if(i){var l=lr.getBaseElem(n),u=tr(l,e.havingCrampedStyle());o=wW(u).skew}var d=r.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),m;if(r.isStretchy)m=Hd.svgSpan(r,e),m=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:m,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+gt(2*o)+")",marginLeft:gt(2*o)}:void 0}]},e);else{var g,x;r.label==="\\vec"?(g=Re.staticSvg("vec",e),x=Re.svgData.vec[1]):(g=Re.makeOrd({mode:r.mode,text:r.label},e,"textord"),g=wW(g),g.italic=0,x=g.width,d&&(f+=g.depth)),m=Re.makeSpan(["accent-body"],[g]);var b=r.label==="\\textcircled";b&&(m.classes.push("accent-full"),f=a.height);var C=o;b||(C-=x/2),m.style.left=gt(C),r.label==="\\textcircled"&&(m.style.top=".2em"),m=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:m}]},e)}var S=Re.makeSpan(["mord","accent"],[m],e);return s?(s.children[0]=S,s.height=Math.max(S.height,s.height),s.classes[0]="mord",s):S},pue=(t,e)=>{var n=t.isStretchy?Hd.mathMLnode(t.label):new it.MathNode("mo",[Al(t.label,t.mode)]),r=new it.MathNode("mover",[Lr(t.base,e),n]);return r.setAttribute("accent","true"),r},Lat=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));St({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var n=b5(e[0]),r=!Lat.test(t.funcName),s=!r||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:s,base:n}},htmlBuilder:ZI,mathmlBuilder:pue});St({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var n=e[0],r=t.parser.mode;return r==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:t.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:ZI,mathmlBuilder:pue});St({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=e[0];return{type:"accentUnder",mode:n.mode,label:r,base:s}},htmlBuilder:(t,e)=>{var n=tr(t.base,e),r=Hd.svgSpan(t,e),s=t.label==="\\utilde"?.12:0,a=Re.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:n}]},e);return Re.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(t,e)=>{var n=Hd.mathMLnode(t.label),r=new it.MathNode("munder",[Lr(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var ZC=t=>{var e=new it.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};St({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r,funcName:s}=t;return{type:"xArrow",mode:r.mode,label:s,body:e[0],below:n[0]}},htmlBuilder(t,e){var n=e.style,r=e.havingStyle(n.sup()),s=Re.wrapFragment(tr(t.body,r,e),e),a=t.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;t.below&&(r=e.havingStyle(n.sub()),i=Re.wrapFragment(tr(t.below,r,e),e),i.classes.push(a+"-arrow-pad"));var o=Hd.svgSpan(t,e),l=-e.fontMetrics().axisHeight+.5*o.height,u=-e.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||t.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-e.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l},{type:"elem",elem:i,shift:f}]},e)}else d=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l}]},e);return d.children[0].children[0].children[1].classes.push("svg-align"),Re.makeSpan(["mrel","x-arrow"],[d],e)},mathmlBuilder(t,e){var n=Hd.mathMLnode(t.label);n.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(t.body){var s=ZC(Lr(t.body,e));if(t.below){var a=ZC(Lr(t.below,e));r=new it.MathNode("munderover",[n,a,s])}else r=new it.MathNode("mover",[n,s])}else if(t.below){var i=ZC(Lr(t.below,e));r=new it.MathNode("munder",[n,i])}else r=ZC(),r=new it.MathNode("mover",[n,r]);return r}});var zat=Re.makeSpan;function gue(t,e){var n=ba(t.body,e,!0);return zat([t.mclass],n,e)}function vue(t,e){var n,r=uo(t.body,e);return t.mclass==="minner"?n=new it.MathNode("mpadded",r):t.mclass==="mord"?t.isCharacterBox?(n=r[0],n.type="mi"):n=new it.MathNode("mi",r):(t.isCharacterBox?(n=r[0],n.type="mo"):n=new it.MathNode("mo",r),t.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):t.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):t.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}St({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:n,funcName:r}=t,s=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:Fs(s),isCharacterBox:lr.isCharacterBox(s)}},htmlBuilder:gue,mathmlBuilder:vue});var VE=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};St({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:n}=t;return{type:"mclass",mode:n.mode,mclass:VE(e[0]),body:Fs(e[1]),isCharacterBox:lr.isCharacterBox(e[1])}}});St({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:n,funcName:r}=t,s=e[1],a=e[0],i;r!=="\\stackrel"?i=VE(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:Fs(s)},l={type:"supsub",mode:a.mode,base:o,sup:r==="\\underset"?null:a,sub:r==="\\underset"?a:null};return{type:"mclass",mode:n.mode,mclass:i,body:[l],isCharacterBox:lr.isCharacterBox(l)}},htmlBuilder:gue,mathmlBuilder:vue});St({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"pmb",mode:n.mode,mclass:VE(e[0]),body:Fs(e[0])}},htmlBuilder(t,e){var n=ba(t.body,e,!0),r=Re.makeSpan([t.mclass],n,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(t,e){var n=uo(t.body,e),r=new it.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var $at={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},NW=()=>({type:"styling",body:[],mode:"math",style:"display"}),jW=t=>t.type==="textord"&&t.text==="@",Uat=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Hat(t,e,n){var r=$at[t];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var s=n.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:r,mode:"math",family:"rel"},i=n.callFunction("\\Big",[a],[]),o=n.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[s,i,o]};return n.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Vat(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var n=t.fetch().text;if(n==="&"||n==="\\\\")t.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new lt("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var r=[],s=[r],a=0;a<e.length;a++){for(var i=e[a],o=NW(),l=0;l<i.length;l++)if(!jW(i[l]))o.body.push(i[l]);else{r.push(o),l+=1;var u=QI(i[l]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var m=!0,g=l+1;g<i.length;g++){if(Uat(i[g],u)){m=!1,l=g;break}if(jW(i[g]))throw new lt("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(m)throw new lt("Missing a "+u+" character to complete a CD arrow.",i[l])}else throw new lt('Expected one of "<>AV=|." after @',i[l]);var x=Hat(u,d,t),b={type:"styling",body:[x],mode:"math",style:"display"};r.push(b),o=NW()}a%2===0?r.push(o):r.shift(),r=[],s.push(r)}t.gullet.endGroup(),t.gullet.endGroup();var C=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:C,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}St({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:e[0]}},htmlBuilder(t,e){var n=e.havingStyle(e.style.sup()),r=Re.wrapFragment(tr(t.label,n,e),e);return r.classes.push("cd-label-"+t.side),r.style.bottom=gt(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(t,e){var n=new it.MathNode("mrow",[Lr(t.label,e)]);return n=new it.MathNode("mpadded",[n]),n.setAttribute("width","0"),t.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new it.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});St({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:n}=t;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(t,e){var n=Re.wrapFragment(tr(t.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(t,e){return new it.MathNode("mrow",[Lr(t.fragment,e)])}});St({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:n}=t,r=Tn(e[0],"ordgroup"),s=r.body,a="",i=0;i<s.length;i++){var o=Tn(s[i],"textord");a+=o.text}var l=parseInt(a),u;if(isNaN(l))throw new lt("\\@char has non-numeric argument "+a);if(l<0||l>=1114111)throw new lt("\\@char with invalid code point "+a);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:n.mode,text:u}}});var yue=(t,e)=>{var n=ba(t.body,e.withColor(t.color),!1);return Re.makeFragment(n)},xue=(t,e)=>{var n=uo(t.body,e.withColor(t.color)),r=new it.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};St({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:n}=t,r=Tn(e[0],"color-token").color,s=e[1];return{type:"color",mode:n.mode,color:r,body:Fs(s)}},htmlBuilder:yue,mathmlBuilder:xue});St({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:n,breakOnTokenText:r}=t,s=Tn(e[0],"color-token").color;n.gullet.macros.set("\\current@color",s);var a=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:s,body:a}},htmlBuilder:yue,mathmlBuilder:xue});St({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,n){var{parser:r}=t,s=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,a=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:a,size:s&&Tn(s,"size").value}},htmlBuilder(t,e){var n=Re.makeSpan(["mspace"],[],e);return t.newLine&&(n.classes.push("newline"),t.size&&(n.style.marginTop=gt(ms(t.size,e)))),n},mathmlBuilder(t,e){var n=new it.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",gt(ms(t.size,e)))),n}});var N7={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},bue=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new lt("Expected a control sequence",t);return e},qat=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},wue=(t,e,n,r)=>{var s=t.gullet.macros.get(n.text);s==null&&(n.noexpand=!0,s={tokens:[n],numArgs:0,unexpandable:!t.gullet.isExpandable(n.text)}),t.gullet.macros.set(e,s,r)};St({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:n}=t;e.consumeSpaces();var r=e.fetch();if(N7[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=N7[r.text]),Tn(e.parseFunction(),"internal");throw new lt("Invalid token after macro prefix",r)}});St({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=e.gullet.popToken(),s=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new lt("Expected a control sequence",r);for(var a=0,i,o=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){i=e.gullet.future(),o[a].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new lt('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==a+1)throw new lt('Argument number "'+r.text+'" out of order');a++,o.push([])}else{if(r.text==="EOF")throw new lt("Expected a macro definition");o[a].push(r.text)}var{tokens:l}=e.gullet.consumeArg();return i&&l.unshift(i),(n==="\\edef"||n==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(s,{tokens:l,numArgs:a,delimiters:o},n===N7[n]),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=bue(e.gullet.popToken());e.gullet.consumeSpaces();var s=qat(e);return wue(e,r,s,n==="\\\\globallet"),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=bue(e.gullet.popToken()),s=e.gullet.popToken(),a=e.gullet.popToken();return wue(e,r,a,n==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(s),{type:"internal",mode:e.mode}}});var Cx=function(e,n,r){var s=Kr.math[e]&&Kr.math[e].replace,a=WI(s||e,n,r);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return a},eO=function(e,n,r,s){var a=r.havingBaseStyle(n),i=Re.makeSpan(s.concat(a.sizingClasses(r)),[e],r),o=a.sizeMultiplier/r.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},Cue=function(e,n,r){var s=n.havingBaseStyle(r),a=(1-n.sizeMultiplier/s.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=gt(a),e.height-=a,e.depth+=a},Gat=function(e,n,r,s,a,i){var o=Re.makeSymbol(e,"Main-Regular",a,s),l=eO(o,n,s,i);return r&&Cue(l,s,n),l},Wat=function(e,n,r,s){return Re.makeSymbol(e,"Size"+n+"-Regular",r,s)},Sue=function(e,n,r,s,a,i){var o=Wat(e,n,a,s),l=eO(Re.makeSpan(["delimsizing","size"+n],[o],s),Vt.TEXT,s,i);return r&&Cue(l,s,Vt.TEXT),l},xN=function(e,n,r){var s;n==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=Re.makeSpan(["delimsizinginner",s],[Re.makeSpan([],[Re.makeSymbol(e,n,r)])]);return{type:"elem",elem:a}},bN=function(e,n,r){var s=su["Size4-Regular"][e.charCodeAt(0)]?su["Size4-Regular"][e.charCodeAt(0)][4]:su["Size1-Regular"][e.charCodeAt(0)][4],a=new Ef("inner",Qst(e,Math.round(1e3*n))),i=new $d([a],{width:gt(s),height:gt(n),style:"width:"+gt(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),o=Re.makeSvgSpan([],[i],r);return o.height=n,o.style.height=gt(n),o.style.width=gt(s),{type:"elem",elem:o}},j7=.008,eS={type:"kern",size:-1*j7},Kat=["|","\\lvert","\\rvert","\\vert"],Yat=["\\|","\\lVert","\\rVert","\\Vert"],kue=function(e,n,r,s,a,i){var o,l,u,d,f="",m=0;o=u=d=e,l=null;var g="Size1-Regular";e==="\\uparrow"?u=d="":e==="\\Uparrow"?u=d="":e==="\\downarrow"?o=u="":e==="\\Downarrow"?o=u="":e==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):e==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):Kat.includes(e)?(u="",f="vert",m=333):Yat.includes(e)?(u="",f="doublevert",m=556):e==="["||e==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",m=667):e==="]"||e==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",m=667):e==="\\lfloor"||e===""?(u=o="",d="",g="Size4-Regular",f="lfloor",m=667):e==="\\lceil"||e===""?(o="",u=d="",g="Size4-Regular",f="lceil",m=667):e==="\\rfloor"||e===""?(u=o="",d="",g="Size4-Regular",f="rfloor",m=667):e==="\\rceil"||e===""?(o="",u=d="",g="Size4-Regular",f="rceil",m=667):e==="("||e==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",m=875):e===")"||e==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",m=875):e==="\\{"||e==="\\lbrace"?(o="",l="",d="",u="",g="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(o="",l="",d="",u="",g="Size4-Regular"):e==="\\lgroup"||e===""?(o="",d="",u="",g="Size4-Regular"):e==="\\rgroup"||e===""?(o="",d="",u="",g="Size4-Regular"):e==="\\lmoustache"||e===""?(o="",d="",u="",g="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(o="",d="",u="",g="Size4-Regular");var x=Cx(o,g,a),b=x.height+x.depth,C=Cx(u,g,a),S=C.height+C.depth,w=Cx(d,g,a),E=w.height+w.depth,T=0,_=1;if(l!==null){var A=Cx(l,g,a);T=A.height+A.depth,_=2}var j=b+E+T,D=Math.max(0,Math.ceil((n-j)/(_*S))),z=j+D*_*S,F=s.fontMetrics().axisHeight;r&&(F*=s.sizeMultiplier);var R=z/2-F,L=[];if(f.length>0){var O=z-b-E,H=Math.round(z*1e3),P=Zst(f,Math.round(O*1e3)),I=new Ef(f,P),U=(m/1e3).toFixed(3)+"em",W=(H/1e3).toFixed(3)+"em",Y=new $d([I],{width:U,height:W,viewBox:"0 0 "+m+" "+H}),B=Re.makeSvgSpan([],[Y],s);B.height=H/1e3,B.style.width=U,B.style.height=W,L.push({type:"elem",elem:B})}else{if(L.push(xN(d,g,a)),L.push(eS),l===null){var Z=z-b-E+2*j7;L.push(bN(u,Z,s))}else{var le=(z-b-E-T)/2+2*j7;L.push(bN(u,le,s)),L.push(eS),L.push(xN(l,g,a)),L.push(eS),L.push(bN(u,le,s))}L.push(eS),L.push(xN(o,g,a))}var G=s.havingBaseStyle(Vt.TEXT),K=Re.makeVList({positionType:"bottom",positionData:R,children:L},G);return eO(Re.makeSpan(["delimsizing","mult"],[K],G),Vt.TEXT,s,i)},wN=80,CN=.08,SN=function(e,n,r,s,a){var i=Jst(e,s,r),o=new Ef(e,i),l=new $d([o],{width:"400em",height:gt(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Re.makeSvgSpan(["hide-tail"],[l],a)},Xat=function(e,n){var r=n.havingBaseSizing(),s=Aue("\\surd",e*r.sizeMultiplier,Tue,r),a=r.sizeMultiplier,i=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),o,l=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+wN,e<1?a=1:e<1.4&&(a=.7),l=(1+i+CN)/a,u=(1+i)/a,o=SN("sqrtMain",l,d,i,n),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+wN)*r1[s.size],u=(r1[s.size]+i)/a,l=(r1[s.size]+i+CN)/a,o=SN("sqrtSize"+s.size,l,d,i,n),o.style.minWidth="1.02em",f=1/a):(l=e+i+CN,u=e+i,d=Math.floor(1e3*e+i)+wN,o=SN("sqrtTall",l,d,i,n),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=gt(l),{span:o,advanceWidth:f,ruleWidth:(n.fontMetrics().sqrtRuleThickness+i)*a}},Eue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Jat=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],_ue=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],r1=[0,1.2,1.8,2.4,3],Qat=function(e,n,r,s,a){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Eue.includes(e)||_ue.includes(e))return Sue(e,n,!1,r,s,a);if(Jat.includes(e))return kue(e,r1[n],!1,r,s,a);throw new lt("Illegal delimiter: '"+e+"'")},Zat=[{type:"small",style:Vt.SCRIPTSCRIPT},{type:"small",style:Vt.SCRIPT},{type:"small",style:Vt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],eit=[{type:"small",style:Vt.SCRIPTSCRIPT},{type:"small",style:Vt.SCRIPT},{type:"small",style:Vt.TEXT},{type:"stack"}],Tue=[{type:"small",style:Vt.SCRIPTSCRIPT},{type:"small",style:Vt.SCRIPT},{type:"small",style:Vt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],tit=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Aue=function(e,n,r,s){for(var a=Math.min(2,3-s.style.size),i=a;i<r.length&&r[i].type!=="stack";i++){var o=Cx(e,tit(r[i]),"math"),l=o.height+o.depth;if(r[i].type==="small"){var u=s.havingBaseStyle(r[i].style);l*=u.sizeMultiplier}if(l>n)return r[i]}return r[r.length-1]},Nue=function(e,n,r,s,a,i){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var o;_ue.includes(e)?o=Zat:Eue.includes(e)?o=Tue:o=eit;var l=Aue(e,n,o,s);return l.type==="small"?Gat(e,l.style,r,s,a,i):l.type==="large"?Sue(e,l.size,r,s,a,i):kue(e,n,r,s,a,i)},nit=function(e,n,r,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(n-o,r+o),f=Math.max(d/500*l,2*d-u);return Nue(e,f,!0,s,a,i)},Dd={sqrtImage:Xat,sizedDelim:Qat,sizeToMaxHeight:r1,customSizedDelim:Nue,leftRightDelim:nit},DW={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},rit=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function qE(t,e){var n=HE(t);if(n&&rit.includes(n.text))return n;throw n?new lt("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",t):new lt("Invalid delimiter type '"+t.type+"'",t)}St({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var n=qE(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:DW[t.funcName].size,mclass:DW[t.funcName].mclass,delim:n.text}},htmlBuilder:(t,e)=>t.delim==="."?Re.makeSpan([t.mclass]):Dd.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Al(t.delim,t.mode));var n=new it.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=gt(Dd.sizeToMaxHeight[t.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function RW(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}St({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=t.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new lt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:qE(e[0],t).text,color:n}}});St({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=qE(e[0],t),r=t.parser;++r.leftrightDepth;var s=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var a=Tn(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:s,left:n.text,right:a.delim,rightColor:a.color}},htmlBuilder:(t,e)=>{RW(t);for(var n=ba(t.body,e,!0,["mopen","mclose"]),r=0,s=0,a=!1,i=0;i<n.length;i++)n[i].isMiddle?a=!0:(r=Math.max(n[i].height,r),s=Math.max(n[i].depth,s));r*=e.sizeMultiplier,s*=e.sizeMultiplier;var o;if(t.left==="."?o=pb(e,["mopen"]):o=Dd.leftRightDelim(t.left,r,s,e,t.mode,["mopen"]),n.unshift(o),a)for(var l=1;l<n.length;l++){var u=n[l],d=u.isMiddle;d&&(n[l]=Dd.leftRightDelim(d.delim,r,s,d.options,t.mode,[]))}var f;if(t.right===".")f=pb(e,["mclose"]);else{var m=t.rightColor?e.withColor(t.rightColor):e;f=Dd.leftRightDelim(t.right,r,s,m,t.mode,["mclose"])}return n.push(f),Re.makeSpan(["minner"],n,e)},mathmlBuilder:(t,e)=>{RW(t);var n=uo(t.body,e);if(t.left!=="."){var r=new it.MathNode("mo",[Al(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(t.right!=="."){var s=new it.MathNode("mo",[Al(t.right,t.mode)]);s.setAttribute("fence","true"),t.rightColor&&s.setAttribute("mathcolor",t.rightColor),n.push(s)}return XI(n)}});St({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=qE(e[0],t);if(!t.parser.leftrightDepth)throw new lt("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:(t,e)=>{var n;if(t.delim===".")n=pb(e,[]);else{n=Dd.sizedDelim(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};n.isMiddle=r}return n},mathmlBuilder:(t,e)=>{var n=t.delim==="\\vert"||t.delim==="|"?Al("|","text"):Al(t.delim,t.mode),r=new it.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var tO=(t,e)=>{var n=Re.wrapFragment(tr(t.body,e),e),r=t.label.slice(1),s=e.sizeMultiplier,a,i=0,o=lr.isCharacterBox(t.body);if(r==="sout")a=Re.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/s,i=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var l=ms({number:.6,unit:"pt"},e),u=ms({number:.35,unit:"ex"},e),d=e.havingBaseSizing();s=s/d.sizeMultiplier;var f=n.height+n.depth+l+u;n.style.paddingLeft=gt(f/2+l);var m=Math.floor(1e3*f*s),g=Yst(m),x=new $d([new Ef("phase",g)],{width:"400em",height:gt(m/1e3),viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});a=Re.makeSvgSpan(["hide-tail"],[x],e),a.style.height=gt(f),i=n.depth+l+u}else{/cancel/.test(r)?o||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var b=0,C=0,S=0;/box/.test(r)?(S=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),b=e.fontMetrics().fboxsep+(r==="colorbox"?0:S),C=b):r==="angl"?(S=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),b=4*S,C=Math.max(0,.25-n.depth)):(b=o?.2:0,C=b),a=Hd.encloseSpan(n,r,b,C,e),/fbox|boxed|fcolorbox/.test(r)?(a.style.borderStyle="solid",a.style.borderWidth=gt(S)):r==="angl"&&S!==.049&&(a.style.borderTopWidth=gt(S),a.style.borderRightWidth=gt(S)),i=n.depth+C,t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,t.borderColor&&(a.style.borderColor=t.borderColor))}var w;if(t.backgroundColor)w=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:n,shift:0}]},e);else{var E=/cancel|phase/.test(r)?["svg-align"]:[];w=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:E}]},e)}return/cancel/.test(r)&&(w.height=n.height,w.depth=n.depth),/cancel/.test(r)&&!o?Re.makeSpan(["mord","cancel-lap"],[w],e):Re.makeSpan(["mord"],[w],e)},nO=(t,e)=>{var n=0,r=new it.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Lr(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),t.label==="\\fcolorbox"){var s=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+s+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};St({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,n){var{parser:r,funcName:s}=t,a=Tn(e[0],"color-token").color,i=e[1];return{type:"enclose",mode:r.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:tO,mathmlBuilder:nO});St({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,n){var{parser:r,funcName:s}=t,a=Tn(e[0],"color-token").color,i=Tn(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:r.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:tO,mathmlBuilder:nO});St({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}});St({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t,s=e[0];return{type:"enclose",mode:n.mode,label:r,body:s}},htmlBuilder:tO,mathmlBuilder:nO});St({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var jue={};function Ru(t){for(var{type:e,names:n,props:r,handler:s,htmlBuilder:a,mathmlBuilder:i}=t,o={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<n.length;++l)jue[n[l]]=o;a&&(y5[e]=a),i&&(x5[e]=i)}var Due={};function re(t,e){Due[t]=e}function MW(t){var e=[];t.consumeSpaces();var n=t.fetch().text;for(n==="\\relax"&&(t.consume(),t.consumeSpaces(),n=t.fetch().text);n==="\\hline"||n==="\\hdashline";)t.consume(),e.push(n==="\\hdashline"),t.consumeSpaces(),n=t.fetch().text;return e}var GE=t=>{var e=t.parser.settings;if(!e.displayMode)throw new lt("{"+t.envName+"} can be used only in display mode.")};function rO(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Hf(t,e,n){var{hskipBeforeAndAfter:r,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:l,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:m}=e;if(t.gullet.beginGroup(),u||t.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=t.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new lt("Invalid \\arraystretch: "+g)}t.gullet.beginGroup();var x=[],b=[x],C=[],S=[],w=l!=null?[]:void 0;function E(){l&&t.gullet.macros.set("\\@eqnsw","1",!0)}function T(){w&&(t.gullet.macros.get("\\df@tag")?(w.push(t.subparse([new Bo("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):w.push(!!l&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(E(),S.push(MW(t));;){var _=t.parseExpression(!1,u?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),_={type:"ordgroup",mode:t.mode,body:_},n&&(_={type:"styling",mode:t.mode,style:n,body:[_]}),x.push(_);var A=t.fetch().text;if(A==="&"){if(f&&x.length===f){if(u||o)throw new lt("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(A==="\\end"){T(),x.length===1&&_.type==="styling"&&_.body[0].body.length===0&&(b.length>1||!d)&&b.pop(),S.length<b.length+1&&S.push([]);break}else if(A==="\\\\"){t.consume();var j=void 0;t.gullet.future().text!==" "&&(j=t.parseSizeGroup(!0)),C.push(j?j.value:null),T(),S.push(MW(t)),x=[],b.push(x),E()}else throw new lt("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:s,arraystretch:i,body:b,cols:a,rowGaps:C,hskipBeforeAndAfter:r,hLinesBeforeRow:S,colSeparationType:o,tags:w,leqno:m}}function sO(t){return t.slice(0,1)==="d"?"display":"text"}var Mu=function(e,n){var r,s,a=e.body.length,i=e.hLinesBeforeRow,o=0,l=new Array(a),u=[],d=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),f=1/n.fontMetrics().ptPerEm,m=5*f;if(e.colSeparationType&&e.colSeparationType==="small"){var g=n.havingStyle(Vt.SCRIPT).sizeMultiplier;m=.2778*(g/n.sizeMultiplier)}var x=e.colSeparationType==="CD"?ms({number:3,unit:"ex"},n):12*f,b=3*f,C=e.arraystretch*x,S=.7*C,w=.3*C,E=0;function T($e){for(var Le=0;Le<$e.length;++Le)Le>0&&(E+=.25),u.push({pos:E,isDashed:$e[Le]})}for(T(i[0]),r=0;r<e.body.length;++r){var _=e.body[r],A=S,j=w;o<_.length&&(o=_.length);var D=new Array(_.length);for(s=0;s<_.length;++s){var z=tr(_[s],n);j<z.depth&&(j=z.depth),A<z.height&&(A=z.height),D[s]=z}var F=e.rowGaps[r],R=0;F&&(R=ms(F,n),R>0&&(R+=w,j<R&&(j=R),R=0)),e.addJot&&(j+=b),D.height=A,D.depth=j,E+=A,D.pos=E,E+=j+R,l[r]=D,T(i[r+1])}var L=E/2+n.fontMetrics().axisHeight,O=e.cols||[],H=[],P,I,U=[];if(e.tags&&e.tags.some($e=>$e))for(r=0;r<a;++r){var W=l[r],Y=W.pos-L,B=e.tags[r],Z=void 0;B===!0?Z=Re.makeSpan(["eqn-num"],[],n):B===!1?Z=Re.makeSpan([],[],n):Z=Re.makeSpan([],ba(B,n,!0),n),Z.depth=W.depth,Z.height=W.height,U.push({type:"elem",elem:Z,shift:Y})}for(s=0,I=0;s<o||I<O.length;++s,++I){for(var le=O[I]||{},G=!0;le.type==="separator";){if(G||(P=Re.makeSpan(["arraycolsep"],[]),P.style.width=gt(n.fontMetrics().doubleRuleSep),H.push(P)),le.separator==="|"||le.separator===":"){var K=le.separator==="|"?"solid":"dashed",te=Re.makeSpan(["vertical-separator"],[],n);te.style.height=gt(E),te.style.borderRightWidth=gt(d),te.style.borderRightStyle=K,te.style.margin="0 "+gt(-d/2);var ie=E-L;ie&&(te.style.verticalAlign=gt(-ie)),H.push(te)}else throw new lt("Invalid separator type: "+le.separator);I++,le=O[I]||{},G=!1}if(!(s>=o)){var de=void 0;(s>0||e.hskipBeforeAndAfter)&&(de=lr.deflt(le.pregap,m),de!==0&&(P=Re.makeSpan(["arraycolsep"],[]),P.style.width=gt(de),H.push(P)));var fe=[];for(r=0;r<a;++r){var se=l[r],ce=se[s];if(ce){var ue=se.pos-L;ce.depth=se.depth,ce.height=se.height,fe.push({type:"elem",elem:ce,shift:ue})}}fe=Re.makeVList({positionType:"individualShift",children:fe},n),fe=Re.makeSpan(["col-align-"+(le.align||"c")],[fe]),H.push(fe),(s<o-1||e.hskipBeforeAndAfter)&&(de=lr.deflt(le.postgap,m),de!==0&&(P=Re.makeSpan(["arraycolsep"],[]),P.style.width=gt(de),H.push(P)))}}if(l=Re.makeSpan(["mtable"],H),u.length>0){for(var oe=Re.makeLineSpan("hline",n,d),Ne=Re.makeLineSpan("hdashline",n,d),ve=[{type:"elem",elem:l,shift:0}];u.length>0;){var He=u.pop(),nt=He.pos-L;He.isDashed?ve.push({type:"elem",elem:Ne,shift:nt}):ve.push({type:"elem",elem:oe,shift:nt})}l=Re.makeVList({positionType:"individualShift",children:ve},n)}if(U.length===0)return Re.makeSpan(["mord"],[l],n);var Me=Re.makeVList({positionType:"individualShift",children:U},n);return Me=Re.makeSpan(["tag"],[Me],n),Re.makeFragment([l,Me])},sit={c:"center ",l:"left ",r:"right "},Iu=function(e,n){for(var r=[],s=new it.MathNode("mtd",[],["mtr-glue"]),a=new it.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<e.body.length;i++){for(var o=e.body[i],l=[],u=0;u<o.length;u++)l.push(new it.MathNode("mtd",[Lr(o[u],n)]));e.tags&&e.tags[i]&&(l.unshift(s),l.push(s),e.leqno?l.unshift(a):l.push(a)),r.push(new it.MathNode("mtr",l))}var d=new it.MathNode("mtable",r),f=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);d.setAttribute("rowspacing",gt(f));var m="",g="";if(e.cols&&e.cols.length>0){var x=e.cols,b="",C=!1,S=0,w=x.length;x[0].type==="separator"&&(m+="top ",S=1),x[x.length-1].type==="separator"&&(m+="bottom ",w-=1);for(var E=S;E<w;E++)x[E].type==="align"?(g+=sit[x[E].align],C&&(b+="none "),C=!0):x[E].type==="separator"&&C&&(b+=x[E].separator==="|"?"solid ":"dashed ",C=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(b)&&d.setAttribute("columnlines",b.trim())}if(e.colSeparationType==="align"){for(var T=e.cols||[],_="",A=1;A<T.length;A++)_+=A%2?"0em ":"1em ";d.setAttribute("columnspacing",_.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var j="",D=e.hLinesBeforeRow;m+=D[0].length>0?"left ":"",m+=D[D.length-1].length>0?"right ":"";for(var z=1;z<D.length-1;z++)j+=D[z].length===0?"none ":D[z][0]?"dashed ":"solid ";return/[sd]/.test(j)&&d.setAttribute("rowlines",j.trim()),m!==""&&(d=new it.MathNode("menclose",[d]),d.setAttribute("notation",m.trim())),e.arraystretch&&e.arraystretch<1&&(d=new it.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},Rue=function(e,n){e.envName.indexOf("ed")===-1&&GE(e);var r=[],s=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",i=Hf(e.parser,{cols:r,addJot:!0,autoTag:a?void 0:rO(e.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),o,l=0,u={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var d="",f=0;f<n[0].body.length;f++){var m=Tn(n[0].body[f],"textord");d+=m.text}o=Number(d),l=o*2}var g=!l;i.body.forEach(function(S){for(var w=1;w<S.length;w+=2){var E=Tn(S[w],"styling"),T=Tn(E.body[0],"ordgroup");T.body.unshift(u)}if(g)l<S.length&&(l=S.length);else{var _=S.length/2;if(o<_)throw new lt("Too many math in a row: "+("expected "+o+", but got "+_),S[0])}});for(var x=0;x<l;++x){var b="r",C=0;x%2===1?b="l":x>0&&g&&(C=1),r[x]={type:"align",align:b,pregap:C,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};Ru({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var n=HE(e[0]),r=n?[e[0]]:Tn(e[0],"ordgroup").body,s=r.map(function(i){var o=QI(i),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new lt("Unknown column alignment: "+l,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return Hf(t.parser,a,sO(t.envName))},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(t.envName.charAt(t.envName.length-1)==="*"){var s=t.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),n=s.fetch().text,"lcr".indexOf(n)===-1)throw new lt("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),r.cols=[{type:"align",align:n}]}}var a=Hf(t.parser,r,sO(t.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:n}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},n=Hf(t.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var n=HE(e[0]),r=n?[e[0]]:Tn(e[0],"ordgroup").body,s=r.map(function(i){var o=QI(i),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new lt("Unknown column alignment: "+l,i)});if(s.length>1)throw new lt("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Hf(t.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new lt("{subarray} can contain only one column");return a},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=Hf(t.parser,e,sO(t.envName));return{type:"leftright",mode:t.mode,body:[n],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Rue,htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&GE(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:rO(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Hf(t.parser,e,"display")},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Rue,htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){GE(t);var e={autoTag:rO(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Hf(t.parser,e,"display")},htmlBuilder:Mu,mathmlBuilder:Iu});Ru({type:"array",names:["CD"],props:{numArgs:0},handler(t){return GE(t),Vat(t.parser)},htmlBuilder:Mu,mathmlBuilder:Iu});re("\\nonumber","\\gdef\\@eqnsw{0}");re("\\notag","\\nonumber");St({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new lt(t.funcName+" valid only within array environment")}});var IW=jue;St({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:n,funcName:r}=t,s=e[0];if(s.type!=="ordgroup")throw new lt("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=Tn(s.body[i],"textord").text;if(r==="\\begin"){if(!IW.hasOwnProperty(a))throw new lt("No such environment: "+a,s);var o=IW[a],{args:l,optArgs:u}=n.parseArguments("\\begin{"+a+"}",o),d={mode:n.mode,envName:a,parser:n},f=o.handler(d,l,u);n.expect("\\end",!1);var m=n.nextToken,g=Tn(n.parseFunction(),"environment");if(g.name!==a)throw new lt("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",m);return f}return{type:"environment",mode:n.mode,name:a,nameGroup:s}}});var Mue=(t,e)=>{var n=t.font,r=e.withFont(n);return tr(t.body,r)},Iue=(t,e)=>{var n=t.font,r=e.withFont(n);return Lr(t.body,r)},OW={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};St({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=b5(e[0]),a=r;return a in OW&&(a=OW[a]),{type:"font",mode:n.mode,font:a.slice(1),body:s}},htmlBuilder:Mue,mathmlBuilder:Iue});St({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:n}=t,r=e[0],s=lr.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:VE(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:s}}});St({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,breakOnTokenText:s}=t,{mode:a}=n,i=n.parseExpression(!0,s),o="math"+r.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:n.mode,body:i}}},htmlBuilder:Mue,mathmlBuilder:Iue});var Oue=(t,e)=>{var n=e;return t==="display"?n=n.id>=Vt.SCRIPT.id?n.text():Vt.DISPLAY:t==="text"&&n.size===Vt.DISPLAY.size?n=Vt.TEXT:t==="script"?n=Vt.SCRIPT:t==="scriptscript"&&(n=Vt.SCRIPTSCRIPT),n},aO=(t,e)=>{var n=Oue(t.size,e.style),r=n.fracNum(),s=n.fracDen(),a;a=e.havingStyle(r);var i=tr(t.numer,a,e);if(t.continued){var o=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<l?l:i.depth}a=e.havingStyle(s);var u=tr(t.denom,a,e),d,f,m;t.hasBarLine?(t.barSize?(f=ms(t.barSize,e),d=Re.makeLineSpan("frac-line",e,f)):d=Re.makeLineSpan("frac-line",e),f=d.height,m=d.height):(d=null,f=0,m=e.fontMetrics().defaultRuleThickness);var g,x,b;n.size===Vt.DISPLAY.size||t.size==="display"?(g=e.fontMetrics().num1,f>0?x=3*m:x=7*m,b=e.fontMetrics().denom1):(f>0?(g=e.fontMetrics().num2,x=m):(g=e.fontMetrics().num3,x=3*m),b=e.fontMetrics().denom2);var C;if(d){var w=e.fontMetrics().axisHeight;g-i.depth-(w+.5*f)<x&&(g+=x-(g-i.depth-(w+.5*f))),w-.5*f-(u.height-b)<x&&(b+=x-(w-.5*f-(u.height-b)));var E=-(w-.5*f);C=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:b},{type:"elem",elem:d,shift:E},{type:"elem",elem:i,shift:-g}]},e)}else{var S=g-i.depth-(u.height-b);S<x&&(g+=.5*(x-S),b+=.5*(x-S)),C=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:b},{type:"elem",elem:i,shift:-g}]},e)}a=e.havingStyle(n),C.height*=a.sizeMultiplier/e.sizeMultiplier,C.depth*=a.sizeMultiplier/e.sizeMultiplier;var T;n.size===Vt.DISPLAY.size?T=e.fontMetrics().delim1:n.size===Vt.SCRIPTSCRIPT.size?T=e.havingStyle(Vt.SCRIPT).fontMetrics().delim2:T=e.fontMetrics().delim2;var _,A;return t.leftDelim==null?_=pb(e,["mopen"]):_=Dd.customSizedDelim(t.leftDelim,T,!0,e.havingStyle(n),t.mode,["mopen"]),t.continued?A=Re.makeSpan([]):t.rightDelim==null?A=pb(e,["mclose"]):A=Dd.customSizedDelim(t.rightDelim,T,!0,e.havingStyle(n),t.mode,["mclose"]),Re.makeSpan(["mord"].concat(a.sizingClasses(e)),[_,Re.makeSpan(["mfrac"],[C]),A],e)},iO=(t,e)=>{var n=new it.MathNode("mfrac",[Lr(t.numer,e),Lr(t.denom,e)]);if(!t.hasBarLine)n.setAttribute("linethickness","0px");else if(t.barSize){var r=ms(t.barSize,e);n.setAttribute("linethickness",gt(r))}var s=Oue(t.size,e.style);if(s.size!==e.style.size){n=new it.MathNode("mstyle",[n]);var a=s.size===Vt.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",a),n.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var i=[];if(t.leftDelim!=null){var o=new it.MathNode("mo",[new it.TextNode(t.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(n),t.rightDelim!=null){var l=new it.MathNode("mo",[new it.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return XI(i)}return n};St({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=e[0],a=e[1],i,o=null,l=null,u="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",l=")";break;case"\\\\bracefrac":i=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:l,size:u,barSize:null}},htmlBuilder:aO,mathmlBuilder:iO});St({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=e[0],a=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});St({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:n,token:r}=t,s;switch(n){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:s,token:r}}});var PW=["display","text","script","scriptscript"],FW=function(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};St({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:n}=t,r=e[4],s=e[5],a=b5(e[0]),i=a.type==="atom"&&a.family==="open"?FW(a.text):null,o=b5(e[1]),l=o.type==="atom"&&o.family==="close"?FW(o.text):null,u=Tn(e[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var m="auto",g=e[3];if(g.type==="ordgroup"){if(g.body.length>0){var x=Tn(g.body[0],"textord");m=PW[Number(x.text)]}}else g=Tn(g,"textord"),m=PW[Number(g.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:l,size:m}},htmlBuilder:aO,mathmlBuilder:iO});St({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:n,funcName:r,token:s}=t;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Tn(e[0],"size").value,token:s}}});St({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=e[0],a=Ist(Tn(e[1],"infix").size),i=e[2],o=a.number>0;return{type:"genfrac",mode:n.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:aO,mathmlBuilder:iO});var Pue=(t,e)=>{var n=e.style,r,s;t.type==="supsub"?(r=t.sup?tr(t.sup,e.havingStyle(n.sup()),e):tr(t.sub,e.havingStyle(n.sub()),e),s=Tn(t.base,"horizBrace")):s=Tn(t,"horizBrace");var a=tr(s.base,e.havingBaseStyle(Vt.DISPLAY)),i=Hd.svgSpan(s,e),o;if(s.isOver?(o=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},e),o.children[0].children[0].children[1].classes.push("svg-align")):(o=Re.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},e),o.children[0].children[0].children[0].classes.push("svg-align")),r){var l=Re.makeSpan(["mord",s.isOver?"mover":"munder"],[o],e);s.isOver?o=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):o=Re.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Re.makeSpan(["mord",s.isOver?"mover":"munder"],[o],e)},ait=(t,e)=>{var n=Hd.mathMLnode(t.label);return new it.MathNode(t.isOver?"mover":"munder",[Lr(t.base,e),n])};St({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:Pue,mathmlBuilder:ait});St({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[1],s=Tn(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:n.mode,href:s,body:Fs(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var n=ba(t.body,e,!1);return Re.makeAnchor(t.href,[],n,e)},mathmlBuilder:(t,e)=>{var n=_f(t.body,e);return n instanceof Ao||(n=new Ao("mrow",[n])),n.setAttribute("href",t.href),n}});St({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=Tn(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:n.mode,font:"\\texttt",body:s};return{type:"href",mode:n.mode,href:r,body:Fs(o)}}});St({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:n}=t;return{type:"hbox",mode:n.mode,body:Fs(e[0])}},htmlBuilder(t,e){var n=ba(t.body,e,!1);return Re.makeFragment(n)},mathmlBuilder(t,e){return new it.MathNode("mrow",uo(t.body,e))}});St({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,token:s}=t,a=Tn(e[0],"raw").string,i=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(r){case"\\htmlClass":l.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d],m=f.indexOf("=");if(m<0)throw new lt("\\htmlData key/value '"+f+"' missing equals sign");var g=f.slice(0,m),x=f.slice(m+1);l["data-"+g.trim()]=x}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(o)?{type:"html",mode:n.mode,attributes:l,body:Fs(i)}:n.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var n=ba(t.body,e,!1),r=["enclosing"];t.attributes.class&&r.push(...t.attributes.class.trim().split(/\s+/));var s=Re.makeSpan(r,n,e);for(var a in t.attributes)a!=="class"&&t.attributes.hasOwnProperty(a)&&s.setAttribute(a,t.attributes[a]);return s},mathmlBuilder:(t,e)=>_f(t.body,e)});St({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"htmlmathml",mode:n.mode,html:Fs(e[0]),mathml:Fs(e[1])}},htmlBuilder:(t,e)=>{var n=ba(t.html,e,!1);return Re.makeFragment(n)},mathmlBuilder:(t,e)=>_f(t.mathml,e)});var kN=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new lt("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!tue(r))throw new lt("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};St({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,n)=>{var{parser:r}=t,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(n[0])for(var l=Tn(n[0],"raw").string,u=l.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var m=f[1].trim();switch(f[0].trim()){case"alt":o=m;break;case"width":s=kN(m);break;case"height":a=kN(m);break;case"totalheight":i=kN(m);break;default:throw new lt("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=Tn(e[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:r.mode,alt:o,width:s,height:a,totalheight:i,src:g}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var n=ms(t.height,e),r=0;t.totalheight.number>0&&(r=ms(t.totalheight,e)-n);var s=0;t.width.number>0&&(s=ms(t.width,e));var a={height:gt(n+r)};s>0&&(a.width=gt(s)),r>0&&(a.verticalAlign=gt(-r));var i=new aat(t.src,t.alt,a);return i.height=n,i.depth=r,i},mathmlBuilder:(t,e)=>{var n=new it.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=ms(t.height,e),s=0;if(t.totalheight.number>0&&(s=ms(t.totalheight,e)-r,n.setAttribute("valign",gt(-s))),n.setAttribute("height",gt(r+s)),t.width.number>0){var a=ms(t.width,e);n.setAttribute("width",gt(a))}return n.setAttribute("src",t.src),n}});St({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,s=Tn(e[0],"size");if(n.settings.strict){var a=r[1]==="m",i=s.value.unit==="mu";a?(i||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+s.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):i&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:s.value}},htmlBuilder(t,e){return Re.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var n=ms(t.dimension,e);return new it.SpaceNode(n)}});St({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=e[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:s}},htmlBuilder:(t,e)=>{var n;t.alignment==="clap"?(n=Re.makeSpan([],[tr(t.body,e)]),n=Re.makeSpan(["inner"],[n],e)):n=Re.makeSpan(["inner"],[tr(t.body,e)]);var r=Re.makeSpan(["fix"],[]),s=Re.makeSpan([t.alignment],[n,r],e),a=Re.makeSpan(["strut"]);return a.style.height=gt(s.height+s.depth),s.depth&&(a.style.verticalAlign=gt(-s.depth)),s.children.unshift(a),s=Re.makeSpan(["thinbox"],[s],e),Re.makeSpan(["mord","vbox"],[s],e)},mathmlBuilder:(t,e)=>{var n=new it.MathNode("mpadded",[Lr(t.body,e)]);if(t.alignment!=="rlap"){var r=t.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});St({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:n,parser:r}=t,s=r.mode;r.switchMode("math");var a=n==="\\("?"\\)":"$",i=r.parseExpression(!1,a);return r.expect(a),r.switchMode(s),{type:"styling",mode:r.mode,style:"text",body:i}}});St({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new lt("Mismatched "+t.funcName)}});var BW=(t,e)=>{switch(e.style.size){case Vt.DISPLAY.size:return t.display;case Vt.TEXT.size:return t.text;case Vt.SCRIPT.size:return t.script;case Vt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};St({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"mathchoice",mode:n.mode,display:Fs(e[0]),text:Fs(e[1]),script:Fs(e[2]),scriptscript:Fs(e[3])}},htmlBuilder:(t,e)=>{var n=BW(t,e),r=ba(n,e,!1);return Re.makeFragment(r)},mathmlBuilder:(t,e)=>{var n=BW(t,e);return _f(n,e)}});var Fue=(t,e,n,r,s,a,i)=>{t=Re.makeSpan([],[t]);var o=n&&lr.isCharacterBox(n),l,u;if(e){var d=tr(e,r.havingStyle(s.sup()),r);u={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-d.depth)}}if(n){var f=tr(n,r.havingStyle(s.sub()),r);l={elem:f,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-f.height)}}var m;if(u&&l){var g=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+t.depth+i;m=Re.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:gt(-a)},{type:"kern",size:l.kern},{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:gt(a)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var x=t.height-i;m=Re.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:gt(-a)},{type:"kern",size:l.kern},{type:"elem",elem:t}]},r)}else if(u){var b=t.depth+i;m=Re.makeVList({positionType:"bottom",positionData:b,children:[{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:gt(a)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return t;var C=[m];if(l&&a!==0&&!o){var S=Re.makeSpan(["mspace"],[],r);S.style.marginRight=gt(a),C.unshift(S)}return Re.makeSpan(["mop","op-limits"],C,r)},Bue=["\\smallint"],Wv=(t,e)=>{var n,r,s=!1,a;t.type==="supsub"?(n=t.sup,r=t.sub,a=Tn(t.base,"op"),s=!0):a=Tn(t,"op");var i=e.style,o=!1;i.size===Vt.DISPLAY.size&&a.symbol&&!Bue.includes(a.name)&&(o=!0);var l;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),l=Re.makeSymbol(a.name,u,"math",e,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=l.italic,m=Re.staticSvg(d+"Size"+(o?"2":"1"),e);l=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:m,shift:o?.08:0}]},e),a.name="\\"+d,l.classes.unshift("mop"),l.italic=f}}else if(a.body){var g=ba(a.body,e,!0);g.length===1&&g[0]instanceof Tl?(l=g[0],l.classes[0]="mop"):l=Re.makeSpan(["mop"],g,e)}else{for(var x=[],b=1;b<a.name.length;b++)x.push(Re.mathsym(a.name[b],a.mode,e));l=Re.makeSpan(["mop"],x,e)}var C=0,S=0;return(l instanceof Tl||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(C=(l.height-l.depth)/2-e.fontMetrics().axisHeight,S=l.italic),s?Fue(l,n,r,e,i,S,C):(C&&(l.style.position="relative",l.style.top=gt(C)),l)},Fw=(t,e)=>{var n;if(t.symbol)n=new Ao("mo",[Al(t.name,t.mode)]),Bue.includes(t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new Ao("mo",uo(t.body,e));else{n=new Ao("mi",[new au(t.name.slice(1))]);var r=new Ao("mo",[Al("","text")]);t.parentIsSupSub?n=new Ao("mrow",[n,r]):n=hue([n,r])}return n},iit={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};St({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=r;return s.length===1&&(s=iit[s]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:Wv,mathmlBuilder:Fw});St({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Fs(r)}},htmlBuilder:Wv,mathmlBuilder:Fw});var oit={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};St({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Wv,mathmlBuilder:Fw});St({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Wv,mathmlBuilder:Fw});St({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:n}=t,r=n;return r.length===1&&(r=oit[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Wv,mathmlBuilder:Fw});var Lue=(t,e)=>{var n,r,s=!1,a;t.type==="supsub"?(n=t.sup,r=t.sub,a=Tn(t.base,"operatorname"),s=!0):a=Tn(t,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var m=f.text;return typeof m=="string"?{type:"textord",mode:f.mode,text:m}:f}),l=ba(o,e.withFont("mathrm"),!0),u=0;u<l.length;u++){var d=l[u];d instanceof Tl&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=Re.makeSpan(["mop"],l,e)}else i=Re.makeSpan(["mop"],[],e);return s?Fue(i,n,r,e,e.style,0,0):i},lit=(t,e)=>{for(var n=uo(t.body,e.withFont("mathrm")),r=!0,s=0;s<n.length;s++){var a=n[s];if(!(a instanceof it.SpaceNode))if(a instanceof it.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof it.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var o=n.map(d=>d.toText()).join("");n=[new it.TextNode(o)]}var l=new it.MathNode("mi",n);l.setAttribute("mathvariant","normal");var u=new it.MathNode("mo",[Al("","text")]);return t.parentIsSupSub?new it.MathNode("mrow",[l,u]):it.newDocumentFragment([l,u])};St({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,s=e[0];return{type:"operatorname",mode:n.mode,body:Fs(s),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Lue,mathmlBuilder:lit});re("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");R0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Re.makeFragment(ba(t.body,e,!1)):Re.makeSpan(["mord"],ba(t.body,e,!0),e)},mathmlBuilder(t,e){return _f(t.body,e,!0)}});St({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:n}=t,r=e[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(t,e){var n=tr(t.body,e.havingCrampedStyle()),r=Re.makeLineSpan("overline-line",e),s=e.fontMetrics().defaultRuleThickness,a=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r},{type:"kern",size:s}]},e);return Re.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(t,e){var n=new it.MathNode("mo",[new it.TextNode("")]);n.setAttribute("stretchy","true");var r=new it.MathNode("mover",[Lr(t.body,e),n]);return r.setAttribute("accent","true"),r}});St({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"phantom",mode:n.mode,body:Fs(r)}},htmlBuilder:(t,e)=>{var n=ba(t.body,e.withPhantom(),!1);return Re.makeFragment(n)},mathmlBuilder:(t,e)=>{var n=uo(t.body,e);return new it.MathNode("mphantom",n)}});St({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=Re.makeSpan([],[tr(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),Re.makeSpan(["mord"],[n],e)},mathmlBuilder:(t,e)=>{var n=uo(Fs(t.body),e),r=new it.MathNode("mphantom",n),s=new it.MathNode("mpadded",[r]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});St({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=Re.makeSpan(["inner"],[tr(t.body,e.withPhantom())]),r=Re.makeSpan(["fix"],[]);return Re.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:(t,e)=>{var n=uo(Fs(t.body),e),r=new it.MathNode("mphantom",n),s=new it.MathNode("mpadded",[r]);return s.setAttribute("width","0px"),s}});St({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t,r=Tn(e[0],"size").value,s=e[1];return{type:"raisebox",mode:n.mode,dy:r,body:s}},htmlBuilder(t,e){var n=tr(t.body,e),r=ms(t.dy,e);return Re.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){var n=new it.MathNode("mpadded",[Lr(t.body,e)]),r=t.dy.number+t.dy.unit;return n.setAttribute("voffset",r),n}});St({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});St({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,n){var{parser:r}=t,s=n[0],a=Tn(e[0],"size"),i=Tn(e[1],"size");return{type:"rule",mode:r.mode,shift:s&&Tn(s,"size").value,width:a.value,height:i.value}},htmlBuilder(t,e){var n=Re.makeSpan(["mord","rule"],[],e),r=ms(t.width,e),s=ms(t.height,e),a=t.shift?ms(t.shift,e):0;return n.style.borderRightWidth=gt(r),n.style.borderTopWidth=gt(s),n.style.bottom=gt(a),n.width=r,n.height=s+a,n.depth=-a,n.maxFontSize=s*1.125*e.sizeMultiplier,n},mathmlBuilder(t,e){var n=ms(t.width,e),r=ms(t.height,e),s=t.shift?ms(t.shift,e):0,a=e.color&&e.getColor()||"black",i=new it.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",gt(n)),i.setAttribute("height",gt(r));var o=new it.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",gt(s)):(o.setAttribute("height",gt(s)),o.setAttribute("depth",gt(-s))),o.setAttribute("voffset",gt(s)),o}});function zue(t,e,n){for(var r=ba(t,e,!1),s=e.sizeMultiplier/n.sizeMultiplier,a=0;a<r.length;a++){var i=r[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(r[a].classes,e.sizingClasses(n)):r[a].classes[i+1]==="reset-size"+e.size&&(r[a].classes[i+1]="reset-size"+n.size),r[a].height*=s,r[a].depth*=s}return Re.makeFragment(r)}var LW=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],cit=(t,e)=>{var n=e.havingSize(t.size);return zue(t.body,n,e)};St({type:"sizing",names:LW,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:n,funcName:r,parser:s}=t,a=s.parseExpression(!1,n);return{type:"sizing",mode:s.mode,size:LW.indexOf(r)+1,body:a}},htmlBuilder:cit,mathmlBuilder:(t,e)=>{var n=e.havingSize(t.size),r=uo(t.body,n),s=new it.MathNode("mstyle",r);return s.setAttribute("mathsize",gt(n.sizeMultiplier)),s}});St({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,n)=>{var{parser:r}=t,s=!1,a=!1,i=n[0]&&Tn(n[0],"ordgroup");if(i)for(var o="",l=0;l<i.body.length;++l){var u=i.body[l];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=e[0];return{type:"smash",mode:r.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(t,e)=>{var n=Re.makeSpan([],[tr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var s=0;s<n.children.length;s++)n.children[s].depth=0;var a=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return Re.makeSpan(["mord"],[a],e)},mathmlBuilder:(t,e)=>{var n=new it.MathNode("mpadded",[Lr(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}});St({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r}=t,s=n[0],a=e[0];return{type:"sqrt",mode:r.mode,body:a,index:s}},htmlBuilder(t,e){var n=tr(t.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=Re.wrapFragment(n,e);var r=e.fontMetrics(),s=r.defaultRuleThickness,a=s;e.style.id<Vt.TEXT.id&&(a=e.fontMetrics().xHeight);var i=s+a/4,o=n.height+n.depth+i+s,{span:l,ruleWidth:u,advanceWidth:d}=Dd.sqrtImage(o,e),f=l.height-u;f>n.height+n.depth+i&&(i=(i+f-n.height-n.depth)/2);var m=l.height-n.height-i-u;n.style.paddingLeft=gt(d);var g=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+m)},{type:"elem",elem:l},{type:"kern",size:u}]},e);if(t.index){var x=e.havingStyle(Vt.SCRIPTSCRIPT),b=tr(t.index,x,e),C=.6*(g.height-g.depth),S=Re.makeVList({positionType:"shift",positionData:-C,children:[{type:"elem",elem:b}]},e),w=Re.makeSpan(["root"],[S]);return Re.makeSpan(["mord","sqrt"],[w,g],e)}else return Re.makeSpan(["mord","sqrt"],[g],e)},mathmlBuilder(t,e){var{body:n,index:r}=t;return r?new it.MathNode("mroot",[Lr(n,e),Lr(r,e)]):new it.MathNode("msqrt",[Lr(n,e)])}});var zW={display:Vt.DISPLAY,text:Vt.TEXT,script:Vt.SCRIPT,scriptscript:Vt.SCRIPTSCRIPT};St({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:n,funcName:r,parser:s}=t,a=s.parseExpression(!0,n),i=r.slice(1,r.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(t,e){var n=zW[t.style],r=e.havingStyle(n).withFont("");return zue(t.body,r,e)},mathmlBuilder(t,e){var n=zW[t.style],r=e.havingStyle(n),s=uo(t.body,r),a=new it.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[t.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var uit=function(e,n){var r=e.base;if(r)if(r.type==="op"){var s=r.limits&&(n.style.size===Vt.DISPLAY.size||r.alwaysHandleSupSub);return s?Wv:null}else if(r.type==="operatorname"){var a=r.alwaysHandleSupSub&&(n.style.size===Vt.DISPLAY.size||r.limits);return a?Lue:null}else{if(r.type==="accent")return lr.isCharacterBox(r.base)?ZI:null;if(r.type==="horizBrace"){var i=!e.sub;return i===r.isOver?Pue:null}else return null}else return null};R0({type:"supsub",htmlBuilder(t,e){var n=uit(t,e);if(n)return n(t,e);var{base:r,sup:s,sub:a}=t,i=tr(r,e),o,l,u=e.fontMetrics(),d=0,f=0,m=r&&lr.isCharacterBox(r);if(s){var g=e.havingStyle(e.style.sup());o=tr(s,g,e),m||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/e.sizeMultiplier)}if(a){var x=e.havingStyle(e.style.sub());l=tr(a,x,e),m||(f=i.depth+x.fontMetrics().subDrop*x.sizeMultiplier/e.sizeMultiplier)}var b;e.style===Vt.DISPLAY?b=u.sup1:e.style.cramped?b=u.sup3:b=u.sup2;var C=e.sizeMultiplier,S=gt(.5/u.ptPerEm/C),w=null;if(l){var E=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(i instanceof Tl||E)&&(w=gt(-i.italic))}var T;if(o&&l){d=Math.max(d,b,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var _=u.defaultRuleThickness,A=4*_;if(d-o.depth-(l.height-f)<A){f=A-(d-o.depth)+l.height;var j=.8*u.xHeight-(d-o.depth);j>0&&(d+=j,f-=j)}var D=[{type:"elem",elem:l,shift:f,marginRight:S,marginLeft:w},{type:"elem",elem:o,shift:-d,marginRight:S}];T=Re.makeVList({positionType:"individualShift",children:D},e)}else if(l){f=Math.max(f,u.sub1,l.height-.8*u.xHeight);var z=[{type:"elem",elem:l,marginLeft:w,marginRight:S}];T=Re.makeVList({positionType:"shift",positionData:f,children:z},e)}else if(o)d=Math.max(d,b,o.depth+.25*u.xHeight),T=Re.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:S}]},e);else throw new Error("supsub must have either sup or sub.");var F=T7(i,"right")||"mord";return Re.makeSpan([F],[i,Re.makeSpan(["msupsub"],[T])],e)},mathmlBuilder(t,e){var n=!1,r,s;t.base&&t.base.type==="horizBrace"&&(s=!!t.sup,s===t.base.isOver&&(n=!0,r=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var a=[Lr(t.base,e)];t.sub&&a.push(Lr(t.sub,e)),t.sup&&a.push(Lr(t.sup,e));var i;if(n)i=r?"mover":"munder";else if(t.sub)if(t.sup){var u=t.base;u&&u.type==="op"&&u.limits&&e.style===Vt.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(e.style===Vt.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===Vt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Vt.DISPLAY)?i="munder":i="msub"}else{var o=t.base;o&&o.type==="op"&&o.limits&&(e.style===Vt.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===Vt.DISPLAY)?i="mover":i="msup"}return new it.MathNode(i,a)}});R0({type:"atom",htmlBuilder(t,e){return Re.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var n=new it.MathNode("mo",[Al(t.text,t.mode)]);if(t.family==="bin"){var r=JI(t,e);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else t.family==="punct"?n.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&n.setAttribute("stretchy","false");return n}});var $ue={mi:"italic",mn:"normal",mtext:"normal"};R0({type:"mathord",htmlBuilder(t,e){return Re.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var n=new it.MathNode("mi",[Al(t.text,t.mode,e)]),r=JI(t,e)||"italic";return r!==$ue[n.type]&&n.setAttribute("mathvariant",r),n}});R0({type:"textord",htmlBuilder(t,e){return Re.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var n=Al(t.text,t.mode,e),r=JI(t,e)||"normal",s;return t.mode==="text"?s=new it.MathNode("mtext",[n]):/[0-9]/.test(t.text)?s=new it.MathNode("mn",[n]):t.text==="\\prime"?s=new it.MathNode("mo",[n]):s=new it.MathNode("mi",[n]),r!==$ue[s.type]&&s.setAttribute("mathvariant",r),s}});var EN={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},_N={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};R0({type:"spacing",htmlBuilder(t,e){if(_N.hasOwnProperty(t.text)){var n=_N[t.text].className||"";if(t.mode==="text"){var r=Re.makeOrd(t,e,"textord");return r.classes.push(n),r}else return Re.makeSpan(["mspace",n],[Re.mathsym(t.text,t.mode,e)],e)}else{if(EN.hasOwnProperty(t.text))return Re.makeSpan(["mspace",EN[t.text]],[],e);throw new lt('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var n;if(_N.hasOwnProperty(t.text))n=new it.MathNode("mtext",[new it.TextNode("")]);else{if(EN.hasOwnProperty(t.text))return new it.MathNode("mspace");throw new lt('Unknown type of space "'+t.text+'"')}return n}});var $W=()=>{var t=new it.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};R0({type:"tag",mathmlBuilder(t,e){var n=new it.MathNode("mtable",[new it.MathNode("mtr",[$W(),new it.MathNode("mtd",[_f(t.body,e)]),$W(),new it.MathNode("mtd",[_f(t.tag,e)])])]);return n.setAttribute("width","100%"),n}});var UW={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},HW={"\\textbf":"textbf","\\textmd":"textmd"},dit={"\\textit":"textit","\\textup":"textup"},VW=(t,e)=>{var n=t.font;if(n){if(UW[n])return e.withTextFontFamily(UW[n]);if(HW[n])return e.withTextFontWeight(HW[n]);if(n==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(dit[n])};St({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,s=e[0];return{type:"text",mode:n.mode,body:Fs(s),font:r}},htmlBuilder(t,e){var n=VW(t,e),r=ba(t.body,n,!0);return Re.makeSpan(["mord","text"],r,n)},mathmlBuilder(t,e){var n=VW(t,e);return _f(t.body,n)}});St({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=tr(t.body,e),r=Re.makeLineSpan("underline-line",e),s=e.fontMetrics().defaultRuleThickness,a=Re.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:s},{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n}]},e);return Re.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(t,e){var n=new it.MathNode("mo",[new it.TextNode("")]);n.setAttribute("stretchy","true");var r=new it.MathNode("munder",[Lr(t.body,e),n]);return r.setAttribute("accentunder","true"),r}});St({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=tr(t.body,e),r=e.fontMetrics().axisHeight,s=.5*(n.height-r-(n.depth+r));return Re.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){return new it.MathNode("mpadded",[Lr(t.body,e)],["vcenter"])}});St({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,n){throw new lt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var n=qW(t),r=[],s=e.havingStyle(e.style.text()),a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),r.push(Re.makeSymbol(i,"Typewriter-Regular",t.mode,s,["mord","texttt"]))}return Re.makeSpan(["mord","text"].concat(s.sizingClasses(e)),Re.tryCombineChars(r),s)},mathmlBuilder(t,e){var n=new it.TextNode(qW(t)),r=new it.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var qW=t=>t.body.replace(/ /g,t.star?"":""),tf=uue,Uue=`[ \r
	]`,hit="\\\\[a-zA-Z@]+",fit="\\\\[^\uD800-\uDFFF]",mit="("+hit+")"+Uue+"*",pit=`\\\\(
|[ \r	]+
?)[ \r	]*`,D7="[-]",git=new RegExp(D7+"+$"),vit="("+Uue+"+)|"+(pit+"|")+"([!-\\[\\]---]"+(D7+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(D7+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+mit)+("|"+fit+")");class GW{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(vit,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new Bo("EOF",new Zi(this,n,n));var r=this.tokenRegex.exec(e);if(r===null||r.index!==n)throw new lt("Unexpected character: '"+e[n]+"'",new Bo(e[n],new Zi(this,n,n+1)));var s=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Bo(s,new Zi(this,n,this.tokenRegex.lastIndex))}}class yit{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new lt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,r){if(r===void 0&&(r=!1),r){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var xit=Due;re("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});re("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});re("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});re("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});re("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var n=t.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});re("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");re("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var WW={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};re("\\char",function(t){var e=t.popToken(),n,r="";if(e.text==="'")n=8,e=t.popToken();else if(e.text==='"')n=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new lt("\\char` missing argument");r=e.text.charCodeAt(0)}else n=10;if(n){if(r=WW[e.text],r==null||r>=n)throw new lt("Invalid base-"+n+" digit "+e.text);for(var s;(s=WW[t.future().text])!=null&&s<n;)r*=n,r+=s,t.popToken()}return"\\@char{"+r+"}"});var oO=(t,e,n,r)=>{var s=t.consumeArg().tokens;if(s.length!==1)throw new lt("\\newcommand's first argument must be a macro name");var a=s[0].text,i=t.isDefined(a);if(i&&!e)throw new lt("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!n)throw new lt("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=t.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",u=t.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new lt("Invalid number of arguments: "+l);o=parseInt(l),s=t.consumeArg().tokens}return i&&r||t.macros.set(a,{tokens:s,numArgs:o}),""};re("\\newcommand",t=>oO(t,!1,!0,!1));re("\\renewcommand",t=>oO(t,!0,!1,!1));re("\\providecommand",t=>oO(t,!0,!0,!0));re("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""});re("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""});re("\\show",t=>{var e=t.popToken(),n=e.text;return console.log(e,t.macros.get(n),tf[n],Kr.math[n],Kr.text[n]),""});re("\\bgroup","{");re("\\egroup","}");re("~","\\nobreakspace");re("\\lq","`");re("\\rq","'");re("\\aa","\\r a");re("\\AA","\\r A");re("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");re("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");re("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");re("","\\mathscr{B}");re("","\\mathscr{E}");re("","\\mathscr{F}");re("","\\mathscr{H}");re("","\\mathscr{I}");re("","\\mathscr{L}");re("","\\mathscr{M}");re("","\\mathscr{R}");re("","\\mathfrak{C}");re("","\\mathfrak{H}");re("","\\mathfrak{Z}");re("\\Bbbk","\\Bbb{k}");re("","\\cdotp");re("\\llap","\\mathllap{\\textrm{#1}}");re("\\rlap","\\mathrlap{\\textrm{#1}}");re("\\clap","\\mathclap{\\textrm{#1}}");re("\\mathstrut","\\vphantom{(}");re("\\underbar","\\underline{\\text{#1}}");re("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');re("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");re("\\ne","\\neq");re("","\\neq");re("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");re("","\\notin");re("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");re("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");re("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");re("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");re("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");re("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");re("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");re("","\\perp");re("","\\mathclose{!\\mkern-0.8mu!}");re("","\\notni");re("","\\ulcorner");re("","\\urcorner");re("","\\llcorner");re("","\\lrcorner");re("","\\copyright");re("","\\textregistered");re("","\\textregistered");re("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');re("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');re("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');re("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');re("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");re("","\\vdots");re("\\varGamma","\\mathit{\\Gamma}");re("\\varDelta","\\mathit{\\Delta}");re("\\varTheta","\\mathit{\\Theta}");re("\\varLambda","\\mathit{\\Lambda}");re("\\varXi","\\mathit{\\Xi}");re("\\varPi","\\mathit{\\Pi}");re("\\varSigma","\\mathit{\\Sigma}");re("\\varUpsilon","\\mathit{\\Upsilon}");re("\\varPhi","\\mathit{\\Phi}");re("\\varPsi","\\mathit{\\Psi}");re("\\varOmega","\\mathit{\\Omega}");re("\\substack","\\begin{subarray}{c}#1\\end{subarray}");re("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");re("\\boxed","\\fbox{$\\displaystyle{#1}$}");re("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");re("\\implies","\\DOTSB\\;\\Longrightarrow\\;");re("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");re("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");re("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var KW={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};re("\\dots",function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in KW?e=KW[n]:(n.slice(0,4)==="\\not"||n in Kr.math&&["bin","rel"].includes(Kr.math[n].group))&&(e="\\dotsb"),e});var lO={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};re("\\dotso",function(t){var e=t.future().text;return e in lO?"\\ldots\\,":"\\ldots"});re("\\dotsc",function(t){var e=t.future().text;return e in lO&&e!==","?"\\ldots\\,":"\\ldots"});re("\\cdots",function(t){var e=t.future().text;return e in lO?"\\@cdots\\,":"\\@cdots"});re("\\dotsb","\\cdots");re("\\dotsm","\\cdots");re("\\dotsi","\\!\\cdots");re("\\dotsx","\\ldots\\,");re("\\DOTSI","\\relax");re("\\DOTSB","\\relax");re("\\DOTSX","\\relax");re("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");re("\\,","\\tmspace+{3mu}{.1667em}");re("\\thinspace","\\,");re("\\>","\\mskip{4mu}");re("\\:","\\tmspace+{4mu}{.2222em}");re("\\medspace","\\:");re("\\;","\\tmspace+{5mu}{.2777em}");re("\\thickspace","\\;");re("\\!","\\tmspace-{3mu}{.1667em}");re("\\negthinspace","\\!");re("\\negmedspace","\\tmspace-{4mu}{.2222em}");re("\\negthickspace","\\tmspace-{5mu}{.277em}");re("\\enspace","\\kern.5em ");re("\\enskip","\\hskip.5em\\relax");re("\\quad","\\hskip1em\\relax");re("\\qquad","\\hskip2em\\relax");re("\\tag","\\@ifstar\\tag@literal\\tag@paren");re("\\tag@paren","\\tag@literal{({#1})}");re("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new lt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});re("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");re("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");re("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");re("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");re("\\newline","\\\\\\relax");re("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Hue=gt(su["Main-Regular"][84][1]-.7*su["Main-Regular"][65][1]);re("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Hue+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");re("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Hue+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");re("\\hspace","\\@ifstar\\@hspacer\\@hspace");re("\\@hspace","\\hskip #1\\relax");re("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");re("\\ordinarycolon",":");re("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");re("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');re("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');re("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');re("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');re("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');re("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');re("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');re("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');re("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');re("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');re("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');re("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');re("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');re("","\\dblcolon");re("","\\eqcolon");re("","\\coloneqq");re("","\\eqqcolon");re("","\\Coloneqq");re("\\ratio","\\vcentcolon");re("\\coloncolon","\\dblcolon");re("\\colonequals","\\coloneqq");re("\\coloncolonequals","\\Coloneqq");re("\\equalscolon","\\eqqcolon");re("\\equalscoloncolon","\\Eqqcolon");re("\\colonminus","\\coloneq");re("\\coloncolonminus","\\Coloneq");re("\\minuscolon","\\eqcolon");re("\\minuscoloncolon","\\Eqcolon");re("\\coloncolonapprox","\\Colonapprox");re("\\coloncolonsim","\\Colonsim");re("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");re("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");re("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");re("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");re("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");re("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");re("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");re("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");re("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");re("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");re("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");re("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");re("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");re("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");re("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");re("\\ngeqq","\\html@mathml{\\@ngeqq}{}");re("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");re("\\nleqq","\\html@mathml{\\@nleqq}{}");re("\\nleqslant","\\html@mathml{\\@nleqslant}{}");re("\\nshortmid","\\html@mathml{\\@nshortmid}{}");re("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");re("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");re("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");re("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");re("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");re("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");re("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");re("\\imath","\\html@mathml{\\@imath}{}");re("\\jmath","\\html@mathml{\\@jmath}{}");re("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");re("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");re("","\\llbracket");re("","\\rrbracket");re("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");re("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");re("","\\lBrace");re("","\\rBrace");re("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");re("","\\minuso");re("\\darr","\\downarrow");re("\\dArr","\\Downarrow");re("\\Darr","\\Downarrow");re("\\lang","\\langle");re("\\rang","\\rangle");re("\\uarr","\\uparrow");re("\\uArr","\\Uparrow");re("\\Uarr","\\Uparrow");re("\\N","\\mathbb{N}");re("\\R","\\mathbb{R}");re("\\Z","\\mathbb{Z}");re("\\alef","\\aleph");re("\\alefsym","\\aleph");re("\\Alpha","\\mathrm{A}");re("\\Beta","\\mathrm{B}");re("\\bull","\\bullet");re("\\Chi","\\mathrm{X}");re("\\clubs","\\clubsuit");re("\\cnums","\\mathbb{C}");re("\\Complex","\\mathbb{C}");re("\\Dagger","\\ddagger");re("\\diamonds","\\diamondsuit");re("\\empty","\\emptyset");re("\\Epsilon","\\mathrm{E}");re("\\Eta","\\mathrm{H}");re("\\exist","\\exists");re("\\harr","\\leftrightarrow");re("\\hArr","\\Leftrightarrow");re("\\Harr","\\Leftrightarrow");re("\\hearts","\\heartsuit");re("\\image","\\Im");re("\\infin","\\infty");re("\\Iota","\\mathrm{I}");re("\\isin","\\in");re("\\Kappa","\\mathrm{K}");re("\\larr","\\leftarrow");re("\\lArr","\\Leftarrow");re("\\Larr","\\Leftarrow");re("\\lrarr","\\leftrightarrow");re("\\lrArr","\\Leftrightarrow");re("\\Lrarr","\\Leftrightarrow");re("\\Mu","\\mathrm{M}");re("\\natnums","\\mathbb{N}");re("\\Nu","\\mathrm{N}");re("\\Omicron","\\mathrm{O}");re("\\plusmn","\\pm");re("\\rarr","\\rightarrow");re("\\rArr","\\Rightarrow");re("\\Rarr","\\Rightarrow");re("\\real","\\Re");re("\\reals","\\mathbb{R}");re("\\Reals","\\mathbb{R}");re("\\Rho","\\mathrm{P}");re("\\sdot","\\cdot");re("\\sect","\\S");re("\\spades","\\spadesuit");re("\\sub","\\subset");re("\\sube","\\subseteq");re("\\supe","\\supseteq");re("\\Tau","\\mathrm{T}");re("\\thetasym","\\vartheta");re("\\weierp","\\wp");re("\\Zeta","\\mathrm{Z}");re("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");re("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");re("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");re("\\bra","\\mathinner{\\langle{#1}|}");re("\\ket","\\mathinner{|{#1}\\rangle}");re("\\braket","\\mathinner{\\langle{#1}\\rangle}");re("\\Bra","\\left\\langle#1\\right|");re("\\Ket","\\left|#1\\right\\rangle");var Vue=t=>e=>{var n=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();var l=f=>m=>{t&&(m.macros.set("|",i),s.length&&m.macros.set("\\|",o));var g=f;if(!f&&s.length){var x=m.future();x.text==="|"&&(m.popToken(),g=!0)}return{tokens:g?s:r,numArgs:0}};e.macros.set("|",l(!1)),s.length&&e.macros.set("\\|",l(!0));var u=e.consumeArg().tokens,d=e.expandTokens([...a,...u,...n]);return e.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};re("\\bra@ket",Vue(!1));re("\\bra@set",Vue(!0));re("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");re("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");re("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");re("\\angln","{\\angl n}");re("\\blue","\\textcolor{##6495ed}{#1}");re("\\orange","\\textcolor{##ffa500}{#1}");re("\\pink","\\textcolor{##ff00af}{#1}");re("\\red","\\textcolor{##df0030}{#1}");re("\\green","\\textcolor{##28ae7b}{#1}");re("\\gray","\\textcolor{gray}{#1}");re("\\purple","\\textcolor{##9d38bd}{#1}");re("\\blueA","\\textcolor{##ccfaff}{#1}");re("\\blueB","\\textcolor{##80f6ff}{#1}");re("\\blueC","\\textcolor{##63d9ea}{#1}");re("\\blueD","\\textcolor{##11accd}{#1}");re("\\blueE","\\textcolor{##0c7f99}{#1}");re("\\tealA","\\textcolor{##94fff5}{#1}");re("\\tealB","\\textcolor{##26edd5}{#1}");re("\\tealC","\\textcolor{##01d1c1}{#1}");re("\\tealD","\\textcolor{##01a995}{#1}");re("\\tealE","\\textcolor{##208170}{#1}");re("\\greenA","\\textcolor{##b6ffb0}{#1}");re("\\greenB","\\textcolor{##8af281}{#1}");re("\\greenC","\\textcolor{##74cf70}{#1}");re("\\greenD","\\textcolor{##1fab54}{#1}");re("\\greenE","\\textcolor{##0d923f}{#1}");re("\\goldA","\\textcolor{##ffd0a9}{#1}");re("\\goldB","\\textcolor{##ffbb71}{#1}");re("\\goldC","\\textcolor{##ff9c39}{#1}");re("\\goldD","\\textcolor{##e07d10}{#1}");re("\\goldE","\\textcolor{##a75a05}{#1}");re("\\redA","\\textcolor{##fca9a9}{#1}");re("\\redB","\\textcolor{##ff8482}{#1}");re("\\redC","\\textcolor{##f9685d}{#1}");re("\\redD","\\textcolor{##e84d39}{#1}");re("\\redE","\\textcolor{##bc2612}{#1}");re("\\maroonA","\\textcolor{##ffbde0}{#1}");re("\\maroonB","\\textcolor{##ff92c6}{#1}");re("\\maroonC","\\textcolor{##ed5fa6}{#1}");re("\\maroonD","\\textcolor{##ca337c}{#1}");re("\\maroonE","\\textcolor{##9e034e}{#1}");re("\\purpleA","\\textcolor{##ddd7ff}{#1}");re("\\purpleB","\\textcolor{##c6b9fc}{#1}");re("\\purpleC","\\textcolor{##aa87ff}{#1}");re("\\purpleD","\\textcolor{##7854ab}{#1}");re("\\purpleE","\\textcolor{##543b78}{#1}");re("\\mintA","\\textcolor{##f5f9e8}{#1}");re("\\mintB","\\textcolor{##edf2df}{#1}");re("\\mintC","\\textcolor{##e0e5cc}{#1}");re("\\grayA","\\textcolor{##f6f7f7}{#1}");re("\\grayB","\\textcolor{##f0f1f2}{#1}");re("\\grayC","\\textcolor{##e3e5e6}{#1}");re("\\grayD","\\textcolor{##d6d8da}{#1}");re("\\grayE","\\textcolor{##babec2}{#1}");re("\\grayF","\\textcolor{##888d93}{#1}");re("\\grayG","\\textcolor{##626569}{#1}");re("\\grayH","\\textcolor{##3b3e40}{#1}");re("\\grayI","\\textcolor{##21242c}{#1}");re("\\kaBlue","\\textcolor{##314453}{#1}");re("\\kaGreen","\\textcolor{##71B307}{#1}");var que={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class bit{constructor(e,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new yit(xit,n.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new GW(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,r,s;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:s,end:r}=this.consumeArg(["]"])}else({tokens:s,start:n,end:r}=this.consumeArg());return this.pushToken(new Bo("EOF",r.loc)),this.pushTokens(s),new Bo("",Zi.range(n,r))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],r=e&&e.length>0;r||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),n.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new lt("Extra }",a)}else if(a.text==="EOF")throw new lt("Unexpected end of input in a macro argument, expected '"+(e&&r?e[o]:"}")+"'",a);if(e&&r)if((i===0||i===1&&e[o]==="{")&&a.text===e[o]){if(++o,o===e.length){n.splice(-o,o);break}}else o=0}while(i!==0||r);return s.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:s,end:a}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new lt("The length of delimiters doesn't match the number of args!");for(var r=n[0],s=0;s<r.length;s++){var a=this.popToken();if(r[s]!==a.text)throw new lt("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<e;o++)i.push(this.consumeArg(n&&n[o+1]).tokens);return i}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new lt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var n=this.popToken(),r=n.text,s=n.noexpand?null:this._getExpansion(r);if(s==null||e&&s.unexpandable){if(e&&s==null&&r[0]==="\\"&&!this.isDefined(r))throw new lt("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var l=a[o];if(l.text==="#"){if(o===0)throw new lt("Incomplete placeholder at end of macro body",l);if(l=a[--o],l.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(l.text))a.splice(o,2,...i[+l.text-1]);else throw new lt("Not a valid argument number",l)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Bo(e)]):void 0}expandTokens(e){var n=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),n.push(s)}return this.countExpansion(n.length),n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(r=>r.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var s=typeof n=="function"?n(this):n;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new GW(s,this.settings),l=[],u=o.lex();u.text!=="EOF";)l.push(u),u=o.lex();l.reverse();var d={tokens:l,numArgs:a};return d}return s}isDefined(e){return this.macros.has(e)||tf.hasOwnProperty(e)||Kr.math.hasOwnProperty(e)||Kr.text.hasOwnProperty(e)||que.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:tf.hasOwnProperty(e)&&!tf[e].primitive}}var YW=/^[]/,tS=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),TN={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},XW={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class WE{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new bit(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new lt("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Bo("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(e,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(WE.endOfExpression.indexOf(s.text)!==-1||n&&s.text===n||e&&tf[s.text]&&tf[s.text].infix)break;var a=this.parseAtom(n);if(a){if(a.type==="internal")continue}else break;r.push(a)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var n=-1,r,s=0;s<e.length;s++)if(e[s].type==="infix"){if(n!==-1)throw new lt("only one infix operator per group",e[s].token);n=s,r=e[s].replaceWith}if(n!==-1&&r){var a,i,o=e.slice(0,n),l=e.slice(n+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var u;return r==="\\\\abovefrac"?u=this.callFunction(r,[a,e[n],i],[]):u=this.callFunction(r,[a,i],[]),[u]}else return e}handleSupSubscript(e){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(e)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new lt("Expected group after '"+r+"'",n);return s}formatUnsupportedCmd(e){for(var n=[],r=0;r<e.length;r++)n.push({type:"textord",mode:"text",text:e[r]});var s={type:"text",mode:this.mode,body:n},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(e){var n=this.parseGroup("atom",e);if((n==null?void 0:n.type)==="internal"||this.mode==="text")return n;for(var r,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(n&&n.type==="op"){var i=a.text==="\\limits";n.limits=i,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=a.text==="\\limits");else throw new lt("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(r)throw new lt("Double superscript",a);r=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new lt("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(r)throw new lt("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(tS[a.text]){var u=YW.test(a.text),d=[];for(d.push(new Bo(tS[a.text])),this.consume();;){var f=this.fetch().text;if(!tS[f]||YW.test(f)!==u)break;d.unshift(new Bo(tS[f])),this.consume()}var m=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:m}:r={type:"ordgroup",mode:"math",body:m}}else break}return r||s?{type:"supsub",mode:this.mode,base:n,sup:r,sub:s}:n}parseFunction(e,n){var r=this.fetch(),s=r.text,a=tf[s];if(!a)return null;if(this.consume(),n&&n!=="atom"&&!a.allowedInArgument)throw new lt("Got function '"+s+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!a.allowedInText)throw new lt("Can't use function '"+s+"' in text mode",r);if(this.mode==="math"&&a.allowedInMath===!1)throw new lt("Can't use function '"+s+"' in math mode",r);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,r,e)}callFunction(e,n,r,s,a){var i={funcName:e,parser:this,token:s,breakOnTokenText:a},o=tf[e];if(o&&o.handler)return o.handler(i,n,r);throw new lt("No function handler for "+e)}parseArguments(e,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<r;i++){var o=n.argTypes&&n.argTypes[i],l=i<n.numOptionalArgs;(n.primitive&&o==null||n.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",o,l);if(l)a.push(u);else if(u!=null)s.push(u);else throw new lt("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(e,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var s=this.parseArgumentGroup(r,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",r);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(r)throw new lt("A primitive argument cannot be optional");var i=this.parseGroup(e);if(i==null)throw new lt("Expected group as "+e,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new lt("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),r.text=s,r}parseRegexGroup(e,n){for(var r=this.fetch(),s=r,a="",i;(i=this.fetch()).text!=="EOF"&&e.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new lt("Invalid "+n+": '"+r.text+"'",r);return r.range(s,a)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new lt("Invalid color: '"+n.text+"'",n);var s=r[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(e){var n,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",r=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!s)throw new lt("Invalid size: '"+n.text+"'",n);var a={number:+(s[1]+s[2]),unit:s[3]};if(!tue(a))throw new lt("Invalid unit: '"+a.unit+"'",n);return{type:"size",mode:this.mode,value:a,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,n){var r=this.gullet.scanArgument(e);if(r==null)return null;var s=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:r.loc,body:a};return n&&this.switchMode(s),i}parseGroup(e,n){var r=this.fetch(),s=r.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:Zi.range(r,l),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(n,e)||this.parseSymbol(),a==null&&s[0]==="\\"&&!que.hasOwnProperty(s)){if(this.settings.throwOnError)throw new lt("Undefined control sequence: "+s,r);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(e){for(var n=e.length-1,r=0;r<n;++r){var s=e[r],a=s.text;a==="-"&&e[r+1].text==="-"&&(r+1<n&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:Zi.range(s,e[r+2]),text:"---"}),n-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:Zi.range(s,e[r+1]),text:"--"}),n-=1)),(a==="'"||a==="`")&&e[r+1].text===a&&(e.splice(r,2,{type:"textord",mode:"text",loc:Zi.range(s,e[r+1]),text:a+a}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),s=r.charAt(0)==="*";if(s&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new lt(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:s}}XW.hasOwnProperty(n[0])&&!Kr[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=XW[n[0]]+n.slice(1));var a=git.exec(n);a&&(n=n.substring(0,a.index),n==="i"?n="":n==="j"&&(n=""));var i;if(Kr[this.mode][n]){this.settings.strict&&this.mode==="math"&&_7.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var o=Kr[this.mode][n].group,l=Zi.range(e),u;if(lat.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:l,text:n}}else u={type:o,mode:this.mode,loc:l,text:n};i=u}else if(n.charCodeAt(0)>=128)this.settings.strict&&(eue(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),i={type:"textord",mode:"text",loc:Zi.range(e),text:n};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var m=a[0][f];if(!TN[m])throw new lt("Unknown accent ' "+m+"'",e);var g=TN[m][this.mode]||TN[m].text;if(!g)throw new lt("Accent "+m+" unsupported in "+this.mode+" mode",e);i={type:"accent",mode:this.mode,loc:Zi.range(e),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}WE.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var cO=function(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new WE(e,n);delete r.gullet.macros.current["\\df@tag"];var s=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new lt("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:r.subparse([new Bo("\\df@tag")])}]}return s},Gue=function(e,n,r){n.textContent="";var s=uO(e,r).toNode();n.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Gue=function(){throw new lt("KaTeX doesn't work in quirks mode.")});var wit=function(e,n){var r=uO(e,n).toMarkup();return r},Cit=function(e,n){var r=new qI(n);return cO(e,r)},Wue=function(e,n,r){if(r.throwOnError||!(e instanceof lt))throw e;var s=Re.makeSpan(["katex-error"],[new Tl(n)]);return s.setAttribute("title",e.toString()),s.setAttribute("style","color:"+r.errorColor),s},uO=function(e,n){var r=new qI(n);try{var s=cO(e,r);return Dat(s,e,r)}catch(a){return Wue(a,e,r)}},Sit=function(e,n){var r=new qI(n);try{var s=cO(e,r);return Rat(s,e,r)}catch(a){return Wue(a,e,r)}},kit="0.16.27",Eit={Span:Pw,Anchor:KI,SymbolNode:Tl,SvgNode:$d,PathNode:Ef,LineNode:E7},JW={version:kit,render:Gue,renderToString:wit,ParseError:lt,SETTINGS_SCHEMA:WS,__parse:Cit,__renderToDomTree:uO,__renderToHTMLTree:Sit,__setFontMetrics:eat,__defineSymbol:$,__defineFunction:St,__defineMacro:re,__domTree:Eit};const _it={};function Kue(t){const e=this,n=t||_it,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(_st(n)),a.push(hst()),i.push(fst(n))}const QW=/[#.]/g;function Tit(t,e){const n=t||"",r={};let s=0,a,i;for(;s<n.length;){QW.lastIndex=s;const o=QW.exec(n),l=n.slice(s,o?o.index:n.length);l&&(a?a==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:i=l,s+=l.length),o&&(a=o[0],s++)}return{type:"element",tagName:i||e||"div",properties:r,children:[]}}function Yue(t,e,n){const r=n?Dit(n):void 0;function s(a,i,...o){let l;if(a==null){l={type:"root",children:[]};const u=i;o.unshift(u)}else{l=Tit(a,e);const u=l.tagName.toLowerCase(),d=r?r.get(u):void 0;if(l.tagName=d||u,Ait(i))o.unshift(i);else for(const[f,m]of Object.entries(i))Nit(t,l.properties,f,m)}for(const u of o)R7(l.children,u);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function Ait(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const a=s;for(const i of a)if(typeof i!="number"&&typeof i!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Nit(t,e,n,r){const s=Coe(t,n);let a;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;a=r}else typeof r=="boolean"?a=r:typeof r=="string"?s.spaceSeparated?a=Wq(r):s.commaSeparated?a=Uq(r):s.commaOrSpaceSeparated?a=Wq(Uq(r).join(" ")):a=ZW(s,s.property,r):Array.isArray(r)?a=[...r]:a=s.property==="style"?jit(r):String(r);if(Array.isArray(a)){const i=[];for(const o of a)i.push(ZW(s,s.property,o));a=i}s.property==="className"&&Array.isArray(e.className)&&(a=e.className.concat(a)),e[s.property]=a}}function R7(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)R7(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?R7(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function ZW(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||ib(n)===ib(e)))return!0}return n}function jit(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function Dit(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const Rit=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Mit=Yue(Soe,"div"),Iit=Yue(AE,"g",Rit),AN={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};function Oit(t,e){return Xue(t,{})||{type:"root",children:[]}}function Xue(t,e){const n=Pit(t,e);return n&&e.afterTransform&&e.afterTransform(t,n),n}function Pit(t,e){switch(t.nodeType){case 1:return zit(t,e);case 3:return Bit(t);case 8:return Lit(t);case 9:return eK(t,e);case 10:return Fit();case 11:return eK(t,e);default:return}}function eK(t,e){return{type:"root",children:Jue(t,e)}}function Fit(){return{type:"doctype"}}function Bit(t){return{type:"text",value:t.nodeValue||""}}function Lit(t){return{type:"comment",value:t.nodeValue||""}}function zit(t,e){const n=t.namespaceURI,r=n===AN.svg?Iit:Mit,s=n===AN.html?t.tagName.toLowerCase():t.tagName,a=n===AN.html&&s==="template"?t.content:t,i=t.getAttributeNames(),o={};let l=-1;for(;++l<i.length;)o[i[l]]=t.getAttribute(i[l])||"";return r(s,o,Jue(a,e))}function Jue(t,e){const n=t.childNodes,r=[];let s=-1;for(;++s<n.length;){const a=Xue(n[s],e);a!==void 0&&r.push(a)}return r}new DOMParser;function $it(t,e){const n=Uit(t);return Oit(n)}function Uit(t){const e=document.createElement("template");return e.innerHTML=t,e.content}const tK=(function(t,e,n){const r=_w(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=t.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(r(t.children[e],e,t))return t.children[e]}),M0=(function(t){if(t==null)return qit;if(typeof t=="string")return Vit(t);if(typeof t=="object")return Hit(t);if(typeof t=="function")return dO(t);throw new Error("Expected function, string, or array as `test`")});function Hit(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=M0(t[n]);return dO(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function Vit(t){return dO(e);function e(n){return n.tagName===t}}function dO(t){return e;function e(n,r,s){return!!(Git(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function qit(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function Git(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const nK=/\n/g,rK=/[\t ]+/g,M7=M0("br"),sK=M0(eot),Wit=M0("p"),aK=M0("tr"),Kit=M0(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Zit,tot]),Que=M0(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Yit(t,e){const n=e||{},r="children"in t?t.children:[],s=Que(t),a=tde(t,{whitespace:n.whitespace||"normal"}),i=[];(t.type==="text"||t.type==="comment")&&i.push(...ede(t,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<r.length;)i.push(...Zue(r[o],t,{whitespace:a,breakBefore:o?void 0:s,breakAfter:o<r.length-1?M7(r[o+1]):s}));const l=[];let u;for(o=-1;++o<i.length;){const d=i[o];typeof d=="number"?u!==void 0&&d>u&&(u=d):d&&(u!==void 0&&u>-1&&l.push(`
`.repeat(u)||" "),u=-1,l.push(d))}return l.join("")}function Zue(t,e,n){return t.type==="element"?Xit(t,e,n):t.type==="text"?n.whitespace==="normal"?ede(t,n):Jit(t):[]}function Xit(t,e,n){const r=tde(t,n),s=t.children||[];let a=-1,i=[];if(Kit(t))return i;let o,l;for(M7(t)||aK(t)&&tK(e,t,aK)?l=`
`:Wit(t)?(o=2,l=2):Que(t)&&(o=1,l=1);++a<s.length;)i=i.concat(Zue(s[a],t,{whitespace:r,breakBefore:a?void 0:o,breakAfter:a<s.length-1?M7(s[a+1]):l}));return sK(t)&&tK(e,t,sK)&&i.push("	"),o&&i.unshift(o),l&&i.push(l),i}function ede(t,e){const n=String(t.value),r=[],s=[];let a=0;for(;a<=n.length;){nK.lastIndex=a;const l=nK.exec(n),u=l&&"index"in l?l.index:n.length;r.push(Qit(n.slice(a,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),a===0?e.breakBefore:!0,u===n.length?e.breakAfter:!0)),a=u+1}let i=-1,o;for(;++i<r.length;)r[i].charCodeAt(r[i].length-1)===8203||i<r.length-1&&r[i+1].charCodeAt(0)===8203?(s.push(r[i]),o=void 0):r[i]?(typeof o=="number"&&s.push(o),s.push(r[i]),o=0):(i===0||i===r.length-1)&&s.push(0);return s}function Jit(t){return[String(t.value)]}function Qit(t,e,n){const r=[];let s=0,a;for(;s<t.length;){rK.lastIndex=s;const i=rK.exec(t);a=i?i.index:t.length,!s&&!a&&i&&!e&&r.push(""),s!==a&&r.push(t.slice(s,a)),s=i?a+i[0].length:a}return s!==a&&!n&&r.push(""),r.join(" ")}function tde(t,e){if(t.type==="element"){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function Zit(t){return!!(t.properties||{}).hidden}function eot(t){return t.tagName==="td"||t.tagName==="th"}function tot(t){return t.tagName==="dialog"&&!(t.properties||{}).open}const not={},rot=[];function nde(t){const e=t||not;return function(n,r){bI(n,"element",function(s,a){const i=Array.isArray(s.properties.className)?s.properties.className:rot,o=i.includes("language-math"),l=i.includes("math-display"),u=i.includes("math-inline");let d=l;if(!o&&!l&&!u)return;let f=a[a.length-1],m=s;if(s.tagName==="code"&&o&&f&&f.type==="element"&&f.tagName==="pre"&&(m=f,f=a[a.length-2],d=!0),!f)return;const g=Yit(m,{whitespace:"pre"});let x;try{x=JW.renderToString(g,{...e,displayMode:d,throwOnError:!0})}catch(C){const S=C,w=S.name.toLowerCase();r.message("Could not render math with KaTeX",{ancestors:[...a,s],cause:S,place:s.position,ruleId:w,source:"rehype-katex"});try{x=JW.renderToString(g,{...e,displayMode:d,strict:"ignore",throwOnError:!1})}catch{x=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(e.errorColor||"#cc0000"),title:String(C)},children:[{type:"text",value:g}]}]}}typeof x=="string"&&(x=$it(x).children);const b=f.children.indexOf(m);return f.children.splice(b,1,...x),Xoe})}}const sot=()=>c.jsx(dst,{remarkPlugins:[_I,TI,Kue],rehypePlugins:[[nde,{output:"html"}]],className:"aui-md",components:hO}),aot=y.memo(sot),iot=({language:t,code:e})=>{const{isCopied:n,copyToClipboard:r}=oot(),s=()=>{!e||n||r(e)};return c.jsxs("div",{className:"aui-code-header-root mt-4 flex items-center justify-between gap-4 rounded-t-lg bg-muted-foreground/15 px-4 py-2 font-semibold text-foreground text-sm dark:bg-muted-foreground/20",children:[c.jsx("span",{className:"aui-code-header-language lowercase [&>span]:text-xs",children:t}),c.jsxs(Su,{tooltip:"Copy",onClick:s,children:[!n&&c.jsx(cR,{}),n&&c.jsx(or,{})]})]})},oot=({copiedDuration:t=3e3}={})=>{const[e,n]=y.useState(!1);return{isCopied:e,copyToClipboard:s=>{s&&navigator.clipboard.writeText(s).then(()=>{n(!0),setTimeout(()=>n(!1),t)})}}},hO=Yrt({h1:({className:t,...e})=>c.jsx("h1",{className:ge("aui-md-h1 mb-8 scroll-m-20 font-extrabold text-4xl tracking-tight last:mb-0",t),...e}),h2:({className:t,...e})=>c.jsx("h2",{className:ge("aui-md-h2 mt-8 mb-4 scroll-m-20 font-semibold text-3xl tracking-tight first:mt-0 last:mb-0",t),...e}),h3:({className:t,...e})=>c.jsx("h3",{className:ge("aui-md-h3 mt-6 mb-4 scroll-m-20 font-semibold text-2xl tracking-tight first:mt-0 last:mb-0",t),...e}),h4:({className:t,...e})=>c.jsx("h4",{className:ge("aui-md-h4 mt-6 mb-4 scroll-m-20 font-semibold text-xl tracking-tight first:mt-0 last:mb-0",t),...e}),h5:({className:t,...e})=>c.jsx("h5",{className:ge("aui-md-h5 my-4 font-semibold text-lg first:mt-0 last:mb-0",t),...e}),h6:({className:t,...e})=>c.jsx("h6",{className:ge("aui-md-h6 my-4 font-semibold first:mt-0 last:mb-0",t),...e}),p:({className:t,...e})=>c.jsx("p",{className:ge("aui-md-p mt-5 mb-5 leading-7 first:mt-0 last:mb-0",t),...e}),a:({className:t,...e})=>c.jsx("a",{className:ge("aui-md-a font-medium text-primary underline underline-offset-4",t),...e}),blockquote:({className:t,...e})=>c.jsx("blockquote",{className:ge("aui-md-blockquote border-l-2 pl-6 italic",t),...e}),ul:({className:t,...e})=>c.jsx("ul",{className:ge("aui-md-ul my-5 ml-6 list-disc [&>li]:mt-2",t),...e}),ol:({className:t,...e})=>c.jsx("ol",{className:ge("aui-md-ol my-5 ml-6 list-decimal [&>li]:mt-2",t),...e}),hr:({className:t,...e})=>c.jsx("hr",{className:ge("aui-md-hr my-5 border-b",t),...e}),table:({className:t,...e})=>c.jsx("table",{className:ge("aui-md-table my-5 w-full border-separate border-spacing-0 overflow-y-auto",t),...e}),th:({className:t,...e})=>c.jsx("th",{className:ge("aui-md-th bg-muted px-4 py-2 text-left font-bold first:rounded-tl-lg last:rounded-tr-lg [[align=center]]:text-center [[align=right]]:text-right",t),...e}),td:({className:t,...e})=>c.jsx("td",{className:ge("aui-md-td border-b border-l px-4 py-2 text-left last:border-r [[align=center]]:text-center [[align=right]]:text-right",t),...e}),tr:({className:t,...e})=>c.jsx("tr",{className:ge("aui-md-tr m-0 border-b p-0 first:border-t [&:last-child>td:first-child]:rounded-bl-lg [&:last-child>td:last-child]:rounded-br-lg",t),...e}),sup:SZe,pre:({className:t,...e})=>c.jsx("pre",{className:ge("aui-md-pre overflow-x-auto rounded-t-none! rounded-b-lg bg-black p-4 text-white",t),...e}),code:function({className:e,...n}){const r=Yce();return c.jsx("code",{className:ge(!r&&"aui-md-inline-code rounded border bg-muted font-semibold",e),...n})},CodeHeader:iot}),lot=({result:t,isExpanded:e=!1,onToggleExpand:n})=>{const{contents:r}=t,s=r.summary;return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"rounded-lg border border-theme bg-theme-1 px-3 py-2.5 hover:border-theme transition-colors",children:[c.jsxs("div",{className:"flex items-start gap-2.5",children:[c.jsx("div",{className:"mt-0.5 flex h-5 w-5 items-center justify-center rounded-full bg-slate-700 text-white flex-shrink-0",children:c.jsx(f4,{className:"h-3 w-3"})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("p",{className:ge("text-[12px] leading-relaxed text-theme-0 transition-all",!e&&"line-clamp-4"),children:c.jsx(CI,{remarkPlugins:[_I,TI],components:hO,children:s})})})]}),c.jsxs("div",{className:"mt-2 pt-2 border-t border-theme flex items-center gap-1.5 text-[10px] text-theme-1 font-medium",children:[c.jsx(f4,{className:"h-3 w-3 text-indigo-500"}),"Key concepts distilled into a concise summary"]})]}),(s==null?void 0:s.length)>0&&c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-1.5 py-2 text-[11px] font-semibold text-theme-2 hover:text-theme-0 transition-colors rounded-lg hover:bg-theme-1",children:[c.jsx("span",{children:e?"Show less":"Read full summary"}),!e&&c.jsx(oi,{className:"h-3.5 w-3.5"})]})]})},cot=({frontContent:t,backContent:e,frontFlipButtonText:n="Flip",backFlipButtonText:r="Back to question",backActionButton:s})=>{const[a,i]=y.useState(!1);return y.useEffect(()=>{const o=l=>{l.code==="Space"&&(l.preventDefault(),i(u=>!u))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]),c.jsx("div",{className:"relative w-96 sm:min-w-xl sm:w-[576px] h-96 cursor-pointer",style:{perspective:"1500px"},onClick:()=>i(!a),children:c.jsxs("div",{className:"relative w-full h-full transition-transform duration-700",style:{transformStyle:"preserve-3d",transform:a?"rotateY(-180deg)":"rotateY(0deg)",transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"},children:[c.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between items-start p-8 rounded-4xl border border-theme bg-theme-0 shadow-md",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[c.jsx("div",{className:"w-full",children:t}),c.jsx("button",{className:"text-theme-1 font-sans text-lg font-medium leading-none -m-2 p-2",children:n})]}),c.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between items-start p-8 rounded-4xl border border-theme bg-theme-0 shadow-md",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(-180deg)"},children:[c.jsx("div",{className:"w-full flex-1 min-h-0",children:e}),c.jsxs("div",{className:"flex justify-between items-end w-full -m-2",children:[c.jsx("button",{className:"text-theme-1 font-sans text-lg font-medium leading-none p-2",children:r}),c.jsx("div",{className:"-mr-3",children:s&&s})]})]})]})})};function uot(t,e){const[n,r]=y.useState([]),[s,a]=y.useState(!1),i=y.useRef(null);return{messages:n,sendMessage:async d=>{const f={sender:"user",content:d};r(g=>[...g,f]),a(!0),i.current=new AbortController;const m=e.filter(g=>"id"in g).map(g=>g.id);try{const{stream:g}=await pie({path:{notebook_id:t,chat_id:"1"},body:{query:f,history:n,notebook_document_ids:m}});r(b=>[...b,{sender:"ai",content:""}]);let x="";for await(const b of g)x+=b.slice(1),r(C=>{const S=[...C],w=S.length-1;return S[w]={...S[w],content:x},S})}catch(g){g.name==="AbortError"?console.log("Streaming aborted by user"):(console.error("Streaming error:",g),r(x=>[...x,{sender:"ai",content:"Sorry, I encountered an error. Please try again."}]))}finally{a(!1),i.current=null}},isStreaming:s,stopStreaming:()=>{i.current&&(i.current.abort(),a(!1))},clearMessages:()=>{r([])}}}const nf="[__bettercampus__tool__]",Kh="[__bettercampus_gate__]";async function dot(t,e,n,r){const s=Ou.find(u=>u.label===t),a=s==null?void 0:s.id;if(!a)throw Error(`Failed to create highlight. Invalid type ${t}`);const{data:i,error:o,response:l}=await dHe({path:{id:n},body:{name:e.topic,config_prompt:s.configPrompt.makePrompt(e),notebook_document_ids:r,type:a}});if(l.status===402)throw{error:o,status:402};if(o)throw Error(`Failed to create highlight. Error: ${JSON.stringify(o)}`);return i}async function hot(t,e,n,r){const s=await n({name:t.name,course:e,fileId:t.metadata.canvas_file_id.toString()});if("notebook_documents"in s&&s.notebook_documents.length)return{notebook:s,document:s.notebook_documents[0]};const a=await r({...t,notebook_id:s.id},s.id.toString());return{notebook:s,document:a}}const I7=(t,e,n)=>{const r=t==="-1";let s=e.map(i=>i.id);return{async*run({messages:i,abortSignal:o}){var x;console.log("adapter",i);const l=i[i.length-1];if(i.length===1&&r&&n){const{notebook:b,document:C}=await hot(n.courseFile,n.course,n.createNotebook,n.uploadCourseSource);t=b.id.toString(),s=[C.id]}const u=(x=l==null?void 0:l.content)==null?void 0:x.find(b=>b.type==="text"&&typeof b.text=="string"&&b.text.startsWith(`${nf}:`));if(u){const b=u.text.slice(nf.length+1).trim(),[C,...S]=b.split(" "),[w,...E]=S,T=E.join(" ").trim(),_={topic:T,...JSON.parse(w)},A=crypto.randomUUID();try{yield{content:[{type:"tool-call",toolName:C,toolCallId:A,args:_,argsText:T}]};const j=await dot(C,_,t,s);yield{content:[{type:"tool-call",toolName:C,toolCallId:A,result:j,args:{},argsText:""}]}}catch(j){if(console.error(j),"status"in j&&j.status===402){yield{content:[{type:"tool-call",toolName:Kh,toolCallId:A,result:{error:j.error.error,period:j.error.period},isError:!0,args:{type:"highlights",period:j.error.period},argsText:""}]};return}yield{content:[{type:"tool-call",toolName:C,toolCallId:A,result:{error:j.message},isError:!0,args:{},argsText:""}]}}return}const d=i.filter(b=>b.content.filter(C=>C.type==="text"&&C.text.slice(0,nf.length)!==nf).length);if(d.length===0)return;console.log("text messages",d);const f=d[d.length-1].content.find(b=>b.type==="text").text,{stream:m}=await pie({path:{notebook_id:t,chat_id:"1"},body:{query:{sender:"user",content:f},history:d.slice(0,d.length-1).map(b=>{var C;return{sender:"ai",content:((C=b.content.find(S=>S.type==="text"))==null?void 0:C.text)||""}}),notebook_document_ids:s}});let g="";for await(const b of m){if(!g&&b.slice(0,Kh.length)===Kh){yield{content:[{type:"tool-call",toolName:Kh,args:{type:"chat",period:b.slice(Kh.length)}}]};continue}g+=b.slice(1),yield{content:[{type:"text",text:g}]}}}}};function rde({children:t}){return c.jsx(CI,{remarkPlugins:[_I,TI,Kue],rehypePlugins:[[nde,{output:"html"}]],components:hO,children:t})}const fot=250,mot=230,pot=({card:t})=>{const e=y.useRef(null),n=y.useRef(null),[r,s]=y.useState(30),[a,i]=y.useState(30),[o,l]=y.useState(!1),[u,d]=y.useState(""),[f,m]=y.useState(!1),{notebook:g,selectedSources:x}=os(),{loadSharedComponent:b}=ut(),{planType:C}=wa(),{sendMessage:S,messages:w,isStreaming:E}=uot(g.id.toString(),x);y.useEffect(()=>{const O=(P,I)=>{if(!P)return;const U=fot;let W=30;P.style.fontSize=`${W}px`,P.style.overflow="hidden",P.style.maxHeight="none",P.scrollHeight>U&&(W=24,P.style.fontSize=`${W}px`),P.scrollHeight>U&&(P.style.overflow="auto",P.style.maxHeight=`${U}px`),I(W)},H=setTimeout(()=>{O(e.current,s),o||O(n.current,i)},50);return()=>clearTimeout(H)},[t.term,t.definition,o]),y.useEffect(()=>{var O;if(w.length%2==0&&o){const H=(O=w[w.length-1])==null?void 0:O.content;H&&(H.slice(0,Kh.length-1)===Kh.slice(1)?(b("TrialClaimGate",{highlight:"study_page_paywall_type"}),l(!1)):d(H))}},[w,o]);const T=()=>`Please explain this flashcard:
            Question: ${t.term}
            Answer: ${t.definition}

            Provide a concise explanation of the concept.`,_=async O=>{if(O.stopPropagation(),C==="pro"){if(l(!0),u)return;await S(T())}else b("TrialClaimGate",{highlight:"study_page_paywall_type"})},A=O=>{O.stopPropagation(),l(!1)},j=async O=>{O.stopPropagation(),d(""),await S(T())},D=c.jsx("div",{ref:e,className:"text-theme-0 font-sans font-medium leading-9",style:{fontSize:`${r}px`},children:t.term}),z=u?c.jsx("button",{onClick:_,className:"text-theme-1 font-sans text-lg font-medium leading-none p-2",children:"See explanation"}):c.jsxs("button",{onClick:_,disabled:E,className:"bg-theme-1 rounded-3xl text-theme-0 flex p-2 items-center hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(dZ,{className:"h-6"}),c.jsx("span",{className:"px-1",children:"Explain"})]}),F=c.jsx("button",{onClick:A,className:"text-theme-1 font-sans text-lg font-medium leading-none p-2",children:"Back to answer"}),R=u&&!E&&c.jsx("div",{className:"flex gap-1 mt-2 -ml-1 text-theme-0",children:c.jsx(Su,{tooltip:"Explain differently",onClick:j,children:c.jsx(dR,{className:"h-4 w-4"})})}),L=c.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[c.jsx("div",{ref:n,className:`text-theme-0 font-sans font-medium leading-9 pr-3 transition-opacity duration-300 absolute inset-0 ${o?"opacity-0 pointer-events-none":"opacity-100"}`,style:{fontSize:`${a}px`},children:t.definition}),c.jsxs("div",{className:`transition-opacity duration-300 flex flex-col ${o?"opacity-100":"opacity-0 pointer-events-none"}`,children:[c.jsx("div",{className:`${E&&!u?"animate-pulse":""} text-theme-0 font-sans font-normal text-sm leading-relaxed overflow-y-auto whitespace-pre-wrap pr-3`,style:{maxHeight:`${mot}px`},children:c.jsx(rde,{children:E?"Generating explanation...":u||"Click 'Explain' to get an AI explanation..."})}),R]})]});return c.jsx(cot,{frontContent:D,backContent:L,frontFlipButtonText:"View answer",backFlipButtonText:"Back to question",backActionButton:o?F:z})},got={enter:t=>({x:t>0?80:-80,opacity:0,scale:.95}),center:{x:0,opacity:1,scale:1},exit:t=>({x:t>0?-80:80,opacity:0,scale:.95})};function vot({contents:t,className:e}){const n=t.flashcards,[r,s]=y.useState(()=>n.map((_,A)=>A)),[a,i]=y.useState(0),[o,l]=y.useState("term"),[u,d]=y.useState(1),f=n.length,m=n[r[a]],g=y.useMemo(()=>!m||o==="term"?m:{...m,term:m.definition,definition:m.term},[m,o]),x=y.useCallback(()=>{d(-1),i(_=>Math.max(0,_-1))},[]),b=y.useCallback(()=>{d(1),i(_=>Math.min(f-1,_+1))},[f]),C=()=>i(0),S=()=>{const _=[...r];for(let A=_.length-1;A>0;A--){const j=Math.floor(Math.random()*(A+1));[_[A],_[j]]=[_[j],_[A]]}s(_),i(0)};y.useEffect(()=>{const _=A=>{A.key==="ArrowLeft"&&(A.preventDefault(),x()),A.key==="ArrowRight"&&(A.preventDefault(),b())};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[b,x]);const w=y.useMemo(()=>f===0?0:(a+1)/f*100,[a,f]);if(!g)return null;const E="flex items-center gap-1 px-3 py-2 rounded-lg text-theme-0 transition hover:bg-theme-1 active:scale-[0.97] disabled:opacity-40 disabled:pointer-events-none",T="inline-flex items-center gap-1 text-xs transition text-theme-1 hover:scale-110 active:scale-90";return c.jsxs("div",{className:ge("w-full max-w-xl mx-auto flex flex-col items-center",e),children:[c.jsxs("div",{className:"mb-3 text-center text-xs text-theme-1",children:[c.jsxs("span",{className:"pr-8",children:["Click or ",c.jsx("kbd",{className:"px-1 py-0.5 rounded bg-theme-1",children:"Space"})," ","to flip"]}),c.jsx("kbd",{className:"px-1 py-0.5 rounded bg-theme-1",children:""}),c.jsx("kbd",{className:"px-1 py-0.5 rounded bg-theme-1",children:""})," to navigate"]}),c.jsxs("div",{className:"relative w-full flex justify-center",children:[c.jsx("div",{"aria-hidden":!0,className:ge("pointer-events-none absolute left-[-50px] top-1/2 -translate-y-1/2","h-64 w-64 rounded-full blur-2xl opacity-20"),style:{background:"radial-gradient(circle, rgba(99,102,241,1))"}}),c.jsx("div",{"aria-hidden":!0,className:ge("pointer-events-none absolute right-[-50px] top-1/2 -translate-y-1/2","h-64 w-64 rounded-full blur-2xl opacity-20"),style:{background:"radial-gradient(circle, rgba(16,185,129,1))"}}),c.jsx("div",{className:"relative w-full flex justify-center min-h-[360px] z-10 mb-5",children:c.jsx(Wo,{mode:"wait",custom:u,children:c.jsx(pa.div,{custom:u,variants:got,initial:"enter",animate:"center",exit:"exit",transition:{duration:.15,ease:"easeOut"},className:"absolute",children:c.jsx(pot,{card:g})},r[a])})})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between w-full",children:[c.jsxs("button",{onClick:x,disabled:a===0,className:E,children:[c.jsx(Kd,{className:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"}),"Prev"]}),c.jsxs("div",{className:"text-xs text-theme-1",children:[a+1," / ",f]}),c.jsxs("button",{onClick:b,disabled:a===f-1,className:E,children:["Next",c.jsx(pc,{className:"h-4 w-4 transition-transform group-hover:translate-x-0.5"})]})]}),c.jsx("div",{className:"mt-3 h-1 w-full rounded-full bg-theme-2 overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-gradient transition-all rounded-full duration-300",style:{width:`${w}%`}})}),c.jsxs("div",{className:"mt-3 flex items-center justify-between w-full",children:[c.jsxs("button",{onClick:()=>l(_=>_==="term"?"definition":"term"),className:ge("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs","bg-theme-1 text-theme-1 transition","hover:bg-theme-2 hover:text-theme-0 active:scale-[0.96]"),children:[c.jsx(tZ,{className:"h-3.5 w-3.5"}),"Showing: ",c.jsx("strong",{children:o})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("button",{onClick:C,className:T,children:[c.jsx(fk,{className:"h-3.5 w-3.5"}),"Restart"]}),c.jsxs("button",{onClick:S,className:T,children:[c.jsx(D_e,{className:"h-3.5 w-3.5"}),"Shuffle"]})]})]})]})}function yot({contents:t,className:e}){const n=t.flashcards;return!n||n.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-theme-1",children:"No flashcards available."}):c.jsxs("div",{className:ge("h-full w-full overflow-y-auto pb-10",e),children:[c.jsx("section",{className:"mb-26",children:c.jsx(vot,{contents:t})}),c.jsx("div",{className:"max-w-3xl mx-auto mb-6 px-6",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-5 w-1 rounded-full bg-brand-gradient"}),c.jsxs("h2",{className:"text-lg font-semibold text-theme-0",children:["All cards in this set (",n.length,")"]})]})}),c.jsx("section",{className:"max-w-3xl mx-auto px-6",children:c.jsx("div",{className:"grid gap-3",children:n.map((r,s)=>c.jsx("div",{className:ge("rounded-xl border border-theme","bg-theme-0 backdrop-blur shadow-theme","transition","p-4"),children:c.jsx("div",{className:"flex items-start gap-4",children:c.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("div",{className:"text-sm text-theme-0 font-semibold",children:r.term}),c.jsx("div",{className:"text-sm text-theme-1 leading-relaxed",children:r.definition})]})})},s))})})]})}const xot=({card:t,value:e,onAnswer:n})=>{const r=e,s=e!==null,a=r===t.correctAnswer,i=o=>{n(o)};return c.jsx("div",{className:"bg-theme-0 px-6 py-6 border border-theme rounded-xl w-[576px] shadow-md",children:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-2xl text-theme-0 font-sans font-medium leading-9",children:t.question}),c.jsx("div",{className:"flex flex-col gap-2",children:t.options.map((o,l)=>{const u=r===l,d=l===t.correctAnswer,f=s&&(d||u),m=d?"border-green-500":"border-red-500",g=s&&!d&&!u;return c.jsx("div",{onClick:()=>i(l),className:`
                                    p-3 rounded-lg border-2 bg-theme-1 transition-all
                                    ${f?m:"border-transparent"}
                                    ${!s&&"hover:brightness-95 cursor-pointer"}
                                    ${g&&"opacity-20"}
                                `,children:c.jsxs("div",{className:"text-theme-0 font-sans text-base flex gap-2",children:[c.jsxs("span",{className:"font-semibold",children:[String.fromCharCode(65+l),"."]}),c.jsx("span",{children:o})]})},l)})}),c.jsx("div",{className:`overflow-hidden transition-all duration-1500 ${s?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:c.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-green-200 text-green-600":"bg-red-200 text-red-600"}`,children:[c.jsxs("div",{className:"flex items-center gap-1 py-1",children:[a?c.jsx(or,{className:"h-5"}):c.jsx(ys,{className:"h-5"}),a?c.jsx("span",{className:"font-semibold",children:"Correct"}):c.jsx("span",{className:"font-semibold",children:"Incorrect"})]}),c.jsx("div",{className:"font-sans",children:t.explanation})]})})]})})};function bot({questions:t,className:e}){const[n,r]=y.useState(0),[s,a]=y.useState(()=>Array(t.length).fill(null)),i=t[n],o=t.length;y.useMemo(()=>s.filter(m=>m!==null).length,[s]),y.useMemo(()=>s.reduce((m,g,x)=>(g===t[x].correctAnswer&&m++,m),0),[s,t]),y.useMemo(()=>o===0?0:(n+1)/o*100,[n,o]);const l=y.useMemo(()=>s.map((m,g)=>m===null?"unanswered":m===t[g].correctAnswer?"correct":"incorrect"),[s,t]);y.useEffect(()=>{const m=g=>{const x=g.target;x.tagName==="INPUT"||x.tagName==="TEXTAREA"||x.isContentEditable||(g.key==="ArrowLeft"&&(g.preventDefault(),r(b=>Math.max(0,b-1))),g.key==="ArrowRight"&&(g.preventDefault(),r(b=>Math.min(o-1,b+1))))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[o]);const u=m=>{a(g=>{const x=[...g];return x[n]=m,x})},d=()=>{a(Array(o).fill(null)),r(0)},f="inline-flex items-center gap-1 text-xs transition text-theme-1 hover:scale-110 active:scale-90";return i?c.jsxs("div",{className:ge("w-full max-w-xl mx-auto flex flex-col items-center",e),children:[c.jsx("div",{className:"mb-3 flex items-center justify-between w-full text-xs text-theme-1",children:c.jsxs("span",{children:["Question ",n+1," of ",o]})}),c.jsxs("div",{className:"relative w-full flex justify-center",children:[c.jsx("div",{"aria-hidden":!0,className:ge("pointer-events-none absolute left-[-50px] top-1/2 -translate-y-1/2","h-64 w-64 rounded-full blur-2xl opacity-20"),style:{background:"radial-gradient(circle, rgba(99,102,241,1))"}}),c.jsx("div",{"aria-hidden":!0,className:ge("pointer-events-none absolute right-[-50px] top-1/2 -translate-y-1/2","h-64 w-64 rounded-full blur-2xl opacity-20"),style:{background:"radial-gradient(circle, oklch(70.5% 0.213 47.604))"}}),c.jsx("div",{className:"relative z-10 mb-5",children:c.jsx(xot,{card:i,value:s[n],onAnswer:u},n)})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between w-full",children:[c.jsxs("button",{onClick:()=>r(m=>Math.max(0,m-1)),disabled:n===0,className:`flex items-center gap-1 px-3 py-2 rounded-lg text-theme-0 transition
                     hover:bg-theme-1 active:scale-[0.97]
                     disabled:opacity-40 disabled:pointer-events-none`,children:[c.jsx(Kd,{className:"h-4 w-4"}),"Prev"]}),c.jsxs("div",{className:"text-xs text-theme-1",children:[n+1," / ",o]}),c.jsxs("button",{onClick:()=>r(m=>Math.min(o-1,m+1)),disabled:n===o-1,className:`flex items-center gap-1 px-3 py-2 rounded-lg text-theme-0 transition
                     hover:bg-theme-1 active:scale-[0.97]
                     disabled:opacity-40 disabled:pointer-events-none`,children:["Next",c.jsx(pc,{className:"h-4 w-4"})]})]}),c.jsxs("div",{className:"mt-4 w-full",children:[c.jsx("div",{className:"flex h-2 w-full gap-1",children:l.map((m,g)=>{const x=g===n;return c.jsx("button",{onClick:()=>r(g),className:ge("relative flex-1 rounded-full transition-all cursor-pointer","hover:brightness-105",m==="correct"&&"bg-emerald-400",m==="incorrect"&&"bg-red-400",m==="unanswered"&&"bg-theme-2",x&&"ring-2 ring-offset-2 ring-gray-400",x&&m==="correct"&&"ring-emerald-400",x&&m==="incorrect"&&"ring-red-400"),"aria-label":`Go to question ${g+1}`},g)})}),c.jsx("div",{className:"mt-2 flex w-full gap-1",children:l.map((m,g)=>c.jsxs("div",{className:"flex-1 flex justify-center transition-opacity duration-300",children:[m==="correct"&&c.jsx(or,{className:"h-3.5 w-3.5 text-emerald-500"}),m==="incorrect"&&c.jsx(ys,{className:"h-3.5 w-3.5 text-red-500"})]},g))})]}),c.jsxs("div",{className:"mt-3 flex items-center justify-between w-full",children:[c.jsx("div",{className:"flex-1"}),c.jsx("div",{className:"flex gap-4",children:c.jsxs("button",{onClick:d,className:f,children:[c.jsx(fk,{className:"h-3.5 w-3.5"}),"Restart"]})})]})]}):null}function wot({contents:t,className:e}){const n=t.questions;return!n||n.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-theme-1",children:"No quiz questions available."}):c.jsxs("div",{className:ge("h-full w-full overflow-y-auto pb-10",e),children:[c.jsx("section",{className:"mb-26",children:c.jsx(bot,{questions:n})}),c.jsx("div",{className:"max-w-3xl mx-auto mb-6 px-6",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-5 w-1 rounded-full bg-brand-gradient"}),c.jsxs("h2",{className:"text-lg font-semibold text-theme-0",children:["All questions in this quiz (",n.length,")"]})]})}),c.jsx("section",{className:"max-w-3xl mx-auto px-6",children:c.jsx("div",{className:"grid gap-8",children:n.map((r,s)=>c.jsx("div",{className:ge("rounded-xl border border-theme","bg-theme-0 backdrop-blur shadow-theme","transition","p-4"),children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("div",{className:"text-sm text-theme-0 font-semibold",children:r.question}),c.jsx("div",{className:"grid gap-1",children:r.options.map((a,i)=>{const o=i===r.correctAnswer;return c.jsxs("div",{className:ge("rounded-md px-3 py-2 text-sm border",o?"border-green-500 bg-green-100 text-green-700":"border-theme bg-theme-1 text-theme-1"),children:[c.jsxs("span",{className:"font-medium mr-1",children:[String.fromCharCode(65+i),"."]}),a]},i)})}),c.jsx("div",{className:"text-sm text-theme-1 leading-relaxed",children:r.explanation})]})},s))})})]})}function Cot({contents:t,className:e}){return t!=null&&t.summary?c.jsx("article",{className:ge("w-full max-w-3xl mx-auto","px-6 py-8","text-theme-0",e),children:c.jsx(rde,{children:t.summary})}):c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-theme-1",children:"No summary available."})}const Sot=({color:t})=>{const[e,n]=y.useState(0),[r,s]=y.useState(0),a=[{icon:fi,label:"Searching course documents",delay:0},{icon:bv,label:"Analyzing course content",delay:3e3},{icon:Uj,label:"Building study materials",delay:6e3},{icon:_l,label:"Finalizing materials",delay:1e4}];return y.useEffect(()=>{const i=setInterval(()=>{n(l=>l>=100?100:l+1)},100),o=a.map((l,u)=>setTimeout(()=>s(u),l.delay));return()=>{clearInterval(i),o.forEach(clearTimeout)}},[]),c.jsxs("div",{className:"bg-theme-0 px-6 py-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-center gap-3 relative",children:a.map((i,o)=>{const l=i.icon,u=o===r,d=o<r;return c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:ge("flex h-8 w-8 items-center justify-center rounded-lg border-2 transition-all duration-300",u&&`${t.bg} ${t.border} scale-110`,d&&`${t.bgDark} ${t.border}`,!u&&!d&&"bg-theme-0 border-theme"),children:c.jsx(l,{className:ge("h-4 w-4 transition-colors duration-300",u||d?"text-theme-0":"text-theme-2",u&&"animate-pulse")})}),o<a.length-1&&c.jsx("div",{className:"h-0.5 w-8 bg-theme-1",children:c.jsx("div",{className:ge(`h-full ${t.bg} transition-all duration-500`,d?"w-full":"w-0")})})]},o)})}),c.jsxs("div",{className:"text-sm font-semibold text-theme-0",children:[a[r].label,"..."]}),c.jsx("div",{className:"relative h-2 rounded-full bg-theme-2 overflow-hidden",children:c.jsx("div",{className:`absolute inset-y-0 left-0 transition-all ${t.bgDark} duration-100 ease-linear rounded-full`,style:{width:`${e}%`}})}),c.jsx("div",{className:"space-y-2 mt-6",children:[0,1,2].map(i=>c.jsx("div",{className:ge("rounded-lg border-2 border-theme bg-theme-0 p-3 transition-all duration-500",r>i?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"),style:{transitionDelay:`${i*200}ms`},children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:ge("h-3 rounded bg-theme-2 transition-all duration-700",r>i?"w-2/5":"w-0"),style:{transitionDelay:`${i*200+100}ms`}}),c.jsx("div",{className:ge("h-2 rounded bg-theme-1 transition-all duration-700",r>i?"w-1/5":"w-0"),style:{transitionDelay:`${i*200+300}ms`}})]}),c.jsx("div",{className:"space-y-1.5",children:[0,1].map(o=>c.jsx("div",{className:ge("h-2 rounded bg-theme-1 transition-all duration-700",r>i?"w-full":"w-0"),style:{transitionDelay:`${i*200+500+o*200}ms`,width:r>i?o===1?"80%":"100%":"0%"}},o))})]}),r>i+1&&c.jsx(_l,{className:"h-4 w-4 text-green-500 animate-in zoom-in duration-300"})]})},i))})]}),c.jsx("style",{children:`
        @keyframes float {
          0%,
          100% {
            transform: translateY(48px);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateY(-12px);
            opacity: 0;
          }
        }
        .animate-float {
          animation: float 3s ease-in-out infinite;
        }
      `})]})},Ou=[{id:"flashcard",label:"Flashcards",labelLong:"Flashcard Sets",configPrompt:{makePrompt:({count:t,difficulty:e})=>`The flashcards should be ${e.toLowerCase()} difficulty level with ${t} total flashcards.`,options:{count:["5","10","15"],difficulty:["Easy","Medium","Hard"]}},icon:vEe,previewComponent:eWe,focusedComponent:yot,color:{text:"text-emerald-800",bgDark:"bg-emerald-500/80",bg:"bg-emerald-200/90",bgLight:"bg-emerald-400/10",hoverBg:"hover:bg-emerald-300/70",border:"border-emerald-500",borderLight:"border-emerald-500/50"},description:"Generate flashcards from course materials",parameters:{type:"object",properties:{topic:{type:"string",description:"Optional topic to focus on"},count:{type:"number",description:"Number of flashcards to generate",default:10}}}},{id:"quiz",label:"Quiz",labelLong:"Practice Quizzes",configPrompt:{makePrompt:({count:t,difficulty:e})=>`The quiz should be ${e.toLowerCase()} difficulty with ${t} total questions.`,options:{count:["5","10","15"],difficulty:["Easy","Medium","Hard"]}},icon:gZ,color:{text:"text-orange-700",bgDark:"bg-orange-500/80",bg:"bg-orange-200/90",bgLight:"bg-orange-400/10",hoverBg:"hover:bg-orange-300/70",border:"border-orange-500",borderLight:"border-orange-500/50"},description:"Create a quiz from course materials",previewComponent:tWe,focusedComponent:wot},{id:"summary",label:"Summary",labelLong:"File Summaries",configPrompt:{makePrompt:({format:t})=>`The summary should be very ${t.toLowerCase()} and highlight the key points.`,options:{format:["Brief","Detailed"]}},icon:fi,color:{text:"text-blue-700",bgDark:"bg-blue-500/80",bg:"bg-blue-200/90",bgLight:"bg-blue-400/10",hoverBg:"hover:bg-blue-300/70",border:"border-blue-500",borderLight:"border-blue-500/50"},description:"Generate a summary of course materials",previewComponent:lot,focusedComponent:Cot}],kot=({label:t,icon:e,color:n,isLoading:r,result:s,children:a,onFinished:i})=>{var x,b;const[o,l]=y.useState(!1),[u,d]=y.useState(!1),f=y.useRef(null),{navigatePage:m}=os();y.useEffect(()=>{s&&!o&&(i==null||i(s),l(!0))},[s,o,i]),y.useEffect(()=>{const C=()=>{if(f.current){const w=f.current.offsetWidth;d(w<400)}};C();const S=new ResizeObserver(C);return f.current&&S.observe(f.current),window.addEventListener("resize",C),()=>{S.disconnect(),window.removeEventListener("resize",C)}},[]);const g=!r&&!!s;return c.jsxs("div",{className:ge("rounded-2xl border-2 transition-all duration-300 overflow-hidden mb-5",n.border,r?"shadow-lg":"shadow-xl"),children:[c.jsx("div",{ref:f,className:ge("px-6 py-5 border-b-2",n.bgLight,n.border),children:c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:ge("flex h-12 w-12 items-center justify-center rounded-xl text-white",n.bgDark),children:c.jsx(e,{className:"h-6 w-6"})}),c.jsxs("div",{className:"leading-tight",children:[c.jsx("div",{className:ge("text-lg font-bold tracking-tight text-theme-0"),children:t}),c.jsx("div",{className:ge("text-sm font-semibold flex items-center gap-2 text-theme-0"),children:r?c.jsxs(c.Fragment,{children:[c.jsx(js,{className:"h-3.5 w-3.5 animate-spin"}),c.jsx("span",{children:"Creating your materials..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-500 shadow-sm"}),c.jsx("span",{children:"Ready"})]})})]})]}),!r&&c.jsxs("button",{type:"button",onClick:()=>m({type:"highlight",value:s}),className:ge("inline-flex items-center gap-2 cursor-pointer","h-10 px-3 rounded-xl","font-semibold text-sm",n.bgDark,"text-white","hover:opacity-90 hover:scale-[1.02]","transition-all duration-200","shadow-lg text-xs"),"aria-label":`Open ${t}`,title:`Open ${t}`,children:[c.jsxs("span",{children:["Open",u?"":` ${t}`]}),c.jsx(vke,{className:"h-4 w-4"})]})]})}),r&&c.jsx(Sot,{color:n}),c.jsx("div",{className:ge("grid transition-all duration-500 ease-out bg-theme-0",g?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:c.jsx("div",{className:"min-w-0 overflow-hidden",children:c.jsx("div",{className:"",children:c.jsx("div",{className:"bg-theme-0 shadow-inner overflow-hidden",children:c.jsxs("div",{className:"max-h-[280px] overflow-y-auto",children:[s&&c.jsxs("div",{className:"bg-theme-0 border-b-2 border-theme px-6 py-4",children:[c.jsx("h3",{className:"text-lg font-bold text-theme-0 tracking-tight mb-3",children:s.name}),c.jsxs("div",{className:"flex flex-wrap items-center gap-x-5 gap-y-2 text-sm font-semibold text-theme-1",children:[(b=(x=s.metadata)==null?void 0:x.document_ids)!=null&&b.length?c.jsxs("span",{className:"inline-flex items-center gap-2 bg-theme-1 px-3 py-1.5 rounded-lg",children:[c.jsx(fi,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.metadata.document_ids.length," source",s.metadata.document_ids.length>1?"s":""]})]}):null,s.created_at&&c.jsxs("span",{className:"inline-flex items-center gap-2 bg-theme-1 px-3 py-1.5 rounded-lg",children:[c.jsx(k1,{className:"h-4 w-4"}),c.jsx("time",{dateTime:s.created_at,title:new Date(s.created_at).toLocaleString(),children:new Date(s.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})]})]}),c.jsx("div",{className:"px-6 py-5 bg-theme-0",children:a})]})})})})})]})},Eot=t=>{const{addHighlight:e,navigatePage:n}=os();y.useEffect(()=>{t.result&&setTimeout(()=>{e(t.result)},800)},[t.result]);const r=Ou.find(a=>a.label===t.toolName);if(!r)return c.jsx(moe,{...t});const s=r.previewComponent;return c.jsxs(kot,{label:r.label,icon:r.icon,color:r.color,isLoading:t.status.type==="running",result:t.result,onFinished:a=>{console.log("Finished generating:",a)},children:[t.result&&!t.isError&&c.jsx(s,{result:t.result,isExpanded:!1,onToggleExpand:()=>n({type:"highlight",value:t.result})}),t.isError&&c.jsx("div",{className:"mt-3 rounded-lg border border-destructive/30 bg-destructive/5 px-4 py-3",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"mt-0.5 flex h-6 w-6 items-center justify-center rounded-md bg-destructive/10 text-destructive",children:c.jsx(vZ,{className:"h-4 w-4"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-foreground",children:"Generation failed"}),c.jsx("div",{className:"mt-0.5 text-xs text-muted-foreground",children:"Bettercampus ran into an error while generating this result. You can try again or adjust your input."})]})]})})]})},sde=({highlight:t,isActive:e,onSelect:n,className:r})=>{const s=t.icon;return c.jsxs("button",{type:"button",onClick:()=>n(t),className:ge("group relative inline-flex h-8 px-3 group-data-[collapsible=icon]:flex group-data-[collapsible=icon]:flex-col group-data-[collapsible=icon]:py-0 items-center gap-1.5 rounded-full","text-xs font-medium transition duration-150 ease-out",t.color.text,t.color.bg,t.color.hoverBg,e&&"ring-2 ring-offset-2",e&&t.color.border.replace("border-","ring-"),r),children:[c.jsx(s,{className:`
            h-3.5 w-3.5
            transition-transform duration-150
            group-hover:scale-105
          `}),c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:t.label})]})};function _ot(){const{notebook:t}=os(),[e,n]=y.useState([]),{highlights:r,currentPage:s,navigatePage:a}=os(),i=s.type==="highlight_category"?s.value:null,o=s.type==="highlight"?s.value:null,l=g=>a({type:"highlight_category",value:g});y.useEffect(()=>{const g=Ou.map(x=>({count:r.filter(b=>b.type===x.id).length??0,config:x})).filter(x=>x.count>0);n(g)},[r]);const u=y.useRef({});if(!(t!=null&&t.id))return c.jsx("div",{className:"flex items-center justify-center p-4 bg-theme-1 mt-3 mx-1 rounded-lg h-40",children:c.jsx("div",{className:"text-sm text-theme-2",children:"No study set selected"})});if(e.length===0)return c.jsx("div",{className:"flex items-center justify-center p-4 text-theme-2 bg-theme-1 mt-3 mx-1 rounded-lg h-40 animate-in fade-in duration-300 group-data-[collapsible=icon]:hidden",children:c.jsxs("p",{className:"text-sm max-w-xs text-center",children:[c.jsx(fZ,{className:"h-5 w-5 inline mr-[6px]"}),c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"No saved materials yet. Start creating from chat!"})]})});const d=e.length<=3?"grid-cols-1":"grid-cols-2",m=(()=>{if(e.length<=3)return"py-6";const g=Math.ceil(e.length/2);return g===2?"py-12":g===3?"py-8":"py-6"})();return c.jsx(wie,{children:c.jsx(KM,{children:c.jsxs("div",{className:`grid ${d} gap-2 group-data-[collapsible=icon]:gap-4 px-2 group-data-[collapsible=icon]:px-1 pt-2 group-data-[collapsible=icon]:grid-cols-1`,children:[c.jsx("style",{children:`
  @keyframes count-pop {
    0% {
      transform: scale(1);
      filter: brightness(1);
    }
    40% {
      transform: scale(1.35);
      filter: brightness(1.2);
    }
    100% {
      transform: scale(1);
      filter: brightness(1);
    }
  }

  .animate-count-pop {
    animation: count-pop 500ms cubic-bezier(0.2, 0.8, 0.3, 1);
  }
`}),e.map(g=>{const x=u.current[g.config.id]??g.count,b=g.count>x;return c.jsx(yc,{delayDuration:200,children:c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx(YM,{children:c.jsxs("div",{className:"relative",children:[c.jsx(sde,{highlight:g.config,isActive:i===g.config.id,onSelect:()=>l(g.config.id),className:ge("flex items-center justify-center gap-2 w-full px-3 group-data-[collapsible=icon]:px-4 rounded-xl group-data-[collapsible=icon]:rounded-full transition-all",m,(o||i&&i!==g.config.id)&&"opacity-40 hover:opacity-80")}),g.count>0&&c.jsx("span",{className:`
            absolute -right-2 -top-2 flex h-5 w-5
            items-center justify-center rounded-full
            bg-theme-0 text-xs font-semibold text-theme-2 ring-2
            ${b?"animate-count-pop":""}
          `,children:g.count})]},g.config.id)})}),c.jsx(va,{side:"right",align:"center",children:c.jsxs("span",{className:"text-xs",children:["View ",g.config.labelLong]})})]})},g.config.id)})]})})})}const O7=new Set,di=new WeakMap,h0=new WeakMap,Mo=new WeakMap,gb=new WeakMap,NN=new WeakMap,Sx=new WeakMap,Jm=new WeakMap,rf=new WeakMap,Kp=new WeakSet;let eo,fO=0,mO=0;const Sd="__aa_tgt",vb="__aa_del",w5="__aa_new",ade=t=>{const e=jot(t);e&&e.forEach(n=>Dot(n))},Tot=t=>{t.forEach(e=>{e.target===eo&&Aot(),di.has(e.target)&&I0(e.target)})};function ide(t){const e=t.getBoundingClientRect(),n=(eo==null?void 0:eo.clientWidth)||0,r=(eo==null?void 0:eo.clientHeight)||0;return e.bottom<0||e.top>r||e.right<0||e.left>n}function pO(t){const e=gb.get(t);e==null||e.disconnect();let n=di.get(t),r=0;const s=5;n||(n=tv(t),di.set(t,n));const{offsetWidth:a,offsetHeight:i}=eo,l=[n.top-s,a-(n.left+s+n.width),i-(n.top+s+n.height),n.left-s].map(d=>`${-1*Math.floor(d)}px`).join(" "),u=new IntersectionObserver(()=>{++r>1&&I0(t)},{root:eo,threshold:1,rootMargin:l});u.observe(t),gb.set(t,u)}function I0(t,e=!0){clearTimeout(rf.get(t));const n=KE(t),r=e?yb(n)?500:n.duration:0;rf.set(t,setTimeout(async()=>{const s=Mo.get(t);try{await(s==null?void 0:s.finished),di.set(t,tv(t)),pO(t)}catch{}},r))}function Aot(){clearTimeout(rf.get(eo)),rf.set(eo,setTimeout(()=>{O7.forEach(t=>YS(t,e=>ode(()=>I0(e))))},100))}function Not(t){setTimeout(()=>{Sx.set(t,setInterval(()=>ode(I0.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function ode(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let hd;const lde=typeof window<"u"&&"ResizeObserver"in window;lde&&(eo=document.documentElement,new MutationObserver(ade),hd=new ResizeObserver(Tot),window.addEventListener("scroll",()=>{mO=window.scrollY,fO=window.scrollX}),hd.observe(eo));function jot(t){return t.reduce((r,s)=>[...r,...Array.from(s.addedNodes),...Array.from(s.removedNodes)],[]).every(r=>r.nodeName==="#comment")?!1:t.reduce((r,s)=>{if(r===!1)return!1;if(s.target instanceof Element){if(jN(s.target),!r.has(s.target)){r.add(s.target);for(let a=0;a<s.target.children.length;a++){const i=s.target.children.item(a);if(i){if(vb in i)return!1;jN(s.target,i),r.add(i)}}}if(s.removedNodes.length)for(let a=0;a<s.removedNodes.length;a++){const i=s.removedNodes[a];if(vb in i)return!1;i instanceof Element&&(r.add(i),jN(s.target,i),h0.set(i,[s.previousSibling,s.nextSibling]))}}return r},new Set)}function jN(t,e){!e&&!(Sd in t)?Object.defineProperty(t,Sd,{value:t}):e&&!(Sd in e)&&Object.defineProperty(e,Sd,{value:t})}function Dot(t){var e,n;const r=t.isConnected,s=di.has(t);r&&h0.has(t)&&h0.delete(t),((e=Mo.get(t))===null||e===void 0?void 0:e.playState)!=="finished"&&((n=Mo.get(t))===null||n===void 0||n.cancel()),w5 in t?iK(t):s&&r?Mot(t):s&&!r?Iot(t):iK(t)}function Wc(t){return Number(t.replace(/[^0-9.\-]/g,""))}function Rot(t){let e=t.parentElement;for(;e;){if(e.scrollLeft||e.scrollTop)return{x:e.scrollLeft,y:e.scrollTop};e=e.parentElement}return{x:0,y:0}}function tv(t){const e=t.getBoundingClientRect(),{x:n,y:r}=Rot(t);return{top:e.top+r,left:e.left+n,width:e.width,height:e.height}}function cde(t,e,n){let r=e.width,s=e.height,a=n.width,i=n.height;const o=getComputedStyle(t);if(o.getPropertyValue("box-sizing")==="content-box"){const u=Wc(o.paddingTop)+Wc(o.paddingBottom)+Wc(o.borderTopWidth)+Wc(o.borderBottomWidth),d=Wc(o.paddingLeft)+Wc(o.paddingRight)+Wc(o.borderRightWidth)+Wc(o.borderLeftWidth);r-=d,a-=d,s-=u,i-=u}return[r,a,s,i].map(Math.round)}function KE(t){return Sd in t&&Jm.has(t[Sd])?Jm.get(t[Sd]):{duration:250,easing:"ease-in-out"}}function ude(t){if(Sd in t)return t[Sd]}function gO(t){const e=ude(t);return e?Kp.has(e):!1}function YS(t,...e){e.forEach(n=>n(t,Jm.has(t)));for(let n=0;n<t.children.length;n++){const r=t.children.item(n);r&&e.forEach(s=>s(r,Jm.has(r)))}}function vO(t){return Array.isArray(t)?t:[t]}function yb(t){return typeof t=="function"}function Mot(t){const e=di.get(t),n=tv(t);if(!gO(t))return di.set(t,n);if(ide(t)){di.set(t,n),pO(t);return}let r;if(!e)return;const s=KE(t);if(typeof s!="function"){let a=e.left-n.left,i=e.top-n.top;const o=e.left+e.width-(n.left+n.width);e.top+e.height-(n.top+n.height)==0&&(i=0),o==0&&(a=0);const[u,d,f,m]=cde(t,e,n),g={transform:`translate(${a}px, ${i}px)`},x={transform:"translate(0, 0)"};u!==d&&(g.width=`${u}px`,x.width=`${d}px`),f!==m&&(g.height=`${f}px`,x.height=`${m}px`),r=t.animate([g,x],{duration:s.duration,easing:s.easing})}else{const[a]=vO(s(t,"remain",e,n));r=new Animation(a),r.play()}Mo.set(t,r),di.set(t,n),r.addEventListener("finish",I0.bind(null,t,!1),{once:!0})}function iK(t){w5 in t&&delete t[w5];const e=tv(t);di.set(t,e);const n=KE(t);if(!gO(t))return;if(ide(t)){pO(t);return}let r;if(typeof n!="function")r=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"});else{const[s]=vO(n(t,"add",e));r=new Animation(s),r.play()}Mo.set(t,r),r.addEventListener("finish",I0.bind(null,t,!1),{once:!0})}function oK(t,e){var n;t.remove(),di.delete(t),h0.delete(t),Mo.delete(t),(n=gb.get(t))===null||n===void 0||n.disconnect(),setTimeout(()=>{if(vb in t&&delete t[vb],Object.defineProperty(t,w5,{value:!0,configurable:!0}),e&&t instanceof HTMLElement)for(const r in e)t.style[r]=""},0)}function Iot(t){var e;if(!h0.has(t)||!di.has(t))return;const[n,r]=h0.get(t);Object.defineProperty(t,vb,{value:!0,configurable:!0});const s=window.scrollX,a=window.scrollY;if(r&&r.parentNode&&r.parentNode instanceof Element?r.parentNode.insertBefore(t,r):n&&n.parentNode?n.parentNode.appendChild(t):(e=ude(t))===null||e===void 0||e.appendChild(t),!gO(t))return oK(t);const[i,o,l,u]=Pot(t),d=KE(t),f=di.get(t);(s!==fO||a!==mO)&&Oot(t,s,a,d);let m,g={position:"absolute",top:`${i}px`,left:`${o}px`,width:`${l}px`,height:`${u}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!yb(d))Object.assign(t.style,g),m=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:d.duration,easing:"ease-out"});else{const[x,b]=vO(d(t,"remove",f));(b==null?void 0:b.styleReset)!==!1&&(g=(b==null?void 0:b.styleReset)||g,Object.assign(t.style,g)),m=new Animation(x),m.play()}Mo.set(t,m),m.addEventListener("finish",()=>oK(t,g),{once:!0})}function Oot(t,e,n,r){const s=fO-e,a=mO-n,i=document.documentElement.style.scrollBehavior;if(getComputedStyle(eo).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+s,window.scrollY+a),!t.parentElement)return;const l=t.parentElement;let u=l.clientHeight,d=l.clientWidth;const f=performance.now();function m(){requestAnimationFrame(()=>{if(!yb(r)){const g=u-l.clientHeight,x=d-l.clientWidth;f+r.duration>performance.now()?(window.scrollTo({left:window.scrollX-x,top:window.scrollY-g}),u=l.clientHeight,d=l.clientWidth,m()):document.documentElement.style.scrollBehavior=i}})}m()}function Pot(t){var e;const n=di.get(t),[r,,s]=cde(t,n,tv(t));let a=t.parentElement;for(;a&&(getComputedStyle(a).position==="static"||a instanceof HTMLBodyElement);)a=a.parentElement;a||(a=document.body);const i=getComputedStyle(a),o=!Mo.has(t)||((e=Mo.get(t))===null||e===void 0?void 0:e.playState)==="finished"?tv(a):di.get(a),l=Math.round(n.top-o.top)-Wc(i.borderTopWidth),u=Math.round(n.left-o.left)-Wc(i.borderLeftWidth);return[l,u,r,s]}function Fot(t,e={}){if(lde&&hd&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!yb(e)&&!e.disrespectUserMotionPreference)){Kp.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),YS(t,I0,Not,i=>hd==null?void 0:hd.observe(i)),yb(e)?Jm.set(t,e):Jm.set(t,{duration:250,easing:"ease-in-out",...e});const a=new MutationObserver(ade);a.observe(t,{childList:!0}),NN.set(t,a),O7.add(t)}return Object.freeze({parent:t,enable:()=>{Kp.add(t)},disable:()=>{Kp.delete(t),YS(t,r=>{const s=Mo.get(r);try{s==null||s.cancel()}catch{}Mo.delete(r);const a=rf.get(r);a&&clearTimeout(a),rf.delete(r);const i=Sx.get(r);i&&clearInterval(i),Sx.delete(r)})},isEnabled:()=>Kp.has(t),destroy:()=>{Kp.delete(t),O7.delete(t),Jm.delete(t);const r=NN.get(t);r==null||r.disconnect(),NN.delete(t),YS(t,s=>{hd==null||hd.unobserve(s);const a=Mo.get(s);try{a==null||a.cancel()}catch{}Mo.delete(s);const i=gb.get(s);i==null||i.disconnect(),gb.delete(s);const o=Sx.get(s);o&&clearInterval(o),Sx.delete(s);const l=rf.get(s);l&&clearTimeout(l),rf.delete(s),di.delete(s),h0.delete(s)})}})}function Bot(t){const[e,n]=y.useState(),r=y.useMemo(()=>t,[]),s=y.useCallback(i=>{i instanceof HTMLElement?n(Fot(i,r)):n(void 0)},[r]),a=y.useCallback(i=>{e&&(i?e.enable():e.disable())},[e]);return y.useEffect(()=>()=>{var i;(i=e==null?void 0:e.destroy)===null||i===void 0||i.call(e)},[e]),[s,a]}var YE="Dialog",[dde,hde]=Fa(YE),[Lot,Nc]=dde(YE),fde=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=t,o=y.useRef(null),l=y.useRef(null),[u,d]=Mi({prop:r,defaultProp:s??!1,onChange:a,caller:YE});return c.jsx(Lot,{scope:e,triggerRef:o,contentRef:l,contentId:Ma(),titleId:Ma(),descriptionId:Ma(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};fde.displayName=YE;var mde="DialogTrigger",pde=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nc(mde,n),a=Bt(e,s.triggerRef);return c.jsx(Nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":bO(s.open),...r,ref:a,onClick:Zr(t.onClick,s.onOpenToggle)})});pde.displayName=mde;var yO="DialogPortal",[zot,gde]=dde(yO,{forceMount:void 0}),vde=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Nc(yO,e);return c.jsx(zot,{scope:e,forceMount:n,children:y.Children.map(r,i=>c.jsx(Mw,{present:n||a.open,children:c.jsx(E0,{asChild:!0,container:s,children:i})}))})};vde.displayName=yO;var C5="DialogOverlay",yde=y.forwardRef((t,e)=>{const n=gde(C5,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Nc(C5,t.__scopeDialog);return a.modal?c.jsx(Mw,{present:r||a.open,children:c.jsx(Uot,{...s,ref:e})}):null});yde.displayName=C5;var $ot=Md("DialogOverlay.RemoveScroll"),Uot=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nc(C5,n);return c.jsx(_v,{as:$ot,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(Nt.div,{"data-state":bO(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),f0="DialogContent",xde=y.forwardRef((t,e)=>{const n=gde(f0,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Nc(f0,t.__scopeDialog);return c.jsx(Mw,{present:r||a.open,children:a.modal?c.jsx(Hot,{...s,ref:e}):c.jsx(Vot,{...s,ref:e})})});xde.displayName=f0;var Hot=y.forwardRef((t,e)=>{const n=Nc(f0,t.__scopeDialog),r=y.useRef(null),s=Bt(e,n.contentRef,r);return y.useEffect(()=>{const a=r.current;if(a)return tw(a)},[]),c.jsx(bde,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zr(t.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Zr(t.onPointerDownOutside,a=>{const i=a.detail.originalEvent,o=i.button===0&&i.ctrlKey===!0;(i.button===2||o)&&a.preventDefault()}),onFocusOutside:Zr(t.onFocusOutside,a=>a.preventDefault())})}),Vot=y.forwardRef((t,e)=>{const n=Nc(f0,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return c.jsx(bde,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,o;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),bde=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=t,o=Nc(f0,n),l=y.useRef(null),u=Bt(e,l);return qnt(),c.jsxs(c.Fragment,{children:[c.jsx(Ev,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:c.jsx(yce,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":bO(o.open),...i,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Got,{titleId:o.titleId}),c.jsx(Kot,{contentRef:l,descriptionId:o.descriptionId})]})]})}),xO="DialogTitle",wde=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nc(xO,n);return c.jsx(Nt.h2,{id:s.titleId,...r,ref:e})});wde.displayName=xO;var Cde="DialogDescription",Sde=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nc(Cde,n);return c.jsx(Nt.p,{id:s.descriptionId,...r,ref:e})});Sde.displayName=Cde;var kde="DialogClose",Ede=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Nc(kde,n);return c.jsx(Nt.button,{type:"button",...r,ref:e,onClick:Zr(t.onClick,()=>s.onOpenChange(!1))})});Ede.displayName=kde;function bO(t){return t?"open":"closed"}var _de="DialogTitleWarning",[qot,Tde]=kZ(_de,{contentName:f0,titleName:xO,docsSlug:"dialog"}),Got=({titleId:t})=>{const e=Tde(_de),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Wot="DialogDescriptionWarning",Kot=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Tde(Wot).contentName}}.`;return y.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Yot=fde,Xot=pde,Jot=vde,Qot=yde,Zot=xde,elt=wde,tlt=Sde,Ade=Ede,Nde="AlertDialog",[nlt]=Fa(Nde,[hde]),eh=hde(),jde=t=>{const{__scopeAlertDialog:e,...n}=t,r=eh(e);return c.jsx(Yot,{...r,...n,modal:!0})};jde.displayName=Nde;var rlt="AlertDialogTrigger",slt=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=eh(n);return c.jsx(Xot,{...s,...r,ref:e})});slt.displayName=rlt;var alt="AlertDialogPortal",Dde=t=>{const{__scopeAlertDialog:e,...n}=t,r=eh(e);return c.jsx(Jot,{...r,...n})};Dde.displayName=alt;var ilt="AlertDialogOverlay",Rde=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=eh(n);return c.jsx(Qot,{...s,...r,ref:e})});Rde.displayName=ilt;var _g="AlertDialogContent",[olt,llt]=nlt(_g),clt=S8("AlertDialogContent"),Mde=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,a=eh(n),i=y.useRef(null),o=Bt(e,i),l=y.useRef(null);return c.jsx(qot,{contentName:_g,titleName:Ide,docsSlug:"alert-dialog",children:c.jsx(olt,{scope:n,cancelRef:l,children:c.jsxs(Zot,{role:"alertdialog",...a,...s,ref:o,onOpenAutoFocus:Zr(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(clt,{children:r}),c.jsx(dlt,{contentRef:i})]})})})});Mde.displayName=_g;var Ide="AlertDialogTitle",Ode=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=eh(n);return c.jsx(elt,{...s,...r,ref:e})});Ode.displayName=Ide;var Pde="AlertDialogDescription",Fde=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=eh(n);return c.jsx(tlt,{...s,...r,ref:e})});Fde.displayName=Pde;var ult="AlertDialogAction",Bde=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=eh(n);return c.jsx(Ade,{...s,...r,ref:e})});Bde.displayName=ult;var Lde="AlertDialogCancel",zde=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=llt(Lde,n),a=eh(n),i=Bt(e,s);return c.jsx(Ade,{...a,...r,ref:i})});zde.displayName=Lde;var dlt=({contentRef:t})=>{const e=`\`${_g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${_g}\` by passing a \`${Pde}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${_g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},hlt=jde,flt=Dde,mlt=Rde,plt=Mde,glt=Bde,vlt=zde,ylt=Ode,xlt=Fde;function $de({...t}){return c.jsx(hlt,{"data-slot":"alert-dialog",...t})}function blt({...t}){return c.jsx(flt,{"data-slot":"alert-dialog-portal",...t})}function wlt({className:t,...e}){return c.jsx(mlt,{"data-slot":"alert-dialog-overlay",className:ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Ude({className:t,...e}){return c.jsxs(blt,{children:[c.jsx(wlt,{}),c.jsx(plt,{"data-slot":"alert-dialog-content",className:ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function Hde({className:t,...e}){return c.jsx("div",{"data-slot":"alert-dialog-header",className:ge("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Vde({className:t,...e}){return c.jsx("div",{"data-slot":"alert-dialog-footer",className:ge("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function qde({className:t,...e}){return c.jsx(ylt,{"data-slot":"alert-dialog-title",className:ge("text-lg font-semibold",t),...e})}function Gde({className:t,...e}){return c.jsx(xlt,{"data-slot":"alert-dialog-description",className:ge("text-muted-foreground text-sm",t),...e})}function Wde({className:t,...e}){return c.jsx(glt,{className:ge(lR(),t),...e})}function Kde({className:t,...e}){return c.jsx(vlt,{className:ge(lR({variant:"outline"}),t),...e})}function xb(t){const e=(Date.now()-new Date(t).getTime())/864e5;return e<1?"Today":e<2?"1 day ago":`${Math.floor(e)} days ago`}function Clt({item:t,config:e,viewMode:n,onSelect:r,onDelete:s}){var m,g,x,b;const[a,i]=y.useState(!1),[o,l]=y.useState(!1),u=((g=(m=t.metadata)==null?void 0:m.document_ids)==null?void 0:g.length)??0,d=Array.isArray((x=t.contents)==null?void 0:x.flashcards)?t.contents.flashcards.length:t.type==="flashcard"&&t.metadata.count||null,f=Array.isArray((b=t.contents)==null?void 0:b.questions)?t.contents.questions.length:t.type==="quiz"&&t.metadata.count||null;return c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>r(t),className:ge("group relative rounded-xl border-2 bg-theme-0 text-left transition-all duration-200","hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]","overflow-hidden",e.color.border,n==="grid"?"p-5 min-h-[140px]":"p-4"),children:[c.jsx("div",{className:ge("absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none")}),c.jsxs("div",{className:"relative flex items-start gap-4",children:[c.jsx("div",{className:ge("flex h-11 w-11 items-center justify-center rounded-xl border-2 flex-shrink-0 transition-all duration-200","group-hover:scale-110 group-hover:shadow-theme",e.color.bg,e.color.border),children:c.jsx(e.icon,{className:ge(e.color.text,"h-5 w-5")})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[c.jsx("h3",{className:"font-bold text-theme-0 line-clamp-2 text-sm leading-snug flex-1",children:t.name||"Untitled highlight"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs(Tv,{open:a,onOpenChange:i,children:[c.jsx(Av,{onClick:C=>{C.stopPropagation(),i(S=>!S)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-theme-1 rounded-md flex-shrink-0",children:c.jsx(Wb,{className:"h-4 w-4 text-theme-1"})}),c.jsx(Nv,{align:"end",className:"bg-theme-0",children:c.jsxs(_d,{onClick:C=>{C.stopPropagation(),i(S=>!S),l(!0)},className:"text-red-600 focus:text-red-600 focus:bg-red-50 cursor-pointer",children:[c.jsx(fR,{className:"h-4 w-4 mr-2"}),"Delete"]})})]}),c.jsx(pc,{className:"h-4 w-4 text-theme-1 group-hover:text-theme-2 group-hover:translate-x-0.5 transition-all flex-shrink-0 mt-0.5"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[d!==null&&c.jsx("div",{className:ge("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg font-medium border",e.color.text==="text-blue-700"&&"bg-blue-50 text-blue-700 border-blue-200",e.color.text==="text-orange-700"&&"bg-orange-50 text-orange-700 border-orange-200",e.color.text==="text-emerald-800"&&"bg-emerald-50 text-emerald-700 border-emerald-200"),children:c.jsxs("span",{children:[d," card",d===1?"":"s"]})}),f!==null&&c.jsx("div",{className:ge("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg font-medium border",e.color.text==="text-blue-700"&&"bg-blue-50 text-blue-700 border-blue-200",e.color.text==="text-orange-700"&&"bg-orange-50 text-orange-700 border-orange-200",e.color.text==="text-emerald-800"&&"bg-emerald-50 text-emerald-700 border-emerald-200"),children:c.jsxs("span",{children:[f," question",f===1?"":"s"]})}),c.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-theme-2 rounded-lg font-medium text-theme-0 border border-theme",children:[c.jsx(fi,{className:"h-3 w-3"}),c.jsxs("span",{children:[u," source",u===1?"":"s"]})]}),n==="list"&&c.jsxs("div",{className:"ml-3 flex items-center gap-1.5 text-xs text-gray-500",children:[c.jsx(k1,{className:"h-3 w-3"}),c.jsx("span",{children:xb(t.created_at)})]})]}),n==="grid"&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-theme flex items-center gap-1.5 text-xs text-gray-500",children:[c.jsx(k1,{className:"h-3 w-3"}),c.jsx("span",{children:xb(t.created_at)})]})]})]}),c.jsx("div",{className:ge("absolute bottom-0 left-0 right-0 h-1 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left",e.color.text==="text-blue-700"&&"bg-gradient-to-r from-blue-500 to-blue-600",e.color.text==="text-orange-700"&&"bg-gradient-to-r from-orange-500 to-orange-600",e.color.text==="text-emerald-800"&&"bg-gradient-to-r from-emerald-500 to-emerald-600")})]}),c.jsx($de,{open:o,onOpenChange:l,children:c.jsxs(Ude,{className:"bg-theme-0 text-theme-0",children:[c.jsxs(Hde,{children:[c.jsx(qde,{children:"Delete highlight?"}),c.jsxs(Gde,{children:["This will permanently delete"," ",c.jsx("span",{className:"font-semibold",children:t.name||"this highlight"}),". This action cannot be undone."]})]}),c.jsxs(Vde,{children:[c.jsx(Kde,{className:"hover:bg-theme-1",children:"Cancel"}),c.jsx(Wde,{className:"bg-red-400 text-black hover:bg-red-400",onClick:()=>{s==null||s(t),l(!1)},children:"Delete"})]})]})})]})}function Slt({highlight:t,isSelected:e,onSelect:n,className:r}){var o,l;const s=Ou.find(u=>u.id===t.type);if(!s)return null;const a=s.icon,i=((l=(o=t.metadata)==null?void 0:o.document_ids)==null?void 0:l.length)??0;return c.jsxs("button",{type:"button",onClick:n,"aria-pressed":e,className:Qp("group w-full text-left","flex items-center gap-3 rounded-lg px-3 py-2 group-data-[collapsible=icon]:px-0 group-data-[collapsible=icon]:py-2 group-data-[collapsible=icon]:flex group-data-[collapsible=icon]:items-center group-data-[collapsible=icon]:justify-center","transition focus:outline-none",s.color.hoverBg,e&&s.color.bg,r),children:[c.jsx(yc,{delayDuration:200,children:c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx("div",{className:Qp("flex h-7 w-7 items-center justify-center shrink-0",s.color.text,e&&"scale-105"),children:c.jsx(a,{className:"h-5 w-5"})})}),c.jsx(va,{side:"right",align:"center",children:c.jsx("span",{className:"text-xs",children:t.name})})]})}),c.jsxs("div",{className:"flex-1 min-w-0 group-data-[collapsible=icon]:hidden",children:[c.jsx("div",{className:Qp("truncate text-sm font-semibold transition-colors",e?s.color.text:"text-theme-0"),children:t.name||"Untitled highlight"}),c.jsxs("div",{className:Qp("mt-0.5 flex items-center gap-2 text-[11px] text-theme-1"),children:[c.jsxs("span",{children:[i," source",i===1?"":"s"]}),c.jsx("span",{children:""}),c.jsx("span",{children:xb(t.created_at)})]})]})]})}function klt(){var m;const{highlights:t,currentPage:e,navigatePage:n}=os(),[r]=Bot({duration:180,easing:"ease-out"}),s=e.type==="highlight_category"?e.value:e.type==="source_highlight_category"?e.highlight_category:null,a=e.type==="highlight"?e.value:e.type==="source_highlight"?e.highlight:null,i=g=>n({type:"highlight",value:g}),o=y.useRef(new Set),u=[...t].sort((g,x)=>new Date(x.created_at).getTime()-new Date(g.created_at).getTime()).slice(0,5),d=new Set(u.map(g=>g.id));if(y.useLayoutEffect(()=>{o.current=d},[t]),!(t!=null&&t.length))return null;const f=((m=u.find(g=>!o.current.has(g.id)))==null?void 0:m.id)??null;return c.jsxs(c.Fragment,{children:[c.jsx("style",{children:`
        @keyframes highlight-expand {
            0% {
                opacity: 0;
                transform: scaleY(0.6);
            }
            55% {
                opacity: 1;
                transform: scaleY(1.04);
            }
            100% {
                transform: scaleY(1);
            }
        }

       @keyframes highlight-glow {
            0% {
                filter:
                /*drop-shadow(0 0 0 rgba(16, 185, 129, 0))*/
                brightness(1);
            }
            45% {
                filter:
                /*drop-shadow(0 0 6px rgba(16, 185, 129, 0.45))*/
                brightness(1.08);
            }
            100% {
                filter:
                /*drop-shadow(0 0 0 rgba(16, 185, 129, 0))*/
                brightness(1);
            }
        }

        .animate-highlight-expand {
          transform-origin: top;
          animation: highlight-expand 1000ms ease, highlight-glow 1000ms ease;
        }
      `}),c.jsx("div",{ref:r,className:"px-2 pb-4 pt-2 space-y-2 group-data-[collapsible=icon]:px-0",children:u.map((g,x)=>{const b=g.id===f&&x===0,C=(a==null?void 0:a.id)==g.id;return c.jsx("div",{className:b?"animate-highlight-expand animate-highlight-glow":void 0,children:c.jsx(Slt,{highlight:g,isSelected:C,onSelect:()=>i(g),className:!C&&s?"opacity-40 hover:opacity-80":""})},g.id)})})]})}const Elt=()=>c.jsxs(Gce,{className:"aui-root aui-thread-list-root flex flex-col gap-1",children:[c.jsx(_lt,{}),c.jsx(ro,{condition:({threads:t})=>t.isLoading,children:c.jsx(Tlt,{})}),c.jsx(ro,{condition:({threads:t})=>!t.isLoading,children:c.jsx(qce,{components:{ThreadListItem:Alt}})})]}),_lt=()=>{const t=ls(),{navigatePage:e}=os();return c.jsx(Hce,{asChild:!0,children:c.jsxs(vn,{variant:"outline",className:"aui-thread-list-new h-9 justify-start group-data-[collapsible=icon]:justify-center gap-2 rounded-lg px-3 text-sm hover:bg-theme-2 data-active:bg-theme-2 text-theme-0 group-data-[collapsible=icon]:mb-4 border-theme",onClick:()=>{e({type:"chat"});const n=t.thread().getState().messages;if(!n.length||!n[n.length-1].parts.length)return;const r=n[n.length-1].parts[0];r.type==="text"?t.threadListItem().rename(r.text.slice(0,30)):r.type==="tool-call"&&t.threadListItem().rename(`Created ${r.toolName}`)},children:[c.jsx(Yb,{className:"size-4"}),c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"New Chat"})]})})},Tlt=()=>c.jsx("div",{className:"flex flex-col gap-1",children:Array.from({length:5},(t,e)=>c.jsx("div",{role:"status","aria-label":"Loading threads",className:"aui-thread-list-skeleton-wrapper flex h-9 items-center px-3",children:c.jsx(EHe,{className:"aui-thread-list-skeleton h-4 w-full"})},e))}),Alt=()=>{const{navigatePage:t}=os();return c.jsxs(Wce,{className:"aui-thread-list-item group flex h-9 items-center rounded-lg transition-colors hover:bg-theme-2 focus-visible:bg-theme-2 focus-visible:outline-none data-active:bg-gray-400/20 text-theme-0",children:[c.jsxs(qrt,{className:"aui-thread-list-item-trigger flex h-full flex-1 items-center truncate px-3 group-data-[collapsible=icon]:px-0 group-data-[collapsible=icon]:flex-col text-start text-sm",onClick:()=>t({type:"chat"}),children:[c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:c.jsx(Kce,{fallback:"New Chat"})}),c.jsx("span",{className:"hidden group-data-[collapsible=icon]:block m-auto",children:c.jsx(fZ,{className:"text-theme-0 size-5"})})]}),c.jsx(Nlt,{})]})},Nlt=()=>c.jsx(Hrt,{asChild:!0,children:c.jsx(Su,{variant:"ghost",tooltip:"Delete thread",className:"aui-thread-list-item-archive mr-2 size-7 p-0 opacity-0 transition-opacity group-hover:opacity-100 group-data-[collapsible=icon]:hidden",children:c.jsx(wv,{className:"size-4"})})});function jlt({...t}){const{currentPage:e,highlights:n}=os();return c.jsxs(yie,{collapsible:"icon",side:"right",className:"",...t,children:[c.jsx(foe,{shouldCollapse:e.type==="source"||e.type==="source_highlight"||e.type==="source_highlight_category"}),c.jsx(xie,{}),c.jsxs(bie,{children:[c.jsxs(IS,{className:"pb-0",children:[c.jsxs("div",{className:"flex items-center group-data-[collapsible=icon]:flex-col group-data-[collapsible=icon]:w-full",children:[c.jsx(OS,{className:"text-sm py-6",children:c.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Saved Materials"})}),c.jsx(yc,{children:c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx(S0,{className:"h-3.5 w-3.5 text-theme-1 group-data-[collapsible=icon]:mb-4"})}),c.jsx(va,{side:"right",children:c.jsx("p",{className:"max-w-xs text-xs",children:"Create study materials (flashcards, quizzes, and more) from the buttons in the chat panel!"})})]})})]}),c.jsx("div",{className:"px-1",children:c.jsx(Ns,{className:"mb-2 h-px rounded-full"})}),c.jsx(_ot,{})]}),c.jsxs(IS,{className:"pt-1 pb-0",children:[n.length?c.jsx(OS,{className:"text-xs font-bold",children:"Recently Created"}):null,c.jsx(klt,{})]}),c.jsxs(IS,{className:"pt-0",children:[c.jsx(OS,{className:"text-xs font-bold",children:"Recent Chats"}),c.jsx(Elt,{})]})]})]})}const Yde=t=>!Lw(t)&&!Bw(t),Bw=t=>t instanceof File,Lw=t=>"url"in t;var Xde=(t=>(t.ASSIGNMENT="assignment",t.QUIZ="quiz",t.DISCUSSION="discussion_topic",t.NOTE="planner_note",t.ANNOUNCEMENT="announcement",t.EVENT="calender_event",t.GRADESCOPE="gradescope",t))(Xde||{});const Dlt=({text:t})=>{if(t.startsWith(nf)){const[n]=t.split(`
`),r=n.replace(`${nf}:`,""),s=r.slice(0,r.indexOf(" ")),a=Ou.find(o=>o.label===s),i=r.slice(r.indexOf(" ",r.indexOf(" ")+1)+1);return c.jsxs("div",{className:ge("relative rounded-xl border-2 overflow-hidden","shadow-sm hover:shadow-md transition-shadow duration-200","bg-theme-0",(a==null?void 0:a.color.border)||"border-emerald-200","animate-in fade-in slide-in-from-bottom-1"),children:[c.jsxs("div",{className:ge("flex items-center gap-2 px-4 py-2.5 border-b",(a==null?void 0:a.color.border)||"border-emerald-200",a==null?void 0:a.color.bgLight),children:[c.jsx("div",{className:ge("flex h-6 w-6 items-center justify-center rounded-md",a==null?void 0:a.color.bgDark),children:c.jsx(bv,{className:"h-3.5 w-3.5 text-white"})}),c.jsxs("span",{className:ge("text-[13px] font-bold tracking-tight text-theme-0"),children:["Generate ",s]})]}),c.jsx("div",{className:"px-4 py-3",children:c.jsx("div",{className:"text-[13px] leading-relaxed text-theme-0 font-medium",children:i||"All Topics"})})]})}return c.jsx("div",{className:ge("rounded-2xl bg-theme-1 border-2 border-theme","px-4 py-3.5","text-[13px] leading-relaxed text-theme-0 font-medium","transition-all duration-200","animate-in fade-in slide-in-from-bottom-1"),children:c.jsx(zE,{})})},Rlt="/assets/created-BcaXYoKd.png",Mlt="/assets/creating-BiMKg0hJ.png",Ilt="/assets/thinking-D53o1u20.png",Olt="/assets/thought-Dkj58iO8.png";function Plt({options:t,value:e,onChange:n}){return c.jsx("div",{className:"flex items-center gap-2",children:Object.entries(t).map(([r,s])=>{const a=r;return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs opacity-70",children:a}),c.jsx("select",{value:e[r]??s[0],onChange:i=>n({...e,[r]:i.target.value}),className:"h-6 rounded-md bg-transparent px-1 text-xs outline-none ring-1 ring-inset ring-current/20",children:s.map(i=>c.jsx("option",{value:i,children:i},i))})]},r)})})}const lK=({selectedSources:t})=>c.jsx(yc,{children:c.jsxs(ga,{children:[c.jsx(TR,{asChild:!0,children:c.jsxs(vn,{type:"button",size:"sm",disabled:t.length===0,className:ge("h-8 rounded-full px-3 text-xs font-medium shadow-none","flex items-center gap-1.5 hover:bg-theme-2",t.length===0?"opacity-50":"bg-theme-1 text-theme-0"),children:[c.jsx(fi,{className:"h-3.5 w-3.5"}),c.jsxs("span",{children:["Using ",t.length," selected"," ",t.length===1?"source":"sources"]})]})}),c.jsxs(va,{side:"top",align:"center",className:"bg-theme-2",sideOffset:5,variant:"theme",children:[c.jsx("p",{className:"text-sm",children:"Select sources in the left sidebar!"}),c.jsx(kee,{className:"fill-bg-theme-2"})]})]})}),Flt=()=>c.jsx(Tc,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsx(_0,{children:c.jsx(rw,{className:"text-theme-0",children:"How We Use AI"})}),c.jsx(Ns,{}),c.jsx(Lp,{title:"Description",children:c.jsx("p",{className:"text-theme-2 text-xs leading-relaxed",children:"AI-powered study tools including document chat, flashcard generation, quiz creation, transcription, and smart note enhancement."})}),c.jsx(Ns,{}),c.jsxs(Lp,{title:"Model & Data",children:[c.jsx(wm,{label:"Base Model",value:"GPT-4o-mini"}),c.jsx(wm,{label:"Trained with User Data",value:"No"}),c.jsx("div",{className:"space-y-1",children:c.jsx(wm,{label:"Data Shared with Model",value:"Uploaded documents, user prompt, conversation history"})})]}),c.jsx(Ns,{}),c.jsxs(Lp,{title:"Privacy & Compliance",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(wm,{label:"Data Retention",value:"30 Days"}),c.jsx("p",{className:"text-theme-2 text-xs",children:"Files are cached for up to 30 days without usage."})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(wm,{label:"Data Logging",value:"Logs Data"}),c.jsx("p",{className:"text-theme-2 text-xs",children:"Logged for service improvement."})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(wm,{label:"PII",value:"Not Exposed"}),c.jsx("p",{className:"text-theme-2 text-xs",children:"Personally identifiable information is not sent to the model."})]})]}),c.jsx(Ns,{}),c.jsx(Lp,{title:"Outputs",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx(wm,{label:"Human in the Loop",value:"Yes"}),c.jsx("p",{className:"text-theme-2 text-xs",children:"Users can send additional instructions to fine-tune outputs and review before use."})]})}),c.jsx(Ns,{}),c.jsx(Lp,{title:"Expected Risks",children:c.jsx("p",{className:"text-theme-2 text-xs leading-relaxed",children:"AI-generated content may contain inaccuracies or incomplete information. Always verify important details."})}),c.jsx(Ns,{}),c.jsx(Lp,{title:"Intended Outcomes",children:c.jsx("p",{className:"text-theme-2 text-xs leading-relaxed",children:"Help students understand complex materials, create study aids, and manage academic workload efficiently."})}),c.jsx(Ns,{}),c.jsx("div",{children:c.jsx("p",{className:"text-xs text-theme-2 text-center italic",children:"BetterCampus uses nutrition fact labels for AI products to increase transparency and improve decision making."})})]})}),Lp=({title:t,children:e})=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"font-bold text-theme-0 text-sm",children:t}),c.jsx("div",{className:"space-y-2",children:e})]}),wm=({label:t,value:e})=>c.jsxs("div",{className:"flex justify-between items-start gap-4",children:[c.jsx("span",{className:"text-theme-0 font-medium text-xs",children:t}),c.jsx("span",{className:"text-theme-0 text-right text-xs",children:e})]}),Blt=()=>{const[t,e]=y.useState(0),n=[{text:"Reading your materials",icon:hR,color:"text-blue-500"},{text:"Finding patterns",icon:dZ,color:"text-orange-500"},{text:"Organizing ideas",icon:Tke,color:"text-purple-500"},{text:"Crafting response",icon:bv,color:"text-emerald-500"}];y.useEffect(()=>{const s=setInterval(()=>{e(a=>(a+1)%n.length)},1500);return()=>clearInterval(s)},[]);const r=n[t].icon;return c.jsxs("div",{className:"flex items-center gap-3 py-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-theme-1 animate-ping opacity-50"})}),c.jsx("div",{className:"relative w-8 h-8 bg-theme-0 rounded-full flex items-center justify-center border border-theme",children:c.jsx(r,{className:`w-4 h-4 transition-all duration-500 ${n[t].color}`,strokeWidth:2})})]}),c.jsx("p",{className:"text-sm text-theme-2 animate-pulse-fade",children:n[t].text},t),c.jsx("style",{children:`
        @keyframes pulse-fade {
          0% {
            opacity: 0.5;
            transform: scale(0.95);
          }
          20% {
            opacity: 1;
            transform: scale(1);
          }
          80% {
            opacity: 1;
            transform: scale(1);
          }
          100% {
            opacity: 0.5;
            transform: scale(0.95);
          }
        }

        .animate-pulse-fade {
          animation: pulse-fade 1.5s ease-in-out;
        }
      `})]})},Llt={auto_rotate_theme:{title:"Auto-rotate your theme with",keywords:"automatic theme rotation",type:"start",tier:"style"},assignments_upsert:{title:"Plan unlimited tasks with",keywords:"unlimited task planning",type:"start",tier:"learn"},assignments_auto_schedule:{title:"Auto-plan assignments with",keywords:"assignment auto-plan",type:"start",tier:"learn"},assignments_due_view:{title:"Plan unlimited tasks with",keywords:"unlimited task planning",type:"claim",tier:"learn"},grades_whatif:{title:"Calculate assignment GPA with",keywords:"assignment GPA calculator",type:"claim",tier:"learn"},theme_creations:{title:"Create more themes with",keywords:"theme creations",type:"claim",tier:"style"},agenda_date_change:{title:"Change agenda date with",keywords:"agenda date changing",type:"start",tier:"learn"},assignments_calendar_date_change:{title:"See more tasks with",keywords:"calendar date navigation",type:"start",tier:"learn"},timerSettings:{title:"Set timer settings with",keywords:"timer settings",type:"start",tier:"learn"},transcript:{title:"Get more lecture transcriptions with",keywords:"lecture transcriptions",type:"start",tier:"learn"},calendarSync:{title:"Sync your calendar with",keywords:"calendar syncing",type:"claim",tier:"learn"},themeSwapLimit:{title:"Get more theme swaps with",keywords:"theme swapping",type:"claim",tier:"style"},study_files:{title:"Get more file uploads with",keywords:"",type:"claim",tier:"learn"}},zlt=()=>{const[t]=g8(),e=t.get("highlight");return c.jsx(Wd,{children:c.jsx(ect,{highlight:e})})};var DN,cK;function $lt(){if(cK)return DN;cK=1;var t={linear:function(e,n,r,s){var a=r-n;return a*e/s+n},easeInQuad:function(e,n,r,s){var a=r-n;return a*(e/=s)*e+n},easeOutQuad:function(e,n,r,s){var a=r-n;return-a*(e/=s)*(e-2)+n},easeInOutQuad:function(e,n,r,s){var a=r-n;return(e/=s/2)<1?a/2*e*e+n:-a/2*(--e*(e-2)-1)+n},easeInCubic:function(e,n,r,s){var a=r-n;return a*(e/=s)*e*e+n},easeOutCubic:function(e,n,r,s){var a=r-n;return a*((e=e/s-1)*e*e+1)+n},easeInOutCubic:function(e,n,r,s){var a=r-n;return(e/=s/2)<1?a/2*e*e*e+n:a/2*((e-=2)*e*e+2)+n},easeInQuart:function(e,n,r,s){var a=r-n;return a*(e/=s)*e*e*e+n},easeOutQuart:function(e,n,r,s){var a=r-n;return-a*((e=e/s-1)*e*e*e-1)+n},easeInOutQuart:function(e,n,r,s){var a=r-n;return(e/=s/2)<1?a/2*e*e*e*e+n:-a/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(e,n,r,s){var a=r-n;return a*(e/=s)*e*e*e*e+n},easeOutQuint:function(e,n,r,s){var a=r-n;return a*((e=e/s-1)*e*e*e*e+1)+n},easeInOutQuint:function(e,n,r,s){var a=r-n;return(e/=s/2)<1?a/2*e*e*e*e*e+n:a/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(e,n,r,s){var a=r-n;return-a*Math.cos(e/s*(Math.PI/2))+a+n},easeOutSine:function(e,n,r,s){var a=r-n;return a*Math.sin(e/s*(Math.PI/2))+n},easeInOutSine:function(e,n,r,s){var a=r-n;return-a/2*(Math.cos(Math.PI*e/s)-1)+n},easeInExpo:function(e,n,r,s){var a=r-n;return e==0?n:a*Math.pow(2,10*(e/s-1))+n},easeOutExpo:function(e,n,r,s){var a=r-n;return e==s?n+a:a*(-Math.pow(2,-10*e/s)+1)+n},easeInOutExpo:function(e,n,r,s){var a=r-n;return e===0?n:e===s?n+a:(e/=s/2)<1?a/2*Math.pow(2,10*(e-1))+n:a/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(e,n,r,s){var a=r-n;return-a*(Math.sqrt(1-(e/=s)*e)-1)+n},easeOutCirc:function(e,n,r,s){var a=r-n;return a*Math.sqrt(1-(e=e/s-1)*e)+n},easeInOutCirc:function(e,n,r,s){var a=r-n;return(e/=s/2)<1?-a/2*(Math.sqrt(1-e*e)-1)+n:a/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(e,n,r,s){var a=r-n,i,o,l;return l=1.70158,o=0,i=a,e===0?n:(e/=s)===1?n+a:(o||(o=s*.3),i<Math.abs(a)?(i=a,l=o/4):l=o/(2*Math.PI)*Math.asin(a/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*s-l)*(2*Math.PI)/o))+n)},easeOutElastic:function(e,n,r,s){var a=r-n,i,o,l;return l=1.70158,o=0,i=a,e===0?n:(e/=s)===1?n+a:(o||(o=s*.3),i<Math.abs(a)?(i=a,l=o/4):l=o/(2*Math.PI)*Math.asin(a/i),i*Math.pow(2,-10*e)*Math.sin((e*s-l)*(2*Math.PI)/o)+a+n)},easeInOutElastic:function(e,n,r,s){var a=r-n,i,o,l;return l=1.70158,o=0,i=a,e===0?n:(e/=s/2)===2?n+a:(o||(o=s*(.3*1.5)),i<Math.abs(a)?(i=a,l=o/4):l=o/(2*Math.PI)*Math.asin(a/i),e<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e*s-l)*(2*Math.PI)/o))+n:i*Math.pow(2,-10*(e-=1))*Math.sin((e*s-l)*(2*Math.PI)/o)*.5+a+n)},easeInBack:function(e,n,r,s,a){var i=r-n;return a===void 0&&(a=1.70158),i*(e/=s)*e*((a+1)*e-a)+n},easeOutBack:function(e,n,r,s,a){var i=r-n;return a===void 0&&(a=1.70158),i*((e=e/s-1)*e*((a+1)*e+a)+1)+n},easeInOutBack:function(e,n,r,s,a){var i=r-n;return a===void 0&&(a=1.70158),(e/=s/2)<1?i/2*(e*e*(((a*=1.525)+1)*e-a))+n:i/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+n},easeInBounce:function(e,n,r,s){var a=r-n,i;return i=t.easeOutBounce(s-e,0,a,s),a-i+n},easeOutBounce:function(e,n,r,s){var a=r-n;return(e/=s)<1/2.75?a*(7.5625*e*e)+n:e<2/2.75?a*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?a*(7.5625*(e-=2.25/2.75)*e+.9375)+n:a*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(e,n,r,s){var a=r-n,i;return e<s/2?(i=t.easeInBounce(e*2,0,a,s),i*.5+n):(i=t.easeOutBounce(e*2-s,0,a,s),i*.5+a*.5+n)}};return DN=t,DN}var Ult=$lt();function Hlt(t){return t*Math.PI/180}function Co(t,e){return t+Math.random()*(e-t)}function Vlt(t,e){return Math.floor(t+Math.random()*(e-t+1))}var s1;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(s1||(s1={}));var qh;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(qh||(qh={}));const qlt=1e3/60;class Glt{constructor(e,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:i,initialVelocityY:o}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=Co(5,20),this.h=Co(5,20),this.radius=Co(5,10),this.vx=typeof i=="number"?Co(-i,i):Co(i.min,i.max),this.vy=typeof o=="number"?Co(-o,0):Co(o.min,o.max),this.shape=Vlt(0,2),this.angle=Hlt(Co(0,360)),this.angularSpin=Co(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Co(0,1),this.rotationDirection=Co(0,1)?qh.Positive:qh.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:i}=this.getOptions(),o=e/qlt;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=n*o,this.vx+=r*o,this.vx*=s**o,this.vy*=s**o,this.rotateY>=1&&this.rotationDirection===qh.Positive?this.rotationDirection=qh.Negative:this.rotateY<=-1&&this.rotationDirection===qh.Negative&&(this.rotationDirection=qh.Positive);const l=.1*this.rotationDirection*o;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,i&&typeof i=="function")i.call(this,this.context);else switch(this.shape){case s1.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case s1.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case s1.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Wlt{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Co(this.x,this.w+this.x),a=Co(this.y,this.h+this.y);return new Glt(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:i,particlesGenerated:o,lastNumberOfPieces:l}=this,{run:u,recycle:d,numberOfPieces:f,debug:m,tweenFunction:g,tweenDuration:x}=this.getOptions();if(!u)return!1;const b=this.particles.length,C=d?b:o;if(C<f){l!==f&&(this.tweenProgress=0,this.tweenFrom=C,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const S=g(this.tweenProgress,this.tweenFrom,f,x),w=Math.round(S-C);for(let E=0;E<w;E++)this.particles.push(this.getParticle());this.particlesGenerated+=w}m&&(i.font="12px sans-serif",i.fillStyle="#333",i.textAlign="right",i.fillText(`Particles: ${b}`,a.width-10,a.height-20));for(let S=this.particles.length-1;S>=0;S--){const w=this.particles[S];w.update(s),(w.y>a.height||w.y<-100||w.x>a.width+100||w.x<-100)&&(d&&C<=f?this.particles[S]=this.getParticle():this.removeParticleAt(S))}return b>0||C<f},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const wO={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Ult.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Klt{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...wO,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:i,frameRate:o},canvas:l,context:u}=this,d=Math.min(s-this.lastFrameTime,50);if(o&&d<1e3/o){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(o?d%o:0),a&&(u.fillStyle="white",u.clearRect(0,0,l.width,l.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(i&&typeof i=="function"&&this.generator.particlesGenerated>0&&i.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Wlt(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Ylt=Ce.createRef();class CO extends Ce.Component{constructor(e){super(e),this.canvas=Ce.createRef(),this.canvas=e.canvasRef||Ylt}componentDidMount(){if(this.canvas.current){const e=RN(this.props)[0];this.confetti=new Klt(this.canvas.current,e)}}componentDidUpdate(){const e=RN(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=RN(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return c.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}CO.defaultProps={...wO};CO.displayName="ReactConfetti";function RN(t){const e={},n={},r={},s=[...Object.keys(wO),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const i in t){const o=t[i];s.includes(i)?e[i]=o:a.includes(i)?a[i]=o:r[i]=o}return[e,r,n]}const zw=Ce.forwardRef((t,e)=>c.jsx(CO,{canvasRef:e,...t})),Xlt="/assets/startguy-Dc7rSgs6.png",Jde="/assets/extlogo-BVGmiLAf.png";new URL(Xlt,import.meta.url).href;new URL(Jde,import.meta.url).href;const Jlt=({highlight:t})=>{const{hasUsedTrial:e,planType:n}=wa(),{closeModal:r,sendToBackgroundScript:s,authenticatedFetch:a,removeSharedComponent:i,loadSharedComponent:o}=ut(),l=y.useRef(null),[u,d]=y.useState(!1),[f,m]=y.useState({width:window.innerWidth,height:window.innerHeight}),[g,x]=y.useState(!1),b=t?Llt[t]:null,C=(b==null?void 0:b.tier)||"learn",S=()=>{o("UpgradeModal"),i("TrialClaimGate")},w=async()=>{var A;const _="learn_annually";x(!0);try{const j=window.location.origin,D=await a(`${Jr}/users/create-stripe-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:{priceKey:_,successUrl:`${j}/success?origin=${j}`,cancelUrl:`${j}/cancel?origin=${j}`,origin:j,trial:!e}});if(!D.ok){const R=await D.json();throw console.error("Failed to create checkout:",R),new Error(R.error||"Failed to create checkout session")}const F=(A=(await D.json()).message)==null?void 0:A.checkoutUrl;if(!F)throw new Error("No checkout URL returned");await s({type:"OPEN_STRIPE",url:F,origin:j})}catch(j){console.error("Error creating Stripe checkout:",j)}finally{x(!1)}},E=(b==null?void 0:b.title)??null,T=C==="style"?[{icon:"",text:"Unlimited theme swaps"},{icon:"",text:"Save unlimited themes"},{icon:"",text:"Auto-rotate your themes"}]:[{icon:"",text:"Study guides from files"},{icon:"",text:"Auto notes from lectures"},{icon:"",text:"Smart assignment planning"}];return y.useEffect(()=>{l.current==="free"&&n!=="free"&&d(!0),l.current=n},[n]),y.useEffect(()=>{const _=()=>{m({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),u?c.jsxs("div",{className:"flex flex-col h-full overflow-y-auto items-center justify-center min-h-screen bg-gradient-to-b from-orange-50/30 via-white to-white relative",children:[c.jsx(zw,{width:f.width,height:f.height,recycle:!1,numberOfPieces:100,gravity:.2,initialVelocityY:-15,wind:.02,tweenDuration:500,drawShape:_=>{const A=["#ff6b6b","#ffa952","#ff686c","#ff8c42","#ff6b9d","#ff8c69","#ffa07a","#ffb347"],j=A[Math.floor(Math.random()*A.length)];_.fillStyle=j,_.beginPath(),_.arc(0,0,5,0,2*Math.PI),_.fill()}}),c.jsxs("div",{className:"px-10 pt-8 pb-12 text-center max-w-2xl mx-auto",children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-full blur-2xl animate-pulse"}),c.jsx(_l,{className:"relative size-16 text-green-500",strokeWidth:2})]})}),c.jsx("h1",{className:"text-3xl font-bold text-black mb-2 tracking-wide",style:{fontFamily:"'Instrument Serif', serif"},children:"You've been upgraded!"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Now experience the full power of BetterCampus!"}),c.jsx("div",{className:"mb-8 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-200/40 to-pink-200/40 rounded-full blur-3xl -z-10"}),c.jsx("img",{src:"/success_guy.png",className:"size-32 object-contain mx-auto drop-shadow-lg",alt:"Success celebration"})]})}),c.jsx("div",{className:"space-y-6",children:c.jsx("div",{children:c.jsx("button",{onClick:()=>i("TrialClaimGate"),className:"inline-flex items-center gap-2 px-8 py-3 bg-brand-gradient text-white font-semibold rounded-xl hover:brightness-95 transition-all duration-200 shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30",children:"Let's go!"})})})]})]}):c.jsxs("div",{className:"relative w-full h-full bg-white overflow-hidden",children:[c.jsx("button",{className:"absolute top-4 right-4 size-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",onClick:()=>i("TrialClaimGate"),children:c.jsx(ys,{className:"size-4"})}),c.jsxs("div",{className:"absolute top-6 left-8 flex items-center gap-2 z-10",children:[c.jsx("img",{src:"/extlogo.png",className:"size-4 object-cover"}),c.jsx("h3",{className:"text-sm font-semibold text-black",children:"BetterCampus"})]}),c.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[c.jsxs("div",{className:"relative w-full overflow-hidden px-8",children:[c.jsx("div",{className:"text-center flex flex-col justify-center items-center",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center mb-2",children:[c.jsxs("h1",{className:"text-3xl font-bold text-black flex gap-2 items-center tracking-wide",style:{fontFamily:"'Instrument Serif', serif"},children:[!E&&c.jsxs("p",{children:["You found a  ",c.jsx("span",{className:`underline decoration-wavy ${C==="style"?"decoration-blue-400":"decoration-orange-600"} decoration-2 underline-offset-4`,children:C==="style"?"Style+":"Learn+"})," feature"]}),E&&c.jsxs("p",{children:[E," ",c.jsx("span",{className:`underline decoration-wavy ${C==="style"?"decoration-blue-400":"decoration-orange-600"} decoration-2 underline-offset-4`,children:C==="style"?"Style+":"Learn+"})]})]}),c.jsx("p",{className:"",children:C==="style"?"Customize your Canvas with unlimited themes and personalization.":"Tools that help you plan tasks, study faster, and stay on track."})]})}),c.jsx("div",{className:"max-w-md mx-auto my-2 flex justify-center",children:c.jsx("ul",{className:"",children:T.map((_,A)=>c.jsxs("li",{className:"flex items-center gap-3 text-gray-700 text-sm",children:[c.jsx("span",{className:"flex-shrink-0",children:_.icon}),c.jsx("span",{className:"font-medium",children:_.text})]},A))})}),c.jsxs("div",{className:"space-y-1 mt-4 flex flex-col items-center justify-center bg-white relative z-1",children:[C==="learn"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:w,disabled:g,className:"w-1/2 py-3.5 px-4 rounded-xl font-semibold transition-all duration-200 mt-1 bg-brand-gradient text-white hover:brightness-95 shadow-lg shadow-blue-500/20 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:g?c.jsxs("span",{className:"flex items-center justify-center gap-2 text-sm",children:[c.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e?c.jsx(c.Fragment,{children:c.jsx("span",{className:"text-white",children:"Upgrade Now"})}):c.jsxs("div",{className:"flex justify-center items-center gap-2",children:[c.jsx(uR,{className:"size-4 text-white"})," ",c.jsx("span",{className:"text-white text-md",children:"Try free for 7 days"})]})}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Takes less than 15 seconds. Cancel anytime."})]}),c.jsx("button",{onClick:()=>S(),className:C==="style"?"w-1/2 py-3.5 px-4 rounded-xl font-semibold transition-all duration-200 mt-1 bg-brand-gradient text-white hover:brightness-95 shadow-lg shadow-blue-500/20 cursor-pointer":"underline w-1/2 mx-auto text-center py-2.5 px-6 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors duration-200 hover:bg-gray-100/50 dark:hover:bg-gray-800/50 rounded-lg",children:"See all features"})]})]}),c.jsx("img",{src:C==="style"?"/style_guy.png":"/upgrade_guy.png",className:"z-1 size-[200px] object-contain absolute -bottom-10 -right-8"})]})]})},Qlt=({windowSize:t,onClose:e})=>c.jsxs("div",{className:"flex flex-col h-full overflow-y-auto items-center justify-center min-h-screen bg-gradient-to-b from-orange-50/30 via-white to-white relative",children:[c.jsx(zw,{width:t.width,height:t.height,recycle:!1,numberOfPieces:100,gravity:.2,initialVelocityY:-15,wind:.02,tweenDuration:500,drawShape:n=>{const r=["#ff6b6b","#ffa952","#ff686c","#ff8c42","#ff6b9d","#ff8c69","#ffa07a","#ffb347"],s=r[Math.floor(Math.random()*r.length)];n.fillStyle=s,n.beginPath(),n.arc(0,0,5,0,2*Math.PI),n.fill()}}),c.jsxs("div",{className:"px-10 pt-8 pb-12 text-center max-w-2xl mx-auto",children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-full blur-2xl animate-pulse"}),c.jsx(_l,{className:"relative size-16 text-green-500",strokeWidth:2})]})}),c.jsx("h1",{className:"text-3xl font-bold text-black mb-2 tracking-wide",style:{fontFamily:"'Instrument Serif', serif"},children:"You've been upgraded!"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Now experience the full power of BetterCampus!"}),c.jsx("div",{className:"mb-8 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-200/40 to-pink-200/40 rounded-full blur-3xl -z-10"}),c.jsx("img",{src:"/success_guy.png",className:"size-32 object-contain mx-auto drop-shadow-lg",alt:"Success celebration"})]})}),c.jsx("div",{className:"space-y-6",children:c.jsx("div",{children:c.jsx("button",{onClick:e,className:"inline-flex items-center gap-2 px-8 py-3 bg-brand-gradient text-white font-semibold rounded-xl hover:brightness-95 transition-all duration-200 shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30",children:"Let's go!"})})})]})]}),Zlt=({className:t})=>{const{hasUsedTrial:e,planType:n}=wa(),{sendToBackgroundScript:r,authenticatedFetch:s}=ut(),a=y.useRef(null),[i,o]=y.useState(!1),[l,u]=y.useState(!1),[d,f]=y.useState(!1),m=async()=>{var x;const g="learn_annually";f(!0);try{const b=window.location.origin,C=await s(`${Jr}/users/create-stripe-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:{priceKey:g,successUrl:`${b}/success?origin=${b}`,cancelUrl:`${b}/cancel?origin=${b}`,origin:b,trial:!e}});if(!C.ok){const E=await C.json();throw console.error("Failed to create checkout:",E),new Error(E.error||"Failed to create checkout session")}const w=(x=(await C.json()).message)==null?void 0:x.checkoutUrl;if(!w)throw new Error("No checkout URL returned");await r({type:"OPEN_STRIPE",url:w,origin:b})}catch(b){console.error("Error creating Stripe checkout:",b)}finally{f(!1)}};if(y.useEffect(()=>{a.current==="free"&&n!=="free"&&o(!0),a.current=n},[n]),!i)return c.jsxs("button",{onClick:m,disabled:d||i,className:ge("py-3.5 px-4 rounded-xl font-semibold transition-all duration-200 mt-1 bg-brand-gradient text-white hover:brightness-95 shadow-lg shadow-blue-500/20 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",t),children:[i&&!l&&c.jsx(Qlt,{windowSize:{width:window.innerWidth,height:window.innerHeight},onClose:()=>u(!0)}),d?c.jsxs("span",{className:"flex items-center justify-center gap-2 text-sm",children:[c.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e?c.jsx(c.Fragment,{children:c.jsx("span",{className:"text-white",children:"Upgrade Now"})}):i?"Upgraded!":c.jsxs("div",{className:"flex justify-center items-center gap-2",children:[c.jsx(uR,{className:"size-4 text-white"})," ",c.jsx("span",{className:"text-white text-md",children:"Try free for 7 days"})]})]})},ect=()=>{const[t]=g8(),e=t.get("highlight");return c.jsx(Jlt,{highlight:e})},tct="/assets/upgrade_guy-Bje5SlOX.png",nct=new URL(tct,import.meta.url).href,rct=new URL(Jde,import.meta.url).href,uK={hourly:{used:"this hour",resets:"Your limit resets at the top of each hour"},daily:{used:"today",resets:"Your limit resets daily at midnight"},weekly:{used:"this week",resets:"Your limit resets every Monday"},monthly:{used:"this month",resets:"Your limit resets on the 1st of each month"},indefinite:{used:"for now",resets:"Upgrade to Premium for unlimited access"}},sct={chat:{icon:Uj,title:"Get unlimited chats",getDescription:t=>`You've used all your free AI chat messages ${uK[t].used}.`,features:["Unlimited BetterCampus AI chat messages","Unlimited file uploads","Upload larger files"]},highlights:{icon:Uj,title:"Get unlimited study materials",getDescription:t=>`You've generated all your free study materials ${uK[t].used}.`,features:["Unlimited flashcards and quizzes","Longer and more detailed materials","Unlimited file uploads"]}},act=t=>{const e=sct[t.args.type],n=t.args.period||"indefinite",r=e.icon;return c.jsxs("div",{className:"rounded-2xl border-2 border-orange-500 shadow-xl overflow-hidden mb-5 bg-theme-0",children:[c.jsx("div",{className:"px-6 py-5 bg-orange-500/10 border-b-2 border-orange-500",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-xl text-white",children:c.jsx("img",{src:rct})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-2xl font-bold text-theme-0",style:{fontFamily:"var(--font-serif) !important"},children:[e.title," with"," ",c.jsx("span",{className:"underline decoration-wavy decoration-orange-600 decoration-2 underline-offset-4",style:{fontFamily:"var(--font-serif) !important"},children:"Learn+"})]}),c.jsx("img",{src:nct,className:"size-[140px] object-contain absolute bottom-0 left-0"}),c.jsx("div",{className:"text-sm font-medium text-theme-1 mt-0.5"})]})]})}),c.jsxs("div",{className:"px-6 py-6 bg-theme-0",children:[c.jsx("p",{className:"text-sm text-theme-1 mb-4",children:e.getDescription(n)}),c.jsxs("div",{className:"space-y-2 mb-6",children:[c.jsxs("p",{className:"text-sm font-semibold text-theme-0 mb-3",children:["Upgrade to"," ",c.jsx("span",{className:"underline decoration-wavy decoration-orange-600 decoration-2 underline-offset-4",children:"Learn+"})," ","for:"]}),e.features.map((s,a)=>c.jsxs("div",{className:"flex items-center gap-2 text-sm text-theme-1",children:[c.jsx(r,{className:"h-4 w-4 text-orange-600 flex-shrink-0"}),c.jsx("span",{children:s})]},a))]}),c.jsx("div",{className:"flex flex-col gap-3 px-30",children:c.jsx(Zlt,{className:"flex-1"})}),c.jsx("div",{className:"mt-1 w-full text-center hover:cursor-pointer hover:underline",children:c.jsx("a",{className:ge("flex-1 text-xs","text-theme-1","text-center"),href:"https://bettercampus.com/pricing",target:"_blank",children:"View all features"})})]})]})},dK=new URL(Rlt,import.meta.url).href,hK=new URL(Mlt,import.meta.url).href,fK=new URL(Ilt,import.meta.url).href,ict=new URL(Olt,import.meta.url).href,oct=()=>c.jsx(Pce,{className:"aui-root aui-thread-root @container flex h-full flex-col bg-theme-0",style:{"--thread-max-width":"44rem"},children:c.jsxs(Bce,{turnAnchor:"top",className:"aui-thread-viewport relative flex flex-1 flex-col overflow-x-auto overflow-y-scroll scroll-smooth px-4 pt-4 text-sm sm:text-base",children:[c.jsx(ro,{condition:({thread:t})=>t.isEmpty,children:c.jsx(cct,{})}),c.jsx(Lrt,{components:{UserMessage:pct,EditComposer:vct,AssistantMessage:fct}}),c.jsxs(Lce,{className:"aui-thread-viewport-footer sticky bottom-0 mx-auto mt-auto flex w-full max-w-(--thread-max-width) flex-col overflow-visible rounded-t-3xl pt-10",children:[c.jsx(lct,{}),c.jsx(ro,{condition:({thread:t})=>!t.isEmpty,children:c.jsx(Qde,{})}),c.jsxs("div",{className:"bg-theme-0 pb-4 md:pb-6",children:[c.jsx(uct,{}),c.jsxs("p",{className:"mt-2 text-xs text-gray-500 text-center",children:[c.jsxs(_c,{children:[c.jsx(nw,{className:"underline",children:"AI can make mistakes"}),c.jsx(Flt,{})]}),". ","Always verify important information."]})]})]})]})}),lct=()=>c.jsx($rt,{asChild:!0,children:c.jsx(Su,{tooltip:"Scroll to bottom",variant:"outline",className:"aui-thread-scroll-to-bottom -top-12 absolute z-10 self-center rounded-full p-4 disabled:invisible bg-white dark:bg-theme-0 dark:hover:bg-accent",children:c.jsx(dke,{})})}),cct=()=>{const{authUser:t}=wa();return c.jsx("div",{className:"aui-thread-welcome-root mx-auto my-auto flex w-full max-w-(--thread-max-width) grow flex-col",children:c.jsx("div",{className:"aui-thread-welcome-center flex w-full grow flex-col items-center justify-center",children:c.jsxs("div",{className:"aui-thread-welcome-message flex size-full flex-col justify-center px-4",children:[c.jsxs("h1",{className:"aui-thread-welcome-message-inner fade-in slide-in-from-bottom-1 animate-in font-semibold text-2xl duration-200 text-theme-0",children:["Hello ",(t.user_metadata.name||"there").split(" ")[0],"!"]}),c.jsx("p",{className:"aui-thread-welcome-message-inner fade-in slide-in-from-bottom-1 animate-in text-theme-1 text-xl delay-75 duration-200",children:"How can I help you today?"}),c.jsx("div",{className:"h-6"}),c.jsx(Qde,{welcome:!0})]})})})},kx=({type:t,fadeIn:e=!0})=>{switch(t){case"thinking":return c.jsx("img",{src:fK,style:{animation:"floatingGuy 1s ease-in-out infinite"},className:ge("absolute w-20 h-20 z-100 -top-15")});case"thought":return c.jsx("img",{src:ict,className:ge(e&&"fade-in slide-in-from-bottom-2 animate-in duration-200","absolute w-20 h-20 z-100 -top-16")});case"creating":return c.jsx("img",{src:hK,style:{animation:"floatingGuy 1s ease-in-out infinite"},className:ge("absolute w-20 h-20 z-100 -top-14")});case"created":return c.jsx("img",{src:dK,className:ge(e&&"fade-in slide-in-from-bottom-2 animate-in duration-200","absolute w-20 h-20 z-100 -top-14")});case"idle":return c.jsx("img",{src:dK,className:ge(e&&"fade-in slide-in-from-bottom-2 animate-in duration-200","absolute w-20 h-20 z-100 -top-14")});case"user-typing":return c.jsx("img",{src:fK,className:ge(e&&"fade-in slide-in-from-bottom-2 animate-in duration-200","absolute w-20 h-20 z-100 -top-15")});case"user-creating":return c.jsx("img",{src:hK,className:ge(e&&"fade-in slide-in-from-bottom-2 animate-in duration-200","absolute w-20 h-20 z-100 -top-14")});default:return null}},uf={activeSuggestion:null,setActiveSuggestion:t=>{}},Qde=({welcome:t})=>{const[e,n]=y.useState(null);uf.activeSuggestion=e,uf.setActiveSuggestion=n;const r=s=>{n(s)};return c.jsxs("div",{className:"flex justify-between w-full relative",children:[!t&&c.jsx("div",{}),c.jsx("div",{className:"flex flex-wrap gap-2 pb-4",children:Ou.map((s,a)=>{const i=(e==null?void 0:e.id)===s.id;return c.jsx("div",{className:"fade-in slide-in-from-bottom-2 animate-in fill-mode-both duration-200",style:{animationDelay:`${100+a*50}ms`},children:c.jsx(sde,{highlight:s,isActive:i,onSelect:r})},s.id)})})]})},uct=()=>{const[t,e]=y.useState(null),n=y.useRef(null),r=y.useRef(null),[s,a]=y.useState(null),{selectedSources:i}=os(),[o,l]=y.useState(0),f=t?2e3:1e4,m=w=>w.type==="text"&&typeof w.text=="string"&&w.text.startsWith(`${nf}:`),g=ls();y.useEffect(()=>{g.on("thread.run-end",()=>{const w=g.thread().getState();if(w.messages.length<2)return;const E=w.messages[w.messages.length-2];!E.parts.length||!m(E.parts[0])?a("thought"):a("created")})}),y.useEffect(()=>{const w=setInterval(()=>{const E=g.composer().getState().text;l(T=>T===E.length?T:E.length)},250);return()=>clearInterval(w)},[g]);const[x,b]=y.useState({});y.useEffect(()=>{t&&b(Object.fromEntries(Object.entries(t.configPrompt.options).map(([E,T])=>[E,T[0]])));const w=setInterval(()=>{uf.activeSuggestion!==t&&e(uf.activeSuggestion)},100);return()=>clearInterval(w)},[t]),y.useEffect(()=>{t&&n.current&&(n.current.focus(),n.current.scrollIntoView({behavior:"smooth",block:"center"}))},[t]);const C=()=>{uf.setActiveSuggestion(null),e(null),a("idle")},S=t==null?void 0:t.icon;return c.jsxs(LI,{className:ge("aui-composer-root relative flex w-full flex-col bg-theme-0"),children:[c.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-200",children:[c.jsx("style",{children:`
      @keyframes floatingGuy {
        0%, 100% { transform: translateY(0); opacity: 1; }
        50% { transform: translateY(-6px); opacity: 0.5; }
      }
      `}),c.jsx(ro,{condition:({thread:w})=>w.isRunning&&w.messages.length>1&&w.messages[w.messages.length-2].parts.length&&!m(w.messages[w.messages.length-2].parts[0])&&!w.messages[w.messages.length-1].parts.length,children:c.jsx(kx,{type:"thinking"})}),c.jsx(ro,{condition:({thread:w})=>w.isRunning&&w.messages.length>1&&w.messages[w.messages.length-2].parts.length&&m(w.messages[w.messages.length-2].parts[0]),children:c.jsx(kx,{type:"creating"})}),c.jsx(ro,{condition:({thread:w})=>w.isRunning&&w.messages.length>1&&w.messages[w.messages.length-2].parts.length&&!m(w.messages[w.messages.length-2].parts[0])&&!!w.messages[w.messages.length-1].parts.length,children:c.jsx(kx,{type:"thought"})}),c.jsx(ro,{condition:({thread:w})=>!(w.isRunning&&w.messages.length>1&&w.messages[w.messages.length-2].parts.length),children:c.jsx(kx,{type:s,fadeIn:s==="user-typing"||s==="user-creating"||s==="idle"})})]}),t&&c.jsxs("div",{className:ge("mb-2 flex items-center justify-between rounded-lg px-3 py-3 text-sm sm:text-base","transition-all animate-in fade-in slide-in-from-bottom-2",t.color.bg,t.color.text),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[S&&c.jsx(S,{className:"h-5 w-5"}),c.jsxs("span",{className:"font-medium",children:["What topics should your ",c.jsx("strong",{children:t.label})," ","cover?"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[t?c.jsx(Plt,{options:t.configPrompt.options,value:x,onChange:b}):null,c.jsx(Su,{tooltip:"Cancel",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,children:c.jsx(ys,{className:"h-3.5 w-3.5"})})]})]}),c.jsxs("div",{className:ge("aui-composer-attachment-dropzone flex w-full flex-col rounded-2xl border border-theme bg-theme-0 px-1 pt-2 outline-none transition-all data-[dragging=true]:border-dashed data-[dragging=true]:bg-accent/50","ring-emerald-500 ring-orange-500 ring-blue-500 ring-none",t?ge("ring-2 ring-offset-2",t.color.border.replace("border-","ring-")):"border-theme has-[textarea:focus-visible]:border-theme has-[textarea:focus-visible]:ring-2 has-[textarea:focus-visible]:ring-theme"),children:[c.jsx($I,{ref:n,placeholder:i.length===0?"Select sources in the left panel to get started!":t?`What topics from your sources should this focus on? Leave blank to use all topics.
Things to try:
   - The ${t.id} must focus only on key physics topics
   - Help me prepare for my history exam`:"Ask a question about your course materials..."+(s==="user-typing"?`
Things to try:
  - What topics are likely to be on the exam?
  - Which formulas should I memorize?`:""),disabled:i.length===0,className:ge("aui-composer-input mb-1 max-h-32 min-h-14 w-full resize-none bg-theme-0 px-4 pt-2 pb-3 text-sm outline-none text-theme-0 focus-visible:ring-0 transition",i.length===0?"select-none pointer-events-none opacity-70":""),rows:1,autoFocus:!0,"aria-label":"Message input",onKeyDown:w=>{if(w.key==="Enter"&&!w.shiftKey){if(g.composer().getState().text.length>f){w.preventDefault();return}t&&r.current&&!g.thread().getState().isRunning&&(w.preventDefault(),r.current(x))}},onFocus:()=>{t?a("user-creating"):(s==="created"||s==="thought"||!s||s==="idle")&&a("user-typing")},onBlur:()=>{s==="user-typing"&&a("idle")}}),o>=f*.75&&c.jsx("div",{className:"px-4 pb-2",children:c.jsxs("p",{className:ge("text-xs text-right transition-colors",o>f?"text-red-500 font-medium":o>f*.9?"text-orange-500":"text-theme-1"),children:[o," / ",f," characters",o>f&&c.jsx("span",{className:"ml-1",children:"(limit exceeded)"})]})}),c.jsx(dct,{config:x,submitToolCallRef:r,charCount:o,charLimit:f})]})]})},dct=({submitToolCallRef:t,config:e,charCount:n,charLimit:r})=>{const s=ls(),[a,i]=y.useState(null);y.useEffect(()=>{const u=setInterval(()=>{uf.activeSuggestion!==a&&i(uf.activeSuggestion)},100);return()=>clearInterval(u)},[a]);const o=()=>a?a.color.border.replace("border-","bg-"):"",{selectedSources:l}=os();return y.useEffect(()=>(t.current=u=>{if(!a||l.length===0)return;const d=s.composer().getState().text.trim();s.thread().append({role:"user",content:[{type:"text",text:`${nf}:${a.label} ${JSON.stringify(u||{})} ${d}`}]}),s.composer().setText(""),uf.setActiveSuggestion(null)},()=>{t.current=null}),[a,s,l]),c.jsxs("div",{className:"aui-composer-action-wrapper relative mx-2 mb-2 flex items-center justify-between",children:[c.jsx("div",{}),c.jsx(ro,{condition:({thread:u})=>!u.isRunning,children:a?c.jsxs("div",{className:"flex gap-2",children:[c.jsx(lK,{selectedSources:l}),c.jsx(yc,{children:c.jsxs(ga,{open:n>r?void 0:!1,children:[c.jsx(Ia,{asChild:!0,children:c.jsxs(vn,{type:"button",size:"sm",disabled:l.length===0||n>r,className:ge("gap-1.5 rounded-full text-white transition-opacity",o(),"hover:opacity-90",n>r&&"opacity-50 cursor-not-allowed"),onClick:()=>{var u;return(u=t.current)==null?void 0:u.call(t,e)},children:[c.jsxs("span",{className:"text-xs font-medium",children:["Create ",a.label]}),c.jsx(rU,{className:"h-3.5 w-3.5"})]})}),n>r&&c.jsx(va,{children:c.jsxs("p",{children:["Message exceeds ",r," character limit"]})})]})})]}):c.jsxs(Dce,{className:ge("flex gap-2",l.length===0||n>r?"select-none pointer-events-none opacity-70":""),children:[c.jsx(lK,{selectedSources:l}),c.jsx(yc,{children:c.jsxs(ga,{open:n>r?void 0:!1,children:[c.jsx(Ia,{asChild:!0,children:c.jsx(Su,{tooltip:n>r?"":"Send message",side:"bottom",variant:"default",size:"icon",className:"size-8 rounded-full shadow-none text-theme-0",children:c.jsx(rU,{className:"size-4"})})}),n>r&&c.jsx(va,{children:c.jsxs("p",{children:["Message exceeds ",r," character limit"]})})]})})]})}),c.jsx(ro,{condition:({thread:u})=>u.isRunning,children:c.jsx(Mce,{asChild:!0,children:c.jsx(vn,{type:"button",variant:"default",size:"icon",className:"aui-composer-cancel size-8 rounded-full shadow-none text-theme-0","aria-label":"Stop generating",children:c.jsx(P_e,{className:"aui-composer-cancel-icon size-3 fill-current"})})})})]})},hct=()=>c.jsx(Ace,{children:c.jsx(Ice,{className:"aui-message-error-root mt-2 rounded-md border border-destructive bg-destructive/10 p-3 text-destructive text-sm dark:bg-destructive/5 dark:text-red-200",children:c.jsx(Oce,{className:"aui-message-error-message line-clamp-2"})})}),fct=()=>c.jsxs(LE,{className:"aui-assistant-message-root fade-in slide-in-from-bottom-1 relative mx-auto w-full max-w-(--thread-max-width) animate-in py-3 duration-150","data-role":"assistant",style:{minHeight:"auto"},children:[c.jsxs("div",{className:"aui-assistant-message-content wrap-break-word px-2 text-theme-0 leading-relaxed",children:[c.jsx(zE,{components:{Text:aot,tools:{by_name:{...Object.fromEntries(Ou.map(t=>[t.label,Eot])),[Kh]:act},Fallback:moe},Empty:Blt}}),c.jsx(hct,{})]}),c.jsxs("div",{className:"aui-assistant-message-footer mt-1 ml-2 flex",children:[c.jsx(Zde,{}),c.jsx(mct,{})]})]}),mct=()=>c.jsx(FI,{hideWhenRunning:!0,autohide:"not-last",autohideFloat:"single-branch",className:"aui-assistant-action-bar-root -ml-1 col-start-3 row-start-2 flex gap-1 text-theme-1 data-floating:absolute data-floating:rounded-md data-floating:border data-floating:bg-theme-0 data-floating:p-1 data-floating:shadow-sm",children:c.jsx(ro,{condition:({message:t})=>t.parts.some(e=>e.type==="text"),children:c.jsx(gce,{asChild:!0,children:c.jsxs(Su,{tooltip:"Copy",children:[c.jsx(ro,{condition:({message:t})=>t.isCopied,children:c.jsx(or,{})}),c.jsx(ro,{condition:({message:t})=>!t.isCopied,children:c.jsx(cR,{})})]})})})}),pct=()=>c.jsxs(LE,{className:"aui-user-message-root fade-in slide-in-from-bottom-1 mx-auto grid w-full max-w-(--thread-max-width) animate-in auto-rows-auto grid-cols-[minmax(72px,1fr)_auto] content-start gap-y-2 px-2 py-3 duration-150 [&:where(>*)]:col-start-2","data-role":"user",children:[c.jsxs("div",{className:"aui-user-message-content-wrapper relative col-start-2 min-w-0",children:[c.jsx("div",{className:"aui-user-message-content wrap-break-word rounded-2xl bg-muted px-4 py-2.5 text-theme-0",children:c.jsx(zE,{components:{Text:Dlt}})}),c.jsx("div",{className:"aui-user-action-bar-wrapper -translate-x-full -translate-y-1/2 absolute top-1/2 left-0 pr-2",children:c.jsx(gct,{})})]}),c.jsx(Zde,{className:"aui-user-branch-picker -mr-1 col-span-full col-start-1 row-start-3 justify-end"})]}),gct=()=>c.jsx(FI,{hideWhenRunning:!0,autohide:"not-last",className:"aui-user-action-bar-root flex flex-col items-end"}),vct=()=>c.jsx(LE,{className:"aui-edit-composer-wrapper mx-auto flex w-full max-w-(--thread-max-width) flex-col px-2 py-3",children:c.jsxs(LI,{className:"aui-edit-composer-root ml-auto flex w-full max-w-[85%] flex-col rounded-2xl bg-theme-2",children:[c.jsx($I,{className:"aui-edit-composer-input min-h-14 w-full resize-none bg-transparent p-4 text-theme-0 text-sm outline-none",autoFocus:!0}),c.jsxs("div",{className:"aui-edit-composer-footer mx-3 mb-3 flex items-center gap-2 self-end",children:[c.jsx(Mce,{asChild:!0,children:c.jsx(vn,{variant:"ghost",size:"sm",children:"Cancel"})}),c.jsx(Dce,{asChild:!0,children:c.jsx(vn,{size:"sm",children:"Update"})})]})]})}),Zde=({className:t,...e})=>c.jsxs(Nce,{hideWhenSingleBranch:!0,className:ge("aui-branch-picker-root -ml-2 mr-2 inline-flex items-center text-theme-1 text-xs",t),...e,children:[c.jsx(Qnt,{asChild:!0,children:c.jsx(Su,{tooltip:"Previous",children:c.jsx(Kd,{})})}),c.jsxs("span",{className:"aui-branch-picker-state font-medium",children:[c.jsx(wce,{})," / ",c.jsx(bce,{})]}),c.jsx(Xnt,{asChild:!0,children:c.jsx(Su,{tooltip:"Next",children:c.jsx(pc,{})})})]});function ehe({notebookName:t,showSidebarTrigger:e,selectedSourcesCount:n,totalSourcesCount:r,runtime:s,onRenameNotebook:a,topBarAction:i}){const{navigatePage:o}=os(),[l,u]=y.useState(!1),[d,f]=y.useState(t);y.useEffect(()=>{f(t)},[t]);const m=()=>{const g=d.trim();if(!g){f(t);return}g!==t&&(a==null||a(g)),u(!1)};return c.jsxs(MHe,{className:"h-full flex flex-col",children:[c.jsxs("header",{className:"bg-theme-0 sticky top-0 z-10",children:[c.jsx("div",{className:"flex shrink-0 items-center gap-2 h-16",children:c.jsxs("div",{className:"flex flex-1 items-center gap-2 px-3",children:[e&&c.jsxs(c.Fragment,{children:[c.jsx(RHe,{className:"text-theme-0"}),c.jsx(Ns,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-5"})]}),c.jsx("div",{className:"flex flex-1 items-center justify-between",children:c.jsx("h1",{className:"text-sm font-semibold text-theme-0",children:c.jsx("div",{className:"flex flex-1 items-center justify-between",children:c.jsx("div",{className:"flex items-center gap-1.5 min-w-0",children:l&&e?c.jsx(wE,{autoFocus:!0,value:d,onChange:g=>f(g.target.value),onBlur:m,onKeyDown:g=>{g.key==="Enter"&&m(),g.key==="Escape"&&(f(t),u(!1))},className:`
          h-7 px-1
          text-sm font-semibold
          bg-transparent
          border-none
          focus-visible:ring-0
          shadow-none
          truncate
          text-theme-0
        `}):c.jsxs("button",{type:"button",onClick:()=>u(!0),className:`
          group
          flex items-center gap-2
          text-sm font-semibold
          text-theme-0
          truncate
          hover:opacity-90
        `,children:[c.jsx("span",{className:"truncate",children:t}),e&&c.jsx(d_e,{className:"h-4 w-4 transition"})]})})})})}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex-grow"}),i]})]})}),c.jsx(Ns,{})]}),c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsx(oct,{})})]})}var MN="rovingFocusGroup.onEntryFocus",yct={bubbles:!1,cancelable:!0},$w="RovingFocusGroup",[P7,the,xct]=mk($w),[bct,nhe]=Fa($w,[xct]),[wct,Cct]=bct($w),rhe=y.forwardRef((t,e)=>c.jsx(P7.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(P7.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(Sct,{...t,ref:e})})}));rhe.displayName=$w;var Sct=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=y.useRef(null),g=Bt(e,m),x=k0(a),[b,C]=Mi({prop:i,defaultProp:o??null,onChange:l,caller:$w}),[S,w]=y.useState(!1),E=Pr(u),T=the(n),_=y.useRef(!1),[A,j]=y.useState(0);return y.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(MN,E),()=>D.removeEventListener(MN,E)},[E]),c.jsx(wct,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:b,onItemFocus:y.useCallback(D=>C(D),[C]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>j(D=>D+1),[]),onFocusableItemRemove:y.useCallback(()=>j(D=>D-1),[]),children:c.jsx(Nt.div,{tabIndex:S||A===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:Zr(t.onMouseDown,()=>{_.current=!0}),onFocus:Zr(t.onFocus,D=>{const z=!_.current;if(D.target===D.currentTarget&&z&&!S){const F=new CustomEvent(MN,yct);if(D.currentTarget.dispatchEvent(F),!F.defaultPrevented){const R=T().filter(I=>I.focusable),L=R.find(I=>I.active),O=R.find(I=>I.id===b),P=[L,O,...R].filter(Boolean).map(I=>I.ref.current);ihe(P,d)}}_.current=!1}),onBlur:Zr(t.onBlur,()=>w(!1))})})}),she="RovingFocusGroupItem",ahe=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...o}=t,l=Ma(),u=a||l,d=Cct(she,n),f=d.currentTabStopId===u,m=the(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:b}=d;return y.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),c.jsx(P7.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:c.jsx(Nt.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:Zr(t.onMouseDown,C=>{r?d.onItemFocus(u):C.preventDefault()}),onFocus:Zr(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Zr(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){d.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const S=_ct(C,d.orientation,d.dir);if(S!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let E=m().filter(T=>T.focusable).map(T=>T.ref.current);if(S==="last")E.reverse();else if(S==="prev"||S==="next"){S==="prev"&&E.reverse();const T=E.indexOf(C.currentTarget);E=d.loop?Tct(E,T+1):E.slice(T+1)}setTimeout(()=>ihe(E))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:b!=null}):i})})});ahe.displayName=she;var kct={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ect(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function _ct(t,e,n){const r=Ect(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return kct[r]}function ihe(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Tct(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Act=rhe,Nct=ahe,XE="Tabs",[jct]=Fa(XE,[nhe]),ohe=nhe(),[Dct,SO]=jct(XE),lhe=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:l="automatic",...u}=t,d=k0(o),[f,m]=Mi({prop:r,onChange:s,defaultProp:a??"",caller:XE});return c.jsx(Dct,{scope:n,baseId:Ma(),value:f,onValueChange:m,orientation:i,dir:d,activationMode:l,children:c.jsx(Nt.div,{dir:d,"data-orientation":i,...u,ref:e})})});lhe.displayName=XE;var che="TabsList",uhe=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=SO(che,n),i=ohe(n);return c.jsx(Act,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:c.jsx(Nt.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});uhe.displayName=che;var dhe="TabsTrigger",hhe=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,i=SO(dhe,n),o=ohe(n),l=phe(i.baseId,r),u=ghe(i.baseId,r),d=r===i.value;return c.jsx(Nct,{asChild:!0,...o,focusable:!s,active:d,children:c.jsx(Nt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:e,onMouseDown:Zr(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:Zr(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:Zr(t.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!s&&f&&i.onValueChange(r)})})})});hhe.displayName=dhe;var fhe="TabsContent",mhe=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=t,o=SO(fhe,n),l=phe(o.baseId,r),u=ghe(o.baseId,r),d=r===o.value,f=y.useRef(d);return y.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),c.jsx(Mw,{present:s||d,children:({present:m})=>c.jsx(Nt.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});mhe.displayName=fhe;function phe(t,e){return`${t}-trigger-${e}`}function ghe(t,e){return`${t}-content-${e}`}var Rct=lhe,Mct=uhe,Ict=hhe,Oct=mhe;function kO({className:t,...e}){return c.jsx(Rct,{"data-slot":"tabs",className:ge("flex flex-col gap-2",t),...e})}function Pct({className:t,...e}){return c.jsx(Mct,{"data-slot":"tabs-list",className:ge("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function Fct({className:t,...e}){return c.jsx(Ict,{"data-slot":"tabs-trigger",className:ge("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function nv({className:t,...e}){return c.jsx(Oct,{"data-slot":"tabs-content",className:ge("flex-1 outline-none",t),...e})}function Bct({className:t,containerClassName:e,...n}){return c.jsx("div",{"data-slot":"table-container",className:ge("relative w-full",e),children:c.jsx("table",{"data-slot":"table",className:ge("w-full caption-bottom text-sm",t),...n})})}function Lct({className:t,...e}){return c.jsx("thead",{"data-slot":"table-header",className:ge("",t),...e})}function zct({className:t,...e}){return c.jsx("tbody",{"data-slot":"table-body",className:ge("[&_tr:last-child]:border-0",t),...e})}function IN({className:t,...e}){return c.jsx("tr",{"data-slot":"table-row",className:ge("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors border-theme",t),...e})}function $ct({className:t,...e}){return c.jsx("th",{"data-slot":"table-head",className:ge("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}function mK({className:t,...e}){return c.jsx("td",{"data-slot":"table-cell",className:ge("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}function Uct(t){if(!t)return null;const e=t.trim().match(/^([\d.]+)\s*(B|KB|MB|GB|TB)?$/i);if(!e)return null;const n=parseFloat(e[1]),r=(e[2]||"B").toUpperCase(),s={B:1,KB:1024,MB:1024**2,GB:1024**3,TB:1024**4};return Math.round(n*(s[r]??1))}function Hct(t,e){var s,a,i;const n=(s=t.metadata)==null?void 0:s.content_type;if(n&&e.allowedMimeTypes.length>0&&!e.allowedMimeTypes.includes(n))return{valid:!1,reason:"type"};const r=typeof((a=t.metadata)==null?void 0:a.size)=="number"?(i=t.metadata)==null?void 0:i.size:"size_text"in t.metadata?Uct(t.metadata.size_text):0;return r!=null&&r>e.maxFileSizeBytes?{valid:!1,reason:"size"}:{valid:!0}}function Vct({sources:t,files:e,selected:n,setSelected:r,allowedMimeTypes:s,maxFileSizeBytes:a}){const i=w=>!!t.find(E=>"canvas_file_id"in E.metadata&&E.metadata.canvas_file_id==w.metadata.canvas_file_id),[o,l]=y.useState([]),[u,d]=y.useState(""),f=w=>Hct(w,{allowedMimeTypes:s,maxFileSizeBytes:a}),m=w=>!f(w).valid,g=w=>!m(w)&&n.some(E=>E==w),x=w=>{m(w)||i(w)||r(E=>g(w)?E.filter(T=>T!=w):[...E,w])},b=w=>{r(w?e.filter(E=>!m(E)):[])},C=y.useMemo(()=>[{id:"select",header:({table:w})=>{const T=w.getRowModel().rows.map(A=>A.original).filter(A=>!m(A)),_=T.length>0&&T.every(A=>g(A));return c.jsx(Gg,{checked:_,onCheckedChange:A=>b(!!A),"aria-label":"Select all"})},cell:({row:w})=>{const E=w.original,T=m(E),_=i(E);return c.jsx(Gg,{checked:g(E)||_,disabled:T||_,"aria-label":`Select ${E.name}`})},enableSorting:!1},{id:"name",accessorKey:"name",enableSorting:!0,header:({column:w})=>c.jsxs(vn,{variant:"ghost",className:"px-0",onClick:()=>w.toggleSorting(w.getIsSorted()==="asc"),children:["Name",c.jsx(m4,{className:"ml-2 h-4 w-4"})]}),cell:({row:w,getValue:E})=>{const T=f(w.original);return c.jsxs("div",{className:ge("max-w-full truncate",T.reason==="type"&&"text-red-500 font-medium"),children:[E(),T.reason==="type"&&" (unsupported type)"]})}},{id:"size",accessorKey:"metadata.size",header:"Size",cell:({row:w})=>{const E=w.original,T="size_text"in w.original.metadata?w.original.metadata.size_text:w.original.metadata.size?Cw(w.original.metadata.size):"",_=f(E);return c.jsxs("span",{className:ge(_.reason==="size"&&"text-red-500 font-medium"),children:[T,_.reason==="size"&&" (too large)"]})}},{id:"created",accessorKey:"metadata.created_at",enableSorting:!0,header:({column:w})=>c.jsxs(vn,{variant:"ghost",className:"px-0",onClick:()=>w.toggleSorting(w.getIsSorted()==="asc"),children:["Created",c.jsx(m4,{className:"ml-2 h-4 w-4"})]}),cell:({row:w})=>c.jsx("span",{className:"capitalize",children:w.original.metadata.created_at?new Date(w.original.metadata.created_at).toLocaleString():"-"})}],[n,s,a]),S=ooe({data:e.sort((w,E)=>{const T=m(w)||i(w),_=m(E)||i(E);return T&&!_?1:!T&&_||new Date(w.metadata.created_at).valueOf()>new Date(E.metadata.created_at).valueOf()?-1:0}),columns:C,state:{sorting:o,globalFilter:u},onSortingChange:l,onGlobalFilterChange:d,getCoreRowModel:soe(),getSortedRowModel:ioe(),getFilteredRowModel:aoe()});return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"w-full",children:c.jsx(wE,{placeholder:"Search sources...",value:u,onChange:w=>d(w.target.value),variant:"search"})}),c.jsx("div",{className:"rounded-md border border-theme bg-theme-0 max-h-[350px] overflow-y-scroll",children:c.jsxs(Bct,{className:"table-fixed w-full",children:[c.jsx(Lct,{children:S.getHeaderGroups().map(w=>c.jsx(IN,{children:w.headers.map(E=>c.jsx($ct,{className:ge(E.column.id==="name"&&"w-[40%]",E.column.id==="select"&&"w-10",E.column.id==="size"&&"w-32",E.column.id==="created"&&"w-48","bg-theme-2"),children:a5(E.column.columnDef.header,E.getContext())},E.id))},w.id))}),c.jsx(zct,{children:S.getRowModel().rows.length?S.getRowModel().rows.map(w=>c.jsx(IN,{"data-state":g(w.original)?"selected":void 0,onClick:()=>x(w.original),className:ge("cursor-pointer hover:bg-theme-1",g(w.original)&&"bg-theme-1",(m(w.original)||i(w.original))&&"opacity-50 pointer-events-none"),children:w.getVisibleCells().map(E=>c.jsx(mK,{className:ge(E.column.id==="name"&&"w-[40%]",E.column.id==="select"&&"w-10",E.column.id==="size"&&"w-32",E.column.id==="created"&&"w-48"),children:a5(E.column.columnDef.cell,E.getContext())},E.id))},w.id)):c.jsx(IN,{children:c.jsx(mK,{colSpan:C.length,className:"h-24 text-center text-theme-1",children:"No sources found"})})})]})})]})}function EO({className:t,...e}){return c.jsx(Pct,{className:ge("relative inline-flex rounded-full p-1 space-x-1","bg-brand-gradient backdrop-blur","border border-theme shadow-sm","h-10",t),...e})}function rv({className:t,...e}){return c.jsx(Fct,{className:ge("relative z-10 rounded-full px-6 py-2","text-sm font-semibold","transition-all duration-200 ease-out","text-black/70 hover:text-black","data-[state=active]:bg-white","data-[state=active]:text-black","data-[state=active]:shadow-theme","hover:bg-white/50","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-theme",t),...e})}function vhe({allowedFileExtensions:t,allowedMimeTypes:e,maxFileSizeBytes:n,selectedSources:r,setSelectedSources:s,invalidFiles:a,setInvalidFiles:i,onOpenLinkDialog:o,onOpenPasteTextDialog:l}){const u=y.useRef(null),[d,f]=y.useState(!1),m=r.filter(Lw),g=r.filter(Bw);wa();const x=T=>e.includes(T.type)?T.size>n?{file:T,reason:"size",message:`"${T.name}" exceeds the ${(n/1024/1024).toFixed(0)}MB limit`}:null:{file:T,reason:"type",message:`"${T.name}" is not a supported file type`},b=T=>{const _=[],A=[];T.forEach(j=>{const D=x(j);D?A.push(D):_.push(j)}),A.forEach(j=>Ts.error("Invalid file",{description:c.jsx("span",{className:"text-theme-1",children:j.message})})),i(j=>[...j,...A]),s(j=>[...j,..._])},C=T=>{T.preventDefault(),T.stopPropagation(),f(T.type==="dragenter"||T.type==="dragover")},S=T=>{T.preventDefault(),T.stopPropagation(),f(!1),b(Array.from(T.dataTransfer.files))},w=T=>{b(Array.from(T.target.files||[])),u.current&&(u.current.value="")},E=T=>{s(_=>_.filter(A=>A!=T))};return c.jsxs("div",{className:"space-y-2 w-full",children:[c.jsxs("div",{className:`bg-theme-1 border-2 border-dashed transition-colors rounded-2xl p-2 ${!d&&"border-theme"}`,children:[c.jsx("input",{ref:u,type:"file",multiple:!0,className:"hidden",accept:e.join(","),onChange:w}),c.jsxs("div",{className:ge("relative rounded-2xl p-12 text-center transition-colors min-h-[280px] flex flex-col",a.length&&"border-red-500 border-2 bg-red-500/20"),onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:S,children:[c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Drop your files here"}),c.jsxs("p",{className:"text-xs text-theme-2 mt-1",children:["Max ",(n/1024/1024).toFixed(0),"MB"]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-3 mt-8",children:[c.jsxs(vn,{type:"button",variant:"outline",onClick:()=>{var T;return(T=u.current)==null?void 0:T.click()},className:"rounded-3xl gap-1 bg-theme-0 border-[0.5px] border-opacity-30 hover:brightness-85 transition-all",children:[c.jsx(mR,{}),"Upload Files"]}),c.jsxs(vn,{type:"button",variant:"outline",onClick:()=>{o==null||o()},className:"rounded-3xl gap-1 bg-theme-0 border-[0.5px] border-opacity-30 hover:brightness-85 transition-all",children:[c.jsx(Kb,{}),"Add Link"]}),c.jsx(yc,{delayDuration:200,children:c.jsxs(ga,{children:[c.jsx(Ia,{asChild:!0,children:c.jsx("span",{className:"inline-flex",children:c.jsxs(vn,{type:"button",variant:"outline",disabled:!0,className:"rounded-3xl gap-1 bg-theme-0 border-[0.5px] border-opacity-30 cursor-not-allowed opacity-50",children:[c.jsx(fEe,{}),"Google Drive"]})})}),c.jsx(va,{className:"mb-1",children:c.jsx("span",{children:"Coming soon"})})]})}),c.jsxs(vn,{type:"button",variant:"outline",onClick:()=>{l==null||l()},className:"rounded-3xl gap-1 bg-theme-0 border-[0.5px] border-opacity-30 hover:brightness-85 transition-all",children:[c.jsx(aZ,{}),"Paste Text"]})]})]})]}),a.map((T,_)=>c.jsx("p",{className:"text-sm text-red-600",children:T.message},_)),g.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Selected files:"}),c.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:g.map((T,_)=>c.jsxs("div",{className:"flex items-center gap-2 bg-theme-0 rounded-md px-3 min-w-0",children:[c.jsx("div",{className:"text-xs px-2 py-0.5 rounded bg-theme-1 text-theme-2 shrink-0",children:"FILE"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:T.name}),c.jsx("p",{className:"text-xs text-theme-1",children:Cw(T.size)})]}),c.jsx(vn,{variant:"ghost",size:"icon",onClick:()=>E(T),children:c.jsx(ys,{className:"h-4 w-4"})})]},_))})]}),m.map((T,_)=>c.jsxs("div",{className:"flex items-center gap-2 bg-theme-0 rounded-md px-3 min-w-0",children:[c.jsx("div",{className:"text-xs px-2 py-0.5 rounded bg-theme-1 text-theme-2 shrink-0",children:"LINK"}),c.jsx("p",{className:"flex-1 truncate text-sm min-w-0 w-full",children:T.url}),c.jsx(vn,{variant:"ghost",size:"icon",className:"shrink-0",onClick:()=>s(A=>A.filter(j=>j!=T)),children:c.jsx(ys,{className:"h-4 w-4"})})]},`link-${_}`))]})}function qct(t){try{return new URL(t),!0}catch{return!1}}function yhe({onBack:t,onClose:e,selectedSources:n,setSelectedSources:r}){const[s,a]=y.useState(""),[i,o]=y.useState(!1),[l,u]=y.useState([]),d=g=>{const x=g.trim();if(x){if(!qct(x)||l.some(b=>b.url===x)){o(!0);return}u(b=>[...b,{url:x}]),a(""),o(!1)}},f=g=>{u(x=>x.filter(b=>b.url!==g.url))},m=()=>{r(g=>[...g,...l])};return c.jsxs(c.Fragment,{children:[c.jsxs(_0,{className:"relative flex flex-row items-center justify-between pb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vn,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 hover:bg-theme-1",children:c.jsx(xv,{className:"h-4 w-4"})}),c.jsx("h2",{className:"text-xl font-semibold",children:"Add Links"})]}),c.jsx(vn,{variant:"ghost",size:"icon",onClick:e,className:"h-8 w-8 hover:bg-theme-1 absolute right-0 top-0",children:c.jsx(ys,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"space-y-4 -mt-4",children:[c.jsx("p",{className:"text-theme-1",children:"Paste in URLs to use as sources to study with."}),c.jsxs("div",{className:ge("flex items-start gap-2 rounded-md border px-3 py-3",i&&"border-red-500"),children:[c.jsx(Kb,{className:"h-4 w-4 text-theme-1 shrink-0 mt-0.5"}),c.jsx("textarea",{placeholder:"Paste link",value:s,rows:4,onChange:g=>{a(g.target.value),o(!1)},onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),d(s))},className:ge("flex-1 w-full bg-transparent text-sm outline-none placeholder:text-theme-1 resize-none",i&&"text-red-600 placeholder:text-red-400")}),s&&c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-theme-1 mt-0.5",children:[c.jsx(Qke,{className:"h-3 w-3"}),"Enter"]})]}),l.length>0&&c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Selected links:"}),l.map((g,x)=>c.jsxs("div",{className:"flex items-center gap-2 bg-theme-1 rounded-md px-3 py-2 min-w-0",children:[c.jsx("div",{className:"text-xs px-2 py-0.5 rounded bg-theme-2 text-theme-0 shrink-0",children:"LINK"}),c.jsx("p",{className:"flex-1 truncate text-sm min-w-0 w-full",children:g.url}),c.jsx(vn,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8",onClick:()=>f(g),children:c.jsx(ys,{className:"h-4 w-4"})})]},`link-${x}`))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-sm font-medium text-theme-1",children:"Notes"}),c.jsxs("ul",{className:"text-sm text-theme-2 list-disc list-inside space-y-1 pl-1",children:[c.jsx("li",{children:"To add multiple URLs, separate with a new line."}),c.jsx("li",{children:"Only the visible text on the website will be imported at this time."}),c.jsx("li",{children:"Paid articles are not supported."}),c.jsx("li",{children:"YouTube videos are not supported at this time."})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(vn,{onClick:m,disabled:!l.length,className:"px-6 bg-brand-gradient text-theme-0 text-sm hover:brightness-90 transition disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:brightness-100",children:"Add links"})})]})]})}function xhe({onBack:t,onClose:e,onAddFile:n}){const[r,s]=y.useState(""),[a,i]=y.useState(!1),o=()=>{const l=r.trim();if(l)try{const u=new File([l],`pasted-text-${Date.now()}.txt`,{type:"text/plain"});n(u),s(""),i(!1)}catch{i(!0)}};return c.jsxs(c.Fragment,{children:[c.jsxs(_0,{className:"relative flex flex-row items-center justify-between pb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vn,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 hover:bg-theme-1",children:c.jsx(xv,{className:"h-4 w-4"})}),c.jsx("h2",{className:"text-xl font-semibold",children:"Paste Text"})]}),c.jsx(vn,{variant:"ghost",size:"icon",onClick:e,className:"h-8 w-8 hover:bg-theme-1 absolute right-0 top-0",children:c.jsx(ys,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"space-y-4 -mt-4",children:[c.jsx("p",{className:"text-theme-1",children:"Paste in text to use as a source to study with."}),c.jsxs("div",{className:ge("flex items-start gap-2 rounded-md border px-3 py-3",a&&"border-red-500"),children:[c.jsx(aZ,{className:"h-4 w-4 text-theme-1 shrink-0 mt-0.5"}),c.jsx("textarea",{placeholder:"Paste text",value:r,rows:8,onChange:l=>{s(l.target.value),i(!1)},className:ge("flex-1 w-full bg-transparent text-sm outline-none placeholder:text-theme-1 resize-none",a&&"text-red-600 placeholder:text-red-400")})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx(vn,{onClick:o,disabled:!r.trim(),className:"px-6 bg-brand-gradient text-theme-0 text-sm hover:brightness-90 transition disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:brightness-100",children:"Add to sources"})})]})]})}function Gct({open:t,courses:e,onClose:n,init:r,uploadSource:s}){var H;const{notebook:a,sources:i,courseFiles:o,loadingSources:l}=os(),{limits:u}=XM(),d=(H=e.find(P=>P.id.toString()===a.course_id))==null?void 0:H.default,[f,m]=y.useState([]),[g,x]=y.useState([]),[b,C]=y.useState("main"),[S,w]=y.useState("course"),[E,T]=y.useState(!0),_=y.useMemo(()=>u.supportedTypes.map(P=>P.mime),[u]),A=u.supportedTypes.map(P=>P.extensions.join(", ")),j=u.maxFileSize,D=f.filter(Yde),z=f.filter(Bw),F=f.filter(Lw),R=async()=>{console.log("uploading",D,z,F),D.forEach(s),z.forEach(s),F.forEach(P=>s(P)),L()};function L(){m([]),x([]),n(),setTimeout(()=>{C("main")},300)}const O=S==="own"&&z.length===0&&F.length===0||S==="course"&&D.length===0;return c.jsx(_c,{open:t,onOpenChange:P=>{P||L()},children:c.jsx(Tc,{className:"bg-theme-0 overflow-y-scroll max-h-screen sm:max-w-[600px]",children:b==="main"?c.jsxs(c.Fragment,{children:[c.jsx(_0,{children:c.jsxs(rw,{className:"text-left",children:[c.jsxs("div",{className:"text-sm text-theme-link mb-1",children:["Creating for ",d]}),c.jsx("div",{className:"text-2xl font-semibold",children:"Add sources to your study set"}),c.jsx("div",{className:"text-sm font-normal text-theme-1 mt-1",children:"Select from Canvas materials or add your own!"})]})}),c.jsxs(kO,{value:S,className:"w-full min-w-0",children:[c.jsxs(EO,{className:"mx-auto mb-2",children:[c.jsxs(rv,{value:"course",onClick:()=>w("course"),children:[c.jsx(wu,{}),"Class files"]}),c.jsx(rv,{value:"own",onClick:()=>w("own"),children:"Add your own"})]}),c.jsx(nv,{value:"course",className:"w-full min-w-0",children:l?c.jsx("div",{className:"flex h-40 items-center justify-center",children:c.jsx(js,{className:"h-6 w-6 animate-spin text-theme-2"})}):c.jsx(Vct,{allowedMimeTypes:_,maxFileSizeBytes:j,sources:i,files:o,selected:D,setSelected:m})}),c.jsx(nv,{value:"own",className:"space-y-4 w-full",children:c.jsx(vhe,{allowedMimeTypes:_,allowedFileExtensions:A,maxFileSizeBytes:j,selectedSources:f,setSelectedSources:m,invalidFiles:g,setInvalidFiles:x,onOpenLinkDialog:()=>C("link"),onOpenPasteTextDialog:()=>C("text")})})]}),c.jsxs("div",{className:ge("flex items-center gap-2 rounded-lg border px-3 py-2","bg-amber-200/50 text-amber-900 border-amber-300","text-xs leading-snug"),children:[c.jsx(S0,{className:"h-3.5 w-3.5 flex-shrink-0"}),c.jsx("span",{children:"We'll use these files to generate study materials and provide cited answers."})]}),c.jsxs("div",{className:ge("flex items-center gap-2 rounded-lg px-3","text-xs leading-snug"),children:[c.jsx("input",{id:"rights-confirmation",type:"checkbox",checked:E,onChange:P=>T(P.target.checked),className:"h-3 w-3 rounded border-amber-400 accent-amber-600"}),c.jsx("label",{htmlFor:"rights-confirmation",className:"cursor-pointer select-none text-theme-1",children:"I confirm I have the rights and permission to upload these files."})]}),c.jsxs("div",{className:"flex justify-between pt-4",children:[c.jsx(vn,{variant:"outline",onClick:L,children:"Cancel"}),c.jsx(vn,{onClick:R,disabled:O||!E,className:"bg-brand-gradient text-black hover:scale-110 transition",children:"Upload"})]})]}):b==="link"?c.jsx(yhe,{onBack:()=>C("main"),onClose:L,selectedSources:f,setSelectedSources:m}):c.jsx(xhe,{onBack:()=>C("main"),onClose:L,onAddFile:P=>{m(I=>[...I,P])}})})})}function Wct(t){const e=Date.now(),n={Today:[],"This week":[],Earlier:[]};return t.forEach(r=>{const s=(e-new Date(r.created_at).getTime())/864e5;s<1?n.Today.push(r):s<7?n["This week"].push(r):n.Earlier.push(r)}),Object.entries(n).filter(([,r])=>r.length>0)}function Kct({category:t,items:e,onSelect:n,onBack:r,onDelete:s,rightTopBar:a}){const[i,o]=y.useState("grid"),l=Ou.find(d=>d.id===t);if(!l)return null;const u=Wct(e);return c.jsxs("div",{className:"flex h-full w-full flex-col bg-theme-0",children:[c.jsxs("div",{className:"relative bg-theme-0 backdrop-blur-sm",children:[c.jsx("div",{className:"absolute inset-0"}),c.jsxs("div",{className:ge("relative flex items-center h-16 pr-6",a?"justify-end":"justify-between"),children:[c.jsxs("div",{className:ge("flex items-center gap-1 h-16",a&&"justify-end mr-4"),children:[c.jsxs(vn,{variant:"ghost",size:"sm",onClick:r,className:"gap-1 text-sm hover:underline text-theme-0",children:[c.jsx(Kd,{className:"h-4 w-4"}),"Back to chat"]}),c.jsx(Ns,{orientation:"vertical",className:"mr-3 data-[orientation=vertical]:h-5"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:ge("flex h-9 w-9 items-center justify-center rounded-lg",l.color.bg,l.color.border),children:c.jsx(l.icon,{className:ge("h-5 w-5",l.color.text)})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-bold text-theme-0",children:l.label}),c.jsxs("div",{className:"text-xs text-theme-1 font-medium",children:[e.length," ",e.length===1?"item":"items"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 p-1 bg-theme-2 rounded-lg",children:[c.jsx(vn,{variant:"ghost",size:"sm",onClick:()=>o("grid"),className:ge("h-8 px-3 transition-all rounded-md",i==="grid"?"bg-theme-0 shadow-theme text-theme-0":"text-theme-1 bg-theme-2 hover:text-theme-0 hover:bg-theme-1"),children:c.jsx(SEe,{className:"h-4 w-4"})}),c.jsx(vn,{variant:"ghost",size:"sm",onClick:()=>o("list"),className:ge("h-8 px-3 transition-all rounded-md",i==="list"?"bg-theme-0 shadow-theme text-theme-0":"text-theme-1 bg-theme-2 hover:text-theme-0 hover:bg-theme-1"),children:c.jsx(p4,{className:"h-4 w-4"})})]})]})]}),c.jsx(Ns,{}),c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-8",children:[c.jsx("div",{className:"mb-10",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-theme-0 mb-2",children:["Your ",l.labelLong]}),c.jsxs("p",{className:"text-sm text-theme-1 max-w-2xl leading-relaxed",children:["All your saved ",l.labelLong.toLowerCase()," generated from your documents and notes."]})]})})}),e.length>0?c.jsx("div",{className:"space-y-10",children:u.map(([d,f])=>c.jsxs("section",{children:[c.jsxs("div",{className:"mb-5 flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:ge("h-1.5 w-1.5 rounded-full",l.color.bg)}),c.jsx("h3",{className:"text-sm font-bold text-theme-0 uppercase tracking-wider",children:d}),c.jsx("div",{className:"h-5 w-5 flex items-center justify-center bg-theme-2 rounded-full",children:c.jsx("span",{className:"text-xs font-semibold text-theme-1",children:f.length})})]}),c.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-gray-200 to-transparent"})]}),c.jsx("div",{className:ge(i==="grid"?"grid gap-4 grid-cols-[repeat(auto-fill,minmax(280px,1fr))]":"flex flex-col gap-3"),children:f.map(m=>c.jsx(Clt,{item:m,config:l,viewMode:i,onSelect:n,onDelete:s},m.id))})]},d))}):c.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-theme bg-theme-0 py-20 px-8",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:ge("absolute inset-0 blur-2xl opacity-30",l.color.text==="text-blue-700"&&"bg-blue-500",l.color.text==="text-orange-700"&&"bg-orange-500",l.color.text==="text-emerald-800"&&"bg-emerald-500")}),c.jsx("div",{className:ge("relative mb-6 flex h-20 w-20 items-center justify-center rounded-2xl shadow-theme border-2",l.color.text==="text-blue-700"&&"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",l.color.text==="text-orange-700"&&"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",l.color.text==="text-emerald-800"&&"bg-gradient-to-br from-emerald-50 to-emerald-100 border-emerald-200"),children:c.jsx(l.icon,{className:ge("h-10 w-10",l.color.text)})})]}),c.jsxs("h3",{className:"text-lg font-bold text-theme-0 mb-2",children:["No ",l.labelLong.toLowerCase()," yet"]}),c.jsxs("p",{className:"text-sm text-theme-1 text-center max-w-sm",children:["Your saved ",l.labelLong.toLowerCase()," will appear here. Start generating content from your documents to see them here."]})]})]})})]})}function Yct({highlight:t,onBack:e,rightTopBar:n}){var d,f,m,g,x;const{getHighlightContents:r,sources:s,navigatePage:a}=os(),i=Ou.find(b=>b.id===t.type),[o,l]=y.useState();if(y.useEffect(()=>{(async()=>l(await r(t)))()},[t]),!i)return null;const u=y.useMemo(()=>{var C;const b=((C=t.metadata)==null?void 0:C.document_ids)??[];return s.filter(S=>b.includes(S.id))},[s,(d=t.metadata)==null?void 0:d.document_ids]);return c.jsxs("div",{className:"flex h-full w-full flex-col bg-theme-0",children:[c.jsxs("div",{className:ge("flex items-center gap-1 h-16",n&&"justify-end mr-4"),children:[c.jsxs(vn,{variant:"ghost",size:"sm",onClick:e,className:"gap-1 text-sm hover:underline text-theme-0",children:[c.jsx(Kd,{className:"h-4 w-4"}),"Back to chat"]}),c.jsx(Ns,{orientation:"vertical",className:"mr-3 data-[orientation=vertical]:h-5"}),c.jsx("div",{className:ge("flex h-9 w-9 items-center justify-center rounded-lg mr-1",i.color.bg,i.color.border),children:c.jsx(i.icon,{className:ge("h-5 w-5",i.color.text)})}),c.jsx("div",{children:c.jsx("div",{className:"text-sm font-semibold text-theme-0",children:i.label})})]}),c.jsx(Ns,{}),c.jsx("div",{className:"flex-1 overflow-auto py-5",children:t.contents||o?c.jsxs("div",{className:"mx-auto space-y-4",children:[c.jsxs("header",{className:"flex flex-col gap-1.5 px-6",children:[c.jsx("h1",{className:"text-xl font-semibold text-theme-0 leading-tight",children:t.name||"Untitled highlight"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-theme-1",children:[c.jsxs("span",{children:["Created"," ",t.created_at?xb(t.created_at):"Unknown date"]}),c.jsx("span",{className:"opacity-40",children:""}),c.jsxs("a",{onClick:()=>{var b;return(b=document.getElementById("highlight-sources"))==null?void 0:b.scrollIntoView({behavior:"smooth"})},className:"text-theme-link hover:underline cursor-pointer",children:[u.length?"View ":"",((m=(f=t.metadata)==null?void 0:f.document_ids)==null?void 0:m.length)??0," source",(((x=(g=t.metadata)==null?void 0:g.document_ids)==null?void 0:x.length)??0)===1?"":"s"]})]})]}),c.jsx("div",{className:ge("bg-theme-0","py-6"),children:c.jsx(i.focusedComponent,{contents:t.contents||o})}),!!u.length&&c.jsxs("section",{id:"highlight-sources",className:"max-w-3xl mx-auto mt-14 mb-30 scroll-mt-20",children:[c.jsx(Ns,{className:"mb-6"}),c.jsxs("header",{className:"mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-theme-0",children:"Sources used"}),c.jsx("p",{className:"text-xs text-theme-1 mt-1",children:"This material was generated with help from the sources below. AI may be inaccurate or incomplete, so use these sources to fact-check and confirm important details."})]}),c.jsx("div",{className:"rounded-xl border border-theme divide-y overflow-auto",children:u.map(b=>{const C=loe(b),S=hoe(C),w=coe(b);return c.jsx("button",{onClick:()=>a({type:"source_highlight",source:b,highlight:t}),className:ge("group w-full text-left px-4 py-3","hover:bg-theme-1 transition"),children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"shrink-0 text-theme-1",children:c.jsx(S,{className:"h-4 w-4"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("div",{className:"truncate text-sm font-medium text-theme-link",children:b.name}),c.jsxs("div",{className:"mt-0.5 text-xs text-theme-1",children:[w,c.jsx("span",{className:"mx-1.5 opacity-40",children:""}),b.source==="course"?"Course upload":"External",c.jsx("span",{className:"mx-1.5 opacity-40",children:""}),"Added ",xb(b.created_at)]})]})]})},b.name)})})]})]}):c.jsx("div",{className:"flex h-full items-center justify-center",children:c.jsx(js,{className:"h-5 w-5 animate-spin text-theme-1"})})})]})}function Xct(){const{highlights:t,currentPage:e,navigatePage:n,removeHighlight:r}=os(),s=e.type==="highlight_category"?e.value:e.type==="source_highlight_category"?e.highlight_category:null,a=e.type==="highlight"?e.value:e.type==="source_highlight"?e.highlight:null;y.useMemo(()=>Ou.find(d=>d.id===s),[s]);const{navigatePage:i}=ut(),o=()=>{new URLSearchParams(window.location.search).get("return")?i(null,{}):n(e.type==="source_highlight"||e.type==="source_highlight_category"?{type:"source",value:e.source}:{type:"chat"})},l=d=>n({type:"highlight",value:d}),u=y.useMemo(()=>s?t.filter(d=>d.type===s):[],[t,s]);return a?c.jsx(Yct,{highlight:a,onBack:o,rightTopBar:e.type==="source_highlight"||e.type==="source_highlight_category"}):c.jsx(Kct,{category:s,items:u,onSelect:l,onBack:o,onDelete:r,rightTopBar:e.type==="source_highlight"||e.type==="source_highlight_category"})}function Jct({open:t,onCancel:e,courses:n,onConfirm:r,allowClickAway:s}){const[a,i]=y.useState(""),[o,l]=y.useState(null),u=6,d=n.slice(0,u-1),f=n.length>u,m=n.slice(u-1),g=()=>{i(""),l(null)},x=()=>{o&&(r({name:"Untitled Study Set",course:o}),g())},b=!o;return c.jsx(_c,{open:t,onOpenChange:()=>{s&&(l(null),e())},children:c.jsxs(Tc,{className:"animate-in fade-in-0 zoom-in-95 slide-in-from-top-2 duration-200",children:[c.jsx("div",{className:"pb-6 border-b-2 border-theme",children:c.jsx("div",{className:"flex items-start gap-4",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-2xl font-bold text-theme-0 tracking-tight",children:"Create Study Set"}),c.jsx("p",{className:"text-sm text-theme-1 mt-1.5 font-medium",children:"Choose the course you want to study for"})]})})}),c.jsx("div",{className:"py-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"text-sm font-bold text-theme-0 flex items-center gap-2",children:[c.jsx(wEe,{className:"h-4 w-4"}),"Select Course"]}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[d.map(C=>{const S=(o==null?void 0:o.id)===C.id;return c.jsx("button",{type:"button",onClick:()=>l(C),className:ge("relative rounded-xl transition-all duration-200 group","hover:scale-[1.02] active:scale-[0.98]",S&&"shadow-lg hover:shadow-lg"),children:c.jsxs("div",{className:ge("w-full h-full px-4 py-8 relative rounded-xl overflow-hidden border-2"),style:{borderColor:S?C.color:"transparent"},children:[c.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundColor:C.color,backgroundImage:`url(${C.img})`||"none"}}),c.jsx("div",{className:"relative z-10 flex flex-col items-center gap-3",children:c.jsx("span",{className:"line-clamp-2 text-sm font-bold text-theme-0 text-center leading-tight",children:C.code||C.default})}),S&&c.jsx("div",{className:"absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center shadow-md",style:{backgroundColor:C.color},children:c.jsx(or,{className:"h-3.5 w-3.5 text-white"})})]})},C.id)}),f&&c.jsx("div",{className:ge("rounded-xl border-2 transition-all duration-200 hover:border-theme hover:bg-theme-1 flex items-center justify-center",o&&n.indexOf(o)>=u-1?"shadow-lg":"hover:shadow-lg border-dashed"),style:{borderColor:o&&n.indexOf(o)>=u-1?o.color:"#cbd5e1"},children:c.jsxs(jo,{value:n.indexOf(o)>=u-1?(o==null?void 0:o.id.toString())??"":void 0,onValueChange:C=>l(n.find(S=>S.id.toString()===C)??null),children:[c.jsx(Do,{className:"h-full w-full border-none py-10 rounded-xl shadow-none flex items-center justify-center",withArrow:!1,children:c.jsxs("div",{className:"flex flex-row items-center gap-2",children:[c.jsx(Td,{placeholder:"Other course"}),c.jsx(oi,{className:"h-5 w-5 text-theme-1"})]})}),c.jsx(Ro,{children:m.map(C=>c.jsx(Xt,{value:C.id.toString(),children:c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"h-3 w-3 rounded-full shadow-sm",style:{backgroundColor:C.color||"#6366f1"}}),c.jsx("span",{className:"font-medium text-theme-0",children:C.code||C.default})]})},C.id))})]})})]})]})}),c.jsxs("div",{className:"flex justify-between pt-2",children:[c.jsx(vn,{className:"rounded-full shadow-none",variant:"outline",onClick:e,children:"Cancel"}),c.jsx(vn,{onClick:x,disabled:b,className:"bg-brand-gradient text-theme-0 rounded-full text-white",children:"Create Study Set"})]})]})})}function Qct(){const{currentPage:t,navigatePage:e}=os(),n=t.type==="source"?t.value:t.type==="source_highlight"||t.type==="source_highlight_category"?t.source:null;return n?c.jsx(KGe,{document:n,onBack:()=>e({type:"chat"})}):null}function Ir(t,e="Assertion error"){if(!t)throw Error(e)}function sv({group:t}){const{orientation:e,panels:n}=t;return n.reduce((r,s)=>(r+=e==="horizontal"?s.element.offsetWidth:s.element.offsetHeight,r),0)}function F7(t,e){return e.sort(t==="horizontal"?Zct:eut)}function Zct(t,e){const n=t.element.offsetLeft-e.element.offsetLeft;return n!==0?n:t.element.offsetWidth-e.element.offsetWidth}function eut(t,e){const n=t.element.offsetTop-e.element.offsetTop;return n!==0?n:t.element.offsetHeight-e.element.offsetHeight}function bhe(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function whe(t,e){return{x:t.x>=e.left&&t.x<=e.right?0:Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),y:t.y>=e.top&&t.y<=e.bottom?0:Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom))}}function tut({orientation:t,rects:e,targetRect:n}){const r={x:n.x+n.width/2,y:n.y+n.height/2};let s,a=Number.MAX_VALUE;for(const i of e){const{x:o,y:l}=whe(r,i),u=t==="horizontal"?o:l;u<a&&(a=u,s=i)}return Ir(s,"No rect found"),s}function Che(t){const{element:e,orientation:n,panels:r,separators:s}=t,a=F7(n,Array.from(e.children).filter(bhe).map(d=>({element:d}))).map(({element:d})=>d),i=[];let o=!1,l,u=[];for(const d of a)if(d.hasAttribute("data-panel")){const f=r.find(m=>m.element===d);if(f){if(l){const m=l.element.getBoundingClientRect(),g=d.getBoundingClientRect();let x;if(o){const b=n==="horizontal"?new DOMRect(m.right,m.top,0,m.height):new DOMRect(m.left,m.bottom,m.width,0),C=n==="horizontal"?new DOMRect(g.left,g.top,0,g.height):new DOMRect(g.left,g.top,g.width,0);switch(u.length){case 0:{x=[b,C];break}case 1:{const S=u[0],w=tut({orientation:n,rects:[m,g],targetRect:S.element.getBoundingClientRect()});x=[S,w===m?C:b];break}default:{x=u;break}}}else u.length?x=u:x=[n==="horizontal"?new DOMRect(m.right,g.top,g.left-m.right,g.height):new DOMRect(g.left,m.bottom,g.width,g.top-m.bottom)];for(const b of x)i.push({group:t,groupSize:sv({group:t}),panels:[l,f],separator:"width"in b?void 0:b,rect:"width"in b?b:b.element.getBoundingClientRect()})}o=!1,l=f,u=[]}}else if(d.hasAttribute("data-separator")){const f=s.find(m=>m.element===d);f?u.push(f):(l=void 0,u=[])}else o=!0;return i}function nut(t,e){const n=getComputedStyle(t),r=parseFloat(n.fontSize);return e*r}function rut(t,e){const n=getComputedStyle(t.ownerDocument.body),r=parseFloat(n.fontSize);return e*r}function sut(t){return t/100*window.innerHeight}function aut(t){return t/100*window.innerWidth}function iut(t){switch(typeof t){case"number":return[t,"px"];case"string":{const e=parseFloat(t);return t.endsWith("%")?[e,"%"]:t.endsWith("px")?[e,"px"]:t.endsWith("rem")?[e,"rem"]:t.endsWith("em")?[e,"em"]:t.endsWith("vh")?[e,"vh"]:t.endsWith("vw")?[e,"vw"]:[e,"%"]}}}function nS({groupSize:t,panelElement:e,styleProp:n}){let r;const[s,a]=iut(n);switch(a){case"%":{r=s/100*t;break}case"px":{r=s;break}case"rem":{r=rut(e,s);break}case"em":{r=nut(e,s);break}case"vh":{r=sut(s);break}case"vw":{r=aut(s);break}}return r}function sc(t){return parseFloat(t.toFixed(3))}function pK(t){const{panels:e}=t,n=sv({group:t});return n===0?e.map(r=>({collapsedSize:0,collapsible:r.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:r.id})):e.map(r=>{const{element:s,panelConstraints:a}=r;let i=0;if(a.collapsedSize!==void 0){const d=nS({groupSize:n,panelElement:s,styleProp:a.collapsedSize});i=sc(d/n*100)}let o;if(a.defaultSize!==void 0){const d=nS({groupSize:n,panelElement:s,styleProp:a.defaultSize});o=sc(d/n*100)}let l=0;if(a.minSize!==void 0){const d=nS({groupSize:n,panelElement:s,styleProp:a.minSize});l=sc(d/n*100)}let u=100;if(a.maxSize!==void 0){const d=nS({groupSize:n,panelElement:s,styleProp:a.maxSize});u=sc(d/n*100)}return{collapsedSize:i,collapsible:a.collapsible===!0,defaultSize:o,minSize:l,maxSize:u,panelId:r.id}})}var Xh;class out{constructor(){lm(this,Xh,{})}addListener(e,n){const r=qa(this,Xh)[e];return r===void 0?qa(this,Xh)[e]=[n]:r.includes(n)||r.push(n),()=>{this.removeListener(e,n)}}emit(e,n){const r=qa(this,Xh)[e];if(r!==void 0)if(r.length===1)r[0].call(null,n);else{let s=!1,a=null;const i=Array.from(r);for(let o=0;o<i.length;o++){const l=i[o];try{l.call(null,n)}catch(u){a===null&&(s=!0,a=u)}}if(s)throw a}}removeAllListeners(){cm(this,Xh,{})}removeListener(e,n){const r=qa(this,Xh)[e];if(r!==void 0){const s=r.indexOf(n);s>=0&&r.splice(s,1)}}}Xh=new WeakMap;function _i(t,e,n=0){return Math.abs(sc(t)-sc(e))<=n}let dl={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const Qm=new out;function kl(){return dl}function so(t){const e=typeof t=="function"?t(dl):t;if(dl===e)return dl;const n=dl;return dl={...dl,...e},e.cursorFlags!==void 0&&Qm.emit("cursorFlagsChange",dl.cursorFlags),e.interactionState!==void 0&&Qm.emit("interactionStateChange",dl.interactionState),e.mountedGroups!==void 0&&(dl.mountedGroups.forEach((r,s)=>{r.derivedPanelConstraints.forEach(a=>{if(a.collapsible){const{layout:i}=n.mountedGroups.get(s)??{};if(i){const o=_i(a.collapsedSize,r.layout[a.panelId]),l=_i(a.collapsedSize,i[a.panelId]);o&&!l&&(s.inMemoryLastExpandedPanelSizes[a.panelId]=i[a.panelId])}}})}),Qm.emit("mountedGroupsChange",dl.mountedGroups)),dl}function lut(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function bb(t,e){return _i(t,e)?0:t>e?1:-1}function og({panelConstraints:t,size:e}){const{collapsedSize:n=0,collapsible:r,maxSize:s=100,minSize:a=0}=t;if(bb(e,a)<0)if(r){const i=(n+a)/2;bb(e,i)<0?e=n:e=a}else e=a;return e=Math.min(s,e),e=sc(e),e}function wb({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:a}){if(_i(t,0))return e;const i=Object.values(e),o=Object.values(s),l=[...i],[u,d]=r;Ir(u!=null,"Invalid first pivot index"),Ir(d!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const x=t<0?d:u,b=n[x];Ir(b,`Panel constraints not found for index ${x}`);const{collapsedSize:C=0,collapsible:S,minSize:w=0}=b;if(S){const E=i[x];if(Ir(E!=null,`Previous layout not found for panel index ${x}`),_i(E,C)){const T=w-E;bb(T,Math.abs(t))>0&&(t=t<0?0-T:T)}}}{const x=t<0?u:d,b=n[x];Ir(b,`No panel constraints found for index ${x}`);const{collapsedSize:C=0,collapsible:S,minSize:w=0}=b;if(S){const E=i[x];if(Ir(E!=null,`Previous layout not found for panel index ${x}`),_i(E,w)){const T=E-C;bb(T,Math.abs(t))>0&&(t=t<0?0-T:T)}}}}{const x=t<0?1:-1;let b=t<0?d:u,C=0;for(;;){const w=i[b];Ir(w!=null,`Previous layout not found for panel index ${b}`);const E=og({panelConstraints:n[b],size:100})-w;if(C+=E,b+=x,b<0||b>=n.length)break}const S=Math.min(Math.abs(t),Math.abs(C));t=t<0?0-S:S}{let x=t<0?u:d;for(;x>=0&&x<n.length;){const b=Math.abs(t)-Math.abs(f),C=i[x];Ir(C!=null,`Previous layout not found for panel index ${x}`);const S=C-b,w=og({panelConstraints:n[x],size:S});if(!_i(C,w)&&(f+=C-w,l[x]=w,f.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?x--:x++}}if(lut(o,l))return s;{const x=t<0?d:u,b=i[x];Ir(b!=null,`Previous layout not found for panel index ${x}`);const C=b+f,S=og({panelConstraints:n[x],size:C});if(l[x]=S,!_i(S,C)){let w=C-S,E=t<0?d:u;for(;E>=0&&E<n.length;){const T=l[E];Ir(T!=null,`Previous layout not found for panel index ${E}`);const _=T+w,A=og({panelConstraints:n[E],size:_});if(_i(T,A)||(w-=A-T,l[E]=A),_i(w,0))break;t>0?E--:E++}}}const m=Object.values(l).reduce((x,b)=>b+x,0);if(!_i(m,100,.1))return s;const g=Object.keys(s);return l.reduce((x,b,C)=>(x[g[C]]=b,x),{})}function XS(t){const{mountedGroups:e}=kl();for(const[n]of e)if(n.separators.some(r=>r.element===t))return n;throw Error("Could not find parent Group for separator element")}function m0(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(e[n]===void 0||bb(t[n],e[n])!==0)return!1;return!0}function p0({layout:t,panelConstraints:e}){const n=[...Object.values(t)],r=n.reduce((i,o)=>i+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!_i(r,100)&&n.length>0)for(let i=0;i<e.length;i++){const o=n[i];Ir(o!=null,`No layout data found for index ${i}`);const l=100/r*o;n[i]=l}let s=0;for(let i=0;i<e.length;i++){const o=n[i];Ir(o!=null,`No layout data found for index ${i}`);const l=og({panelConstraints:e[i],size:o});o!=l&&(s+=o-l,n[i]=l)}if(!_i(s,0))for(let i=0;i<e.length;i++){const o=n[i];Ir(o!=null,`No layout data found for index ${i}`);const l=o+s,u=og({panelConstraints:e[i],size:l});if(o!==u&&(s-=u-o,n[i]=u,_i(s,0)))break}const a=Object.keys(t);return n.reduce((i,o,l)=>(i[a[l]]=o,i),{})}function She({groupId:t}){const e=()=>{const{mountedGroups:n}=kl();for(const[r,s]of n)if(r.id===t)return{group:r,...s};throw Error(`Could not find Group with id "${t}"`)};return{getLayout(){const{defaultLayoutDeferred:n,layout:r}=e();return n?{}:r},setLayout(n){const{defaultLayoutDeferred:r,derivedPanelConstraints:s,group:a,layout:i,separatorToPanels:o}=e(),l=p0({layout:n,panelConstraints:s});return r?i:(m0(i,l)||so(u=>({mountedGroups:new Map(u.mountedGroups).set(a,{defaultLayoutDeferred:r,derivedPanelConstraints:s,layout:l,separatorToPanels:o})})),l)}}}function khe(t){const{mountedGroups:e}=kl(),n=e.get(t);return Ir(n,`Mounted Group ${t.id} not found`),n}function Cm(t,e){const n=XS(t),r=khe(n),s=n.separators.find(d=>d.element===t);Ir(s,"Matching separator not found");const a=r.separatorToPanels.get(s);Ir(a,"Matching panels not found");const i=a.map(d=>n.panels.indexOf(d)),o=She({groupId:n.id}).getLayout(),l=wb({delta:e,initialLayout:o,panelConstraints:r.derivedPanelConstraints,pivotIndices:i,prevLayout:o,trigger:"keyboard"}),u=p0({layout:l,panelConstraints:r.derivedPanelConstraints});m0(o,u)||so(d=>({mountedGroups:new Map(d.mountedGroups).set(n,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:u,separatorToPanels:r.separatorToPanels})}))}function gK(t){if(t.defaultPrevented)return;const e=t.currentTarget,n=XS(e);if(!n.disabled)switch(t.key){case"ArrowDown":{t.preventDefault(),n.orientation==="vertical"&&Cm(e,5);break}case"ArrowLeft":{t.preventDefault(),n.orientation==="horizontal"&&Cm(e,-5);break}case"ArrowRight":{t.preventDefault(),n.orientation==="horizontal"&&Cm(e,5);break}case"ArrowUp":{t.preventDefault(),n.orientation==="vertical"&&Cm(e,-5);break}case"End":{t.preventDefault(),Cm(e,100);break}case"Enter":{t.preventDefault();const r=XS(e),{derivedPanelConstraints:s,layout:a,separatorToPanels:i}=khe(r),o=r.separators.find(f=>f.element===e);Ir(o,"Matching separator not found");const l=i.get(o);Ir(l,"Matching panels not found");const u=l[0],d=s.find(f=>f.panelId===u.id);if(Ir(d,"Panel metadata not found"),d.collapsible){const f=a[u.id],m=d.collapsedSize===f?r.inMemoryLastExpandedPanelSizes[u.id]??d.minSize:d.collapsedSize;Cm(e,m-f)}break}case"F6":{t.preventDefault();const r=XS(e).separators.map(i=>i.element),s=Array.from(r).findIndex(i=>i===t.currentTarget);Ir(s!==null,"Index not found");const a=t.shiftKey?s>0?s-1:r.length-1:s+1<r.length?s+1:0;r[a].focus();break}case"Home":{t.preventDefault(),Cm(e,-100);break}}}const cut=t=>t,ON=()=>{},Ehe=1,_he=2,The=4,Ahe=8,vK={coarse:10,precise:5};function uut(t,e,n){let r,s={x:1/0,y:1/0};for(const a of e){const i=whe(n,a.rect);switch(t){case"horizontal":{i.x<=s.x&&(r=a,s=i);break}case"vertical":{i.y<=s.y&&(r=a,s=i);break}}}return r?{distance:s,hitRegion:r}:void 0}let rS;function dut(){return rS===void 0&&(typeof matchMedia=="function"?rS=!!matchMedia("(pointer:coarse)").matches:rS=!1),rS}function hut(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function fut(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:bK(t),b:bK(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Ir(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:xK(yK(n.a)),b:xK(yK(n.b))};if(s.a===s.b){const a=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let o=a.length;for(;o--;){const l=a[o];if(l===i.a)return 1;if(l===i.b)return-1}}return Math.sign(s.a-s.b)}const mut=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function put(t){const e=getComputedStyle(Nhe(t)??t).display;return e==="flex"||e==="inline-flex"}function gut(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||put(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||mut.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function yK(t){let e=t.length;for(;e--;){const n=t[e];if(Ir(n,"Missing node"),gut(n))return n}return null}function xK(t){return t&&Number(getComputedStyle(t).zIndex)||0}function bK(t){const e=[];for(;t;)e.push(t),t=Nhe(t);return e}function Nhe(t){const{parentNode:e}=t;return hut(e)?e.host:e}function vut(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function yut({groupElement:t,hitRegion:e,pointerEventTarget:n}){if(!bhe(n)||n.contains(t)||t.contains(n))return!0;if(fut(n,t)>0){let r=n;for(;r;){if(r.contains(t))return!0;if(vut(r.getBoundingClientRect(),e))return!1;r=r.parentElement}}return!0}function jhe(t,e){const n=[];return e.forEach((r,s)=>{if(s.disabled)return;const a=dut()?vK.coarse:vK.precise,i=Che(s),o=uut(s.orientation,i,{x:t.clientX,y:t.clientY});o&&o.distance.x<=a&&o.distance.y<=a&&yut({groupElement:s.element,hitRegion:o.hitRegion.rect,pointerEventTarget:t.target})&&n.push(o.hitRegion)}),n}function wK(t){if(t.defaultPrevented||t.pointerType==="mouse"&&t.button>0)return;const{mountedGroups:e}=kl(),n=jhe(t,e),r=new Set,s=new Set,a=new Set,i=new Map;let o=!1;n.forEach(l=>{r.add(l.group),l.panels.forEach(d=>{s.add(d)}),l.separator&&(a.add(l.separator),o||(o=!0,l.separator.element.focus()));const u=e.get(l.group);u&&i.set(l.group,u.layout)}),so({interactionState:{hitRegions:n,initialLayoutMap:i,pointerDownAtPoint:{x:t.clientX,y:t.clientY},state:"active"}}),n.length&&t.preventDefault()}function xut({cursorFlags:t,groups:e,state:n}){let r=0,s=0;switch(n){case"active":case"hover":e.forEach(a=>{if(!a.disableCursor)switch(a.orientation){case"horizontal":{r++;break}case"vertical":{s++;break}}})}if(r===0&&s===0)return null;switch(n){case"active":{const a=(t&Ehe)!==0,i=(t&_he)!==0,o=(t&The)!==0,l=(t&Ahe)!==0;if(t){if(a)return o?"se-resize":l?"ne-resize":"e-resize";if(i)return o?"sw-resize":l?"nw-resize":"w-resize";if(o)return"s-resize";if(l)return"n-resize"}break}}return r>0&&s>0?"move":r>0?"ew-resize":"ns-resize"}const CK=new WeakMap;function _O(t){if(t.defaultView===null||t.defaultView===void 0)return;let{prevStyle:e,styleSheet:n}=CK.get(t)??{};n===void 0&&(n=new t.defaultView.CSSStyleSheet,t.adoptedStyleSheets=[n]);const{cursorFlags:r,interactionState:s}=kl();switch(s.state){case"active":case"hover":{const a=xut({cursorFlags:r,groups:s.hitRegions.map(o=>o.group),state:s.state}),i=`*{cursor: ${a} !important; ${s.state==="active"?"touch-action: none;":""} }`;if(e===i)return;e=i,a?n.cssRules.length===0?n.insertRule(i):n.replaceSync(i):n.cssRules.length===1&&n.deleteRule(0);break}case"inactive":{e=void 0,n.cssRules.length===1&&n.deleteRule(0);break}}CK.set(t,{prevStyle:e,styleSheet:n})}function Dhe({document:t,event:e,hitRegions:n,initialLayoutMap:r,mountedGroups:s,pointerDownAtPoint:a}){let i=0;const o=new Map(s);n.forEach(l=>{const{group:u,groupSize:d}=l,{disableCursor:f,orientation:m,panels:g}=u;let x=0;a?m==="horizontal"?x=(e.clientX-a.x)/d*100:x=(e.clientY-a.y)/d*100:m==="horizontal"?x=e.clientX<0?-100:100:x=e.clientY<0?-100:100;const b=r.get(u),{defaultLayoutDeferred:C,derivedPanelConstraints:S,layout:w,separatorToPanels:E}=s.get(u)??{defaultLayoutDeferred:!1};if(S&&b&&w&&E){const T=wb({delta:x,initialLayout:b,panelConstraints:S,pivotIndices:l.panels.map(_=>g.indexOf(_)),prevLayout:w,trigger:"mouse-or-touch"});if(m0(T,w)){if(x!==0&&!f)switch(m){case"horizontal":{i|=x<0?Ehe:_he;break}case"vertical":{i|=x<0?The:Ahe;break}}}else{o.set(l.group,{defaultLayoutDeferred:C,derivedPanelConstraints:S,layout:T,separatorToPanels:E});const _=l.group.panels.map(({id:A})=>A).join(",");l.group.inMemoryLayouts[_]=T}}}),so({cursorFlags:i,mountedGroups:o}),_O(t)}function SK(t){const{interactionState:e,mountedGroups:n}=kl();switch(e.state){case"active":Dhe({document:t.currentTarget,event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n})}}function kK(t){if(t.defaultPrevented)return;const{interactionState:e,mountedGroups:n}=kl();switch(e.state){case"active":{if(t.buttons===0){so(r=>r.interactionState.state==="inactive"?r:{cursorFlags:0,interactionState:{state:"inactive"}}),so(r=>({mountedGroups:new Map(r.mountedGroups)}));return}Dhe({document:t.currentTarget,event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:e.pointerDownAtPoint});break}default:{const r=jhe(t,n);r.length===0?e.state!=="inactive"&&so({interactionState:{state:"inactive"}}):so({interactionState:{hitRegions:r,state:"hover"}}),_O(t.currentTarget);break}}}function EK(t){if(t.defaultPrevented||t.pointerType==="mouse"&&t.button>0)return;const{interactionState:e}=kl();switch(e.state){case"active":so({cursorFlags:0,interactionState:{state:"inactive"}}),e.hitRegions.length>0&&(_O(t.currentTarget),so(n=>({mountedGroups:new Map(n.mountedGroups)})),t.preventDefault())}}function _K(t){let e=0,n=0;const r={};for(const a of t)if(a.defaultSize!==void 0){e++;const i=sc(a.defaultSize);n+=i,r[a.panelId]=i}else r[a.panelId]=void 0;const s=t.length-e;if(s!==0){const a=sc((100-n)/s);for(const i of t)i.defaultSize===void 0&&(r[i.panelId]=a)}return r}function but(t,e,n){if(!n[0])return;const r=t.panels.find(l=>l.element===e);if(!r||!r.onResize)return;const s=sv({group:t}),a=t.orientation==="horizontal"?r.element.offsetWidth:r.element.offsetHeight,i=r.mutableValues.prevSize,o={asPercentage:sc(a/s*100),inPixels:a};r.mutableValues.prevSize=o,r.onResize(o,r.id,i)}function wut(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Cut(t,e){const n=t.map(s=>s.id),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s))return!1;return!0}const zp=new Map;function Sut(t){let e=!0;Ir(t.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const n=t.element.ownerDocument.defaultView.ResizeObserver,r=new Set,s=new Set,a=new n(x=>{for(const b of x){const{borderBoxSize:C,target:S}=b;if(S===t.element){if(e){if(sv({group:t})===0)return;so(w=>{const E=w.mountedGroups.get(t);if(E){const T=pK(t),_=E.defaultLayoutDeferred?_K(T):E.layout,A=p0({layout:_,panelConstraints:T});return!E.defaultLayoutDeferred&&m0(_,A)&&wut(E.derivedPanelConstraints,T)?w:{mountedGroups:new Map(w.mountedGroups).set(t,{defaultLayoutDeferred:!1,derivedPanelConstraints:T,layout:A,separatorToPanels:E.separatorToPanels})}}return w})}}else but(t,S,C)}});a.observe(t.element),t.panels.forEach(x=>{Ir(!r.has(x.id),`Panel ids must be unique; id "${x.id}" was used more than once`),r.add(x.id),x.onResize&&a.observe(x.element)});const i=sv({group:t}),o=pK(t),l=t.panels.map(({id:x})=>x).join(",");let u=t.defaultLayout;u&&(Cut(t.panels,u)||(u=void 0));const d=t.inMemoryLayouts[l]??u??_K(o),f=p0({layout:d,panelConstraints:o}),m=Che(t),g=t.element.ownerDocument;return so(x=>{const b=new Map;return zp.set(g,(zp.get(g)??0)+1),m.forEach(C=>{C.separator&&b.set(C.separator,C.panels)}),{mountedGroups:new Map(x.mountedGroups).set(t,{defaultLayoutDeferred:i===0,derivedPanelConstraints:o,layout:f,separatorToPanels:b})}}),t.separators.forEach(x=>{Ir(!s.has(x.id),`Separator ids must be unique; id "${x.id}" was used more than once`),s.add(x.id),x.element.addEventListener("keydown",gK)}),zp.get(g)===1&&(g.addEventListener("pointerdown",wK,!0),g.addEventListener("pointerleave",SK),g.addEventListener("pointermove",kK),g.addEventListener("pointerup",EK,!0)),function(){e=!1,zp.set(g,Math.max(0,(zp.get(g)??0)-1)),so(x=>{const b=new Map(x.mountedGroups);return b.delete(t),{mountedGroups:b}}),t.separators.forEach(x=>{x.element.removeEventListener("keydown",gK)}),zp.get(g)||(g.removeEventListener("pointerdown",wK,!0),g.removeEventListener("pointerleave",SK),g.removeEventListener("pointermove",kK),g.removeEventListener("pointerup",EK,!0)),a.disconnect()}}function Rhe(){const[t,e]=y.useState({}),n=y.useCallback(()=>e({}),[]);return[t,n]}function TO(t){const e=y.useId();return`${t??e}`}const O0=typeof window<"u"?y.useLayoutEffect:y.useEffect;function a1(t){const e=y.useRef(t);return O0(()=>{e.current=t},[t]),y.useCallback((...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[e])}function AO(...t){return a1(e=>{t.forEach(n=>{if(n)switch(typeof n){case"function":{n(e);break}case"object":{n.current=e;break}}})})}function kut(t){const e=y.useRef({...t});return O0(()=>{for(const n in t)e.current[n]=t[n]},[t]),e.current}const Mhe=y.createContext(null);function Eut(t,e){const n=y.useRef({getLayout:()=>({}),setLayout:cut});y.useImperativeHandle(e,()=>n.current,[]),O0(()=>{Object.assign(n.current,She({groupId:t}))})}function Ihe({children:t,className:e,defaultLayout:n,disableCursor:r,disabled:s,elementRef:a,groupRef:i,id:o,onLayoutChange:l,onLayoutChanged:u,orientation:d="horizontal",style:f,...m}){const g=y.useRef({onLayoutChange:{},onLayoutChanged:{}}),x=a1(F=>{m0(g.current.onLayoutChange,F)||(g.current.onLayoutChange=F,l==null||l(F))}),b=a1(F=>{m0(g.current.onLayoutChanged,F)||(g.current.onLayoutChanged=F,u==null||u(F))}),C=TO(o),S=y.useRef(null),[w,E]=Rhe(),T=y.useRef({lastExpandedPanelSizes:{},layouts:{},panels:[],separators:[]}),_=AO(S,a);Eut(C,i);const A=a1((F,R)=>{const{interactionState:L,mountedGroups:O}=kl();for(const H of O.keys())if(H.id===F){const P=O.get(H);if(P){let I=!1;switch(L.state){case"active":{I=L.hitRegions.some(U=>U.group===H);break}}return{flexGrow:P.layout[R]??1,pointerEvents:I?"none":void 0}}}return{flexGrow:(n==null?void 0:n[R])??1}}),j=y.useMemo(()=>({getPanelStyles:A,id:C,orientation:d,registerPanel:F=>{const R=T.current;return R.panels=F7(d,[...R.panels,F]),E(),()=>{R.panels=R.panels.filter(L=>L!==F),E()}},registerSeparator:F=>{const R=T.current;return R.separators=F7(d,[...R.separators,F]),E(),()=>{R.separators=R.separators.filter(L=>L!==F),E()}}}),[A,C,E,d]),D=kut({defaultLayout:n,disableCursor:r}),z=y.useRef(null);return O0(()=>{const F=S.current;if(F===null)return;const R=T.current,L={defaultLayout:D.defaultLayout,disableCursor:!!D.disableCursor,disabled:!!s,element:F,id:C,inMemoryLastExpandedPanelSizes:T.current.lastExpandedPanelSizes,inMemoryLayouts:T.current.layouts,orientation:d,panels:R.panels,separators:R.separators};z.current=L;const O=Sut(L),H=kl().mountedGroups.get(L);if(H){const{defaultLayoutDeferred:U,derivedPanelConstraints:W,layout:Y}=H;!U&&W.length>0&&(x(Y),b(Y),R.panels.forEach(B=>{B.scheduleUpdate()}))}const P=Qm.addListener("interactionStateChange",()=>{R.panels.forEach(U=>{U.scheduleUpdate()})}),I=Qm.addListener("mountedGroupsChange",U=>{const W=U.get(L);if(W){const{defaultLayoutDeferred:Y,derivedPanelConstraints:B,layout:Z}=W;if(Y||B.length===0)return;const{interactionState:le}=kl(),G=le.state!=="active";x(Z),G&&b(Z),R.panels.forEach(K=>{K.scheduleUpdate()})}});return()=>{z.current=null,O(),P(),I()}},[s,C,b,x,d,w,D]),y.useEffect(()=>{const F=z.current;F&&(F.defaultLayout=n,F.disableCursor=!!r)}),c.jsx(Mhe.Provider,{value:j,children:c.jsx("div",{...m,"aria-orientation":d,className:e,"data-group":!0,"data-testid":C,id:C,ref:_,style:{height:"100%",width:"100%",overflow:"hidden",...f,display:"flex",flexDirection:d==="horizontal"?"row":"column",flexWrap:"nowrap"},children:t})})}Ihe.displayName="Group";function NO(){const t=y.useContext(Mhe);return Ir(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function _ut({groupId:t,panelId:e}){const n=()=>{const{mountedGroups:o}=kl();for(const[l,{defaultLayoutDeferred:u,derivedPanelConstraints:d,layout:f,separatorToPanels:m}]of o)if(l.id===t)return{defaultLayoutDeferred:u,derivedPanelConstraints:d,group:l,layout:f,separatorToPanels:m};throw Error(`Group ${t} not found`)},r=()=>{const o=n().derivedPanelConstraints.find(l=>l.panelId===e);if(o!==void 0)return o;throw Error(`Panel constraints not found for Panel ${e}`)},s=()=>{const o=n().group.panels.find(l=>l.id===e);if(o!==void 0)return o;throw Error(`Layout not found for Panel ${e}`)},a=()=>{const o=n().layout[e];if(o!==void 0)return o;throw Error(`Layout not found for Panel ${e}`)},i=o=>{const l=a();if(o===l)return;const{defaultLayoutDeferred:u,derivedPanelConstraints:d,group:f,layout:m,separatorToPanels:g}=n(),x=f.panels.findIndex(w=>w.id===e),b=x===f.panels.length-1,C=wb({delta:b?l-o:o-l,initialLayout:m,panelConstraints:d,pivotIndices:b?[x-1,x]:[x,x+1],prevLayout:m,trigger:"imperative-api"}),S=p0({layout:C,panelConstraints:d});m0(m,S)||so(w=>({mountedGroups:new Map(w.mountedGroups).set(f,{defaultLayoutDeferred:u,derivedPanelConstraints:d,layout:S,separatorToPanels:g})}))};return{collapse:()=>{const{collapsible:o,collapsedSize:l}=r(),{mutableValues:u}=s(),d=a();o&&d!==l&&(u.expandToSize=d,i(l))},expand:()=>{const{collapsible:o,collapsedSize:l,minSize:u}=r(),{mutableValues:d}=s(),f=a();if(o&&f===l){let m=d.expandToSize??u;m===0&&(m=1),i(m)}},getSize:()=>{const{group:o}=n(),l=a(),{element:u}=s(),d=o.orientation==="horizontal"?u.offsetWidth:u.offsetHeight;return{asPercentage:l,inPixels:d}},isCollapsed:()=>{const{collapsible:o,collapsedSize:l}=r(),u=a();return o&&_i(l,u)},resize:o=>{if(a()!==o){let l;switch(typeof o){case"number":{const{group:u}=n(),d=sv({group:u});l=sc(o/d*100);break}case"string":{l=parseFloat(o);break}}i(l)}}}}function Tut(t,e){const{id:n}=NO(),r=y.useRef({collapse:ON,expand:ON,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:ON});y.useImperativeHandle(e,()=>r.current,[]),O0(()=>{Object.assign(r.current,_ut({groupId:n,panelId:t}))})}function Ohe({children:t,className:e,collapsedSize:n="0%",collapsible:r=!1,defaultSize:s,elementRef:a,id:i,maxSize:o="100%",minSize:l="0%",onResize:u,panelRef:d,style:f,...m}){const g=!!i,x=TO(i),b=y.useRef(null),C=AO(b,a),[,S]=Rhe(),{getPanelStyles:w,id:E,registerPanel:T}=NO(),_=u!==null,A=a1((D,z,F)=>{u==null||u(D,i,F)});O0(()=>{const D=b.current;if(D!==null)return T({element:D,id:x,idIsStable:g,mutableValues:{expandToSize:void 0,prevSize:void 0},onResize:_?A:void 0,panelConstraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:o,minSize:l},scheduleUpdate:S})},[n,r,s,S,_,x,g,o,l,A,T]),Tut(x,d);const j=w(E,x);return c.jsx("div",{...m,"data-panel":!0,"data-testid":x,id:x,ref:C,style:{...Aut,flexBasis:0,flexShrink:1,overflow:"hidden",...j},children:c.jsx("div",{className:e,style:{width:"100%",height:"100%",...f},children:t})})}Ohe.displayName="Panel";const Aut={minHeight:0,maxHeight:"100%",height:"auto",minWidth:0,maxWidth:"100%",width:"auto",border:"none",borderWidth:0,padding:0,margin:0};function Nut({layout:t,panelConstraints:e,panelId:n,panelIndex:r}){let s,a;const i=t[n],o=e.find(l=>l.panelId===n);if(o){const l=o.maxSize,u=a=o.collapsible?o.collapsedSize:o.minSize,d=[r,r+1];a=p0({layout:wb({delta:u-i,initialLayout:t,panelConstraints:e,pivotIndices:d,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n],s=p0({layout:wb({delta:l-i,initialLayout:t,panelConstraints:e,pivotIndices:d,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n]}return{valueControls:n,valueMax:s,valueMin:a,valueNow:i}}function Phe({children:t,className:e,elementRef:n,id:r,style:s,...a}){const i=TO(r),[o,l]=y.useState({}),[u,d]=y.useState("inactive"),f=y.useRef(null),m=AO(f,n),{id:g,orientation:x,registerSeparator:b}=NO(),C=x==="horizontal"?"vertical":"horizontal";return O0(()=>{const S=f.current;if(S!==null){const w={element:S,id:i},E=b(w),T=Qm.addListener("interactionStateChange",A=>{d(A.state!=="inactive"&&A.hitRegions.some(j=>j.separator===w)?A.state:"inactive")}),_=Qm.addListener("mountedGroupsChange",A=>{A.forEach(({derivedPanelConstraints:j,layout:D,separatorToPanels:z},F)=>{if(F.id===g){const R=z.get(w);if(R){const L=R[0],O=F.panels.indexOf(L);l(Nut({layout:D,panelConstraints:j,panelId:L.id,panelIndex:O}))}}})});return()=>{T(),_(),E()}}},[g,i,b]),c.jsx("div",{...a,"aria-controls":o.valueControls,"aria-orientation":C,"aria-valuemax":o.valueMax,"aria-valuemin":o.valueMin,"aria-valuenow":o.valueNow,children:t,className:e,"data-separator":u,"data-testid":i,id:i,ref:m,role:"separator",style:{flexBasis:"auto",...s,flexGrow:0,flexShrink:0},tabIndex:0})}Phe.displayName="Separator";function jut({className:t,...e}){return c.jsx(Ihe,{"data-slot":"resizable-panel-group",className:ge("flex h-full w-full aria-[orientation=vertical]:flex-col",t),...e})}function PN({...t}){return c.jsx(Ohe,{"data-slot":"resizable-panel",...t})}function Dut({withHandle:t,className:e,...n}){return c.jsx(Phe,{"data-slot":"resizable-handle",className:ge("relative flex items-center justify-center bg-theme-2","focus-visible:ring-ring focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden","after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2","aria-[orientation=vertical]:h-auto aria-[orientation=vertical]:w-px","aria-[orientation=horizontal]:h-px aria-[orientation=horizontal]:w-full","aria-[orientation=vertical]:after:left-0 aria-[orientation=vertical]:after:h-1 aria-[orientation=vertical]:after:w-full aria-[orientation=vertical]:after:translate-x-0 aria-[orientation=vertical]:after:-translate-y-1/2","[&[aria-orientation=horizontal]>div]:rotate-90",e),...n,children:t&&c.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border border-theme",children:c.jsx(EEe,{className:"size-2.5"})})})}function Rut({open:t,courses:e,onClose:n,uploadSource:r,init:s}){var O;const{notebook:a,sources:i,courseFiles:o,loadingSources:l}=os(),{limits:u}=XM(),d=(O=e.find(H=>H.id.toString()===a.course_id))==null?void 0:O.default,[f,m]=y.useState([]),[g,x]=y.useState([]),[b,C]=y.useState("main"),[S,w]=y.useState("course"),E=y.useMemo(()=>u.supportedTypes.map(H=>H.mime),[u]),T=u.supportedTypes.map(H=>H.extensions.join(", ")),_=u.maxFileSize;y.useEffect(()=>{if(!l&&o.length>0&&i.length===0){const H=[...o].filter(P=>E.includes(P.metadata.content_type)&&uoe(P)<=_&&!i.find(I=>"canvas_file_id"in I.metadata&&I.metadata.canvas_file_id==P.metadata.canvas_file_id)).sort((P,I)=>{var G,K;const U=(G=P.metadata)==null?void 0:G.content_type,W=(K=I.metadata)==null?void 0:K.content_type,Y=U&&U in ef?ef[U]:Number.MAX_SAFE_INTEGER,B=W&&W in ef?ef[W]:Number.MAX_SAFE_INTEGER;if(Y!==B)return Y-B;const Z=new Date(P.metadata.created_at).getTime();return new Date(I.metadata.created_at).getTime()-Z});H.length>0&&m(H.slice(0,1))}},[l,i,o,E,_]);const A=async()=>{console.log("uploading",D,z,F),D.forEach(r),z.forEach(r),F.forEach(H=>r(H)),j()};function j(){m([]),x([]),n(),setTimeout(()=>{C("main")},300)}const D=f.filter(Yde),z=f.filter(Bw),F=f.filter(Lw);y.useEffect(()=>{(z.length||F.length)&&A()},[z,F]);const R=S==="own"&&z.length===0&&F.length===0||S==="course"&&D.length===0,L=l?0:f.length;return c.jsx(_c,{open:t,onOpenChange:H=>{H||j()},children:c.jsx(Tc,{className:"bg-theme-0 overflow-y-scroll max-h-screen sm:max-w-[600px]",children:b==="main"?c.jsxs(c.Fragment,{children:[c.jsx(_0,{children:c.jsxs(rw,{className:"text-left",children:[c.jsx("div",{className:"text-sm text-theme-2 mb-1",children:d}),c.jsx("div",{className:"text-2xl font-semibold",children:i.length?"Add sources to your study set":"Let's build your study set"}),c.jsx("div",{className:"text-sm font-normal text-theme-1 mt-1",children:"Select or upload some files. We'll use these to create your personalized study materials!"})]})}),c.jsxs(kO,{value:S,className:"w-full min-w-0",children:[c.jsxs(EO,{className:"mx-auto mb-2",children:[c.jsxs(rv,{value:"course",onClick:()=>w("course"),children:[c.jsx(wu,{}),"Class files"]}),c.jsx(rv,{value:"own",onClick:()=>w("own"),children:"Add your own"})]}),c.jsx(nv,{value:"course",className:"w-full min-w-0",children:l?c.jsx("div",{className:"flex h-40 items-center justify-center",children:c.jsx(js,{className:"h-6 w-6 animate-spin text-theme-2"})}):c.jsx(QGe,{allowedMimeTypes:E,maxFileSizeBytes:_,sources:i,files:o,selected:D,setSelected:m})}),c.jsx(nv,{value:"own",className:"space-y-4 w-full",children:c.jsx(vhe,{allowedMimeTypes:E,allowedFileExtensions:T,maxFileSizeBytes:_,selectedSources:f,setSelectedSources:m,invalidFiles:g,setInvalidFiles:x,onOpenLinkDialog:()=>C("link"),onOpenPasteTextDialog:()=>C("text")})})]}),i.length===0&&c.jsxs("div",{className:ge("flex items-center gap-2 rounded-lg border px-3 py-2","bg-emerald-200/80 text-emerald-900 border-emerald-300","text-xs leading-snug"),children:[c.jsx(S0,{className:"h-3.5 w-3.5 flex-shrink-0 text-emerald-900"}),c.jsx("span",{children:L>0?`Using ${L} selected ${L===1?"source":"sources"} to create your study set. You can always add more later.`:"Select or upload at least one source to get started"})]}),c.jsxs("div",{className:"flex justify-between pt-4",children:[s?c.jsx("div",{}):c.jsx(vn,{variant:"outline",onClick:j,children:"Back"}),c.jsx(vn,{onClick:A,disabled:R,className:"bg-brand-gradient text-black hover:scale-110 transition",children:"Continue"})]})]}):b==="link"?c.jsx(yhe,{onBack:()=>C("main"),onClose:j,selectedSources:f,setSelectedSources:m}):c.jsx(xhe,{onBack:()=>C("main"),onClose:j,onAddFile:H=>{m(P=>[...P,H])}})})})}function Mut({courses:t,createNotebook:e}){const{notebook:n,notebooks:r,setNotebook:s,sources:a,highlights:i,addSource:o,selectedSources:l,editNotebook:u,createFlowStep:d,setCreateFlowStep:f,currentPage:m,removeSource:g,editSource:x,navigatePage:b,addSelectedSource:C,removeSelectedSource:S}=os(),{sendMessageAndListen:w,openGate:E}=ut(),{abBucket:T}=wa();y.useEffect(()=>{const K=new URLSearchParams(window.location.search),te=K.get("document_id"),ie=K.get("highlight_id");if(te&&!ie){const de=a.find(fe=>fe.id.toString()===te);de&&b({type:"source",value:de})}if(te&&ie){const de=i.find(se=>se.id.toString()===ie),fe=a.find(se=>se.id.toString()===te);de&&fe&&b({type:"source_highlight",highlight:de,source:fe})}},[]);async function _(K){const te=Ts.loading("Processing uploaded file",{description:c.jsx("span",{className:"text-theme-1",children:K.name})}),ie=await gq({body:{file:K,name:K.name,source:"user_upload",visibility:"private",notebook_id:n.id,metadata:JSON.stringify({size:K.size,content_type:K.type})},path:{id:n.id.toString()}});if(Ts.dismiss(te),ie.error){ie.response.status===402?E("study_files"):Ts.error(`Error processing ${K.name}`,{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(ie.error)})});return}Ts.success("File added",{description:c.jsx("span",{className:"text-theme-1",children:K.name})}),o(ie.data)}async function A(K){const te=Ts.loading("Processing uploaded URL",{description:c.jsx("span",{className:"text-theme-1",children:K})});let ie=await w({type:"CALL_EXTENSION_FUNC",payload:{func:"uploadStudyDocumentLink",args:{url:K,notebook:n.id}}});if(ie.error&&ie.error==="Unknown function"&&(ie=await gq({body:{url:K,name:K,source:"user_upload",visibility:"private",notebook_id:n.id,metadata:JSON.stringify({size:K.length,content_type:"text/html",url:K})},path:{id:n.id.toString()}})),Ts.dismiss(te),ie.error){"response"in ie&&ie.response.status===402?E("study_files"):Ts.error(`Error processing ${K}`,{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(ie.error)})});return}Ts.success("File added",{description:c.jsx("span",{className:"text-theme-1",children:K})}),o(ie.data)}async function j(K){const te=Ts.loading("Processing uploaded file",{description:c.jsx("span",{className:"text-theme-1",children:K.name})}),ie=await w({type:"CALL_EXTENSION_FUNC",payload:{func:"uploadStudyDocument",args:{document:K,notebook:n.id}}});if(Ts.dismiss(te),!ie.data||!ie.success){ie.status===402?E("study_files"):Ts.error("Failed to process course document.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(ie.error)})});return}Ts.success("File added",{description:c.jsx("span",{className:"text-theme-1",children:K.name})}),o(ie.data)}async function D(K){return Lw(K)?await A(K.url):Bw(K)?await _(K):await j(K)}const z=K=>{l.includes(K)?S(K):C(K)};function F(K){u({...n,name:K})}const R=y.useCallback(()=>n?I7(n.id.toString(),l):I7("undefined_notebook",[]),[n,l]),L=cce(R(),{}),O=y.useCallback(K=>{L.thread.reset(),s(K)},[L]),H=y.useCallback(K=>{L.thread.reset(),e(K)},[L]),P=d==="course",I=n&&P,U=d==="files"||d==="files_init",W=()=>{f("done")},Y=m.type==="source"||m.type==="source_highlight"||m.type==="source_highlight_category",B=m.type==="source"||m.type==="chat",Z=m.type==="highlight"||m.type==="highlight_category"||m.type==="source_highlight"||m.type==="source_highlight_category",le=T.upload_source_modal_v2<50?0:1,G=[Gct,Rut][le];return c.jsxs("div",{className:"h-full flex",children:[c.jsx(n5,{className:"h-full",children:c.jsxs(oce,{runtime:L,children:[c.jsxs(n5,{children:[c.jsx(ZGe,{sources:a,selectedSources:l,onSourceToggle:z,openUploadModal:()=>f("files"),courses:t,notebooks:r,openedSource:m.type==="source"?m.value:m.type==="source_highlight"||m.type==="source_highlight_category"?m.source:null,selectedNotebook:n,onNotebookChange:O,openLanding:()=>f("landing"),enterCreateFlow:()=>f("course"),onSourceOpen:K=>{C(K),b({type:"source",value:K})},onSourceRemove:g,onSourceRename:x}),c.jsx("div",{className:"relative h-full w-full bg-theme-0",children:c.jsxs(jut,{children:[Y&&c.jsxs(c.Fragment,{children:[c.jsx(PN,{defaultSize:50,minSize:30,children:c.jsx("div",{className:"h-full",children:c.jsx(Qct,{})})}),c.jsx(Dut,{withHandle:!0})]}),B&&c.jsx(PN,{defaultSize:20,minSize:20,children:c.jsx("div",{className:ge(!Y&&"absolute inset-0 transition-opacity duration-200","opacity-100 h-full"),children:c.jsx(ehe,{notebookName:(n==null?void 0:n.name)||"Untitled Study Set",selectedSourcesCount:l.length,totalSourcesCount:a.length,runtime:L,onRenameNotebook:F,showSidebarTrigger:!Y})})}),Z&&c.jsx(PN,{defaultSize:80,minSize:50,className:"bc-resizable-panel-container",children:c.jsx("div",{className:ge(!Y&&"absolute inset-0 transition-opacity duration-200 h-full","opacity-100 h-full"),children:c.jsx(Xct,{})})})]})})]}),c.jsx(jlt,{})]})}),c.jsx(Jct,{courses:t,open:P,allowClickAway:I,onConfirm:H,onCancel:()=>f(I?"done":"landing")}),n&&c.jsx(G,{open:U,onClose:W,courses:t,uploadSource:D,init:d==="files_init"})]})}const Iut=()=>{const[t,e]=y.useState(0),[n,r]=y.useState([0]),s=[],a=[{name:"Flashcards",icon:PEe,gradient:"from-emerald-400 to-emerald-600",bg:"bg-emerald-400/10",border:"border-emerald-300",text:"text-emerald-700"},{name:"Practice Quiz",icon:gZ,gradient:"from-orange-400 to-orange-600",bg:"bg-orange-400/10",border:"border-orange-300",text:"text-orange-700"},{name:"Lecture Summary",icon:fi,gradient:"from-blue-400 to-blue-600",bg:"bg-blue-400/10",border:"border-blue-300",text:"text-blue-700"}],[i,o]=y.useState("idle");y.useEffect(()=>{const u=setInterval(()=>{o("converting"),setTimeout(()=>{e(d=>(d+1)%a.length),r(d=>[(d[0]+1)%a.length,...d].slice(0,3)),o("idle")},500)},2500);return()=>clearInterval(u)},[]);const l=i==="converting";return c.jsxs("div",{className:"w-full flex items-center justify-center hidden md:block",children:[c.jsxs("div",{className:"absolute right-20 -top-15 max-w-2xl h-full flex flex-col items-center justify-center",children:[c.jsx("div",{className:"relative mb-8",children:c.jsxs("div",{className:"relative ml-10 h-20 w-72 flex items-center justify-center",children:[s.map((u,d)=>{const m=(d-1)*12,g=d==1?"20px":"12px",x=u.icon;return c.jsxs("div",{className:"absolute flex flex-col items-center",style:{left:`${30+d*70}px`,top:g,transform:`rotate(${m}deg)`,zIndex:3-d},children:[c.jsxs("div",{className:"relative",children:[c.jsx(x,{className:"w-16 h-16 text-theme-2",strokeWidth:1.2}),c.jsx("div",{className:"absolute -bottom-1 right-1 w-6 h-6 flex items-center justify-center font-semibold rounded-sm shadow-sm bg-red-400 text-white",children:c.jsx(wu,{})})]}),c.jsx("div",{className:"mt-1 text-[11px] text-gray-500 font-medium text-center w-20 truncate",children:u.name})]},d)}),l&&s.map((u,d)=>{const m=(d-1)*12,g=d==1?"20px":"12px",x=u.icon;return c.jsx("div",{className:"absolute flex flex-col items-center pointer-events-none",style:{left:`${30+d*70}px`,top:g,transform:`rotate(${m}deg)`,zIndex:20,animationDelay:`${d*120}ms`},children:c.jsxs("div",{className:"relative animate-fade-down",children:[c.jsx(x,{className:"w-16 h-16 text-theme-2",strokeWidth:1.2}),c.jsx("div",{className:"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center font-semibold rounded-sm shadow-sm bg-red-400 text-white",children:c.jsx(wu,{})})]})},`ghost-${d}`)})]})}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative w-70 h-30",children:n.map((u,d)=>{const f=a[u],m=f.icon,g=d===0;return c.jsxs("div",{className:`absolute left-0 bg-theme-0 rounded-xl shadow-xl border-2 p-4 w-80 transition-all duration-500 ${f.border}`,style:{top:`${d*16}px`,zIndex:10-d,opacity:1-d*.3,transform:`scale(${1-d*.05})`},children:[g&&c.jsx(kx,{type:"created"}),g?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3 pb-3 border-b border-theme",children:[c.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${f.gradient} rounded-lg flex items-center justify-center shadow-md animate-pop-in`,children:c.jsx(m,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-theme-0 text-sm",children:f.name}),c.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:c.jsx("span",{className:"text-xs text-theme-2",children:"Based on your course materials"})})]})]}),c.jsx("div",{className:"space-y-2",children:[1,2].map(x=>c.jsx("div",{className:`${f.bg} ${f.border} border rounded-lg p-2 animate-fade-in`,style:{animationDelay:`${x*.1}s`},children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"w-4 h-4 rounded flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:`text-xs font-bold ${f.text}`,children:x})}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("div",{className:"h-1.5 bg-gray-400/20 rounded w-full"}),c.jsx("div",{className:"h-1.5 bg-gray-400/20 rounded w-3/5"})]})]})},x))})]}):c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 bg-gradient-to-br ${f.gradient} rounded-lg flex items-center justify-center shadow-md`,children:c.jsx(m,{className:"w-4 h-4 text-white"})}),c.jsx("div",{className:"flex-1",children:c.jsx("h3",{className:"font-semibold text-gray-700 text-sm",children:f.name})})]})]},`${u}-${d}`)})}),c.jsx("div",{className:"text-center mt-2",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Study Materials"})})]})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        @keyframes pop-in {
          0% {
            transform: scale(0);
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
          }
        }

        @keyframes fade-down {
          0% {
            opacity: 0.7;
            transform: translate(0, 0) scale(1);
          }
          100% {
            opacity: 0;
            transform: translate(0, 160px) scale(0.8);
          }
        }

        .animate-fade-in {
          animation: fade-in 0.4s ease-out forwards;
          opacity: 0;
        }

        .animate-pop-in {
          animation: pop-in 0.5s ease-out forwards;
        }

        .animate-fade-down {
          animation: fade-down 1s ease-out forwards;
        }
      `})]})},TK=[{text:"flashcards",textClass:"text-emerald-500",underlineClass:"bg-emerald-500/40 w-42"},{text:"quizzes",textClass:"text-orange-500",underlineClass:"bg-orange-500/40 w-30"},{text:"summaries",textClass:"text-blue-500",underlineClass:"bg-blue-500/40 w-45"}];function Out(){const[t,e]=y.useState(0),[n,r]=y.useState(!1);y.useEffect(()=>{const a=setInterval(()=>{r(!0),setTimeout(()=>{e(i=>(i+1)%TK.length),r(!1)},500)},2500);return()=>clearInterval(a)},[]);const s=TK[t];return c.jsx("div",{className:"relative mb-20 overflow-visible",children:c.jsxs("div",{className:"flex items-start justify-between gap-6",children:[c.jsxs("div",{className:"max-w-2xl space-y-3",children:[c.jsxs("h1",{className:"text-4xl font-bold leading-tight text-theme-0",children:["Study smarter with ",c.jsxs("span",{className:"relative inline-block align-bottom",style:{minWidth:"220px"},children:[c.jsxs("span",{className:ge("inline-block transition-all ease-in-out","duration-500 relative z-10",s.textClass,n?"-translate-y-6 opacity-0":"translate-y-0 opacity-100"),children:[s.text,"."]}),c.jsx("span",{className:ge("absolute left-0 -bottom-[6px]","h-[3px] rounded-full","transition-opacity duration-500","z-0",s.underlineClass,n?"opacity-0":"opacity-100")})]})]}),c.jsx("p",{className:"text-lg text-theme-1",children:"Instantly transform your course files into personalized study materials!"})]}),c.jsx(Iut,{})]})})}function Put(t){return{byCourse(e){return t.filter(n=>n.course_id===e)},upcoming(e=new Date){return t.filter(n=>n.due_at&&new Date(n.due_at)>=e&&!n.submitted)},overdue(e=new Date){return t.filter(n=>n.due_at&&new Date(n.due_at)<e&&!n.submitted&&!n.marked_complete)},byType(e){return t.filter(n=>n.type===e)},completed(){return t.filter(e=>e.submitted||e.marked_complete||e.graded)},isExam:e=>e.type===Xde.QUIZ||["quiz","test","exam","midterm","final","assessment"].some(n=>e.name.toLowerCase().includes(n))}}const Fhe=y.createContext(null);function Fut({initialExams:t=[],children:e}){const[n,r]=y.useState(t),s=y.useMemo(()=>Put(n),[n]),a=y.useMemo(()=>({exams:n,setExams:r,helpers:s}),[n,s]);return c.jsx(Fhe.Provider,{value:a,children:e})}function But(){const t=y.useContext(Fhe);if(!t)throw new Error("useExams must be used within an ExamsProvider");return t}function Lut({assignments:t,courses:e,onCreateStudySet:n}){const{helpers:r}=But(),s=y.useMemo(()=>{const o=t.filter(u=>e.some(d=>d.id.toString()===u.course_id)&&r.isExam(u)).slice(0,3).map(u=>{var d;return{id:`assignment-${u.id}`,type:"assignment",title:u.name,subtitle:(d=e.find(f=>f.id.toString()===u.course_id))==null?void 0:d.default,course:e.find(f=>f.id.toString()===u.course_id),dueDate:u.due_at,ctaLabel:"Create study set",assignment:u}}),l=e.slice(0,3).map(u=>({id:`course-${u.id}`,type:"course",title:u.name||u.default,subtitle:"Full course",course:u,ctaLabel:"Study this course",assignment:void 0}));return[...o,...l]},[t,e]),a=i=>{const o=Math.ceil((i.getTime()-Date.now())/864e5);return o===0?"Due today":o===1?"Due tomorrow":`Due in ${o} days`};return s.length===0?null:c.jsxs("section",{className:"mt-10 space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-theme-0",children:"Quick Start"}),c.jsx("p",{className:"text-sm text-theme-1",children:"Prepare for a specific exam or course"})]})}),c.jsx("div",{className:ge("flex gap-4 overflow-x-auto pb-2 pt-5","snap-x snap-mandatory","[-ms-overflow-style:none] [scrollbar-width:none]","[&::-webkit-scrollbar]:hidden","relative","[mask-image:linear-gradient(to_right,black_0%,black_90%,transparent_100%)]","[-webkit-mask-image:linear-gradient(to_right,black_0%,black_90%,transparent_100%)]"),children:s.map(i=>{var o;return c.jsxs("div",{className:"relative min-w-[280px] max-w-[320px] snap-start",children:[i.type==="assignment"&&i.dueDate&&c.jsx("div",{className:"absolute -top-3 right-0 z-10",children:c.jsx("div",{className:"rounded-full bg-theme-0 px-2.5 py-1 text-xs font-semibold text-theme-0 shadow-theme",children:a(new Date(i.dueDate))})}),c.jsxs("div",{className:ge("relative rounded-xl","transition-transform cursor-pointer group"),onClick:()=>n(i.course,`${i.title} Study Set`,i.assignment),children:[c.jsx("div",{className:"absolute inset-0 rounded-xl opacity-25 group-hover:opacity-50 transition",style:{backgroundColor:i.course.color,backgroundImage:i.course.img?`url(${i.course.img})`:"none"}}),c.jsxs("div",{className:"relative flex h-full flex-col justify-between p-5",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"h-3 w-3 rounded-full shrink-0",style:{backgroundColor:((o=i.course)==null?void 0:o.color)||"#ffffff80"}}),c.jsx("p",{className:"text-xs font-medium text-theme-1 line-clamp-1",children:i.subtitle})]}),c.jsx("h3",{className:"line-clamp-2 text-base font-semibold text-theme-0",children:i.title})]}),c.jsxs(vn,{size:"sm",className:"mt-4 w-fit gap-1 shadow-none bg-white/50 group-hover:bg-white/30 font-bold",children:[c.jsx(Yd,{className:"h-4 w-4"}),i.ctaLabel]})]})]})]},i.id)})})]})}function AK(t){const{variant:e,onClick:n,className:r}=t,[s,a]=y.useState(!1),[i,o]=y.useState(!1);if(e==="create")return c.jsx("button",{type:"button",onClick:n,className:ge("rounded-lg border-2 border-dashed border-theme p-6","bg-theme-0 hover:scale-110 transition","flex items-center justify-center h-30",r),children:c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("div",{className:"mx-auto h-8 w-8 rounded-lg bg-theme-2 flex items-center justify-center",children:c.jsx(Yd,{className:"h-4 w-4 text-theme-0"})}),c.jsx("p",{className:"text-base font-bold text-theme-0",children:"Create Study Set"})]})});const{notebook:l,course:u,onDelete:d}=t,f=l.assignment_id?l.metadata.assignment.name:null;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{onClick:n,className:ge("relative text-left rounded-lg border-2 border-theme bg-card p-3 cursor-pointer bg-theme-0","flex hover:shadow-theme transition h-30 group",r),children:[c.jsx("div",{className:"absolute top-2 right-2 hover:bg-theme-1 rounded-md",onClick:m=>m.stopPropagation(),children:c.jsxs(Tv,{open:i,onOpenChange:o,children:[c.jsx(Av,{asChild:!0,children:c.jsx(vn,{variant:"ghost",size:"icon",className:"h-7 w-7",children:c.jsx(Wb,{className:"h-4 w-4 text-theme-0"})})}),c.jsxs(Nv,{align:"end",children:[c.jsxs(_d,{onClick:n,className:"hover:bg-theme-1",children:[c.jsx(dk,{className:"h-4 w-4 mr-2"}),"Open"]}),c.jsx(Zj,{}),c.jsxs(_d,{className:"text-red-700 hover:bg-theme-1",onClick:()=>{o(!1),a(!0)},children:[c.jsx(wv,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}),c.jsxs("div",{className:"flex flex-col min-w-0 h-full",children:[c.jsx(Cie,{className:"mt-2",course:u,assignmentName:f,color:!0,colorSize:"medium"}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-2",children:[c.jsx("h3",{className:ge("font-semibold text-base leading-tight","line-clamp-2","text-theme-0 group-hover:underline"),title:l.name,children:l.name}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold",children:[c.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-500/10 px-2 py-0.5 text-blue-500",children:[c.jsx(bv,{className:"h-3.5 w-3.5"}),l.highlights.length," material",l.highlights.length!==1&&"s"]}),c.jsxs("div",{className:"flex items-center gap-3 text-xs text-theme-2",children:[c.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c.jsx(fi,{className:"h-3.5 w-3.5"}),l.notebook_documents.length," source",l.notebook_documents.length!==1&&"s"]}),c.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c.jsx(Mg,{className:"h-3.5 w-3.5"}),l.created_at&&new Date(l.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]})]})]})]}),c.jsx($de,{open:s,onOpenChange:a,children:c.jsxs(Ude,{className:"bg-theme-0 text-theme-0",children:[c.jsxs(Hde,{children:[c.jsx(qde,{children:"Delete study set?"}),c.jsxs(Gde,{children:["This will permanently delete"," ",c.jsx("span",{className:"font-semibold",children:l.name}),". This action cannot be undone."]})]}),c.jsxs(Vde,{children:[c.jsx(Kde,{className:"hover:bg-theme-1",children:"Cancel"}),c.jsx(Wde,{className:"bg-red-400 text-black hover:bg-red-400",onClick:()=>{d==null||d(l),a(!1)},children:"Delete"})]})]})})]})}function zut({title:t,notebooks:e,courses:n,onOpenNotebook:r,showCreate:s=!1,onCreate:a,onDelete:i}){const[o,l]=y.useState(""),[u,d]=y.useState("all"),f=e.filter(m=>{const g=m.name.toLowerCase().includes(o.toLowerCase()),x=u==="all"||m.course_id===u;return g&&x}).sort((m,g)=>new Date(g.created_at).valueOf()-new Date(m.created_at).valueOf());return c.jsxs("section",{className:"mt-12 rounded-xl pt-10",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-theme-0",children:t}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wE,{placeholder:"Search study sets...",value:o,onChange:m=>l(m.target.value),className:"h-9 w-56",variant:"search"}),c.jsxs(jo,{value:u,onValueChange:d,children:[c.jsx(Do,{className:"h-9 w-44",children:c.jsx(Td,{placeholder:"All courses"})}),c.jsxs(Ro,{children:[c.jsx(Xt,{value:"all",children:"All courses"}),n.map(m=>c.jsx(Xt,{value:m.id.toString(),children:m.code||m.default},m.id))]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[c.jsx(AK,{variant:"create",onClick:a}),f.map(m=>{const g=n.find(x=>x.id.toString()===m.course_id);return c.jsx(AK,{variant:"existing",notebook:m,course:g,onClick:()=>r(m),onDelete:i},m.id)})]})]})}function $ut({courses:t,assignments:e}){const[n,r]=y.useState(null),{setNotebook:s,notebooks:a,deleteNotebook:i,createNotebook:o,createFlowStep:l,setCreateFlowStep:u}=os(),d=async f=>{if(!n)try{r(f.id.toString()),await s(f)}finally{r(null)}};return y.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("notebook_id");if(m){const g=a.find(x=>x.id.toString()===m);g&&d(g)}},[]),l==="landing"?c.jsx("div",{className:"min-h-screen w-full bg-theme-0",children:c.jsx("div",{className:"min-h-screen bg-theme-0 lg:mx-auto max-w-5xl pt-24",children:c.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[c.jsx(Out,{}),c.jsxs(kO,{defaultValue:"my",className:"mt-20",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-x-0 top-1/2 h-0.5 rounded-full bg-theme-2"}),c.jsx("div",{className:"relative z-10 flex justify-center",children:c.jsxs(EO,{children:[c.jsx(rv,{value:"my",children:"My Studies"}),c.jsx(rv,{value:"community",children:"Community Studies"})]})})]}),c.jsxs(nv,{value:"my",className:"space-y-10",children:[c.jsx(Lut,{assignments:e,courses:t,onCreateStudySet:(f,m,g)=>o({course:f,name:m??`Study: ${f.code||f.default}`,exam:g})}),c.jsx(zut,{title:"My Study Sets",notebooks:a,showCreate:!0,courses:t,onCreate:()=>u("course"),onDelete:i,onOpenNotebook:d})]}),c.jsx(nv,{value:"community",children:c.jsx("div",{className:"flex min-h-[500px] items-center justify-center rounded-lg border border-dashed",children:c.jsxs("div",{className:"space-y-3 text-center",children:[c.jsx(rZ,{className:"mx-auto h-6 w-6 text-theme-1"}),c.jsx("p",{className:"text-sm text-theme-1",children:"Explore study sets created by other students."}),c.jsx("p",{className:"text-xs text-theme-1",children:"Coming soon!"})]})})})]})]})})}):c.jsx(Mut,{courses:t,createNotebook:o})}function Uut({course:t,file:e,returnUrl:n}){const{notebook:r,selectedSources:s,editNotebook:a,addSource:i,createNotebook:o,currentPage:l,navigatePage:u}=os();function d(S){a({...r,name:S})}const{sendMessageAndListen:f,navigatePage:m,openGate:g}=ut();y.useEffect(()=>{if(l.type==="highlight"&&s.length&&r){const S=s.find(w=>"canvas_file_id"in w.metadata&&w.metadata.canvas_file_id===e.metadata.canvas_file_id);m("study",{notebook_id:r.id.toString(),highlight_id:l.value.id.toString(),...S?{document_id:S.id.toString()}:{},return:n})}},[l,r,s,e]);async function x(S,w){const E=await f({type:"CALL_EXTENSION_FUNC",payload:{func:"uploadStudyDocument",args:{document:S,notebook:w}}});if(!E.data||!E.success){E.status===402?g("study_files"):Ts.error("Failed to process course document.",{description:c.jsx("span",{className:"text-theme-1",children:JSON.stringify(E.error)})});return}return i(E.data),E.data}const b=y.useCallback(()=>I7(r.id.toString(),s,{courseFile:e,course:t,createNotebook:o,uploadCourseSource:x}),[r,s,t,e]),C=cce(b(),{});return c.jsx("div",{className:"h-full w-full bg-theme-0",children:c.jsx(n5,{className:"h-full",children:c.jsx(oce,{runtime:C,children:c.jsx(ehe,{notebookName:(r==null?void 0:r.name)||"File Chat",selectedSourcesCount:1,totalSourcesCount:1,runtime:C,onRenameNotebook:d})})})})}function Hut({course:t,file:e,returnUrl:n}){const{addSelectedSource:r}=os();return y.useEffect(()=>{r({id:-1,notebook_id:0,document_id:0,name:"File",source:"course"})},[]),c.jsx(Uut,{course:t,file:e,returnUrl:n})}function Vut({isSidebar:t,courseId:e,fileId:n,returnUrl:r}={isSidebar:!1}){const{token:s,authUser:a}=wa(),{requestValidToken:i,sendMessageAndListen:o}=ut(),[l,u]=y.useState(),[d,f]=y.useState(null);y.useEffect(()=>{s&&(async()=>{pi.setConfig({baseUrl:`${Jr}`,auth:i});const{data:A,error:j}=await cHe();j?(console.error(j),Ts.error("Failed to access BetterCampus servers. Try reloading the page!")):u(A)})()},[s]);const{courseData:m,visibleCourseIds:g}=zr(),[x,b]=y.useState(null);y.useEffect(()=>{!m||!a||!a.id||(async()=>{const[{data:A,error:j}]=await Promise.all([tHe()]);if(j)console.error(j);else{const D=A.notebooks.filter(z=>z.course_id in m);b(D)}})()},[m,a]);const[C,S]=y.useState(null),w=async()=>{const A=await o({type:"CALL_EXTENSION_FUNC",payload:{func:"getUpcomingAssignments"}});return!A.data||!A.success?[]:A.data};y.useEffect(()=>{(async()=>{if(e&&n){const A=await o({type:"CALL_EXTENSION_FUNC",payload:{func:"getCourseFile",args:{courseId:e,fileId:n}}});A.data&&A.success&&f(A.data)}})()},[e,n]),y.useEffect(()=>{(async()=>S(await w()))()},[]);const E=g.map(A=>({...m[A],id:A})),T=e?E.find(A=>A.id===e):void 0;if(!x||!E||!E.length||!s||!l||!C||t&&!d&&!r)return c.jsx(PHe,{});const _=t?{id:-1,name:"File Chat",user_id:"",course_id:"",school_id:null,notebook_documents:[{id:-1,notebook_id:0,document_id:0,name:"File",source:"course"}],highlights:[]}:void 0;return c.jsx(LHe,{initialLimits:l,children:c.jsx(pHe,{defaultNotebook:_,allNotebooks:_?[...x,_]:x,children:c.jsx(Fut,{initialExams:C,children:t?c.jsx(Hut,{course:T,file:d,returnUrl:r}):c.jsx($ut,{courses:E,assignments:C})})})})}const qut=t=>{const e=new URLSearchParams(window.location.search),n=!!e.get("filesai"),r=e.get("course_id"),s=e.get("file_id"),a=e.get("return");return c.jsxs(Wd,{requiresLocalStorage:!0,children:[c.jsx(iE,{}),c.jsx(Vut,{isSidebar:n,courseId:r,fileId:s,returnUrl:a}),c.jsx(PUe,{})]})},Bhe=({children:t})=>(console.log("panels",t),c.jsxs("div",{className:"flex flex-row h-full w-full bg-white text-base",children:[t[0],t.length>=2&&t[1]!==null&&c.jsx("div",{className:"flex justify-center items-center flex-[.8]",children:t[1]})]})),Gut=Ce.memo(({handleBack:t,handleSkip:e})=>!t&&!e?null:c.jsxs("div",{className:"mt-[10px] flex justify-between items-center",children:[t&&c.jsxs("button",{onClick:t,className:"flex items-center gap-[8px] font-medium",children:[c.jsx(Kd,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Back"})]}),e&&c.jsxs("button",{onClick:e,className:"ml-auto font-medium flex items-center gap-[8px]",children:["Skip",c.jsx(pc,{className:"w-[20px] h-[20px]"})]})]})),Lhe=Ce.memo(({handleBack:t,handleSkip:e})=>{const{authStep:n}=kr();return c.jsxs("div",{className:"px-[30px] mt-[30px] mb-4",children:[c.jsx("img",{src:n==="thankYou"?"/iconemptylg.png":"/extlogo.png",alt:"logo",className:n==="thankYou"?"size-[44px]":"size-[30px]"}),c.jsx(Gut,{handleBack:t,handleSkip:e})]})});var Uw=t=>t.type==="checkbox",Pm=t=>t instanceof Date,Ti=t=>t==null;const zhe=t=>typeof t=="object";var Bs=t=>!Ti(t)&&!Array.isArray(t)&&zhe(t)&&!Pm(t),$he=t=>Bs(t)&&t.target?Uw(t.target)?t.target.checked:t.target.value:t,Wut=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Uhe=(t,e)=>t.has(Wut(e)),Kut=t=>{const e=t.constructor&&t.constructor.prototype;return Bs(e)&&e.hasOwnProperty("isPrototypeOf")},jO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function la(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(jO&&(t instanceof Blob||r))&&(n||Bs(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!Kut(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=la(t[s]));else return t;return e}var JE=t=>/^\w*$/.test(t),Ps=t=>t===void 0,DO=t=>Array.isArray(t)?t.filter(Boolean):[],RO=t=>DO(t.replace(/["|']|\]/g,"").split(/\.|\[/)),bt=(t,e,n)=>{if(!e||!Bs(t))return n;const r=(JE(e)?[e]:RO(e)).reduce((s,a)=>Ti(s)?s:s[a],t);return Ps(r)||r===t?Ps(t[e])?n:t[e]:r},_o=t=>typeof t=="boolean",br=(t,e,n)=>{let r=-1;const s=JE(e)?[e]:RO(e),a=s.length,i=a-1;for(;++r<a;){const o=s[r];let l=n;if(r!==i){const u=t[o];l=Bs(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=l,t=t[o]}};const S5={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Jl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},id={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},MO=Ce.createContext(null);MO.displayName="HookFormContext";const QE=()=>Ce.useContext(MO),Yut=t=>{const{children:e,...n}=t;return Ce.createElement(MO.Provider,{value:n},e)};var Hhe=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const i=a;return e._proxyFormState[i]!==Jl.all&&(e._proxyFormState[i]=!r||Jl.all),n&&(n[i]=!0),t[i]}});return s};const IO=typeof window<"u"?Ce.useLayoutEffect:Ce.useEffect;function Vhe(t){const e=QE(),{control:n=e.control,disabled:r,name:s,exact:a}=t||{},[i,o]=Ce.useState(n._formState),l=Ce.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return IO(()=>n._subscribe({name:s,formState:l.current,exact:a,callback:u=>{!r&&o({...n._formState,...u})}}),[s,r,a]),Ce.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),Ce.useMemo(()=>Hhe(i,n,l.current,!1),[i,n])}var iu=t=>typeof t=="string",qhe=(t,e,n,r,s)=>iu(t)?(r&&e.watch.add(t),bt(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),bt(n,a))):(r&&(e.watchAll=!0),n),B7=t=>Ti(t)||!zhe(t);function yd(t,e,n=new WeakSet){if(B7(t)||B7(e))return t===e;if(Pm(t)&&Pm(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const i=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const o=e[a];if(Pm(i)&&Pm(o)||Bs(i)&&Bs(o)||Array.isArray(i)&&Array.isArray(o)?!yd(i,o,n):i!==o)return!1}}return!0}function Xut(t){const e=QE(),{control:n=e.control,name:r,defaultValue:s,disabled:a,exact:i,compute:o}=t||{},l=Ce.useRef(s),u=Ce.useRef(o),d=Ce.useRef(void 0);u.current=o;const f=Ce.useMemo(()=>n._getWatch(r,l.current),[n,r]),[m,g]=Ce.useState(u.current?u.current(f):f);return IO(()=>n._subscribe({name:r,formState:{values:!0},exact:i,callback:x=>{if(!a){const b=qhe(r,n._names,x.values||n._formValues,!1,l.current);if(u.current){const C=u.current(b);yd(C,d.current)||(g(C),d.current=C)}else g(b)}}}),[n,a,r,i]),Ce.useEffect(()=>n._removeUnmounted()),m}function Jut(t){const e=QE(),{name:n,disabled:r,control:s=e.control,shouldUnregister:a,defaultValue:i}=t,o=Uhe(s._names.array,n),l=Ce.useMemo(()=>bt(s._formValues,n,bt(s._defaultValues,n,i)),[s,n,i]),u=Xut({control:s,name:n,defaultValue:l,exact:!0}),d=Vhe({control:s,name:n,exact:!0}),f=Ce.useRef(t),m=Ce.useRef(s.register(n,{...t.rules,value:u,..._o(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Ce.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!bt(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!bt(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!bt(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!bt(d.validatingFields,n)},error:{enumerable:!0,get:()=>bt(d.errors,n)}}),[d,n]),x=Ce.useCallback(w=>m.current.onChange({target:{value:$he(w),name:n},type:S5.CHANGE}),[n]),b=Ce.useCallback(()=>m.current.onBlur({target:{value:bt(s._formValues,n),name:n},type:S5.BLUR}),[n,s._formValues]),C=Ce.useCallback(w=>{const E=bt(s._fields,n);E&&w&&(E._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:T=>w.setCustomValidity(T),reportValidity:()=>w.reportValidity()})},[s._fields,n]),S=Ce.useMemo(()=>({name:n,value:u,..._o(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:x,onBlur:b,ref:C}),[n,r,d.disabled,x,b,C,u]);return Ce.useEffect(()=>{const w=s._options.shouldUnregister||a;s.register(n,{...f.current.rules,..._o(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(T,_)=>{const A=bt(s._fields,T);A&&A._f&&(A._f.mount=_)};if(E(n,!0),w){const T=la(bt(s._options.defaultValues,n));br(s._defaultValues,n,T),Ps(bt(s._formValues,n))&&br(s._formValues,n,T)}return!o&&s.register(n),()=>{(o?w&&!s._state.action:w)?s.unregister(n):E(n,!1)}},[n,s,o,a]),Ce.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),Ce.useMemo(()=>({field:S,formState:d,fieldState:g}),[S,d,g])}const Qut=t=>t.render(Jut(t));var OO=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},i1=t=>Array.isArray(t)?t:[t],NK=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},Xi=t=>Bs(t)&&!Object.keys(t).length,PO=t=>t.type==="file",Ql=t=>typeof t=="function",k5=t=>{if(!jO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ghe=t=>t.type==="select-multiple",FO=t=>t.type==="radio",Zut=t=>FO(t)||Uw(t),FN=t=>k5(t)&&t.isConnected;function edt(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ps(t)?r++:t[e[r++]];return t}function tdt(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ps(t[e]))return!1;return!0}function qs(t,e){const n=Array.isArray(e)?e:JE(e)?[e]:RO(e),r=n.length===1?t:edt(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Bs(r)&&Xi(r)||Array.isArray(r)&&tdt(r))&&qs(t,n.slice(0,-1)),t}var Whe=t=>{for(const e in t)if(Ql(t[e]))return!0;return!1};function E5(t,e={}){const n=Array.isArray(t);if(Bs(t)||n)for(const r in t)Array.isArray(t[r])||Bs(t[r])&&!Whe(t[r])?(e[r]=Array.isArray(t[r])?[]:{},E5(t[r],e[r])):Ti(t[r])||(e[r]=!0);return e}function Khe(t,e,n){const r=Array.isArray(t);if(Bs(t)||r)for(const s in t)Array.isArray(t[s])||Bs(t[s])&&!Whe(t[s])?Ps(e)||B7(n[s])?n[s]=Array.isArray(t[s])?E5(t[s],[]):{...E5(t[s])}:Khe(t[s],Ti(e)?{}:e[s],n[s]):n[s]=!yd(t[s],e[s]);return n}var cx=(t,e)=>Khe(t,e,E5(e));const jK={value:!1,isValid:!1},DK={value:!0,isValid:!0};var Yhe=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ps(t[0].attributes.value)?Ps(t[0].value)||t[0].value===""?DK:{value:t[0].value,isValid:!0}:DK:jK}return jK},Xhe=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ps(t)?t:e?t===""?NaN:t&&+t:n&&iu(t)?new Date(t):r?r(t):t;const RK={isValid:!1,value:null};var Jhe=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,RK):RK;function MK(t){const e=t.ref;return PO(e)?e.files:FO(e)?Jhe(t.refs).value:Ghe(e)?[...e.selectedOptions].map(({value:n})=>n):Uw(e)?Yhe(t.refs).value:Xhe(Ps(e.value)?t.ref.value:e.value,t)}var ndt=(t,e,n,r)=>{const s={};for(const a of t){const i=bt(e,a);i&&br(s,a,i._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},_5=t=>t instanceof RegExp,ux=t=>Ps(t)?t:_5(t)?t.source:Bs(t)?_5(t.value)?t.value.source:t.value:t,IK=t=>({isOnSubmit:!t||t===Jl.onSubmit,isOnBlur:t===Jl.onBlur,isOnChange:t===Jl.onChange,isOnAll:t===Jl.all,isOnTouch:t===Jl.onTouched});const OK="AsyncFunction";var rdt=t=>!!t&&!!t.validate&&!!(Ql(t.validate)&&t.validate.constructor.name===OK||Bs(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===OK)),sdt=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),PK=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const o1=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=bt(t,s);if(a){const{_f:i,...o}=a;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],s)&&!r)return!0;if(i.ref&&e(i.ref,i.name)&&!r)return!0;if(o1(o,e))break}else if(Bs(o)&&o1(o,e))break}}};function FK(t,e,n){const r=bt(t,n);if(r||JE(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),i=bt(e,a),o=bt(t,a);if(i&&!Array.isArray(i)&&n!==a)return{name:n};if(o&&o.type)return{name:a,error:o};if(o&&o.root&&o.root.type)return{name:`${a}.root`,error:o.root};s.pop()}return{name:n}}var adt=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return Xi(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(i=>e[i]===(!r||Jl.all))},idt=(t,e,n)=>!t||!e||t===e||i1(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),odt=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,ldt=(t,e)=>!DO(bt(t,e)).length&&qs(t,e),cdt=(t,e,n)=>{const r=i1(bt(t,n));return br(r,"root",e[n]),br(t,n,r),t},JS=t=>iu(t);function BK(t,e,n="validate"){if(JS(t)||Array.isArray(t)&&t.every(JS)||_o(t)&&!t)return{type:n,message:JS(t)?t:"",ref:e}}var $p=t=>Bs(t)&&!_5(t)?t:{value:t,message:""},LK=async(t,e,n,r,s,a)=>{const{ref:i,refs:o,required:l,maxLength:u,minLength:d,min:f,max:m,pattern:g,validate:x,name:b,valueAsNumber:C,mount:S}=t._f,w=bt(n,b);if(!S||e.has(b))return{};const E=o?o[0]:i,T=L=>{s&&E.reportValidity&&(E.setCustomValidity(_o(L)?"":L||""),E.reportValidity())},_={},A=FO(i),j=Uw(i),D=A||j,z=(C||PO(i))&&Ps(i.value)&&Ps(w)||k5(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,F=OO.bind(null,b,r,_),R=(L,O,H,P=id.maxLength,I=id.minLength)=>{const U=L?O:H;_[b]={type:L?P:I,message:U,ref:i,...F(L?P:I,U)}};if(a?!Array.isArray(w)||!w.length:l&&(!D&&(z||Ti(w))||_o(w)&&!w||j&&!Yhe(o).isValid||A&&!Jhe(o).isValid)){const{value:L,message:O}=JS(l)?{value:!!l,message:l}:$p(l);if(L&&(_[b]={type:id.required,message:O,ref:E,...F(id.required,O)},!r))return T(O),_}if(!z&&(!Ti(f)||!Ti(m))){let L,O;const H=$p(m),P=$p(f);if(!Ti(w)&&!isNaN(w)){const I=i.valueAsNumber||w&&+w;Ti(H.value)||(L=I>H.value),Ti(P.value)||(O=I<P.value)}else{const I=i.valueAsDate||new Date(w),U=B=>new Date(new Date().toDateString()+" "+B),W=i.type=="time",Y=i.type=="week";iu(H.value)&&w&&(L=W?U(w)>U(H.value):Y?w>H.value:I>new Date(H.value)),iu(P.value)&&w&&(O=W?U(w)<U(P.value):Y?w<P.value:I<new Date(P.value))}if((L||O)&&(R(!!L,H.message,P.message,id.max,id.min),!r))return T(_[b].message),_}if((u||d)&&!z&&(iu(w)||a&&Array.isArray(w))){const L=$p(u),O=$p(d),H=!Ti(L.value)&&w.length>+L.value,P=!Ti(O.value)&&w.length<+O.value;if((H||P)&&(R(H,L.message,O.message),!r))return T(_[b].message),_}if(g&&!z&&iu(w)){const{value:L,message:O}=$p(g);if(_5(L)&&!w.match(L)&&(_[b]={type:id.pattern,message:O,ref:i,...F(id.pattern,O)},!r))return T(O),_}if(x){if(Ql(x)){const L=await x(w,n),O=BK(L,E);if(O&&(_[b]={...O,...F(id.validate,O.message)},!r))return T(O.message),_}else if(Bs(x)){let L={};for(const O in x){if(!Xi(L)&&!r)break;const H=BK(await x[O](w,n),E,O);H&&(L={...H,...F(O,H.message)},T(H.message),r&&(_[b]=L))}if(!Xi(L)&&(_[b]={ref:E,...L},!r))return _}}return T(!0),_};const udt={mode:Jl.onSubmit,reValidateMode:Jl.onChange,shouldFocusError:!0};function ddt(t={}){let e={...udt,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ql(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Bs(e.defaultValues)||Bs(e.values)?la(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:la(s),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:NK(),state:NK()},g=e.criteriaMode===Jl.all,x=ae=>pe=>{clearTimeout(u),u=setTimeout(ae,pe)},b=async ae=>{if(!e.disabled&&(d.isValid||f.isValid||ae)){const pe=e.resolver?Xi((await j()).errors):await z(r,!0);pe!==n.isValid&&m.state.next({isValid:pe})}},C=(ae,pe)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ae||Array.from(o.mount)).forEach(_e=>{_e&&(pe?br(n.validatingFields,_e,pe):qs(n.validatingFields,_e))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Xi(n.validatingFields)}))},S=(ae,pe=[],_e,Ue,Je=!0,qe=!0)=>{if(Ue&&_e&&!e.disabled){if(i.action=!0,qe&&Array.isArray(bt(r,ae))){const xe=_e(bt(r,ae),Ue.argA,Ue.argB);Je&&br(r,ae,xe)}if(qe&&Array.isArray(bt(n.errors,ae))){const xe=_e(bt(n.errors,ae),Ue.argA,Ue.argB);Je&&br(n.errors,ae,xe),ldt(n.errors,ae)}if((d.touchedFields||f.touchedFields)&&qe&&Array.isArray(bt(n.touchedFields,ae))){const xe=_e(bt(n.touchedFields,ae),Ue.argA,Ue.argB);Je&&br(n.touchedFields,ae,xe)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=cx(s,a)),m.state.next({name:ae,isDirty:R(ae,pe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else br(a,ae,pe)},w=(ae,pe)=>{br(n.errors,ae,pe),m.state.next({errors:n.errors})},E=ae=>{n.errors=ae,m.state.next({errors:n.errors,isValid:!1})},T=(ae,pe,_e,Ue)=>{const Je=bt(r,ae);if(Je){const qe=bt(a,ae,Ps(_e)?bt(s,ae):_e);Ps(qe)||Ue&&Ue.defaultChecked||pe?br(a,ae,pe?qe:MK(Je._f)):H(ae,qe),i.mount&&b()}},_=(ae,pe,_e,Ue,Je)=>{let qe=!1,xe=!1;const Ae={name:ae};if(!e.disabled){if(!_e||Ue){(d.isDirty||f.isDirty)&&(xe=n.isDirty,n.isDirty=Ae.isDirty=R(),qe=xe!==Ae.isDirty);const Fe=yd(bt(s,ae),pe);xe=!!bt(n.dirtyFields,ae),Fe?qs(n.dirtyFields,ae):br(n.dirtyFields,ae,!0),Ae.dirtyFields=n.dirtyFields,qe=qe||(d.dirtyFields||f.dirtyFields)&&xe!==!Fe}if(_e){const Fe=bt(n.touchedFields,ae);Fe||(br(n.touchedFields,ae,_e),Ae.touchedFields=n.touchedFields,qe=qe||(d.touchedFields||f.touchedFields)&&Fe!==_e)}qe&&Je&&m.state.next(Ae)}return qe?Ae:{}},A=(ae,pe,_e,Ue)=>{const Je=bt(n.errors,ae),qe=(d.isValid||f.isValid)&&_o(pe)&&n.isValid!==pe;if(e.delayError&&_e?(l=x(()=>w(ae,_e)),l(e.delayError)):(clearTimeout(u),l=null,_e?br(n.errors,ae,_e):qs(n.errors,ae)),(_e?!yd(Je,_e):Je)||!Xi(Ue)||qe){const xe={...Ue,...qe&&_o(pe)?{isValid:pe}:{},errors:n.errors,name:ae};n={...n,...xe},m.state.next(xe)}},j=async ae=>{C(ae,!0);const pe=await e.resolver(a,e.context,ndt(ae||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return C(ae),pe},D=async ae=>{const{errors:pe}=await j(ae);if(ae)for(const _e of ae){const Ue=bt(pe,_e);Ue?br(n.errors,_e,Ue):qs(n.errors,_e)}else n.errors=pe;return pe},z=async(ae,pe,_e={valid:!0})=>{for(const Ue in ae){const Je=ae[Ue];if(Je){const{_f:qe,...xe}=Je;if(qe){const Ae=o.array.has(qe.name),Fe=Je._f&&rdt(Je._f);Fe&&d.validatingFields&&C([Ue],!0);const Qe=await LK(Je,o.disabled,a,g,e.shouldUseNativeValidation&&!pe,Ae);if(Fe&&d.validatingFields&&C([Ue]),Qe[qe.name]&&(_e.valid=!1,pe))break;!pe&&(bt(Qe,qe.name)?Ae?cdt(n.errors,Qe,qe.name):br(n.errors,qe.name,Qe[qe.name]):qs(n.errors,qe.name))}!Xi(xe)&&await z(xe,pe,_e)}}return _e.valid},F=()=>{for(const ae of o.unMount){const pe=bt(r,ae);pe&&(pe._f.refs?pe._f.refs.every(_e=>!FN(_e)):!FN(pe._f.ref))&&de(ae)}o.unMount=new Set},R=(ae,pe)=>!e.disabled&&(ae&&pe&&br(a,ae,pe),!yd(B(),s)),L=(ae,pe,_e)=>qhe(ae,o,{...i.mount?a:Ps(pe)?s:iu(ae)?{[ae]:pe}:pe},_e,pe),O=ae=>DO(bt(i.mount?a:s,ae,e.shouldUnregister?bt(s,ae,[]):[])),H=(ae,pe,_e={})=>{const Ue=bt(r,ae);let Je=pe;if(Ue){const qe=Ue._f;qe&&(!qe.disabled&&br(a,ae,Xhe(pe,qe)),Je=k5(qe.ref)&&Ti(pe)?"":pe,Ghe(qe.ref)?[...qe.ref.options].forEach(xe=>xe.selected=Je.includes(xe.value)):qe.refs?Uw(qe.ref)?qe.refs.forEach(xe=>{(!xe.defaultChecked||!xe.disabled)&&(Array.isArray(Je)?xe.checked=!!Je.find(Ae=>Ae===xe.value):xe.checked=Je===xe.value||!!Je)}):qe.refs.forEach(xe=>xe.checked=xe.value===Je):PO(qe.ref)?qe.ref.value="":(qe.ref.value=Je,qe.ref.type||m.state.next({name:ae,values:la(a)})))}(_e.shouldDirty||_e.shouldTouch)&&_(ae,Je,_e.shouldTouch,_e.shouldDirty,!0),_e.shouldValidate&&Y(ae)},P=(ae,pe,_e)=>{for(const Ue in pe){if(!pe.hasOwnProperty(Ue))return;const Je=pe[Ue],qe=ae+"."+Ue,xe=bt(r,qe);(o.array.has(ae)||Bs(Je)||xe&&!xe._f)&&!Pm(Je)?P(qe,Je,_e):H(qe,Je,_e)}},I=(ae,pe,_e={})=>{const Ue=bt(r,ae),Je=o.array.has(ae),qe=la(pe);br(a,ae,qe),Je?(m.array.next({name:ae,values:la(a)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&_e.shouldDirty&&m.state.next({name:ae,dirtyFields:cx(s,a),isDirty:R(ae,qe)})):Ue&&!Ue._f&&!Ti(qe)?P(ae,qe,_e):H(ae,qe,_e),PK(ae,o)&&m.state.next({...n,name:ae}),m.state.next({name:i.mount?ae:void 0,values:la(a)})},U=async ae=>{i.mount=!0;const pe=ae.target;let _e=pe.name,Ue=!0;const Je=bt(r,_e),qe=Fe=>{Ue=Number.isNaN(Fe)||Pm(Fe)&&isNaN(Fe.getTime())||yd(Fe,bt(a,_e,Fe))},xe=IK(e.mode),Ae=IK(e.reValidateMode);if(Je){let Fe,Qe;const vt=pe.type?MK(Je._f):$he(ae),at=ae.type===S5.BLUR||ae.type===S5.FOCUS_OUT,Tt=!sdt(Je._f)&&!e.resolver&&!bt(n.errors,_e)&&!Je._f.deps||odt(at,bt(n.touchedFields,_e),n.isSubmitted,Ae,xe),wt=PK(_e,o,at);br(a,_e,vt),at?(!pe||!pe.readOnly)&&(Je._f.onBlur&&Je._f.onBlur(ae),l&&l(0)):Je._f.onChange&&Je._f.onChange(ae);const cn=_(_e,vt,at),$t=!Xi(cn)||wt;if(!at&&m.state.next({name:_e,type:ae.type,values:la(a)}),Tt)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?at&&b():at||b()),$t&&m.state.next({name:_e,...wt?{}:cn});if(!at&&wt&&m.state.next({...n}),e.resolver){const{errors:hn}=await j([_e]);if(qe(vt),Ue){const Kn=FK(n.errors,r,_e),jn=FK(hn,r,Kn.name||_e);Fe=jn.error,_e=jn.name,Qe=Xi(hn)}}else C([_e],!0),Fe=(await LK(Je,o.disabled,a,g,e.shouldUseNativeValidation))[_e],C([_e]),qe(vt),Ue&&(Fe?Qe=!1:(d.isValid||f.isValid)&&(Qe=await z(r,!0)));Ue&&(Je._f.deps&&Y(Je._f.deps),A(_e,Qe,Fe,cn))}},W=(ae,pe)=>{if(bt(n.errors,pe)&&ae.focus)return ae.focus(),1},Y=async(ae,pe={})=>{let _e,Ue;const Je=i1(ae);if(e.resolver){const qe=await D(Ps(ae)?ae:Je);_e=Xi(qe),Ue=ae?!Je.some(xe=>bt(qe,xe)):_e}else ae?(Ue=(await Promise.all(Je.map(async qe=>{const xe=bt(r,qe);return await z(xe&&xe._f?{[qe]:xe}:xe)}))).every(Boolean),!(!Ue&&!n.isValid)&&b()):Ue=_e=await z(r);return m.state.next({...!iu(ae)||(d.isValid||f.isValid)&&_e!==n.isValid?{}:{name:ae},...e.resolver||!ae?{isValid:_e}:{},errors:n.errors}),pe.shouldFocus&&!Ue&&o1(r,W,ae?Je:o.mount),Ue},B=ae=>{const pe={...i.mount?a:s};return Ps(ae)?pe:iu(ae)?bt(pe,ae):ae.map(_e=>bt(pe,_e))},Z=(ae,pe)=>({invalid:!!bt((pe||n).errors,ae),isDirty:!!bt((pe||n).dirtyFields,ae),error:bt((pe||n).errors,ae),isValidating:!!bt(n.validatingFields,ae),isTouched:!!bt((pe||n).touchedFields,ae)}),le=ae=>{ae&&i1(ae).forEach(pe=>qs(n.errors,pe)),m.state.next({errors:ae?n.errors:{}})},G=(ae,pe,_e)=>{const Ue=(bt(r,ae,{_f:{}})._f||{}).ref,Je=bt(n.errors,ae)||{},{ref:qe,message:xe,type:Ae,...Fe}=Je;br(n.errors,ae,{...Fe,...pe,ref:Ue}),m.state.next({name:ae,errors:n.errors,isValid:!1}),_e&&_e.shouldFocus&&Ue&&Ue.focus&&Ue.focus()},K=(ae,pe)=>Ql(ae)?m.state.subscribe({next:_e=>"values"in _e&&ae(L(void 0,pe),_e)}):L(ae,pe,!0),te=ae=>m.state.subscribe({next:pe=>{idt(ae.name,pe.name,ae.exact)&&adt(pe,ae.formState||d,Me,ae.reRenderRoot)&&ae.callback({values:{...a},...n,...pe,defaultValues:s})}}).unsubscribe,ie=ae=>(i.mount=!0,f={...f,...ae.formState},te({...ae,formState:f})),de=(ae,pe={})=>{for(const _e of ae?i1(ae):o.mount)o.mount.delete(_e),o.array.delete(_e),pe.keepValue||(qs(r,_e),qs(a,_e)),!pe.keepError&&qs(n.errors,_e),!pe.keepDirty&&qs(n.dirtyFields,_e),!pe.keepTouched&&qs(n.touchedFields,_e),!pe.keepIsValidating&&qs(n.validatingFields,_e),!e.shouldUnregister&&!pe.keepDefaultValue&&qs(s,_e);m.state.next({values:la(a)}),m.state.next({...n,...pe.keepDirty?{isDirty:R()}:{}}),!pe.keepIsValid&&b()},fe=({disabled:ae,name:pe})=>{(_o(ae)&&i.mount||ae||o.disabled.has(pe))&&(ae?o.disabled.add(pe):o.disabled.delete(pe))},se=(ae,pe={})=>{let _e=bt(r,ae);const Ue=_o(pe.disabled)||_o(e.disabled);return br(r,ae,{..._e||{},_f:{..._e&&_e._f?_e._f:{ref:{name:ae}},name:ae,mount:!0,...pe}}),o.mount.add(ae),_e?fe({disabled:_o(pe.disabled)?pe.disabled:e.disabled,name:ae}):T(ae,!0,pe.value),{...Ue?{disabled:pe.disabled||e.disabled}:{},...e.progressive?{required:!!pe.required,min:ux(pe.min),max:ux(pe.max),minLength:ux(pe.minLength),maxLength:ux(pe.maxLength),pattern:ux(pe.pattern)}:{},name:ae,onChange:U,onBlur:U,ref:Je=>{if(Je){se(ae,pe),_e=bt(r,ae);const qe=Ps(Je.value)&&Je.querySelectorAll&&Je.querySelectorAll("input,select,textarea")[0]||Je,xe=Zut(qe),Ae=_e._f.refs||[];if(xe?Ae.find(Fe=>Fe===qe):qe===_e._f.ref)return;br(r,ae,{_f:{..._e._f,...xe?{refs:[...Ae.filter(FN),qe,...Array.isArray(bt(s,ae))?[{}]:[]],ref:{type:qe.type,name:ae}}:{ref:qe}}}),T(ae,!1,void 0,qe)}else _e=bt(r,ae,{}),_e._f&&(_e._f.mount=!1),(e.shouldUnregister||pe.shouldUnregister)&&!(Uhe(o.array,ae)&&i.action)&&o.unMount.add(ae)}}},ce=()=>e.shouldFocusError&&o1(r,W,o.mount),ue=ae=>{_o(ae)&&(m.state.next({disabled:ae}),o1(r,(pe,_e)=>{const Ue=bt(r,_e);Ue&&(pe.disabled=Ue._f.disabled||ae,Array.isArray(Ue._f.refs)&&Ue._f.refs.forEach(Je=>{Je.disabled=Ue._f.disabled||ae}))},0,!1))},oe=(ae,pe)=>async _e=>{let Ue;_e&&(_e.preventDefault&&_e.preventDefault(),_e.persist&&_e.persist());let Je=la(a);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:qe,values:xe}=await j();n.errors=qe,Je=la(xe)}else await z(r);if(o.disabled.size)for(const qe of o.disabled)qs(Je,qe);if(qs(n.errors,"root"),Xi(n.errors)){m.state.next({errors:{}});try{await ae(Je,_e)}catch(qe){Ue=qe}}else pe&&await pe({...n.errors},_e),ce(),setTimeout(ce);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xi(n.errors)&&!Ue,submitCount:n.submitCount+1,errors:n.errors}),Ue)throw Ue},Ne=(ae,pe={})=>{bt(r,ae)&&(Ps(pe.defaultValue)?I(ae,la(bt(s,ae))):(I(ae,pe.defaultValue),br(s,ae,la(pe.defaultValue))),pe.keepTouched||qs(n.touchedFields,ae),pe.keepDirty||(qs(n.dirtyFields,ae),n.isDirty=pe.defaultValue?R(ae,la(bt(s,ae))):R()),pe.keepError||(qs(n.errors,ae),d.isValid&&b()),m.state.next({...n}))},ve=(ae,pe={})=>{const _e=ae?la(ae):s,Ue=la(_e),Je=Xi(ae),qe=Je?s:Ue;if(pe.keepDefaultValues||(s=_e),!pe.keepValues){if(pe.keepDirtyValues){const xe=new Set([...o.mount,...Object.keys(cx(s,a))]);for(const Ae of Array.from(xe))bt(n.dirtyFields,Ae)?br(qe,Ae,bt(a,Ae)):I(Ae,bt(qe,Ae))}else{if(jO&&Ps(ae))for(const xe of o.mount){const Ae=bt(r,xe);if(Ae&&Ae._f){const Fe=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(k5(Fe)){const Qe=Fe.closest("form");if(Qe){Qe.reset();break}}}}if(pe.keepFieldsRef)for(const xe of o.mount)I(xe,bt(qe,xe));else r={}}a=e.shouldUnregister?pe.keepDefaultValues?la(s):{}:la(qe),m.array.next({values:{...qe}}),m.state.next({values:{...qe}})}o={mount:pe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!pe.keepIsValid||!!pe.keepDirtyValues,i.watch=!!e.shouldUnregister,m.state.next({submitCount:pe.keepSubmitCount?n.submitCount:0,isDirty:Je?!1:pe.keepDirty?n.isDirty:!!(pe.keepDefaultValues&&!yd(ae,s)),isSubmitted:pe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Je?{}:pe.keepDirtyValues?pe.keepDefaultValues&&a?cx(s,a):n.dirtyFields:pe.keepDefaultValues&&ae?cx(s,ae):pe.keepDirty?n.dirtyFields:{},touchedFields:pe.keepTouched?n.touchedFields:{},errors:pe.keepErrors?n.errors:{},isSubmitSuccessful:pe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},He=(ae,pe)=>ve(Ql(ae)?ae(a):ae,pe),nt=(ae,pe={})=>{const _e=bt(r,ae),Ue=_e&&_e._f;if(Ue){const Je=Ue.refs?Ue.refs[0]:Ue.ref;Je.focus&&(Je.focus(),pe.shouldSelect&&Ql(Je.select)&&Je.select())}},Me=ae=>{n={...n,...ae}},Le={control:{register:se,unregister:de,getFieldState:Z,handleSubmit:oe,setError:G,_subscribe:te,_runSchema:j,_focusError:ce,_getWatch:L,_getDirty:R,_setValid:b,_setFieldArray:S,_setDisabledField:fe,_setErrors:E,_getFieldArray:O,_reset:ve,_resetDefaultValues:()=>Ql(e.defaultValues)&&e.defaultValues().then(ae=>{He(ae,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:ue,_subjects:m,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return i},set _state(ae){i=ae},get _defaultValues(){return s},get _names(){return o},set _names(ae){o=ae},get _formState(){return n},get _options(){return e},set _options(ae){e={...e,...ae}}},subscribe:ie,trigger:Y,register:se,handleSubmit:oe,watch:K,setValue:I,getValues:B,reset:He,resetField:Ne,clearErrors:le,unregister:de,setError:G,setFocus:nt,getFieldState:Z};return{...Le,formControl:Le}}function ZE(t={}){const e=Ce.useRef(void 0),n=Ce.useRef(void 0),[r,s]=Ce.useState({isDirty:!1,isValidating:!1,isLoading:Ql(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ql(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ql(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:i,...o}=ddt(t);e.current={...o,formState:r}}const a=e.current.control;return a._options=t,IO(()=>{const i=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(o=>({...o,isReady:!0})),a._formState.isReady=!0,i},[a]),Ce.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Ce.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),Ce.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),Ce.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),Ce.useEffect(()=>{if(a._proxyFormState.isDirty){const i=a._getDirty();i!==r.isDirty&&a._subjects.state.next({isDirty:i})}},[a,r.isDirty]),Ce.useEffect(()=>{t.values&&!yd(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,s(i=>({...i}))):a._resetDefaultValues()},[a,t.values]),Ce.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=Hhe(r,a),e.current}var hdt="Label",Qhe=y.forwardRef((t,e)=>c.jsx(Nt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Qhe.displayName=hdt;var fdt=Qhe;function Zhe({className:t,...e}){return c.jsx(fdt,{"data-slot":"label",className:ge("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const e_=Yut,efe=y.createContext({}),zK=({...t})=>c.jsx(efe.Provider,{value:{name:t.name},children:c.jsx(Qut,{...t})}),BO=()=>{const t=y.useContext(efe),e=y.useContext(tfe),{getFieldState:n}=QE(),r=Vhe({name:t.name}),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...s}},tfe=y.createContext({});function $K({className:t,...e}){const n=y.useId();return c.jsx(tfe.Provider,{value:{id:n},children:c.jsx("div",{"data-slot":"form-item",className:ge("grid gap-2",t),...e})})}function UK({className:t,...e}){const{error:n,formItemId:r}=BO();return c.jsx(Zhe,{"data-slot":"form-label","data-error":!!n,className:ge("data-[error=true]:text-destructive",t),htmlFor:r,...e})}function HK({...t}){const{error:e,formItemId:n,formDescriptionId:r,formMessageId:s}=BO();return c.jsx(sk,{"data-slot":"form-control",id:n,"aria-describedby":e?`${r} ${s}`:`${r}`,"aria-invalid":!!e,...t})}function VK({className:t,...e}){const{error:n,formMessageId:r}=BO(),s=n?String((n==null?void 0:n.message)??""):e.children;return s?c.jsx("p",{"data-slot":"form-message",id:r,className:ge("text-destructive text-sm",t),...e,children:s}):null}var ar;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},t.find=(s,a)=>{for(const i of s)if(a(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(ar||(ar={}));var qK;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(qK||(qK={}));const Ot=ar.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gh=t=>{switch(typeof t){case"undefined":return Ot.undefined;case"string":return Ot.string;case"number":return Number.isNaN(t)?Ot.nan:Ot.number;case"boolean":return Ot.boolean;case"function":return Ot.function;case"bigint":return Ot.bigint;case"symbol":return Ot.symbol;case"object":return Array.isArray(t)?Ot.array:t===null?Ot.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ot.promise:typeof Map<"u"&&t instanceof Map?Ot.map:typeof Set<"u"&&t instanceof Set?Ot.set:typeof Date<"u"&&t instanceof Date?Ot.date:Ot.object;default:return Ot.unknown}},ht=ar.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Vd extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let o=r,l=0;for(;l<i.path.length;){const u=i.path[l];l===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(i))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return s(this),r}static assert(e){if(!(e instanceof Vd))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ar.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];n[a]=n[a]||[],n[a].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Vd.create=t=>new Vd(t);const L7=(t,e)=>{let n;switch(t.code){case ht.invalid_type:t.received===Ot.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ht.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ar.jsonStringifyReplacer)}`;break;case ht.unrecognized_keys:n=`Unrecognized key(s) in object: ${ar.joinValues(t.keys,", ")}`;break;case ht.invalid_union:n="Invalid input";break;case ht.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ar.joinValues(t.options)}`;break;case ht.invalid_enum_value:n=`Invalid enum value. Expected ${ar.joinValues(t.options)}, received '${t.received}'`;break;case ht.invalid_arguments:n="Invalid function arguments";break;case ht.invalid_return_type:n="Invalid function return type";break;case ht.invalid_date:n="Invalid date";break;case ht.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ar.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ht.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ht.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ht.custom:n="Invalid input";break;case ht.invalid_intersection_types:n="Intersection results could not be merged";break;case ht.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ht.not_finite:n="Number must be finite";break;default:n=e.defaultError,ar.assertNever(t)}return{message:n}};let mdt=L7;function pdt(){return mdt}const gdt=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(i,{data:e,defaultError:o}).message;return{...s,path:a,message:o}};function _t(t,e){const n=pdt(),r=gdt({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===L7?void 0:L7].filter(s=>!!s)});t.common.issues.push(r)}class Go{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return gn;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,i=await s.value;r.push({key:a,value:i})}return Go.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return gn;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[a.value]=i.value)}return{status:e.value,value:r}}}const gn=Object.freeze({status:"aborted"}),Ex=t=>({status:"dirty",value:t}),Rl=t=>({status:"valid",value:t}),GK=t=>t.status==="aborted",WK=t=>t.status==="dirty",av=t=>t.status==="valid",T5=t=>typeof Promise<"u"&&t instanceof Promise;var Pt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Pt||(Pt={}));class Tf{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KK=(t,e)=>{if(av(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vd(t.common.issues);return this._error=n,this._error}}};function Fn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,o)=>{const{message:l}=t;return i.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:s}}class nr{get description(){return this._def.description}_getType(e){return Gh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Gh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Go,ctx:{common:e.parent.common,data:e.data,parsedType:Gh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(T5(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gh(e)},s=this._parseSync({data:e,path:r.path,parent:r});return KK(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gh(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return av(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>av(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gh(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(T5(s)?s:Promise.resolve(s));return KK(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const i=e(s),o=()=>a.addIssue({code:ht.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ov({schema:this,typeName:yn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return df.create(this,this._def)}nullable(){return lv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mu.create(this)}promise(){return D5.create(this,this._def)}or(e){return N5.create([this,e],this._def)}and(e){return j5.create(this,e,this._def)}transform(e){return new ov({...Fn(this._def),schema:this,typeName:yn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new $7({...Fn(this._def),innerType:this,defaultValue:n,typeName:yn.ZodDefault})}brand(){return new Ldt({typeName:yn.ZodBranded,type:this,...Fn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new U7({...Fn(this._def),innerType:this,catchValue:n,typeName:yn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return LO.create(this,e)}readonly(){return H7.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vdt=/^c[^\s-]{8,}$/i,ydt=/^[0-9a-z]+$/,xdt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bdt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wdt=/^[a-z0-9_-]{21}$/i,Cdt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Sdt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,kdt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Edt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let BN;const _dt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Tdt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Adt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ndt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jdt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ddt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nfe="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Rdt=new RegExp(`^${nfe}$`);function rfe(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Mdt(t){return new RegExp(`^${rfe(t)}$`)}function Idt(t){let e=`${nfe}T${rfe(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Odt(t,e){return!!((e==="v4"||!e)&&_dt.test(t)||(e==="v6"||!e)&&Adt.test(t))}function Pdt(t,e){if(!Cdt.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Fdt(t,e){return!!((e==="v4"||!e)&&Tdt.test(t)||(e==="v6"||!e)&&Ndt.test(t))}class sf extends nr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ot.string){const a=this._getOrReturnCtx(e);return _t(a,{code:ht.invalid_type,expected:Ot.string,received:a.parsedType}),gn}const r=new Go;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(e,s),i?_t(s,{code:ht.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&_t(s,{code:ht.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")kdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"email",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")BN||(BN=new RegExp(Edt,"u")),BN.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"emoji",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")bdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"uuid",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")wdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"nanoid",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")vdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"cuid",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")ydt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"cuid2",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")xdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"ulid",code:ht.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),_t(s,{validation:"url",code:ht.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"regex",code:ht.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Idt(a).test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Rdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Mdt(a).test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Sdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"duration",code:ht.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Odt(e.data,a.version)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"ip",code:ht.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Pdt(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"jwt",code:ht.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?Fdt(e.data,a.version)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"cidr",code:ht.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?jdt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"base64",code:ht.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Ddt.test(e.data)||(s=this._getOrReturnCtx(e,s),_t(s,{validation:"base64url",code:ht.invalid_string,message:a.message}),r.dirty()):ar.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ht.invalid_string,...Pt.errToObj(r)})}_addCheck(e){return new sf({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Pt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Pt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Pt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Pt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Pt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Pt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Pt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Pt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Pt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Pt.errToObj(n)})}nonempty(e){return this.min(1,Pt.errToObj(e))}trim(){return new sf({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sf({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sf({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}sf.create=t=>new sf({checks:[],typeName:yn.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Fn(t)});function Bdt(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return a%i/10**s}class Cb extends nr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ot.number){const a=this._getOrReturnCtx(e);return _t(a,{code:ht.invalid_type,expected:Ot.number,received:a.parsedType}),gn}let r;const s=new Go;for(const a of this._def.checks)a.kind==="int"?ar.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?Bdt(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.not_finite,message:a.message}),s.dirty()):ar.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Pt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pt.toString(n))}setLimit(e,n,r,s){return new Cb({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pt.toString(s)}]})}_addCheck(e){return new Cb({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Pt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ar.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Cb.create=t=>new Cb({checks:[],typeName:yn.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Fn(t)});class Sb extends nr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ot.bigint)return this._getInvalidInput(e);let r;const s=new Go;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),_t(r,{code:ht.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):ar.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return _t(n,{code:ht.invalid_type,expected:Ot.bigint,received:n.parsedType}),gn}gte(e,n){return this.setLimit("min",e,!0,Pt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pt.toString(n))}setLimit(e,n,r,s){return new Sb({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pt.toString(s)}]})}_addCheck(e){return new Sb({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sb.create=t=>new Sb({checks:[],typeName:yn.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Fn(t)});class YK extends nr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ot.boolean){const r=this._getOrReturnCtx(e);return _t(r,{code:ht.invalid_type,expected:Ot.boolean,received:r.parsedType}),gn}return Rl(e.data)}}YK.create=t=>new YK({typeName:yn.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Fn(t)});class A5 extends nr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ot.date){const a=this._getOrReturnCtx(e);return _t(a,{code:ht.invalid_type,expected:Ot.date,received:a.parsedType}),gn}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return _t(a,{code:ht.invalid_date}),gn}const r=new Go;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),_t(s,{code:ht.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):ar.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new A5({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Pt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Pt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}A5.create=t=>new A5({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:yn.ZodDate,...Fn(t)});class XK extends nr{_parse(e){if(this._getType(e)!==Ot.symbol){const r=this._getOrReturnCtx(e);return _t(r,{code:ht.invalid_type,expected:Ot.symbol,received:r.parsedType}),gn}return Rl(e.data)}}XK.create=t=>new XK({typeName:yn.ZodSymbol,...Fn(t)});class JK extends nr{_parse(e){if(this._getType(e)!==Ot.undefined){const r=this._getOrReturnCtx(e);return _t(r,{code:ht.invalid_type,expected:Ot.undefined,received:r.parsedType}),gn}return Rl(e.data)}}JK.create=t=>new JK({typeName:yn.ZodUndefined,...Fn(t)});class QK extends nr{_parse(e){if(this._getType(e)!==Ot.null){const r=this._getOrReturnCtx(e);return _t(r,{code:ht.invalid_type,expected:Ot.null,received:r.parsedType}),gn}return Rl(e.data)}}QK.create=t=>new QK({typeName:yn.ZodNull,...Fn(t)});class ZK extends nr{constructor(){super(...arguments),this._any=!0}_parse(e){return Rl(e.data)}}ZK.create=t=>new ZK({typeName:yn.ZodAny,...Fn(t)});class eY extends nr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Rl(e.data)}}eY.create=t=>new eY({typeName:yn.ZodUnknown,...Fn(t)});class Af extends nr{_parse(e){const n=this._getOrReturnCtx(e);return _t(n,{code:ht.invalid_type,expected:Ot.never,received:n.parsedType}),gn}}Af.create=t=>new Af({typeName:yn.ZodNever,...Fn(t)});class tY extends nr{_parse(e){if(this._getType(e)!==Ot.undefined){const r=this._getOrReturnCtx(e);return _t(r,{code:ht.invalid_type,expected:Ot.void,received:r.parsedType}),gn}return Rl(e.data)}}tY.create=t=>new tY({typeName:yn.ZodVoid,...Fn(t)});class mu extends nr{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ot.array)return _t(n,{code:ht.invalid_type,expected:Ot.array,received:n.parsedType}),gn;if(s.exactLength!==null){const i=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(i||o)&&(_t(n,{code:i?ht.too_big:ht.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(_t(n,{code:ht.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(_t(n,{code:ht.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,o)=>s.type._parseAsync(new Tf(n,i,n.path,o)))).then(i=>Go.mergeArray(r,i));const a=[...n.data].map((i,o)=>s.type._parseSync(new Tf(n,i,n.path,o)));return Go.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new mu({...this._def,minLength:{value:e,message:Pt.toString(n)}})}max(e,n){return new mu({...this._def,maxLength:{value:e,message:Pt.toString(n)}})}length(e,n){return new mu({...this._def,exactLength:{value:e,message:Pt.toString(n)}})}nonempty(e){return this.min(1,e)}}mu.create=(t,e)=>new mu({type:t,minLength:null,maxLength:null,exactLength:null,typeName:yn.ZodArray,...Fn(e)});function Yp(t){if(t instanceof Xs){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=df.create(Yp(r))}return new Xs({...t._def,shape:()=>e})}else return t instanceof mu?new mu({...t._def,type:Yp(t.element)}):t instanceof df?df.create(Yp(t.unwrap())):t instanceof lv?lv.create(Yp(t.unwrap())):t instanceof g0?g0.create(t.items.map(e=>Yp(e))):t}class Xs extends nr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ar.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ot.object){const u=this._getOrReturnCtx(e);return _t(u,{code:ht.invalid_type,expected:Ot.object,received:u.parsedType}),gn}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Af&&this._def.unknownKeys==="strip"))for(const u in s.data)i.includes(u)||o.push(u);const l=[];for(const u of i){const d=a[u],f=s.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Tf(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Af){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")o.length>0&&(_t(s,{code:ht.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=s.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Tf(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Go.mergeObjectSync(r,u)):Go.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Pt.errToObj,new Xs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,i;const s=((i=(a=this._def).errorMap)==null?void 0:i.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Pt.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Xs({...this._def,unknownKeys:"strip"})}passthrough(){return new Xs({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:yn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Xs({...this._def,catchall:e})}pick(e){const n={};for(const r of ar.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Xs({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ar.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Xs({...this._def,shape:()=>n})}deepPartial(){return Yp(this)}partial(e){const n={};for(const r of ar.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Xs({...this._def,shape:()=>n})}required(e){const n={};for(const r of ar.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof df;)a=a._def.innerType;n[r]=a}return new Xs({...this._def,shape:()=>n})}keyof(){return sfe(ar.objectKeys(this.shape))}}Xs.create=(t,e)=>new Xs({shape:()=>t,unknownKeys:"strip",catchall:Af.create(),typeName:yn.ZodObject,...Fn(e)});Xs.strictCreate=(t,e)=>new Xs({shape:()=>t,unknownKeys:"strict",catchall:Af.create(),typeName:yn.ZodObject,...Fn(e)});Xs.lazycreate=(t,e)=>new Xs({shape:t,unknownKeys:"strip",catchall:Af.create(),typeName:yn.ZodObject,...Fn(e)});class N5 extends nr{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new Vd(o.ctx.common.issues));return _t(n,{code:ht.invalid_union,unionErrors:i}),gn}if(n.common.async)return Promise.all(r.map(async a=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(l=>new Vd(l));return _t(n,{code:ht.invalid_union,unionErrors:o}),gn}}get options(){return this._def.options}}N5.create=(t,e)=>new N5({options:t,typeName:yn.ZodUnion,...Fn(e)});function z7(t,e){const n=Gh(t),r=Gh(e);if(t===e)return{valid:!0,data:t};if(n===Ot.object&&r===Ot.object){const s=ar.objectKeys(e),a=ar.objectKeys(t).filter(o=>s.indexOf(o)!==-1),i={...t,...e};for(const o of a){const l=z7(t[o],e[o]);if(!l.valid)return{valid:!1};i[o]=l.data}return{valid:!0,data:i}}else if(n===Ot.array&&r===Ot.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const i=t[a],o=e[a],l=z7(i,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===Ot.date&&r===Ot.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class j5 extends nr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,i)=>{if(GK(a)||GK(i))return gn;const o=z7(a.value,i.value);return o.valid?((WK(a)||WK(i))&&n.dirty(),{status:n.value,value:o.data}):(_t(r,{code:ht.invalid_intersection_types}),gn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}j5.create=(t,e,n)=>new j5({left:t,right:e,typeName:yn.ZodIntersection,...Fn(n)});class g0 extends nr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ot.array)return _t(r,{code:ht.invalid_type,expected:Ot.array,received:r.parsedType}),gn;if(r.data.length<this._def.items.length)return _t(r,{code:ht.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),gn;!this._def.rest&&r.data.length>this._def.items.length&&(_t(r,{code:ht.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((i,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Tf(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>Go.mergeArray(n,i)):Go.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new g0({...this._def,rest:e})}}g0.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new g0({items:t,typeName:yn.ZodTuple,rest:null,...Fn(e)})};class nY extends nr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ot.map)return _t(r,{code:ht.invalid_type,expected:Ot.map,received:r.parsedType}),gn;const s=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,l],u)=>({key:s._parse(new Tf(r,o,r.path,[u,"key"])),value:a._parse(new Tf(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of i){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return gn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of i){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return gn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}nY.create=(t,e,n)=>new nY({valueType:e,keyType:t,typeName:yn.ZodMap,...Fn(n)});class kb extends nr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ot.set)return _t(r,{code:ht.invalid_type,expected:Ot.set,received:r.parsedType}),gn;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(_t(r,{code:ht.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(_t(r,{code:ht.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function i(l){const u=new Set;for(const d of l){if(d.status==="aborted")return gn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>a._parse(new Tf(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>i(l)):i(o)}min(e,n){return new kb({...this._def,minSize:{value:e,message:Pt.toString(n)}})}max(e,n){return new kb({...this._def,maxSize:{value:e,message:Pt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}kb.create=(t,e)=>new kb({valueType:t,minSize:null,maxSize:null,typeName:yn.ZodSet,...Fn(e)});class rY extends nr{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}rY.create=(t,e)=>new rY({getter:t,typeName:yn.ZodLazy,...Fn(e)});class sY extends nr{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return _t(n,{received:n.data,code:ht.invalid_literal,expected:this._def.value}),gn}return{status:"valid",value:e.data}}get value(){return this._def.value}}sY.create=(t,e)=>new sY({value:t,typeName:yn.ZodLiteral,...Fn(e)});function sfe(t,e){return new iv({values:t,typeName:yn.ZodEnum,...Fn(e)})}class iv extends nr{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return _t(n,{expected:ar.joinValues(r),received:n.parsedType,code:ht.invalid_type}),gn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return _t(n,{received:n.data,code:ht.invalid_enum_value,options:r}),gn}return Rl(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return iv.create(e,{...this._def,...n})}exclude(e,n=this._def){return iv.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}iv.create=sfe;class aY extends nr{_parse(e){const n=ar.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ot.string&&r.parsedType!==Ot.number){const s=ar.objectValues(n);return _t(r,{expected:ar.joinValues(s),received:r.parsedType,code:ht.invalid_type}),gn}if(this._cache||(this._cache=new Set(ar.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ar.objectValues(n);return _t(r,{received:r.data,code:ht.invalid_enum_value,options:s}),gn}return Rl(e.data)}get enum(){return this._def.values}}aY.create=(t,e)=>new aY({values:t,typeName:yn.ZodNativeEnum,...Fn(e)});class D5 extends nr{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ot.promise&&n.common.async===!1)return _t(n,{code:ht.invalid_type,expected:Ot.promise,received:n.parsedType}),gn;const r=n.parsedType===Ot.promise?n.data:Promise.resolve(n.data);return Rl(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}D5.create=(t,e)=>new D5({type:t,typeName:yn.ZodPromise,...Fn(e)});class ov extends nr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===yn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{_t(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(n.value==="aborted")return gn;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?gn:l.status==="dirty"||n.value==="dirty"?Ex(l.value):l});{if(n.value==="aborted")return gn;const o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?gn:o.status==="dirty"||n.value==="dirty"?Ex(o.value):o}}if(s.type==="refinement"){const i=o=>{const l=s.refinement(o,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?gn:(o.status==="dirty"&&n.dirty(),i(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?gn:(o.status==="dirty"&&n.dirty(),i(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!av(i))return gn;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>av(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:n.value,value:o})):gn);ar.assertNever(s)}}ov.create=(t,e,n)=>new ov({schema:t,typeName:yn.ZodEffects,effect:e,...Fn(n)});ov.createWithPreprocess=(t,e,n)=>new ov({schema:e,effect:{type:"preprocess",transform:t},typeName:yn.ZodEffects,...Fn(n)});class df extends nr{_parse(e){return this._getType(e)===Ot.undefined?Rl(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}df.create=(t,e)=>new df({innerType:t,typeName:yn.ZodOptional,...Fn(e)});class lv extends nr{_parse(e){return this._getType(e)===Ot.null?Rl(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lv.create=(t,e)=>new lv({innerType:t,typeName:yn.ZodNullable,...Fn(e)});class $7 extends nr{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ot.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}$7.create=(t,e)=>new $7({innerType:t,typeName:yn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fn(e)});class U7 extends nr{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return T5(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Vd(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vd(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}U7.create=(t,e)=>new U7({innerType:t,typeName:yn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fn(e)});class iY extends nr{_parse(e){if(this._getType(e)!==Ot.nan){const r=this._getOrReturnCtx(e);return _t(r,{code:ht.invalid_type,expected:Ot.nan,received:r.parsedType}),gn}return{status:"valid",value:e.data}}}iY.create=t=>new iY({typeName:yn.ZodNaN,...Fn(t)});class Ldt extends nr{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class LO extends nr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?gn:a.status==="dirty"?(n.dirty(),Ex(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?gn:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new LO({in:e,out:n,typeName:yn.ZodPipeline})}}class H7 extends nr{_parse(e){const n=this._def.innerType._parse(e),r=s=>(av(s)&&(s.value=Object.freeze(s.value)),s);return T5(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}H7.create=(t,e)=>new H7({innerType:t,typeName:yn.ZodReadonly,...Fn(e)});var yn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(yn||(yn={}));const Nf=sf.create;Af.create;mu.create;const t_=Xs.create;N5.create;j5.create;g0.create;iv.create;D5.create;df.create;lv.create;const oY=(t,e,n)=>{if(t&&"reportValidity"in t){const r=bt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},V7=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?oY(r.ref,n,t):r&&r.refs&&r.refs.forEach(s=>oY(s,n,t))}},lY=(t,e)=>{e.shouldUseNativeValidation&&V7(t,e);const n={};for(const r in t){const s=bt(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(zdt(e.names||Object.keys(t),r)){const i=Object.assign({},bt(n,r));br(i,"root",a),br(n,r,i)}else br(n,r,a)}return n},zdt=(t,e)=>{const n=cY(e);return t.some(r=>cY(r).match(`^${n}\\.\\d+`))};function cY(t){return t.replace(/\]|\[/g,"")}function afe(t,e,n){function r(o,l){var u;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(u=o._zod).traits??(u.traits=new Set),o._zod.traits.add(t),e(o,l);for(const d in i.prototype)d in o||Object.defineProperty(o,d,{value:i.prototype[d].bind(o)});o._zod.constr=i,o._zod.def=l}const s=(n==null?void 0:n.Parent)??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function i(o){var l;const u=n!=null&&n.Parent?new a:this;r(u,o),(l=u._zod).deferred??(l.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:o=>{var l,u;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(u=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:u.has(t)}}),Object.defineProperty(i,"name",{value:t}),i}class $dt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Udt={};function ife(t){return Udt}function Hdt(t,e){return typeof e=="bigint"?e.toString():e}const ofe=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function sS(t){return typeof t=="string"?t:t==null?void 0:t.message}function lfe(t,e,n){var s,a,i,o,l,u;const r={...t,path:t.path??[]};if(!t.message){const d=sS((i=(a=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:a.error)==null?void 0:i.call(a,t))??sS((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??sS((l=n.customError)==null?void 0:l.call(n,t))??sS((u=n.localeError)==null?void 0:u.call(n,t))??"Invalid input";r.message=d}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const cfe=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,Hdt,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Vdt=afe("$ZodError",cfe),ufe=afe("$ZodError",cfe,{Parent:Error}),qdt=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},i=e._zod.run({value:n,issues:[]},a);if(i instanceof Promise)throw new $dt;if(i.issues.length){const o=new((s==null?void 0:s.Err)??t)(i.issues.map(l=>lfe(l,a,ife())));throw ofe(o,s==null?void 0:s.callee),o}return i.value},Gdt=qdt(ufe),Wdt=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){const o=new((s==null?void 0:s.Err)??t)(i.issues.map(l=>lfe(l,a,ife())));throw ofe(o,s==null?void 0:s.callee),o}return i.value},Kdt=Wdt(ufe);function uY(t,e){try{var n=t()}catch(r){return e(r)}return n&&n.then?n.then(void 0,e):n}function Ydt(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,i=r.path.join(".");if(!n[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var l=n[i].types,u=l&&l[r.code];n[i]=OO(i,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n}function Xdt(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,i=r.path.join(".");if(!n[i])if(r.code==="invalid_union"&&r.errors.length>0){var o=r.errors[0][0];n[i]={message:o.message,type:o.code}}else n[i]={message:a,type:s};if(r.code==="invalid_union"&&r.errors.forEach(function(d){return d.forEach(function(f){return t.push(f)})}),e){var l=n[i].types,u=l&&l[r.code];n[i]=OO(i,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n}function n_(t,e,n){if(n===void 0&&(n={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(t))return function(r,s,a){try{return Promise.resolve(uY(function(){return Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(i){return a.shouldUseNativeValidation&&V7({},a),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(o){return Array.isArray(o==null?void 0:o.issues)})(i))return{values:{},errors:lY(Ydt(i.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(t))return function(r,s,a){try{return Promise.resolve(uY(function(){return Promise.resolve((n.mode==="sync"?Gdt:Kdt)(t,r,e)).then(function(i){return a.shouldUseNativeValidation&&V7({},a),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(o){return o instanceof Vdt})(i))return{values:{},errors:lY(Xdt(i.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}const Jdt=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],r_=({form:t})=>{const[e,n]=y.useState(""),r=y.useMemo(()=>Array.from({length:80},(o,l)=>c.jsx(Xt,{value:String(2025-l),children:2025-l},2025-l)),[]),s=y.useMemo(()=>Jdt.map(o=>c.jsx(Xt,{value:o.value,children:o.label},o.value)),[]);y.useCallback((o,l)=>!o||!l?(n("Please select both month and year"),!1):(n(""),!0),[]);const a=()=>c.jsx(zK,{control:t.control,name:"month",render:({field:o})=>c.jsxs($K,{children:[c.jsx(UK,{className:"text-black text-base",children:"Month"}),c.jsxs(jo,{value:o.value,onValueChange:l=>{o.onChange(l)},children:[c.jsx(HK,{children:c.jsx(Do,{id:"month-select",className:`w-full rounded-lg text-gray-500 ${t.formState.errors.month?"border-red-500 focus:ring-red-500":""}`,children:c.jsx(Td,{placeholder:"Month"})})}),c.jsx(Ro,{children:s})]}),c.jsx(VK,{className:"text-red-500 text-sm mt-1"})]})}),i=()=>c.jsx(zK,{control:t.control,name:"year",render:({field:o})=>c.jsxs($K,{children:[c.jsx(UK,{className:"text-black text-base",children:"Year"}),c.jsxs(jo,{value:o.value,onValueChange:l=>{o.onChange(l)},children:[c.jsx(HK,{children:c.jsx(Do,{id:"year-select",className:`w-full rounded-lg px-[12px] py-[10px] text-gray-500 ${t.formState.errors.year?"border-red-500 focus:ring-red-500":""}`,children:c.jsx(Td,{placeholder:"Year"})})}),c.jsx(Ro,{children:c.jsx(Yx,{className:"h-[300px]",children:r})})]}),c.jsx(VK,{className:"text-red-500 text-sm mt-1"})]})});return c.jsxs("div",{children:[c.jsxs("div",{className:"flex gap-[4px] items-center mb-[10px]",children:[c.jsx(Zhe,{className:"text-black text-base",children:"Date of Birth:"}),c.jsxs(ga,{children:[c.jsx(Ia,{children:c.jsx(S0,{className:"w-[16px] h-[16px] text-gray-500"})}),c.jsx(va,{children:"We only need your age to verify that you can legally use our service."})]})]}),c.jsxs("div",{className:"flex gap-[10px]",children:[c.jsx("div",{className:"flex-1",children:a()}),c.jsx("div",{className:"flex-1",children:i()})]})]})},Qdt=kc(Nl,jl),Zdt=t_({month:Nf().min(1,"Please select a month"),year:Nf().min(1,"Please select a year")}),eht=({method:t})=>{const[e,n]=y.useState(""),[r,s]=y.useState(""),[a,i]=y.useState(""),[o,l]=y.useState(!0),[u,d]=y.useState(""),[f,m]=y.useState(!1),{setAuthStep:g,setToken:x,setEmailLogin:b,uuid:C,setAgeBand:S}=kr(),w=ZE({resolver:n_(Zdt),defaultValues:{month:"",year:""}}),E=async()=>{m(!0);let A;const j=await Qdt.auth.signInWithOtp({email:e,options:{data:{full_name:u}}});j.data,A=j.error,A?(console.error(A),m(!1)):(console.log("Magic link sent to:",e),g("magicLinkSent"))},T=()=>{const A=w.getValues(),j=A.month,D=A.year;return!(!j||!D)};y.useEffect(()=>{const A=w.watch(j=>{l(!T())});return()=>A.unsubscribe()},[w]),y.useRef(null);const _=A=>{var z;if(A.preventDefault(),console.log("checkAge",o),o)return;const{year:j,month:D}=w.getValues();if(new Date().getFullYear()-parseInt(j)<13||new Date().getFullYear()-parseInt(j)===13&&new Date().getMonth()+1<parseInt(D)){(z=window==null?void 0:window.top)==null||z.postMessage({type:"AUTH_UNDER_AGE"},"*"),g("underAge");return}else S(T8(parseInt(j))),b(e),E()};return y.useEffect(()=>{Eu("signup_email_loaded",{distinct_id:C})},[]),c.jsxs("div",{className:"px-[30px] flex flex-col gap-[10px]",children:[c.jsx("h1",{className:"text-2xl font-semibold mb-[5px]",children:"Join now (takes 30 secs)"}),c.jsx("p",{className:"text-gray-500",children:"Over 1.5 million students made their Canvas better."}),c.jsx(e_,{...w,children:c.jsxs("form",{children:[c.jsx(r_,{form:w}),c.jsxs("div",{className:`mt-2 ${o?"opacity-50 pointer-events-none":""}`,children:[c.jsx("p",{className:"text-black text-base font-medium",children:"Email"}),c.jsx("input",{type:"text",value:u,onChange:A=>d(A.target.value),placeholder:"Name",className:"w-full rounded-lg shadow-xs text-gray-500 text-sm p-[10px] border border-gray-200"}),c.jsx("input",{className:"mt-2 w-full rounded-lg shadow-xs text-gray-500 text-sm p-[10px] border border-gray-200",type:"email",placeholder:"lebronjames@gmail.com",value:e,onChange:A=>n(A.target.value),onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),_(A))}}),c.jsx("button",{onClick:_,className:`mt-2 w-full rounded-full shadow-xs text-white text-sm p-[10px] border border-gray-200 ${e.includes("@")?"opacity-100":"opacity-50 pointer-events-none"} `,style:{background:"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},children:"Sign up"})]})]})}),c.jsxs("div",{className:"text-[11px] text-gray-500 mt-2 flex-1",children:["By signing up, you acknowledge that you have read, understood, and agree to the BetterCampus ",c.jsx("a",{href:"/terms",target:"_blank",className:"text-blue-500",children:"Terms"})," and ",c.jsx("a",{href:"/privacy",target:"_blank",className:"text-blue-500",children:"Privacy Policy"})]})]})};function tht(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[s,a]=y.useState(!1),i=y.useRef(n);i.current=n;const o=y.useRef(r);return o.current=r,y.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=e,l.onload=()=>{var u;a(!0),(u=i.current)===null||u===void 0||u.call(i)},l.onerror=()=>{var u;a(!1),(u=o.current)===null||u===void 0||u.call(o)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[e]),s}const dfe=y.createContext(null);function s_({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:s}){const a=tht({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),i=y.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:a}),[t,a]);return Ce.createElement(dfe.Provider,{value:i},s)}function hfe(){const t=y.useContext(dfe);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function nht(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const rht={large:40,medium:32,small:20};function ffe({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:r,type:s="standard",theme:a="outline",size:i="large",text:o,shape:l,logo_alignment:u,width:d,locale:f,click_listener:m,containerProps:g,...x}){const b=y.useRef(null),{clientId:C,scriptLoadedSuccessfully:S}=hfe(),w=y.useRef(t);w.current=t;const E=y.useRef(e);E.current=e;const T=y.useRef(r);return T.current=r,y.useEffect(()=>{var _,A,j,D,z,F,R,L,O;if(S)return(j=(A=(_=window==null?void 0:window.google)===null||_===void 0?void 0:_.accounts)===null||A===void 0?void 0:A.id)===null||j===void 0||j.initialize({client_id:C,callback:H=>{var P;if(!(H!=null&&H.credential))return(P=E.current)===null||P===void 0?void 0:P.call(E);const{credential:I,select_by:U}=H;w.current({credential:I,clientId:nht(H),select_by:U})},...x}),(F=(z=(D=window==null?void 0:window.google)===null||D===void 0?void 0:D.accounts)===null||z===void 0?void 0:z.id)===null||F===void 0||F.renderButton(b.current,{type:s,theme:a,size:i,text:o,shape:l,logo_alignment:u,width:d,locale:f,click_listener:m}),n&&((O=(L=(R=window==null?void 0:window.google)===null||R===void 0?void 0:R.accounts)===null||L===void 0?void 0:L.id)===null||O===void 0||O.prompt(T.current)),()=>{var H,P,I;n&&((I=(P=(H=window==null?void 0:window.google)===null||H===void 0?void 0:H.accounts)===null||P===void 0?void 0:P.id)===null||I===void 0||I.cancel())}},[C,S,n,s,a,i,o,l,u,d,f]),Ce.createElement("div",{...g,ref:b,style:{height:rht[i],...g==null?void 0:g.style}})}function sht({flow:t="implicit",scope:e="",onSuccess:n,onError:r,onNonOAuthError:s,overrideScope:a,state:i,...o}){const{clientId:l,scriptLoadedSuccessfully:u}=hfe(),d=y.useRef(),f=y.useRef(n);f.current=n;const m=y.useRef(r);m.current=r;const g=y.useRef(s);g.current=s,y.useEffect(()=>{var C,S;if(!u)return;const w=t==="implicit"?"initTokenClient":"initCodeClient",E=(S=(C=window==null?void 0:window.google)===null||C===void 0?void 0:C.accounts)===null||S===void 0?void 0:S.oauth2[w]({client_id:l,scope:a?e:`openid profile email ${e}`,callback:T=>{var _,A;if(T.error)return(_=m.current)===null||_===void 0?void 0:_.call(m,T);(A=f.current)===null||A===void 0||A.call(f,T)},error_callback:T=>{var _;(_=g.current)===null||_===void 0||_.call(g,T)},state:i,...o});d.current=E},[l,u,t,e,i]);const x=y.useCallback(C=>{var S;return(S=d.current)===null||S===void 0?void 0:S.requestAccessToken(C)},[]),b=y.useCallback(()=>{var C;return(C=d.current)===null||C===void 0?void 0:C.requestCode()},[]);return t==="implicit"?x:b}const aht=kc(Nl,jl),mfe=()=>{const[t,e]=y.useState({}),[n,r]=y.useState(!1),[s,a]=y.useState(!1),[i,o]=y.useState(null),{setToken:l}=kr();return{success:n,error:i,loading:s,googleLogin:async d=>{try{return a(!0),o(null),localStorage.setItem("last_used_login_method","google"),aht.auth.signInWithIdToken({provider:"google",token:d==null?void 0:d.credential})}catch(f){console.error("Login error:",f),o("An unexpected error occurred during login. Please try again.")}finally{a(!1)}}}},iht=t_({month:Nf().min(1,"Please select a month"),year:Nf().min(1,"Please select a year")}),oht="1040020018644-6cb03fh4mg7j5sse5cu9s46ihn9g7d56.apps.googleusercontent.com";kc(Nl,jl);const lht=()=>{const{setAuthStep:t,uuid:e,setAgeBand:n,token:r,handleAuth:s,loginState:a}=kr(),[i,o]=y.useState(!0),{updateOptions:l}=ut(),{googleLogin:u}=mfe(),d=ZE({resolver:n_(iht),defaultValues:{month:"",year:""}}),f=()=>{const b=d.getValues(),C=b.month,S=b.year;return!(!C||!S)};y.useEffect(()=>{const b=d.watch(C=>{o(!f())});return()=>b.unsubscribe()},[d]),y.useEffect(()=>{Eu("signup_google_loaded",{distinct_id:e})},[]);const m=y.useRef(null),g=()=>{var S;if(i)return;const{year:b,month:C}=d.getValues();if(new Date().getFullYear()-parseInt(b)<13||new Date().getFullYear()-parseInt(b)===13&&new Date().getMonth()+1<parseInt(C)){t("underAge");return}else(S=m.current)==null||S.remove(),n(T8(parseInt(b)))},x=async b=>{const C=u(b);s(C,"signup")};return c.jsx(s_,{clientId:oht,children:c.jsxs("div",{className:"px-[30px] text-gray-500 flex flex-col w-full",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Join now (takes 30 secs)"}),c.jsx("p",{children:"Over 1.5 million students made their Canvas better."}),c.jsx("div",{className:"mt-[20px]",children:c.jsx(e_,{...d,children:c.jsxs("form",{children:[c.jsx(r_,{form:d}),c.jsxs("div",{className:`mt-4 relative ${i?"opacity-50 pointer-events-none":""}`,children:[c.jsx("div",{ref:m,className:"w-full h-full absolute top-0 left-0 z-10 bg-none",onMouseOver:g}),c.jsx(ffe,{click_listener:g,onSuccess:x,ux_mode:"popup",type:"standard",shape:"rectangular",size:"large",auto_select:!1}),a.loading&&c.jsxs("span",{className:"text-gray-500 text-sm flex items-center gap-2 mt-2",children:[c.jsx(js,{className:"w-4 h-4 animate-spin"})," Signing in..."]}),a.success&&c.jsxs("span",{className:"text-green-700 text-sm flex items-center gap-2 mt-2",children:[c.jsx(or,{className:"w-4 h-4"})," Success!"]}),a.error&&c.jsxs("span",{className:"text-red-700 text-sm flex items-center gap-2 mt-2",children:[c.jsx(ys,{className:"w-4 h-4"})," ",a.error]})]})]})})}),c.jsxs("div",{className:"text-[11px] text-gray-500 mt-2 flex-1",children:["By signing up, you acknowledge that you have read, understood, and agree to the BetterCampus ",c.jsx("a",{href:"/terms",target:"_blank",className:"text-blue-500",children:"Terms"})," and ",c.jsx("a",{href:"/privacy",target:"_blank",className:"text-blue-500",children:"Privacy Policy"})]})]})})},pfe=()=>{const{closeModal:t,updateOptions:e}=ut(),{uuid:n}=kr(),r=()=>{e({auth_state:"underage"}),t(),Eu("signup_underage",{distinct_id:n})};return c.jsxs("div",{className:"px-[30px] text-gray-500",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Almost there..."}),c.jsxs("p",{children:["You can still use BetterCampus to make your Canvas look awesome - ",c.jsx("span",{className:"font-medium text-black",children:"no account needed."})]}),c.jsx("p",{className:"mt-[20px]",children:"Check back when you turn 13 - we'll be waiting with even more features."}),c.jsx("p",{className:"mt-[20px]",children:" The BetterCampus Team"}),c.jsx("button",{className:"w-full mt-[20px] text-white px-4 py-2 rounded-full hover:brightness-95 transition-all duration-200",style:{background:"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},onClick:r,children:"Continue without account"})]})},cht=["Theming","Time Management","Organization","Studying"],gfe=()=>{const{setAuthStep:t,school:e,uuid:n,token:r,ageBand:s}=kr(),[a,i]=y.useState(!1),[o,l]=y.useState(""),[u,d]=y.useState(e||""),[f,m]=y.useState(""),[g,x]=y.useState(""),[b,C]=y.useState([]),S=_=>{C(A=>A.includes(_)?A.filter(j=>j!==_):[...A,_])},[w,E]=y.useState({studentType:!1,schoolName:!1,graduationYear:!1,reference:!1}),T=async()=>{try{await Eu("finished_questionairre",{distinct_id:n,origin:e,student_type:o,graduation_year:f,reference:g,reasons:b})}catch{}t("questionairre3")};return c.jsxs("div",{className:"px-[30px] mb-[30px] flex flex-col h-full h-full text-gray-500",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Welcome to BetterCampus!"}),c.jsx("p",{children:"Real quick - tell us a bit about you"})]}),c.jsxs("div",{className:"flex flex-col gap-[10px] mt-[10px]",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-black mb-[5px]",children:"What type of student are you?"}),c.jsxs(jo,{value:o,onValueChange:_=>{l(_),E(A=>({...A,studentType:!1}))},children:[c.jsx(Do,{className:`${w.studentType?"ring-2 ring-red-500 ring-opacity-50 shadow-lg shadow-red-500/25":""}`,children:c.jsx(Td,{placeholder:"Select"})}),c.jsxs(Ro,{children:[c.jsx(Xt,{value:"middle",children:"Middle school"}),c.jsx(Xt,{value:"high",children:"High School"}),c.jsx(Xt,{value:"university",children:"Undergraduate / University"}),c.jsx(Xt,{value:"instructor",children:"Instructor"})]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-black mb-[5px]",children:"What year do you graduate?"}),c.jsxs(jo,{value:f,onValueChange:_=>{m(_),E(A=>({...A,graduationYear:!1}))},children:[c.jsx(Do,{className:`${w.graduationYear?"ring-2 ring-red-500 ring-opacity-50 shadow-lg shadow-red-500/25":""}`,children:c.jsx(Td,{placeholder:"Select"})}),c.jsxs(Ro,{children:[c.jsx(Xt,{value:"2026",children:"2026"}),c.jsx(Xt,{value:"2027",children:"2027"}),c.jsx(Xt,{value:"2028",children:"2028"}),c.jsx(Xt,{value:"2029",children:"2029"}),c.jsx(Xt,{value:"2030",children:"2030"}),c.jsx(Xt,{value:"2031",children:"2031"}),c.jsx(Xt,{value:"2032",children:"2032+"})]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-black mb-[5px]",children:"Where did you first hear about us?"}),c.jsxs(jo,{value:g,onValueChange:_=>{x(_),E(A=>({...A,reference:!1}))},children:[c.jsx(Do,{className:`${w.reference?"ring-2 ring-red-500 ring-opacity-50 shadow-lg shadow-red-500/25":""}`,children:c.jsx(Td,{placeholder:"Select"})}),c.jsxs(Ro,{children:[c.jsx(Xt,{value:"saw",children:"Saw someone using it"}),c.jsx(Xt,{value:"friend",children:"Friend showed me"}),c.jsx(Xt,{value:"tiktok",children:"TikTok"}),c.jsx(Xt,{value:"instagram",children:"Instagram"}),c.jsx(Xt,{value:"twitter",children:"Twitter/X"}),c.jsx(Xt,{value:"youtube",children:"YouTube"}),c.jsx(Xt,{value:"school",children:"School/teacher"}),c.jsx(Xt,{value:"other",children:"Other"})]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-black mb-[5px]",children:"How can BetterCanvas help you?"}),c.jsx("div",{className:"flex flex-wrap gap-x-2 gap-y-2",children:cht.map(_=>{const A=b.includes(_);return c.jsxs("button",{onClick:()=>S(_),className:ge("relative flex items-center justify-center py-1.5 rounded-full border text-xs font-medium transition-all duration-200 pl-2.5 pr-7",A?"bg-[#ff7a5c] text-white border-[#ff7a5c]":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"),children:[c.jsx("span",{className:"inset-0 flex items-center justify-center opacity-0 pointer-events-none",children:_}),c.jsx(pa.span,{className:"absolute  z-1 inset-0 flex items-center justify-center",initial:{x:0},animate:{x:A?-8:0},transition:{duration:.1},children:_}),c.jsx("span",{className:"absolute right-2 w-3 h-3 flex items-center justify-center",children:A&&c.jsx(or,{className:"w-3 h-3"})})]},_)})})]})]}),c.jsx("div",{className:"flex-1 flex flex-col justify-end gap-[10px] mt-4",children:c.jsx("button",{style:{background:"linear-gradient(90deg, #ffa952,#ff686c)"},className:"flex items-center justify-center gap-[8px] py-[12px] rounded-full w-full font-medium text-white",onClick:T,children:"Next 1/2"})})]})},vfe=()=>{const{uuid:t,handleAuthFinish:e}=kr(),{closeModal:n,updateOptions:r}=ut(),s=()=>{e(),n()};return y.useEffect(()=>{Eu("signup_thank_you_loaded",{distinct_id:t})},[]),c.jsxs("div",{className:"px-[30px] mb-[30px] flex flex-col justify-center align-center h-full h-full text-gray-500",children:[c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsxs("div",{children:[c.jsx("img",{src:"/extlogo.png",alt:"logo",className:"size-8"}),c.jsx("h1",{className:"text-2xl font-medium text-black my-4 max-w-[66%]",children:"Thank you for using BetterCampus "}),c.jsx("button",{onClick:()=>s(),style:{background:"linear-gradient(90deg, #ffa952,#ff686c)"},className:"mt-[20px] flex items-center justify-center gap-[8px] py-[12px] rounded-full w-full font-medium text-white shadow-[0_0_20px_#ff7e5299]",children:"Start using BetterCampus!"})]})}),c.jsx("div",{className:"flex flex-col justify-end",children:c.jsx("p",{className:"text-gray-500 text-xs",children:"P.S. get a friend to join, our parents might finally stop asking about 'real jobs'."})})]})},uht=()=>{const{setAuthStep:t,uuid:e}=kr();return y.useEffect(()=>{Eu("signup_logins_loaded",{distinct_id:e})},[]),c.jsxs("div",{className:"px-[30px] flex flex-col h-full",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold mb-[5px]",children:"Join now (takes 30 secs)"}),c.jsx("p",{className:"text-gray-500",children:"Over 1.5 million students made their Canvas better"})]}),c.jsxs("div",{className:"font-medium my-5 flex flex-col gap-1 ml-1",children:[c.jsxs("p",{children:[c.jsx("span",{className:"mr-[5px]",children:""})," Make canvas your own"]}),c.jsxs("p",{children:[c.jsx("span",{className:"mr-[5px]",children:""})," Stay on top of every assignment"]}),c.jsxs("p",{children:[c.jsx("span",{className:"mr-[5px]",children:""})," Study faster and smarter"]})]}),c.jsxs("div",{className:"flex flex-col gap-[10px] mt-[10px]",children:[c.jsxs("button",{onClick:()=>t("googleSignup"),className:"bg-white hover:brightness-95 transition-all duration-200 flex justify-center items-center rounded-xl w-full p-3.5 border border-[#e5e5e5] gap-[10px] font-medium",children:[c.jsx(zv,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Continue with Google"})]}),c.jsx("div",{children:c.jsxs("button",{onClick:()=>t("outlookSignup"),className:"bg-white hover:brightness-95 transition-all duration-200 flex justify-center items-center rounded-xl w-full p-3.5 border border-[#e5e5e5] gap-[10px] font-medium",children:[c.jsx(gE,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Continue with Outlook"})]})})]}),c.jsx("div",{className:"my-4",children:c.jsx("div",{className:"h-[1px] bg-gray-200 w-full relative",children:c.jsx("div",{className:"text-gray-500 text-center text-sm w-full h-full absolute left-0 top-0 flex items-center justify-center",children:c.jsx("span",{className:"bg-white px-2 text-xs",children:"OR"})})})}),c.jsx("div",{children:c.jsxs("button",{onClick:()=>t("emailSignup"),className:"bg-white hover:brightness-95 transition-all duration-200 flex justify-center items-center rounded-xl w-full p-3.5 border border-[#e5e5e5] gap-[10px] font-medium",children:[c.jsx(hZ,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Continue with Email"})]})}),c.jsx("div",{className:"flex flex-col gap-[10px] flex-1 mb-[30px]",children:c.jsxs("div",{className:"mt-auto w-full text-sm p-[10px] text-gray-500 text-center",children:["Already have an account? ",c.jsx("a",{href:"/login",className:"underline font-medium text-black",children:"Log in"})]})})]})},dht=()=>{const{step:t,setAuthStep:e,uuid:n,setShowConfetti:r}=kr(),[s,a]=y.useState(5);y.useEffect(()=>{Eu("signup_welcome_loaded",{distinct_id:n})},[]),y.useEffect(()=>{if(s<=0)return;const o=setTimeout(()=>a(l=>l-1),1e3);return()=>clearTimeout(o)},[s]);const i=()=>{r(!0),e("quickSettings")};return c.jsxs("div",{className:"flex-1 flex flex-col h-full px-[30px]",children:[c.jsxs("h1",{className:"text-3xl font-semibold mt-[20px]",children:["Finally, the new ",c.jsx("span",{className:"text-gray-400 line-through decoration-[2px]",children:"BetterCanvas"})," BetterCampus!"]}),c.jsx("p",{className:"text-base text-gray-500 mt-[60px]",children:"What's new?"}),c.jsxs("ul",{className:"text-base text-black flex flex-col gap-[10px] font-medium mt-[10px]",children:[c.jsxs("li",{children:["1. More features than ever ",c.jsx("span",{className:"text-gray-500 text-sm",children:"(we hope they actually work)"})]}),c.jsxs("li",{children:["2. Pro version with extra magic ",c.jsx("span",{className:"text-gray-500 text-sm",children:"(totally optional)"})]}),c.jsxs("li",{children:["3. New name ",c.jsx("span",{className:"text-gray-500 text-sm",children:"(Canvas didn't like the old one )"})]})]}),c.jsx("button",{onClick:i,disabled:s>0,style:{background:s>0?"#d1d5db":"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},className:`mt-8 rounded-xl font-semibold p-3.5 text-white transition-all duration-200 ${s>0?"cursor-not-allowed":"hover:brightness-95 shadow-[0_0_20px_#ff7e5299]"}`,children:s>0?"Please Wait...":"Experience the NEW BetterCampus"}),s>0&&c.jsxs("p",{className:"text-center text-gray-500 text-sm mt-2",children:["Continue in ",s," second",s!==1?"s":""]})]})};function hht(t){return Object.prototype.toString.call(t)==="[object Object]"}function dY(t){return hht(t)||Array.isArray(t)}function fht(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function zO(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(t.breakpoints||{})),a=JSON.stringify(Object.keys(e.breakpoints||{}));return s!==a?!1:n.every(i=>{const o=t[i],l=e[i];return typeof o=="function"?`${o}`==`${l}`:!dY(o)||!dY(l)?o===l:zO(o,l)})}function hY(t){return t.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function mht(t,e){if(t.length!==e.length)return!1;const n=hY(t),r=hY(e);return n.every((s,a)=>{const i=r[a];return zO(s,i)})}function $O(t){return typeof t=="number"}function q7(t){return typeof t=="string"}function a_(t){return typeof t=="boolean"}function fY(t){return Object.prototype.toString.call(t)==="[object Object]"}function gs(t){return Math.abs(t)}function UO(t){return Math.sign(t)}function l1(t,e){return gs(t-e)}function pht(t,e){if(t===0||e===0||gs(t)<=gs(e))return 0;const n=l1(gs(t),gs(e));return gs(n/t)}function ght(t){return Math.round(t*100)/100}function Eb(t){return _b(t).map(Number)}function hc(t){return t[Hw(t)]}function Hw(t){return Math.max(0,t.length-1)}function HO(t,e){return e===Hw(t)}function mY(t,e=0){return Array.from(Array(t),(n,r)=>e+r)}function _b(t){return Object.keys(t)}function yfe(t,e){return[t,e].reduce((n,r)=>(_b(r).forEach(s=>{const a=n[s],i=r[s],o=fY(a)&&fY(i);n[s]=o?yfe(a,i):i}),n),{})}function G7(t,e){return typeof e.MouseEvent<"u"&&t instanceof e.MouseEvent}function vht(t,e){const n={start:r,center:s,end:a};function r(){return 0}function s(l){return a(l)/2}function a(l){return e-l}function i(l,u){return q7(t)?n[t](l):t(e,l,u)}return{measure:i}}function Tb(){let t=[];function e(s,a,i,o={passive:!0}){let l;if("addEventListener"in s)s.addEventListener(a,i,o),l=()=>s.removeEventListener(a,i,o);else{const u=s;u.addListener(i),l=()=>u.removeListener(i)}return t.push(l),r}function n(){t=t.filter(s=>s())}const r={add:e,clear:n};return r}function yht(t,e,n,r){const s=Tb(),a=1e3/60;let i=null,o=0,l=0;function u(){s.add(t,"visibilitychange",()=>{t.hidden&&x()})}function d(){g(),s.clear()}function f(C){if(!l)return;i||(i=C,n(),n());const S=C-i;for(i=C,o+=S;o>=a;)n(),o-=a;const w=o/a;r(w),l&&(l=e.requestAnimationFrame(f))}function m(){l||(l=e.requestAnimationFrame(f))}function g(){e.cancelAnimationFrame(l),i=null,o=0,l=0}function x(){i=null,o=0}return{init:u,destroy:d,start:m,stop:g,update:n,render:r}}function xht(t,e){const n=e==="rtl",r=t==="y",s=r?"y":"x",a=r?"x":"y",i=!r&&n?-1:1,o=d(),l=f();function u(x){const{height:b,width:C}=x;return r?b:C}function d(){return r?"top":n?"right":"left"}function f(){return r?"bottom":n?"left":"right"}function m(x){return x*i}return{scroll:s,cross:a,startEdge:o,endEdge:l,measureSize:u,direction:m}}function v0(t=0,e=0){const n=gs(t-e);function r(u){return u<t}function s(u){return u>e}function a(u){return r(u)||s(u)}function i(u){return a(u)?r(u)?t:e:u}function o(u){return n?u-n*Math.ceil((u-e)/n):u}return{length:n,max:e,min:t,constrain:i,reachedAny:a,reachedMax:s,reachedMin:r,removeOffset:o}}function xfe(t,e,n){const{constrain:r}=v0(0,t),s=t+1;let a=i(e);function i(m){return n?gs((s+m)%s):r(m)}function o(){return a}function l(m){return a=i(m),f}function u(m){return d().set(o()+m)}function d(){return xfe(t,o(),n)}const f={get:o,set:l,add:u,clone:d};return f}function bht(t,e,n,r,s,a,i,o,l,u,d,f,m,g,x,b,C,S,w){const{cross:E,direction:T}=t,_=["INPUT","SELECT","TEXTAREA"],A={passive:!1},j=Tb(),D=Tb(),z=v0(50,225).constrain(g.measure(20)),F={mouse:300,touch:400},R={mouse:500,touch:600},L=x?43:25;let O=!1,H=0,P=0,I=!1,U=!1,W=!1,Y=!1;function B(oe){if(!w)return;function Ne(He){(a_(w)||w(oe,He))&&ie(He)}const ve=e;j.add(ve,"dragstart",He=>He.preventDefault(),A).add(ve,"touchmove",()=>{},A).add(ve,"touchend",()=>{}).add(ve,"touchstart",Ne).add(ve,"mousedown",Ne).add(ve,"touchcancel",fe).add(ve,"contextmenu",fe).add(ve,"click",se,!0)}function Z(){j.clear(),D.clear()}function le(){const oe=Y?n:e;D.add(oe,"touchmove",de,A).add(oe,"touchend",fe).add(oe,"mousemove",de,A).add(oe,"mouseup",fe)}function G(oe){const Ne=oe.nodeName||"";return _.includes(Ne)}function K(){return(x?R:F)[Y?"mouse":"touch"]}function te(oe,Ne){const ve=f.add(UO(oe)*-1),He=d.byDistance(oe,!x).distance;return x||gs(oe)<z?He:C&&Ne?He*.5:d.byIndex(ve.get(),0).distance}function ie(oe){const Ne=G7(oe,r);Y=Ne,W=x&&Ne&&!oe.buttons&&O,O=l1(s.get(),i.get())>=2,!(Ne&&oe.button!==0)&&(G(oe.target)||(I=!0,a.pointerDown(oe),u.useFriction(0).useDuration(0),s.set(i),le(),H=a.readPoint(oe),P=a.readPoint(oe,E),m.emit("pointerDown")))}function de(oe){if(!G7(oe,r)&&oe.touches.length>=2)return fe(oe);const ve=a.readPoint(oe),He=a.readPoint(oe,E),nt=l1(ve,H),Me=l1(He,P);if(!U&&!Y&&(!oe.cancelable||(U=nt>Me,!U)))return fe(oe);const $e=a.pointerMove(oe);nt>b&&(W=!0),u.useFriction(.3).useDuration(.75),o.start(),s.add(T($e)),oe.preventDefault()}function fe(oe){const ve=d.byDistance(0,!1).index!==f.get(),He=a.pointerUp(oe)*K(),nt=te(T(He),ve),Me=pht(He,nt),$e=L-10*Me,Le=S+Me/50;U=!1,I=!1,D.clear(),u.useDuration($e).useFriction(Le),l.distance(nt,!x),Y=!1,m.emit("pointerUp")}function se(oe){W&&(oe.stopPropagation(),oe.preventDefault(),W=!1)}function ce(){return I}return{init:B,destroy:Z,pointerDown:ce}}function wht(t,e){let r,s;function a(f){return f.timeStamp}function i(f,m){const x=`client${(m||t.scroll)==="x"?"X":"Y"}`;return(G7(f,e)?f:f.touches[0])[x]}function o(f){return r=f,s=f,i(f)}function l(f){const m=i(f)-i(s),g=a(f)-a(r)>170;return s=f,g&&(r=f),m}function u(f){if(!r||!s)return 0;const m=i(s)-i(r),g=a(f)-a(r),x=a(f)-a(s)>170,b=m/g;return g&&!x&&gs(b)>.1?b:0}return{pointerDown:o,pointerMove:l,pointerUp:u,readPoint:i}}function Cht(){function t(n){const{offsetTop:r,offsetLeft:s,offsetWidth:a,offsetHeight:i}=n;return{top:r,right:s+a,bottom:r+i,left:s,width:a,height:i}}return{measure:t}}function Sht(t){function e(r){return t*(r/100)}return{measure:e}}function kht(t,e,n,r,s,a,i){const o=[t].concat(r);let l,u,d=[],f=!1;function m(C){return s.measureSize(i.measure(C))}function g(C){if(!a)return;u=m(t),d=r.map(m);function S(w){for(const E of w){if(f)return;const T=E.target===t,_=r.indexOf(E.target),A=T?u:d[_],j=m(T?t:r[_]);if(gs(j-A)>=.5){C.reInit(),e.emit("resize");break}}}l=new ResizeObserver(w=>{(a_(a)||a(C,w))&&S(w)}),n.requestAnimationFrame(()=>{o.forEach(w=>l.observe(w))})}function x(){f=!0,l&&l.disconnect()}return{init:g,destroy:x}}function Eht(t,e,n,r,s,a){let i=0,o=0,l=s,u=a,d=t.get(),f=0;function m(){const A=r.get()-t.get(),j=!l;let D=0;return j?(i=0,n.set(r),t.set(r),D=A):(n.set(t),i+=A/l,i*=u,d+=i,t.add(i),D=d-f),o=UO(D),f=d,_}function g(){const A=r.get()-e.get();return gs(A)<.001}function x(){return l}function b(){return o}function C(){return i}function S(){return E(s)}function w(){return T(a)}function E(A){return l=A,_}function T(A){return u=A,_}const _={direction:b,duration:x,velocity:C,seek:m,settled:g,useBaseFriction:w,useBaseDuration:S,useFriction:T,useDuration:E};return _}function _ht(t,e,n,r,s){const a=s.measure(10),i=s.measure(50),o=v0(.1,.99);let l=!1;function u(){return!(l||!t.reachedAny(n.get())||!t.reachedAny(e.get()))}function d(g){if(!u())return;const x=t.reachedMin(e.get())?"min":"max",b=gs(t[x]-e.get()),C=n.get()-e.get(),S=o.constrain(b/i);n.subtract(C*S),!g&&gs(C)<a&&(n.set(t.constrain(n.get())),r.useDuration(25).useBaseFriction())}function f(g){l=!g}return{shouldConstrain:u,constrain:d,toggleActive:f}}function Tht(t,e,n,r,s){const a=v0(-e+t,0),i=f(),o=d(),l=m();function u(x,b){return l1(x,b)<=1}function d(){const x=i[0],b=hc(i),C=i.lastIndexOf(x),S=i.indexOf(b)+1;return v0(C,S)}function f(){return n.map((x,b)=>{const{min:C,max:S}=a,w=a.constrain(x),E=!b,T=HO(n,b);return E?S:T||u(C,w)?C:u(S,w)?S:w}).map(x=>parseFloat(x.toFixed(3)))}function m(){if(e<=t+s)return[a.max];if(r==="keepSnaps")return i;const{min:x,max:b}=o;return i.slice(x,b)}return{snapsContained:l,scrollContainLimit:o}}function Aht(t,e,n){const r=e[0],s=n?r-t:hc(e);return{limit:v0(s,r)}}function Nht(t,e,n,r){const a=e.min+.1,i=e.max+.1,{reachedMin:o,reachedMax:l}=v0(a,i);function u(m){return m===1?l(n.get()):m===-1?o(n.get()):!1}function d(m){if(!u(m))return;const g=t*(m*-1);r.forEach(x=>x.add(g))}return{loop:d}}function jht(t){const{max:e,length:n}=t;function r(a){const i=a-e;return n?i/-n:0}return{get:r}}function Dht(t,e,n,r,s){const{startEdge:a,endEdge:i}=t,{groupSlides:o}=s,l=f().map(e.measure),u=m(),d=g();function f(){return o(r).map(b=>hc(b)[i]-b[0][a]).map(gs)}function m(){return r.map(b=>n[a]-b[a]).map(b=>-gs(b))}function g(){return o(u).map(b=>b[0]).map((b,C)=>b+l[C])}return{snaps:u,snapsAligned:d}}function Rht(t,e,n,r,s,a){const{groupSlides:i}=s,{min:o,max:l}=r,u=d();function d(){const m=i(a),g=!t||e==="keepSnaps";return n.length===1?[a]:g?m:m.slice(o,l).map((x,b,C)=>{const S=!b,w=HO(C,b);if(S){const E=hc(C[0])+1;return mY(E)}if(w){const E=Hw(a)-hc(C)[0]+1;return mY(E,hc(C)[0])}return x})}return{slideRegistry:u}}function Mht(t,e,n,r,s){const{reachedAny:a,removeOffset:i,constrain:o}=r;function l(x){return x.concat().sort((b,C)=>gs(b)-gs(C))[0]}function u(x){const b=t?i(x):o(x),C=e.map((w,E)=>({diff:d(w-b,0),index:E})).sort((w,E)=>gs(w.diff)-gs(E.diff)),{index:S}=C[0];return{index:S,distance:b}}function d(x,b){const C=[x,x+n,x-n];if(!t)return x;if(!b)return l(C);const S=C.filter(w=>UO(w)===b);return S.length?l(S):hc(C)-n}function f(x,b){const C=e[x]-s.get(),S=d(C,b);return{index:x,distance:S}}function m(x,b){const C=s.get()+x,{index:S,distance:w}=u(C),E=!t&&a(C);if(!b||E)return{index:S,distance:x};const T=e[S]-w,_=x+d(T,0);return{index:S,distance:_}}return{byDistance:m,byIndex:f,shortcut:d}}function Iht(t,e,n,r,s,a,i){function o(f){const m=f.distance,g=f.index!==e.get();a.add(m),m&&(r.duration()?t.start():(t.update(),t.render(1),t.update())),g&&(n.set(e.get()),e.set(f.index),i.emit("select"))}function l(f,m){const g=s.byDistance(f,m);o(g)}function u(f,m){const g=e.clone().set(f),x=s.byIndex(g.get(),m);o(x)}return{distance:l,index:u}}function Oht(t,e,n,r,s,a,i,o){const l={passive:!0,capture:!0};let u=0;function d(g){if(!o)return;function x(b){if(new Date().getTime()-u>10)return;i.emit("slideFocusStart"),t.scrollLeft=0;const w=n.findIndex(E=>E.includes(b));$O(w)&&(s.useDuration(0),r.index(w,0),i.emit("slideFocus"))}a.add(document,"keydown",f,!1),e.forEach((b,C)=>{a.add(b,"focus",S=>{(a_(o)||o(g,S))&&x(C)},l)})}function f(g){g.code==="Tab"&&(u=new Date().getTime())}return{init:d}}function _x(t){let e=t;function n(){return e}function r(l){e=i(l)}function s(l){e+=i(l)}function a(l){e-=i(l)}function i(l){return $O(l)?l:l.get()}return{get:n,set:r,add:s,subtract:a}}function bfe(t,e){const n=t.scroll==="x"?i:o,r=e.style;let s=null,a=!1;function i(m){return`translate3d(${m}px,0px,0px)`}function o(m){return`translate3d(0px,${m}px,0px)`}function l(m){if(a)return;const g=ght(t.direction(m));g!==s&&(r.transform=n(g),s=g)}function u(m){a=!m}function d(){a||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:d,to:l,toggleActive:u}}function Pht(t,e,n,r,s,a,i,o,l){const d=Eb(s),f=Eb(s).reverse(),m=S().concat(w());function g(j,D){return j.reduce((z,F)=>z-s[F],D)}function x(j,D){return j.reduce((z,F)=>g(z,D)>0?z.concat([F]):z,[])}function b(j){return a.map((D,z)=>({start:D-r[z]+.5+j,end:D+e-.5+j}))}function C(j,D,z){const F=b(D);return j.map(R=>{const L=z?0:-n,O=z?n:0,H=z?"end":"start",P=F[R][H];return{index:R,loopPoint:P,slideLocation:_x(-1),translate:bfe(t,l[R]),target:()=>o.get()>P?L:O}})}function S(){const j=i[0],D=x(f,j);return C(D,n,!1)}function w(){const j=e-i[0]-1,D=x(d,j);return C(D,-n,!0)}function E(){return m.every(({index:j})=>{const D=d.filter(z=>z!==j);return g(D,e)<=.1})}function T(){m.forEach(j=>{const{target:D,translate:z,slideLocation:F}=j,R=D();R!==F.get()&&(z.to(R),F.set(R))})}function _(){m.forEach(j=>j.translate.clear())}return{canLoop:E,clear:_,loop:T,loopPoints:m}}function Fht(t,e,n){let r,s=!1;function a(l){if(!n)return;function u(d){for(const f of d)if(f.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(d=>{s||(a_(n)||n(l,d))&&u(d)}),r.observe(t,{childList:!0})}function i(){r&&r.disconnect(),s=!0}return{init:a,destroy:i}}function Bht(t,e,n,r){const s={};let a=null,i=null,o,l=!1;function u(){o=new IntersectionObserver(x=>{l||(x.forEach(b=>{const C=e.indexOf(b.target);s[C]=b}),a=null,i=null,n.emit("slidesInView"))},{root:t.parentElement,threshold:r}),e.forEach(x=>o.observe(x))}function d(){o&&o.disconnect(),l=!0}function f(x){return _b(s).reduce((b,C)=>{const S=parseInt(C),{isIntersecting:w}=s[S];return(x&&w||!x&&!w)&&b.push(S),b},[])}function m(x=!0){if(x&&a)return a;if(!x&&i)return i;const b=f(x);return x&&(a=b),x||(i=b),b}return{init:u,destroy:d,get:m}}function Lht(t,e,n,r,s,a){const{measureSize:i,startEdge:o,endEdge:l}=t,u=n[0]&&s,d=x(),f=b(),m=n.map(i),g=C();function x(){if(!u)return 0;const w=n[0];return gs(e[o]-w[o])}function b(){if(!u)return 0;const w=a.getComputedStyle(hc(r));return parseFloat(w.getPropertyValue(`margin-${l}`))}function C(){return n.map((w,E,T)=>{const _=!E,A=HO(T,E);return _?m[E]+d:A?m[E]+f:T[E+1][o]-w[o]}).map(gs)}return{slideSizes:m,slideSizesWithGaps:g,startGap:d,endGap:f}}function zht(t,e,n,r,s,a,i,o,l){const{startEdge:u,endEdge:d,direction:f}=t,m=$O(n);function g(S,w){return Eb(S).filter(E=>E%w===0).map(E=>S.slice(E,E+w))}function x(S){return S.length?Eb(S).reduce((w,E,T)=>{const _=hc(w)||0,A=_===0,j=E===Hw(S),D=s[u]-a[_][u],z=s[u]-a[E][d],F=!r&&A?f(i):0,R=!r&&j?f(o):0,L=gs(z-R-(D+F));return T&&L>e+l&&w.push(E),j&&w.push(S.length),w},[]).map((w,E,T)=>{const _=Math.max(T[E-1]||0);return S.slice(_,w)}):[]}function b(S){return m?g(S,n):x(S)}return{groupSlides:b}}function $ht(t,e,n,r,s,a,i){const{align:o,axis:l,direction:u,startIndex:d,loop:f,duration:m,dragFree:g,dragThreshold:x,inViewThreshold:b,slidesToScroll:C,skipSnaps:S,containScroll:w,watchResize:E,watchSlides:T,watchDrag:_,watchFocus:A}=a,j=2,D=Cht(),z=D.measure(e),F=n.map(D.measure),R=xht(l,u),L=R.measureSize(z),O=Sht(L),H=vht(o,L),P=!f&&!!w,I=f||!!w,{slideSizes:U,slideSizesWithGaps:W,startGap:Y,endGap:B}=Lht(R,z,F,n,I,s),Z=zht(R,L,C,f,z,F,Y,B,j),{snaps:le,snapsAligned:G}=Dht(R,H,z,F,Z),K=-hc(le)+hc(W),{snapsContained:te,scrollContainLimit:ie}=Tht(L,K,G,w,j),de=P?te:G,{limit:fe}=Aht(K,de,f),se=xfe(Hw(de),d,f),ce=se.clone(),ue=Eb(n),oe=({dragHandler:vt,scrollBody:at,scrollBounds:Tt,options:{loop:wt}})=>{wt||Tt.constrain(vt.pointerDown()),at.seek()},Ne=({scrollBody:vt,translate:at,location:Tt,offsetLocation:wt,previousLocation:cn,scrollLooper:$t,slideLooper:hn,dragHandler:Kn,animation:jn,eventHandler:Hn,scrollBounds:za,options:{loop:$a}},Dn)=>{const mr=vt.settled(),Et=!za.shouldConstrain(),fn=$a?mr:mr&&Et,mn=fn&&!Kn.pointerDown();mn&&jn.stop();const Sn=Tt.get()*Dn+cn.get()*(1-Dn);wt.set(Sn),$a&&($t.loop(vt.direction()),hn.loop()),at.to(wt.get()),mn&&Hn.emit("settle"),fn||Hn.emit("scroll")},ve=yht(r,s,()=>oe(Qe),vt=>Ne(Qe,vt)),He=.68,nt=de[se.get()],Me=_x(nt),$e=_x(nt),Le=_x(nt),ae=_x(nt),pe=Eht(Me,Le,$e,ae,m,He),_e=Mht(f,de,K,fe,ae),Ue=Iht(ve,se,ce,pe,_e,ae,i),Je=jht(fe),qe=Tb(),xe=Bht(e,n,i,b),{slideRegistry:Ae}=Rht(P,w,de,ie,Z,ue),Fe=Oht(t,n,Ae,Ue,pe,qe,i,A),Qe={ownerDocument:r,ownerWindow:s,eventHandler:i,containerRect:z,slideRects:F,animation:ve,axis:R,dragHandler:bht(R,t,r,s,ae,wht(R,s),Me,ve,Ue,pe,_e,se,i,O,g,x,S,He,_),eventStore:qe,percentOfView:O,index:se,indexPrevious:ce,limit:fe,location:Me,offsetLocation:Le,previousLocation:$e,options:a,resizeHandler:kht(e,i,s,n,R,E,D),scrollBody:pe,scrollBounds:_ht(fe,Le,ae,pe,O),scrollLooper:Nht(K,fe,Le,[Me,Le,$e,ae]),scrollProgress:Je,scrollSnapList:de.map(Je.get),scrollSnaps:de,scrollTarget:_e,scrollTo:Ue,slideLooper:Pht(R,L,K,U,W,le,de,Le,n),slideFocus:Fe,slidesHandler:Fht(e,i,T),slidesInView:xe,slideIndexes:ue,slideRegistry:Ae,slidesToScroll:Z,target:ae,translate:bfe(R,e)};return Qe}function Uht(){let t={},e;function n(u){e=u}function r(u){return t[u]||[]}function s(u){return r(u).forEach(d=>d(e,u)),l}function a(u,d){return t[u]=r(u).concat([d]),l}function i(u,d){return t[u]=r(u).filter(f=>f!==d),l}function o(){t={}}const l={init:n,emit:s,off:i,on:a,clear:o};return l}const Hht={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Vht(t){function e(a,i){return yfe(a,i||{})}function n(a){const i=a.breakpoints||{},o=_b(i).filter(l=>t.matchMedia(l).matches).map(l=>i[l]).reduce((l,u)=>e(l,u),{});return e(a,o)}function r(a){return a.map(i=>_b(i.breakpoints||{})).reduce((i,o)=>i.concat(o),[]).map(t.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:r}}function qht(t){let e=[];function n(a,i){return e=i.filter(({options:o})=>t.optionsAtMedia(o).active!==!1),e.forEach(o=>o.init(a,t)),i.reduce((o,l)=>Object.assign(o,{[l.name]:l}),{})}function r(){e=e.filter(a=>a.destroy())}return{init:n,destroy:r}}function R5(t,e,n){const r=t.ownerDocument,s=r.defaultView,a=Vht(s),i=qht(a),o=Tb(),l=Uht(),{mergeOptions:u,optionsAtMedia:d,optionsMediaQueries:f}=a,{on:m,off:g,emit:x}=l,b=R;let C=!1,S,w=u(Hht,R5.globalOptions),E=u(w),T=[],_,A,j;function D(){const{container:ue,slides:oe}=E;A=(q7(ue)?t.querySelector(ue):ue)||t.children[0];const ve=q7(oe)?A.querySelectorAll(oe):oe;j=[].slice.call(ve||A.children)}function z(ue){const oe=$ht(t,A,j,r,s,ue,l);if(ue.loop&&!oe.slideLooper.canLoop()){const Ne=Object.assign({},ue,{loop:!1});return z(Ne)}return oe}function F(ue,oe){C||(w=u(w,ue),E=d(w),T=oe||T,D(),S=z(E),f([w,...T.map(({options:Ne})=>Ne)]).forEach(Ne=>o.add(Ne,"change",R)),E.active&&(S.translate.to(S.location.get()),S.animation.init(),S.slidesInView.init(),S.slideFocus.init(ce),S.eventHandler.init(ce),S.resizeHandler.init(ce),S.slidesHandler.init(ce),S.options.loop&&S.slideLooper.loop(),A.offsetParent&&j.length&&S.dragHandler.init(ce),_=i.init(ce,T)))}function R(ue,oe){const Ne=Z();L(),F(u({startIndex:Ne},ue),oe),l.emit("reInit")}function L(){S.dragHandler.destroy(),S.eventStore.clear(),S.translate.clear(),S.slideLooper.clear(),S.resizeHandler.destroy(),S.slidesHandler.destroy(),S.slidesInView.destroy(),S.animation.destroy(),i.destroy(),o.clear()}function O(){C||(C=!0,o.clear(),L(),l.emit("destroy"),l.clear())}function H(ue,oe,Ne){!E.active||C||(S.scrollBody.useBaseFriction().useDuration(oe===!0?0:E.duration),S.scrollTo.index(ue,Ne||0))}function P(ue){const oe=S.index.add(1).get();H(oe,ue,-1)}function I(ue){const oe=S.index.add(-1).get();H(oe,ue,1)}function U(){return S.index.add(1).get()!==Z()}function W(){return S.index.add(-1).get()!==Z()}function Y(){return S.scrollSnapList}function B(){return S.scrollProgress.get(S.offsetLocation.get())}function Z(){return S.index.get()}function le(){return S.indexPrevious.get()}function G(){return S.slidesInView.get()}function K(){return S.slidesInView.get(!1)}function te(){return _}function ie(){return S}function de(){return t}function fe(){return A}function se(){return j}const ce={canScrollNext:U,canScrollPrev:W,containerNode:fe,internalEngine:ie,destroy:O,off:g,on:m,emit:x,plugins:te,previousScrollSnap:le,reInit:b,rootNode:de,scrollNext:P,scrollPrev:I,scrollProgress:B,scrollSnapList:Y,scrollTo:H,selectedScrollSnap:Z,slideNodes:se,slidesInView:G,slidesNotInView:K};return F(e,n),setTimeout(()=>l.emit("init"),0),ce}R5.globalOptions=void 0;function VO(t={},e=[]){const n=y.useRef(t),r=y.useRef(e),[s,a]=y.useState(),[i,o]=y.useState(),l=y.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return y.useEffect(()=>{zO(n.current,t)||(n.current=t,l())},[t,l]),y.useEffect(()=>{mht(r.current,e)||(r.current=e,l())},[e,l]),y.useEffect(()=>{if(fht()&&i){R5.globalOptions=VO.globalOptions;const u=R5(i,n.current,r.current);return a(u),()=>u.destroy()}else a(void 0)},[i,a]),[o,s]}VO.globalOptions=void 0;const wfe=y.createContext(null);function i_(){const t=y.useContext(wfe);if(!t)throw new Error("useCarousel must be used within a <Carousel />");return t}function Ght({orientation:t="horizontal",opts:e,setApi:n,plugins:r,className:s,children:a,...i}){const[o,l]=VO({...e,axis:t==="horizontal"?"x":"y"},r),[u,d]=y.useState(!1),[f,m]=y.useState(!1),g=y.useCallback(S=>{S&&(d(S.canScrollPrev()),m(S.canScrollNext()))},[]),x=y.useCallback(()=>{l==null||l.scrollPrev()},[l]),b=y.useCallback(()=>{l==null||l.scrollNext()},[l]),C=y.useCallback(S=>{S.key==="ArrowLeft"?(S.preventDefault(),x()):S.key==="ArrowRight"&&(S.preventDefault(),b())},[x,b]);return y.useEffect(()=>{!l||!n||n(l)},[l,n]),y.useEffect(()=>{if(l)return g(l),l.on("reInit",g),l.on("select",g),()=>{l==null||l.off("select",g)}},[l,g]),c.jsx(wfe.Provider,{value:{carouselRef:o,api:l,opts:e,orientation:t||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:x,scrollNext:b,canScrollPrev:u,canScrollNext:f},children:c.jsx("div",{onKeyDownCapture:C,className:ge("relative",s),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...i,children:a})})}function Wht({className:t,...e}){const{carouselRef:n,orientation:r}=i_();return c.jsx("div",{ref:n,className:"overflow-hidden","data-slot":"carousel-content",children:c.jsx("div",{className:ge("flex",r==="horizontal"?"-ml-4":"-mt-4 flex-col",t),...e})})}function Kht({className:t,...e}){const{orientation:n}=i_();return c.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:ge("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",t),...e})}function Yht({className:t,variant:e="outline",size:n="icon",...r}){const{orientation:s,scrollPrev:a,canScrollPrev:i}=i_();return c.jsxs(vn,{"data-slot":"carousel-previous",variant:e,size:n,className:ge("absolute size-8 rounded-full",s==="horizontal"?"top-1/2 -left-12 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!i,onClick:a,...r,children:[c.jsx(xv,{}),c.jsx("span",{className:"sr-only",children:"Previous slide"})]})}function Xht({className:t,variant:e="outline",size:n="icon",...r}){const{orientation:s,scrollNext:a,canScrollNext:i}=i_();return c.jsxs(vn,{"data-slot":"carousel-next",variant:e,size:n,className:ge("absolute size-8 rounded-full",s==="horizontal"?"top-1/2 -right-12 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!i,onClick:a,...r,children:[c.jsx(dk,{}),c.jsx("span",{className:"sr-only",children:"Next slide"})]})}const Jht=({theme:t,setDarkMode:e,setSelectedTheme:n,clearTheme:r,selectedTheme:s})=>{const{updateOptions:a,useRerenderListener:i,sendMessage:o,getOptions:l}=ut(),u=(s==null?void 0:s.code)===t.code,d=async()=>{var C;if(u){await r();return}const f=kc(Nl,jl),{data:m,error:g}=await f.from("themes_public").select("title, code, exports").eq("code",t.code).single(),x=JSON.parse((m==null?void 0:m.exports)||"{}");let b=!1;if(x!=null&&x.dark_preset&&(x!=null&&x.dark_preset["background-0"]))try{b=Wr(x.dark_preset["background-0"]).luminosity()<.5}catch(S){console.error("Error parsing color:",S),b=!1}e(b?"dark":"light"),n(m),a({selected_theme:{title:m==null?void 0:m.title,code:m==null?void 0:m.code,category:null,exports:x,needs_reapply:(((C=l())==null?void 0:C.card_ids)||[]).length===0}}),o({type:"LOAD_THEME",payload:{exports:x}})};return c.jsx(Kht,{className:"basis-1/5 flex flex-col cursor-pointer",onClick:d,children:c.jsx("div",{className:`h-full p-0.5 rounded-lg overflow-hidden ${u?"bg-brand-gradient":"bg-none"}`,children:c.jsxs("div",{className:"h-full w-full bg-black rounded-lg overflow-hidden relative",children:[c.jsx(Qht,{selected:u}),c.jsx("img",{src:t.preview,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"text-white p-[10px] bg-black/20 absolute bottom-0 left-0 right-0 h-full flex flex-col justify-between",children:[c.jsx("p",{className:"text-sm font-semibold",children:t.title}),c.jsx("p",{className:"text-xs font-medium",children:"@"+t.credits})]})]})})})},Qht=({selected:t})=>t?c.jsxs("div",{className:"z-10 absolute right-1.5 top-1.5 bg-black text-white px-1.5 py-0.5 rounded-full text-[10px] font-medium shadow-lg flex items-center gap-1",children:[c.jsx(B_e,{className:"w-2.5 h-2.5 fill-current"}),c.jsx("span",{children:"Applied"})]}):null,Zht=()=>{const t=y.useRef(!1),[e,n]=y.useState([]),[r,s]=y.useState(null),{updateOptions:a,useRerenderListener:i}=ut(),[o,l]=y.useState("dark"),u=async()=>{const S=await fetch(`${Jr}/themes/trending`),{message:w,error:E}=await S.json();if(E){console.error("Error fetching trending themes:",E);return}n(w)};y.useEffect(()=>{t.current||(u(),t.current=!0)},[]),y.useRef({});const{setAuthStep:d,uuid:f}=kr(),m=()=>{d("logins")},g=()=>e.map(S=>c.jsx(Jht,{theme:S,setDarkMode:l,setSelectedTheme:s,clearTheme:x,selectedTheme:r},S.code)),x=async()=>{s(null),a({selected_theme:{title:null,code:null,category:null}})},{options:b,trigger:C}=i(["dark_mode","sidebar","todo","search"]);return y.useEffect(()=>{Eu("signup_settings_loaded",{distinct_id:f})},[]),c.jsxs("div",{className:"px-[30px] flex flex-col gap-2 h-full mb-[30px]",children:[c.jsxs("div",{className:"w-full flex flex-col",children:[c.jsx("div",{className:"flex items-center gap-[10px]",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold",children:"Choose your vibe"}),c.jsx("p",{className:"text-sm text-gray-500 mt-[5px]",children:"You can change these anytime in the preference menu"})]})}),c.jsx("div",{className:"mt-2",children:c.jsxs(Ght,{className:"mt-[10px] w-full relative",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center ml-[1px] mb-[5px]",children:[c.jsx("h2",{className:"text font-medium",children:"Trending themes"}),c.jsxs("div",{className:`${r?"cursor-pointer":"cursor-default"} ml-5 flex gap-1 items-center ${r?"text-gray-800":"text-gray-400"} transition-all`,onClick:x,children:[c.jsx(wv,{className:"w-[13px] h-[13px]"}),c.jsx("p",{className:"text-sm",children:"Clear"})]})]}),c.jsxs("div",{className:"flex items-center gap-[10px]",children:[c.jsx(Yht,{className:"static bg-white"}),c.jsx(Xht,{className:"static bg-white"})]})]}),c.jsx(Wht,{className:"h-[100px] w-full",children:g()})]})}),c.jsxs("div",{className:"mt-[20px]",children:[c.jsx("h2",{className:"font-medium",children:"Color mode"}),c.jsx("p",{className:"text-md text-gray-500 text-sm",children:"Choose if Canvas appearance should be light or dark, or follow your device appearance."}),c.jsxs("div",{className:"flex items-center gap-[10px] font-medium mt-[10px]",children:[c.jsxs("button",{className:`bg-white rounded-full px-[15px] py-[6px] border border-gray-300 flex items-center gap-[10px] ${b.dark_mode===!1?"!bg-blue-100 !border-blue-200":""}`,onClick:()=>a({dark_mode:!1}),children:[c.jsx(U_e,{className:"w-[16px] h-[16px]"})," Light"]}),c.jsxs("button",{className:`bg-white rounded-full px-[15px] py-[6px] border border-gray-300 flex items-center gap-[10px] ${b.dark_mode===!0?"!bg-blue-100 !border-blue-200":""}`,onClick:()=>a({dark_mode:!0}),children:[c.jsx(ZEe,{className:"w-[16px] h-[16px]"})," Dark"]}),c.jsxs("button",{className:`bg-white rounded-full px-[15px] py-[6px] border border-gray-300 flex items-center gap-[10px] ${b.dark_mode==="device"?"!bg-blue-100 !border-blue-200":""}`,onClick:()=>a({dark_mode:"device"}),children:[c.jsx(mZ,{className:"w-[16px] h-[16px]"}),"Device"]})]})]}),c.jsxs("div",{className:"mt-[20px]",children:[c.jsx("h2",{className:"font-medium",children:"BetterCampus features"}),c.jsx("p",{className:"text-md text-gray-500 text-sm",children:"Some of our most beloved features"}),c.jsxs("div",{className:"flex items-center gap-[30px] mt-[20px]",children:[c.jsxs("div",{className:"flex gap-[10px] items-center",children:[c.jsx(Xl,{variant:"default",height:18,checked:b.clean_sidebar===!0,onCheckedChange:S=>a({clean_sidebar:!!S})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Sidebar"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Cleaner, smoother"})]})]}),c.jsxs("div",{className:"flex gap-[10px] items-center",children:[c.jsx(Xl,{variant:"default",height:18,checked:b.better_todo===!0,onCheckedChange:S=>a({better_todo:!!S})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"To-Do list"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Progress indicator + confetti"})]})]}),c.jsxs("div",{className:"flex gap-[10px] items-center",children:[c.jsx(Xl,{variant:"default",height:18,checked:b.global_search===!0,onCheckedChange:S=>a({global_search:!!S})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Search Bar"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Find anything in seconds"})]})]})]})]})]}),c.jsx("div",{className:"flex mt-auto gap-2 justify-end",children:c.jsx("button",{onClick:m,className:"bg-blue-500 text-white px-[20px] py-[8px] rounded-full",style:{background:"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},children:"Continue"})})]})},eft=()=>{const{setAuthStep:t,uuid:e}=kr(),{closeModal:n,updateOptions:r}=ut(),s=()=>{r({auth_state:"skipped"}),n(),Eu("signup_no_account",{distinct_id:e})};return c.jsxs("div",{className:"px-[30px]",children:[c.jsx("h1",{className:"text-2xl font-semibold mb-[5px]",children:"Trust us - you'll want a free account"}),c.jsx("p",{className:"text-gray-500",children:"You'll be missing out on all the good stuff"}),c.jsxs("div",{className:"flex flex-col gap-[20px] mt-[30px]",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-medium text-black",children:[c.jsx("span",{className:"mr-[5px]",children:""})," Unlimited themes"]}),c.jsx("p",{className:"text-gray-500 text-sm ml-6",children:"Swap your vibe as often as you want"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-medium text-black",children:[c.jsx("span",{className:"mr-[5px]",children:""})," Canvas Wrapped"]}),c.jsx("p",{className:"text-gray-500 text-sm ml-6",children:"See your top stats and compare with others at the end of the term."})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-medium text-black",children:[c.jsx("span",{className:"mr-[5px]",children:""})," Widget access"]}),c.jsx("p",{className:"text-gray-500 text-sm ml-6",children:"Access to widgets like music player, focus, breathe, and more..."})]})]}),c.jsxs("div",{className:"flex flex-col gap-2 mt-[30px]",children:[c.jsxs("button",{onClick:()=>t("logins"),className:"font-medium bg-black text-white rounded-full px-[20px] py-[10px] flex-1 hover:brightness-95 transition-all duration-200",style:{background:"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},children:["Create ",c.jsx("span",{className:"font-bold",children:"free"})," account"]}),c.jsx("button",{onClick:s,className:"font-medium bg-white text-black rounded-full px-[20px] py-[10px] border border-gray-200 flex-1 hover:brightness-95 transition-all duration-200",children:"No thanks"})]})]})},Cfe=({children:t})=>c.jsxs("div",{className:"w-full h-full relative flex flex-col justify-end overflow-hidden",children:[c.jsxs("div",{className:"absolute w-full h-full gradient-backdrop z-0",children:[c.jsx("img",{src:"iconlg.png",className:"w-[105%] max-w-[600px] object-contain absolute z-10 top-[-100px] right-[-10%]"}),c.jsx("div",{className:"frosted-backdrop absolute top-0 left-0 w-full h-full"})]}),c.jsxs("div",{className:"relative z-1 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("img",{src:"group.png",className:"shadow-lg border-[7px] border-white w-[170px] rounded-xl rotate-[-10deg] translate-x-[10px]"}),c.jsx("img",{src:"closet.png",className:"shadow-lg border-[7px] border-white w-[170px] rounded-xl rotate-[15deg] translate-x-[-10px]"})]}),t]})]}),tft=()=>c.jsx(Cfe,{children:c.jsxs("div",{className:"p-[20px] bg-white text-right",children:[c.jsx("h2",{className:"text-lg font-medium",children:"hope your semester was great!!"}),c.jsx("p",{className:"text-gray-500 text-sm mt-[5px] max-w-[80%] ml-auto",children:"ours? george was legit sleeping in a closet to save $ and I (Jake) was on campus every day interviewing students"}),c.jsx("p",{className:"text-gray-500 text-xs mt-[20px]",children:"made with  for students everywhere"})]})}),vl=()=>c.jsxs("div",{className:"absolute w-full h-full z-0 relative",children:[c.jsx("div",{className:"w-full h-full absolute top-0 left-0",style:{background:"#eaeaea"}}),c.jsx("p",{className:"max-w-[100px] absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl font-semibold text-center",children:"Join 1.5M+ students worldwide"}),c.jsx("div",{className:"w-full h-full bg-size-[180%] bg-center z-1 relative",style:{backgroundImage:"url(iconemptylg.png)"}})]}),Wl=()=>c.jsxs("div",{className:"absolute w-full h-full z-0 relative",children:[c.jsx("div",{style:{background:"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},className:"w-full h-full absolute top-0 left-0 opacity-35"}),c.jsx("p",{className:"max-w-[180px] absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-lg font-semibold text-center ",children:"Congratulations on joining 1.5M+ students worldwide!"}),c.jsx("div",{className:"w-full h-full bg-size-[180%] bg-center z-1 relative",style:{backgroundImage:"url(iconemptylg.png)"}})]}),Sfe=()=>c.jsx(Cfe,{children:c.jsxs("div",{className:"p-[25px] bg-white text-right",children:[c.jsx("h2",{className:"text-lg font-medium",children:"before we get started..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-[5px]",children:"we need to make sure you're old enough to make an account (shoutout COPPA)"}),c.jsx("p",{className:"text-gray-500 text-xs mt-[20px]",children:"made with  for students everywhere"})]})}),nft=()=>c.jsxs("div",{className:"w-full h-full relative flex items-center justify-center overflow-visible",children:[c.jsx("div",{className:"absolute w-full h-full z-0",style:{background:"#5865F2"},children:c.jsx("div",{className:"w-full h-full bg-size-[180%] bg-center opacity-10",style:{backgroundImage:"url(iconemptylg.png)"}})}),c.jsx("div",{className:"relative z-1 translate-x-8 w-[375px]",children:c.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-[6px] px-[12px] py-[10px] bg-[#2d2d2d]",children:[c.jsx("div",{className:"w-[10px] h-[10px] rounded-full bg-[#ff5f57]"}),c.jsx("div",{className:"w-[10px] h-[10px] rounded-full bg-[#febc2e]"}),c.jsx("div",{className:"w-[10px] h-[10px] rounded-full bg-[#28c840]"})]}),c.jsx("img",{src:"discord_server.webp",className:"w-full"})]})})]}),rft=()=>c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),kfe=()=>{const{setAuthStep:t}=kr(),[e,n]=y.useState(!1),r=()=>{n(!0),window.open("https://discord.gg/RVtnj4cf2T","_blank")};return c.jsxs("div",{className:"px-[30px] mb-[30px] flex flex-col h-full text-gray-500",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Join the BetterCampus community"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"See how other students customize Canvas, share study tips, and help shape what we're building."})]}),c.jsxs("ul",{className:"mt-[20px] space-y-[8px] text-sm text-gray-600",children:[c.jsxs("li",{className:"flex items-center gap-[8px]",children:[c.jsx("span",{children:""})," Free to join"]}),c.jsxs("li",{className:"flex items-center gap-[8px]",children:[c.jsx("span",{children:""})," Talk directly to the creators"]}),c.jsxs("li",{className:"flex items-center gap-[8px]",children:[c.jsx("span",{children:""})," Get early access to new features"]})]}),c.jsx("div",{className:"flex-1"}),c.jsxs("div",{className:"flex flex-col gap-[10px]",children:[c.jsxs("button",{onClick:r,className:"flex items-center justify-center gap-[8px] py-[12px] rounded-full w-full font-medium text-white bg-[#5865F2] hover:bg-[#4752c4] transition-colors",children:[c.jsx(rft,{}),"Join the Discord"]}),c.jsx("button",{style:{background:"linear-gradient(90deg, #ffa952,#ff686c)"},className:"flex items-center justify-center gap-[8px] py-[12px] rounded-full w-full font-medium text-white",onClick:()=>t("thankYou"),children:e?"Finish":"Skip"})]})]})},pY=kc(Nl,jl),sft=()=>{const{emailLogin:t,setAuthStep:e,setToken:n,handleAuth:r,loginState:s}=kr(),{updateOptions:a}=ut(),[i,o]=y.useState(!1),[l,u]=y.useState(["","","","","",""]),[d,f]=y.useState(!1),[m,g]=y.useState(null),[x,b]=y.useState(60),[C,S]=y.useState(!1),w=(D,z)=>{if(z.length>1)return;const F=[...l];if(F[D]=z,u(F),z&&D<5){const R=document.querySelector(`input[data-index="${D+1}"]`);R&&R.focus()}},E=(D,z)=>{if(z.key==="Backspace"&&!l[D]&&D>0){const F=document.querySelector(`input[data-index="${D-1}"]`);F&&F.focus()}},T=D=>{D.preventDefault();const F=D.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(F.length===6){const R=[...l];for(let L=0;L<6;L++)R[L]=F[L]||"";if(u(R),F.length===6){const L=document.querySelector('input[data-index="5"]');L&&L.focus()}}},_=async()=>{if(!(x>0)){S(!0),g(null);try{const{error:D}=await pY.auth.signInWithOtp({email:t});D?(g("Failed to resend code. Please try again."),console.error(D)):b(60)}catch(D){g("Failed to resend code. Please try again."),console.error(D)}finally{S(!1)}}};y.useEffect(()=>{l.join("").length===6&&A()},[l]),y.useEffect(()=>{},[]),y.useEffect(()=>{if(x<=0)return;const D=setTimeout(()=>{b(z=>z-1)},1e3);return()=>clearTimeout(D)},[x]);const A=async()=>{g(null),o(!0);const D=l.join("");if(D.length!==6)return;const z=pY.auth.verifyOtp({email:t,token:D,type:"email"});r(z,"signup")},j=()=>(60-x)/60*100;return c.jsxs("div",{className:"px-[30px] text-gray-500",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:" Check your inbox"}),c.jsxs("p",{className:"mb-6",children:["We sent a code to ",t," - pop it in below & you're in"]}),c.jsx("div",{className:"flex gap-2 justify-center mb-6",children:l.map((D,z)=>c.jsx("input",{"data-index":z,type:"text",maxLength:1,value:D,onChange:F=>w(z,F.target.value),onKeyDown:F=>E(z,F),onPaste:T,className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"0"},z))}),c.jsxs("div",{className:"mb-10",children:[i&&c.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-2 justify-center",children:[c.jsx(js,{className:"w-4 h-4 animate-spin"})," Verifying..."]}),m&&c.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),d&&c.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-2 justify-center",children:[c.jsx(or,{className:"w-4 h-4"})," Success!"]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"If the email doesn't show up within 5 minutes, click below to resend."}),c.jsxs("button",{onClick:_,disabled:x>0||C,className:`relative flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x>0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#ff895f] text-white hover:bg-[#ff895f]/80"}`,children:[c.jsxs("p",{className:"z-1 relative flex items-center gap-2",children:[C?c.jsx(js,{className:"w-4 h-4 animate-spin"}):c.jsx(fk,{className:"w-4 h-4"}),c.jsx("span",{children:x>0?`Resend in ${x}s`:"Resend code"})]}),x>0&&c.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden",children:c.jsx("div",{className:"h-full bg-[#ff895f]/20 transition-all duration-1000 ease-linear",style:{width:`${j()}%`}})})]})]})]})};/*! @azure/msal-common v15.11.0 2025-08-12 */const Ze={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},af={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Fm={GET:"GET",POST:"POST"},Vw=[Ze.OPENID_SCOPE,Ze.PROFILE_SCOPE,Ze.OFFLINE_ACCESS_SCOPE],gY=[...Vw,Ze.EMAIL_SCOPE],Ei={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},vY={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},hf={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},aS={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Ni={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},qO={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},o_={QUERY:"query",FRAGMENT:"fragment"},aft={QUERY:"query"},Efe={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},iS={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Ab={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ya={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},GO="appmetadata",ift="client_info",M5="1",I5={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},So={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ga={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Cr={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},c1={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},yY={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Up={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},LN={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Nm={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},oft={Pop:"pop"},_fe=300;/*! @azure/msal-common v15.11.0 2025-08-12 */const O5="unexpected_error",lft="post_request_failed";/*! @azure/msal-common v15.11.0 2025-08-12 */const xY={[O5]:"Unexpected error in authentication.",[lft]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Dr extends Error{constructor(e,n,r){const s=n?`${e}: ${n}`:e;super(s),Object.setPrototypeOf(this,Dr.prototype),this.errorCode=e||Ze.EMPTY_STRING,this.errorMessage=n||Ze.EMPTY_STRING,this.subError=r||Ze.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function W7(t,e){return new Dr(t,e?`${xY[t]} ${e}`:xY[t])}/*! @azure/msal-common v15.11.0 2025-08-12 */const WO="client_info_decoding_error",Tfe="client_info_empty_error",KO="token_parsing_error",Afe="null_or_empty_token",fd="endpoints_resolution_error",Nfe="network_error",jfe="openid_config_error",Dfe="hash_not_deserialized",cv="invalid_state",Rfe="state_mismatch",K7="state_not_found",Mfe="nonce_mismatch",YO="auth_time_not_found",Ife="max_age_transpired",cft="multiple_matching_tokens",uft="multiple_matching_accounts",Ofe="multiple_matching_appMetadata",Pfe="request_cannot_be_made",Ffe="cannot_remove_empty_scope",Bfe="cannot_append_scopeset",Y7="empty_input_scopeset",dft="device_code_polling_cancelled",hft="device_code_expired",fft="device_code_unknown_error",XO="no_account_in_silent_request",Lfe="invalid_cache_record",JO="invalid_cache_environment",X7="no_account_found",J7="no_crypto_object",mft="unexpected_credential_type",pft="invalid_assertion",gft="invalid_client_credential",ff="token_refresh_required",vft="user_timeout_reached",zfe="token_claims_cnf_required_for_signedjwt",$fe="authorization_code_missing_from_server_response",Ufe="binding_key_not_removed",Hfe="end_session_endpoint_not_supported",QO="key_id_missing",yft="no_network_connectivity",xft="user_canceled",bft="missing_tenant_id_error",Nn="method_not_implemented",wft="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.11.0 2025-08-12 */const bY={[WO]:"The client info could not be parsed/decoded correctly",[Tfe]:"The client info was empty",[KO]:"Token cannot be parsed",[Afe]:"The token is null or empty",[fd]:"Endpoints cannot be resolved",[Nfe]:"Network request failed",[jfe]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Dfe]:"The hash parameters could not be deserialized",[cv]:"State was not the expected format",[Rfe]:"State mismatch error",[K7]:"State not found",[Mfe]:"Nonce mismatch error",[YO]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Ife]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[cft]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[uft]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ofe]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Pfe]:"Token request cannot be made without authorization code or refresh token.",[Ffe]:"Cannot remove null or empty scope from ScopeSet",[Bfe]:"Cannot append ScopeSet",[Y7]:"Empty input ScopeSet cannot be processed",[dft]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[hft]:"Device code is expired.",[fft]:"Device code stopped polling for unknown reasons.",[XO]:"Please pass an account object, silent flow is not supported without account information",[Lfe]:"Cache record object was null or undefined.",[JO]:"Invalid environment when attempting to create cache entry",[X7]:"No account found in cache for given key.",[J7]:"No crypto object detected.",[mft]:"Unexpected credential type.",[pft]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[gft]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ff]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[vft]:"User defined timeout for device code polling reached",[zfe]:"Cannot generate a POP jwt if the token_claims are not populated",[$fe]:"Server response does not contain an authorization code to proceed",[Ufe]:"Could not remove the credential's binding key from storage.",[Hfe]:"The provided authority does not support logout",[QO]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[yft]:"No network connectivity. Check your internet connection.",[xft]:"User cancelled the flow.",[bft]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Nn]:"This method has not been implemented",[wft]:"The nested app auth bridge is disabled"};class ZO extends Dr{constructor(e,n){super(e,n?`${bY[e]}: ${n}`:bY[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ZO.prototype)}}function ot(t,e){return new ZO(t,e)}/*! @azure/msal-common v15.11.0 2025-08-12 */const P5={createNewGuid:()=>{throw ot(Nn)},base64Decode:()=>{throw ot(Nn)},base64Encode:()=>{throw ot(Nn)},base64UrlEncode:()=>{throw ot(Nn)},encodeKid:()=>{throw ot(Nn)},async getPublicKeyThumbprint(){throw ot(Nn)},async removeTokenBindingKey(){throw ot(Nn)},async clearKeystore(){throw ot(Nn)},async signJwt(){throw ot(Nn)},async hashString(){throw ot(Nn)}};/*! @azure/msal-common v15.11.0 2025-08-12 */var ss;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(ss||(ss={}));class jf{constructor(e,n,r){this.level=ss.Info;const s=()=>{},a=e||jf.createDefaultLoggerOptions();this.localCallback=a.loggerCallback||s,this.piiLoggingEnabled=a.piiLoggingEnabled||!1,this.level=typeof a.logLevel=="number"?a.logLevel:ss.Info,this.correlationId=a.correlationId||Ze.EMPTY_STRING,this.packageName=n||Ze.EMPTY_STRING,this.packageVersion=r||Ze.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ss.Info}}clone(e,n,r){return new jf({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const a=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${ss[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,a,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:ss.Error,containsPii:!1,correlationId:n||Ze.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:ss.Error,containsPii:!0,correlationId:n||Ze.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:ss.Warning,containsPii:!1,correlationId:n||Ze.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:ss.Warning,containsPii:!0,correlationId:n||Ze.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:ss.Info,containsPii:!1,correlationId:n||Ze.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:ss.Info,containsPii:!0,correlationId:n||Ze.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:ss.Verbose,containsPii:!1,correlationId:n||Ze.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:ss.Verbose,containsPii:!0,correlationId:n||Ze.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:ss.Trace,containsPii:!1,correlationId:n||Ze.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:ss.Trace,containsPii:!0,correlationId:n||Ze.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.11.0 2025-08-12 */const Vfe="@azure/msal-common",e9="15.11.0";/*! @azure/msal-common v15.11.0 2025-08-12 */const t9={None:"none"};/*! @azure/msal-common v15.11.0 2025-08-12 */const qfe="redirect_uri_empty",Cft="claims_request_parsing_error",Gfe="authority_uri_insecure",Tx="url_parse_error",Wfe="empty_url_error",Kfe="empty_input_scopes_error",n9="invalid_claims",Yfe="token_request_empty",Xfe="logout_request_empty",Sft="invalid_code_challenge_method",r9="pkce_params_missing",s9="invalid_cloud_discovery_metadata",Jfe="invalid_authority_metadata",Qfe="untrusted_authority",l_="missing_ssh_jwk",Zfe="missing_ssh_kid",kft="missing_nonce_authentication_header",Eft="invalid_authentication_header",eme="cannot_set_OIDCOptions",tme="cannot_allow_platform_broker",nme="authority_mismatch",rme="invalid_request_method_for_EAR",sme="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.11.0 2025-08-12 */const _ft={[qfe]:"A redirect URI is required for all calls, and none has been set.",[Cft]:"Could not parse the given claims request object.",[Gfe]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Tx]:"URL could not be parsed into appropriate segments.",[Wfe]:"URL was empty or null.",[Kfe]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[n9]:"Given claims parameter must be a stringified JSON object.",[Yfe]:"Token request was empty and not found in cache.",[Xfe]:"The logout request was null or undefined.",[Sft]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[r9]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[s9]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Jfe]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Qfe]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[l_]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Zfe]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[kft]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Eft]:"Invalid authentication header provided",[eme]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[tme]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[nme]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[sme]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[rme]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class a9 extends Dr{constructor(e){super(e,_ft[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,a9.prototype)}}function Or(t){return new a9(t)}/*! @azure/msal-common v15.11.0 2025-08-12 */class pu{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),s=a=>decodeURIComponent(a.replace(/\+/g," "));return r.forEach(a=>{if(a.trim()){const[i,o]=a.split(/=(.+)/g,2);i&&o&&(n[s(i)]=s(o))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.11.0 2025-08-12 */class fa{constructor(e){const n=e?pu.trimArrayEntries([...e]):[],r=n?pu.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw Or(Kfe);this.scopes=new Set,r.forEach(s=>this.scopes.add(s))}static fromString(e){const r=(e||Ze.EMPTY_STRING).split(" ");return new fa(r)}static createSearchScopes(e){const n=new fa(e);return n.containsOnlyOIDCScopes()?n.removeScope(Ze.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new fa(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return gY.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw ot(Bfe)}}removeScope(e){if(!e)throw ot(Ffe);this.scopes.delete(e.trim())}removeOIDCScopes(){gY.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ot(Y7);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw ot(Y7);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),s=this.getScopeCount();return n.size<s+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):Ze.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.11.0 2025-08-12 */function wY(t,e){return!!t&&!!e&&t===e.split(".")[1]}function i9(t,e,n,r){if(r){const{oid:s,sub:a,tid:i,name:o,tfp:l,acr:u,preferred_username:d,upn:f,login_hint:m}=r,g=i||l||u||"";return{tenantId:g,localAccountId:s||a||"",name:o,username:d||f||"",loginHint:m,isHomeTenant:wY(g,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:wY(n,t)}}function o9(t,e,n,r){let s=t;if(e){const{isHomeTenant:a,...i}=e;s={...t,...i}}if(n){const{isHomeTenant:a,...i}=i9(t.homeAccountId,t.localAccountId,t.tenantId,n);return s={...s,...i,idTokenClaims:n,idToken:r},s}return s}/*! @azure/msal-common v15.11.0 2025-08-12 */function Kv(t,e){const n=Tft(t);try{const r=e(n);return JSON.parse(r)}catch{throw ot(KO)}}function Tft(t){if(!t)throw ot(Afe);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw ot(KO);return n[2]}function ame(t,e){if(e===0||Date.now()-3e5>t+e)throw ot(Ife)}/*! @azure/msal-common v15.11.0 2025-08-12 */function ime(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function F5(t){if(!t||t.indexOf("=")<0)return null;try{const e=ime(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw ot(Dfe)}return null}function Nb(t,e=!0,n){const r=new Array;return t.forEach((s,a)=>{!e&&n&&a in n?r.push(`${a}=${s}`):r.push(`${a}=${encodeURIComponent(s)}`)}),r.join("&")}/*! @azure/msal-common v15.11.0 2025-08-12 */class Zn{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Or(Wfe);e.includes("#")||(this._urlString=Zn.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return pu.endsWith(n,"?")?n=n.slice(0,-1):pu.endsWith(n,"?/")&&(n=n.slice(0,-2)),pu.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Or(Tx)}if(!e.HostNameAndPort||!e.PathSegments)throw Or(Tx);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Or(Gfe)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Zn.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===hf.COMMON||r[0]===hf.ORGANIZATIONS)&&(r[0]=e),Zn.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Or(Tx);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let s=r.AbsolutePath.split("/");return s=s.filter(a=>a&&a.length>0),r.PathSegments=s,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Or(Tx);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===Ze.FORWARD_SLASH){const s=new Zn(n).getUrlComponents();return s.Protocol+"//"+s.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Zn(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!F5(e)}}/*! @azure/msal-common v15.11.0 2025-08-12 */const ome={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},CY=ome.endpointMetadata,l9=ome.instanceDiscoveryMetadata,lme=new Set;l9.metadata.forEach(t=>{t.aliases.forEach(e=>{lme.add(e)})});function Aft(t,e){var s;let n;const r=t.canonicalAuthority;if(r){const a=new Zn(r).getUrlComponents().HostNameAndPort;n=SY(a,(s=t.cloudDiscoveryMetadata)==null?void 0:s.metadata,So.CONFIG,e)||SY(a,l9.metadata,So.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function SY(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const s=B5(e,t);if(s)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),s.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Nft(t){return B5(l9.metadata,t)}function B5(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.11.0 2025-08-12 */const L5="cache_quota_exceeded",c9="cache_error_unknown";/*! @azure/msal-common v15.11.0 2025-08-12 */const zN={[L5]:"Exceeded cache storage capacity.",[c9]:"Unexpected error occurred when using cache storage."};class Tg extends Dr{constructor(e,n){const r=n||(zN[e]?zN[e]:zN[c9]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Tg.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Q7(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Tg(L5):new Tg(t.name,t.message):new Tg(c9)}/*! @azure/msal-common v15.11.0 2025-08-12 */class Z7{constructor(e,n,r,s,a){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(Vfe,e9),this.staticAuthorityOptions=a,this.performanceClient=s}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(s=>!s))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(a=>a.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(s=>this.getTenantProfilesFromAccountEntity(s,n,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,s,a){let i=null,o;if(a&&!this.tenantProfileMatchesFilter(r,a))return null;const l=this.getIdToken(e,s,n,r.tenantId);return l&&(o=Kv(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,a))?null:(i=o9(e,r,o,l==null?void 0:l.secret),i)}getTenantProfilesFromAccountEntity(e,n,r,s){const a=e.getAccountInfo();let i=a.tenantProfiles||new Map;const o=this.getTokenKeys();if(r){const u=i.get(r);if(u)i=new Map([[r,u]]);else return[]}const l=[];return i.forEach(u=>{const d=this.getTenantedAccountInfoByFilter(a,o,u,n,s);d&&l.push(d)}),l}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var s;if(!e)throw ot(Lfe);try{e.account&&await this.setAccount(e.account,n),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(a){throw(s=this.commonLogger)==null||s.error("CacheManager.saveCacheRecord: failed"),a instanceof Dr?a:Q7(a)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=this.getTokenKeys(),a=fa.fromString(e.target);s.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,r,!1))return;const o=this.getAccessTokenCredential(i,n);o&&this.credentialMatchesFilter(o,r)&&fa.fromString(o.target).intersectingScopeSets(a)&&this.removeAccessToken(i,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),s=[];return r.forEach(a=>{var u;const i=this.getAccount(a,n);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const o={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},l=(u=i.tenantProfiles)==null?void 0:u.filter(d=>this.tenantProfileMatchesFilter(d,o));l&&l.length===0||s.push(i)}),s}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===Ya.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===Cr.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(s=>{if(!this.isAppMetadata(s))return;const a=this.getAppMetadata(s);a&&(e.environment&&!this.matchEnvironment(a,e.environment)||e.clientId&&!this.matchClientId(a,e.clientId)||(r[s]=a))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(s=>{if(!this.isAuthorityMetadata(s)||s.indexOf(this.clientId)===-1)return;const a=this.getAuthorityMetadata(s);a&&a.aliases.indexOf(e)!==-1&&(r=a)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),s=a=>a.includes(e.homeAccountId)&&a.includes(e.environment);r.filter(s).forEach(a=>{this.removeItem(a,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),s=a=>a.includes(e.homeAccountId)&&a.includes(e.environment);r.idToken.filter(s).forEach(a=>{this.removeIdToken(a,n)}),r.accessToken.filter(s).forEach(a=>{this.removeAccessToken(a,n)}),r.refreshToken.filter(s).forEach(a=>{this.removeRefreshToken(a,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==Ya.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Cr.POP)return;const s=r.keyId;s&&this.cryptoImpl.removeTokenBindingKey(s).catch(()=>{var a;this.commonLogger.error(`Failed to remove token binding key ${s}`,n),(a=this.performanceClient)==null||a.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,s,a){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ya.ID_TOKEN,clientId:this.clientId,realm:s},o=this.getIdTokensByFilter(i,n,r),l=o.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=o;if(!s){const d=new Map;o.forEach((m,g)=>{m.realm===e.tenantId&&d.set(g,m)});const f=d.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),o.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,f)=>{this.removeIdToken(f,n)}),a&&n&&a.addFields({multiMatchedID:o.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),o.values().next().value}getIdTokensByFilter(e,n,r){const s=r&&r.idToken||this.getTokenKeys().idToken,a=new Map;return s.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const o=this.getIdTokenCredential(i,n);o&&this.credentialMatchesFilter(o,e)&&a.set(i,o)}),a}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,s){const a=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",a);const i=fa.createSearchScopes(n.scopes),o=n.authenticationScheme||Cr.BEARER,l=o.toLowerCase()!==Cr.BEARER.toLowerCase()?Ya.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ya.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:s||e.tenantId,target:i,tokenType:o,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,f=[];d.forEach(g=>{if(this.accessTokenKeyMatchesFilter(g,u,!0)){const x=this.getAccessTokenCredential(g,a);x&&this.credentialMatchesFilter(x,u)&&f.push(x)}});const m=f.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",a),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",a),f.forEach(g=>{this.removeAccessToken(this.generateCredentialKey(g),a)}),this.performanceClient.addFields({multiMatchedAT:f.length},a),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",a),f[0])}accessTokenKeyMatchesFilter(e,n,r){const s=e.toLowerCase();if(n.clientId&&s.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&s.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&s.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&s.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const a=n.target.asArray();for(let i=0;i<a.length;i++){if(r&&!s.includes(a[i].toLowerCase()))return!1;if(!r&&s.includes(a[i].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),s=[];return r.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,e,!0))return;const i=this.getAccessTokenCredential(a,n);i&&this.credentialMatchesFilter(i,e)&&s.push(i)}),s}getRefreshToken(e,n,r,s,a){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=n?M5:void 0,o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ya.REFRESH_TOKEN,clientId:this.clientId,familyId:i},l=s&&s.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,o)){const m=this.getRefreshTokenCredential(f,r);m&&this.credentialMatchesFilter(m,o)&&u.push(m)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&a&&r&&a.addFields({multiMatchedRT:d},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),s=Object.keys(r).map(i=>r[i]),a=s.length;if(a<1)return null;if(a>1)throw ot(Ofe);return s[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===M5)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const s=Aft(this.staticAuthorityOptions,this.commonLogger);if(s.includes(n)&&s.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==Ya.ACCESS_TOKEN&&e.credentialType!==Ya.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:fa.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(GO)!==-1}isAuthorityMetadata(e){return e.indexOf(I5.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${I5.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class jft extends Z7{async setAccount(){throw ot(Nn)}getAccount(){throw ot(Nn)}async setIdTokenCredential(){throw ot(Nn)}getIdTokenCredential(){throw ot(Nn)}async setAccessTokenCredential(){throw ot(Nn)}getAccessTokenCredential(){throw ot(Nn)}async setRefreshTokenCredential(){throw ot(Nn)}getRefreshTokenCredential(){throw ot(Nn)}setAppMetadata(){throw ot(Nn)}getAppMetadata(){throw ot(Nn)}setServerTelemetry(){throw ot(Nn)}getServerTelemetry(){throw ot(Nn)}setAuthorityMetadata(){throw ot(Nn)}getAuthorityMetadata(){throw ot(Nn)}getAuthorityMetadataKeys(){throw ot(Nn)}setThrottlingCache(){throw ot(Nn)}getThrottlingCache(){throw ot(Nn)}removeItem(){throw ot(Nn)}getKeys(){throw ot(Nn)}getAccountKeys(){throw ot(Nn)}getTokenKeys(){throw ot(Nn)}generateCredentialKey(){throw ot(Nn)}generateAccountKey(){throw ot(Nn)}}/*! @azure/msal-common v15.11.0 2025-08-12 */const ao={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.11.0 2025-08-12 */const ke={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},Dft={InProgress:1};/*! @azure/msal-common v15.11.0 2025-08-12 */class kY{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class cme{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Dft.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new kY}}startPerformanceMeasurement(){return new kY}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.11.0 2025-08-12 */const ume={tokenRenewalOffsetSeconds:_fe,preventCorsPreflight:!1},Rft={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ss.Info,correlationId:Ze.EMPTY_STRING},Mft={claimsBasedCachingEnabled:!1},Ift={async sendGetRequestAsync(){throw ot(Nn)},async sendPostRequestAsync(){throw ot(Nn)}},Oft={sku:Ze.SKU,version:e9,cpu:Ze.EMPTY_STRING,os:Ze.EMPTY_STRING},Pft={clientSecret:Ze.EMPTY_STRING,clientAssertion:void 0},Fft={azureCloudInstance:t9.None,tenant:`${Ze.DEFAULT_COMMON_TENANT}`},Bft={application:{appName:"",appVersion:""}};function Lft({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:s,networkInterface:a,cryptoInterface:i,clientCredentials:o,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:f,serializableCache:m}){const g={...Rft,...n};return{authOptions:zft(t),systemOptions:{...ume,...e},loggerOptions:g,cacheOptions:{...Mft,...r},storageInterface:s||new jft(t.clientId,P5,new jf(g),new cme),networkInterface:a||Ift,cryptoInterface:i||P5,clientCredentials:o||Pft,libraryInfo:{...Oft,...l},telemetry:{...Bft,...u},serverTelemetryManager:d||null,persistencePlugin:f||null,serializableCache:m||null}}function zft(t){return{clientCapabilities:[],azureCloudOptions:Fft,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function dme(t){return t.authOptions.authority.options.protocolMode===ao.OIDC}/*! @azure/msal-common v15.11.0 2025-08-12 */const ac={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.11.0 2025-08-12 */function z5(t,e){if(!t)throw ot(Tfe);try{const n=e(t);return JSON.parse(n)}catch{throw ot(WO)}}function Ag(t){if(!t)throw ot(WO);const e=t.split(Ab.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Ze.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.11.0 2025-08-12 */const y0="client_id",hme="redirect_uri",$ft="response_type",Uft="response_mode",Hft="grant_type",Vft="claims",qft="scope",Gft="refresh_token",Wft="state",Kft="nonce",Yft="prompt",Xft="code",Jft="code_challenge",Qft="code_challenge_method",Zft="code_verifier",emt="client-request-id",tmt="x-client-SKU",nmt="x-client-VER",rmt="x-client-OS",smt="x-client-CPU",amt="x-client-current-telemetry",imt="x-client-last-telemetry",omt="x-ms-lib-capability",lmt="x-app-name",cmt="x-app-ver",umt="post_logout_redirect_uri",dmt="id_token_hint",hmt="client_secret",fmt="client_assertion",mmt="client_assertion_type",fme="token_type",mme="req_cnf",EY="return_spa_code",pmt="nativebroker",gmt="logout_hint",vmt="sid",ymt="login_hint",xmt="domain_hint",bmt="x-client-xtra-sku",$5="brk_client_id",U5="brk_redirect_uri",e8="instance_aware",wmt="ear_jwk",Cmt="ear_jwe_crypto";/*! @azure/msal-common v15.11.0 2025-08-12 */function c_(t,e,n){if(!e)return;const r=t.get(y0);r&&t.has($5)&&(n==null||n.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(hme)},e))}function u9(t,e){t.set($ft,e)}function Smt(t,e){t.set(Uft,e||aft.QUERY)}function kmt(t){t.set(pmt,"1")}function d9(t,e,n=!0,r=Vw){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const s=n?[...e||[],...r]:e||[],a=new fa(s);t.set(qft,a.printScopes())}function h9(t,e){t.set(y0,e)}function f9(t,e){t.set(hme,e)}function Emt(t,e){t.set(umt,e)}function _mt(t,e){t.set(dmt,e)}function Tmt(t,e){t.set(xmt,e)}function oS(t,e){t.set(ymt,e)}function H5(t,e){t.set(Ei.CCS_HEADER,`UPN:${e}`)}function u1(t,e){t.set(Ei.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function _Y(t,e){t.set(vmt,e)}function m9(t,e,n){const r=Mmt(e,n);try{JSON.parse(r)}catch{throw Or(n9)}t.set(Vft,r)}function p9(t,e){t.set(emt,e)}function g9(t,e){t.set(tmt,e.sku),t.set(nmt,e.version),e.os&&t.set(rmt,e.os),e.cpu&&t.set(smt,e.cpu)}function v9(t,e){e!=null&&e.appName&&t.set(lmt,e.appName),e!=null&&e.appVersion&&t.set(cmt,e.appVersion)}function Amt(t,e){t.set(Yft,e)}function pme(t,e){e&&t.set(Wft,e)}function Nmt(t,e){t.set(Kft,e)}function gme(t,e,n){if(e&&n)t.set(Jft,e),t.set(Qft,n);else throw Or(r9)}function jmt(t,e){t.set(Xft,e)}function Dmt(t,e){t.set(Gft,e)}function Rmt(t,e){t.set(Zft,e)}function vme(t,e){t.set(hmt,e)}function yme(t,e){e&&t.set(fmt,e)}function xme(t,e){e&&t.set(mmt,e)}function bme(t,e){t.set(Hft,e)}function y9(t){t.set(ift,"1")}function wme(t){t.has(e8)||t.set(e8,"true")}function mf(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function Mmt(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw Or(n9)}return e&&e.length>0&&(n.hasOwnProperty(aS.ACCESS_TOKEN)||(n[aS.ACCESS_TOKEN]={}),n[aS.ACCESS_TOKEN][aS.XMS_CC]={values:e}),JSON.stringify(n)}function x9(t,e){e&&(t.set(fme,Cr.POP),t.set(mme,e))}function Cme(t,e){e&&(t.set(fme,Cr.SSH),t.set(mme,e))}function Sme(t,e){t.set(amt,e.generateCurrentRequestHeaderValue()),t.set(imt,e.generateLastRequestHeaderValue())}function kme(t){t.set(omt,c1.X_MS_LIB_CAPABILITY_VALUE)}function Imt(t,e){t.set(gmt,e)}function u_(t,e,n){t.has($5)||t.set($5,e),t.has(U5)||t.set(U5,n)}function Omt(t,e){t.set(wmt,encodeURIComponent(e)),t.set(Cmt,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Pmt(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.11.0 2025-08-12 */const Gl={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.11.0 2025-08-12 */function Fmt(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.11.0 2025-08-12 */function Bmt(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.11.0 2025-08-12 */function Lmt(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.11.0 2025-08-12 */const Lo=(t,e,n,r,s)=>(...a)=>{n.trace(`Executing function ${e}`);const i=r==null?void 0:r.startMeasurement(e,s);if(s){const o=e+"CallCount";r==null||r.incrementFields({[o]:1},s)}try{const o=t(...a);return i==null||i.end({success:!0}),n.trace(`Returning result from ${e}`),o}catch(o){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(o))}catch{n.trace("Unable to print error message.")}throw i==null||i.end({success:!1},o),o}},Xe=(t,e,n,r,s)=>(...a)=>{n.trace(`Executing function ${e}`);const i=r==null?void 0:r.startMeasurement(e,s);if(s){const o=e+"CallCount";r==null||r.incrementFields({[o]:1},s)}return r==null||r.setPreQueueTime(e,s),t(...a).then(o=>(n.trace(`Returning result from ${e}`),i==null||i.end({success:!0}),o)).catch(o=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(o))}catch{n.trace("Unable to print error message.")}throw i==null||i.end({success:!1},o),o})};/*! @azure/msal-common v15.11.0 2025-08-12 */class d_{constructor(e,n,r,s){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=s}async detectRegion(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=Up.ENVIRONMENT_VARIABLE;else{const a=d_.IMDS_OPTIONS;try{const i=await Xe(this.getRegionFromIMDS.bind(this),ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Ze.IMDS_VERSION,a);if(i.status===af.SUCCESS&&(r=i.body,n.region_source=Up.IMDS),i.status===af.BAD_REQUEST){const o=await Xe(this.getCurrentVersion.bind(this),ke.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(a);if(!o)return n.region_source=Up.FAILED_AUTO_DETECTION,null;const l=await Xe(this.getRegionFromIMDS.bind(this),ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(o,a);l.status===af.SUCCESS&&(r=l.body,n.region_source=Up.IMDS)}}catch{return n.region_source=Up.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=Up.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(ke.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Ze.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,Ze.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(ke.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${Ze.IMDS_ENDPOINT}?format=json`,e);return r.status===af.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}d_.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.11.0 2025-08-12 */function lo(){return Math.round(new Date().getTime()/1e3)}function TY(t){return t.getTime()/1e3}function Ng(t){return t?new Date(Number(t)*1e3):new Date}function V5(t,e){const n=Number(t)||0;return lo()+e>n}function zmt(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function $mt(t){return Number(t)>lo()}/*! @azure/msal-common v15.11.0 2025-08-12 */function h_(t,e,n,r,s){return{credentialType:Ya.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:s,lastUpdatedAt:Date.now().toString()}}function f_(t,e,n,r,s,a,i,o,l,u,d,f,m,g,x){var C,S;const b={homeAccountId:t,credentialType:Ya.ACCESS_TOKEN,secret:n,cachedAt:lo().toString(),expiresOn:i.toString(),extendedExpiresOn:o.toString(),environment:e,clientId:r,realm:s,target:a,tokenType:d||Cr.BEARER,lastUpdatedAt:Date.now().toString()};if(f&&(b.userAssertionHash=f),u&&(b.refreshOn=u.toString()),g&&(b.requestedClaims=g,b.requestedClaimsHash=x),((C=b.tokenType)==null?void 0:C.toLowerCase())!==Cr.BEARER.toLowerCase())switch(b.credentialType=Ya.ACCESS_TOKEN_WITH_AUTH_SCHEME,b.tokenType){case Cr.POP:const w=Kv(n,l);if(!((S=w==null?void 0:w.cnf)!=null&&S.kid))throw ot(zfe);b.keyId=w.cnf.kid;break;case Cr.SSH:b.keyId=m}return b}function Eme(t,e,n,r,s,a,i){const o={credentialType:Ya.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return a&&(o.userAssertionHash=a),s&&(o.familyId=s),i&&(o.expiresOn=i.toString()),o}function b9(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function AY(t){return t?b9(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Ya.ACCESS_TOKEN||t.credentialType===Ya.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Umt(t){return t?b9(t)&&t.hasOwnProperty("realm")&&t.credentialType===Ya.ID_TOKEN:!1}function NY(t){return t?b9(t)&&t.credentialType===Ya.REFRESH_TOKEN:!1}function Hmt(t,e){const n=t.indexOf(Ga.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function Vmt(t,e){let n=!1;t&&(n=t.indexOf(c1.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function qmt({environment:t,clientId:e}){return[GO,t,e].join(Ab.CACHE_KEY_SEPARATOR).toLowerCase()}function Gmt(t,e){return e?t.indexOf(GO)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function Wmt(t,e){return e?t.indexOf(I5.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function jY(){return lo()+I5.REFRESH_TIME_SECONDS}function lS(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function $N(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function DY(t){return t.expiresAt<=lo()}/*! @azure/msal-common v15.11.0 2025-08-12 */class ai{constructor(e,n,r,s,a,i,o,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=s,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=a,this.performanceClient=o,this.correlationId=i,this.managedIdentity=l||!1,this.regionDiscovery=new d_(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Ze.CIAM_AUTH_URL))return Gl.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case Ze.ADFS:return Gl.Adfs;case Ze.DSTS:return Gl.Dsts}return Gl.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Zn(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ot(fd)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ot(fd)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ot(fd)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ot(Hfe);return this.replacePath(this.metadata.end_session_endpoint)}else throw ot(fd)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ot(fd)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ot(fd)}canReplaceTenant(e){return e.PathSegments.length===1&&!ai.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Gl.Default&&this.protocolMode!==ao.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const s=new Zn(this.metadata.canonical_authority).getUrlComponents(),a=s.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((o,l)=>{let u=a[l];if(l===0&&this.canReplaceTenant(s)){const d=new Zn(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}o!==u&&(n=n.replace(`/${u}/`,`/${o}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Gl.Adfs||this.protocolMode===ao.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await Xe(this.updateCloudDiscoveryMetadata.bind(this),ke.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await Xe(this.updateEndpointMetadata.bind(this),ke.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(a=this.performanceClient)==null||a.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:jY(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==So.CACHE&&(r==null?void 0:r.source)!==So.CACHE&&(e.expiresAt=jY(),e.canonical_authority=this.canonicalAuthority);const s=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(s,e),this.metadata=e}async updateEndpointMetadata(e){var s,a,i;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===So.HARDCODED_VALUES&&(a=this.authorityOptions.azureRegionConfiguration)!=null&&a.azureRegion&&n.metadata){const o=await Xe(this.updateMetadataWithRegionalInformation.bind(this),ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);lS(e,o,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await Xe(this.getEndpointMetadataFromNetwork.bind(this),ke.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&(r=await Xe(this.updateMetadataWithRegionalInformation.bind(this),ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),lS(e,r,!0),So.NETWORK;throw ot(jfe,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),lS(e,n,!1),{source:So.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const s=this.getEndpointMetadataFromHardcodedValues();if(s)return lS(e,s,!1),{source:So.HARDCODED_VALUES,metadata:s};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=DY(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:So.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Zn(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Or(Jfe)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(ke.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const s=await this.networkInterface.sendGetRequestAsync(n,e);return Fmt(s.body)?s.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(s){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${s}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in CY?CY[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,s,a;(r=this.performanceClient)==null||r.addQueueMeasurement(ke.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(s=this.authorityOptions.azureRegionConfiguration)==null?void 0:s.azureRegion;if(n){if(n!==Ze.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=LN.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,ai.replaceWithRegionalInformation(e,n);const i=await Xe(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ke.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.environmentRegion,this.regionDiscoveryMetadata);if(i)return this.regionDiscoveryMetadata.region_outcome=LN.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=i,ai.replaceWithRegionalInformation(e,i);this.regionDiscoveryMetadata.region_outcome=LN.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await Xe(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return $N(e,r,!0),So.NETWORK;throw Or(Qfe)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Ze.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Ze.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Ze.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),$N(e,n,!1),So.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const s=Nft(this.hostnameAndPort);if(s)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),$N(e,s,!1),So.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=DY(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),So.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Gl.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),ai.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=B5(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Or(s9)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),ai.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Ze.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const a=await this.networkInterface.sendGetRequestAsync(e,n);let i,o;if(Bmt(a.body))i=a.body,o=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(Lmt(a.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),i=a.body,i.error===Ze.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=B5(o,this.hostnameAndPort)}catch(a){if(a instanceof Dr)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${a.errorCode}
Error Description: ${a.errorMessage}`);else{const i=a;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=ai.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Zn.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==t9.None){const s=n.tenant?n.tenant:Ze.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${s}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Ze.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ot(fd)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return lme.has(e)}static isPublicCloudAuthority(e){return Ze.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const s=new Zn(e);s.validateAsUri();const a=s.getUrlComponents();let i=`${n}.${a.HostNameAndPort}`;this.isPublicCloudAuthority(a.HostNameAndPort)&&(i=`${n}.${Ze.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const o=Zn.constructAuthorityUriFromObject({...s.getUrlComponents(),HostNameAndPort:i}).urlString;return r?`${o}?${r}`:o}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=ai.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=ai.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=ai.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const s=new Zn(e).getUrlComponents();if(s.PathSegments.length===0&&s.HostNameAndPort.endsWith(Ze.CIAM_AUTH_URL)){const a=s.HostNameAndPort.split(".")[0];n=`${n}${a}${Ze.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}ai.reservedTenantDomains=new Set(["{tenant}","{tenantid}",hf.COMMON,hf.CONSUMERS,hf.ORGANIZATIONS]);function Kmt(t){var s;const r=(s=new Zn(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:s.toLowerCase();switch(r){case hf.COMMON:case hf.ORGANIZATIONS:case hf.CONSUMERS:return;default:return r}}function _me(t){return t.endsWith(Ze.FORWARD_SLASH)?t:`${t}${Ze.FORWARD_SLASH}`}function Ymt(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Or(s9)}return{canonicalAuthority:t.authority?_me(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.11.0 2025-08-12 */async function Tme(t,e,n,r,s,a,i){i==null||i.addQueueMeasurement(ke.AuthorityFactoryCreateDiscoveredInstance,a);const o=ai.transformCIAMAuthority(_me(t)),l=new ai(o,e,n,r,s,a,i);try{return await Xe(l.resolveEndpointsAsync.bind(l),ke.AuthorityResolveEndpointsAsync,s,i,a)(),l}catch{throw ot(fd)}}/*! @azure/msal-common v15.11.0 2025-08-12 */class P0 extends Dr{constructor(e,n,r,s,a){super(e,n,r),this.name="ServerError",this.errorNo=s,this.status=a,Object.setPrototypeOf(this,P0.prototype)}}/*! @azure/msal-common v15.11.0 2025-08-12 */function m_(t,e,n){var r;return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.11.0 2025-08-12 */class Zc{static generateThrottlingStorageKey(e){return`${c1.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){var i;const s=Zc.generateThrottlingStorageKey(n),a=e.getThrottlingCache(s);if(a){if(a.throttleTime<Date.now()){e.removeItem(s,r);return}throw new P0(((i=a.errorCodes)==null?void 0:i.join(" "))||Ze.EMPTY_STRING,a.errorMessage,a.subError)}}static postProcess(e,n,r,s){if(Zc.checkResponseStatus(r)||Zc.checkResponseForRetryAfter(r)){const a={throttleTime:Zc.calculateThrottleTime(parseInt(r.headers[Ei.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Zc.generateThrottlingStorageKey(n),a,s)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ei.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||c1.DEFAULT_THROTTLE_TIME_SECONDS),r+c1.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,s){const a=m_(n,r,s),i=this.generateThrottlingStorageKey(a);e.removeItem(i,r.correlationId)}}/*! @azure/msal-common v15.11.0 2025-08-12 */class p_ extends Dr{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,p_.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function Ax(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new p_(t,e,n)}/*! @azure/msal-common v15.11.0 2025-08-12 */class w9{constructor(e,n){this.config=Lft(e),this.logger=new jf(this.config.loggerOptions,Vfe,e9),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Ei.CONTENT_TYPE]=Ze.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case ac.HOME_ACCOUNT_ID:try{const r=Ag(e.credential);n[Ei.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case ac.UPN:n[Ei.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,s,a,i){var l;i&&((l=this.performanceClient)==null||l.addQueueMeasurement(i,a));const o=await this.sendPostRequest(s,e,{body:n,headers:r},a);return this.config.serverTelemetryManager&&o.status<500&&o.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),o}async sendPostRequest(e,n,r,s){var i,o,l;Zc.preProcess(this.cacheManager,e,s);let a;try{a=await Xe(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ke.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,s)(n,r);const u=a.headers||{};(o=this.performanceClient)==null||o.addFields({refreshTokenSize:((i=a.body.refresh_token)==null?void 0:i.length)||0,httpVerToken:u[Ei.X_MS_HTTP_VERSION]||"",requestId:u[Ei.X_MS_REQUEST_ID]||""},s)}catch(u){if(u instanceof p_){const d=u.responseHeaders;throw d&&((l=this.performanceClient)==null||l.addFields({httpVerToken:d[Ei.X_MS_HTTP_VERSION]||"",requestId:d[Ei.X_MS_REQUEST_ID]||"",contentTypeHeader:d[Ei.CONTENT_TYPE]||void 0,contentLengthHeader:d[Ei.CONTENT_LENGTH]||void 0,httpStatus:u.httpStatus},s)),u.error}throw u instanceof Dr?u:ot(Nfe)}return Zc.postProcess(this.cacheManager,e,a,s),a}async updateAuthority(e,n){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(ke.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,s=await Tme(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=s}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&u_(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&mf(n,e.tokenQueryParameters),p9(n,e.correlationId),c_(n,e.correlationId,this.performanceClient),Nb(n)}}/*! @azure/msal-common v15.11.0 2025-08-12 */function Ame(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.11.0 2025-08-12 */class wc{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){var u,d,f,m,g,x,b;const s=new wc;n.authorityType===Gl.Adfs?s.authorityType=iS.ADFS_ACCOUNT_TYPE:n.protocolMode===ao.OIDC?s.authorityType=iS.GENERIC_ACCOUNT_TYPE:s.authorityType=iS.MSSTS_ACCOUNT_TYPE;let a;e.clientInfo&&r&&(a=z5(e.clientInfo,r)),s.clientInfo=e.clientInfo,s.homeAccountId=e.homeAccountId,s.nativeAccountId=e.nativeAccountId;const i=e.environment||n&&n.getPreferredCache();if(!i)throw ot(JO);s.environment=i,s.realm=(a==null?void 0:a.utid)||Ame(e.idTokenClaims)||"",s.localAccountId=(a==null?void 0:a.uid)||((u=e.idTokenClaims)==null?void 0:u.oid)||((d=e.idTokenClaims)==null?void 0:d.sub)||"";const o=((f=e.idTokenClaims)==null?void 0:f.preferred_username)||((m=e.idTokenClaims)==null?void 0:m.upn),l=(g=e.idTokenClaims)!=null&&g.emails?e.idTokenClaims.emails[0]:null;if(s.username=o||l||"",s.loginHint=(x=e.idTokenClaims)==null?void 0:x.login_hint,s.name=((b=e.idTokenClaims)==null?void 0:b.name)||"",s.cloudGraphHostName=e.cloudGraphHostName,s.msGraphHost=e.msGraphHost,e.tenantProfiles)s.tenantProfiles=e.tenantProfiles;else{const C=i9(e.homeAccountId,s.localAccountId,s.realm,e.idTokenClaims);s.tenantProfiles=[C]}return s}static createFromAccountInfo(e,n,r){var a;const s=new wc;return s.authorityType=e.authorityType||iS.GENERIC_ACCOUNT_TYPE,s.homeAccountId=e.homeAccountId,s.localAccountId=e.localAccountId,s.nativeAccountId=e.nativeAccountId,s.realm=e.tenantId,s.environment=e.environment,s.username=e.username,s.name=e.name,s.loginHint=e.loginHint,s.cloudGraphHostName=n,s.msGraphHost=r,s.tenantProfiles=Array.from(((a=e.tenantProfiles)==null?void 0:a.values())||[]),s}static generateHomeAccountId(e,n,r,s,a){if(!(n===Gl.Adfs||n===Gl.Dsts)){if(e)try{const i=z5(e,s.base64Decode);if(i.uid&&i.utid)return`${i.uid}.${i.utid}`}catch{}r.warning("No client info in response")}return(a==null?void 0:a.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let s=!0;if(r){const a=e.idTokenClaims||{},i=n.idTokenClaims||{};s=a.iat===i.iat&&a.nonce===i.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&s}}/*! @azure/msal-common v15.11.0 2025-08-12 */const q5="no_tokens_found",Nme="native_account_unavailable",C9="refresh_token_expired",S9="ux_not_allowed",Xmt="interaction_required",Jmt="consent_required",Qmt="login_required",g_="bad_token";/*! @azure/msal-common v15.11.0 2025-08-12 */const RY=[Xmt,Jmt,Qmt,g_,S9],Zmt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],e0t={[q5]:"No refresh token found in the cache. Please sign-in.",[Nme]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[C9]:"Refresh token has expired.",[g_]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[S9]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Cc extends Dr{constructor(e,n,r,s,a,i,o,l){super(e,n,r),Object.setPrototypeOf(this,Cc.prototype),this.timestamp=s||Ze.EMPTY_STRING,this.traceId=a||Ze.EMPTY_STRING,this.correlationId=i||Ze.EMPTY_STRING,this.claims=o||Ze.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}}function jme(t,e,n){const r=!!t&&RY.indexOf(t)>-1,s=!!n&&Zmt.indexOf(n)>-1,a=!!e&&RY.some(i=>e.indexOf(i)>-1);return r||a||s}function G5(t){return new Cc(t,e0t[t])}/*! @azure/msal-common v15.11.0 2025-08-12 */class Yv{static setRequestState(e,n,r){const s=Yv.generateLibraryState(e,r);return n?`${s}${Ze.RESOURCE_DELIM}${n}`:s}static generateLibraryState(e,n){if(!e)throw ot(J7);const r={id:e.createNewGuid()};n&&(r.meta=n);const s=JSON.stringify(r);return e.base64Encode(s)}static parseRequestState(e,n){if(!e)throw ot(J7);if(!n)throw ot(cv);try{const r=n.split(Ze.RESOURCE_DELIM),s=r[0],a=r.length>1?r.slice(1).join(Ze.RESOURCE_DELIM):Ze.EMPTY_STRING,i=e.base64Decode(s),o=JSON.parse(i);return{userRequestState:a||Ze.EMPTY_STRING,libraryState:o}}catch{throw ot(cv)}}}/*! @azure/msal-common v15.11.0 2025-08-12 */const t0t={SW:"sw"};class uv{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(ke.PopTokenGenerateCnf,e.correlationId);const r=await Xe(this.generateKid.bind(this),ke.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),s=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:s}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(ke.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:t0t.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,s){const{resourceRequestMethod:a,resourceRequestUri:i,shrClaims:o,shrNonce:l,shrOptions:u}=r,d=i?new Zn(i):void 0,f=d==null?void 0:d.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:lo(),m:a==null?void 0:a.toUpperCase(),u:f==null?void 0:f.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:f==null?void 0:f.AbsolutePath,q:f!=null&&f.QueryString?[[],f.QueryString]:void 0,client_claims:o||void 0,...s},n,u,r.correlationId)}}/*! @azure/msal-common v15.11.0 2025-08-12 */class n0t{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.11.0 2025-08-12 */class x0{constructor(e,n,r,s,a,i,o){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=s,this.serializableCache=a,this.persistencePlugin=i,this.performanceClient=o}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const s=`Error(s): ${e.error_codes||Ze.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Ze.NOT_AVAILABLE} - Description: ${e.error_description||Ze.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Ze.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Ze.NOT_AVAILABLE}`,a=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,i=new P0(e.error,s,e.suberror,a,e.status);if(n&&e.status&&e.status>=af.SERVER_ERROR_RANGE_START&&e.status<=af.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(n&&e.status&&e.status>=af.CLIENT_ERROR_RANGE_START&&e.status<=af.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw jme(e.error,e.error_description,e.suberror)?new Cc(e.error,e.error_description,e.suberror,e.timestamp||Ze.EMPTY_STRING,e.trace_id||Ze.EMPTY_STRING,e.correlation_id||Ze.EMPTY_STRING,e.claims||Ze.EMPTY_STRING,a):i}}async handleServerTokenResponse(e,n,r,s,a,i,o,l,u){var x;(x=this.performanceClient)==null||x.addQueueMeasurement(ke.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=Kv(e.id_token||Ze.EMPTY_STRING,this.cryptoObj.base64Decode),a&&a.nonce&&d.nonce!==a.nonce)throw ot(Mfe);if(s.maxAge||s.maxAge===0){const b=d.auth_time;if(!b)throw ot(YO);ame(b,s.maxAge)}}this.homeAccountIdentifier=wc.generateHomeAccountId(e.client_info||Ze.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,d);let f;a&&a.state&&(f=Yv.parseRequestState(this.cryptoObj,a.state)),e.key_id=e.key_id||s.sshKid||void 0;const m=this.generateCacheRecord(e,n,r,s,d,i,a);let g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new n0t(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),o&&!l&&m.account){const b=this.cacheStorage.generateAccountKey(m.account.getAccountInfo());if(!this.cacheStorage.getAccount(b,s.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await x0.generateAuthenticationResult(this.cryptoObj,n,m,!1,s,d,f,void 0,u)}await this.cacheStorage.saveCacheRecord(m,s.correlationId,s.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return x0.generateAuthenticationResult(this.cryptoObj,n,m,!1,s,d,f,e,u)}generateCacheRecord(e,n,r,s,a,i,o){const l=n.getPreferredCache();if(!l)throw ot(JO);const u=Ame(a);let d,f;e.id_token&&a&&(d=h_(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),f=k9(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,s.correlationId,a,e.client_info,l,u,o,void 0,this.logger));let m=null;if(e.access_token){const b=e.scope?fa.fromString(e.scope):new fa(s.scopes||[]),C=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,S=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,w=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,E=r+C,T=E+S,_=w&&w>0?r+w:void 0;m=f_(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||n.tenant||"",b.printScopes(),E,T,this.cryptoObj.base64Decode,_,e.token_type,i,e.key_id,s.claims,s.requestedClaimsHash)}let g=null;if(e.refresh_token){let b;if(e.refresh_token_expires_in){const C=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;b=r+C}g=Eme(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,i,b)}let x=null;return e.foci&&(x={clientId:this.clientId,environment:l,familyId:e.foci}),{account:f,idToken:d,accessToken:m,refreshToken:g,appMetadata:x}}static async generateAuthenticationResult(e,n,r,s,a,i,o,l,u){var E,T,_,A,j;let d=Ze.EMPTY_STRING,f=[],m=null,g,x,b=Ze.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Cr.POP&&!a.popKid){const D=new uv(e),{secret:z,keyId:F}=r.accessToken;if(!F)throw ot(QO);d=await D.signPopToken(z,F,a)}else d=r.accessToken.secret;f=fa.fromString(r.accessToken.target).asArray(),m=Ng(r.accessToken.expiresOn),g=Ng(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(x=Ng(r.accessToken.refreshOn))}r.appMetadata&&(b=r.appMetadata.familyId===M5?M5:"");const C=(i==null?void 0:i.oid)||(i==null?void 0:i.sub)||"",S=(i==null?void 0:i.tid)||"";l!=null&&l.spa_accountid&&r.account&&(r.account.nativeAccountId=l==null?void 0:l.spa_accountid);const w=r.account?o9(r.account.getAccountInfo(),void 0,i,(E=r.idToken)==null?void 0:E.secret):null;return{authority:n.canonicalAuthority,uniqueId:C,tenantId:S,scopes:f,account:w,idToken:((T=r==null?void 0:r.idToken)==null?void 0:T.secret)||"",idTokenClaims:i||{},accessToken:d,fromCache:s,expiresOn:m,extExpiresOn:g,refreshOn:x,correlationId:a.correlationId,requestId:u||Ze.EMPTY_STRING,familyId:b,tokenType:((_=r.accessToken)==null?void 0:_.tokenType)||Ze.EMPTY_STRING,state:o?o.userRequestState:Ze.EMPTY_STRING,cloudGraphHostName:((A=r.account)==null?void 0:A.cloudGraphHostName)||Ze.EMPTY_STRING,msGraphHost:((j=r.account)==null?void 0:j.msGraphHost)||Ze.EMPTY_STRING,code:l==null?void 0:l.spa_code,fromNativeBroker:!1}}}function k9(t,e,n,r,s,a,i,o,l,u,d,f){f==null||f.verbose("setCachedAccount called");const g=t.getAccountKeys().find(w=>w.startsWith(n));let x=null;g&&(x=t.getAccount(g,s));const b=x||wc.createAccount({homeAccountId:n,idTokenClaims:a,clientInfo:i,environment:o,cloudGraphHostName:u==null?void 0:u.cloud_graph_host_name,msGraphHost:u==null?void 0:u.msgraph_host,nativeAccountId:d},e,r),C=b.tenantProfiles||[],S=l||b.realm;if(S&&!C.find(w=>w.tenantId===S)){const w=i9(n,b.localAccountId,S,a);C.push(w)}return b.tenantProfiles=C,b}/*! @azure/msal-common v15.11.0 2025-08-12 */async function Dme(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.11.0 2025-08-12 */class Rme extends w9{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,n){var o,l;if((o=this.performanceClient)==null||o.addQueueMeasurement(ke.AuthClientAcquireToken,e.correlationId),!e.code)throw ot(Pfe);const r=lo(),s=await Xe(this.executeTokenRequest.bind(this),ke.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=(l=s.headers)==null?void 0:l[Ei.X_MS_REQUEST_ID],i=new x0(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return i.validateTokenResponse(s.body),Xe(i.handleServerTokenResponse.bind(i),ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(s.body,this.authority,r,e,n,void 0,void 0,void 0,a)}getLogoutUri(e){if(!e)throw Or(Xfe);const n=this.createLogoutUrlQueryString(e);return Zn.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var u;(u=this.performanceClient)==null||u.addQueueMeasurement(ke.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),s=Zn.appendQueryString(e.tokenEndpoint,r),a=await Xe(this.createTokenRequestBody.bind(this),ke.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let i;if(n.clientInfo)try{const d=z5(n.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${d.uid}${Ab.CLIENT_INFO_SEPARATOR}${d.utid}`,type:ac.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}const o=this.createTokenRequestHeaders(i||n.ccsCredential),l=m_(this.config.authOptions.clientId,n);return Xe(this.executePostToTokenEndpoint.bind(this),ke.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(s,a,o,l,n.correlationId,ke.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(h9(n,e.embeddedClientId||((a=e.tokenBodyParameters)==null?void 0:a[y0])||this.config.authOptions.clientId),this.includeRedirectUri)f9(n,e.redirectUri);else if(!e.redirectUri)throw Or(qfe);if(d9(n,e.scopes,!0,this.oidcDefaultScopes),jmt(n,e.code),g9(n,this.config.libraryInfo),v9(n,this.config.telemetry.application),kme(n),this.serverTelemetryManager&&!dme(this.config)&&Sme(n,this.serverTelemetryManager),e.codeVerifier&&Rmt(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&vme(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const i=this.config.clientCredentials.clientAssertion;yme(n,await Dme(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),xme(n,i.assertionType)}if(bme(n,Efe.AUTHORIZATION_CODE_GRANT),y9(n),e.authenticationScheme===Cr.POP){const i=new uv(this.cryptoUtils,this.performanceClient);let o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await Xe(i.generateCnf.bind(i),ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,x9(n,o)}else if(e.authenticationScheme===Cr.SSH)if(e.sshJwk)Cme(n,e.sshJwk);else throw Or(l_);(!pu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&m9(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const i=z5(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${i.uid}${Ab.CLIENT_INFO_SEPARATOR}${i.utid}`,type:ac.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case ac.HOME_ACCOUNT_ID:try{const i=Ag(r.credential);u1(n,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case ac.UPN:H5(n,r.credential);break}return e.embeddedClientId&&u_(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&mf(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[EY])&&mf(n,{[EY]:"1"}),c_(n,e.correlationId,this.performanceClient),Nb(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&Emt(n,e.postLogoutRedirectUri),e.correlationId&&p9(n,e.correlationId),e.idTokenHint&&_mt(n,e.idTokenHint),e.state&&pme(n,e.state),e.logoutHint&&Imt(n,e.logoutHint),e.extraQueryParameters&&mf(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&wme(n),Nb(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.11.0 2025-08-12 */const r0t=300;class s0t extends w9{constructor(e,n){super(e,n)}async acquireToken(e){var i,o;(i=this.performanceClient)==null||i.addQueueMeasurement(ke.RefreshTokenClientAcquireToken,e.correlationId);const n=lo(),r=await Xe(this.executeTokenRequest.bind(this),ke.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),s=(o=r.headers)==null?void 0:o[Ei.X_MS_REQUEST_ID],a=new x0(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(r.body),Xe(a.handleServerTokenResponse.bind(a),ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,s)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Or(Yfe);if((r=this.performanceClient)==null||r.addQueueMeasurement(ke.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw ot(XO);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Xe(this.acquireTokenWithCachedRefreshToken.bind(this),ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(s){const a=s instanceof Cc&&s.errorCode===q5,i=s instanceof P0&&s.errorCode===yY.INVALID_GRANT_ERROR&&s.subError===yY.CLIENT_MISMATCH_ERROR;if(a||i)return Xe(this.acquireTokenWithCachedRefreshToken.bind(this),ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw s}return Xe(this.acquireTokenWithCachedRefreshToken.bind(this),ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var a,i,o;(a=this.performanceClient)==null||a.addQueueMeasurement(ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Lo(this.cacheManager.getRefreshToken.bind(this.cacheManager),ke.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw G5(q5);if(r.expiresOn&&V5(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||r0t))throw(i=this.performanceClient)==null||i.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),G5(C9);const s={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Cr.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:ac.HOME_ACCOUNT_ID}};try{return await Xe(this.acquireToken.bind(this),ke.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(s)}catch(l){if(l instanceof Cc&&((o=this.performanceClient)==null||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),l.subError===g_)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const u=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(u,e.correlationId)}throw l}}async executeTokenRequest(e,n){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(ke.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),s=Zn.appendQueryString(n.tokenEndpoint,r),a=await Xe(this.createTokenRequestBody.bind(this),ke.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),i=this.createTokenRequestHeaders(e.ccsCredential),o=m_(this.config.authOptions.clientId,e);return Xe(this.executePostToTokenEndpoint.bind(this),ke.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(s,a,i,o,e.correlationId,ke.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,s,a;(r=this.performanceClient)==null||r.addQueueMeasurement(ke.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(h9(n,e.embeddedClientId||((s=e.tokenBodyParameters)==null?void 0:s[y0])||this.config.authOptions.clientId),e.redirectUri&&f9(n,e.redirectUri),d9(n,e.scopes,!0,(a=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:a.defaultScopes),bme(n,Efe.REFRESH_TOKEN_GRANT),y9(n),g9(n,this.config.libraryInfo),v9(n,this.config.telemetry.application),kme(n),this.serverTelemetryManager&&!dme(this.config)&&Sme(n,this.serverTelemetryManager),Dmt(n,e.refreshToken),this.config.clientCredentials.clientSecret&&vme(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const i=this.config.clientCredentials.clientAssertion;yme(n,await Dme(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),xme(n,i.assertionType)}if(e.authenticationScheme===Cr.POP){const i=new uv(this.cryptoUtils,this.performanceClient);let o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await Xe(i.generateCnf.bind(i),ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,x9(n,o)}else if(e.authenticationScheme===Cr.SSH)if(e.sshJwk)Cme(n,e.sshJwk);else throw Or(l_);if((!pu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&m9(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case ac.HOME_ACCOUNT_ID:try{const i=Ag(e.ccsCredential.credential);u1(n,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case ac.UPN:H5(n,e.ccsCredential.credential);break}return e.embeddedClientId&&u_(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&mf(n,e.tokenBodyParameters),c_(n,e.correlationId,this.performanceClient),Nb(n)}}/*! @azure/msal-common v15.11.0 2025-08-12 */class a0t extends w9{constructor(e,n){super(e,n)}async acquireCachedToken(e){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(ke.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Nm.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!pu.isEmptyObj(e.claims))throw this.setCacheOutcome(Nm.FORCE_REFRESH_OR_CLAIMS,e.correlationId),ot(ff);if(!e.account)throw ot(XO);const r=e.account.tenantId||Kmt(e.authority),s=this.cacheManager.getTokenKeys(),a=this.cacheManager.getAccessToken(e.account,e,s,r);if(a){if($mt(a.cachedAt)||V5(a.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Nm.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),ot(ff);a.refreshOn&&V5(a.refreshOn,0)&&(n=Nm.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Nm.NO_CACHED_ACCESS_TOKEN,e.correlationId),ot(ff);const i=e.authority||this.authority.getPreferredCache(),o={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:a,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,s,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(i)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Xe(this.generateResultFromCacheRecord.bind(this),ke.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(o,e),n]}setCacheOutcome(e,n){var r,s;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(s=this.performanceClient)==null||s.addFields({cacheOutcome:e},n),e!==Nm.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(ke.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=Kv(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const a=r==null?void 0:r.auth_time;if(!a)throw ot(YO);ame(a,n.maxAge)}return x0.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.11.0 2025-08-12 */const i0t={sendGetRequestAsync:()=>Promise.reject(ot(Nn)),sendPostRequestAsync:()=>Promise.reject(ot(Nn))};/*! @azure/msal-common v15.11.0 2025-08-12 */function o0t(t,e,n,r){var o,l;const s=e.correlationId,a=new Map;h9(a,e.embeddedClientId||((o=e.extraQueryParameters)==null?void 0:o[y0])||t.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(d9(a,i,!0,(l=t.authority.options.OIDCOptions)==null?void 0:l.defaultScopes),f9(a,e.redirectUri),p9(a,s),Smt(a,e.responseMode),y9(a),e.prompt&&(Amt(a,e.prompt),r==null||r.addFields({prompt:e.prompt},s)),e.domainHint&&(Tmt(a,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},s)),e.prompt!==Ni.SELECT_ACCOUNT)if(e.sid&&e.prompt===Ni.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),_Y(a,e.sid),r==null||r.addFields({sidFromRequest:!0},s);else if(e.account){const u=u0t(e.account);let d=d0t(e.account);if(d&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),d=null),d){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),oS(a,d),r==null||r.addFields({loginHintFromClaim:!0},s);try{const f=Ag(e.account.homeAccountId);u1(a,f)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(u&&e.prompt===Ni.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),_Y(a,u),r==null||r.addFields({sidFromClaim:!0},s);try{const f=Ag(e.account.homeAccountId);u1(a,f)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),oS(a,e.loginHint),H5(a,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},s);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),oS(a,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},s);try{const f=Ag(e.account.homeAccountId);u1(a,f)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),oS(a,e.loginHint),H5(a,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},s));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Nmt(a,e.nonce),e.state&&pme(a,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&m9(a,e.claims,t.clientCapabilities),e.embeddedClientId&&u_(a,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(e8))&&wme(a),a}function E9(t,e,n,r){const s=Nb(e,n,r);return Zn.appendQueryString(t.authorizationEndpoint,s)}function l0t(t,e){if(Mme(t,e),!t.code)throw ot($fe);return t}function Mme(t,e){if(!t.state||!e)throw t.state?ot(K7,"Cached State"):ot(K7,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw ot(cv,t.state)}try{r=decodeURIComponent(e)}catch{throw ot(cv,t.state)}if(n!==r)throw ot(Rfe);if(t.error||t.error_description||t.suberror){const s=c0t(t);throw jme(t.error,t.error_description,t.suberror)?new Cc(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",s):new P0(t.error||"",t.error_description,t.suberror,s)}}function c0t(t){var r,s;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(s=t.error_uri)==null?void 0:s.substring(n+e.length):void 0}function u0t(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}function d0t(t){var e;return t.loginHint||((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.11.0 2025-08-12 */const MY=",",Ime="|";function h0t(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:s,extensionVersion:a}=t,i=new Map([[0,[n,r]],[2,[s,a]]]);let o=[];if(e!=null&&e.length){if(o=e.split(MY),o.length<4)return e}else o=Array.from({length:4},()=>Ime);return i.forEach((l,u)=>{var d,f;l.length===2&&((d=l[0])!=null&&d.length)&&((f=l[1])!=null&&f.length)&&f0t({skuArr:o,index:u,skuName:l[0],skuVersion:l[1]})}),o.join(MY)}function f0t(t){const{skuArr:e,index:n,skuName:r,skuVersion:s}=t;n>=e.length||(e[n]=[r,s].join(Ime))}class jb{constructor(e,n){this.cacheOutcome=Nm.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Ze.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Ze.EMPTY_STRING,this.telemetryCacheKey=Ga.CACHE_KEY+Ab.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Ga.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const s=n.join(Ga.VALUE_SEPARATOR),a=this.getRegionDiscoveryFields(),i=[e,a].join(Ga.VALUE_SEPARATOR);return[Ga.SCHEMA_VERSION,i,s].join(Ga.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=jb.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(Ga.VALUE_SEPARATOR),s=e.errors.slice(0,n).join(Ga.VALUE_SEPARATOR),a=e.errors.length,i=n<a?Ga.OVERFLOW_TRUE:Ga.OVERFLOW_FALSE,o=[a,i].join(Ga.VALUE_SEPARATOR);return[Ga.SCHEMA_VERSION,e.cacheHits,r,s,o].join(Ga.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=Ga.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Dr?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(Ga.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=jb.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const s={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,s,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,s=0;const a=e.errors.length;for(n=0;n<a;n++){const i=e.failedRequests[2*n]||Ze.EMPTY_STRING,o=e.failedRequests[2*n+1]||Ze.EMPTY_STRING,l=e.errors[n]||Ze.EMPTY_STRING;if(s+=i.toString().length+o.toString().length+l.length+3,s<Ga.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Ze.EMPTY_STRING),e.push(this.regionSource||Ze.EMPTY_STRING),e.push(this.regionOutcome||Ze.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return h0t(e)}}/*! @azure/msal-common v15.11.0 2025-08-12 */const Ome="missing_kid_error",Pme="missing_alg_error";/*! @azure/msal-common v15.11.0 2025-08-12 */const m0t={[Ome]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Pme]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class _9 extends Dr{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,_9.prototype)}}function IY(t){return new _9(t,m0t[t])}/*! @azure/msal-common v15.11.0 2025-08-12 */class T9{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw IY(Ome);if(!e.alg)throw IY(Pme);const n=new T9({typ:e.typ||oft.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */const A9="pkce_not_created",N9="ear_jwk_empty",Fme="ear_jwe_empty",t8="crypto_nonexistent",v_="empty_navigate_uri",Bme="hash_empty_error",j9="no_state_in_hash",Lme="hash_does_not_contain_known_properties",zme="unable_to_parse_state",$me="state_interaction_type_mismatch",Ume="interaction_in_progress",Hme="popup_window_error",Vme="empty_window_error",Db="user_cancelled",p0t="monitor_popup_timeout",qme="monitor_window_timeout",Gme="redirect_in_iframe",Wme="block_iframe_reload",Kme="block_nested_popups",g0t="iframe_closed_prematurely",y_="silent_logout_unsupported",Yme="no_account_error",v0t="silent_prompt_value_error",Xme="no_token_request_cache_error",Jme="unable_to_parse_token_request_cache_error",y0t="auth_request_not_set_error",x0t="invalid_cache_type",x_="non_browser_environment",Xp="database_not_open",W5="no_network_connectivity",Qme="post_request_failed",Zme="get_request_failed",n8="failed_to_parse_response",e0e="unable_to_load_token",D9="crypto_key_not_found",t0e="auth_code_required",n0e="auth_code_or_nativeAccountId_required",r0e="spa_code_and_nativeAccountId_present",R9="database_unavailable",s0e="unable_to_acquire_token_from_native_platform",a0e="native_handshake_timeout",i0e="native_extension_not_installed",M9="native_connection_not_established",d1="uninitialized_public_client_application",o0e="native_prompt_not_supported",l0e="invalid_base64_string",c0e="invalid_pop_token_request",u0e="failed_to_build_headers",d0e="failed_to_parse_headers",QS="failed_to_decrypt_ear_response",K5="timed_out";/*! @azure/msal-browser v4.20.0 2025-08-12 */const od="For more visit: aka.ms/msaljs/browser-errors",b0t={[A9]:"The PKCE code challenge and verifier could not be generated.",[N9]:"No EAR encryption key provided. This is unexpected.",[Fme]:"Server response does not contain ear_jwe property. This is unexpected.",[t8]:"The crypto object or function is not available.",[v_]:"Navigation URI is empty. Please check stack trace for more info.",[Bme]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${od}`,[j9]:"Hash does not contain state. Please verify that the request originated from msal.",[Lme]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${od}`,[zme]:"Unable to parse state. Please verify that the request originated from msal.",[$me]:"Hash contains state but the interaction type does not match the caller.",[Ume]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${od}`,[Hme]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Vme]:"window.open returned null or undefined window object.",[Db]:"User cancelled the flow.",[p0t]:`Token acquisition in popup failed due to timeout.  ${od}`,[qme]:`Token acquisition in iframe failed due to timeout.  ${od}`,[Gme]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Wme]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${od}`,[Kme]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[g0t]:"The iframe being monitored was closed prematurely.",[y_]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Yme]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[v0t]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Xme]:"No token request found in cache.",[Jme]:"The cached token request could not be parsed.",[y0t]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[x0t]:"Invalid cache type",[x_]:"Login and token requests are not supported in non-browser environments.",[Xp]:"Database is not open!",[W5]:"No network connectivity. Check your internet connection.",[Qme]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Zme]:"Network request failed. Please check the network trace to determine root cause.",[n8]:"Failed to parse network response. Check network trace.",[e0e]:"Error loading token to cache.",[D9]:"Cryptographic Key or Keypair not found in browser storage.",[t0e]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[n0e]:"An authorization code or nativeAccountId must be provided to this flow.",[r0e]:"Request cannot contain both spa code and native account id.",[R9]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[s0e]:`Unable to acquire token from native platform.  ${od}`,[a0e]:"Timed out while attempting to establish connection to browser extension",[i0e]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[M9]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${od}`,[d1]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${od}`,[o0e]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[l0e]:"Invalid base64 encoded string.",[c0e]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[u0e]:"Failed to build request headers object.",[d0e]:"Failed to parse response headers",[QS]:"Failed to decrypt ear response",[K5]:"The request timed out."};class qw extends Dr{constructor(e,n){super(e,b0t[e],n),Object.setPrototypeOf(this,qw.prototype),this.name="BrowserAuthError"}}function kt(t,e){return new qw(t,e)}/*! @azure/msal-browser v4.20.0 2025-08-12 */const to={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},yl={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},dx={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},ma={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},OY={GET:"GET",POST:"POST"},Yh={SIGNIN:"signin",SIGNOUT:"signout"},Ks={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},cS={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},jr={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Yt;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(Yt||(Yt={}));const PY={scopes:Vw},h0e="jwk",r8="msal.db",w0t=1,C0t=`${r8}.keys`,ki={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},S0t=[ki.Default,ki.Skip,ki.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.20.0 2025-08-12 */function uS(t){return encodeURIComponent(Rb(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Df(t){return f0e(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rb(t){return f0e(new TextEncoder().encode(t))}function f0e(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.20.0 2025-08-12 */function fc(t){return new TextDecoder().decode(pf(t))}function pf(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw kt(l0e)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.20.0 2025-08-12 */const k0t="RSASSA-PKCS1-v1_5",Xv="AES-GCM",m0e="HKDF",I9="SHA-256",E0t=2048,_0t=new Uint8Array([1,0,1]),FY="0123456789abcdef",BY=new Uint32Array(1),O9="raw",p0e="encrypt",P9="decrypt",T0t="deriveKey",A0t="crypto_subtle_undefined",F9={name:k0t,hash:I9,modulusLength:E0t,publicExponent:_0t};function N0t(t){if(!window)throw kt(x_);if(!window.crypto)throw kt(t8);if(!t&&!window.crypto.subtle)throw kt(t8,A0t)}async function g0e(t,e,n){e==null||e.addQueueMeasurement(ke.Sha256Digest,n);const s=new TextEncoder().encode(t);return window.crypto.subtle.digest(I9,s)}function j0t(t){return window.crypto.getRandomValues(t)}function UN(){return window.crypto.getRandomValues(BY),BY[0]}function Sc(){const t=Date.now(),e=UN()*1024+(UN()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),s=e&2**30-1,a=UN();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|s>>>24,n[9]=s>>>16,n[10]=s>>>8,n[11]=s,n[12]=a>>>24,n[13]=a>>>16,n[14]=a>>>8,n[15]=a;let i="";for(let o=0;o<n.length;o++)i+=FY.charAt(n[o]>>>4),i+=FY.charAt(n[o]&15),(o===3||o===5||o===7||o===9)&&(i+="-");return i}async function D0t(t,e){return window.crypto.subtle.generateKey(F9,t,e)}async function HN(t){return window.crypto.subtle.exportKey(h0e,t)}async function R0t(t,e,n){return window.crypto.subtle.importKey(h0e,t,F9,e,n)}async function M0t(t,e){return window.crypto.subtle.sign(F9,t,e)}async function B9(){const t=await v0e(),n={alg:"dir",kty:"oct",k:Df(new Uint8Array(t))};return Rb(JSON.stringify(n))}async function I0t(t){const e=fc(t),r=JSON.parse(e).k,s=pf(r);return window.crypto.subtle.importKey(O9,s,Xv,!1,[P9])}async function O0t(t,e){const n=e.split(".");if(n.length!==5)throw kt(QS,"jwe_length");const r=await I0t(t).catch(()=>{throw kt(QS,"import_key")});try{const s=new TextEncoder().encode(n[0]),a=pf(n[2]),i=pf(n[3]),o=pf(n[4]),l=o.byteLength*8,u=new Uint8Array(i.length+o.length);u.set(i),u.set(o,i.length);const d=await window.crypto.subtle.decrypt({name:Xv,iv:a,tagLength:l,additionalData:s},r,u);return new TextDecoder().decode(d)}catch{throw kt(QS,"decrypt")}}async function v0e(){const t=await window.crypto.subtle.generateKey({name:Xv,length:256},!0,[p0e,P9]);return window.crypto.subtle.exportKey(O9,t)}async function LY(t){return window.crypto.subtle.importKey(O9,t,m0e,!1,[T0t])}async function y0e(t,e,n){return window.crypto.subtle.deriveKey({name:m0e,salt:e,hash:I9,info:new TextEncoder().encode(n)},t,{name:Xv,length:256},!1,[p0e,P9])}async function P0t(t,e,n){const r=new TextEncoder().encode(e),s=window.crypto.getRandomValues(new Uint8Array(16)),a=await y0e(t,s,n),i=await window.crypto.subtle.encrypt({name:Xv,iv:new Uint8Array(12)},a,r);return{data:Df(new Uint8Array(i)),nonce:Df(s)}}async function zY(t,e,n,r){const s=pf(r),a=await y0e(t,pf(e),n),i=await window.crypto.subtle.decrypt({name:Xv,iv:new Uint8Array(12)},a,s);return new TextDecoder().decode(i)}async function x0e(t){const e=await g0e(t),n=new Uint8Array(e);return Df(n)}/*! @azure/msal-browser v4.20.0 2025-08-12 */const b_="storage_not_supported",b0e="stubbed_public_client_application_called",L9="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.20.0 2025-08-12 */const ZS={[b_]:"Given storage configuration option was not supported.",[b0e]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[L9]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};ZS[b_],ZS[b0e],ZS[L9];class z9 extends Dr{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,z9.prototype)}}function $9(t){return new z9(t,ZS[t])}/*! @azure/msal-browser v4.20.0 2025-08-12 */function w0e(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function F0t(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function U9(){return window.parent!==window}function B0t(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${to.POPUP_NAME_PREFIX}.`)===0}function kd(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function L0t(){const e=new Zn(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function z0t(){if(Zn.hashContainsKnownProperties(window.location.hash)&&U9())throw kt(Wme)}function $0t(t){if(U9()&&!t)throw kt(Gme)}function U0t(){if(B0t())throw kt(Kme)}function C0e(){if(typeof window>"u")throw kt(x_)}function S0e(t){if(!t)throw kt(d1)}function H9(t){C0e(),z0t(),U0t(),S0e(t)}function $Y(t,e){if(H9(t),$0t(e.system.allowRedirectInIframe),e.cache.cacheLocation===ma.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw $9(L9)}function k0e(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function H0t(){return Sc()}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Y5{navigateInternal(e,n){return Y5.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Y5.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,s)=>{setTimeout(()=>{s(kt(K5,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class V0t{async sendGetRequestAsync(e,n){let r,s={},a=0;const i=UY(n);try{r=await fetch(e,{method:OY.GET,headers:i})}catch(o){throw Ax(kt(window.navigator.onLine?Zme:W5),void 0,void 0,o)}s=HY(r.headers);try{return a=r.status,{headers:s,body:await r.json(),status:a}}catch(o){throw Ax(kt(n8),a,s,o)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",s=UY(n);let a,i=0,o={};try{a=await fetch(e,{method:OY.POST,headers:s,body:r})}catch(l){throw Ax(kt(window.navigator.onLine?Qme:W5),void 0,void 0,l)}o=HY(a.headers);try{return i=a.status,{headers:o,body:await a.json(),status:i}}catch(l){throw Ax(kt(n8),i,o,l)}}}function UY(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,s])=>{e.append(r,s)}),e}catch(e){throw Ax(kt(u0e),void 0,void 0,e)}}function HY(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw kt(d0e)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */const q0t=6e4,s8=1e4,G0t=3e4,E0e=2e3;function W0t({auth:t,cache:e,system:n,telemetry:r},s){const a={clientId:Ze.EMPTY_STRING,authority:`${Ze.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Ze.EMPTY_STRING,authorityMetadata:Ze.EMPTY_STRING,redirectUri:typeof window<"u"?kd():"",postLogoutRedirectUri:Ze.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ao.AAD,OIDCOptions:{serverResponseType:o_.FRAGMENT,defaultScopes:[Ze.OPENID_SCOPE,Ze.PROFILE_SCOPE,Ze.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:t9.None,tenant:Ze.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},i={cacheLocation:ma.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:ma.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===ma.LocalStorage),claimsBasedCachingEnabled:!1},o={loggerCallback:()=>{},logLevel:ss.Info,piiLoggingEnabled:!1},u={...{...ume,loggerOptions:o,networkClient:s?new V0t:i0t,navigationClient:new Y5,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||q0t,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||s8,navigateFrameWait:0,redirectNavigationTimeout:G0t,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||E0e,pollIntervalMilliseconds:to.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||o},d={application:{appName:Ze.EMPTY_STRING,appVersion:Ze.EMPTY_STRING},client:new cme};if((t==null?void 0:t.protocolMode)!==ao.OIDC&&(t!=null&&t.OIDCOptions)&&new jf(u.loggerOptions).warning(JSON.stringify(Or(eme))),t!=null&&t.protocolMode&&t.protocolMode===ao.OIDC&&(u!=null&&u.allowPlatformBroker))throw Or(tme);return{auth:{...a,...t,OIDCOptions:{...a.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...i,...e},system:u,telemetry:{...d,...r}}}/*! @azure/msal-browser v4.20.0 2025-08-12 */const K0t="@azure/msal-browser",b0="4.20.0";/*! @azure/msal-browser v4.20.0 2025-08-12 */const ja="msal",V9="browser",VN="-",Uh=1,a8=1,Y0t=`${ja}.${V9}.log.level`,X0t=`${ja}.${V9}.log.pii`,J0t=`${ja}.${V9}.platform.auth.dom`,VY=`${ja}.version`,qY="account.keys",GY="token.keys";function Kc(t=a8){return t<1?`${ja}.${qY}`:`${ja}.${t}.${qY}`}function Bm(t,e=Uh){return e<1?`${ja}.${GY}.${t}`:`${ja}.${e}.${GY}.${t}`}/*! @azure/msal-browser v4.20.0 2025-08-12 */class q9{static loggerCallback(e,n){switch(e){case ss.Error:console.error(n);return;case ss.Info:console.info(n);return;case ss.Verbose:console.debug(n);return;case ss.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var l;this.browserEnvironment=typeof window<"u",this.config=W0t(e,this.browserEnvironment);let n;try{n=window[ma.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(Y0t),s=(l=n==null?void 0:n.getItem(X0t))==null?void 0:l.toLowerCase(),a=s==="true"?!0:s==="false"?!1:void 0,i={...this.config.system.loggerOptions},o=r&&Object.keys(ss).includes(r)?ss[r]:void 0;o&&(i.loggerCallback=q9.loggerCallback,i.logLevel=o),a!==void 0&&(i.piiLoggingEnabled=a),this.logger=new jf(i,K0t,b0),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class w0 extends q9{getModuleName(){return w0.MODULE_NAME}getId(){return w0.ID}async initialize(){return this.available=typeof window<"u",this.available}}w0.MODULE_NAME="";w0.ID="StandardOperatingContext";/*! @azure/msal-browser v4.20.0 2025-08-12 */class Q0t{constructor(){this.dbName=r8,this.version=w0t,this.tableName=C0t,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",s=>{s.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",s=>{const a=s;this.db=a.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(kt(R9)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(kt(Xp));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);i.addEventListener("success",o=>{const l=o;this.closeConnection(),n(l.target.result)}),i.addEventListener("error",o=>{this.closeConnection(),r(o)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,s)=>{if(!this.db)return s(kt(Xp));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);o.addEventListener("success",()=>{this.closeConnection(),r()}),o.addEventListener("error",l=>{this.closeConnection(),s(l)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(kt(Xp));const i=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);i.addEventListener("success",()=>{this.closeConnection(),n()}),i.addEventListener("error",o=>{this.closeConnection(),r(o)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(kt(Xp));const a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();a.addEventListener("success",i=>{const o=i;this.closeConnection(),e(o.target.result)}),a.addEventListener("error",i=>{this.closeConnection(),n(i)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(kt(Xp));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);i.addEventListener("success",o=>{const l=o;this.closeConnection(),n(l.target.result===1)}),i.addEventListener("error",o=>{this.closeConnection(),r(o)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(r8),s=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(s),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(s),e(!0))),r.addEventListener("error",()=>(clearTimeout(s),n(!1)))})}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class w_{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Z0t{constructor(e){this.inMemoryCache=new w_,this.indexedDBCache=new Q0t,this.logger=e}handleDatabaseAccessError(e){if(e instanceof qw&&e.errorCode===R9)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class qd{constructor(e,n,r){this.logger=e,N0t(r??!1),this.cache=new Z0t(this.logger),this.performanceClient=n}createNewGuid(){return Sc()}base64Encode(e){return Rb(e)}base64Decode(e){return fc(e)}base64UrlEncode(e){return uS(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var d;const n=(d=this.performanceClient)==null?void 0:d.startMeasurement(ke.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await D0t(qd.EXTRACTABLE,qd.POP_KEY_USAGES),s=await HN(r.publicKey),a={e:s.e,kty:s.kty,n:s.n},i=WY(a),o=await this.hashString(i),l=await HN(r.privateKey),u=await R0t(l,!1,["sign"]);return await this.cache.setItem(o,{privateKey:u,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),o}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw ot(Ufe)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,s){var E;const a=(E=this.performanceClient)==null?void 0:E.startMeasurement(ke.CryptoOptsSignJwt,s),i=await this.cache.getItem(n);if(!i)throw kt(D9);const o=await HN(i.publicKey),l=WY(o),u=uS(JSON.stringify({kid:n})),d=T9.getShrHeaderString({...r==null?void 0:r.header,alg:o.alg,kid:u}),f=uS(d);e.cnf={jwk:JSON.parse(l)};const m=uS(JSON.stringify(e)),g=`${f}.${m}`,b=new TextEncoder().encode(g),C=await M0t(i.privateKey,b),S=Df(new Uint8Array(C)),w=`${g}.${S}`;return a&&a.end({success:!0}),w}async hashString(e){return x0e(e)}}qd.POP_KEY_USAGES=["sign","verify"];qd.EXTRACTABLE=!0;function WY(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.20.0 2025-08-12 */const ept=1440*60*1e3,i8={Lax:"Lax",None:"None"};class _0e{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){const a=r[s],[i,...o]=decodeURIComponent(a).trim().split("="),l=o.join("=");if(i===n)return l}return""}getUserData(){throw ot(Nn)}setItem(e,n,r,s=!0,a=i8.Lax){let i=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${a};`;if(r){const o=tpt(r);i+=`expires=${o};`}(s||a===i8.None)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(ot(Nn))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const s=decodeURIComponent(r).trim().split("=");n.push(s[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function tpt(t){const e=new Date;return new Date(e.getTime()+t*ept).toUTCString()}/*! @azure/msal-browser v4.20.0 2025-08-12 */function h1(t,e){const n=t.getItem(Kc(e));return n?JSON.parse(n):[]}function f1(t,e,n){const r=e.getItem(Bm(t,n));if(r){const s=JSON.parse(r);if(s&&s.hasOwnProperty("idToken")&&s.hasOwnProperty("accessToken")&&s.hasOwnProperty("refreshToken"))return s}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.20.0 2025-08-12 */function o8(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.20.0 2025-08-12 */const KY="msal.cache.encryption",npt="msal.broadcast.cache";class rpt{constructor(e,n,r){if(!window.localStorage)throw $9(b_);this.memoryStorage=new w_,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(npt)}async initialize(e){const n=new _0e,r=n.getItem(KY);let s={key:"",id:""};if(r)try{s=JSON.parse(r)}catch{}if(s.key&&s.id){const a=Lo(pf,ke.Base64Decode,this.logger,this.performanceClient,e)(s.key);this.encryptionCookie={id:s.id,key:await Xe(LY,ke.GenerateHKDF,this.logger,this.performanceClient,e)(a)}}else{const a=Sc(),i=await Xe(v0e,ke.GenerateBaseKey,this.logger,this.performanceClient,e)(),o=Lo(Df,ke.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(i));this.encryptionCookie={id:a,key:await Xe(LY,ke.GenerateHKDF,this.logger,this.performanceClient,e)(i)};const l={id:a,key:o};n.setItem(KY,JSON.stringify(l),0,!0,i8.None)}await Xe(this.importExistingCache.bind(this),ke.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw kt(d1);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw kt(d1);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const s=await Xe(zY,ke.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!s)return null;try{return JSON.parse(s)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,s){if(!this.initialized||!this.encryptionCookie)throw kt(d1);const{data:a,nonce:i}=await Xe(P0t,ke.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),o={id:this.encryptionCookie.id,nonce:i,data:a,lastUpdatedAt:s};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(o)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),h1(this).forEach(r=>this.removeItem(r));const n=f1(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(ja)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=h1(this);n=await this.importArray(n,e),n.length?this.setItem(Kc(),JSON.stringify(n)):this.removeItem(Kc());const r=f1(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Bm(this.clientId),JSON.stringify(r)):this.removeItem(Bm(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let s;try{s=JSON.parse(r)}catch{return null}return o8(s)?s.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):Xe(zY,ke.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,s.nonce,this.getContext(e),s.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),s)}async importArray(e,n){const r=[],s=[];return e.forEach(a=>{const i=this.getItemFromEncryptedCache(a,n).then(o=>{o?(this.memoryStorage.setItem(a,o),r.push(a)):this.removeItem(a)});s.push(i)}),await Promise.all(s),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(ke.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:s,context:a}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(a&&a!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${a}`),n.end({success:!1,errorCode:"contextMismatch"});return}s?(this.memoryStorage.setItem(r,s),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class spt{constructor(){if(!window.sessionStorage)throw $9(b_)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */const Ut={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.20.0 2025-08-12 */function YY(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.20.0 2025-08-12 */class l8 extends Z7{constructor(e,n,r,s,a,i,o){super(e,r,s,a,o),this.cacheConfig=n,this.logger=s,this.internalStorage=new w_,this.browserStorage=XY(e,n.cacheLocation,s,a),this.temporaryCacheStorage=XY(e,n.temporaryCacheLocation,s,a),this.cookieStorage=new _0e,this.eventHandler=i}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=h1(this.browserStorage,0),r=f1(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const s=h1(this.browserStorage,1),a=f1(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:s.length,currAccessCount:a.accessToken.length,currIdCount:a.idToken.length,currRefreshCount:a.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(a8,n,s,e),this.updateV0ToCurrent(Uh,r.idToken,a.idToken,e),this.updateV0ToCurrent(Uh,r.accessToken,a.accessToken,e),this.updateV0ToCurrent(Uh,r.refreshToken,a.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Kc(0),JSON.stringify(n)):this.browserStorage.removeItem(Kc(0)),s.length>0?this.browserStorage.setItem(Kc(1),JSON.stringify(s)):this.browserStorage.removeItem(Kc(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(a,e,1)}async updateV0ToCurrent(e,n,r,s){const a=[];for(const i of[...n]){const o=this.browserStorage.getItem(i),l=this.validateAndParseJson(o||"");if(!l){YY(n,i);continue}l.lastUpdatedAt||(l.lastUpdatedAt=Date.now().toString(),this.setItem(i,JSON.stringify(l),s));const u=o8(l)?await this.browserStorage.decryptData(i,l,s):l;let d;if(u&&(AY(u)||NY(u))&&(d=u.expiresOn),!u||zmt(l.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||d&&V5(d,_fe)){this.browserStorage.removeItem(i),YY(n,i),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},s);continue}if(this.cacheConfig.cacheLocation!==ma.LocalStorage||o8(l)){const f=`${ja}.${e}${VN}${i}`,m=this.browserStorage.getItem(f);if(m){const g=this.validateAndParseJson(m);if(Number(l.lastUpdatedAt)>Number(g.lastUpdatedAt)){a.push(this.setUserData(f,JSON.stringify(u),s,l.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},s)}));continue}}else{a.push(this.setUserData(f,JSON.stringify(u),s,l.lastUpdatedAt).then(()=>{r.push(f),this.performanceClient.incrementFields({upgradedCacheCount:1},s)}));continue}}}return Promise.all(a)}trackVersionChanges(e){const n=this.browserStorage.getItem(VY);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==b0&&this.setItem(VY,b0,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let s=0,a=[];const i=20;for(let o=0;o<=i;o++)try{this.browserStorage.setItem(e,n),o>0&&(o<=s?this.removeAccessTokenKeys(a.slice(0,o),r,0):(this.removeAccessTokenKeys(a.slice(0,s),r,0),this.removeAccessTokenKeys(a.slice(s,o),r)));break}catch(l){const u=Q7(l);if(u.errorCode===L5&&o<i){if(!a.length){const d=e===Bm(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,f=e===Bm(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;a=[...d,...f],s=d.length}if(a.length<=o)throw u;this.removeAccessToken(a[o],r,!1)}else throw u}}async setUserData(e,n,r,s){let a=0,i=[];const o=20;for(let l=0;l<=o;l++)try{await Xe(this.browserStorage.setUserData.bind(this.browserStorage),ke.SetUserData,this.logger,this.performanceClient)(e,n,r,s),l>0&&(l<=a?this.removeAccessTokenKeys(i.slice(0,l),r,0):(this.removeAccessTokenKeys(i.slice(0,a),r,0),this.removeAccessTokenKeys(i.slice(a,l),r)));break}catch(u){const d=Q7(u);if(d.errorCode===L5&&l<o){if(!i.length){const f=this.getTokenKeys(0).accessToken,m=this.getTokenKeys().accessToken;i=[...f,...m],a=f.length}if(i.length<=l)throw d;this.removeAccessToken(i[l],r,!1)}else throw d}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const s=this.validateAndParseJson(r);return!s||!wc.isAccountEntity(s)?null:Z7.toObject(new wc,s)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const a=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===ma.LocalStorage&&a&&this.eventHandler.emitEvent(Ut.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return h1(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Kc(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),s=r.indexOf(e);if(s>-1){if(r.splice(s,1),r.length===0){this.removeItem(Kc());return}else this.setItem(Kc(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(s=>{s.includes(e.homeAccountId)&&s.includes(e.environment)&&this.browserStorage.removeItem(s)}),this.cacheConfig.cacheLocation===ma.LocalStorage&&this.eventHandler.emitEvent(Ut.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),s=r.idToken.indexOf(e);s>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(s,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=Uh){this.logger.trace("removeAccessTokenKey called");const s=this.getTokenKeys(r);let a=0;if(e.forEach(i=>{const o=s.accessToken.indexOf(i);o>-1&&(s.accessToken.splice(o,1),a++)}),a>0){this.logger.info(`removed ${a} accessToken keys from tokenKeys map`),this.setTokenKeys(s,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),s=r.refreshToken.indexOf(e);s>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(s,1),this.setTokenKeys(r,n))}getTokenKeys(e=Uh){return f1(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=Uh){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Bm(this.clientId,r));return}else this.setItem(Bm(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const s=this.validateAndParseJson(r);return!s||!Umt(s)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),s)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const a=this.getTokenKeys();a.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),a.idToken.push(r),this.setTokenKeys(a,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const s=this.validateAndParseJson(r);return!s||!AY(s)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),s)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const a=this.getTokenKeys(),i=a.accessToken.indexOf(r);i!==-1&&a.accessToken.splice(i,1),this.logger.trace(`access token ${i===-1?"added to":"updated in"} map`),a.accessToken.push(r),this.setTokenKeys(a,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const s=this.validateAndParseJson(r);return!s||!NY(s)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),s)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const a=this.getTokenKeys();a.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),a.refreshToken.push(r),this.setTokenKeys(a,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Gmt(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=qmt(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Hmt(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&Wmt(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(cS.WRAPPER_SKU,e),this.internalStorage.setItem(cS.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(cS.WRAPPER_SKU)||Ze.EMPTY_STRING,n=this.internalStorage.getItem(cS.WRAPPER_VER)||Ze.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(vY.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const s=this.validateAndParseJson(r);return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId,tenantId:s.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(vY.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const s={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:lo().toString()};this.setItem(r,JSON.stringify(s),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Ut.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Vmt(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const a=this.cookieStorage.getItem(r);if(a)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),a}const s=this.temporaryCacheStorage.getItem(r);if(!s){if(this.cacheConfig.cacheLocation===ma.LocalStorage){const a=this.browserStorage.getItem(r);if(a)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),a}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),s}setTemporaryCache(e,n,r){const s=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(s,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(s,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(ja)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(ja)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(ke.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(s=>{const a=this.getAccessTokenCredential(s,e);a!=null&&a.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(s,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return pu.startsWith(e,ja)?e:`${ja}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===Ya.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==Cr.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${ja}.${Uh}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(VN).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${ja}.${a8}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(VN).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Ks.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Ks.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Ks.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Ks.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Ks.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Rb(JSON.stringify(e));if(this.setTemporaryCache(Ks.REQUEST_PARAMS,r,!0),n){const s=Rb(n);this.setTemporaryCache(Ks.VERIFIER,s,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Ks.REQUEST_PARAMS,!0);if(!e)throw kt(Xme);const n=this.getTemporaryCache(Ks.VERIFIER,!0);let r,s="";try{r=JSON.parse(fc(e)),n&&(s=fc(n))}catch(a){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${a}`),kt(Jme)}return[r,s]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Ks.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const n=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${ja}.${Ks.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),w0e(window),null}}setInteractionInProgress(e,n=Yh.SIGNIN){var s;const r=`${ja}.${Ks.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw kt(Ume);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&((s=this.getInteractionInProgress())==null?void 0:s.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){var o,l,u;const r=h_((o=e.account)==null?void 0:o.homeAccountId,(l=e.account)==null?void 0:l.environment,e.idToken,this.clientId,e.tenantId);let s;n.claims&&(s=await this.cryptoImpl.hashString(n.claims));const a=f_((u=e.account)==null?void 0:u.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?TY(e.expiresOn):0,e.extExpiresOn?TY(e.extExpiresOn):0,fc,void 0,e.tokenType,void 0,n.sshKid,n.claims,s),i={idToken:r,accessToken:a};return this.saveCacheRecord(i,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(s){if(s instanceof Tg&&this.performanceClient&&n)try{const a=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},n)}catch{}throw s}}}function XY(t,e,n,r){try{switch(e){case ma.LocalStorage:return new rpt(t,n,r);case ma.SessionStorage:return new spt;case ma.MemoryStorage:default:break}}catch(s){n.error(s)}return new w_}const apt=(t,e,n,r)=>{const s={cacheLocation:ma.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:ma.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new l8(t,s,P5,e,n,r)};/*! @azure/msal-browser v4.20.0 2025-08-12 */function ipt(t,e,n,r,s){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(s||{},r):[]}function opt(t,e,n,r){const s=n.getAccountInfoFilteredBy(t,r);return s?(e.verbose("getAccount: Account matching provided filter found, returning"),s):(e.verbose("getAccount: No matching account found, returning null"),null)}function lpt(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const s=n.getAccountInfoFilteredBy({username:t},r);return s?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),s):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function cpt(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const s=n.getAccountInfoFilteredBy({homeAccountId:t},r);return s?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),s):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function upt(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const s=n.getAccountInfoFilteredBy({localAccountId:t},r);return s?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),s):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function dpt(t,e,n){e.setActiveAccount(t,n)}function hpt(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.20.0 2025-08-12 */const fpt="msal.broadcast.event";class mpt{constructor(e){this.eventCallbacks=new Map,this.logger=e||new jf({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(fpt)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const s=r||H0t();return this.eventCallbacks.has(s)?(this.logger.error(`Event callback with id: ${s} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(s,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${s}`),s)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,s){var i;const a={eventType:e,interactionType:n||null,payload:r||null,error:s||null,timestamp:Date.now()};switch(e){case Ut.ACCOUNT_ADDED:case Ut.ACCOUNT_REMOVED:case Ut.ACTIVE_ACCOUNT_CHANGED:(i=this.broadcastChannel)==null||i.postMessage(a);break;default:this.invokeCallbacks(a);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],s)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${s}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class T0e{constructor(e,n,r,s,a,i,o,l,u){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=a,this.navigationClient=i,this.platformAuthProvider=l,this.correlationId=u||Sc(),this.logger=s.clone(to.MSAL_SKU,b0,this.correlationId),this.performanceClient=o}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return Zn.getAbsoluteUrl(n,kd())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new jb(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(ke.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const s={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.requestAuthority||this.config.auth.authority,i=r!=null&&r.length?r==="true":this.config.auth.instanceAware,o=n&&i?this.config.auth.authority.replace(Zn.getDomainFromUrl(a),n.environment):a,l=ai.generateAuthority(o,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await Xe(Tme,ke.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(l,this.config.system.networkClient,this.browserStorage,s,this.logger,this.correlationId,this.performanceClient);if(n&&!u.isAlias(n.environment))throw Or(nme);return u}}/*! @azure/msal-browser v4.20.0 2025-08-12 */async function G9(t,e,n,r){n.addQueueMeasurement(ke.InitializeBaseRequest,t.correlationId);const s=t.authority||e.auth.authority,a=[...t&&t.scopes||[]],i={...t,correlationId:t.correlationId,authority:s,scopes:a};if(!i.authenticationScheme)i.authenticationScheme=Cr.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(i.authenticationScheme===Cr.SSH){if(!t.sshJwk)throw Or(l_);if(!t.sshKid)throw Or(Zfe)}r.verbose(`Authentication Scheme set to "${i.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!pu.isEmptyObj(t.claims)&&(i.requestedClaimsHash=await x0e(t.claims)),i}async function ppt(t,e,n,r,s){r.addQueueMeasurement(ke.InitializeSilentRequest,t.correlationId);const a=await Xe(G9,ke.InitializeBaseRequest,s,r,t.correlationId)(t,n,r,s);return{...t,...a,account:e,forceRefresh:t.forceRefresh||!1}}function A0e(t,e){let n;const r=t.httpMethod;if(e===ao.EAR){if(n=r||Fm.POST,n!==Fm.POST)throw Or(rme)}else n=r||Fm.GET;if(t.authorizePostBodyParameters&&n!==Fm.POST)throw Or(sme);return n}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Jv extends T0e{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||Sc(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=Zn.getAbsoluteUrl(e.postLogoutRedirectUri,kd())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=Zn.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,kd())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=Zn.getAbsoluteUrl(kd(),kd())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(ke.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await Xe(this.getClientConfiguration.bind(this),ke.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Rme(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:a,account:i}=e;this.performanceClient.addQueueMeasurement(ke.StandardInteractionClientGetClientConfiguration,this.correlationId);const o=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:a,account:i}),l=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:o,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:to.MSAL_SKU,version:b0,cpu:Ze.EMPTY_STRING,os:Ze.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(ke.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),s={interactionType:n},a=Yv.setRequestState(this.browserCrypto,e&&e.state||Ze.EMPTY_STRING,s),o={...await Xe(G9,ke.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:a,nonce:e.nonce||Sc(),responseMode:this.config.auth.OIDCOptions.serverResponseType},l={...o,httpMethod:A0e(o,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return l;const u=e.account||this.browserStorage.getActiveAccount(this.correlationId);return u&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${u.homeAccountId}`,this.correlationId),l.account=u),l}}/*! @azure/msal-browser v4.20.0 2025-08-12 */function gpt(t,e){if(!e)return null;try{return Yv.parseRequestState(t,e).libraryState.meta}catch{throw ot(cv)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */function m1(t,e,n){const r=F5(t);if(!r)throw ime(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),kt(Lme)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),kt(Bme));return r}function vpt(t,e,n){if(!t.state)throw kt(j9);const r=gpt(e,t.state);if(!r)throw kt(zme);if(r.interactionType!==n)throw kt($me)}/*! @azure/msal-browser v4.20.0 2025-08-12 */class N0e{constructor(e,n,r,s,a){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=s,this.performanceClient=a}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(ke.HandleCodeResponse,n.correlationId);let r;try{r=l0t(e,n.state)}catch(s){throw s instanceof P0&&s.subError===Db?kt(Db):s}return Xe(this.handleCodeResponseFromServer.bind(this),ke.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(ke.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Xe(this.authModule.updateAuthority.bind(this.authModule),ke.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const a=this.createCcsCredentials(n);a&&(this.authCodeRequest.ccsCredential=a)}return await Xe(this.authModule.acquireToken.bind(this.authModule),ke.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:ac.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:ac.UPN}:null}}/*! @azure/msal-browser v4.20.0 2025-08-12 */const ypt="ContentError",j0e="user_switch";/*! @azure/msal-browser v4.20.0 2025-08-12 */const xpt="USER_INTERACTION_REQUIRED",bpt="USER_CANCEL",wpt="NO_NETWORK",Cpt="PERSISTENT_ERROR",Spt="DISABLED",kpt="ACCOUNT_UNAVAILABLE",Ept="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.20.0 2025-08-12 */const _pt=-2147186943,Tpt={[j0e]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class eu extends Dr{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,eu.prototype),this.name="NativeAuthError",this.ext=r}}function Jp(t){if(t.ext&&t.ext.status&&(t.ext.status===Cpt||t.ext.status===Spt)||t.ext&&t.ext.error&&t.ext.error===_pt)return!0;switch(t.errorCode){case ypt:return!0;default:return!1}}function X5(t,e,n){if(n&&n.status)switch(n.status){case kpt:return G5(Nme);case xpt:return new Cc(t,e);case bpt:return kt(Db);case wpt:return kt(W5);case Ept:return G5(S9)}return new eu(t,Tpt[t]||e,n)}/*! @azure/msal-browser v4.20.0 2025-08-12 */class D0e extends Jv{async acquireToken(e){this.performanceClient.addQueueMeasurement(ke.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(jr.acquireTokenSilent_silentFlow),r=await Xe(this.getClientConfiguration.bind(this),ke.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),s=new a0t(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const i=(await Xe(s.acquireCachedToken.bind(s),ke.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),i}catch(a){throw a instanceof qw&&a.errorCode===D9&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),a}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n==null?void 0:n.account)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class e4 extends T0e{constructor(e,n,r,s,a,i,o,l,u,d,f,m){super(e,n,r,s,a,i,l,u,m),this.apiId=o,this.accountId=d,this.platformAuthProvider=u,this.nativeStorageManager=f,this.silentCacheClient=new D0e(e,this.nativeStorageManager,r,s,a,i,l,u,m);const g=this.platformAuthProvider.getExtensionName();this.skus=jb.makeExtraSkuString({libraryName:to.MSAL_SKU,libraryVersion:b0,extensionName:g,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[bmt]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(ke.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(ke.NativeInteractionClientAcquireToken,e.correlationId),s=lo(),a=this.initializeServerTelemetryManager(this.apiId);try{const i=await this.initializeNativeRequest(e);try{const l=await this.acquireTokensFromCache(this.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch(l){if(n===ki.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),l;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const o=await this.platformAuthProvider.sendMessage(i);return await this.handleNativeResponse(o,i,s).then(l=>(r.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),a.clearNativeBrokerErrorCode(),l)).catch(l=>{throw r.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError,isNativeBroker:!0}),l})}catch(i){throw i instanceof eu&&a.setNativeBrokerErrorCode(i.errorCode),i}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:fa.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ot(X7);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw ot(X7);try{const s=this.createSilentCacheRequest(n,r),a=await this.silentCacheClient.acquireToken(s),i={...r,idTokenClaims:a==null?void 0:a.idTokenClaims,idToken:a==null?void 0:a.idToken};return{...a,account:i}}catch(s){throw s}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const s=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(s)}catch(o){if(o instanceof eu&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(o.errorCode),Jp(o)))throw o}this.browserStorage.setTemporaryCache(Ks.NATIVE_REQUEST,JSON.stringify(s),!0);const a={apiId:jr.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(i,a)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:s,...a}=r;s&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ks.NATIVE_REQUEST));const i=lo();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const o=await this.platformAuthProvider.sendMessage(a),l=await this.handleNativeResponse(o,a,i);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),l}catch(o){throw o}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var d,f;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const s=Kv(e.id_token,fc),a=this.createHomeAccountIdentifier(e,s),i=(d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId))==null?void 0:d.homeAccountId;if((f=n.extraParameters)!=null&&f.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(a!==i&&e.account.id!==n.accountId)throw X5(j0e);const o=await this.getDiscoveredAuthority({requestAuthority:n.authority}),l=k9(this.browserStorage,o,a,fc,this.correlationId,s,e.client_info,void 0,s.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const u=await this.generateAuthenticationResult(e,n,s,l,o.canonicalAuthority,r);return await this.cacheAccount(l,this.correlationId),await this.cacheNativeTokens(e,n,a,s,e.access_token,u.tenantId,r),u}createHomeAccountIdentifier(e,n){return wc.generateHomeAccountId(e.client_info||Ze.EMPTY_STRING,Gl.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?fa.fromString(n):fa.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===Cr.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new uv(this.browserCrypto),s={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw ot(QO);return r.signPopToken(e.access_token,n.keyId,s)}else return e.access_token}async generateAuthenticationResult(e,n,r,s,a,i){const o=this.addTelemetryFromNativeResponse(e.properties.MATS),l=this.generateScopes(n.scope,e.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||Ze.EMPTY_STRING,f=u.TenantId||r.tid||Ze.EMPTY_STRING,m=o9(s.getAccountInfo(),void 0,r,e.id_token);m.nativeAccountId!==e.account.id&&(m.nativeAccountId=e.account.id);const g=await this.generatePopAccessToken(e,n),x=n.tokenType===Cr.POP?Cr.POP:Cr.BEARER;return{authority:a,uniqueId:d,tenantId:f,scopes:l.asArray(),account:m,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:o?this.isResponseFromCache(o):!1,expiresOn:Ng(i+e.expires_in),tokenType:x,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,s,a,i,o){const l=h_(r,n.authority,e.id_token||"",n.clientId,s.tid||""),u=n.tokenType===Cr.POP?Ze.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,d=o+u,f=this.generateScopes(e.scope,n.scope),m=f_(r,n.authority,a,n.clientId,s.tid||i,f.printScopes(),d,0,fc,void 0,n.tokenType,void 0,n.keyId),g={idToken:l,accessToken:m};return this.nativeStorageManager.saveCacheRecord(g,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===Cr.POP?Ze.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...s}=e,a=new fa(r||[]);a.appendScopes(Vw);const i={...s,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:a.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(i.signPopToken&&e.popKid)throw kt(c0e);if(this.handleExtraBrokerParams(i),i.extraParameters=i.extraParameters||{},i.extraParameters.telemetry=yl.MATS_TELEMETRY,e.authenticationScheme===Cr.POP){const o={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new uv(this.browserCrypto);let u;if(i.keyId)u=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:i.keyId})),i.signPopToken=!1;else{const d=await Xe(l.generateCnf.bind(l),ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(o,this.logger);u=d.reqCnfString,i.keyId=d.kid,i.signPopToken=!0}i.reqCnf=u}return this.addRequestSKUs(i),i}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Zn(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case jr.ssoSilent:case jr.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Ni.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Ni.NONE:case Ni.CONSENT:case Ni.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),kt(o0e)}}handleExtraBrokerParams(e){var a;const n=e.extraParameters&&e.extraParameters.hasOwnProperty($5)&&e.extraParameters.hasOwnProperty(U5)&&e.extraParameters.hasOwnProperty(y0);if(!e.embeddedClientId&&!n)return;let r="";const s=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[U5],r=e.extraParameters[y0]),e.extraParameters={child_client_id:r,child_redirect_uri:s},(a=this.performanceClient)==null||a.addFields({embeddedClientId:r,embeddedRedirectUri:s},e.correlationId)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */async function W9(t,e,n,r,s){const a=o0t({...t.auth,authority:e},n,r,s);if(g9(a,{sku:to.MSAL_SKU,version:b0,os:"",cpu:""}),t.auth.protocolMode!==ao.OIDC&&v9(a,t.telemetry.application),n.platformBroker&&(kmt(a),n.authenticationScheme===Cr.POP)){const i=new qd(r,s),o=new uv(i);let l;n.popKid?l=i.encodeKid(n.popKid):l=(await Xe(o.generateCnf.bind(o),ke.PopTokenGenerateCnf,r,s,n.correlationId)(n,r)).reqCnfString,x9(a,l)}return c_(a,n.correlationId,s),a}async function K9(t,e,n,r,s){if(!n.codeChallenge)throw Or(r9);const a=await Xe(W9,ke.GetStandardParams,r,s,n.correlationId)(t,e,n,r,s);return u9(a,qO.CODE),gme(a,n.codeChallenge,Ze.S256_CODE_CHALLENGE_METHOD),mf(a,n.extraQueryParameters||{}),E9(e,a,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function Y9(t,e,n,r,s,a){if(!r.earJwk)throw kt(N9);const i=await W9(e,n,r,s,a);u9(i,qO.IDTOKEN_TOKEN_REFRESHTOKEN),Omt(i,r.earJwk);const o=new Map;mf(o,r.extraQueryParameters||{});const l=E9(n,o,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return R0e(t,l,i)}async function X9(t,e,n,r,s,a){const i=await W9(e,n,r,s,a);u9(i,qO.CODE),gme(i,r.codeChallenge,r.codeChallengeMethod||Ze.S256_CODE_CHALLENGE_METHOD),Pmt(i,r.authorizePostBodyParameters||{});const o=new Map;mf(o,r.extraQueryParameters||{});const l=E9(n,o,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return R0e(t,l,i)}function R0e(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((s,a)=>{const i=t.createElement("input");i.hidden=!0,i.name=a,i.value=s,r.appendChild(i)}),t.body.appendChild(r),r}async function M0e(t,e,n,r,s,a,i,o,l,u){if(o.verbose("Account id found, calling WAM for token"),!u)throw kt(M9);const d=new qd(o,l),f=new e4(r,s,d,o,i,r.system.navigationClient,n,l,u,e,a,t.correlationId),{userRequestState:m}=Yv.parseRequestState(d,t.state);return Xe(f.acquireToken.bind(f),ke.NativeInteractionClientAcquireToken,o,l,t.correlationId)({...t,state:m,prompt:void 0})}async function J5(t,e,n,r,s,a,i,o,l,u,d,f){if(Zc.removeThrottle(i,s.auth.clientId,t),e.accountId)return Xe(M0e,ke.HandleResponsePlatformBroker,u,d,t.correlationId)(t,e.accountId,r,s,i,o,l,u,d,f);const m={...t,code:e.code||"",codeVerifier:n},g=new N0e(a,i,m,u,d);return await Xe(g.handleCodeResponse.bind(g),ke.HandleCodeResponse,u,d,t.correlationId)(e,t)}async function J9(t,e,n,r,s,a,i,o,l,u,d){if(Zc.removeThrottle(a,r.auth.clientId,t),Mme(e,t.state),!e.ear_jwe)throw kt(Fme);if(!t.earJwk)throw kt(N9);const f=JSON.parse(await Xe(O0t,ke.DecryptEarResponse,l,u,t.correlationId)(t.earJwk,e.ear_jwe));if(f.accountId)return Xe(M0e,ke.HandleResponsePlatformBroker,l,u,t.correlationId)(t,f.accountId,n,r,a,i,o,l,u,d);const m=new x0(r.auth.clientId,a,new qd(l,u),l,null,null,u);m.validateTokenResponse(f);const g={code:"",state:t.state,nonce:t.nonce,client_info:f.client_info,cloud_graph_host_name:f.cloud_graph_host_name,cloud_instance_host_name:f.cloud_instance_host_name,cloud_instance_name:f.cloud_instance_name,msgraph_host:f.msgraph_host};return await Xe(m.handleServerTokenResponse.bind(m),ke.HandleServerTokenResponse,l,u,t.correlationId)(f,s,lo(),t,g,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.20.0 2025-08-12 */const Apt=32;async function C_(t,e,n){t.addQueueMeasurement(ke.GeneratePkceCodes,n);const r=Lo(Npt,ke.GenerateCodeVerifier,e,t,n)(t,e,n),s=await Xe(jpt,ke.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:s}}function Npt(t,e,n){try{const r=new Uint8Array(Apt);return Lo(j0t,ke.GetRandomValues,e,t,n)(r),Df(r)}catch{throw kt(A9)}}async function jpt(t,e,n,r){e.addQueueMeasurement(ke.GenerateCodeChallengeFromVerifier,r);try{const s=await Xe(g0e,ke.Sha256Digest,n,e,r)(t,e,r);return Df(new Uint8Array(s))}catch{throw kt(A9)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Q5{constructor(e,n,r,s){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=s,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(ke.NativeMessageHandlerHandshake),this.platformAuthType=yl.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:dx.GetToken,request:e},r={channel:yl.CHANNEL_ID,extensionId:this.extensionId,responseId:Sc(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const s=await new Promise((i,o)=>{this.resolvers.set(r.responseId,{resolve:i,reject:o})});return this.validatePlatformBrokerResponse(s)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const s=new Q5(e,n,r,yl.PREFERRED_EXTENSION_ID);return await s.sendHandshakeRequest(),s}catch{const a=new Q5(e,n,r);return await a.sendHandshakeRequest(),a}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:yl.CHANNEL_ID,extensionId:this.extensionId,responseId:Sc(),body:{method:dx.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(kt(a0e)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==yl.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===dx.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(kt(i0e))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),s=this.handshakeResolvers.get(n.responseId);try{const a=n.body.method;if(a===dx.Response){if(!r)return;const i=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(i)}`),i.status!=="Success")r.reject(X5(i.code,i.description,i.ext));else if(i.result)i.result.code&&i.result.description?r.reject(X5(i.result.code,i.result.description,i.result.ext)):r.resolve(i.result);else throw W7(O5,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(a===dx.HandshakeResponse){if(!s){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),s.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(a){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${a}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(a):s&&s.reject(a)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw W7(O5,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===yl.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Q9{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=yl.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){var s;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(s=window.navigator)!=null&&s.platformAuthentication){const a=await window.navigator.platformAuthentication.getSupportedContracts(yl.MICROSOFT_ENTRA_BROKERID);if(a!=null&&a.includes(yl.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new Q9(e,n,r)}}getExtensionId(){return yl.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return yl.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:s,scope:a,redirectUri:i,correlationId:o,state:l,storeInCache:u,embeddedClientId:d,extraParameters:f,...m}=e,g=this.getDOMExtraParams(m);return{accountId:n,brokerId:this.getExtensionId(),authority:s,clientId:r,correlationId:o||this.correlationId,extraParameters:{...f,...g},isSecurityTokenService:!1,redirectUri:i,scope:a,state:l,storeInCache:u,embeddedClientId:d}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),X5(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw W7(O5,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((s,[a,i])=>(s[a]=String(i),s),{})}}}/*! @azure/msal-browser v4.20.0 2025-08-12 */async function Dpt(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const s=Rpt();t.trace("Has client allowed platform auth via DOM API: "+s);let a;try{s&&(a=await Q9.createProvider(t,e,n)),a||(t.trace("Platform auth via DOM API not available, checking for extension"),a=await Q5.createProvider(t,r||E0e,e))}catch(i){t.trace("Platform auth not available",i)}return a}function Rpt(){let t;try{return t=window[ma.SessionStorage],(t==null?void 0:t.getItem(J0t))==="true"}catch{return!1}}function Mb(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Cr.BEARER:case Cr.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Mpt extends Jv{constructor(e,n,r,s,a,i,o,l,u,d){super(e,n,r,s,a,i,o,u,d),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=l,this.eventHandler=a}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Vw,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const a={...e,httpMethod:A0e(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(a,r,n)}}catch(s){return Promise.reject(s)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},s=e&&e.authority,a=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,s,a)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,s,a))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const s=await Xe(this.initializeAuthorizationRequest.bind(this),ke.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Yt.Popup);n.popup&&k0e(s.authority);const a=Mb(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return s.platformBroker=a,this.config.auth.protocolMode===ao.EAR?this.executeEarFlow(s,n):this.executeCodeFlow(s,n,r)}async executeCodeFlow(e,n,r){var l;const s=e.correlationId,a=this.initializeServerTelemetryManager(jr.acquireTokenPopup),i=r||await Xe(C_,ke.GeneratePkceCodes,this.logger,this.performanceClient,s)(this.performanceClient,this.logger,s),o={...e,codeChallenge:i.challenge};try{const u=await Xe(this.createAuthCodeClient.bind(this),ke.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,s)({serverTelemetryManager:a,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account});if(o.httpMethod===Fm.POST)return await this.executeCodeFlowWithPost(o,n,u,i.verifier);{const d=await Xe(K9,ke.GetAuthCodeUrl,this.logger,this.performanceClient,s)(this.config,u.authority,o,this.logger,this.performanceClient),f=this.initiateAuthRequest(d,n);this.eventHandler.emitEvent(Ut.POPUP_OPENED,Yt.Popup,{popupWindow:f},null);const m=await this.monitorPopupForHash(f,n.popupWindowParent),g=Lo(m1,ke.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(m,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Xe(J5,ke.HandleResponseCode,this.logger,this.performanceClient,s)(e,g,i.verifier,jr.acquireTokenPopup,this.config,u,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(u){throw(l=n.popup)==null||l.close(),u instanceof Dr&&(u.setCorrelationId(this.correlationId),a.cacheFailedRequest(u)),u}}async executeEarFlow(e,n){const r=e.correlationId,s=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await Xe(B9,ke.GenerateEarKey,this.logger,this.performanceClient,r)(),i={...e,earJwk:a},o=n.popup||this.openPopup("about:blank",n);(await Y9(o.document,this.config,s,i,this.logger,this.performanceClient)).submit();const u=await Xe(this.monitorPopupForHash.bind(this),ke.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(o,n.popupWindowParent),d=Lo(m1,ke.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Xe(J9,ke.HandleResponseEar,this.logger,this.performanceClient,r)(i,d,jr.acquireTokenPopup,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,s){const a=e.correlationId,i=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=n.popup||this.openPopup("about:blank",n);(await X9(o.document,this.config,i,e,this.logger,this.performanceClient)).submit();const u=await Xe(this.monitorPopupForHash.bind(this),ke.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(o,n.popupWindowParent),d=Lo(m1,ke.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Xe(J5,ke.HandleResponseCode,this.logger,this.performanceClient,a)(e,d,s,jr.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,s){var i,o,l;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Ut.LOGOUT_START,Yt.Popup,e);const a=this.initializeServerTelemetryManager(jr.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const u=await Xe(this.createAuthCodeClient.bind(this),ke.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:r,account:e.account||void 0});try{u.authority.endSessionEndpoint}catch{if((i=e.account)!=null&&i.homeAccountId&&e.postLogoutRedirectUri&&u.authority.protocolMode===ao.OIDC){if(this.eventHandler.emitEvent(Ut.LOGOUT_SUCCESS,Yt.Popup,e),s){const m={apiId:jr.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},g=Zn.getAbsoluteUrl(s,kd());await this.navigationClient.navigateInternal(g,m)}(o=n.popup)==null||o.close();return}}const d=u.getLogoutUri(e);this.eventHandler.emitEvent(Ut.LOGOUT_SUCCESS,Yt.Popup,e);const f=this.openPopup(d,n);if(this.eventHandler.emitEvent(Ut.POPUP_OPENED,Yt.Popup,{popupWindow:f},null),await this.monitorPopupForHash(f,n.popupWindowParent).catch(()=>{}),s){const m={apiId:jr.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},g=Zn.getAbsoluteUrl(s,kd());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${g}`),await this.navigationClient.navigateInternal(g,m)}else this.logger.verbose("No main window navigation requested")}catch(u){throw(l=n.popup)==null||l.close(),u instanceof Dr&&(u.setCorrelationId(this.correlationId),a.cacheFailedRequest(u)),this.eventHandler.emitEvent(Ut.LOGOUT_FAILURE,Yt.Popup,null,u),this.eventHandler.emitEvent(Ut.LOGOUT_END,Yt.Popup),u}this.eventHandler.emitEvent(Ut.LOGOUT_END,Yt.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),kt(v_)}monitorPopupForHash(e,n){return new Promise((r,s)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const a=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(a),s(kt(Db));return}let i="";try{i=e.location.href}catch{}if(!i||i==="about:blank")return;clearInterval(a);let o="";const l=this.config.auth.OIDCOptions.serverResponseType;e&&(l===o_.QUERY?o=e.location.search:o=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(o)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw kt(Vme);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),kt(Hme)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:s}){var g,x,b,C;const a=s.screenLeft?s.screenLeft:s.screenX,i=s.screenTop?s.screenTop:s.screenY,o=s.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=s.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=(g=r.popupSize)==null?void 0:g.width,d=(x=r.popupSize)==null?void 0:x.height,f=(b=r.popupPosition)==null?void 0:b.top,m=(C=r.popupPosition)==null?void 0:C.left;return(!u||u<0||u>o)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=to.POPUP_WIDTH),(!d||d<0||d>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=to.POPUP_HEIGHT),(!f||f<0||f>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,l/2-to.POPUP_HEIGHT/2+i)),(!m||m<0||m>o)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,o/2-to.POPUP_WIDTH/2+a)),s.open(e,n,`width=${u}, height=${d}, top=${f}, left=${m}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${to.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${to.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.20.0 2025-08-12 */function Ipt(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class Opt extends Jv{constructor(e,n,r,s,a,i,o,l,u,d){super(e,n,r,s,a,i,o,u,d),this.nativeStorage=l}async acquireToken(e){const n=await Xe(this.initializeAuthorizationRequest.bind(this),ke.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Yt.Redirect);n.platformBroker=Mb(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=a=>{a.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Ut.RESTORE_FROM_BFCACHE,Yt.Redirect))},s=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${s}`),this.browserStorage.setTemporaryCache(Ks.ORIGIN_URI,s,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ao.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(a){throw a instanceof Dr&&a.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),a}}async executeCodeFlow(e,n){const r=e.correlationId,s=this.initializeServerTelemetryManager(jr.acquireTokenRedirect),a=await Xe(C_,ke.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i={...e,codeChallenge:a.challenge};this.browserStorage.cacheAuthorizeRequest(i,a.verifier);try{if(i.httpMethod===Fm.POST)return await this.executeCodeFlowWithPost(i);{const o=await Xe(this.createAuthCodeClient.bind(this),ke.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),l=await Xe(K9,ke.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,o.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(l,n)}}catch(o){throw o instanceof Dr&&(o.setCorrelationId(this.correlationId),s.cacheFailedRequest(o)),o}}async executeEarFlow(e){const n=e.correlationId,r=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await Xe(B9,ke.GenerateEarKey,this.logger,this.performanceClient,n)(),a={...e,earJwk:s};return this.browserStorage.cacheAuthorizeRequest(a),(await Y9(document,this.config,r,a,this.logger,this.performanceClient)).submit(),new Promise((o,l)=>{setTimeout(()=>{l(kt(K5,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await X9(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((a,i)=>{setTimeout(()=>{i(kt(K5,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,s){const a=this.initializeServerTelemetryManager(jr.handleRedirectPromise);try{const[i,o]=this.getRedirectResponse(e||"");if(!i)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Ipt()!=="back_forward"?s.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const l=this.browserStorage.getTemporaryCache(Ks.ORIGIN_URI,!0)||Ze.EMPTY_STRING,u=Zn.removeHashFromUrl(l),d=Zn.removeHashFromUrl(window.location.href);if(u===d&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),l.indexOf("#")>-1&&F0t(l),await this.handleResponse(i,n,r,a);if(this.config.auth.navigateToLoginRequestUrl){if(!U9()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Ks.URL_HASH,o,!0);const f={apiId:jr.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let m=!0;if(!l||l==="null"){const g=L0t();this.browserStorage.setTemporaryCache(Ks.ORIGIN_URI,g,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),m=await this.navigationClient.navigateInternal(g,f)}else this.logger.verbose(`Navigating to loginRequestUrl: ${l}`),m=await this.navigationClient.navigateInternal(l,f);if(!m)return await this.handleResponse(i,n,r,a)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(i,n,r,a);return null}catch(i){throw i instanceof Dr&&(i.setCorrelationId(this.correlationId),a.cacheFailedRequest(i)),i}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===o_.QUERY?n=window.location.search:n=window.location.hash);let r=F5(n);if(r){try{vpt(r,this.browserCrypto,Yt.Redirect)}catch(a){return a instanceof Dr&&this.logger.error(`Interaction type validation failed due to ${a.errorCode}: ${a.errorMessage}`),[null,""]}return w0e(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const s=this.browserStorage.getTemporaryCache(Ks.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ks.URL_HASH)),s&&(r=F5(s),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,s]):[null,""]}async handleResponse(e,n,r,s){if(!e.state)throw kt(j9);if(e.ear_jwe){const o=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return Xe(J9,ke.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,jr.acquireTokenRedirect,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const i=await Xe(this.createAuthCodeClient.bind(this),ke.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:n.authority});return Xe(J5,ke.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,jr.acquireTokenRedirect,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:jr.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=n||this.config.auth.onRedirectNavigate;if(typeof s=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),s(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),kt(v_)}async logout(e){var s;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(jr.logout);try{this.eventHandler.emitEvent(Ut.LOGOUT_START,Yt.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const a={apiId:jr.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=await Xe(this.createAuthCodeClient.bind(this),ke.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===ao.OIDC)try{i.authority.endSessionEndpoint}catch{if((s=n.account)!=null&&s.homeAccountId){this.eventHandler.emitEvent(Ut.LOGOUT_SUCCESS,Yt.Redirect,n);return}}const o=i.getLogoutUri(n);if(this.eventHandler.emitEvent(Ut.LOGOUT_SUCCESS,Yt.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(o)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Yh.SIGNOUT),await this.navigationClient.navigateExternal(o,a);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Yh.SIGNOUT),await this.navigationClient.navigateExternal(o,a);return}}catch(a){throw a instanceof Dr&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),this.eventHandler.emitEvent(Ut.LOGOUT_FAILURE,Yt.Redirect,null,a),this.eventHandler.emitEvent(Ut.LOGOUT_END,Yt.Redirect),a}this.eventHandler.emitEvent(Ut.LOGOUT_END,Yt.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return Zn.getAbsoluteUrl(n,kd())}}/*! @azure/msal-browser v4.20.0 2025-08-12 */async function Ppt(t,e,n,r,s){if(e.addQueueMeasurement(ke.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),kt(v_);return s?Xe(Lpt,ke.SilentHandlerLoadFrame,n,e,r)(t,s,e,r):Lo(zpt,ke.SilentHandlerLoadFrameSync,n,e,r)(t)}async function Fpt(t,e,n,r,s){const a=S_();if(!a.contentDocument)throw"No document associated with iframe!";return(await X9(a.contentDocument,t,e,n,r,s)).submit(),a}async function Bpt(t,e,n,r,s){const a=S_();if(!a.contentDocument)throw"No document associated with iframe!";return(await Y9(a.contentDocument,t,e,n,r,s)).submit(),a}async function JY(t,e,n,r,s,a,i){return r.addQueueMeasurement(ke.SilentHandlerMonitorIframeForHash,a),new Promise((o,l)=>{e<s8&&s.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${s8}ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(d),l(kt(qme))},e),d=window.setInterval(()=>{let f="";const m=t.contentWindow;try{f=m?m.location.href:""}catch{}if(!f||f==="about:blank")return;let g="";m&&(i===o_.QUERY?g=m.location.search:g=m.location.hash),window.clearTimeout(u),window.clearInterval(d),o(g)},n)}).finally(()=>{Lo($pt,ke.RemoveHiddenIframe,s,r,a)(t)})}function Lpt(t,e,n,r){return n.addQueueMeasurement(ke.SilentHandlerLoadFrame,r),new Promise((s,a)=>{const i=S_();window.setTimeout(()=>{if(!i){a("Unable to load iframe");return}i.src=t,s(i)},e)})}function zpt(t){const e=S_();return e.src=t,e}function S_(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function $pt(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Upt extends Jv{constructor(e,n,r,s,a,i,o,l,u,d,f){super(e,n,r,s,a,i,l,d,f),this.apiId=o,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(ke.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==Ni.NONE&&n.prompt!==Ni.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${Ni.NONE}`),n.prompt=Ni.NONE):n.prompt=Ni.NONE;const r=await Xe(this.initializeAuthorizationRequest.bind(this),ke.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Yt.Silent);return r.platformBroker=Mb(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),k0e(r.authority),this.config.auth.protocolMode===ao.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await Xe(this.createAuthCodeClient.bind(this),ke.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await Xe(this.silentTokenHelper.bind(this),ke.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(s){if(s instanceof Dr&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),!n||!(s instanceof Dr)||s.errorCode!==to.INVALID_GRANT_ERROR)throw s;return this.performanceClient.addFields({retryError:s.errorCode},this.correlationId),await Xe(this.silentTokenHelper.bind(this),ke.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await Xe(this.getDiscoveredAuthority.bind(this),ke.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await Xe(B9,ke.GenerateEarKey,this.logger,this.performanceClient,n)(),a={...e,earJwk:s},i=await Xe(Bpt,ke.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,a,this.logger,this.performanceClient),o=this.config.auth.OIDCOptions.serverResponseType,l=await Xe(JY,ke.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,o),u=Lo(m1,ke.DeserializeResponse,this.logger,this.performanceClient,n)(l,o,this.logger);return Xe(J9,ke.HandleResponseEar,this.logger,this.performanceClient,n)(a,u,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(kt(y_))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(ke.SilentIframeClientTokenHelper,r);const s=await Xe(C_,ke.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),a={...n,codeChallenge:s.challenge};let i;if(n.httpMethod===Fm.POST)i=await Xe(Fpt,ke.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,a,this.logger,this.performanceClient);else{const d=await Xe(K9,ke.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,a,this.logger,this.performanceClient);i=await Xe(Ppt,ke.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(d,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const o=this.config.auth.OIDCOptions.serverResponseType,l=await Xe(JY,ke.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,o),u=Lo(m1,ke.DeserializeResponse,this.logger,this.performanceClient,r)(l,o,this.logger);return Xe(J5,ke.HandleResponseCode,this.logger,this.performanceClient,r)(n,u,s.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Hpt extends Jv{async acquireToken(e){this.performanceClient.addQueueMeasurement(ke.SilentRefreshClientAcquireToken,e.correlationId);const n=await Xe(G9,ke.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const s=this.initializeServerTelemetryManager(jr.acquireTokenSilent_silentFlow),a=await this.createRefreshTokenClient({serverTelemetryManager:s,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Xe(a.acquireTokenByRefreshToken.bind(a),ke.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(i=>{throw i.setCorrelationId(this.correlationId),s.cacheFailedRequest(i),i})}logout(){return Promise.reject(kt(y_))}async createRefreshTokenClient(e){const n=await Xe(this.getClientConfiguration.bind(this),ke.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new s0t(n,this.performanceClient)}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Vpt{constructor(e,n,r,s){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=s}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw kt(x_);const s=e.correlationId||Sc(),a=n.id_token?Kv(n.id_token,fc):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.authority?new ai(ai.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||Sc()):void 0,l=await this.loadAccount(e,r.clientInfo||n.client_info||"",s,a,o),u=await this.loadIdToken(n,l.homeAccountId,l.environment,l.realm,s),d=await this.loadAccessToken(e,n,l.homeAccountId,l.environment,l.realm,r,s),f=await this.loadRefreshToken(n,l.homeAccountId,l.environment,s);return this.generateAuthenticationResult(e,{account:l,idToken:u,accessToken:d,refreshToken:f},a,o)}async loadAccount(e,n,r,s,a){if(this.logger.verbose("TokenCache - loading account"),e.account){const u=wc.createFromAccountInfo(e.account);return await this.storage.setAccount(u,r),u}else if(!a||!n&&!s)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),kt(e0e);const i=wc.generateHomeAccountId(n,a.authorityType,this.logger,this.cryptoObj,s),o=s==null?void 0:s.tid,l=k9(this.storage,a,i,fc,r,s,n,a.hostnameAndPort,o,void 0,void 0,this.logger);return await this.storage.setAccount(l,r),l}async loadIdToken(e,n,r,s,a){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=h_(n,r,e.id_token,this.config.auth.clientId,s);return await this.storage.setIdTokenCredential(i,a),i}async loadAccessToken(e,n,r,s,a,i,o){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const l=n.scope?fa.fromString(n.scope):new fa(e.scopes),u=i.expiresOn||n.expires_in+lo(),d=i.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+lo(),f=f_(r,s,n.access_token,this.config.auth.clientId,a,l.printScopes(),u,d,fc);return await this.storage.setAccessTokenCredential(f,o),f}async loadRefreshToken(e,n,r,s){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const a=Eme(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(a,s),a}generateAuthenticationResult(e,n,r,s){var d,f,m;let a="",i=[],o=null,l;n!=null&&n.accessToken&&(a=n.accessToken.secret,i=fa.fromString(n.accessToken.target).asArray(),o=Ng(n.accessToken.expiresOn),l=Ng(n.accessToken.extendedExpiresOn));const u=n.account;return{authority:s?s.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:i,account:u.getAccountInfo(),idToken:((d=n.idToken)==null?void 0:d.secret)||"",idTokenClaims:r||{},accessToken:a,fromCache:!0,expiresOn:o,correlationId:e.correlationId||"",requestId:"",extExpiresOn:l,familyId:((f=n.refreshToken)==null?void 0:f.familyId)||"",tokenType:((m=n==null?void 0:n.accessToken)==null?void 0:m.tokenType)||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class qpt extends Rme{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.20.0 2025-08-12 */class Gpt extends Jv{constructor(e,n,r,s,a,i,o,l,u,d){super(e,n,r,s,a,i,l,u,d),this.apiId=o}async acquireToken(e){if(!e.code)throw kt(t0e);const n=await Xe(this.initializeAuthorizationRequest.bind(this),ke.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Yt.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const s={...n,code:e.code},a=await Xe(this.getClientConfiguration.bind(this),ke.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),i=new qpt(a);this.logger.verbose("Auth code client created");const o=new N0e(i,this.browserStorage,s,this.logger,this.performanceClient);return await Xe(o.handleCodeResponseFromServer.bind(o),ke.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(s){throw s instanceof Dr&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}logout(){return Promise.reject(kt(y_))}}/*! @azure/msal-browser v4.20.0 2025-08-12 */function Wpt(t,e,n){var i;const r=((i=window.msal)==null?void 0:i.clientIds)||[],s=r.length,a=r.filter(o=>o===t).length;a>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:s,sameClientIdInstanceCount:a})}/*! @azure/msal-browser v4.20.0 2025-08-12 */function Hc(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function dS(t,e){try{H9(t)}catch(n){throw e.end({success:!1},n),n}}class k_{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new qd(this.logger,this.performanceClient):P5,this.eventHandler=new mpt(this.logger),this.browserStorage=this.isBrowserEnvironment?new l8(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,Ymt(this.config.auth)):apt(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:ma.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:ma.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new l8(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Vpt(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new k_(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Ut.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),s=this.config.system.allowPlatformBroker,a=this.performanceClient.startMeasurement(ke.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Ut.INITIALIZE_START),!n)try{this.logMultipleInstances(a)}catch{}if(await Xe(this.browserStorage.initialize.bind(this.browserStorage),ke.InitializeCache,this.logger,this.performanceClient,r)(r),s)try{this.platformAuthProvider=await Dpt(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Lo(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),ke.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Ut.INITIALIZE_END),a.end({allowPlatformBroker:s,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),S0e(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var l;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((l=this.browserStorage.getInteractionInProgress())==null?void 0:l.type)===Yh.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),s=this.browserStorage.getCachedNativeRequest(),a=s&&this.platformAuthProvider&&!e;let i;this.eventHandler.emitEvent(Ut.HANDLE_REDIRECT_START,Yt.Redirect);let o;try{if(a&&this.platformAuthProvider){i=this.performanceClient.startMeasurement(ke.AcquireTokenRedirect,(s==null?void 0:s.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const u=new e4(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,jr.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,s.accountId,this.nativeInternalStorage,s.correlationId);o=Xe(u.handleRedirectPromise.bind(u),ke.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[u,d]=this.browserStorage.getCachedRequest(),f=u.correlationId;i=this.performanceClient.startMeasurement(ke.AcquireTokenRedirect,f),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const m=this.createRedirectClient(f);o=Xe(m.handleRedirectPromise.bind(m),ke.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,i.event.correlationId)(e,u,d,i)}}catch(u){throw this.browserStorage.resetRequestCache(),u}return o.then(u=>(u?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Ut.LOGIN_SUCCESS,Yt.Redirect,u),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_SUCCESS,Yt.Redirect,u),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:Hc(u.account)})):i.event.errorCode?i.end({success:!1}):i.discard(),this.eventHandler.emitEvent(Ut.HANDLE_REDIRECT_END,Yt.Redirect),u)).catch(u=>{this.browserStorage.resetRequestCache();const d=u;throw r.length>0?this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_FAILURE,Yt.Redirect,null,d):this.eventHandler.emitEvent(Ut.LOGIN_FAILURE,Yt.Redirect,null,d),this.eventHandler.emitEvent(Ut.HANDLE_REDIRECT_END,Yt.Redirect),i.end({success:!1},d),u})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(ke.AcquireTokenPreRedirect,n);r.add({accountType:Hc(e.account),scenarioId:e.scenarioId});const s=e.onRedirectNavigate;if(s)e.onRedirectNavigate=i=>{const o=typeof s=="function"?s(i):void 0;return r.add({navigateCallbackResult:o!==!1}),r.event=r.end({success:!0})||r.event,o};else{const i=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=o=>{const l=typeof i=="function"?i(o):void 0;return r.add({navigateCallbackResult:l!==!1}),r.event=r.end({success:!0})||r.event,l}}const a=this.getAllAccounts().length>0;try{$Y(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Yh.SIGNIN),a?this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_START,Yt.Redirect,e):this.eventHandler.emitEvent(Ut.LOGIN_START,Yt.Redirect,e);let i;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?i=new e4(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,jr.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(l=>{if(l instanceof eu&&Jp(l))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(l instanceof Cc)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw l}):i=this.createRedirectClient(n).acquireToken(e),await i}catch(i){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(ke.AcquireTokenRedirect,n).end({success:!1},i):r.end({success:!1},i),a?this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_FAILURE,Yt.Redirect,null,i):this.eventHandler.emitEvent(Ut.LOGIN_FAILURE,Yt.Redirect,null,i),i}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ke.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:Hc(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),dS(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,Yh.SIGNIN)}catch(o){return Promise.reject(o)}const s=this.getAllAccounts();s.length>0?this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_START,Yt.Popup,e):this.eventHandler.emitEvent(Ut.LOGIN_START,Yt.Popup,e);let a;const i=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?a=this.acquireTokenNative({...e,correlationId:n},jr.acquireTokenPopup).then(o=>(r.end({success:!0,isNativeBroker:!0,accountType:Hc(o.account)}),o)).catch(o=>{if(o instanceof eu&&Jp(o))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,i);if(o instanceof Cc)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,i);throw o}):a=this.createPopupClient(n).acquireToken(e,i),a.then(o=>(s.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Ut.LOGIN_SUCCESS,Yt.Popup,o):this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_SUCCESS,Yt.Popup,o),r.end({success:!0,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,accountType:Hc(o.account)}),o)).catch(o=>(s.length>0?this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_FAILURE,Yt.Popup,null,o):this.eventHandler.emitEvent(Ut.LOGIN_FAILURE,Yt.Popup,null,o),r.end({success:!1},o),Promise.reject(o))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var a,i;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(ke.SsoSilent,n),(a=this.ssoSilentMeasurement)==null||a.add({scenarioId:e.scenarioId,accountType:Hc(e.account)}),dS(this.initialized,this.ssoSilentMeasurement),(i=this.ssoSilentMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Ut.SSO_SILENT_START,Yt.Silent,r);let s;return this.canUsePlatformBroker(r)?s=this.acquireTokenNative(r,jr.ssoSilent).catch(o=>{if(o instanceof eu&&Jp(o))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw o}):s=this.createSilentIframeClient(r.correlationId).acquireToken(r),s.then(o=>{var l;return this.eventHandler.emitEvent(Ut.SSO_SILENT_SUCCESS,Yt.Silent,o),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,isNativeBroker:o.fromNativeBroker,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,accountType:Hc(o.account)}),o}).catch(o=>{var l;throw this.eventHandler.emitEvent(Ut.SSO_SILENT_FAILURE,Yt.Silent,null,o),(l=this.ssoSilentMeasurement)==null||l.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(ke.AcquireTokenByCode,n);dS(this.initialized,r),this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_BY_CODE_START,Yt.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw kt(r0e);if(e.code){const s=e.code;let a=this.hybridAuthCodeResponses.get(s);return a?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),a=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(i=>(this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Yt.Silent,i),this.hybridAuthCodeResponses.delete(s),r.end({success:!0,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:Hc(i.account)}),i)).catch(i=>{throw this.hybridAuthCodeResponses.delete(s),this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_BY_CODE_FAILURE,Yt.Silent,null,i),r.end({success:!1},i),i}),this.hybridAuthCodeResponses.set(s,a)),await a}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){const s=await this.acquireTokenNative({...e,correlationId:n},jr.acquireTokenByCode,e.nativeAccountId).catch(a=>{throw a instanceof eu&&Jp(a)&&(this.platformAuthProvider=void 0),a});return r.end({accountType:Hc(s.account),success:!0}),s}else throw kt(s0e);else throw kt(n0e)}catch(s){throw this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_BY_CODE_FAILURE,Yt.Silent,null,s),r.end({success:!1},s),s}}async acquireTokenByCodeAsync(e){var s;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ke.AcquireTokenByCodeAsync,e.correlationId),(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(a=>{var i;return(i=this.acquireTokenByCodeAsyncMeasurement)==null||i.end({success:!0,fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker}),a}).catch(a=>{var i;throw(i=this.acquireTokenByCodeAsyncMeasurement)==null||i.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(ke.AcquireTokenFromCache,e.correlationId),n){case ki.Default:case ki.AccessToken:case ki.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return Xe(r.acquireToken.bind(r),ke.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ot(ff)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(ke.AcquireTokenByRefreshToken,e.correlationId),n){case ki.Default:case ki.AccessTokenAndRefreshToken:case ki.RefreshToken:case ki.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return Xe(r.acquireToken.bind(r),ke.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ot(ff)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(ke.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return Xe(n.acquireToken.bind(n),ke.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return $Y(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Yh.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return H9(this.initialized),this.browserStorage.setInteractionInProgress(!0,Yh.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return ipt(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return opt(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return lpt(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return cpt(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return upt(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();dpt(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return hpt(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=wc.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,s){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw kt(M9);return new e4(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,s)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Mb(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Ni.NONE:case Ni.CONSENT:case Ni.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new Mpt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new Opt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new Upt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,jr.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new D0e(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new Hpt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new Gpt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,jr.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return C0e(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ma.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ma.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Sc():Ze.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||PY})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||PY})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ke.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),dS(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const s=e.account||this.getActiveAccount();if(!s)throw kt(Yme);return r.add({accountType:Hc(s)}),this.acquireTokenSilentDeduped(e,s,n).then(a=>(r.end({success:!0,fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length}),{...a,state:e.state,correlationId:n})).catch(a=>{throw a instanceof Dr&&a.setCorrelationId(n),r.end({success:!1},a),a})}async acquireTokenSilentDeduped(e,n,r){const s=m_(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},n.homeAccountId),a=JSON.stringify(s),i=this.activeSilentTokenRequests.get(a);if(typeof i>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const o=Xe(this.acquireTokenSilentAsync.bind(this),ke.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(a,o),o.finally(()=>{this.activeSilentTokenRequests.delete(a)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),i}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ke.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_START,Yt.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const s=await Xe(ppt,ke.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),a=e.cacheLookupPolicy||ki.Default;return this.acquireTokenSilentNoIframe(s,a).catch(async o=>{if(Kpt(o,a))if(this.activeIframeRequest)if(a!==ki.Skip){const[u,d]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${d}`,s.correlationId);const f=this.performanceClient.startMeasurement(ke.AwaitConcurrentIframe,s.correlationId);f.add({awaitIframeCorrelationId:d});const m=await u;if(f.end({success:m}),m)return this.logger.verbose(`Parallel iframe request with correlationId: ${d} succeeded. Retrying cache and/or RT redemption`,s.correlationId),this.acquireTokenSilentNoIframe(s,a);throw this.logger.info(`Iframe request with correlationId: ${d} failed. Interaction is required.`),o}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",s.correlationId),Xe(this.acquireTokenBySilentIframe.bind(this),ke.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s);else{let u;return this.activeIframeRequest=[new Promise(d=>{u=d}),s.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",s.correlationId),Xe(this.acquireTokenBySilentIframe.bind(this),ke.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s).then(d=>(u(!0),d)).catch(d=>{throw u(!1),d}).finally(()=>{this.activeIframeRequest=void 0})}else throw o}).then(o=>(this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_SUCCESS,Yt.Silent,o),e.correlationId&&this.performanceClient.addFields({fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker},e.correlationId),o)).catch(o=>{throw this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_FAILURE,Yt.Silent,null,o),o}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return Mb(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,jr.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw r instanceof eu&&Jp(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ot(ff)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===ki.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Xe(this.acquireTokenFromCache.bind(this),ke.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===ki.AccessToken)throw r;return this.eventHandler.emitEvent(Ut.ACQUIRE_TOKEN_NETWORK_START,Yt.Silent,e),Xe(this.acquireTokenByRefreshToken.bind(this),ke.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Xe(C_,ke.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),Wpt(n,e,this.logger)}}function Kpt(t,e){const n=!(t instanceof Cc&&t.subError!==g_),r=t.errorCode===to.INVALID_GRANT_ERROR||t.errorCode===ff,s=n&&r||t.errorCode===q5||t.errorCode===C9,a=S0t.includes(e);return s&&a}/*! @azure/msal-browser v4.20.0 2025-08-12 */async function Ypt(t,e){const n=new w0(t);return await n.initialize(),k_.createController(n,e)}/*! @azure/msal-browser v4.20.0 2025-08-12 */class E_{static async createPublicClientApplication(e){const n=await Ypt(e);return new E_(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new k_(new w0(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const Xpt="2e5efbea-5502-44b3-8e9f-08372b6e8b25",Jpt=kc(Nl,jl),I0e=()=>{const[t,e]=y.useState({}),[n,r]=y.useState(!1),[s,a]=y.useState(!1),[i,o]=y.useState(null),{setAuthStep:l,setToken:u,uuid:d}=kr(),{updateOptions:f,trackEvent:m}=ut(),[g,x]=y.useState(!0),[b,C]=y.useState(!1),S=y.useRef(null);y.useEffect(()=>{const _={auth:{clientId:Xpt,authority:"https://login.microsoftonline.com/common",redirectUri:window.location.origin},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{allowNativeBroker:!1}},A=new E_(_);A.initialize().then(()=>{S.current=A,C(!0),console.log("MSAL initialized")}).catch(j=>{console.error("MSAL initialization error:",j)})},[]),y.useEffect(()=>{m("signup_outlook_loaded",{distinct_id:d})},[]);const w=_=>{try{const j=_.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),D=decodeURIComponent(atob(j).split("").map(function(z){return"%"+("00"+z.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(D)}catch(A){return console.error("Failed to decode JWT:",A),null}};async function E(){const _=btoa(String.fromCharCode(...crypto.getRandomValues(new Uint8Array(32)))),j=new TextEncoder().encode(_),D=await crypto.subtle.digest("SHA-256",j),F=Array.from(new Uint8Array(D)).map(R=>R.toString(16).padStart(2,"0")).join("");return{nonce:_,hashedNonce:F}}return{success:n,error:i,loading:s,microsoftLogin:async()=>{if(!(!b||!S.current))try{a(!0);const{nonce:_,hashedNonce:A}=await E(),D=(await S.current.loginPopup({scopes:["openid","profile","email"],nonce:A})).idToken,z=w(D),F={provider:"azure",token:D,nonce:_};return z!=null&&z.nonce&&(F.nonce=_),localStorage.setItem("last_used_login_method","outlook"),Jpt.auth.signInWithIdToken(F);if(i){i.message&&i.message.includes("Database error saving new user")?o("There was an issue setting up your account. Please try again or contact support."):o("Failed to authenticate with Microsoft. Please try again."),a(!1);return}u(data),localStorage.setItem("last_used_login_method","outlook"),r(!0),window.parent.postMessage({type:"AUTH_SUCCESS"},"*"),setTimeout(()=>{l("questionairre")},1500)}catch(_){console.error("Login error:",_),o("An unexpected error occurred during login. Please try again.")}finally{a(!1)}}}},Qpt=t_({month:Nf().min(1,"Please select a month"),year:Nf().min(1,"Please select a year")});kc(Nl,jl);const Zpt=()=>{const{setAuthStep:t,setToken:e,uuid:n,setAgeBand:r,loginState:s,handleAuth:a}=kr(),[i,o]=y.useState(!0),{microsoftLogin:l}=I0e(),u=async x=>{if(new Date().getFullYear()-parseInt(x.year)<13){t("underAge");return}const b=await l();a(b,"signup")},d=ZE({resolver:n_(Qpt),defaultValues:{month:"",year:""}}),f=()=>{const x=d.getValues(),b=x.month,C=x.year;return!(!b||!C)};y.useEffect(()=>{const x=d.watch(b=>{o(!f())});return()=>x.unsubscribe()},[d]);const m=y.useRef(null),g=()=>{var C;if(console.log("checkAge",i),i)return;const{year:x,month:b}=d.getValues();if(new Date().getFullYear()-parseInt(x)<13||new Date().getFullYear()-parseInt(x)===13&&new Date().getMonth()+1<parseInt(b)){t("underAge");return}else(C=m.current)==null||C.remove(),r(T8(parseInt(x)))};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"px-[30px] text-gray-500",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Join now (takes 30 secs)"}),c.jsx("p",{children:"Over 1.5 million students made their Canvas better."}),c.jsx("div",{className:"mt-[20px]",children:c.jsx(e_,{...d,children:c.jsxs("form",{onSubmit:d.handleSubmit(u),children:[c.jsx(r_,{form:d}),c.jsxs("div",{className:`mt-4 relative ${i?"opacity-50 pointer-events-none":""}`,children:[c.jsx("div",{ref:m,className:"w-full h-full absolute top-0 left-0 z-10 bg-none",onMouseOver:g,onMouseMove:()=>{console.log("mouse move")}}),c.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 rounded-md border border-gray-300 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[c.jsx(gE,{className:"w-4 h-4"}),"Continue with Microsoft"]}),s.loading&&c.jsxs("span",{className:"text-gray-500 text-sm flex items-center gap-2 mt-2",children:[c.jsx(js,{className:"w-4 h-4 animate-spin"})," Signing in..."]}),s.success&&c.jsxs("span",{className:"text-green-700 text-sm flex items-center gap-2 mt-2",children:[c.jsx(or,{className:"w-4 h-4"})," Success!"]})]})]})})}),c.jsxs("div",{className:"text-[11px] text-gray-500 mt-2 flex-1",children:["By signing up, you acknowledge that you have read, understood, and agree to the BetterCampus ",c.jsx("a",{href:"/terms",target:"_blank",className:"text-blue-500",children:"Terms"})," and ",c.jsx("a",{href:"/privacy",target:"_blank",className:"text-blue-500",children:"Privacy Policy"})]})]})})},egt="BetterCampus Calendar",tgt="Automatically synced events from BetterCampus",ngt="#4285f4",rgt=()=>{const{updateOptions:t,getValidCalendarToken:e,getOptions:n,origin:r,sendMessage:s,sendMessageAndListen:a,sendToBackgroundScript:i}=ut(),o=async w=>{try{i({type:"add_to_calendar_queue",events:w})}catch(E){console.error("[GoogleCalPush] Failed to send events to background queue",E)}},l=async()=>{var z;const w=n("sync");(z=w==null?void 0:w.google_cal_push_settings)!=null&&z.betterCampusCalendarId;const E=n("local"),T=(E==null?void 0:E.synced_calendar)||{},_=(E==null?void 0:E.unsynced_calendar)||[],j=await new Promise(async(F,R)=>{var Y;const L=new URLSearchParams;(((Y=n("sync"))==null?void 0:Y.card_ids)||[]).forEach(B=>L.append("context_codes[]","course_"+B));const H=new Date().toISOString(),P=ir(new Date,130).toISOString();let I=1,U=100,W=[];for(;U===100&&I<30;){const B=`/api/v1/calendar_events?${L.toString()}&type=assignment&start_date=${H}&end_date=${P}&page=${I}&per_page=100`;try{const Z=await a({type:"REQUEST_CANVAS_DATA",payload:{endpoint:B}});console.log("[message response]",Z);const le=(Z==null?void 0:Z.data)||[];U=(le==null?void 0:le.length)||0,I++;const G=le.map(K=>{var te,ie,de,fe,se,ce;return{id:(te=K==null?void 0:K.assignment)==null?void 0:te.id,title:(ie=K==null?void 0:K.assignment)==null?void 0:ie.name,due:(de=K==null?void 0:K.assignment)==null?void 0:de.due_at,course:(fe=K==null?void 0:K.assignment)==null?void 0:fe.course_id,points:(se=K==null?void 0:K.assignment)==null?void 0:se.points_possible,url:(ce=K==null?void 0:K.assignment)==null?void 0:ce.html_url}});W=W.concat(G),console.log("[assignments]",W),U!==100&&F(W),I>=30&&R(new Error("Failed to fetch calendar events"))}catch(Z){console.error("Error fetching calendar events",Z)}}});console.log("[assignments complete]",j);const D=j.filter(F=>{const R=`todo_${F.id}`;return T[R]?(console.log(`[CalendarSync] Assignment ${F.id} already synced, skipping`),!1):_.some(L=>L.canvasId===R)?(console.log(`[CalendarSync] Assignment ${F.id} already in queue, skipping`),!1):!0});if(D.length>0){const F=D.map(L=>({canvasId:`todo_${L.id}`,operation:"insert",eventData:{title:L.title,startDateTime:L.due,duration:void 0,description:`Course: ${L.course}
Points: ${L.points}`,type:"due"}})),R=[..._,...F];t({unsynced_calendar:R},"local"),console.log(`[CalendarSync] Added ${D.length} assignments to unsynced queue`)}else console.log("[CalendarSync] No new assignments to add to queue")},u=async()=>{const w=await storage.getItem("sync:google_cal_push_settings"),E=(w==null?void 0:w.betterCampusCalendarId)||"",T=n("sync"),_=((T==null?void 0:T.card_ids)||[]).map(j=>"card_"+j),A={};Object.keys(storage.planned||{}).forEach(j=>{try{const D=storage.planned[j],z=D.plannedAt;if(!D.plannedAt||!D.duration)return;const F=`planned_${D.id}`,R=_["card_"+((D==null?void 0:D.course)||"")],L=new Date(z),O=new Date(L),H=If(O,D.duration);if(O.getTime()<Date.now())return;if(O.getTime()>H.getTime()){console.error("google sync planned date is in the past somehow",D);return}const P={summary:`[WORK] ${D.title}`,description:`Course: ${(R==null?void 0:R.code)||(R==null?void 0:R.default)}
Points: ${D.points||"N/A"}
Link: ${D.url}`,start:{dateTime:O.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:H.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},extendedProperties:{private:{canvasId:F,canvasType:"assignment"}}};A[F]={event:P,op:"create",calendar:E}}catch(D){console.error("Error queueing planned item:",D)}}),await o(A)},d=async()=>{const w=n("sync"),E=(w==null?void 0:w.google_cal_push_settings)||{},T=(E==null?void 0:E.betterCampusCalendarId)||"";if(!T)return;const _=((w==null?void 0:w.card_ids)||[]).map(D=>"card_"+D),A={},j=Intl.DateTimeFormat().resolvedOptions().timeZone;for(const D of storage.card_ids){const F=_["card_"+D],R=(F==null?void 0:F.schedule)||[];if(R.length!==0)for(const L of R)try{const O=Math.min(L.start,L.end),H=Math.max(L.start,L.end);if(O===H){console.warn(`[GoogleSync] Skipping class time with equal start/end: ${D}, day ${L.day}`);continue}const P=`class_${D}_${L.day}_${O}`,I=gf(new Date,{weekStartsOn:0}),U=new Date(I);U.setDate(I.getDate()+L.day),U.setHours(Math.floor(O/60),O%60,0,0);const W=new Date(U);W.setHours(Math.floor(H/60),H%60,0,0);const Y={summary:F.code||F.default||`Course ${D}`,description:`Class session for ${F.default||F.code||D}`,start:{dateTime:U.toISOString(),timeZone:j},end:{dateTime:W.toISOString(),timeZone:j},extendedProperties:{private:{canvasId:P,canvasType:"class"}}};Y.recurrence=["RRULE:FREQ=WEEKLY"],A[P]={event:Y,op:"create",calendar:T}}catch(O){console.error("Error queueing class time:",O)}}await o(A)},f=async()=>{await l(),await u(),await d()},m=async()=>{var T;const w=n("sync"),E=((T=w==null?void 0:w.google_cal_push_settings)==null?void 0:T.betterCampusCalendarId)||"";if(E)try{const _=await e();if(_){const A=await fetch(`https://www.googleapis.com/calendar/v3/calendars/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${_.access_token}`}});A.ok?console.log("[GoogleCal] Successfully deleted BetterCampus calendar:",E):console.warn("[GoogleCal] Failed to delete calendar, status:",A.status)}}catch(_){console.error("[GoogleCal] Error deleting calendar:",_)}},g=async()=>{const w=await e();if(!w)return;const E=await fetch("https://www.googleapis.com/calendar/v3/users/me/calendarList",{method:"GET",headers:{Authorization:`Bearer ${w.access_token}`,"Content-Type":"application/json"}});if(!E.ok){console.error("[GoogleCal] Failed to fetch calendars:",E.status,E.statusText);return}const T=await E.json(),_=n("sync").google_calendars||{},A={..._.google_calendars||{}},j=new Set,D=n("sync").google_cal_push_settings||{},z=(D==null?void 0:D.betterCampusCalendarId)||"";(T.items||[]).forEach(F=>{j.add(F.id),!(z&&F.id===z)&&(console.log("calendar two here",F,_[F.id]),A[F.id]?A[F.id]={...A[F.id],summary:F.summary,backgroundColor:F.backgroundColor,lastSeen:Date.now()}:A[F.id]={id:F.id,summary:F.summary,backgroundColor:F.backgroundColor,shouldSync:!1,lastSeen:Date.now()})}),Object.keys(A).forEach(F=>{j.has(F)||(A[F]={...A[F],missing:!0,lastSeen:A[F].lastSeen||Date.now()})}),t({google_calendars:A,google_cal_last_sync:Date.now()},"sync")},x=async()=>{const w=n("sync").google_cal_push_settings||{};await m(),await t({google_cal_push_settings:{...w,betterCampusCalendarId:null}},"sync"),await t({google_cal_pushed_events:{},synced_calendar:{},unsynced_calendar:[]},"local")},b=async()=>{await m(),await t({google_cal_sync_token:null,google_cal_push_settings:{betterCampusCalendarId:null,pushEnabled:!1},google_cal_last_sync:null,google_calendars:{}},"sync"),await t({google_cal_pushed_events:{},synced_calendar:{},unsynced_calendar:[]},"local")},C=async()=>{const w=await e();if(console.log("validToken",w),!w)return null;try{const E=await fetch("https://www.googleapis.com/calendar/v3/calendars",{method:"POST",headers:{Authorization:`Bearer ${w.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({summary:egt,description:tgt,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,colorId:ngt})});if(!E.ok){const _=await E.text();return console.error(`[GoogleCal] Failed to create calendar. Status: ${E.status}, Error:`,_),null}const T=await E.json();console.log("[GoogleCal] Created BetterCampus calendar:",T.id),t({google_cal_push_settings:{...n("sync").google_cal_push_settings||{},betterCampusCalendarId:T.id}},"sync")}catch(E){return console.error("[GoogleCal] Error creating calendar:",E),null}};return{handleInitialGoogleSync:f,deleteGoogleCalendar:m,disconnectGoogleCalendar:b,resetGoogleCalendar:x,listGoogleCalendars:g,ensureBetterCampusGoogleCalendar:async()=>{const E=n().google_cal_push_settings;if(E!=null&&E.betterCampusCalendarId)return E.betterCampusCalendarId;const T=await C();return T&&t({google_cal_push_settings:{...E,betterCampusCalendarId:T}},"sync"),T}}},sgt="BetterCampus Calendar",agt=()=>{const{updateOptions:t,getValidCalendarToken:e,getOptions:n,origin:r,sendMessage:s}=ut(),a=async C=>{try{s({type:"microsoft_cal_add_to_queue",events:C})}catch(S){console.error("[MicrosoftCalPush] Failed to send events to background queue",S)}},i=async()=>{var z,F,R;const C=n("sync"),S=((z=C==null?void 0:C.microsoft_cal_push_settings)==null?void 0:z.betterCampusCalendarId)||"";if(!((F=C==null?void 0:C.microsoft_cal_push_settings)!=null&&F.pushDueDates)||!((R=C==null?void 0:C.microsoft_cal_push_settings)!=null&&R.pushEnabled))return;const w=new URLSearchParams;((C==null?void 0:C.card_ids)||[]).forEach(L=>w.append("context_codes[]","course_"+L));const T=new Date().toISOString(),_=ir(new Date,130).toISOString();let A={},j=1,D=100;for(;D===100&&j<30;)try{const O=await(await fetch(`${r}/api/v1/calendar_events?${w.toString()}&type=assignment&start_date=${T}&end_date=${_}&page=${j}&per_page=100`,{method:"GET"})).json();D=(O==null?void 0:O.length)||0,j++,(O||[]).forEach(H=>{var B;const P=`todo_${(B=H==null?void 0:H.assignment)==null?void 0:B.id}`,I=new Date(H==null?void 0:H.start_at),U=new Date(I);U.setUTCHours(0,0,0,0);const W=new Date(U);W.setUTCDate(W.getUTCDate()+1);const Y={subject:`[DUE] ${H==null?void 0:H.title}`,body:{contentType:"Text",content:`Assignment due date

[BetterCanvas ID: ${P}]`},start:{dateTime:U.toISOString(),timeZone:"UTC"},end:{dateTime:W.toISOString(),timeZone:"UTC"},isAllDay:!0,categories:["BetterCanvas","Assignment"]};A[P]={event:Y,op:"create",calendar:S}})}catch(L){console.error("Error fetching calendar events",L)}await a(A);try{s({type:"microsoft_cal_process_queue"})}catch(L){console.warn("Failed to trigger background queue processing",L)}},o=async()=>{var _,A,j;const C=n("sync"),S=((_=C==null?void 0:C.microsoft_cal_push_settings)==null?void 0:_.betterCampusCalendarId)||"";if(!((A=C==null?void 0:C.microsoft_cal_push_settings)!=null&&A.pushPlannedItems)||!((j=C==null?void 0:C.microsoft_cal_push_settings)!=null&&j.pushEnabled))return;const w=n("sync"),E=(w==null?void 0:w.planned)||{},T={};Object.keys(E).forEach(D=>{try{const z=E[D],F=z.plannedAt;if(!z.plannedAt||!z.duration)return;const R=`planned_${z.id}`,L=w[`card_${z.course}`]||{},O=new Date(F),H=new Date(O),P=If(H,z.duration);if(H.getTime()<Date.now())return;if(H.getTime()>P.getTime()){console.error("microsoft sync planned date is in the past somehow",z);return}const I={subject:`[WORK] ${z.title}`,body:{contentType:"Text",content:`Course: ${(L==null?void 0:L.code)||(L==null?void 0:L.default)}
Points: ${z.points||"N/A"}
Link: ${z.url}

[BetterCanvas ID: ${R}]`},start:{dateTime:H.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:P.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},categories:["BetterCanvas","Planned"]};T[R]={event:I,op:"create",calendar:S}}catch(z){console.error("Error queueing planned item:",z)}}),await a(T);try{s({type:"microsoft_cal_process_queue"})}catch(D){console.warn("Failed to trigger background queue processing",D)}},l=async()=>{const C=n("sync"),S=(C==null?void 0:C.microsoft_cal_push_settings)||{},w=(S==null?void 0:S.betterCampusCalendarId)||"";if(!w||!(S!=null&&S.pushClassTimes)||!(S!=null&&S.pushEnabled))return;const E=(C==null?void 0:C.card_ids)||[];E.map(A=>`card_${A}`);const T={},_=Intl.DateTimeFormat().resolvedOptions().timeZone;for(const A of E){const D=C[`card_${A}`],z=(D==null?void 0:D.schedule)||[];if(z.length!==0)for(const F of z)try{const R=Math.min(F.start,F.end),L=Math.max(F.start,F.end);if(R===L){console.warn(`[MicrosoftSync] Skipping class time with equal start/end: ${A}, day ${F.day}`);continue}const O=`class_${A}_${F.day}_${R}`,H=gf(new Date,{weekStartsOn:0}),P=new Date(H);P.setDate(H.getDate()+F.day),P.setHours(Math.floor(R/60),R%60,0,0);const I=new Date(P);I.setHours(Math.floor(L/60),L%60,0,0);const U={subject:D.code||D.default||`Course ${A}`,body:{contentType:"Text",content:`Class session for ${D.default||D.code||A}

[BetterCanvas ID: ${O}]`},start:{dateTime:P.toISOString(),timeZone:_},end:{dateTime:I.toISOString(),timeZone:_},categories:["BetterCanvas","Class"]};U.recurrence={pattern:{type:"weekly",interval:1,daysOfWeek:[["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][F.day]]},range:{type:"noEnd"}},T[O]={event:U,op:"create",calendar:w}}catch(R){console.error("Error queueing class time:",R)}}await a(T);try{s({type:"microsoft_cal_process_queue"})}catch(A){console.warn("Failed to trigger background queue processing",A)}},u=async()=>{var S;const C=((S=n("sync"))==null?void 0:S.microsoft_cal_push_settings)||{};C!=null&&C.pushDueDates&&await i(),C!=null&&C.pushPlannedItems&&await o(),C!=null&&C.pushClassTimes&&await l()},d=async()=>{var w;const C=n("sync"),S=((w=C==null?void 0:C.microsoft_cal_push_settings)==null?void 0:w.betterCampusCalendarId)||"";if(S)try{const E=await e();if(E){const T=await fetch(`https://graph.microsoft.com/v1.0/me/calendars/${S}`,{method:"DELETE",headers:{Authorization:`Bearer ${E}`}});T.ok?console.log("[MicrosoftCal] Successfully deleted BetterCampus calendar:",S):console.warn("[MicrosoftCal] Failed to delete calendar, status:",T.status)}}catch(E){console.error("[MicrosoftCal] Error deleting calendar:",E)}},f=async()=>{const C=await e();if(!C)return;const S=await fetch("https://graph.microsoft.com/v1.0/me/calendars",{method:"GET",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(!S.ok){console.error("[MicrosoftCal] Failed to fetch calendars:",S.status,S.statusText);return}const w=await S.json(),T={...n("sync").microsoft_calendars||{}},_=new Set,A=n("sync").microsoft_cal_push_settings||{},j=(A==null?void 0:A.betterCampusCalendarId)||"";let D=!1;(w.value||[]).forEach(z=>{_.add(z.id),j&&z.id===j&&(D=!0),T[z.id]?T[z.id]={...T[z.id],name:z.name,color:z.color,lastSeen:Date.now()}:T[z.id]={id:z.id,name:z.name,color:z.color,shouldSync:!1,lastSeen:Date.now()}}),Object.keys(T).forEach(z=>{_.has(z)||(T[z]={...T[z],missing:!0,lastSeen:T[z].lastSeen||Date.now()})}),t({microsoft_calendars:T,microsoft_cal_last_sync:Date.now()},"sync"),!D&&j&&t({microsoft_cal_push_settings:{...A,betterCampusCalendarId:null,pushEnabled:!1}},"sync")},m=async()=>{const C=n("sync").microsoft_cal_push_settings||{};await d(),await t({microsoft_cal_push_settings:{...C,betterCampusCalendarId:null}},"sync"),await t({microsoft_cal_pushed_events:{}},"local")},g=async()=>{await d();const C=n("sync");await t({microsoft_cal_sync_token:null,microsoft_cal_push_settings:{...C==null?void 0:C.microsoft_cal_push_settings,betterCampusCalendarId:null,pushEnabled:!1},microsoft_cal_last_sync:null,microsoft_calendars:{}},"sync"),await t({microsoft_cal_pushed_events:{}},"local")},x=async()=>{const C=await e();if(!C)return null;try{const S=await fetch("https://graph.microsoft.com/v1.0/me/calendars",{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({name:sgt,color:"auto"})});if(!S.ok){const E=await S.text();return console.error(`[MicrosoftCal] Failed to create calendar. Status: ${S.status}, Error:`,E),null}const w=await S.json();return console.log("[MicrosoftCal] Created BetterCampus calendar:",w.id),w.id}catch(S){return console.error("[MicrosoftCal] Error creating calendar:",S),null}};return{handleInitialMicrosoftSync:u,deleteMicrosoftCalendar:d,disconnectMicrosoftCalendar:g,resetMicrosoftCalendar:m,listMicrosoftCalendars:f,ensureBetterCampusMicrosoftCalendar:async()=>{const C=n("sync"),S=(C==null?void 0:C.microsoft_cal_push_settings)||{};if(S!=null&&S.betterCampusCalendarId)return S.betterCampusCalendarId;const w=await x();return w&&t({microsoft_cal_push_settings:{...S,betterCampusCalendarId:w}},"sync"),w}}},igt={auth:{clientId:"",authority:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",redirectUri:window.location.origin}},ogt={scopes:["Calendars.ReadWrite","User.Read"]},Gw=()=>{const{authenticatedFetch:t,callExtensionFunc:e,sendMessageAndListen:n,getOptions:r,updateOptions:s}=ut(),{handleInitialGoogleSync:a,ensureBetterCampusGoogleCalendar:i,disconnectGoogleCalendar:o,resetGoogleCalendar:l,listGoogleCalendars:u}=rgt(),{ensureBetterCampusMicrosoftCalendar:d,handleInitialMicrosoftSync:f,disconnectMicrosoftCalendar:m,resetMicrosoftCalendar:g,listMicrosoftCalendars:x}=agt(),C=sht({onSuccess:async j=>{console.log("handleGoogleCallback",j,t);const D=await t(`${Jr}/google-cal`,{method:"POST",body:{code:j.code}}),{message:z,error:F}=await D.json();!F&&z?s({google_cal_sync_token:z,microsoft_cal_sync_token:null}):console.error("Error exchanging code for token:",F)},flow:"auth-code",scope:"https://www.googleapis.com/auth/calendar"});return{ensureBetterCampusCalendar:async()=>{const j=r("sync");j!=null&&j.google_cal_sync_token?await i():j!=null&&j.microsoft_cal_sync_token&&await d()},handleDisconnectCalendar:async()=>{const j=r("sync");j!=null&&j.google_cal_sync_token?await o():j!=null&&j.microsoft_cal_sync_token&&await m()},handleResetCalendar:async()=>{const j=r("sync");j!=null&&j.google_cal_sync_token?await l():j!=null&&j.microsoft_cal_sync_token&&await g()},handleGoogleLogin:C,handleMicrosoftLogin:async()=>{try{const j=new E_(igt);await j.initialize();const D=await j.loginPopup(ogt);console.log("loginResponse",D),D&&D.accessToken&&s({microsoft_cal_sync_token:{access_token:D.accessToken,expires_at:new Date(D.expiresOn).getTime(),refresh_token:D.refreshToken},google_cal_sync_token:null})}catch(j){console.error("Microsoft login error:",j)}},handleInitialSync:async()=>{const j=r("sync");j!=null&&j.google_cal_sync_token?await a():j!=null&&j.microsoft_cal_sync_token&&await f()},listCalendars:async()=>{const j=r("sync");j!=null&&j.google_cal_sync_token?await u():j!=null&&j.microsoft_cal_sync_token&&await x()}}},lgt=()=>{var d,f,m;const{useRerenderListener:t,getOptions:e,updateOptions:n,callExtensionFunc:r}=ut(),{listCalendars:s}=Gw(),{options:a}=t(["google_cal_sync_token","google_cal_last_sync","google_cal_push_settings","google_calendars"]),i=async(g,x)=>{const b=e("sync"),C=b.google_calendars[g];n({google_calendars:{...b.google_calendars,[g]:{...C,shouldSync:x}}})},o=Object.values((a==null?void 0:a.google_calendars)||{}).some(g=>g.shouldSync);(m=(f=(d=a==null?void 0:a.auth)==null?void 0:d.user)==null?void 0:f.app_metadata)!=null&&m.plan_type;const[l,u]=y.useState(!1);return y.useEffect(()=>{(async()=>(u(!0),await s(),u(!1)))()},[]),c.jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"grid grid-cols-2 gap-1.5 max-h-[180px] overflow-y-auto",children:[l&&c.jsxs("div",{className:"col-span-2 text-center py-8 px-4 bg-base-1 rounded-lg border border-base",children:[c.jsx(js,{className:"w-8 h-8 animate-spin text-base-0 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-base-0 opacity-70",children:"Loading calendars..."})]}),!l&&Object.values(a.google_calendars||{}).map(g=>{console.log("calendar here",g);const x=a.google_calendars[g.id].shouldSync;return c.jsx(dgt,{checked:x,calendar:g,onToggle:i},g.id)}),!l&&Object.keys(a.google_calendars||{}).length===0&&c.jsxs("div",{className:"text-center py-8 px-4 bg-base-1 rounded-lg border border-base",children:[c.jsx(Mg,{className:"w-8 h-8 text-base-0 opacity-40 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-base-0 opacity-70",children:"No calendars found."}),c.jsx("p",{className:"text-xs text-base-0 opacity-50 mt-1",children:'Click "Sync Now" to fetch your calendars.'})]})]})})}),c.jsxs("div",{className:`transition-opacity ${o?"opacity-100":"opacity-70"}`,children:[c.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:c.jsxs("h3",{className:"text-sm font-semibold text-base-0 flex items-center gap-2 text-gray-700 ml-1.5",children:[c.jsx(_l,{className:"w-4 h-4 text-gray-700"}),"What gets synced"]})}),c.jsx("div",{className:"border border-base rounded-xl bg-base-1",children:c.jsxs("div",{className:"flex items-start gap-3 p-4",children:[c.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 bg-[#00a4ff] text-white",children:c.jsx(or,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm font-medium text-base-0 block",children:"Google Events"}),c.jsxs("p",{className:"text-xs text-base-0 opacity-70 mt-1",children:["Events from your Google Calendar will be displayed in the"," ",c.jsx("button",{onClick:()=>{r("toggleNavigator",{page:"assignments"})},className:"underline hover:no-underline font-medium cursor-pointer hover:opacity-100 text-base-0",children:"assignments page"})]})]})]})})]})]})},cgt=({signup:t=!1})=>{var g,x,b;const{useRerenderListener:e,updateOptions:n,callExtensionFunc:r}=ut();wa();const{options:s}=e(["google_cal_push_settings","display_sync_status"]),{handleInitialSync:a,ensureBetterCampusCalendar:i}=Gw(),[o,l]=y.useState(null),[u,d]=y.useState(!1),f=async C=>{n({google_cal_push_settings:{...s.google_cal_push_settings,pushEnabled:C}}),C&&(await i(),await a())},m=C=>{r("toggleNavigator",{page:C})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-base-1 rounded-xl p-4 border border-base",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-base-0 flex items-center justify-center shadow-sm",children:c.jsx(zv,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-base-0",children:"Send Events To"}),c.jsx("p",{className:"text-xs text-base-0 opacity-70 mt-0.5",children:"BetterCampus Calendar"})]})]}),c.jsx(Xl,{height:18,variant:"default",checked:!!((g=s.google_cal_push_settings)!=null&&g.pushEnabled),disabled:u,onCheckedChange:C=>f(C)})]})}),c.jsxs("div",{className:"flex items-center justify-between border border-base rounded-xl p-3",children:[c.jsx("p",{className:"text-sm font-medium text-base-0",children:"Display progress when syncing"}),c.jsx(Xl,{height:18,variant:"default",checked:!!(s.display_sync_status??!0),onCheckedChange:C=>n({display_sync_status:C})})]}),c.jsxs("div",{className:`transition-opacity ${(x=s.google_cal_push_settings)!=null&&x.pushEnabled?"opacity-100":"opacity-70"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2 mt-2",children:[c.jsxs("h3",{className:"text-sm font-semibold text-base-0 flex items-center gap-2 text-gray-700 ml-1.5",children:[c.jsx(_l,{className:"w-4 h-4"}),"What gets synced"]}),o&&c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-base-1 rounded-lg border border-base",children:[c.jsx(dR,{className:"h-3.5 w-3.5 animate-spin text-base-0"}),c.jsxs("span",{className:"text-xs font-medium text-base-0",children:[o.synced,"/",o.total," synced"]})]})]}),c.jsxs("div",{className:`border border-base rounded-xl bg-base-1 py-2 ${(b=s.google_cal_push_settings)!=null&&b.pushEnabled?"":"opacity-50"}`,children:[c.jsxs("div",{className:"flex items-start gap-3 px-4 py-2",children:[c.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 bg-[#00a4ff]",children:c.jsx(or,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm font-medium text-base-0 block",children:"Planned Items"}),c.jsxs("p",{className:"text-xs text-base-0 opacity-70 mt-1",children:["Items you plan in the"," ",c.jsx("button",{onClick:()=>{u||m("assignments")},disabled:u,className:`underline hover:no-underline font-medium ${u?"cursor-not-allowed opacity-50":"cursor-pointer hover:opacity-100 text-base-0"}`,children:"assignments page"})]})]})]}),c.jsxs("div",{className:"flex items-start gap-3 px-4 py-2",children:[c.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 bg-[#00a4ff]",children:c.jsx(or,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm font-medium text-base-0 block",children:"Assignment Due Dates"}),c.jsx("p",{className:"text-xs text-base-0 opacity-70 mt-1",children:"Any assignments due are synced"})]})]}),c.jsxs("div",{className:"flex items-start gap-3 px-4 py-2",children:[c.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 bg-[#00a4ff] text-white",children:c.jsx(or,{className:"w-3 h-3 text-base-0"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm font-medium text-base-0 block",children:"Class Times"}),c.jsx("p",{className:"text-xs text-base-0 opacity-70 mt-1",children:"Class times you schedule with BetterCampus"})]})]})]})]})]})},ugt=({signup:t=!1})=>{const{useRerenderListener:e,getOptions:n,updateOptions:r,callExtensionFunc:s}=ut(),{handleDisconnectCalendar:a}=Gw(),[i,o]=y.useState(!1),[l,u]=y.useState(null),[d,f]=y.useState("push"),[m,g]=y.useState(!1),[x,b]=y.useState(!1),[C,S]=y.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex flex-col gap-2",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2 p-1 bg-base-2 rounded-xl border border-base",children:[c.jsxs("button",{onClick:()=>f("push"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-200 cursor-pointer ${d==="push"?"bg-gray-100 text-black":"text-gray-500 hover:text-black"}`,children:[c.jsx(mR,{className:"w-4 h-4"}),"Send to Google"]}),c.jsxs("button",{onClick:()=>f("pull"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-200 cursor-pointer ${d==="pull"?"bg-gray-100 text-black":"text-gray-500 hover:text-black"}`,children:[c.jsx(rEe,{className:"w-4 h-4"}),"Pull from Google"]})]}),d==="pull"&&c.jsx(lgt,{signup:t}),d==="push"&&c.jsx(cgt,{signup:t}),!t&&c.jsx("div",{className:"pt-4 border-t border-base",children:c.jsxs("button",{onClick:async()=>{if(confirm("Are you sure you want to disconnect Google Calendar?")){b(!0);try{await a()}finally{b(!1)}}},className:"w-full text-sm transition-all flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border text-red-500 font-medium hover:bg-base-1 border-base bg-base-0 cursor-pointer",children:[x&&c.jsx(dR,{className:"h-4 w-4 animate-spin"}),x?"Disconnecting...":"Disconnect Google Calendar"]})})]})}),c.jsx(_c,{open:C,onOpenChange:S,children:c.jsx(Tc,{variant:"theme",className:"w-max",children:c.jsx(nie,{})})})]})},dgt=({checked:t,calendar:e,onToggle:n})=>c.jsxs("label",{className:`group flex items-center gap-3 p-3 py-3.5 rounded-xl border transition-all cursor-pointer border-base bg-base-0 hover:border-base hover:shadow-sm ${t?"bg-base-1 border-base":""}`,children:[c.jsx("input",{type:"checkbox",checked:t,onChange:r=>n(e.id,r.target.checked),className:"w-4 h-4 rounded border-base text-base-0 focus:ring-base-0 cursor-pointer"}),c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx("div",{className:"size-3 rounded-full flex-shrink-0",style:{backgroundColor:e.backgroundColor}}),c.jsx("span",{className:"text-sm text-gray-800 truncate",children:e.summary})]})]}),O0e=({showCloseButton:t=!1})=>{const{useRerenderListener:e,authenticatedFetch:n,updateOptions:r,closeModal:s}=ut(),{setAuthStep:a}=kr(),{options:i}=e(["google_cal_sync_token","microsoft_cal_sync_token"]),{handleGoogleLogin:o,handleMicrosoftLogin:l}=Gw(),d=new URLSearchParams(window.location.search).get("signup")==="true",f=t&&!d,m=()=>{a("questionairre")},g=()=>i.google_cal_sync_token||i.microsoft_cal_sync_token?c.jsx("div",{className:"relative h-[44px] mt-4",children:c.jsx("button",{onClick:m,className:"flex items-center justify-center gap-[8px] h-[44px] rounded-full w-full font-medium text-white bg-brand-gradient",children:"Next"})}):c.jsx("div",{className:"relative h-[44px] mt-4",children:c.jsx("button",{onClick:m,className:"flex items-center justify-center gap-[8px] h-[44px] rounded-full w-full font-medium text-gray-600",children:"Skip"})});return i.google_cal_sync_token?c.jsxs("div",{className:"pt-2",children:[c.jsx(ugt,{signup:d}),d&&c.jsx(g,{})]}):c.jsxs("div",{className:"relative flex-1 flex flex-col w-full h-full",children:[f&&c.jsx("button",{type:"button",onClick:s,className:"ring-offset-background focus-visible:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs transition-opacity hover:opacity-70 focus-visible:ring-2 focus-visible:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","aria-label":"Close",children:c.jsx(ys,{className:"text-base-1"})}),c.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"We'll sync assignments to your calendar for you"}),c.jsxs("div",{className:"flex flex-col w-full gap-2 items-center",children:[c.jsx("div",{className:"h-[220px] mb-2",children:c.jsx("img",{src:"/calendar.jpg",alt:"Calendar",className:"w-full h-full object-cover"})}),c.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-3 hover:brightness-95 transition-all duration-300 bg-white border border-[#e5e5e5] rounded-xl py-5 w-full font-medium",children:[c.jsx(zv,{className:"w-5 h-5"}),"Sync with Google"]}),c.jsxs("button",{onClick:l,className:"flex items-center justify-center gap-3 hover:brightness-95 transition-all duration-300 bg-white border border-[#e5e5e5] rounded-xl py-5 w-full font-medium",children:[c.jsx(FM,{className:"w-5 h-5"}),"Sync with Microsoft"]})]}),d&&c.jsx(g,{})]})},P0e=()=>{const{setAuthStep:t,ageBand:e,token:n,uuid:r}=kr(),[s,a]=y.useState(!1),[i,o]=y.useState(!1),{authenticatedFetch:l,updateOptions:u}=ut();return y.useCallback(async()=>{try{const d=await l(`${Jr}/user/confirm-signup`,{method:"POST",body:{dob:e}});d.ok||Eu("signup_claim_trial_failed",{distinct_id:r,error:d.statusText})}catch{}finally{a(!1)}},[n]),c.jsxs("div",{className:"flex flex-col h-full mb-[30px] px-[30px]",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Never miss a deadline again"})}),c.jsx("div",{className:"flex-1 flex flex-col gap-[10px]",children:c.jsx(s_,{clientId:"1040020018644-6cb03fh4mg7j5sse5cu9s46ihn9g7d56.apps.googleusercontent.com",children:c.jsx(O0e,{})})})]})},F0e=()=>{const{sendToBackgroundScript:t,authenticatedFetch:e,forceRefreshToken:n}=ut(),[r,s]=y.useState(!1),{setAuthStep:a}=kr(),o=new URLSearchParams(window.location.search).get("origin"),l=async()=>{var f;s(!0);try{const m=window.location.origin,g=await e(`${Jr}/users/create-stripe-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:{priceKey:"learn_monthly",successUrl:`${window.location.origin}/success?origin=${o}`,cancelUrl:`${window.location.origin}/cancel?origin=${o}`,trial:!0}});if(!g.ok){const C=await g.json();throw console.error("Failed to create checkout:",C),new Error(C.error||"Failed to create checkout session")}const b=(f=(await g.json()).message)==null?void 0:f.checkoutUrl;if(!b)throw new Error("No checkout URL returned");await t({type:"OPEN_STRIPE",url:b,origin:window.location.origin})}catch(m){console.error("Error creating Stripe checkout:",m)}finally{}},u=f=>{f.data.type==="STRIPE_SUCCESS_FORWARD"&&(console.log("STRIPE_SUCCESS_FORWARD received"),s(!1),console.log("Force refreshing token"),n(),console.log("Token force refreshed"),setTimeout(()=>{console.log("Setting auth step to trial claimed"),a("trialClaimed")},1e3))};y.useEffect(()=>(window.addEventListener("message",u),()=>{window.removeEventListener("message",u)}),[]);const d=()=>{a("questionairre")};return c.jsxs("div",{className:"px-[30px] flex flex-col gap-2 text-center h-full justify-center mb-20",children:[c.jsxs("h1",{className:"text-2xl font-semibold mb-2",children:["Claim your free ",c.jsx("span",{className:"underline decoration-wavy decoration-orange-600 decoration-2 underline-offset-4",children:"Learn+"})," trial"]}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Experience the full power of BetterCampus. Your card will not be charged for 7 days, cancel anytime."}),c.jsx("button",{onClick:l,className:"bg-brand-gradient text-white px-4 py-4 rounded-xl font-semibold",children:r?"Loading...":"Continue with free trial"}),c.jsx("button",{onClick:d,className:"text-gray-600 px-4 py-2 hover:text-black transition-all duration-200",children:"Skip for now"})]})},B0e=()=>{const{setAuthStep:t}=kr(),[e,n]=y.useState(!0),[r,s]=y.useState({width:window.innerWidth,height:window.innerHeight});y.useEffect(()=>{const i=()=>{s({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const a=()=>{t("questionairre")};return c.jsxs("div",{className:"px-[30px] flex flex-col gap-2 text-center h-full justify-center mb-20 relative",children:[e&&c.jsx(zw,{width:r.width,height:r.height,recycle:!1,numberOfPieces:150,gravity:.2,initialVelocityY:-10,wind:.02,drawShape:i=>{const o=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"],l=o[Math.floor(Math.random()*o.length)];i.fillStyle=l,i.beginPath(),i.arc(0,0,4,0,2*Math.PI),i.fill()},onConfettiComplete:()=>n(!1)}),c.jsx("h1",{className:"text-2xl font-semibold",children:"Welcome to Learn+"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"You can now use all the features of Learn+ for free for 7 days! You can cancel anytime."}),c.jsx("button",{onClick:a,className:"bg-brand-gradient text-white px-4 py-4 rounded-xl font-semibold",children:"Next"})]})},L0e=()=>{const{updateOptions:t,sendMessage:e}=ut(),{previouslyAppliedTheme:n,setAuthStep:r,postReapplyHandler:s,loginState:a,handleAuthFinish:i}=kr(),[o,l]=y.useState(!1),u=()=>{a.type==="signup"?r("claimTrial"):i()},d=()=>{l(!o),t({selected_theme:{title:n.title,code:n.code,category:n.category,exports:n.exports}}),e({type:"LOAD_THEME",payload:{exports:JSON.parse(n.exports)}})};return c.jsxs("div",{className:"px-[30px] mb-[30px] flex flex-col h-full text-gray-500",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Let's get you back on track"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"It looks like you've applied a theme before. Would you like to reapply it?"})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("img",{src:n.preview,alt:"logo",className:"h-30 w-48 object-cover rounded-xl"}),c.jsx("p",{className:"text-black text-center text-sm mt-2",children:n.title}),c.jsxs("button",{onClick:d,className:`w-[120px] flex items-center justify-center ${o?"bg-green-500":"bg-blue-500"} font-medium text-white text-sm mt-2 py-2 px-4 rounded-lg overflow-hidden transition-all duration-200 ease-out ${o?"gap-1":"gap-0"}`,children:[c.jsx(Wo,{mode:"wait",children:o&&c.jsx(pa.div,{initial:{opacity:0,width:0,marginRight:0},animate:{opacity:1,width:16,marginRight:0},exit:{opacity:0,width:0,marginRight:0},transition:{duration:.1,ease:"easeOut"},className:"flex-shrink-0",children:c.jsx(or,{className:"size-4"})},"check")}),c.jsx(pa.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},children:o?"Done":"Reapply"})]})]})}),c.jsx("div",{className:"flex flex-col gap-[10px]",children:c.jsx("button",{style:{background:"linear-gradient(90deg, #ffa952,#ff686c)"},className:"flex items-center justify-center gap-[8px] py-[12px] rounded-full w-full font-medium text-white",onClick:()=>u(),children:o?"Next":"Skip"})})]})},hgt=({onClick:t})=>c.jsx("button",{onClick:t,className:"z-30 shadow-lg absolute top-[10px] right-[10px] bg-white rounded-full p-[10px] hover:scale-108 transition-all duration-200",children:c.jsx(ys,{className:"w-[20px] h-[20px]"})}),fgt=()=>{var u,d,f,m,g,x;const{authStep:t,setAuthStep:e,showConfetti:n,setShowConfetti:r}=kr(),[s,a]=y.useState({width:window.innerWidth,height:window.innerHeight});y.useEffect(()=>{const b=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const i={welcome:{left:dht,right:tft,handleBack:null,handleSkip:null,exit:null},quickSettings:{left:Zht,right:null,handleBack:null,handleSkip:null,exit:null},logins:{left:uht,right:vl,handleBack:null,handleSkip:null,exit:()=>e("noAccount")},googleSignup:{left:lht,right:vl,handleBack:()=>e("logins"),handleSkip:null,exit:()=>e("noAccount")},outlookSignup:{left:Zpt,right:vl,handleBack:()=>e("logins"),handleSkip:null,exit:()=>e("noAccount")},emailSignup:{left:eht,right:vl,handleBack:()=>e("logins"),handleSkip:null,exit:()=>e("noAccount")},magicLinkSent:{left:sft,right:vl,handleBack:()=>e("emailSignup"),handleSkip:null,exit:()=>e("noAccount")},underAge:{left:pfe,right:Sfe,handleBack:()=>e("logins"),handleSkip:null,exit:null},questionairre:{left:gfe,right:Wl,handleBack:null,handleSkip:null,exit:null},questionairre3:{left:kfe,right:nft,handleBack:null,handleSkip:null,exit:null},thankYou:{left:vfe,right:Wl,handleBack:null,handleSkip:null,exit:null},noAccount:{left:eft,right:vl,handleBack:null,handleSkip:null,exit:null},sync:{left:P0e,right:Wl,handleBack:null,handleSkip:null,exit:null},claimTrial:{left:F0e,right:Wl,handleBack:null,handleSkip:null,exit:null},trialClaimed:{left:B0e,right:Wl,handleBack:null,handleSkip:null,exit:null},previouslyAppliedTheme:{left:L0e,right:Wl,handleBack:null,handleSkip:null,exit:null}},o=(u=i[t])==null?void 0:u.left,l=(d=i[t])==null?void 0:d.right;return c.jsxs(c.Fragment,{children:[n&&c.jsx(zw,{width:s.width,height:s.height,recycle:!1,numberOfPieces:200,gravity:.2,initialVelocityY:-10,wind:.02,tweenDuration:1500,onConfettiComplete:()=>r(!1)}),c.jsxs(Bhe,{children:[c.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-y-auto",children:[((f=i[t])==null?void 0:f.exit)&&c.jsx(hgt,{onClick:(m=i[t])==null?void 0:m.exit}),c.jsx(Wo,{mode:"wait",children:o&&c.jsxs(pa.div,{initial:{x:40,opacity:0},animate:{x:0,opacity:1},exit:{x:-40,opacity:0},transition:{duration:.17,ease:"easeOut"},className:"w-full h-full flex flex-col",children:[c.jsx(Lhe,{handleBack:(g=i[t])==null?void 0:g.handleBack,handleSkip:(x=i[t])==null?void 0:x.handleSkip}),c.jsx(o,{})]},t)})]}),l&&c.jsx(l,{})]})]})},mgt=()=>{const[t,e]=y.useState(!1);return y.useEffect(()=>{var r;(r=window==null?void 0:window.top)==null||r.postMessage({type:"LOAD_COMPLETE"},"*");const n=setTimeout(()=>{e(!0)},100);return()=>clearTimeout(n)},[]),c.jsx("div",{className:`relative h-full max-w-[1000px] h-screen mx-auto transition-opacity duration-1000 ease-in-out ${t?"opacity-100":"opacity-0"}`,children:c.jsx(fgt,{})})},pgt=()=>{const e=new URLSearchParams(window.location.search??"").get("skipWelcome")==="true";return c.jsx(Wd,{children:c.jsx(eJ,{initial:{page:e?"logins":"welcome",step:e?"logins":"welcome"},children:c.jsx(mgt,{})})})},qN=()=>c.jsx("div",{className:"absolute -top-[6px] -right-[10px] bg-black text-white text-xs px-2 py-1 rounded-full",children:"Last used"}),ggt=()=>{const{setAuthStep:t}=kr(),e=localStorage.getItem("last_used_login_method"),{origin:n}=ut();return c.jsxs("div",{className:"px-[30px] flex flex-col h-full",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold mb-[5px]",children:"Log in to BetterCampus"}),c.jsx("p",{className:"text-gray-500",children:"Over 1.5 million students made their Canvas better"})]}),c.jsxs("div",{className:"flex flex-col gap-[10px] mt-[10px]",children:[c.jsxs("button",{onClick:()=>t("googleLogin"),className:"relative hover:bg-gray-100 transition-all duration-200 shadow-xs flex justify-center items-center rounded-xl w-full p-3.5 border border-[#e5e5e5] gap-[10px] font-medium",children:[e==="google"&&c.jsx(qN,{}),c.jsx(zv,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Continue with Google"})]}),c.jsx("div",{children:c.jsxs("button",{onClick:()=>t("outlookLogin"),className:"relative hover:bg-gray-100 transition-all duration-200 shadow-xs flex justify-center items-center rounded-xl w-full p-3.5 border border-[#e5e5e5] gap-[10px] font-medium",children:[e==="outlook"&&c.jsx(qN,{}),c.jsx(gE,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Continue with Microsoft"})]})})]}),c.jsx("div",{className:"my-4",children:c.jsx("div",{className:"h-[1px] bg-gray-200 w-full relative",children:c.jsx("div",{className:"text-gray-500 text-center text-sm w-full h-full absolute left-0 top-0 flex items-center justify-center",children:c.jsx("span",{className:"bg-white px-2 text-xs",children:"OR"})})})}),c.jsx("div",{children:c.jsxs("button",{onClick:()=>t("emailLogin"),className:"hover:bg-gray-100 transition-all duration-200 shadow-xs flex justify-center items-center rounded-xl w-full p-3.5 border border-[#e5e5e5] gap-[10px] font-medium",children:[e==="email"&&c.jsx(qN,{}),c.jsx(hZ,{className:"w-[20px] h-[20px]"}),c.jsx("span",{children:"Continue with Email"})]})}),c.jsx("div",{className:"flex flex-col gap-[10px] flex-1 mb-[30px]",children:c.jsx("div",{className:"mt-auto",children:c.jsxs("button",{className:"w-full  text-sm p-[10px] text-gray-500",children:["Don't have an account? ",c.jsx("a",{href:`/signup?skipWelcome=true&signup=true&origin=${n}`,className:"underline font-medium text-black",children:"Sign up"})]})})})]})},vgt="1040020018644-6cb03fh4mg7j5sse5cu9s46ihn9g7d56.apps.googleusercontent.com",ygt=()=>{const{handleAuth:t,loginState:e,setAuthStep:n,hasCompletedSignup:r}=kr(),{googleLogin:s}=mfe(),{updateOptions:a}=ut(),i=o=>{const l=s(o);t(l,"login")};return c.jsxs("div",{className:"px-[30px] flex flex-col h-full",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold mb-[5px]",children:"Log in to BetterCampus"}),c.jsx("p",{className:"text-gray-500",children:"Over 1.5 million students made their Canvas better"})]}),c.jsx("div",{className:"flex flex-col gap-[10px] mt-[10px]",children:c.jsxs(s_,{clientId:vgt,children:[e.error&&c.jsx("p",{className:"text-red-500",children:e.error}),c.jsx(ffe,{onSuccess:i,onError:()=>{}}),e.loading&&c.jsx("div",{children:c.jsx(js,{className:"w-4 h-4 animate-spin"})})]})})]})},xgt=()=>{const{handleAuth:t,loginState:e}=kr(),{microsoftLogin:n}=I0e(),r=async()=>{const s=await n();t(s,"login")};return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"px-[30px] text-gray-500",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Log in to BetterCampus"}),c.jsx("p",{children:"Over 1.5 million students made their Canvas better."}),c.jsxs("div",{className:"mt-[20px]",children:[c.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 rounded-md border border-gray-300 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[e.loading&&c.jsx("span",{className:"text-gray-500 text-sm flex items-center gap-2 mt-2",children:c.jsx(js,{className:"w-4 h-4 animate-spin"})}),c.jsx(gE,{className:"size-5"}),"Sign in with Microsoft"]}),e.success&&c.jsxs("span",{className:"text-sm flex items-center gap-2 mt-2 text-green-700",children:[c.jsx(or,{className:"w-4 h-4"})," Success!"]})]})]})})},bgt=kc(Nl,jl),wgt=()=>{const[t,e]=y.useState(""),[n,r]=y.useState(!1),{setAuthStep:s,setEmailLogin:a}=kr(),i=async()=>{r(!0);let l;const u=await bgt.auth.signInWithOtp({email:t});u.data,l=u.error,l?(console.error(l),r(!1)):(console.log("Magic link sent to:",t),s("emailLoginCode"))},o=l=>{l.preventDefault(),a(t),i()};return c.jsxs("div",{className:"px-[30px] flex flex-col gap-[10px]",children:[c.jsx("h1",{className:"text-2xl font-semibold mb-[5px]",children:"Log in to BetterCampus"}),c.jsx("p",{className:"text-gray-500",children:"Over 1.5 million students made their Canvas better."}),c.jsx("p",{className:"text-black text-base font-medium",children:"Email"}),c.jsx("input",{className:"w-full rounded-lg shadow-xs text-gray-500 text-sm p-[10px] border border-gray-200",type:"email",placeholder:"lebronjames@gmail.com",value:t,onChange:l=>e(l.target.value),onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),o(l))}}),c.jsxs("button",{onClick:o,className:`mt-2 w-full rounded-full shadow-xs text-white text-sm p-[10px] border border-gray-200 flex items-center justify-center gap-2 ${t.includes("@")?"opacity-100":"opacity-50 pointer-events-none"} `,style:{background:"linear-gradient(120deg, var(--brand-1), var(--brand-2))"},children:[n&&c.jsx("span",{className:"text-gray-500 text-sm flex items-center gap-2 mt-2",children:c.jsx(js,{className:"w-4 h-4 animate-spin text-white"})}),c.jsx("span",{children:"Log in"})]})]})},QY=kc(Nl,jl),Cgt=()=>{const{emailLogin:t,setAuthStep:e,setToken:n,handleAuth:r,loginState:s}=kr(),{updateOptions:a}=ut(),[i,o]=y.useState(!1),[l,u]=y.useState(["","","","","",""]),[d,f]=y.useState(!1),[m,g]=y.useState(null),[x,b]=y.useState(60),[C,S]=y.useState(!1),w=(D,z)=>{if(z.length>1)return;const F=[...l];if(F[D]=z,u(F),z&&D<5){const R=document.querySelector(`input[data-index="${D+1}"]`);R&&R.focus()}},E=(D,z)=>{if(z.key==="Backspace"&&!l[D]&&D>0){const F=document.querySelector(`input[data-index="${D-1}"]`);F&&F.focus()}},T=D=>{D.preventDefault();const F=D.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(F.length===6){const R=[...l];for(let L=0;L<6;L++)R[L]=F[L]||"";if(u(R),F.length===6){const L=document.querySelector('input[data-index="5"]');L&&L.focus()}}},_=async()=>{if(!(x>0)){S(!0),g(null);try{const{error:D}=await QY.auth.signInWithOtp({email:t});D?(g("Failed to resend code. Please try again."),console.error(D)):b(60)}catch(D){g("Failed to resend code. Please try again."),console.error(D)}finally{S(!1)}}};y.useEffect(()=>{l.join("").length===6&&A()},[l]),y.useEffect(()=>{},[]),y.useEffect(()=>{if(x<=0)return;const D=setTimeout(()=>{b(z=>z-1)},1e3);return()=>clearTimeout(D)},[x]);const A=async()=>{const D=l.join("");if(D.length!==6)return;localStorage.setItem("last_used_login_method","email");const z=await QY.auth.verifyOtp({email:t,token:D,type:"email"});r(z,"login")},j=()=>(60-x)/60*100;return c.jsxs("div",{className:"px-[30px] text-gray-500",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:" Check your inbox"}),c.jsxs("p",{className:"mb-6",children:["We sent a code to ",t," - pop it in below & you're in"]}),c.jsx("div",{className:"flex gap-2 justify-center mb-6",children:l.map((D,z)=>c.jsx("input",{"data-index":z,type:"text",maxLength:1,value:D,onChange:F=>w(z,F.target.value),onKeyDown:F=>E(z,F),onPaste:T,className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"0"},z))}),c.jsxs("div",{className:"mb-10",children:[i&&c.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-2 justify-center",children:[c.jsx(js,{className:"w-4 h-4 animate-spin"})," Verifying..."]}),m&&c.jsx("p",{className:"text-red-500 text-sm text-center",children:m}),d&&c.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-2 justify-center",children:[c.jsx(or,{className:"w-4 h-4"})," Success!"]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"If the email doesn't show up within 5 minutes, click below to resend."}),c.jsxs("button",{onClick:_,disabled:x>0||C,className:`relative flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x>0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#ff895f] text-white hover:bg-[#ff895f]/80"}`,children:[c.jsxs("p",{className:"z-1 relative flex items-center gap-2",children:[C?c.jsx(js,{className:"w-4 h-4 animate-spin"}):c.jsx(fk,{className:"w-4 h-4"}),c.jsx("span",{children:x>0?`Resend in ${x}s`:"Resend code"})]}),x>0&&c.jsx("div",{className:"absolute inset-0 rounded-lg overflow-hidden",children:c.jsx("div",{className:"h-full bg-[#ff895f]/20 transition-all duration-1000 ease-linear",style:{width:`${j()}%`}})})]})]})]})},Sgt=t_({month:Nf().min(1,"Please select a month"),year:Nf().min(1,"Please select a year")}),kgt=()=>{const{setAuthStep:t,token:e,previouslyAppliedTheme:n,postReapplyHandle:r,loginState:s,handleAuthFinish:a}=kr(),[i,o]=y.useState(!0),{authenticatedFetch:l,getOptions:u}=ut(),d=ZE({resolver:n_(Sgt),defaultValues:{month:"",year:""}}),f=()=>{const g=d.getValues(),x=g.month,b=g.year;return!(!x||!b)};y.useEffect(()=>{const g=d.watch(x=>{o(!f())});return()=>g.unsubscribe()},[d]);const m=async g=>{const x=new Date().getFullYear(),b=new Date().getMonth()+1,C=parseInt(g.year),S=parseInt(g.month);if(x-C<13||x-C===13&&b<S){t("underAge");return}await fetch(`${Jr}/users/verify-age`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.access_token}`},body:JSON.stringify({year:C})}),n?t("previouslyAppliedTheme"):a()};return c.jsxs("div",{className:"px-[30px] text-gray-500",children:[c.jsx("h1",{className:"text-2xl font-semibold text-black mb-[5px]",children:"Age Verification Required"}),c.jsx("p",{children:"We need to verify your age before you can continue."}),c.jsx("div",{className:"mt-[20px]",children:c.jsx(e_,{...d,children:c.jsxs("form",{onSubmit:d.handleSubmit(g=>m(g)),children:[c.jsx(r_,{form:d}),c.jsx("div",{className:`mt-4 ${i?"opacity-50 pointer-events-none":""}`,children:c.jsx("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 rounded-md border border-gray-300 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Continue"})})]})})})]})},Egt=({onClick:t})=>c.jsx("button",{onClick:t,className:"hover:scale-108 transition-all duration-200 z-30 shadow-lg absolute top-[10px] right-[10px] bg-white rounded-full p-[10px]",children:c.jsx(ys,{className:"w-[20px] h-[20px]"})}),ZY=()=>c.jsx("div",{className:"bg-gray-100 w-full h-full bg-cover bg-center flex items-center bg-size-[200%]",style:{backgroundImage:"url(iconxl.png)"}}),_gt=()=>{var o,l,u,d,f,m;const{authStep:t,setAuthStep:e}=kr(),n=y.useRef(!0),{closeModal:r}=ut();y.useEffect(()=>{n.current&&(n.current=!1)},[t]);const s={login:{left:ggt,right:vl,handleBack:null,handleSkip:null,exit:r},googleLogin:{left:ygt,right:vl,handleBack:()=>e("login"),handleSkip:null,exit:r},outlookLogin:{left:xgt,right:vl,handleBack:()=>e("login"),handleSkip:null,exit:r},emailLogin:{left:wgt,right:vl,handleBack:()=>e("login"),handleSkip:null,exit:r},emailLoginCode:{left:Cgt,right:vl,handleBack:()=>e("emailLogin"),handleSkip:null,exit:r},ageVerification:{left:kgt,right:vl,handleBack:()=>e("login"),handleSkip:null,exit:r},questionairre:{left:gfe,right:Wl,handleBack:null,handleSkip:null,exit:null},questionairre3:{left:kfe,right:ZY,handleBack:null,handleSkip:null,exit:null},underAge:{left:pfe,right:Sfe,handleBack:()=>e("login"),handleSkip:null,exit:null},thankYou:{left:vfe,right:ZY,handleBack:null,handleSkip:null,exit:r},sync:{left:P0e,right:Wl,handleBack:null,handleSkip:null,exit:null},claimTrial:{left:F0e,right:Wl,handleBack:null,handleSkip:null,exit:null},trialClaimed:{left:B0e,right:Wl,handleBack:null,handleSkip:null,exit:null},previouslyAppliedTheme:{left:L0e,right:Wl,handleBack:null,handleSkip:null,exit:null}},a=(o=s[t])==null?void 0:o.left,i=(l=s[t])==null?void 0:l.right;return c.jsxs(Bhe,{children:[c.jsxs("div",{className:"flex-1 flex flex-col h-full w-full",children:[((u=s[t])==null?void 0:u.exit)&&c.jsx(Egt,{onClick:(d=s[t])==null?void 0:d.exit}),c.jsx(Wo,{mode:"wait",children:c.jsxs(pa.div,{initial:n.current?!1:{x:40,opacity:0},animate:{x:0,opacity:1},exit:{x:-40,opacity:0},transition:{duration:.17,ease:"easeOut"},className:"w-full h-full flex flex-col",children:[c.jsx(Lhe,{handleBack:(f=s[t])==null?void 0:f.handleBack,handleSkip:(m=s[t])==null?void 0:m.handleSkip}),a&&c.jsx(a,{})]},t)})]}),i&&c.jsx(i,{})]})},Tgt=()=>c.jsx(Wd,{children:c.jsx(eJ,{initial:{page:"login",step:"login"},children:c.jsx("div",{className:"relative h-full  overflow-scroll h-screen max-w-[1000px] mx-auto",children:c.jsx(_gt,{})})})}),Agt=()=>{const{getOptions:t,ready:e,useRerenderListener:n,sendMessage:r}=ut(),{handleInitialSync:s}=Gw();y.useRef(!1);const[a,i]=y.useState(!1),{options:o,trigger:l}=n(["google_cal_push_settings","microsoft_cal_push_settings"]);new URLSearchParams(window.location.search).get("reinit"),y.useEffect(()=>{var m,g;if(!a)return;(((m=o==null?void 0:o.google_cal_push_settings)==null?void 0:m.betterCampusCalendarId)||((g=o==null?void 0:o.microsoft_cal_push_settings)==null?void 0:g.betterCampusCalendarId))&&s()},[a,o]);const d=()=>{r({type:"CLOSE_SHARED_COMPONENT",payload:{component:"CalendarSyncGate"}})};return c.jsxs("div",{className:"p-8 relative bg-white h-full",children:[c.jsx("button",{className:"absolute top-4 right-4 p-1 rounded-md hover:bg-gray-100 transition-colors cursor-pointer","aria-label":"Close",onClick:d,children:c.jsx(ys,{className:"w-5 h-5 text-gray-500"})}),c.jsx("h1",{className:"text-xl font-semibold text-black mb-[5px]",children:"Calendar Sync"}),c.jsx(O0e,{})]})},Ngt=()=>c.jsx(Wd,{requiresLocalStorage:!0,children:c.jsx(s_,{clientId:"1040020018644-6cb03fh4mg7j5sse5cu9s46ihn9g7d56.apps.googleusercontent.com",children:c.jsx(Agt,{})})}),jgt=()=>{const[t,e]=y.useState(!1),n=r=>{console.log("messageListener",r),r.data.type==="SUBSCRIPTION_ACTIVATED"?e(!0):r.data.type==="SUBSCRIPTION_NOT_ACTIVATED"&&console.log("Subscription not activated yet, waiting...")};return y.useEffect(()=>(window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}),[]),c.jsx("div",{className:"flex flex-col h-full overflow-y-auto items-center justify-center min-h-screen bg-gradient-to-b from-orange-50/30 via-white to-white",children:c.jsx("div",{className:"px-10 pt-8 pb-12 text-center max-w-2xl mx-auto",children:t?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:[c.jsx(_l,{className:"size-4"}),c.jsx("span",{children:"Activated!"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:"You can close this page now."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx("span",{className:"w-5 h-5 border-3 border-orange-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-gray-700 text-lg font-medium",children:"Activating..."})]}),c.jsx("p",{className:"text-sm text-gray-500",children:"This should only take a moment"})]})})})},Dgt=()=>c.jsx(jgt,{}),Rgt=()=>{const{sendToBackgroundScript:t,authenticatedFetch:e,forceRefreshToken:n,removeSharedComponent:r}=ut(),{hasUsedTrial:s,planType:a}=wa(),[i,o]=y.useState(null),[l,u]=y.useState("yearly"),[d,f]=y.useState({}),[m,g]=y.useState(!0),[x,b]=y.useState(!1),[C,S]=y.useState({width:window.innerWidth,height:window.innerHeight}),w=[{name:"Free",monthlyPrice:"$0",yearlyPrice:"$0",description:"Basic tools to get started",subdescription:"Everything in OG BetterCanvas",features:["Use and create themes","Basic task planning","Basic notes","Basic calendar sync"],image:null,radialGradient:"radial-gradient(at 20% -30%, rgba(156, 163, 175, 0.15) 0, transparent 50%), radial-gradient(at 50% -10%, rgba(156, 163, 175, 0.1) 0, transparent 50%), #fff",border:"border-[#ededed]",buttonStyle:"bg-gray-100 text-gray-600 hover:bg-gray-200",monthlyKey:null,yearlyKey:null},{name:"Style+",monthlyPrice:"$3",yearlyPrice:"$30",description:"Fits your vibe",subdescription:"Everything in Free, and",features:["Unlimited creations","Auto-rotate themes","Theme history","Advanced theme controls"],image:"/style_guy.png",radialGradient:"radial-gradient(at 20% -30%, rgb(176 240 255) 0px, rgba(0, 0, 0, 0) 40%), radial-gradient(at 50% -10%, rgb(221 209 255) 0px, rgba(0, 0, 0, 0) 40%), radial-gradient(at 90% 10%, rgb(128 159 255) 0px, rgba(0, 0, 0, 0) 40%), rgb(255, 255, 255)",border:"border-[#ece7ff]",buttonStyle:"bg-brand-gradient text-white hover:brightness-95 shadow-lg shadow-orange-500/20",monthlyKey:"style_monthly",yearlyKey:"style_annually",popular:!1},{name:"Learn+",monthlyPrice:"$11",yearlyPrice:"$110",image:"/upgrade_guy.png",description:"Save time and do better",subdescription:"Everything in Style+, and",features:["Study guide from your files","Auto notes from lectures","Unlimited task planning","GPA and grade tracking"],radialGradient:"radial-gradient(at 20% -30%, rgb(255 230 70) 0px, rgba(0, 0, 0, 0) 40%), radial-gradient(at 50% -10%, rgb(255 127 18) 0px, rgba(0, 0, 0, 0) 40%), radial-gradient(at 90% 10%, rgb(255 0 99) 0px, rgba(0, 0, 0, 0) 40%), rgb(255, 255, 255)",border:"border-[#ffe1e7]",buttonStyle:"bg-brand-gradient text-white hover:brightness-95 shadow-lg shadow-blue-500/20",monthlyKey:"learn_monthly",yearlyKey:"learn_annually",popular:!0}];y.useEffect(()=>{(async()=>{var H;try{const P=await e(`${Jr}/users/get-stripe-prices`,{method:"GET"});if(!P.ok){console.error("Failed to fetch prices:",await P.json()),g(!1);return}const I=await P.json();f(((H=I.message)==null?void 0:H.prices)||{})}catch(P){console.error("Error fetching prices:",P)}finally{g(!1)}})()},[e]);const E=(O,H)=>{if(!O||!d[O])return H;const P=d[O].amount/100;return`$${P.toFixed(P%1===0?0:2)}`},T=O=>({...O,monthlyPrice:E(O.monthlyKey,O.monthlyPrice),yearlyPrice:E(O.yearlyKey,O.yearlyPrice)}),_=async O=>{var P;const H=l==="monthly"?O.monthlyKey:O.yearlyKey;if(H){o(O.name);try{const I=window.location.origin,U=await e(`${Jr}/users/create-stripe-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:{priceKey:H,successUrl:`${I}/success?origin=${I}`,cancelUrl:`${I}/cancel?origin=${I}`,origin:I,trial:!s&&O.name==="Learn+"}});if(!U.ok){const B=await U.json();throw console.error("Failed to create checkout:",B),new Error(B.error||"Failed to create checkout session")}const Y=(P=(await U.json()).message)==null?void 0:P.checkoutUrl;if(!Y)throw new Error("No checkout URL returned");await t({type:"OPEN_STRIPE",url:Y,origin:I})}catch(I){console.error("Error creating Stripe checkout:",I)}finally{o(null)}}},[A,j]=y.useState(new Set),D=y.useRef(null),[z,F]=y.useState(!1),R=O=>{j(H=>{const P=new Set(H);return P.has(O)?P.delete(O):P.add(O),P})},L=O=>{O.data.type==="STRIPE_SUCCESS_FORWARD"&&F(!0)};return y.useEffect(()=>(window.addEventListener("message",L),()=>{window.removeEventListener("message",L)}),[]),y.useEffect(()=>{const O=()=>{S({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),a==="pro"||a==="trial"||a==="style"?c.jsxs("div",{className:"flex flex-col h-full overflow-y-auto items-center justify-center min-h-screen bg-gradient-to-b from-orange-50/30 via-white to-white relative",children:[c.jsx(zw,{width:C.width,height:C.height,recycle:!1,numberOfPieces:100,gravity:.2,initialVelocityY:-15,wind:.02,tweenDuration:500,drawShape:O=>{const H=["#ff6b6b","#ffa952","#ff686c","#ff8c42","#ff6b9d","#ff8c69","#ffa07a","#ffb347"],P=H[Math.floor(Math.random()*H.length)];O.fillStyle=P,O.beginPath(),O.arc(0,0,5,0,2*Math.PI),O.fill()}}),c.jsxs("div",{className:"px-10 pt-8 pb-12 text-center max-w-2xl mx-auto",children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-full blur-2xl animate-pulse"}),c.jsx(_l,{className:"relative size-20 text-green-500",strokeWidth:2})]})}),c.jsx("h1",{className:"text-5xl font-bold text-black mb-4 tracking-wide",style:{fontFamily:"'Instrument Serif', serif"},children:"You've been upgraded!"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Now experience the full power of BetterCampus!"}),c.jsx("div",{className:"mb-8 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-200/40 to-pink-200/40 rounded-full blur-3xl -z-10"}),c.jsx("img",{src:"/success_guy.png",className:"size-48 object-contain mx-auto drop-shadow-lg",alt:"Success celebration"})]})}),c.jsx("div",{className:"space-y-6",children:c.jsx("div",{children:c.jsx("button",{onClick:()=>r("UpgradeModal"),className:"inline-flex items-center gap-2 px-8 py-3 bg-brand-gradient text-white font-semibold rounded-xl hover:brightness-95 transition-all duration-200 shadow-lg shadow-orange-500/20 hover:shadow-xl hover:shadow-orange-500/30",children:"Let's go!"})})})]})]}):c.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[c.jsxs("div",{className:"px-10 pt-8 pb-5 text-center",children:[c.jsx("button",{className:"absolute top-4 right-4 size-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",onClick:()=>r("UpgradeModal"),children:c.jsx(ys,{className:"size-4"})}),c.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[c.jsx("img",{src:"/extlogo.png",className:"size-4.5 object-contain"}),c.jsx("h3",{className:"text font-semibold text-black",children:"BetterCampus"})]}),c.jsx("h1",{className:"text-4xl font-bold text-black mb-3 tracking-wide",style:{fontFamily:"'Instrument Serif', serif"},children:"Study smarter. Organize faster. Stress less."}),c.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto mb-5",children:"Tools that help you study faster, plan assignments, and stay on track."}),c.jsxs("div",{className:"flex items-center justify-center gap-4 relative",children:[c.jsx("span",{className:`text-sm font-medium ${l==="monthly"?"text-black":"text-gray-500"}`,children:"Monthly"}),c.jsx("button",{onClick:()=>u(l==="monthly"?"yearly":"monthly"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${l==="yearly"?"bg-brand-gradient":"bg-gray-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l==="yearly"?"translate-x-6":"translate-x-1"}`})}),c.jsxs("span",{className:`text-sm font-medium relative ${l==="yearly"?"text-black":"text-gray-500"}`,children:["Yearly",c.jsx("span",{className:"w-max ml-2 absolute -right-2 translate-x-full ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"Save 17%"})]})]})]}),c.jsx("div",{className:"px-10 pb-4 flex-1",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-7xl mx-auto",children:w.map((O,H)=>{const P=T(O);return c.jsxs("div",{className:"relative",children:[P.image&&c.jsx("img",{src:P.image,className:"z-10 absolute top-[-5%] right-[-15%] size-[110px] object-contain"}),P.popular&&c.jsx("div",{className:"absolute translate-y-[-50%] left-1/2 -translate-x-1/2 z-20",children:c.jsx("span",{className:"bg-brand-gradient text-white px-4 py-1 rounded-full text-xs font-semibold",children:"Most Popular"})}),c.jsxs("div",{className:`
                                relative rounded-2xl shadow-lg bg-white overflow-hidden group
                                transition-all duration-300 border-2 ${P.border}
                                flex flex-col
                            `,children:[c.jsx("div",{className:"absolute inset-0 rounded-2xl transition-opacity duration-300 group-hover:opacity-90 w-[200%] left-[-50%] top-[-33%]",style:{background:P.radialGradient}}),c.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/30"}),c.jsxs("div",{className:"relative z-10 py-5 px-6 flex flex-col flex-1",children:[c.jsx("h3",{className:"text-xl font-bold text-black tracking-wide",style:{fontFamily:"'Instrument Serif', serif"},children:P.name}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:P.description}),c.jsx("div",{className:"mb-1",children:m?c.jsx("div",{className:"h-12 flex items-center",children:c.jsx("span",{className:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"})}):c.jsx(c.Fragment,{children:c.jsxs("div",{className:"flex gap-2 items-center tracking-wider",children:[c.jsx("span",{className:"text-3xl font-bold text-black",children:l==="yearly"?`$${(parseFloat(P.yearlyPrice.replace("$",""))/12).toFixed(2)}`:P.monthlyPrice}),P.name!=="Free"&&c.jsxs("div",{className:"text-gray-500 text-xs font-semibold font-sans tracking-normal",children:[c.jsx("p",{children:"per month"}),l==="yearly"&&c.jsx("p",{children:"billed yearly"})]})]})})}),c.jsx("button",{onClick:()=>_(O),disabled:i===O.name||m||!(l==="monthly"?O.monthlyKey:O.yearlyKey),className:`
                                        w-full py-2 px-4 rounded-xl font-semibold
                                        transition-all duration-200 mt-1 flex items-center justify-center gap-2 text-md
                                        ${l==="monthly"?O.monthlyKey:O.yearlyKey,P.buttonStyle}
                                        ${i===O.name||m?"opacity-50 cursor-not-allowed":""}
                                        ${(l==="monthly"?O.monthlyKey:O.yearlyKey)?"cursor-pointer":"cursor-default"}
                                    `,children:i===O.name?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Processing..."})]}):!s&&O.name==="Learn+"?c.jsxs(c.Fragment,{children:[c.jsx(uR,{className:"size-4 text-white"}),c.jsx("span",{className:"text-white",children:"Try free for 7 days"})]}):(l==="monthly"?O.monthlyKey:O.yearlyKey)?c.jsx("span",{className:"text-white",children:"Upgrade Now"}):c.jsx("span",{className:"text-gray-500",children:"Current Plan"})}),c.jsx("p",{className:"text-sm text-black font-semibold mt-4 mb-2",children:P.subdescription}),c.jsx("div",{className:"flex-1 mb-1",children:c.jsx("ul",{className:"space-y-2",children:P.features.map((I,U)=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(or,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:"text-sm text-gray-700",children:I})]},U))})})]})]})]},O.name)})})}),c.jsxs("div",{className:"relative h-[1px] py-4 w-[66%] mx-auto mb-10",children:[c.jsx("div",{className:"h-[1px] w-full bg-gray-200"}),c.jsxs("button",{onClick:()=>{var O;return(O=D.current)==null?void 0:O.scrollIntoView({behavior:"smooth"})},className:"bg-white px-2 translate-y-[-50%]  translate-x-[-50%] absolute left-1/2 text-left text-sm text-gray-500 hover:text-gray-700 transition-colors font-medium relative",children:["Compare plans ",c.jsx(oi,{className:"absolute -bottom-1 translate-y-full size-4 -translate-x-1/2 left-1/2"})]})]}),c.jsx("div",{className:"mx-10 mb-10 backdrop-blur-xs",children:c.jsxs("div",{children:[c.jsx("table",{className:"w-full",ref:D,children:c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold text-gray-900 px-10 pb-4",children:"What you get"}),c.jsx("th",{className:"text-center font-semibold text-gray-900 pb-4",children:"Free"}),c.jsx("th",{className:"text-center font-semibold text-gray-900 pb-4",children:"Style+"}),c.jsx("th",{className:"text-center font-semibold text-gray-900 pb-4",children:"Learn+"})]})})}),c.jsx("div",{className:"rounded-2xl border border-gray-300 overflow-hidden",children:c.jsx("table",{className:"w-full",children:c.jsx("tbody",{className:"divide-y divide-gray-200",children:c.jsxs(c.Fragment,{children:[c.jsxs("tr",{className:"",children:[c.jsx("td",{className:"px-6 py-3",children:c.jsxs("button",{onClick:()=>R("themes"),className:"flex items-center gap-2 font-semibold text-gray-900 hover:text-orange-600 transition-colors text-left",children:[A.has("themes")?c.jsx(Im,{className:"size-4 flex-shrink-0"}):c.jsx(oi,{className:"size-4 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{children:"Themes"}),c.jsx("div",{className:"text-xs font-normal text-gray-500 mt-0.5",children:"Theme saving, swaps, auto-rotation"})]})]})}),c.jsx("td",{className:"px-6 py-3 text-center text-sm text-gray-600",children:"Limited"}),c.jsx("td",{className:"px-6 py-3 text-center text-sm",children:c.jsx("span",{className:"text-orange-600 text-lg",children:""})}),c.jsx("td",{className:"px-6 py-3 text-center text-sm bg-orange-50",children:c.jsx("span",{className:"text-orange-600 text-lg",children:""})})]}),A.has("themes")&&c.jsxs(c.Fragment,{children:[c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(a_e,{className:"size-4 text-gray-600 mr-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Theme Saving"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Save your creations to your library"})]})]})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"3 themes"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]}),c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(tZ,{className:"size-4 text-gray-600 mr-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Theme Swaps"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Apply themes to your Canvas"})]})]})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"3/week"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]}),c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(C_e,{className:"size-4 text-gray-600 mr-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Auto-rotate theme"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Rotate your theme on a schedule"})]})]})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-orange-600 text-xl",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-600 text-xl",children:""})})]}),c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(DEe,{className:"size-4 text-gray-600 mr-4"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Theme History"}),c.jsx("p",{className:"text-xs text-gray-500",children:"See past themes and apply them again"})]})]})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-orange-600 text-xl",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-600 text-xl",children:""})})]})]}),c.jsxs("tr",{className:"",children:[c.jsx("td",{className:"px-6 py-3",children:c.jsxs("button",{onClick:()=>R("ai"),className:"flex items-center gap-2 font-semibold text-gray-900 hover:text-orange-600 transition-colors text-left",children:[A.has("ai")?c.jsx(Im,{className:"size-4 flex-shrink-0"}):c.jsx(oi,{className:"size-4 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{children:"Study Tools"}),c.jsx("div",{className:"text-xs font-normal text-gray-500 mt-0.5",children:"Quizzes, flashcards, chat in files"})]})]})}),c.jsx("td",{className:"px-6 py-3 text-center text-sm text-gray-600",children:"Limited"}),c.jsx("td",{className:"px-6 py-3 text-center text-sm text-gray-600",children:"Limited"}),c.jsx("td",{className:"px-6 py-3 text-center text-sm bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Full Access"})})]}),A.has("ai")&&c.jsxs(c.Fragment,{children:[c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"AI Study Tools"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Quizzes, flashcards, and chat directly in Canvas files"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"Limited"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"Limited"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]}),c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Lecture Transcriptions"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Record your lectures and never miss a moment"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"10 min/day"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"10 min/day"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"6 hr/day"})})]})]}),c.jsxs("tr",{className:"",children:[c.jsx("td",{className:"px-6 py-3",children:c.jsxs("button",{onClick:()=>R("notes"),className:"flex items-center gap-2 font-semibold text-gray-900 hover:text-orange-600 transition-colors text-left",children:[A.has("notes")?c.jsx(Im,{className:"size-4 flex-shrink-0"}):c.jsx(oi,{className:"size-4 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{children:"Productivity tools"}),c.jsx("div",{className:"text-xs font-normal text-gray-500 mt-0.5",children:"Smart notes, AI enhancement & assignment planner"})]})]})}),c.jsx("td",{className:"px-6 py-3 text-center text-sm text-gray-600",children:"6 notes"}),c.jsx("td",{className:"px-6 py-3 text-center text-sm text-gray-600",children:"6 notes"}),c.jsx("td",{className:"px-6 py-3 text-center text-sm bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]}),A.has("notes")&&c.jsxs(c.Fragment,{children:[c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Notes"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Take notes and organize by class"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"6 notes"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"6 notes"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]}),c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"AI-Enhanced Smart Notes"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Enhance your notes and combine with lecture transcriptions"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"6 notes"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"6 notes"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]}),c.jsxs("tr",{className:"bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Assignment Planner"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Schedule & track your assignments"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-600 text-xl",children:""})})]})]}),c.jsxs("tr",{className:"",children:[c.jsx("td",{className:"px-6 py-3",children:c.jsxs("button",{onClick:()=>R("storage"),className:"flex items-center gap-2 font-semibold text-gray-900 hover:text-orange-600 transition-colors text-left",children:[A.has("storage")?c.jsx(Im,{className:"size-4 flex-shrink-0"}):c.jsx(oi,{className:"size-4 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{children:"Storage, Analytics & Support"}),c.jsx("div",{className:"text-xs font-normal text-gray-500 mt-0.5",children:"Cloud storage, progress tracking & priority help"})]})]})}),c.jsx("td",{className:"px-6 py-3 text-center text-sm text-gray-600",children:"Basic"}),c.jsx("td",{className:"px-6 py-3 text-center text-sm",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Enhanced"})}),c.jsx("td",{className:"px-6 py-3 text-center text-sm bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Premium"})})]}),A.has("storage")&&c.jsxs(c.Fragment,{children:[c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Cloud Storage"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Sync your data across devices"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"100MB"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"5GB"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"50GB"})})]}),c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Learning Analytics"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Track your progress & insights"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50/30",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50/30",children:c.jsx("span",{className:"text-orange-600 text-xl",children:""})})]}),c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Priority Support"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Get help when you need it"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"Community"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50/30",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Email"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50/30",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Priority"})})]}),c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 pl-12",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Study Groups & Collaboration"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Share notes and study together"})]})})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50/30",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"3 groups"})}),c.jsx("td",{className:"px-6 py-4 text-center bg-orange-50/30",children:c.jsx("span",{className:"text-orange-700 font-semibold",children:"Unlimited"})})]})]})]})})})})]})})]})},Mgt=()=>c.jsx(Wd,{children:c.jsx(Rgt,{})}),Igt="https://api.bettercampus.com",Ogt=()=>{const[t,e]=y.useState("loading"),[n,r]=y.useState(""),[s,a]=y.useState("");return y.useEffect(()=>{(async()=>{try{const o=new URLSearchParams(window.location.search),l=o.get("email"),u=o.get("token");if(!l||!u){e("error"),r("Invalid unsubscribe link. The link may be malformed or incomplete.");return}a(l);const d=await fetch(`${Igt}/unsubscribe?email=${encodeURIComponent(l)}&token=${u}`,{method:"GET"}),f=await d.json();d.ok?(e("success"),r("You have been successfully unsubscribed from our email list.")):(e("error"),r(f.error==="Invalid token"?"Invalid or expired unsubscribe link.":"An error occurred while processing your request."))}catch(o){console.error("Unsubscribe error:",o),e("error"),r("An error occurred while processing your request. Please try again later.")}})()},[]),c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[t==="loading"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsx("div",{className:"w-5 h-5 border-3 border-orange-500 border-t-transparent rounded-full animate-spin"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing..."}),c.jsx("p",{className:"text-gray-600",children:"Please wait while we process your request."})]}),t==="success"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-full blur-xl animate-pulse"}),c.jsx(_l,{className:"relative size-16 text-green-500",strokeWidth:2})]})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Successfully Unsubscribed"}),c.jsx("p",{className:"text-gray-600 mb-4",children:n}),s&&c.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Email: ",c.jsx("span",{className:"font-mono",children:s})]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["If this was a mistake, please contact us at"," ",c.jsx("a",{href:"mailto:hey@bettercampus.com",className:"text-blue-600 hover:underline",children:"hey@bettercampus.com"})]})]}),t==="error"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-red-500/20 rounded-full blur-xl animate-pulse"}),c.jsx(sZ,{className:"relative size-16 text-red-500",strokeWidth:2})]})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Unsubscribe"}),c.jsx("p",{className:"text-gray-600 mb-6",children:n}),c.jsxs("p",{className:"text-sm text-gray-500",children:["If you continue to receive emails, please contact us at"," ",c.jsx("a",{href:"mailto:hey@bettercampus.com",className:"text-blue-600 hover:underline",children:"hey@bettercampus.com"})]})]}),c.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[c.jsx("img",{src:"/extlogo.png",alt:"BetterCampus",className:"h-5 mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-xs text-gray-400",children:"BetterCampus"})]})]})})},Pgt=()=>{const[t,e]=y.useState(null),[n,r]=y.useState(""),[s,a]=y.useState(null);return y.useEffect(()=>{const i=new URLSearchParams(window.location.search),o=i.get("success"),l=i.get("error"),u=i.get("username");o==="true"?(e("success"),a(u),r("Successfully linked your Discord account!")):l&&(e("error"),r({access_denied:"You cancelled the Discord authorization.",missing_params:"Missing authorization parameters. Please try again.",not_configured:"Discord integration is not configured.",invalid_state:"Invalid session. Please try again.",token_exchange_failed:"Failed to connect with Discord. Please try again.",user_fetch_failed:"Failed to get your Discord info. Please try again.",already_linked:"This Discord account is already linked to another BetterCampus account."}[l]||`An error occurred: ${l}`))},[]),t?c.jsx("div",{className:"fixed inset-0 w-screen h-screen flex items-center justify-center bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:c.jsxs("div",{className:"bg-white rounded-2xl p-12 shadow-2xl text-center max-w-lg",children:[t==="success"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h1",{className:"text-2xl font-semibold mb-2 text-gray-900",children:n}),s&&c.jsxs("p",{className:"text-gray-600 mb-4",children:["Connected as ",c.jsx("span",{className:"font-medium text-indigo-600",children:s})]}),c.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"You've joined the BetterCampus Discord community!"}),c.jsx("button",{onClick:()=>window.close(),className:"px-6 py-2 bg-indigo-500 hover:bg-indigo-600 rounded-lg text-white font-medium transition-colors",children:"Close"})]}),t==="error"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsx("h1",{className:"text-2xl font-semibold mb-2 text-gray-900",children:"Link Failed"}),c.jsx("p",{className:"text-gray-600 mb-6",children:n}),c.jsx("button",{onClick:()=>window.close(),className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 font-medium transition-colors",children:"Close"})]})]})}):c.jsx("div",{className:"fixed inset-0 w-screen h-screen flex items-center justify-center bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:c.jsx("div",{className:"bg-white rounded-2xl p-12 shadow-2xl text-center max-w-lg",children:c.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"})})})};function Fgt(){const t=new URLSearchParams(document.location.search);return c.jsxs(c.Fragment,{children:[c.jsxs(zye,{children:[c.jsx("title",{children:"BetterCampus"}),c.jsx("meta",{name:"description",content:"BetterCampus extension."}),c.jsx("style",{children:`
          html { background: transparent !important; }
          body { background: transparent !important; }
          #root { background: transparent !important; }
          `})]}),c.jsxs("div",{className:"antialiased min-h-screen font-sans",children:[t.has("canvas_url")&&c.jsx("base",{href:t.get("canvas_url")}),c.jsxs(Ive,{children:[c.jsx(Wi,{path:"/",element:c.jsx("div",{children:"Hello World"})}),c.jsx(Wi,{path:"/notes",element:c.jsx(lBe,{})}),c.jsx(Wi,{path:"/settings",element:c.jsx(_Be,{})}),c.jsx(Wi,{path:"/assignments",element:c.jsx(sUe,{})}),c.jsx(Wi,{path:"/trial-gate",element:c.jsx(zlt,{})}),c.jsx(Wi,{path:"/study",element:c.jsx(qut,{})}),c.jsx(Wi,{path:"/signup",element:c.jsx(pgt,{})}),c.jsx(Wi,{path:"/login",element:c.jsx(Tgt,{})}),c.jsx(Wi,{path:"/calendar",element:c.jsx(Ngt,{})}),c.jsx(Wi,{path:"/success",element:c.jsx(Dgt,{})}),c.jsx(Wi,{path:"/upgrade",element:c.jsx(Mgt,{})}),c.jsx(Wi,{path:"/unsubscribe",element:c.jsx(Ogt,{})}),c.jsx(Wi,{path:"/discord/success",element:c.jsx(Pgt,{})})]})]})]})}console.log("main.tsx loaded");const c8=document.getElementById("root");console.log("Root element:",c8);c8?(Hge.createRoot(c8).render(c.jsx(Ce.StrictMode,{children:c.jsx(jX,{children:c.jsx(sye,{children:c.jsx(Fgt,{})})})})),console.log("React app mounted")):console.error("Root element not found!");export{px as D,Z1e as a,Pa as g};
//# sourceMappingURL=index-Dn_6JbJx.js.map
